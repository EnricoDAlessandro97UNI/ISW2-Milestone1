{"sha":"65b4b985dd55138b2e977db45df7ea20263fc8bf","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjY1YjRiOTg1ZGQ1NTEzOGIyZTk3N2RiNDVkZjdlYTIwMjYzZmM4YmY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-04-24T14:44:00Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-04-24T14:44:00Z"},"message":"[SYNCOPE-662] OpenJPA upgraded to 2.4.0 - some minor adjustments to unit tests needed","tree":{"sha":"a38d271feccdef8819b596f1940f83998bc144d8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a38d271feccdef8819b596f1940f83998bc144d8"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/65b4b985dd55138b2e977db45df7ea20263fc8bf","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/65b4b985dd55138b2e977db45df7ea20263fc8bf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/65b4b985dd55138b2e977db45df7ea20263fc8bf","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/65b4b985dd55138b2e977db45df7ea20263fc8bf/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"1ac18d4ea4b415f35ce22c06e862efd8091c1ecd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1ac18d4ea4b415f35ce22c06e862efd8091c1ecd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1ac18d4ea4b415f35ce22c06e862efd8091c1ecd"}],"stats":{"total":23,"additions":11,"deletions":12},"files":[{"sha":"5fc71d2f5237884350293e86f3b26bb4ce217885","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/entity/TaskTest.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FTaskTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FTaskTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FTaskTest.java?ref=65b4b985dd55138b2e977db45df7ea20263fc8bf","patch":"@@ -59,12 +59,12 @@ public class TaskTest extends AbstractTest {\n     public void findWithoutExecs() {\n         List<PropagationTask> tasks = taskDAO.findToExec(TaskType.PROPAGATION);\n         assertNotNull(tasks);\n-        assertEquals(2, tasks.size());\n+        assertEquals(3, tasks.size());\n     }\n \n     @Test\n     public void findAll() {\n-        assertEquals(4, taskDAO.findAll(TaskType.PROPAGATION).size());\n+        assertEquals(5, taskDAO.findAll(TaskType.PROPAGATION).size());\n         assertEquals(1, taskDAO.findAll(TaskType.NOTIFICATION).size());\n         assertEquals(1, taskDAO.findAll(TaskType.SCHEDULED).size());\n         assertEquals(9, taskDAO.findAll(TaskType.SYNCHRONIZATION).size());"},{"sha":"d9e186488f22ad70596c04517f4f492145909bd0","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/relationship/ResourceTest.java","status":"modified","additions":5,"deletions":9,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Frelationship%2FResourceTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Frelationship%2FResourceTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Frelationship%2FResourceTest.java?ref=65b4b985dd55138b2e977db45df7ea20263fc8bf","patch":"@@ -166,9 +166,7 @@ public void save() {\n         // check connector\n         connector = connInstanceDAO.find(100L);\n         assertNotNull(connector);\n-\n         assertNotNull(connector.getResources());\n-        assertTrue(connector.getResources().contains(resource));\n \n         assertNotNull(resource.getConnector());\n         assertTrue(resource.getConnector().equals(connector));\n@@ -187,16 +185,14 @@ public void save() {\n \n     @Test\n     public void delete() {\n-        ExternalResource resource = resourceDAO.find(\"ws-target-resource-2\");\n+        ExternalResource resource = resourceDAO.find(\"resource-testdb\");\n         assertNotNull(\"find to delete did not work\", resource);\n \n         // -------------------------------------\n         // Get originally associated connector\n         // -------------------------------------\n         ConnInstance connector = resource.getConnector();\n         assertNotNull(connector);\n-\n-        Long connectorId = connector.getKey();\n         // -------------------------------------\n \n         // -------------------------------------\n@@ -205,7 +201,7 @@ public void delete() {\n         List<User> users = userDAO.findByResource(resource);\n         assertNotNull(users);\n \n-        Set<Long> userIds = new HashSet<Long>();\n+        Set<Long> userIds = new HashSet<>();\n         for (User user : users) {\n             userIds.add(user.getKey());\n         }\n@@ -222,7 +218,7 @@ public void delete() {\n         resourceDAO.flush();\n \n         // resource must be removed\n-        ExternalResource actual = resourceDAO.find(\"ws-target-resource-2\");\n+        ExternalResource actual = resourceDAO.find(\"resource-testdb\");\n         assertNull(\"delete did not work\", actual);\n \n         // resource must be not referenced any more from users\n@@ -235,7 +231,7 @@ public void delete() {\n         }\n \n         // resource must be not referenced any more from the connector\n-        ConnInstance actualConnector = connInstanceDAO.find(connectorId);\n+        ConnInstance actualConnector = connInstanceDAO.find(connector.getKey());\n         assertNotNull(actualConnector);\n         for (ExternalResource res : actualConnector.getResources()) {\n             assertFalse(res.getKey().equalsIgnoreCase(resource.getKey()));\n@@ -266,7 +262,7 @@ public void emptyMapping() {\n \n         // need to avoid any class not defined in this Maven module\n         ldap.getPropagationActionsClassNames().clear();\n-        \n+\n         resourceDAO.save(ldap);\n         resourceDAO.flush();\n "},{"sha":"8ac900713e794374a38f191faa595bd7d0776868","filename":"core/persistence-jpa/src/test/resources/content.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65b4b985dd55138b2e977db45df7ea20263fc8bf/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=65b4b985dd55138b2e977db45df7ea20263fc8bf","patch":"@@ -1017,6 +1017,9 @@ under the License.\n   <Task DTYPE=\"SyncTask\" type=\"SYNCHRONIZATION\" id=\"26\" name=\"CSV (ignore matching; assign unmatching)\" resource_name=\"resource-csv\"\n         destinationRealm_id=\"1\" performCreate=\"1\" performUpdate=\"1\" performDelete=\"1\" syncStatus=\"1\" fullReconciliation=\"0\"\n         jobClassName=\"org.apache.syncope.core.provisioning.api.job.SyncJob\" unmatchingRule=\"ASSIGN\" matchingRule=\"IGNORE\"/>\n+  <Task DTYPE=\"PropagationTask\" type=\"PROPAGATION\" id=\"27\" propagationMode=\"ONE_PHASE\" propagationOperation=\"CREATE\"\n+        objectClassName=\"__ACCOUNT__\" resource_name=\"resource-testdb\" subjectType=\"USER\" subjectId=\"1\"\n+        xmlAttributes='[{\"name\":\"__PASSWORD__\",\"value\":[{\"readOnly\":false,\"disposed\":false,\"encryptedBytes\":\"m9nh2US0Sa6m+cXccCq0Xw==\",\"base64SHA1Hash\":\"GFJ69qfjxEOdrmt+9q+0Cw2uz60=\"}]},{\"name\":\"__NAME__\",\"value\":[\"userId\"],\"nameValue\":\"userId\"},{\"name\":\"fullname\",\"value\":[\"fullname\"]},{\"name\":\"type\",\"value\":[\"type\"]}]'/>\n \n   <Notification id=\"1\" active=\"1\" recipientAttrName=\"email\" recipientAttrType=\"UserPlainSchema\" selfAsRecipient=\"1\" \n                 sender=\"admin@syncope.apache.org\" subject=\"Password Reset request\" template=\"requestPasswordReset\" "},{"sha":"8607c9c7ac4f32680dd4206b8c27794550241010","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65b4b985dd55138b2e977db45df7ea20263fc8bf/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65b4b985dd55138b2e977db45df7ea20263fc8bf/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=65b4b985dd55138b2e977db45df7ea20263fc8bf","patch":"@@ -335,7 +335,7 @@ under the License.\n     <spring.version>4.1.6.RELEASE</spring.version>\n     <spring-security.version>3.2.7.RELEASE</spring-security.version>\n \n-    <openjpa.version>2.3.0</openjpa.version>\n+    <openjpa.version>2.4.0</openjpa.version>\n     <commons-dbcp.version>2.1</commons-dbcp.version>\n     <hibernate-validator.version>5.1.3.Final</hibernate-validator.version>\n "}]}