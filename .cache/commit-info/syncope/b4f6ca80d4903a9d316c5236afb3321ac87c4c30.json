{"sha":"b4f6ca80d4903a9d316c5236afb3321ac87c4c30","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmI0ZjZjYTgwZDQ5MDNhOWQzMTZjNTIzNmFmYjMzMjFhYzg3YzRjMzA=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-12-17T14:01:38Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-12-17T14:01:38Z"},"message":"Removing usage of deprecated classes + Selenium tests adaptation\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1422934 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"64b7a72bab462d688ed4a3e4a7e4b04f6c2e6eae","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/64b7a72bab462d688ed4a3e4a7e4b04f6c2e6eae"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b4f6ca80d4903a9d316c5236afb3321ac87c4c30","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b4f6ca80d4903a9d316c5236afb3321ac87c4c30","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b4f6ca80d4903a9d316c5236afb3321ac87c4c30","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"9ff1880d12cda87bf201a4742b6c83ff870e43bf","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9ff1880d12cda87bf201a4742b6c83ff870e43bf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9ff1880d12cda87bf201a4742b6c83ff870e43bf"}],"stats":{"total":492,"additions":397,"deletions":95},"files":[{"sha":"56c26a7291255f5134c5d3fc67bb73730c9baabe","filename":"console/src/main/java/org/apache/syncope/console/commons/RoleTreeBuilder.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FRoleTreeBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FRoleTreeBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FRoleTreeBuilder.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -26,19 +26,18 @@\n import javax.swing.tree.DefaultMutableTreeNode;\n import javax.swing.tree.DefaultTreeModel;\n import javax.swing.tree.TreeModel;\n-import org.springframework.beans.factory.annotation.Autowired;\n import org.apache.syncope.client.to.RoleTO;\n import org.apache.syncope.console.rest.RoleRestClient;\n+import org.springframework.beans.factory.annotation.Autowired;\n \n public class RoleTreeBuilder {\n \n     @Autowired\n     private RoleRestClient restClient;\n \n-    private RoleTOComparator comparator = new RoleTOComparator();\n+    private final RoleTOComparator comparator = new RoleTOComparator();\n \n     private List<RoleTO> getChildRoles(final long parentRoleId, final List<RoleTO> roles) {\n-\n         List<RoleTO> result = new ArrayList<RoleTO>();\n         for (RoleTO role : roles) {\n             if (role.getParent() == parentRoleId) {\n@@ -51,7 +50,6 @@ private List<RoleTO> getChildRoles(final long parentRoleId, final List<RoleTO> r\n     }\n \n     private void populateSubtree(final DefaultMutableTreeNode subRoot, final List<RoleTO> roles) {\n-\n         RoleTO role = (RoleTO) subRoot.getUserObject();\n \n         DefaultMutableTreeNode child;"},{"sha":"327cb8b47bd2d2e9399e3da464722815d03c12e7","filename":"console/src/main/java/org/apache/syncope/console/pages/RoleOwnerSelectModalPage.java","status":"modified","additions":46,"deletions":15,"changes":61,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleOwnerSelectModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleOwnerSelectModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleOwnerSelectModalPage.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -23,14 +23,21 @@\n import org.apache.syncope.console.commons.CloseOnESCBehavior;\n import org.apache.syncope.console.commons.RoleTreeBuilder;\n import org.apache.syncope.console.pages.panels.RoleDetailsPanel;\n+import org.apache.syncope.console.wicket.markup.html.tree.DefaultMutableTreeNodeExpansion;\n+import org.apache.syncope.console.wicket.markup.html.tree.DefaultMutableTreeNodeExpansionModel;\n+import org.apache.syncope.console.wicket.markup.html.tree.TreeRoleProvider;\n+import org.apache.wicket.Component;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.event.Broadcast;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n-import org.apache.wicket.extensions.markup.html.tree.BaseTree;\n-import org.apache.wicket.extensions.markup.html.tree.LinkTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.DefaultNestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.ITreeProvider;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.NestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.content.Folder;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.theme.WindowsTheme;\n import org.apache.wicket.model.IModel;\n-import org.apache.wicket.model.PropertyModel;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n public class RoleOwnerSelectModalPage extends BaseModalPage {\n@@ -40,29 +47,53 @@ public class RoleOwnerSelectModalPage extends BaseModalPage {\n     @SpringBean\n     private RoleTreeBuilder roleTreeBuilder;\n \n-    public RoleOwnerSelectModalPage(final PageReference pageRef, final ModalWindow window) {\n+    private final NestedTree<DefaultMutableTreeNode> tree;\n \n+    public RoleOwnerSelectModalPage(final PageReference pageRef, final ModalWindow window) {\n         super();\n \n-        BaseTree tree = new LinkTree(\"treeTable\", roleTreeBuilder.build()) {\n+        final ITreeProvider<DefaultMutableTreeNode> treeProvider = new TreeRoleProvider(roleTreeBuilder, true);\n+        final DefaultMutableTreeNodeExpansionModel treeModel = new DefaultMutableTreeNodeExpansionModel();\n \n-            private static final long serialVersionUID = -5514696922119256101L;\n+        tree = new DefaultNestedTree<DefaultMutableTreeNode>(\"treeTable\", treeProvider, treeModel) {\n \n-            @Override\n-            protected IModel getNodeTextModel(final IModel model) {\n-                return new PropertyModel(model, \"userObject.displayName\");\n-            }\n+            private static final long serialVersionUID = 7137658050662575546L;\n \n             @Override\n-            protected void onNodeLinkClicked(final Object node, final BaseTree tree, final AjaxRequestTarget target) {\n-                final RoleTO roleTO = (RoleTO) ((DefaultMutableTreeNode) node).getUserObject();\n+            protected Component newContentComponent(final String id, final IModel<DefaultMutableTreeNode> node) {\n+                final DefaultMutableTreeNode treeNode = node.getObject();\n+                final RoleTO roleTO = (RoleTO) treeNode.getUserObject();\n+\n+                return new Folder<DefaultMutableTreeNode>(id, RoleOwnerSelectModalPage.this.tree, node) {\n+\n+                    private static final long serialVersionUID = 9046323319920426493L;\n \n-                send(pageRef.getPage(), Broadcast.BREADTH, new RoleDetailsPanel.RoleOwnerSelectPayload(roleTO.getId()));\n-                window.close(target);\n+                    @Override\n+                    protected boolean isClickable() {\n+                        return true;\n+                    }\n+\n+                    @Override\n+                    protected IModel<?> newLabelModel(final IModel<DefaultMutableTreeNode> model) {\n+                        return new Model<String>(roleTO.getDisplayName());\n+                    }\n+\n+                    @Override\n+                    protected void onClick(final AjaxRequestTarget target) {\n+                        super.onClick(target);\n+\n+                        send(pageRef.getPage(), Broadcast.BREADTH,\n+                                new RoleDetailsPanel.RoleOwnerSelectPayload(roleTO.getId()));\n+                        window.close(target);\n+                    }\n+                };\n             }\n         };\n+        tree.add(new WindowsTheme());\n         tree.setOutputMarkupId(true);\n-        tree.getTreeState().expandAll();\n+\n+        DefaultMutableTreeNodeExpansion.get().expandAll();\n+\n         this.add(tree);\n \n         add(new CloseOnESCBehavior(window));"},{"sha":"53431c7a5c55a6347ac529512ef0f5e254ef2ed5","filename":"console/src/main/java/org/apache/syncope/console/pages/Roles.java","status":"modified","additions":7,"deletions":10,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -34,12 +34,12 @@ public class Roles extends BasePage {\n \n     private static final long serialVersionUID = -2147758241610831969L;\n \n-    private ModalWindow createRoleWin = null;\n-\n     private static final int WIN_HEIGHT = 500;\n \n     private static final int WIN_WIDTH = 750;\n \n+    private final ModalWindow createRoleWin;\n+\n     private final WebMarkupContainer container;\n \n     public Roles(final PageParameters parameters) {\n@@ -62,11 +62,12 @@ public Roles(final PageParameters parameters) {\n \n         final RoleSummaryPanel nodePanel = new RoleSummaryPanel(\"summaryPanel\", createRoleWin,\n                 Roles.this.getPageReference());\n-        \n+\n         nodePanel.setOutputMarkupId(true);\n         container.add(nodePanel);\n \n         createRoleWin.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n+\n             private static final long serialVersionUID = 8804221891699487139L;\n \n             @Override\n@@ -99,27 +100,23 @@ public void onEvent(final IEvent<?> event) {\n \n             final RoleSummaryPanel nodePanel = new RoleSummaryPanel(\"summaryPanel\", createRoleWin,\n                     Roles.this.getPageReference(), update.getSelectedNodeId());\n-            \n+\n             container.addOrReplace(nodePanel);\n-            update.getTarget().add(this);           \n+            update.getTarget().add(this);\n         }\n     }\n \n     public static class TreeNodeClickUpdate {\n \n-        private AjaxRequestTarget target;\n+        private final AjaxRequestTarget target;\n \n         private Long selectedNodeId;\n \n         public TreeNodeClickUpdate(final AjaxRequestTarget target, final Long selectedNodeId) {\n-\n             this.target = target;\n             this.selectedNodeId = selectedNodeId;\n         }\n \n-        /**\n-         * @return ajax request target\n-         */\n         public AjaxRequestTarget getTarget() {\n             return target;\n         }"},{"sha":"d40d9f13b677cf29673a9341a27370a1e2e819e7","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/MembershipsPanel.java","status":"modified","additions":61,"deletions":33,"changes":94,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -27,13 +27,20 @@\n import org.apache.syncope.console.pages.MembershipModalPage;\n import org.apache.syncope.console.pages.UserModalPage;\n import org.apache.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n+import org.apache.syncope.console.wicket.markup.html.tree.DefaultMutableTreeNodeExpansion;\n+import org.apache.syncope.console.wicket.markup.html.tree.DefaultMutableTreeNodeExpansionModel;\n+import org.apache.syncope.console.wicket.markup.html.tree.TreeRoleProvider;\n+import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n-import org.apache.wicket.extensions.markup.html.tree.BaseTree;\n-import org.apache.wicket.extensions.markup.html.tree.LinkTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.DefaultNestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.ITreeProvider;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.NestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.content.Folder;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.theme.WindowsTheme;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.list.ListItem;\n@@ -53,7 +60,9 @@ public class MembershipsPanel extends Panel {\n \n     private ListView<MembershipTO> membershipsView;\n \n-    private UserTO userTO = null;\n+    private final UserTO userTO;\n+\n+    private final NestedTree<DefaultMutableTreeNode> tree;\n \n     public MembershipsPanel(final String id, final UserTO userTO, final boolean templateMode) {\n         super(id);\n@@ -68,54 +77,73 @@ public MembershipsPanel(final String id, final UserTO userTO, final boolean temp\n         membershipWin.setCookieName(\"create-membership-modal\");\n         add(membershipWin);\n \n-        BaseTree tree = new LinkTree(\"treeTable\", roleTreeBuilder.build()) {\n+        final ITreeProvider<DefaultMutableTreeNode> treeProvider = new TreeRoleProvider(roleTreeBuilder, true);\n+        final DefaultMutableTreeNodeExpansionModel treeModel = new DefaultMutableTreeNodeExpansionModel();\n \n-            private static final long serialVersionUID = -5514696922119256101L;\n+        tree = new DefaultNestedTree<DefaultMutableTreeNode>(\"treeTable\", treeProvider, treeModel) {\n \n-            @Override\n-            protected IModel getNodeTextModel(final IModel model) {\n-                return new PropertyModel(model, \"userObject.displayName\");\n-            }\n+            private static final long serialVersionUID = 7137658050662575546L;\n \n             @Override\n-            protected void onNodeLinkClicked(final Object node, final BaseTree tree, final AjaxRequestTarget target) {\n+            protected Component newContentComponent(final String id, final IModel<DefaultMutableTreeNode> node) {\n+                final DefaultMutableTreeNode treeNode = node.getObject();\n+                final RoleTO roleTO = (RoleTO) treeNode.getUserObject();\n \n-                final RoleTO roleTO = (RoleTO) ((DefaultMutableTreeNode) node).getUserObject();\n+                return new Folder<DefaultMutableTreeNode>(id, MembershipsPanel.this.tree, node) {\n \n-                membershipWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    private static final long serialVersionUID = 9046323319920426493L;\n \n-                    private static final long serialVersionUID = 7661763358801821185L;\n+                    @Override\n+                    protected boolean isClickable() {\n+                        return true;\n+                    }\n \n-                    private MembershipTO membershipTO;\n+                    @Override\n+                    protected IModel<?> newLabelModel(final IModel<DefaultMutableTreeNode> model) {\n+                        return new Model<String>(roleTO.getDisplayName());\n+                    }\n \n                     @Override\n-                    public Page createPage() {\n+                    protected void onClick(final AjaxRequestTarget target) {\n+                        super.onClick(target);\n \n-                        for (MembershipTO memberTO : membershipsView.getList()) {\n-                            if (memberTO.getRoleId() == roleTO.getId()) {\n-                                return new MembershipModalPage(getPage().getPageReference(),\n-                                        membershipWin, memberTO, templateMode);\n-                            }\n-                        }\n-                        membershipTO = new MembershipTO();\n-                        membershipTO.setRoleId(roleTO.getId());\n-                        membershipTO.setRoleName(roleTO.getName());\n+                        membershipWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                        return new MembershipModalPage(getPage().getPageReference(), membershipWin, membershipTO,\n-                                templateMode);\n+                            private static final long serialVersionUID = 7661763358801821185L;\n+\n+                            private MembershipTO membershipTO;\n+\n+                            @Override\n+                            public Page createPage() {\n+\n+                                for (MembershipTO memberTO : membershipsView.getList()) {\n+                                    if (memberTO.getRoleId() == roleTO.getId()) {\n+                                        return new MembershipModalPage(getPage().getPageReference(),\n+                                                membershipWin, memberTO, templateMode);\n+                                    }\n+                                }\n+                                membershipTO = new MembershipTO();\n+                                membershipTO.setRoleId(roleTO.getId());\n+                                membershipTO.setRoleName(roleTO.getName());\n+\n+                                return new MembershipModalPage(getPage().getPageReference(), membershipWin,\n+                                        membershipTO, templateMode);\n+                            }\n+                        });\n+                        membershipWin.show(target);\n                     }\n-                });\n-                membershipWin.show(target);\n+                };\n             }\n         };\n-\n+        tree.add(new WindowsTheme());\n         tree.setOutputMarkupId(true);\n-        tree.getTreeState().expandAll();\n \n-        add(tree);\n+        DefaultMutableTreeNodeExpansion.get().expandAll();\n+\n+        this.add(tree);\n \n-        membershipsView = new ListView<MembershipTO>(\"memberships\", new PropertyModel<List<? extends MembershipTO>>(\n-                userTO, \"memberships\")) {\n+        membershipsView = new ListView<MembershipTO>(\"memberships\",\n+                new PropertyModel<List<? extends MembershipTO>>(userTO, \"memberships\")) {\n \n             private static final long serialVersionUID = 9101744072914090143L;\n "},{"sha":"194a3f607b0983a6ecc977aa23e95611ccba1101","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/tree/DefaultMutableTreeNodeExpansion.java","status":"added","additions":154,"deletions":0,"changes":154,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansion.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansion.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansion.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -0,0 +1,154 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.wicket.markup.html.tree;\n+\n+import java.io.Serializable;\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Iterator;\n+import java.util.Set;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import org.apache.syncope.client.to.RoleTO;\n+import org.apache.wicket.MetaDataKey;\n+import org.apache.wicket.Session;\n+\n+public class DefaultMutableTreeNodeExpansion implements Set<DefaultMutableTreeNode>, Serializable {\n+\n+    private static final long serialVersionUID = -2864060875425661224L;\n+\n+    private static MetaDataKey<DefaultMutableTreeNodeExpansion> KEY =\n+            new MetaDataKey<DefaultMutableTreeNodeExpansion>() {\n+\n+                private static final long serialVersionUID = 3109256773218160485L;\n+\n+            };\n+\n+    private Set<Long> ids = new HashSet<Long>();\n+\n+    private boolean inverse;\n+\n+    public void expandAll() {\n+        ids.clear();\n+\n+        inverse = true;\n+    }\n+\n+    public void collapseAll() {\n+        ids.clear();\n+\n+        inverse = false;\n+    }\n+\n+    @Override\n+    public boolean add(final DefaultMutableTreeNode node) {\n+        RoleTO roleTO = (RoleTO) node.getUserObject();\n+        if (inverse) {\n+            return ids.remove(roleTO.getId());\n+        } else {\n+            return ids.add(roleTO.getId());\n+        }\n+    }\n+\n+    @Override\n+    public boolean remove(final Object object) {\n+        DefaultMutableTreeNode node = (DefaultMutableTreeNode) object;\n+        RoleTO roleTO = (RoleTO) node.getUserObject();\n+        if (inverse) {\n+            return ids.add(roleTO.getId());\n+        } else {\n+            return ids.remove(roleTO.getId());\n+        }\n+    }\n+\n+    @Override\n+    public boolean contains(final Object object) {\n+        DefaultMutableTreeNode node = (DefaultMutableTreeNode) object;\n+        RoleTO roleTO = (RoleTO) node.getUserObject();\n+        if (inverse) {\n+            return !ids.contains(roleTO.getId());\n+        } else {\n+            return ids.contains(roleTO.getId());\n+        }\n+    }\n+\n+    @Override\n+    public void clear() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public int size() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public boolean isEmpty() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public <A> A[] toArray(final A[] a) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public Iterator<DefaultMutableTreeNode> iterator() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public Object[] toArray() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public boolean containsAll(Collection<?> c) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public boolean addAll(Collection<? extends DefaultMutableTreeNode> c) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public boolean retainAll(Collection<?> c) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    @Override\n+    public boolean removeAll(Collection<?> c) {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    /**\n+     * Get the expansion for the session.\n+     *\n+     * @return expansion\n+     */\n+    public static DefaultMutableTreeNodeExpansion get() {\n+        DefaultMutableTreeNodeExpansion expansion = Session.get().getMetaData(KEY);\n+        if (expansion == null) {\n+            expansion = new DefaultMutableTreeNodeExpansion();\n+\n+            Session.get().setMetaData(KEY, expansion);\n+        }\n+        return expansion;\n+    }\n+}"},{"sha":"eaec3d86bca452f54cc90afb777b52dabd44379e","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/tree/DefaultMutableTreeNodeExpansionModel.java","status":"added","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansionModel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansionModel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FDefaultMutableTreeNodeExpansionModel.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.wicket.markup.html.tree;\n+\n+import java.util.Set;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import org.apache.wicket.model.AbstractReadOnlyModel;\n+\n+public class DefaultMutableTreeNodeExpansionModel\n+        extends AbstractReadOnlyModel<Set<DefaultMutableTreeNode>> {\n+\n+    private static final long serialVersionUID = -3407581132184748054L;\n+\n+    @Override\n+    public Set<DefaultMutableTreeNode> getObject() {\n+        return DefaultMutableTreeNodeExpansion.get();\n+    }\n+}"},{"sha":"a8639091eb62c44e119d0df1b35b0fbfc06fe511","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/tree/TreeRolePanel.java","status":"modified","additions":37,"deletions":22,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -18,22 +18,25 @@\n  */\n package org.apache.syncope.console.wicket.markup.html.tree;\n \n-\n import javax.swing.tree.DefaultMutableTreeNode;\n import org.apache.syncope.client.to.RoleTO;\n import org.apache.syncope.console.commons.RoleTreeBuilder;\n import org.apache.syncope.console.commons.XMLRolesReader;\n import org.apache.syncope.console.pages.Roles.TreeNodeClickUpdate;\n+import org.apache.wicket.Component;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.event.Broadcast;\n import org.apache.wicket.event.IEvent;\n-import org.apache.wicket.extensions.markup.html.tree.BaseTree;\n-import org.apache.wicket.extensions.markup.html.tree.LinkTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.DefaultNestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.ITreeProvider;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.NestedTree;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.content.Folder;\n+import org.apache.wicket.extensions.markup.html.repeater.tree.theme.WindowsTheme;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.model.IModel;\n-import org.apache.wicket.model.PropertyModel;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n public class TreeRolePanel extends Panel {\n@@ -48,7 +51,7 @@ public class TreeRolePanel extends Panel {\n \n     final WebMarkupContainer treeContainer;\n \n-    private BaseTree tree;\n+    private NestedTree<DefaultMutableTreeNode> tree;\n \n     public TreeRolePanel(final String id) {\n         super(id);\n@@ -60,32 +63,47 @@ public TreeRolePanel(final String id) {\n     }\n \n     private void updateTree() {\n+        final ITreeProvider<DefaultMutableTreeNode> treeProvider = new TreeRoleProvider(roleTreeBuilder, true);\n+        final DefaultMutableTreeNodeExpansionModel treeModel = new DefaultMutableTreeNodeExpansionModel();\n \n-        tree = new LinkTree(\"treeTable\", roleTreeBuilder.build()) {\n+        tree = new DefaultNestedTree<DefaultMutableTreeNode>(\"treeTable\", treeProvider, treeModel) {\n \n-            private static final long serialVersionUID = -5514696922119256101L;\n+            private static final long serialVersionUID = 7137658050662575546L;\n \n             @Override\n-            protected IModel getNodeTextModel(final IModel model) {\n-                return new PropertyModel(model, \"userObject.displayName\");\n-            }\n+            protected Component newContentComponent(final String id, final IModel<DefaultMutableTreeNode> node) {\n+                final DefaultMutableTreeNode treeNode = node.getObject();\n+                final RoleTO roleTO = (RoleTO) treeNode.getUserObject();\n \n-            @Override\n-            protected void onNodeLinkClicked(\n-                    final Object node, final BaseTree baseTree, final AjaxRequestTarget target) {\n+                return new Folder<DefaultMutableTreeNode>(id, TreeRolePanel.this.tree, node) {\n \n-                DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\n-                RoleTO unitObject = (RoleTO) treeNode.getUserObject();\n+                    private static final long serialVersionUID = 9046323319920426493L;\n \n-                send(getPage(), Broadcast.BREADTH, new TreeNodeClickUpdate(target, unitObject.getId()));\n+                    @Override\n+                    protected boolean isClickable() {\n+                        return true;\n+                    }\n \n+                    @Override\n+                    protected IModel<?> newLabelModel(final IModel<DefaultMutableTreeNode> model) {\n+                        return new Model<String>(roleTO.getDisplayName());\n+                    }\n+\n+                    @Override\n+                    protected void onClick(final AjaxRequestTarget target) {\n+                        super.onClick(target);\n+\n+                        send(getPage(), Broadcast.BREADTH, new TreeNodeClickUpdate(target, roleTO.getId()));\n+                    }\n+                };\n             }\n         };\n+        tree.add(new WindowsTheme());\n+        tree.setOutputMarkupId(true);\n \n-        MetaDataRoleAuthorizationStrategy.authorize(tree, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Roles\", \"read\"));\n+        DefaultMutableTreeNodeExpansion.get().expandAll();\n \n-        tree.setOutputMarkupId(true);\n-        tree.getTreeState().expandAll();\n+        MetaDataRoleAuthorizationStrategy.authorize(tree, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Roles\", \"read\"));\n \n         treeContainer.addOrReplace(tree);\n     }\n@@ -95,11 +113,8 @@ public void onEvent(final IEvent<?> event) {\n         super.onEvent(event);\n \n         if (event.getPayload() instanceof TreeNodeClickUpdate) {\n-\n             final TreeNodeClickUpdate update = (TreeNodeClickUpdate) event.getPayload();\n-\n             updateTree();\n-\n             update.getTarget().add(treeContainer);\n         }\n     }"},{"sha":"a0594986191ac5fc602f84a902ec968c1c2596ff","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/tree/TreeRoleProvider.java","status":"added","additions":43,"deletions":0,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRoleProvider.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRoleProvider.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRoleProvider.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -0,0 +1,43 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.wicket.markup.html.tree;\n+\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import org.apache.syncope.console.commons.RoleTreeBuilder;\n+import org.apache.wicket.extensions.markup.html.repeater.util.TreeModelProvider;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n+\n+public class TreeRoleProvider extends TreeModelProvider<DefaultMutableTreeNode> {\n+\n+    private static final long serialVersionUID = -7741964777100892335L;\n+\n+    public TreeRoleProvider(final RoleTreeBuilder roleTreeBuilder) {\n+        this(roleTreeBuilder, false);\n+    }\n+\n+    public TreeRoleProvider(final RoleTreeBuilder roleTreeBuilder, final boolean rootVisible) {\n+        super(roleTreeBuilder.build(), rootVisible);\n+    }\n+\n+    @Override\n+    public IModel<DefaultMutableTreeNode> model(final DefaultMutableTreeNode treeNode) {\n+        return new Model<DefaultMutableTreeNode>(treeNode);\n+    }\n+}"},{"sha":"16c68b4766e952457e2b404a23d4c9c122c9c00b","filename":"console/src/test/java/org/apache/syncope/console/RoleTestITCase.java","status":"modified","additions":13,"deletions":11,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FRoleTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b4f6ca80d4903a9d316c5236afb3321ac87c4c30/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FRoleTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FRoleTestITCase.java?ref=b4f6ca80d4903a9d316c5236afb3321ac87c4c30","patch":"@@ -28,7 +28,7 @@ public void createRootNodeModal() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table/tbody/tr/td[2]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div/span/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[3]/span[2]/span/div/p/span/span/a\\\");\", \"30000\");\n \n@@ -46,7 +46,7 @@ public void browseCreateModal() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div/div/span/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//div[3]/span[2]/span/span/div/p/span[2]/span/a\\\");\", \"30000\");\n@@ -75,7 +75,7 @@ public void browseEditModal() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div/div/span/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//div[3]/span[2]/span/span/div/p/span[2]/span/a[2]\\\");\", \"30000\");\n@@ -104,7 +104,7 @@ public void checkSecurityTab() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div/div/span/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[7]/a\\\");\", \"30000\");\n \n@@ -120,18 +120,19 @@ public void browseUserEditModal() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[2]/tbody/tr/td[3]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div/div/span/a\");\n \n-        selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[7]/a\\\");\", \"50000\");\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[3]/span[2]/span/span/div/form/div[2]/ul/li[8]/a\\\");\", \"30000\");\n \n-        selenium.click(\"//div/form/div[2]/ul/li[7]/a\");\n+        selenium.click(\"//div[3]/span[2]/span/span/div/form/div[2]/ul/li[8]/a\");\n \n         selenium.click(\"//input[@name=\\\"userListContainer:search\\\"]\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//table/tbody/tr/td[4]/div/span[7]/a\\\");\", \"30000\");\n \n         selenium.click(\"//table/tbody/tr/td[4]/div/span[7]/a\");\n-        \n+\n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//form/div[2]/div/span/div/div/div[contains(text(),'Username')]\\\");\", \"30000\");\n \n@@ -145,9 +146,10 @@ public void deleteUser() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[2]/tbody/tr/td[3]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div/div/span/a\");\n \n-        selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[7]/a\\\");\", \"30000\");\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[3]/span[2]/span/span/div/form/div[2]/ul/li[8]/a\\\");\", \"30000\");\n \n         selenium.click(\"//div/form/div[2]/ul/li[7]/a\");\n \n@@ -166,7 +168,7 @@ public void deleteRole() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[3]/span/div/div/table[12]/tbody/tr/td[5]/table/tbody/tr/td[2]/a\");\n+        selenium.click(\"//div[3]/span/div/div/div/div/div[2]/div[2]/div[2]/div/div[2]/div[3]/div/span[2]/a/span\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div/p/span[2]/span/a[3]\\\");\", \"30000\");\n "}]}