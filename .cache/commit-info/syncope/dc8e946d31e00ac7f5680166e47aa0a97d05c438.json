{"sha":"dc8e946d31e00ac7f5680166e47aa0a97d05c438","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmRjOGU5NDZkMzFlMDBhYzdmNTY4MDE2NmU0N2FhMGE5N2QwNWM0Mzg=","commit":{"author":{"name":"Massimiliano Perrone","email":"massimiliano.perrone@tirasa.net","date":"2016-01-26T16:12:01Z"},"committer":{"name":"Massimiliano Perrone","email":"massimiliano.perrone@tirasa.net","date":"2016-01-26T16:35:35Z"},"message":"Parameters page with enum panel, #SYNCOPE-156","tree":{"sha":"6df76bd0de5f0f1959b5ef4c36ccfd933c611d73","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6df76bd0de5f0f1959b5ef4c36ccfd933c611d73"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/dc8e946d31e00ac7f5680166e47aa0a97d05c438","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/dc8e946d31e00ac7f5680166e47aa0a97d05c438","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/dc8e946d31e00ac7f5680166e47aa0a97d05c438","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/dc8e946d31e00ac7f5680166e47aa0a97d05c438/comments","author":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"committer":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"parents":[{"sha":"800a39f9d534d199b7b8e37ac8915cb1425db99b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/800a39f9d534d199b7b8e37ac8915cb1425db99b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/800a39f9d534d199b7b8e37ac8915cb1425db99b"}],"stats":{"total":94,"additions":83,"deletions":11},"files":[{"sha":"4ddb9a7364cc99bd1cec0064f5c1a74b0c8a87c4","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ParametersCreateWizardAttrStep.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardAttrStep.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardAttrStep.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardAttrStep.java?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -54,6 +54,7 @@ public ParametersCreateWizardAttrStep(final ParametersCreateWizardPanel.Paramete\n \n         final AjaxTextFieldPanel schema = new AjaxTextFieldPanel(\n                 \"schema\", getString(\"schema\"), new PropertyModel<String>(modelObject.getAttrTO(), \"schema\"));\n+        schema.setRequired(true);\n         content.add(schema);\n \n         final LoadableDetachableModel<List<PlainSchemaTO>> loadableDetachableModel\n@@ -75,8 +76,6 @@ protected List<PlainSchemaTO> load() {\n             @Override\n             protected void populateItem(final ListItem<PlainSchemaTO> item) {\n                 final Panel panel = getFieldPanel(\"panel\", modelObject.getAttrTO(), item.getModelObject());\n-                panel.setEnabled(true);\n-                panel.setVisible(true);\n                 item.add(panel);\n             }\n         };"},{"sha":"8db78d0141a8e4d9af3716b43b965dfe3fe59e90","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ParametersCreateWizardPanel.java","status":"modified","additions":5,"deletions":9,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardPanel.java?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -56,15 +56,11 @@ protected void onCancelInternal(final ParametersForm modelObject) {\n \n     @Override\n     protected Serializable onApplyInternal(final ParametersForm modelObject) {\n-        try {\n-            final PlainSchemaTO finalpPlainSchemaTO = modelObject.getPlainSchemaTO();\n-            finalpPlainSchemaTO.setKey(modelObject.getAttrTO().getSchema());\n-            SyncopeConsoleSession.get().getService(SchemaService.class).create(\n-                    SchemaType.PLAIN, finalpPlainSchemaTO);\n-            SyncopeConsoleSession.get().getService(ConfigurationService.class).set(modelObject.getAttrTO());\n-        } catch (Exception e) {\n-            LOG.error(\"While deleting SecutiryQuestionTO\", e);\n-        }\n+        final PlainSchemaTO finalpPlainSchemaTO = modelObject.getPlainSchemaTO();\n+        finalpPlainSchemaTO.setKey(modelObject.getAttrTO().getSchema());\n+        SyncopeConsoleSession.get().getService(SchemaService.class).create(\n+                SchemaType.PLAIN, finalpPlainSchemaTO);\n+        SyncopeConsoleSession.get().getService(ConfigurationService.class).set(modelObject.getAttrTO());\n         return modelObject.getAttrTO();\n     }\n "},{"sha":"769081e6a404a2a9a68b3a4ff87fa047bcb28093","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ParametersCreateWizardSchemaStep.java","status":"modified","additions":72,"deletions":0,"changes":72,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.java?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -18,13 +18,23 @@\n  */\n package org.apache.syncope.client.console.panels;\n \n+import static org.apache.syncope.client.console.commons.PropertyList.getEnumValuesAsString;\n+\n import java.util.Arrays;\n+import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.client.console.commons.PropertyList;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxTextFieldPanel;\n+import org.apache.syncope.client.console.wicket.markup.html.form.MultiFieldPanel;\n+import org.apache.syncope.common.lib.to.PlainSchemaTO;\n import org.apache.syncope.common.lib.types.AttrSchemaType;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.extensions.wizard.WizardStep;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n \n public class ParametersCreateWizardSchemaStep extends WizardStep {\n@@ -41,6 +51,68 @@ public ParametersCreateWizardSchemaStep(final ParametersCreateWizardPanel.Parame\n         type.setChoices(Arrays.asList(AttrSchemaType.values()));\n         content.add(type);\n \n+        final MultiFieldPanel<String> panel = new MultiFieldPanel.Builder<String>(\n+                new PropertyModel<List<String>>(modelObject.getPlainSchemaTO(), \"enumerationValues\") {\n+\n+            private static final long serialVersionUID = 3985215199105092649L;\n+\n+            @Override\n+            public PropertyList<PlainSchemaTO> getObject() {\n+                return new PropertyList<PlainSchemaTO>(modelObject.getPlainSchemaTO()) {\n+\n+                    @Override\n+                    public String getValues() {\n+                        System.out.println(\">>>>>>>>> getvalues: \" + modelObject.getPlainSchemaTO().\n+                                getEnumerationValues());\n+                        return modelObject.getPlainSchemaTO().getEnumerationValues();\n+                    }\n+\n+                    @Override\n+                    public void setValues(final List<String> list) {\n+                        System.out.println(\">>>>>>>>> setvalues \" + list);\n+                        modelObject.getPlainSchemaTO().setEnumerationValues(getEnumValuesAsString(list));\n+                    }\n+                };\n+            }\n+\n+            @Override\n+            public void setObject(final List<String> object) {\n+                System.out.println(\">>>>>>>>> setObject: \" + object);\n+                modelObject.getPlainSchemaTO().setEnumerationValues(PropertyList.getEnumValuesAsString(object));\n+            }\n+        }) {\n+\n+            private static final long serialVersionUID = -8752965211744734798L;\n+\n+            @Override\n+            protected String newModelObject() {\n+                return StringUtils.EMPTY;\n+            }\n+\n+        }.build(\"values\", getString(\"values\"), new AjaxTextFieldPanel(\n+                \"panel\", getString(\"values\"), new Model<String>(), false));\n+\n+        panel.setVisible(false);\n+        content.add(panel);\n+\n+        type.getField().add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n+            private static final long serialVersionUID = -1107858522700306810L;\n+\n+            @Override\n+            protected void onUpdate(final AjaxRequestTarget target) {\n+                if (\"enum\".equalsIgnoreCase(type.getField().getModelObject().name())) {\n+                    panel.setVisible(true);\n+                    content.add(panel);\n+                    target.add(content);\n+                } else {\n+                    panel.setVisible(false);\n+                    content.add(panel);\n+                    target.add(content);\n+                }\n+            }\n+        });\n+\n         final AjaxTextFieldPanel mandatoryCondition = new AjaxTextFieldPanel(\n                 \"mandatoryCondition\", getString(\"mandatoryCondition\"),\n                 new PropertyModel<String>(modelObject.getPlainSchemaTO(), \"mandatoryCondition\"));"},{"sha":"803f4782d4e928461abf8fb1b761c09dbd6898c8","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ParametersPanel.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersPanel.java?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -116,6 +116,7 @@ protected Serializable onApplyInternal(final AttrTO modelObject) {\n             }\n \n         }, true);\n+        addNotificationPanel((BasePage.class.cast(pageRef.getPage()).getNotificationPanel()));\n         modal.size(Modal.Size.Medium);\n         initResultTable();\n "},{"sha":"320ae7a2d8a7fdee032e1e3d42833520c6ffc379","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/ParametersCreateWizardSchemaStep.html","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.html?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -20,6 +20,7 @@\n   <wicket:panel>\n     <div wicket:id=\"content\">\n       <span wicket:id=\"type\">[type]</span>\n+      <span wicket:id=\"values\">[values]</span>\n       <span wicket:id=\"mandatoryCondition\">[mandatoryCondition]</span>\n       <span wicket:id=\"panel\">[panel]</span>\n     </div>"},{"sha":"40847745e573ab4f0832031ce20da14e2787b00b","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/ParametersCreateWizardSchemaStep.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep.properties?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -12,5 +12,6 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n type=Schema type\n+values=Values\n multivalue=Multivalue\n mandatoryCondition=Mandatory"},{"sha":"9e4acf70bb3c9e3a98d22ed885e19bf1e7d742d4","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/ParametersCreateWizardSchemaStep_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_it.properties?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -12,5 +12,6 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n type=Tipo di schema\n+values=Valori\n multivalue=Multivalore\n mandatoryCondition=Obbligatorio"},{"sha":"9b877b745f3c3cad7a592b21ac9d03a077243fe2","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/ParametersCreateWizardSchemaStep_pt_BR.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dc8e946d31e00ac7f5680166e47aa0a97d05c438/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersCreateWizardSchemaStep_pt_BR.properties?ref=dc8e946d31e00ac7f5680166e47aa0a97d05c438","patch":"@@ -12,5 +12,6 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n type=Tipo de esquema\n+values=Valores\n multivalue=Multi-valorizados\n mandatoryCondition=Obrigat\\u00f3rio"}]}