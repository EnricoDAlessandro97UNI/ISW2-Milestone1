{"sha":"f37a1bff945b373b4e7d0846a88073916fb9501a","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmYzN2ExYmZmOTQ1YjM3M2I0ZTdkMDg0NmE4ODA3MzkxNmZiOTUwMWE=","commit":{"author":{"name":"Guido Wimmel","email":"gwimmel@apache.org","date":"2014-12-01T09:47:02Z"},"committer":{"name":"Guido Wimmel","email":"gwimmel@apache.org","date":"2014-12-01T09:47:02Z"},"message":"[SYNCOPE-612] explicit configuration of Velocity logging","tree":{"sha":"a38baa7da5ac34adedb7bc0b90e9b3c501978f93","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a38baa7da5ac34adedb7bc0b90e9b3c501978f93"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f37a1bff945b373b4e7d0846a88073916fb9501a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f37a1bff945b373b4e7d0846a88073916fb9501a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f37a1bff945b373b4e7d0846a88073916fb9501a","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f37a1bff945b373b4e7d0846a88073916fb9501a/comments","author":null,"committer":null,"parents":[{"sha":"e414b79bead9bfc4044a8a8dde6a95b1855cf354","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e414b79bead9bfc4044a8a8dde6a95b1855cf354","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e414b79bead9bfc4044a8a8dde6a95b1855cf354"}],"stats":{"total":19,"additions":18,"deletions":1},"files":[{"sha":"f98f073e7521336b83d596deaf89f16b2ee4b9bf","filename":"core/src/main/java/org/apache/syncope/core/util/VelocityEngineFactoryBean.java","status":"modified","additions":18,"deletions":1,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f37a1bff945b373b4e7d0846a88073916fb9501a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FVelocityEngineFactoryBean.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f37a1bff945b373b4e7d0846a88073916fb9501a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FVelocityEngineFactoryBean.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FVelocityEngineFactoryBean.java?ref=f37a1bff945b373b4e7d0846a88073916fb9501a","patch":"@@ -19,9 +19,11 @@\n package org.apache.syncope.core.util;\n \n import java.io.IOException;\n+\n import org.apache.velocity.app.VelocityEngine;\n import org.apache.velocity.exception.VelocityException;\n import org.apache.velocity.runtime.RuntimeConstants;\n+import org.apache.velocity.runtime.log.CommonsLogLogChute;\n import org.springframework.beans.factory.FactoryBean;\n import org.springframework.beans.factory.InitializingBean;\n import org.springframework.core.io.DefaultResourceLoader;\n@@ -35,6 +37,8 @@ public class VelocityEngineFactoryBean implements FactoryBean<VelocityEngine>, I\n \n     private ResourceLoader resourceLoader = new DefaultResourceLoader();\n \n+\tprivate boolean overrideLogging = true;\n+    \n     private VelocityEngine velocityEngine;\n \n     public ResourceLoader getResourceLoader() {\n@@ -45,7 +49,16 @@ public void setResourceLoader(final ResourceLoader resourceLoader) {\n         this.resourceLoader = resourceLoader;\n     }\n \n-    private void createVelocityEngine() throws IOException, VelocityException {\n+    public boolean isOverrideLogging() {\n+\t\treturn overrideLogging;\n+\t}\n+\n+    /** Configure Velocity to use Commons Logging (true by default). */\n+\tpublic void setOverrideLogging(boolean overrideLogging) {\n+\t\tthis.overrideLogging = overrideLogging;\n+\t}\n+\n+\tprivate void createVelocityEngine() throws IOException, VelocityException {\n         velocityEngine = new VelocityEngine();\n \n         velocityEngine.setProperty(\n@@ -57,6 +70,10 @@ private void createVelocityEngine() throws IOException, VelocityException {\n                 SpringVelocityResourceLoader.SPRING_RESOURCE_LOADER_CACHE, \"true\");\n         velocityEngine.setApplicationAttribute(\n                 SpringVelocityResourceLoader.SPRING_RESOURCE_LOADER, getResourceLoader());\n+        \n+\t\tif (this.overrideLogging) {\n+\t\t\tvelocityEngine.setProperty(RuntimeConstants.RUNTIME_LOG_LOGSYSTEM, new CommonsLogLogChute());\n+\t\t}\n \n         velocityEngine.init();\n     }"}]}