{"sha":"b015c443b57c01349b61bc490594626451e5b364","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmIwMTVjNDQzYjU3YzAxMzQ5YjYxYmM0OTA1OTQ2MjY0NTFlNWIzNjQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-01-14T16:38:08Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-01-14T16:38:08Z"},"message":"[SYNCOPE-620] FIT module is in, now time for importing integration tests","tree":{"sha":"6109c546b4f71bc7c7f807690467892f2a46d32f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6109c546b4f71bc7c7f807690467892f2a46d32f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b015c443b57c01349b61bc490594626451e5b364","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b015c443b57c01349b61bc490594626451e5b364","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b015c443b57c01349b61bc490594626451e5b364","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b015c443b57c01349b61bc490594626451e5b364/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"ad98b98cce3a8f06b4134495b6dcf822f7f1e3a0","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ad98b98cce3a8f06b4134495b6dcf822f7f1e3a0","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ad98b98cce3a8f06b4134495b6dcf822f7f1e3a0"}],"stats":{"total":5680,"additions":5396,"deletions":284},"files":[{"sha":"8eac5d576d6874b05d1fb09842a22796379da75b","filename":"syncope620/common/lib/src/main/java/org/apache/syncope/common/lib/package-info.java","status":"added","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpackage-info.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpackage-info.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpackage-info.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,22 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+@XmlSchema(namespace = SyncopeConstants.NAMESPACE)\n+package org.apache.syncope.common.lib;\n+\n+import javax.xml.bind.annotation.XmlSchema;"},{"sha":"ff6b5e71a35df15ccc0764b2323dcc27ff998c88","filename":"syncope620/common/lib/src/main/java/org/apache/syncope/common/lib/search/package-info.java","status":"added","additions":23,"deletions":0,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fsearch%2Fpackage-info.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fsearch%2Fpackage-info.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fsearch%2Fpackage-info.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,23 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+@XmlSchema(namespace = SyncopeConstants.NAMESPACE)\n+package org.apache.syncope.common.lib.search;\n+\n+import javax.xml.bind.annotation.XmlSchema;\n+import org.apache.syncope.common.lib.SyncopeConstants;"},{"sha":"80cb87faa77550366aa8a41cd2249e3fc58d550c","filename":"syncope620/common/lib/src/main/java/org/apache/syncope/common/lib/types/package-info.java","status":"added","additions":23,"deletions":0,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2Fpackage-info.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2Fpackage-info.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fcommon%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2Fpackage-info.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,23 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+@XmlSchema(namespace = SyncopeConstants.NAMESPACE)\n+package org.apache.syncope.common.lib.types;\n+\n+import javax.xml.bind.annotation.XmlSchema;\n+import org.apache.syncope.common.lib.SyncopeConstants;"},{"sha":"967573e67a7dfa33735594266b3241203451a98a","filename":"syncope620/common/rest-api/pom.xml","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Frest-api%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fcommon%2Frest-api%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fcommon%2Frest-api%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -69,6 +69,20 @@ under the License.\n   \n   <build>\n     <plugins>\n+      <!-- Generating javadoc JAR artifact for usage with CXF's WADL generator (for server) -->\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-javadoc-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <id>attach-javadocs</id>\n+            <goals>\n+              <goal>jar</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-checkstyle-plugin</artifactId>"},{"sha":"04bfe8be6814e5937d5cff9042d24ac106a22b4a","filename":"syncope620/fit/build-tools/pom.xml","status":"added","additions":138,"deletions":0,"changes":138,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,138 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope</groupId>\n+    <artifactId>syncope-fit</artifactId>\n+    <version>2.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope FIT Build Tools</name>\n+  <description>Apache Syncope FIT Build Tools</description>\n+  <groupId>org.apache.syncope.fit</groupId>\n+  <artifactId>syncope-fit-build-tools</artifactId>\n+  <packaging>war</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency> \n+      <groupId>javax.servlet</groupId> \n+      <artifactId>javax.servlet-api</artifactId> \n+      <scope>provided</scope>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.apache.directory.server</groupId>\n+      <artifactId>apacheds-all</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.springframework</groupId>\n+      <artifactId>spring-jdbc</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.springframework</groupId>\n+      <artifactId>spring-web</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>com.h2database</groupId>\n+      <artifactId>h2</artifactId>\n+      <scope>provided</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>net.tirasa.connid</groupId>\n+      <artifactId>connector-framework</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>net.tirasa.connid</groupId>\n+      <artifactId>connector-framework-internal</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>net.tirasa.connid</groupId>\n+      <artifactId>slf4j-logging</artifactId>\n+    </dependency>\n+      \n+    <dependency>\n+      <groupId>org.codehaus.groovy</groupId>\n+      <artifactId>groovy-all</artifactId>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>net.tirasa.connid.bundles.db</groupId>\n+      <artifactId>net.tirasa.connid.bundles.db.table</artifactId>\n+      <version>${connid.db.table.version}</version>\n+      <scope>runtime</scope>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.lmax</groupId>\n+      <artifactId>disruptor</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-slf4j-impl</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>commons-logging</groupId>\n+      <artifactId>commons-logging</artifactId>\n+      <scope>provided</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>jcl-over-slf4j</artifactId>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>      \n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-pmd-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+       \n+    <resources>\n+      <resource>\n+        <directory>src/main/resources</directory>\n+        <filtering>true</filtering>\n+      </resource>\n+    </resources>\n+  </build>\n+</project>"},{"sha":"bfdbdde322ed9f3d315f4881e9c138bbaa24c252","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/ApacheDSRootDseServlet.java","status":"added","additions":99,"deletions":0,"changes":99,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSRootDseServlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSRootDseServlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSRootDseServlet.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,99 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.io.PrintWriter;\n+import java.util.Hashtable;\n+import javax.naming.Context;\n+import javax.naming.NamingEnumeration;\n+import javax.naming.directory.Attribute;\n+import javax.naming.directory.Attributes;\n+import javax.naming.directory.DirContext;\n+import javax.naming.directory.InitialDirContext;\n+import javax.naming.directory.SearchControls;\n+import javax.naming.directory.SearchResult;\n+import javax.servlet.ServletContext;\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import org.apache.directory.server.core.api.DirectoryService;\n+import org.apache.directory.server.core.jndi.CoreContextFactory;\n+\n+public class ApacheDSRootDseServlet extends HttpServlet {\n+\n+    private static final long serialVersionUID = 1514567335969002735L;\n+\n+    @Override\n+    protected void doGet(final HttpServletRequest req, final HttpServletResponse resp) throws ServletException {\n+\n+        try {\n+            resp.setContentType(\"text/plain\");\n+            PrintWriter out = resp.getWriter();\n+\n+            out.println(\"*** ApacheDS RootDSE ***\\n\");\n+\n+            DirContext ctx = new InitialDirContext(this.createEnv());\n+\n+            SearchControls ctls = new SearchControls();\n+            ctls.setReturningAttributes(new String[] { \"*\", \"+\" });\n+            ctls.setSearchScope(SearchControls.OBJECT_SCOPE);\n+\n+            NamingEnumeration<SearchResult> result = ctx.search(\"\", \"(objectClass=*)\", ctls);\n+            if (result.hasMore()) {\n+                SearchResult entry = result.next();\n+                Attributes as = entry.getAttributes();\n+\n+                NamingEnumeration<String> ids = as.getIDs();\n+                while (ids.hasMore()) {\n+                    String id = ids.next();\n+                    Attribute attr = as.get(id);\n+                    for (int i = 0; i < attr.size(); ++i) {\n+                        out.println(id + \": \" + attr.get(i));\n+                    }\n+                }\n+            }\n+            ctx.close();\n+\n+            out.flush();\n+        } catch (Exception e) {\n+            throw new ServletException(e);\n+        }\n+    }\n+\n+    /**\n+     * Creates an environment configuration for JNDI access.\n+     */\n+    private Hashtable<Object, Object> createEnv() {\n+        // Fetch directory service from servlet context\n+        ServletContext servletContext = this.getServletContext();\n+        DirectoryService directoryService = (DirectoryService) servletContext.getAttribute(DirectoryService.JNDI_KEY);\n+\n+        Hashtable<Object, Object> env = new Hashtable<>();\n+        env.put(DirectoryService.JNDI_KEY, directoryService);\n+        env.put(Context.PROVIDER_URL, \"\");\n+        env.put(Context.INITIAL_CONTEXT_FACTORY, CoreContextFactory.class.getName());\n+\n+        env.put(Context.SECURITY_PRINCIPAL, \"uid=admin,ou=system\");\n+        env.put(Context.SECURITY_CREDENTIALS, \"secret\");\n+        env.put(Context.SECURITY_AUTHENTICATION, \"simple\");\n+\n+        return env;\n+    }\n+}"},{"sha":"6c2b7b235751b5b5227218d96c7c721fc85cdbf7","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/ApacheDSStartStopListener.java","status":"added","additions":277,"deletions":0,"changes":277,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSStartStopListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSStartStopListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FApacheDSStartStopListener.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,277 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.io.File;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+import javax.servlet.ServletContext;\n+import javax.servlet.ServletContextEvent;\n+import javax.servlet.ServletContextListener;\n+import org.apache.directory.api.ldap.model.entry.Entry;\n+import org.apache.directory.api.ldap.model.name.Dn;\n+import org.apache.directory.api.ldap.model.schema.SchemaManager;\n+import org.apache.directory.api.ldap.model.schema.registries.SchemaLoader;\n+import org.apache.directory.api.ldap.schemaextractor.SchemaLdifExtractor;\n+import org.apache.directory.api.ldap.schemaextractor.impl.DefaultSchemaLdifExtractor;\n+import org.apache.directory.api.ldap.schemaloader.LdifSchemaLoader;\n+import org.apache.directory.api.ldap.schemamanager.impl.DefaultSchemaManager;\n+import org.apache.directory.api.util.exception.Exceptions;\n+import org.apache.directory.server.constants.ServerDNConstants;\n+import org.apache.directory.server.core.DefaultDirectoryService;\n+import org.apache.directory.server.core.api.CacheService;\n+import org.apache.directory.server.core.api.DirectoryService;\n+import org.apache.directory.server.core.api.DnFactory;\n+import org.apache.directory.server.core.api.InstanceLayout;\n+import org.apache.directory.server.core.api.partition.Partition;\n+import org.apache.directory.server.core.api.schema.SchemaPartition;\n+import org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmIndex;\n+import org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition;\n+import org.apache.directory.server.core.partition.ldif.LdifPartition;\n+import org.apache.directory.server.i18n.I18n;\n+import org.apache.directory.server.ldap.LdapServer;\n+import org.apache.directory.server.protocol.shared.transport.TcpTransport;\n+import org.apache.directory.server.xdbm.Index;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.core.io.Resource;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Start and stop an embedded ApacheDS instance alongside with Servlet Context.\n+ */\n+public class ApacheDSStartStopListener implements ServletContextListener {\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(ApacheDSStartStopListener.class);\n+\n+    private DirectoryService service;\n+\n+    private LdapServer server;\n+\n+    /**\n+     * Add a new partition to the server.\n+     *\n+     * @param partitionId The partition Id\n+     * @param partitionDn The partition DN\n+     * @param dnFactory the DN factory\n+     * @return The newly added partition\n+     * @throws Exception If the partition can't be added\n+     */\n+    private Partition addPartition(final String partitionId, final String partitionDn, final DnFactory dnFactory)\n+            throws Exception {\n+\n+        // Create a new partition with the given partition id \n+        JdbmPartition partition = new JdbmPartition(service.getSchemaManager(), dnFactory);\n+        partition.setId(partitionId);\n+        partition.setPartitionPath(new File(service.getInstanceLayout().getPartitionsDirectory(), partitionId).toURI());\n+        partition.setSuffixDn(new Dn(partitionDn));\n+        service.addPartition(partition);\n+\n+        return partition;\n+    }\n+\n+    /**\n+     * Add a new set of index on the given attributes.\n+     *\n+     * @param partition The partition on which we want to add index\n+     * @param attrs The list of attributes to index\n+     */\n+    private void addIndex(final Partition partition, final String... attrs) {\n+        // Index some attributes on the apache partition\n+        Set<Index<?, String>> indexedAttributes = new HashSet<>();\n+\n+        for (String attribute : attrs) {\n+            indexedAttributes.add(new JdbmIndex<String>(attribute, false));\n+        }\n+\n+        ((JdbmPartition) partition).setIndexedAttributes(indexedAttributes);\n+    }\n+\n+    /**\n+     * Initialize the schema manager and add the schema partition to directory service.\n+     *\n+     * @throws Exception if the schema LDIF files are not found on the classpath\n+     */\n+    private void initSchemaPartition() throws Exception {\n+        InstanceLayout instanceLayout = service.getInstanceLayout();\n+\n+        File schemaPartitionDirectory = new File(instanceLayout.getPartitionsDirectory(), \"schema\");\n+\n+        // Extract the schema on disk (a brand new one) and load the registries\n+        if (schemaPartitionDirectory.exists()) {\n+            LOG.debug(\"schema partition already exists, skipping schema extraction\");\n+        } else {\n+            SchemaLdifExtractor extractor = new DefaultSchemaLdifExtractor(instanceLayout.getPartitionsDirectory());\n+            extractor.extractOrCopy();\n+        }\n+\n+        SchemaLoader loader = new LdifSchemaLoader(schemaPartitionDirectory);\n+        SchemaManager schemaManager = new DefaultSchemaManager(loader);\n+\n+        // We have to load the schema now, otherwise we won't be able\n+        // to initialize the Partitions, as we won't be able to parse\n+        // and normalize their suffix Dn\n+        schemaManager.loadAllEnabled();\n+\n+        List<Throwable> errors = schemaManager.getErrors();\n+        if (!errors.isEmpty()) {\n+            throw new IllegalStateException(I18n.err(I18n.ERR_317, Exceptions.printErrors(errors)));\n+        }\n+\n+        service.setSchemaManager(schemaManager);\n+\n+        // Init the LdifPartition with schema\n+        LdifPartition schemaLdifPartition = new LdifPartition(schemaManager, service.getDnFactory());\n+        schemaLdifPartition.setPartitionPath(schemaPartitionDirectory.toURI());\n+\n+        // The schema partition\n+        SchemaPartition schemaPartition = new SchemaPartition(schemaManager);\n+        schemaPartition.setWrappedPartition(schemaLdifPartition);\n+        service.setSchemaPartition(schemaPartition);\n+    }\n+\n+    /**\n+     * Initialize the server. It creates the partition, adds the index, and injects the context entries for the created\n+     * partitions.\n+     *\n+     * @param workDir the directory to be used for storing the data\n+     * @param loadDefaultContent if default content should be loaded\n+     * @throws Exception if there were some problems while initializing\n+     */\n+    private void initDirectoryService(final ServletContext servletContext, final File workDir,\n+            final boolean loadDefaultContent) throws Exception {\n+\n+        // Initialize the LDAP service\n+        service = new DefaultDirectoryService();\n+        service.setInstanceLayout(new InstanceLayout(workDir));\n+\n+        CacheService cacheService = new CacheService();\n+        cacheService.initialize(service.getInstanceLayout());\n+\n+        service.setCacheService(cacheService);\n+\n+        // first load the schema\n+        initSchemaPartition();\n+\n+        // then the system partition\n+        // this is a MANDATORY partition\n+        // DO NOT add this via addPartition() method, trunk code complains about duplicate partition\n+        // while initializing \n+        JdbmPartition systemPartition = new JdbmPartition(service.getSchemaManager(), service.getDnFactory());\n+        systemPartition.setId(\"system\");\n+        systemPartition.setPartitionPath(\n+                new File(service.getInstanceLayout().getPartitionsDirectory(), systemPartition.getId()).toURI());\n+        systemPartition.setSuffixDn(new Dn(ServerDNConstants.SYSTEM_DN));\n+        systemPartition.setSchemaManager(service.getSchemaManager());\n+\n+        // mandatory to call this method to set the system partition\n+        // Note: this system partition might be removed from trunk\n+        service.setSystemPartition(systemPartition);\n+\n+        // Disable the ChangeLog system\n+        service.getChangeLog().setEnabled(false);\n+        service.setDenormalizeOpAttrsEnabled(true);\n+\n+        // Now we can create as many partitions as we need\n+        Partition ispPartition = addPartition(\"isp\", \"o=isp\", service.getDnFactory());\n+\n+        // Index some attributes on the apache partition\n+        addIndex(ispPartition, \"objectClass\", \"ou\", \"uid\");\n+\n+        // And start the service\n+        service.startup();\n+\n+        if (loadDefaultContent) {\n+            Resource contentLdif = WebApplicationContextUtils.getWebApplicationContext(servletContext).\n+                    getResource(\"classpath:/content.ldif\");\n+            LdifInputStreamLoader contentLoader = new LdifInputStreamLoader(service.getAdminSession(),\n+                    contentLdif.getInputStream());\n+            int numEntries = contentLoader.execute();\n+            LOG.info(\"Successfully created {} entries\", numEntries);\n+        }\n+    }\n+\n+    /**\n+     * Startup ApacheDS embedded.\n+     *\n+     * @param sce ServletContext event\n+     */\n+    @Override\n+    public void contextInitialized(final ServletContextEvent sce) {\n+        File workDir = (File) sce.getServletContext().getAttribute(\"javax.servlet.context.tempdir\");\n+        workDir = new File(workDir, \"server-work\");\n+\n+        final boolean loadDefaultContent = !workDir.exists();\n+\n+        if (loadDefaultContent && !workDir.mkdirs()) {\n+            throw new RuntimeException(\"Could not create \" + workDir.getAbsolutePath());\n+        }\n+\n+        Entry result;\n+        try {\n+            initDirectoryService(sce.getServletContext(), workDir, loadDefaultContent);\n+\n+            server = new LdapServer();\n+            server.setTransports(new TcpTransport(Integer.valueOf(\n+                    WebApplicationContextUtils.getWebApplicationContext(sce.getServletContext()).\n+                    getBean(\"testds.port\", String.class))));\n+            server.setDirectoryService(service);\n+\n+            server.start();\n+\n+            // store directoryService in context to provide it to servlets etc.\n+            sce.getServletContext().setAttribute(DirectoryService.JNDI_KEY, service);\n+\n+            result = service.getAdminSession().lookup(new Dn(\"o=isp\"));\n+        } catch (Exception e) {\n+            LOG.error(\"Fatal error in context init\", e);\n+            throw new RuntimeException(e);\n+        }\n+\n+        if (result == null) {\n+            throw new RuntimeException(\"Base DN not found\");\n+        } else {\n+            LOG.info(\"ApacheDS startup completed succesfully\");\n+        }\n+    }\n+\n+    /**\n+     * Shutdown ApacheDS embedded.\n+     *\n+     * @param sce ServletContext event\n+     */\n+    @Override\n+    public void contextDestroyed(final ServletContextEvent sce) {\n+        try {\n+            if (server != null) {\n+                server.stop();\n+            }\n+            if (service != null) {\n+                service.shutdown();\n+            }\n+        } catch (Exception e) {\n+            LOG.error(\"Fatal error in context shutdown\", e);\n+            throw new RuntimeException(e);\n+        }\n+    }\n+}"},{"sha":"dece02f5a3f135db6b7ec0ed60cbb6628497c83b","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/ConnIdStartStopListener.java","status":"added","additions":105,"deletions":0,"changes":105,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FConnIdStartStopListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FConnIdStartStopListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FConnIdStartStopListener.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import javax.servlet.ServletContext;\n+import javax.servlet.ServletContextEvent;\n+import javax.servlet.ServletContextListener;\n+import org.identityconnectors.common.security.SecurityUtil;\n+import org.identityconnectors.framework.impl.api.local.ThreadClassLoaderManager;\n+import org.identityconnectors.framework.server.ConnectorServer;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.web.context.WebApplicationContext;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+public class ConnIdStartStopListener implements ServletContextListener {\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(ConnIdStartStopListener.class);\n+\n+    private static final String SERVER = \"ConnIdConnectorServer\";\n+\n+    /**\n+     * Build list of URLs from bundles available under /WEB-INF/lib\n+     *\n+     * @param ctx ServletContext needed for getting ConnId jar bundles URLs\n+     */\n+    private List<URL> getBundleURLs(final ServletContext ctx) {\n+        final List<URL> bundleURLs = new ArrayList<>();\n+\n+        for (String bundleFile : new String[] {\n+            \"testconnectorserver.soap.bundle\",\n+            \"testconnectorserver.db.bundle\",\n+            \"testconnectorserver.csvdir.bundle\",\n+            \"testconnectorserver.ldap.bundle\" }) {\n+\n+            URL url = null;\n+            try {\n+                url = ctx.getResource(\"/WEB-INF/lib/\"\n+                        + WebApplicationContextUtils.getWebApplicationContext(ctx).getBean(bundleFile, String.class));\n+            } catch (MalformedURLException e) {\n+                // ignore\n+            }\n+            if (url != null) {\n+                bundleURLs.add(url);\n+            }\n+        }\n+\n+        LOG.info(\"ConnId bundles loaded: \" + bundleURLs);\n+\n+        return bundleURLs;\n+    }\n+\n+    @Override\n+    public void contextInitialized(final ServletContextEvent sce) {\n+        ConnectorServer _server = ConnectorServer.newInstance();\n+        WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(sce.getServletContext());\n+        try {\n+            _server.setPort(Integer.parseInt(ctx.getBean(\"testconnectorserver.port\", String.class)));\n+\n+            _server.setBundleURLs(getBundleURLs(sce.getServletContext()));\n+\n+            _server.setKeyHash(SecurityUtil.computeBase64SHA1Hash(\n+                    ctx.getBean(\"testconnectorserver.key\", String.class).toCharArray()));\n+\n+            _server.start();\n+            LOG.info(\"ConnId connector server listening on port \" + _server.getPort());\n+        } catch (Exception e) {\n+            LOG.error(\"Could not start ConnId connector server\", e);\n+        }\n+\n+        sce.getServletContext().setAttribute(SERVER, _server);\n+    }\n+\n+    @Override\n+    public void contextDestroyed(final ServletContextEvent sce) {\n+        final ConnectorServer _server = (ConnectorServer) sce.getServletContext().getAttribute(SERVER);\n+        if (_server != null && _server.isStarted()) {\n+            _server.stop();\n+        }\n+        ThreadClassLoaderManager.clearInstance();\n+    }\n+}"},{"sha":"feee732845038cf76873812ae92ed2389c89d279","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/H2StartStopListener.java","status":"added","additions":82,"deletions":0,"changes":82,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FH2StartStopListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FH2StartStopListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FH2StartStopListener.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,82 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.sql.SQLException;\n+import javax.servlet.ServletContext;\n+import javax.servlet.ServletContextEvent;\n+import javax.servlet.ServletContextListener;\n+import javax.sql.DataSource;\n+import org.h2.tools.Server;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.jdbc.datasource.init.DataSourceInitializer;\n+import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;\n+import org.springframework.web.context.WebApplicationContext;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Utility servlet context listener managing H2 test server instance (to be used as external resource).\n+ */\n+public class H2StartStopListener implements ServletContextListener {\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(H2StartStopListener.class);\n+\n+    private static final String H2_TESTDB = \"h2TestDb\";\n+\n+    @Override\n+    public void contextInitialized(final ServletContextEvent sce) {\n+        ServletContext context = sce.getServletContext();\n+        WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(context);\n+\n+        try {\n+            Server h2TestDb = new Server();\n+            h2TestDb.runTool(\"-tcp\", \"-tcpDaemon\", \"-web\", \"-webDaemon\",\n+                    \"-webPort\", ctx.getBean(\"testdb.webport\", String.class));\n+\n+            context.setAttribute(H2_TESTDB, h2TestDb);\n+        } catch (SQLException e) {\n+            LOG.error(\"Could not start H2 test db\", e);\n+        }\n+\n+        DataSource datasource = ctx.getBean(DataSource.class);\n+\n+        ResourceDatabasePopulator populator = new ResourceDatabasePopulator(ctx.getResource(\"classpath:/testdb.sql\"));\n+        populator.setSqlScriptEncoding(\"UTF-8\");\n+        DataSourceInitializer init = new DataSourceInitializer();\n+        init.setDataSource(datasource);\n+        init.setEnabled(true);\n+        init.setDatabasePopulator(populator);\n+        init.afterPropertiesSet();\n+        LOG.info(\"Database successfully initialized\");\n+    }\n+\n+    @Override\n+    public void contextDestroyed(final ServletContextEvent sce) {\n+        final ServletContext context = sce.getServletContext();\n+\n+        final Server h2TestDb = (Server) context.getAttribute(H2_TESTDB);\n+        if (h2TestDb != null) {\n+            h2TestDb.shutdown();\n+        }\n+    }\n+}"},{"sha":"fd9e9e4d3848763fbaa2807575b214607e8486a4","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/LdifInputStreamLoader.java","status":"added","additions":131,"deletions":0,"changes":131,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FLdifInputStreamLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FLdifInputStreamLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FLdifInputStreamLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,131 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.directory.api.ldap.model.entry.DefaultEntry;\n+import org.apache.directory.api.ldap.model.entry.Entry;\n+import org.apache.directory.api.ldap.model.entry.Modification;\n+import org.apache.directory.api.ldap.model.exception.LdapException;\n+import org.apache.directory.api.ldap.model.ldif.LdifEntry;\n+import org.apache.directory.api.ldap.model.ldif.LdifReader;\n+import org.apache.directory.api.ldap.model.name.Dn;\n+import org.apache.directory.server.core.api.CoreSession;\n+import org.apache.directory.server.i18n.I18n;\n+import org.apache.directory.server.protocol.shared.store.LdifLoadFilter;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class LdifInputStreamLoader {\n+\n+    /**\n+     * The log for this class.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(LdifInputStreamLoader.class);\n+\n+    /**\n+     * A handle on the top core session.\n+     */\n+    protected CoreSession coreSession;\n+\n+    /**\n+     * The LDIF input stream file containing LDIFs to load.\n+     */\n+    protected InputStream ldif;\n+\n+    /**\n+     * the total count of entries loaded\n+     */\n+    private int count;\n+\n+    /**\n+     * Creates a new instance of LdifFileLoader.\n+     *\n+     * @param coreSession the context to load the entries into.\n+     * @param ldif the file of LDIF entries to load.\n+     */\n+    public LdifInputStreamLoader(final CoreSession coreSession, final InputStream ldif) {\n+        this(coreSession, ldif, null);\n+    }\n+\n+    /**\n+     * Creates a new instance of LdifFileLoader.\n+     *\n+     * @param coreSession\n+     * @param ldif\n+     * @param filters\n+     */\n+    public LdifInputStreamLoader(\n+            final CoreSession coreSession, final InputStream ldif, final List<? extends LdifLoadFilter> filters) {\n+\n+        this.coreSession = coreSession;\n+        this.ldif = ldif;\n+    }\n+\n+    /**\n+     * Opens the LDIF file and loads the entries into the context.\n+     *\n+     * @return The count of entries created.\n+     */\n+    public int execute() {\n+        try {\n+            try {\n+                for (LdifEntry ldifEntry : new LdifReader(ldif)) {\n+                    Dn dn = ldifEntry.getDn();\n+\n+                    if (ldifEntry.isEntry()) {\n+                        Entry entry = ldifEntry.getEntry();\n+\n+                        try {\n+                            coreSession.lookup(dn);\n+                            LOG.debug(\"Found {}, will not create.\", dn);\n+                        } catch (Exception e) {\n+                            try {\n+                                coreSession.add(\n+                                        new DefaultEntry(coreSession.getDirectoryService().getSchemaManager(), entry));\n+                                count++;\n+                                LOG.debug(\"Created {}.\", dn);\n+                            } catch (LdapException e1) {\n+                                LOG.error(\"Could not create entry \" + entry, e1);\n+                            }\n+                        }\n+                    } else {\n+                        //modify\n+                        List<Modification> items = ldifEntry.getModifications();\n+\n+                        try {\n+                            coreSession.modify(dn, items);\n+                            LOG.debug(\"Modified: \" + dn + \" with modificationItems: \" + items);\n+                        } catch (LdapException e) {\n+                            LOG.debug(\"Could not modify: \" + dn + \" with modificationItems: \" + items, e);\n+                        }\n+                    }\n+                }\n+            } finally {\n+                IOUtils.closeQuietly(ldif);\n+            }\n+        } catch (Exception ioe) {\n+            LOG.error(I18n.err(I18n.ERR_174), ioe);\n+        }\n+\n+        return count;\n+    }\n+}"},{"sha":"dcfe72ed2a5f3a4d08dac19daf616a037fb4509a","filename":"syncope620/fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/ServiceTimeoutServlet.java","status":"added","additions":105,"deletions":0,"changes":105,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FServiceTimeoutServlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FServiceTimeoutServlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2FServiceTimeoutServlet.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,105 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.buildtools;\n+\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+\n+/**\n+ * Just used to verify a connector request timeout.\n+ */\n+public class ServiceTimeoutServlet extends HttpServlet {\n+\n+    private static final long serialVersionUID = -1467488672392710293L;\n+\n+    /**\n+     * Processes requests for both HTTP\n+     * <code>GET</code> and\n+     * <code>POST</code> methods.\n+     *\n+     * @param request servlet request\n+     * @param response servlet response\n+     * @throws ServletException if a servlet-specific error occurs\n+     * @throws IOException if an I/O error occurs\n+     */\n+    protected void processRequest(final HttpServletRequest request, final HttpServletResponse response)\n+            throws ServletException, IOException {\n+\n+        response.setContentType(\"text/html;charset=UTF-8\");\n+\n+        try {\n+            Thread.sleep(60000);\n+        } catch (InterruptedException ignore) {\n+            // ignore\n+        }\n+\n+        final PrintWriter out = response.getWriter();\n+        try {\n+            out.println(\"OK\");\n+        } finally {\n+            out.close();\n+        }\n+    }\n+\n+    /**\n+     * Handles the HTTP\n+     * <code>GET</code> method.\n+     *\n+     * @param request servlet request\n+     * @param response servlet response\n+     * @throws ServletException if a servlet-specific error occurs\n+     * @throws IOException if an I/O error occurs\n+     */\n+    @Override\n+    protected void doGet(final HttpServletRequest request, final HttpServletResponse response)\n+            throws ServletException, IOException {\n+\n+        processRequest(request, response);\n+    }\n+\n+    /**\n+     * Handles the HTTP\n+     * <code>POST</code> method.\n+     *\n+     * @param request servlet request\n+     * @param response servlet response\n+     * @throws ServletException if a servlet-specific error occurs\n+     * @throws IOException if an I/O error occurs\n+     */\n+    @Override\n+    protected void doPost(final HttpServletRequest request, final HttpServletResponse response)\n+            throws ServletException, IOException {\n+\n+        processRequest(request, response);\n+    }\n+\n+    /**\n+     * Returns a short description of the servlet.\n+     *\n+     * @return a String containing servlet description\n+     */\n+    @Override\n+    public String getServletInfo() {\n+        return \"Service Timeout\";\n+    }\n+}"},{"sha":"2b63ed648b2c83764e1476f5431c22e8bbb87e56","filename":"syncope620/fit/build-tools/src/main/resources/buildToolsContext.xml","status":"added","additions":58,"deletions":0,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2FbuildToolsContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2FbuildToolsContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2FbuildToolsContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+  <bean id=\"testDataSource\"\n+        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n+    <property name=\"driverClassName\" value=\"${testdb.driver}\"/>\n+    <property name=\"url\" value=\"${testdb.url}\"/>\n+    <property name=\"username\" value=\"${testdb.username}\"/>\n+    <property name=\"password\" value=\"${testdb.password}\"/>\n+  </bean>\n+\n+  <bean id=\"testds.port\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${testds.port}\"/>\n+  </bean>\n+  <bean id=\"testdb.webport\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${testdb.webport}\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.port\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${testconnectorserver.port}\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.key\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${testconnectorserver.key}\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.soap.bundle\" class=\"java.lang.String\">\n+    <constructor-arg value=\"net.tirasa.connid.bundles.soap-${connid.soap.version}.jar\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.db.bundle\" class=\"java.lang.String\">\n+    <constructor-arg value=\"net.tirasa.connid.bundles.db.table-${connid.db.table.version}.jar\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.csvdir.bundle\" class=\"java.lang.String\">\n+    <constructor-arg value=\"net.tirasa.connid.bundles.csvdir-${connid.csvdir.version}.jar\"/>\n+  </bean>  \n+  <bean id=\"testconnectorserver.ldap.bundle\" class=\"java.lang.String\">\n+    <constructor-arg value=\"net.tirasa.connid.bundles.ldap-${connid.ldap.version}.jar\"/>\n+  </bean>\n+    \n+</beans>"},{"sha":"aa47af57de5c9bd4322a82aec67a668506055b88","filename":"syncope620/fit/build-tools/src/main/resources/content.ldif","status":"added","additions":57,"deletions":0,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Fcontent.ldif","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Fcontent.ldif","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Fcontent.ldif?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,57 @@\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+DN: o=isp\n+objectClass: organization\n+objectClass: top\n+o: isp\n+\n+DN: ou=People,o=isp\n+objectClass: organizationalUnit\n+objectClass: top\n+ou: People\n+\n+DN: ou=Groups,o=isp\n+objectClass: organizationalUnit\n+objectClass: top\n+ou: Groups\n+\n+DN: cn=testLDAPGroup,ou=Groups,o=isp\n+objectClass: groupOfUniqueNames\n+objectClass: top\n+cn: testLDAPGroup\n+uniqueMember: uid=admin,ou=system\n+uniqueMember: uid=syncFromLDAP,ou=People,o=isp\n+owner: uid=syncFromLDAP,ou=People,o=isp\n+\n+DN: uid=syncFromLDAP,ou=People,o=isp\n+objectClass: organizationalPerson\n+objectClass: person\n+objectClass: inetOrgPerson\n+objectClass: top\n+cn: syncFromLDAP\n+description: Active\n+mail: syncFromLDAP@syncope.apache.org\n+sn: Surname\n+uid: syncFromLDAP\n+userpassword:: cGFzc3dvcmQxMjM=\n+givenname: syncFromLDAP\n+registeredAddress:  5BAA61E4C9B93F3F0682250B6CF8331B7EE68FD8\n+jpegPhoto:: /9j/4AAQSkZJRgABAQEBKwErAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoH\n+ BwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQk\n+ UDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wg\n+ ARCAAEAAQDAREAAhEBAxEB/8QAFAABAAAAAAAAAAAAAAAAAAAACP/EABQBAQAAAAAAAAAAAAAAA\n+ AAAAAD/2gAMAwEAAhADEAAAAUuf/8QAFhABAQEAAAAAAAAAAAAAAAAAAwAS/9oACAEBAAEFAiLV\n+ /8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/\n+ aAAgBAgEBPwF//8QAGhAAAQUBAAAAAAAAAAAAAAAAAgABESEiQf/aAAgBAQAGPwI9k2orq//EAB\n+ kQAAMAAwAAAAAAAAAAAAAAAAERIQBBYf/aAAgBAQABPyF20CYlpT3P/9oADAMBAAIAAwAAABCf/\n+ 8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPxB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/a\n+ AAgBAgEBPxB//8QAGhABAAIDAQAAAAAAAAAAAAAAAREhAEFRYf/aAAgBAQABPxCUKGDcAUFrvhoz/9k="},{"sha":"ffe88f671eda6182a87aac771953e0eff3729d5a","filename":"syncope620/fit/build-tools/src/main/resources/log4j2.xml","status":"added","additions":39,"deletions":0,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,39 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<configuration status=\"WARN\">\n+\n+  <appenders>\n+    \n+    <Console name=\"main\" target=\"SYSTEM_OUT\">\n+      <PatternLayout>\n+        <pattern>%d{HH:mm:ss.SSS} %-5level %logger - %msg%n</pattern>\n+      </PatternLayout>\n+    </Console>\n+\n+  </appenders>\n+  \n+  <loggers>\n+        \n+    <root level=\"INFO\">\n+      <appender-ref ref=\"main\"/>\n+    </root>\n+    \n+  </loggers>\n+</configuration>"},{"sha":"ff4dd476d47d96cb856647c5a3f5b5162fc3cc5d","filename":"syncope620/fit/build-tools/src/main/resources/testdb.sql","status":"added","additions":46,"deletions":0,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,46 @@\n+-- Licensed to the Apache Software Foundation (ASF) under one\n+-- or more contributor license agreements.  See the NOTICE file\n+-- distributed with this work for additional information\n+-- regarding copyright ownership.  The ASF licenses this file\n+-- to you under the Apache License, Version 2.0 (the\n+-- \"License\"); you may not use this file except in compliance\n+-- with the License.  You may obtain a copy of the License at\n+\n+--  http://www.apache.org/licenses/LICENSE-2.0\n+\n+-- Unless required by applicable law or agreed to in writing,\n+-- software distributed under the License is distributed on an\n+-- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+-- KIND, either express or implied.  See the License for the\n+-- specific language governing permissions and limitations\n+-- under the License.\n+ALTER USER sa SET PASSWORD '${testdb.password}';\n+\n+DROP TABLE test IF EXISTS;\n+CREATE TABLE test (\n+id VARCHAR(50) PRIMARY KEY,\n+password VARCHAR(255) NOT NULL,\n+status VARCHAR(5));\n+\n+INSERT INTO test VALUES ('testuser1', 'password', 'false');\n+\n+-- this table must be created in order to provide a specific test for issueSYNCOPE68\n+DROP TABLE test2 IF EXISTS;\n+CREATE TABLE test2 (\n+id VARCHAR(50) PRIMARY KEY,\n+password VARCHAR(255) NOT NULL,\n+status VARCHAR(5));\n+\n+INSERT INTO test2 VALUES ('testuser2', 'password321', 'false');\n+INSERT INTO test2 VALUES ('rossini', 'password321', 'true');\n+INSERT INTO test2 VALUES ('verdi', 'password321', 'true');\n+\n+-- this table is for issueSYNCOPE230\n+DROP TABLE testsync IF EXISTS;\n+CREATE TABLE TESTSYNC (\n+id NUMBER(10) PRIMARY KEY,\n+username VARCHAR(80),\n+surname VARCHAR(80),\n+email VARCHAR(80));\n+\n+INSERT INTO testsync VALUES (965, 'issuesyncope230', 'Surname', 'syncope230@syncope.apache.org');"},{"sha":"df3438d8e9f89a471cd78e8ae54265688af9bf9c","filename":"syncope620/fit/build-tools/src/main/webapp/WEB-INF/web.xml","status":"added","additions":60,"deletions":0,"changes":60,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fbuild-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,60 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee \n+                             http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"\n+         version=\"3.1\">\n+\n+  <context-param>\n+    <param-name>contextConfigLocation</param-name>\n+    <param-value>classpath*:/buildToolsContext.xml</param-value>\n+  </context-param>\n+  \n+  <listener>\n+    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n+  </listener>\n+  <listener>\n+    <listener-class>org.apache.syncope.fit.buildtools.ApacheDSStartStopListener</listener-class>\n+  </listener>\n+  <listener>\n+    <listener-class>org.apache.syncope.fit.buildtools.H2StartStopListener</listener-class>\n+  </listener>\n+  <listener>\n+    <listener-class>org.apache.syncope.fit.buildtools.ConnIdStartStopListener</listener-class>\n+  </listener>\n+  <servlet>\n+    <servlet-name>ApacheDSRootDseServlet</servlet-name>\n+    <servlet-class>org.apache.syncope.fit.buildtools.ApacheDSRootDseServlet</servlet-class>\n+  </servlet>\n+  <servlet>\n+    <servlet-name>ServiceTimeoutServlet</servlet-name>\n+    <servlet-class>org.apache.syncope.fit.buildtools.ServiceTimeoutServlet</servlet-class>\n+  </servlet>\n+  <servlet-mapping>\n+    <servlet-name>ApacheDSRootDseServlet</servlet-name>\n+    <url-pattern>/apacheDS</url-pattern>\n+  </servlet-mapping>\n+  <servlet-mapping>\n+    <servlet-name>ServiceTimeoutServlet</servlet-name>\n+    <url-pattern>/services/*</url-pattern>\n+  </servlet-mapping>\n+\n+</web-app>\n\\ No newline at end of file"},{"sha":"54c847f125cfa8f681e8c1256dfb7675a583153b","filename":"syncope620/fit/pom.xml","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,41 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope</groupId>\n+    <artifactId>syncope</artifactId>\n+    <version>2.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope FIT</name>\n+  <description>Apache Syncope Full Integration Test</description>\n+  <groupId>org.apache.syncope</groupId>\n+  <artifactId>syncope-fit</artifactId>\n+  <packaging>pom</packaging>\n+\n+  <modules>\n+    <module>build-tools</module>\n+    <module>reference</module>\n+  </modules>\n+\n+</project>"},{"sha":"148c71a29662abc977de530881533ae7f437656a","filename":"syncope620/fit/reference/pom.xml","status":"added","additions":310,"deletions":0,"changes":310,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,310 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope</groupId>\n+    <artifactId>syncope-fit</artifactId>\n+    <version>2.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope FIT Server Reference</name>\n+  <description>Apache Syncope FIT Server Reference</description>\n+  <groupId>org.apache.syncope.fit</groupId>\n+  <artifactId>syncope-fit-server-reference</artifactId>\n+  <packaging>war</packaging>\n+  \n+  <properties>\n+    <jdbcdriver.groupId>com.h2database</jdbcdriver.groupId>\n+    <jdbcdriver.artifactId>h2</jdbcdriver.artifactId>\n+    \n+    <rootpom.basedir>${basedir}/../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency> \n+      <groupId>javax.servlet</groupId> \n+      <artifactId>javax.servlet-api</artifactId> \n+    </dependency>\n+    <dependency>\n+      <groupId>javax.servlet.jsp</groupId>\n+      <artifactId>javax.servlet.jsp-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>javax.servlet</groupId>\n+      <artifactId>jstl</artifactId>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.apache.syncope.server</groupId>\n+      <artifactId>syncope-server-rest-cxf</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.server</groupId>\n+      <artifactId>syncope-server-workflow-java</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.server</groupId>\n+      <artifactId>syncope-server-persistence-jpa</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.apache.syncope.fit</groupId>\n+      <artifactId>syncope-fit-build-tools</artifactId>\n+      <version>${project.version}</version>\n+      <type>war</type>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>net.tirasa.connid.bundles.soap</groupId>\n+      <artifactId>wssample</artifactId>\n+      <version>${connid.soap.version}</version>\n+      <type>war</type>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.h2database</groupId>\n+      <artifactId>h2</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.lmax</groupId>\n+      <artifactId>disruptor</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.logging.log4j</groupId>\n+      <artifactId>log4j-slf4j-impl</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>commons-logging</groupId>\n+      <artifactId>commons-logging</artifactId>\n+      <scope>provided</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>jcl-over-slf4j</artifactId>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.webjars</groupId>\n+      <artifactId>jquery</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.webjars</groupId>\n+      <artifactId>jquery-ui</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.webjars</groupId>\n+      <artifactId>highlightjs</artifactId>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-war-plugin</artifactId>\n+        <inherited>true</inherited>\n+        <configuration>\n+          <failOnMissingWebXml>false</failOnMissingWebXml>\n+        </configuration>\n+      </plugin>\n+                \n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-dependency-plugin</artifactId>\n+        <inherited>true</inherited>\n+        <executions>\n+          <execution>\n+            <id>set-bundles</id>\n+            <phase>process-test-resources</phase>\n+            <goals>\n+              <goal>copy</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      \n+      <plugin>\n+        <groupId>org.codehaus.cargo</groupId>\n+        <artifactId>cargo-maven2-plugin</artifactId>\n+        <inherited>true</inherited>\n+        <configuration>\n+          <container>\n+            <dependencies>\n+              <dependency>\n+                <groupId>com.h2database</groupId>\n+                <artifactId>h2</artifactId>\n+              </dependency>\n+              <dependency>\n+                <groupId>${jdbcdriver.groupId}</groupId>\n+                <artifactId>${jdbcdriver.artifactId}</artifactId>\n+              </dependency>\n+            </dependencies>\n+          </container>\n+          <configuration>\n+            <type>standalone</type>\n+            <properties>\n+              <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>\n+              <cargo.tomcat.ajp.port>${cargo.tomcat.ajp.port}</cargo.tomcat.ajp.port>\n+              <cargo.rmi.port>${cargo.rmi.port}</cargo.rmi.port>\n+\n+              <cargo.jvmargs>-noverify -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m</cargo.jvmargs>\n+            </properties>\n+            <configfiles>\n+              <configfile>\n+                <file>${project.build.directory}/classes/context.xml</file>\n+                <todir>conf/</todir>\n+                <tofile>context.xml</tofile>\n+              </configfile>\n+            </configfiles>\n+          </configuration>\n+          <deployables>\n+            <deployable>\n+              <groupId>net.tirasa.connid.bundles.soap</groupId>\n+              <artifactId>wssample</artifactId>\n+              <type>war</type>\n+              <properties>\n+                <context>wssample</context>\n+              </properties>\n+            </deployable>\n+            <deployable>\n+              <groupId>org.apache.syncope.fit</groupId>\n+              <artifactId>syncope-fit-build-tools</artifactId>\n+              <type>war</type>\n+              <properties>\n+                <context>syncope-fit-build-tools</context>\n+              </properties>\n+            </deployable>\n+            <deployable>\n+              <location>${project.build.directory}/${project.build.finalName}</location>\n+              <pingURL>http://localhost:${cargo.servlet.port}/syncope/cacheStats.jsp</pingURL>\n+              <pingTimeout>60000</pingTimeout>\n+              <properties>\n+                <context>syncope</context>\n+              </properties>\n+            </deployable>\n+          </deployables>\n+        </configuration>\n+        <executions>\n+          <execution>\n+            <id>start-container</id>\n+            <phase>pre-integration-test</phase>\n+            <goals>\n+              <goal>start</goal>\n+            </goals>\n+          </execution>\n+          <execution>\n+            <id>stop-container</id>\n+            <phase>post-integration-test</phase>\n+            <goals>\n+              <goal>stop</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      \n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-pmd-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+    \n+    <resources>\n+      <resource>\n+        <directory>src/main/resources</directory>\n+        <filtering>true</filtering>\n+      </resource>\n+      <resource>\n+        <directory>${basedir}/../../server/persistence-jpa/src/test/resources</directory>\n+        <includes>\n+          <include>content.xml</include>\n+          <include>persistence.properties</include>\n+        </includes>\n+        <filtering>true</filtering>\n+      </resource>\n+      <resource>\n+        <directory>${basedir}/../../server/misc/src/main/resources</directory>\n+        <includes>\n+          <include>security.properties</include>\n+        </includes>\n+        <filtering>true</filtering>\n+      </resource>\n+    </resources>\n+  </build>\n+  \n+  <profiles>\n+    <profile>\n+      <id>debug</id>\n+\n+      <build>\n+        <defaultGoal>clean verify cargo:run</defaultGoal>\n+\n+        <plugins>\n+          <plugin>\n+            <groupId>org.codehaus.cargo</groupId>\n+            <artifactId>cargo-maven2-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <configuration>\n+              <configuration>\n+                <properties>\n+                  <cargo.jvmargs>-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n\n+                    -noverify -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m</cargo.jvmargs>\n+                </properties>\n+              </configuration>\n+            </configuration>\n+            <executions>\n+              <execution>\n+                <id>start-container</id>\n+                <phase>none</phase>\n+              </execution>\n+              <execution>\n+                <id>stop-container</id>\n+                <phase>none</phase>\n+              </execution>\n+            </executions>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n+  </profiles>\n+</project>"},{"sha":"54d83c39e3e1a171ed8a5348527b503d354489e2","filename":"syncope620/fit/reference/src/main/resources/connid.properties","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fconnid.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fconnid.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fconnid.properties?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,18 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+connid.locations=${connid.location},\\\n+connid://${testconnectorserver.key}@localhost:${testconnectorserver.port}"},{"sha":"471d561f622199c9bdd91a18c2f75399e67b3b81","filename":"syncope620/fit/reference/src/main/resources/context.xml","status":"added","additions":23,"deletions":0,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fcontext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fcontext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Fcontext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,23 @@\n+<?xml version='1.0' encoding='utf-8'?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<Context>\n+  <!-- Disable session persistence across Tomcat restarts -->\n+  <Manager pathname=\"\"/>\n+</Context>"},{"sha":"d8acf8c20dbdade564fff829ad4aa5f9da93196e","filename":"syncope620/fit/reference/src/main/resources/log4j2.xml","status":"added","additions":129,"deletions":0,"changes":129,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,129 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<configuration status=\"WARN\">\n+\n+  <appenders>\n+    \n+    <RollingRandomAccessFile name=\"main\" fileName=\"${log.directory}/server.log\"\n+                             filePattern=\"${log.directory}/server-%d{yyyy-MM-dd}.log.gz\"\n+                             immediateFlush=\"false\" append=\"true\">\n+      <PatternLayout>\n+        <pattern>%d{HH:mm:ss.SSS} %-5level %logger - %msg%n</pattern>\n+      </PatternLayout>\n+      <Policies>\n+        <TimeBasedTriggeringPolicy/>\n+        <SizeBasedTriggeringPolicy size=\"250 MB\"/>\n+      </Policies>\n+    </RollingRandomAccessFile>\n+\n+    <RollingRandomAccessFile name=\"persistence\" fileName=\"${log.directory}/server-persistence.log\"\n+                             filePattern=\"${log.directory}/server-persistence-%d{yyyy-MM-dd}.log.gz\"\n+                             immediateFlush=\"false\" append=\"true\">\n+      <PatternLayout>\n+        <pattern>%d{HH:mm:ss.SSS} %-5level %logger - %msg%n</pattern>\n+      </PatternLayout>\n+      <Policies>\n+        <TimeBasedTriggeringPolicy/>\n+        <SizeBasedTriggeringPolicy size=\"250 MB\"/>\n+      </Policies>\n+    </RollingRandomAccessFile>\n+\n+    <RollingRandomAccessFile name=\"rest\" fileName=\"${log.directory}/server-rest.log\"\n+                             filePattern=\"${log.directory}/server-rest-%d{yyyy-MM-dd}.log.gz\"\n+                             immediateFlush=\"false\" append=\"true\">\n+      <PatternLayout>\n+        <pattern>%d{HH:mm:ss.SSS} %-5level %logger - %msg%n</pattern>\n+      </PatternLayout>\n+      <Policies>\n+        <TimeBasedTriggeringPolicy/>\n+        <SizeBasedTriggeringPolicy size=\"250 MB\"/>\n+      </Policies>\n+    </RollingRandomAccessFile>\n+\n+    <RollingRandomAccessFile name=\"connid\" fileName=\"${log.directory}/server-connid.log\"\n+                             filePattern=\"${log.directory}/server-connid-%d{yyyy-MM-dd}.log.gz\"\n+                             immediateFlush=\"false\" append=\"true\">\n+      <PatternLayout>\n+        <pattern>%d{HH:mm:ss.SSS} %-5level %msg%n</pattern>\n+      </PatternLayout>\n+      <Policies>\n+        <TimeBasedTriggeringPolicy/>\n+        <SizeBasedTriggeringPolicy size=\"250 MB\"/>\n+      </Policies>\n+    </RollingRandomAccessFile>\n+\n+    <!-- Audit -->    \n+    <Jdbc name=\"audit\" tableName=\"SYNCOPEAUDIT\">\n+      <ConnectionFactory class=\"org.apache.syncope.server.logic.audit.AuditConnectionFactory\" method=\"getConnection\"/>\n+      <Column name=\"EVENT_DATE\" isEventTimestamp=\"true\"/>\n+      <Column name=\"LOGGER_LEVEL\" pattern=\"%level\" isUnicode=\"false\"/>\n+      <Column name=\"LOGGER\" pattern=\"%logger\" isUnicode=\"false\"/>\n+      <Column name=\"MESSAGE\" pattern=\"%message\" isUnicode=\"false\"/>\n+      <Column name=\"THROWABLE\" pattern=\"%ex{full}\" isUnicode=\"false\"/>\n+    </Jdbc>\n+\n+  </appenders>\n+  \n+  <loggers>\n+    \n+    <asyncLogger name=\"org.apache.syncope.server.persistence\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"persistence\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.springframework.orm\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"persistence\"/>\n+    </asyncLogger>\n+    \n+    <asyncLogger name=\"org.apache.syncope.server.rest\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"rest\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.springframework.web\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"rest\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.apache.http\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"rest\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.apache.cxf\" additivity=\"false\" level=\"ERROR\">\n+      <appender-ref ref=\"rest\"/>\n+    </asyncLogger>\n+    \n+    <asyncLogger name=\"org.identityconnectors\" additivity=\"false\" level=\"DEBUG\">\n+      <appender-ref ref=\"connid\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"net.tirasa.connid\" additivity=\"false\" level=\"DEBUG\">\n+      <appender-ref ref=\"connid\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.apache.syncope.server.provisioning.api.ConnIdBundleManager\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"connid\"/>\n+    </asyncLogger>\n+    \n+    <asyncLogger name=\"org.springframework\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"main\"/>\n+    </asyncLogger>\n+     \n+    <logger name=\"syncope.audit\" additivity=\"false\" level=\"DEBUG\">\n+      <appender-ref ref=\"audit\"/>\n+    </logger>\n+    \n+    <root level=\"INFO\">\n+      <appender-ref ref=\"main\"/>\n+    </root>\n+    \n+  </loggers>\n+</configuration>"},{"sha":"8ab1eb1d66f49ba9d177c5ddb6f0a8eb9794ac4b","filename":"syncope620/fit/reference/src/main/resources/serverContext.xml","status":"added","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2FserverContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2FserverContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fresources%2FserverContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,55 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\" \n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+  <bean id=\"confDirectoryPropertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n+    <property name=\"order\" value=\"1\"/>\n+    <property name=\"ignoreResourceNotFound\" value=\"true\"/>\n+    <property name=\"ignoreUnresolvablePlaceholders\" value=\"true\"/>\n+    <property name=\"locations\">\n+      <list>\n+        <value>file:${conf.directory}/persistence.properties</value>\n+        <value>file:${conf.directory}/security.properties</value>\n+        <value>file:${conf.directory}/connid.properties</value>\n+        <value>file:${conf.directory}/mail.properties</value>\n+        <value>file:${conf.directory}/logic.properties</value>\n+        <value>file:${conf.directory}/workflow.properties</value>\n+      </list>\n+    </property>\n+  </bean>\n+  <bean id=\"classpathPropertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n+    <property name=\"locations\">\n+      <list>\n+        <value>classpath:persistence.properties</value>\n+        <value>classpath:security.properties</value>\n+        <value>classpath:connid.properties</value>\n+        <value>classpath:mail.properties</value>\n+        <value>classpath:logic.properties</value>\n+        <value>classpath:workflow.properties</value>\n+      </list>\n+    </property>\n+  </bean>\n+\n+  <bean class=\"org.apache.syncope.server.misc.spring.ApplicationContextProvider\"/>\n+\n+</beans>"},{"sha":"5ff8a6b2c1eb10edc594119e2fd1bbbba68e5457","filename":"syncope620/fit/reference/src/main/webapp/cacheStats.jsp","status":"added","additions":190,"deletions":0,"changes":190,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2FcacheStats.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2FcacheStats.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2FcacheStats.jsp?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,190 @@\n+<%--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+--%>\n+<%@page import=\"org.apache.syncope.common.lib.SyncopeConstants\"%>\n+<%@page import=\"org.apache.syncope.server.misc.spring.ApplicationContextProvider\"%>\n+<%@page contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\"%>\n+<%@taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\"%>\n+<%@taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\"%>\n+<%@page import=\"java.text.SimpleDateFormat\"%>\n+<%@page import=\"java.util.Date\"%>\n+<%@page import=\"org.apache.openjpa.datacache.CacheStatisticsImpl\"%>\n+<%@page import=\"javax.persistence.EntityManagerFactory\"%>\n+<%@page import=\"org.apache.openjpa.persistence.OpenJPAPersistence\"%>\n+<%@page import=\"org.apache.openjpa.persistence.OpenJPAEntityManagerFactory\"%>\n+<%@page import=\"org.springframework.context.ConfigurableApplicationContext\"%>\n+<%@page import=\"org.apache.openjpa.datacache.QueryKey\"%>\n+<%@page import=\"org.apache.openjpa.kernel.QueryStatistics\"%>\n+<%@page import=\"org.apache.openjpa.persistence.QueryResultCacheImpl\"%>\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n+<html>\n+  <head>\n+    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n+    <title>Cache Statistics</title>\n+    <style type=\"text/css\">\n+      .c{\n+        text-align: center;\n+      }\n+      .r{\n+        text-align: right;\n+      }\n+      .l{\n+        text-align: left;\n+      }\n+      .t{\n+        vertical-align: top;\n+      }\n+      .b{\n+        vertical-align: bottom;\n+      }\n+      .odd{\n+        background-color: #D4D4D4;\n+      }\n+      .even{\n+        background-color: #EEEEEE;\n+      }\n+      .bd1{\n+        border: solid #888888 1px;\n+      }\n+      .bg1{\n+        background-color: #CCCCCC;\n+      }\n+      .bg2{\n+        background-color: #DDDDDD;\n+      }\n+    </style>\n+  </head>\n+  <body>\n+    <p/>\n+    <%\n+        ConfigurableApplicationContext context = ApplicationContextProvider.getApplicationContext();\n+\n+        EntityManagerFactory emf = context.getBean(EntityManagerFactory.class);\n+        OpenJPAEntityManagerFactory oemf = OpenJPAPersistence.cast(emf);\n+\n+        QueryStatistics<QueryKey> queryStatistics =\n+                ((QueryResultCacheImpl) oemf.getQueryResultCache()).getDelegate().getStatistics();\n+\n+        CacheStatisticsImpl statistics = (CacheStatisticsImpl) oemf.getStoreCache().getStatistics();\n+\n+        String action = request.getParameter(\"do\");\n+        StringBuilder info = new StringBuilder(512);\n+\n+        if (\"activate\".equals(action) && !statistics.isEnabled()) {\n+            statistics.enable();\n+            info.append(\"Statistics enabled\\n\");\n+        } else if (\"deactivate\".equals(action) && !statistics.isEnabled()) {\n+            statistics.disable();\n+            info.append(\"Statistics disabled\\n\");\n+        } else if (\"clear\".equals(action)) {\n+            queryStatistics.reset();\n+            statistics.reset();\n+            info.append(\"Statistics cleared\\n\");\n+        }\n+\n+        SimpleDateFormat sdf = new SimpleDateFormat(SyncopeConstants.DEFAULT_DATE_PATTERN);\n+        if (info.length() > 0) {\n+    %>\n+    <p/><div class=\"success\">\n+      <c:out value=\"${fn:escapeXml(info)}\"/>\n+    </div>\n+    <%                    }%>\n+    <p/>\n+    <a href=\"?\">Reload</a>\n+    <p/>\n+    <a href=\"?do=<%=(statistics.isEnabled() ? \"deactivate\" : \"activate\")%>\">\n+      <%=(statistics.isEnabled() ? \"DEACTIVATE\" : \"ACTIVATE\")%></a>\n+    <a href=\"?do=clear\">CLEAR</a>\n+    <p/>\n+    Last update: <%=sdf.format(statistics.since())%><br/>\n+    Activation: <%=sdf.format(statistics.start())%><br/>\n+    <p/>\n+    <table>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Hits</th>\n+        <td><%=statistics.getHitCount()%></td>\n+      </tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Reads</th>\n+        <td><%=statistics.getReadCount()%></td>\n+      </tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Writes</th>\n+        <td><%=statistics.getWriteCount()%></td>\n+      </tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Query Hits</th>\n+        <td><%=queryStatistics.getHitCount()%></td>\n+      </tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Query Executions</th>\n+        <td><%=queryStatistics.getExecutionCount()%></td>\n+      </tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Query Evictions</th>\n+        <td><%=queryStatistics.getEvictionCount()%></td>\n+      </tr>\n+    </table>\n+    <p/>\n+    <table width=\"100%\">\n+      <tr><th colspan=\"3\" class=\"c bd1 bg2\">Query statistics</th></tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Query</th>\n+        <th class=\"c bd1 bg1\">Hits</th>\n+        <th class=\"c bd1 bg1\">Executions</th>\n+      </tr>\n+      <%\n+          boolean odd = true;\n+          for (QueryKey key : queryStatistics.keys()) {\n+      %>\n+      <tr class=\"<%=(odd ? \"odd\" : \"even\")%>\">\n+        <td><%=key%></td>\n+        <td><%=queryStatistics.getHitCount(key)%></td>\n+        <td><%=queryStatistics.getExecutionCount(key)%></td>\n+      </tr>\n+      <%\n+              odd = !odd;\n+          }\n+      %>\n+    </table>\n+    <p/>\n+    <table width=\"100%\">\n+      <tr><th colspan=\"4\" class=\"c bd1 bg2\">2nd level cache statistics</th></tr>\n+      <tr>\n+        <th class=\"c bd1 bg1\">Region</th>\n+        <th class=\"c bd1 bg1\">Hits</th>\n+        <th class=\"c bd1 bg1\">Reads</th>\n+        <th class=\"c bd1 bg1\">Writes</th>\n+      </tr>\n+      <%\n+          odd = true;\n+          for (String className : statistics.classNames()) {\n+      %>\n+      <tr class=\"<%=(odd ? \"odd\" : \"even\")%>\">\n+        <td><%=className%></td>\n+        <td><%=statistics.getHitCount(className)%></td>\n+        <td><%=statistics.getReadCount(className)%></td>\n+        <td><%=statistics.getWriteCount(className)%></td>\n+      </tr>\n+      <%\n+              odd = !odd;\n+          }\n+      %>\n+    </table>\n+  </body>\n+</html>"},{"sha":"2a4c6ac748910824cabf5bd4ffb62f2c673f0ec5","filename":"syncope620/fit/reference/src/main/webapp/db.jsp","status":"added","additions":36,"deletions":0,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2Fdb.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2Fdb.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Freference%2Fsrc%2Fmain%2Fwebapp%2Fdb.jsp?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,36 @@\n+<%--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+--%>\n+<%@page import=\"java.sql.SQLException\"%>\n+<%@page import=\"org.h2.tools.Server\"%>\n+<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n+<%\n+    Server h2Datastore = (Server) getServletConfig().getServletContext().getAttribute(\"H2_DATASTORE\");\n+    if (h2Datastore == null || !h2Datastore.isRunning(true)) {\n+        try {\n+            h2Datastore = Server.createWebServer(\"-webPort\", \"8082\");\n+            h2Datastore.start();\n+\n+            getServletConfig().getServletContext().setAttribute(\"H2_DATASTORE\", h2Datastore);\n+        } catch (SQLException e) {\n+            getServletConfig().getServletContext().log(\"Could not start H2 web console (datastore)\", e);\n+        }\n+\n+        response.sendRedirect(\"http://localhost:8082\");\n+    }\n+%>\n\\ No newline at end of file"},{"sha":"96b475fcffbe6195a2e2c8be11f8ab400e9341ff","filename":"syncope620/pom.xml","status":"modified","additions":163,"deletions":15,"changes":178,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -325,7 +325,7 @@ under the License.\n     <jackson.version>2.5.0</jackson.version>\n \n     <spring.version>4.1.4.RELEASE</spring.version>\n-    <spring-security.version>4.0.0.RC1</spring-security.version>\n+    <spring-security.version>3.2.5.RELEASE</spring-security.version>\n \n     <openjpa.version>2.3.0</openjpa.version>\n     <commons-dbcp.version>2.0.1</commons-dbcp.version>\n@@ -337,8 +337,11 @@ under the License.\n \n     <cocoon.version>3.0.0-alpha-3</cocoon.version>\n \n+    <groovy.version>2.3.9</groovy.version>\n+\n     <slf4j.version>1.7.10</slf4j.version>\n     <log4j.version>2.1</log4j.version>\n+    <disruptor.version>3.3.0</disruptor.version>\n \n     <commons-io.version>2.4</commons-io.version>\n     <commons-codec.version>1.10</commons-codec.version>\n@@ -355,8 +358,31 @@ under the License.\n     <log.directory>${project.build.directory}/log</log.directory>\n     <activiti-modeler.directory>${project.build.directory}/activiti-modeler</activiti-modeler.directory>\n     \n-    <testconnectorserver.key>testconnectorserver</testconnectorserver.key>\n+    <jquery.version>1.11.1</jquery.version>\n+    <jquery-ui.version>1.10.4</jquery-ui.version>\n+    <highlightjs.version>8.0</highlightjs.version>\n+    <codemirror.version>3.23</codemirror.version>\n+    \n+    <testds.port>1389</testds.port>\n+    <testdb.webport>9082</testdb.webport>\n+\n+    <testdb.driver>org.h2.Driver</testdb.driver>\n+    <testdb.url>jdbc:h2:tcp://localhost:9092/mem:testdb;DB_CLOSE_DELAY=-1</testdb.url>\n+    <testdb.username>sa</testdb.username>\n+    <testdb.password>sa</testdb.password>\n+\n     <testconnectorserver.port>4554</testconnectorserver.port>\n+    <testconnectorserver.key>testconnectorserver</testconnectorserver.key>\n+\n+    <test.csvdir.path>${project.build.directory}/test-csvdir</test.csvdir.path>\n+\n+    <cargo.servlet.port>9080</cargo.servlet.port>\n+    <cargo.tomcat.ajp.port>9889</cargo.tomcat.ajp.port>\n+    <cargo.rmi.port>9805</cargo.rmi.port>\n+    <cargo.log>${log.directory}/cargo.log</cargo.log>\n+    <cargo.output>${log.directory}/cargo-output.log</cargo.output>\n+\n+    <tomcat.version>8.0.15</tomcat.version>\n \n     <anonymousUser>anonymous</anonymousUser>\n     <!-- static keys, only used for build: generated overlays will override during archetype:generate -->\n@@ -397,7 +423,24 @@ under the License.\n         <artifactId>geronimo-javamail_1.4_mail</artifactId>\n         <version>1.8.4</version>\n       </dependency>\n-\n+      <dependency> \n+        <groupId>javax.servlet</groupId> \n+        <artifactId>javax.servlet-api</artifactId> \n+        <version>3.1.0</version>\n+        <scope>provided</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>javax.servlet.jsp</groupId>\n+        <artifactId>javax.servlet.jsp-api</artifactId>\n+        <version>2.3.1</version>\n+        <scope>provided</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>javax.servlet</groupId>\n+        <artifactId>jstl</artifactId>\n+        <version>1.2</version>\n+      </dependency>\n+      \n       <!-- CXF -->\n       <dependency>\n         <groupId>org.apache.cxf</groupId>\n@@ -505,12 +548,47 @@ under the License.\n         <artifactId>spring-orm</artifactId>\n         <version>${spring.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.springframework</groupId>\n+        <artifactId>spring-web</artifactId>\n+        <version>${spring.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.springframework</groupId>\n+        <artifactId>spring-aop</artifactId>\n+        <version>${spring.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.springframework</groupId>\n+        <artifactId>spring-expression</artifactId>\n+        <version>${spring.version}</version>\n+      </dependency>\n       <dependency>\n         <groupId>org.springframework.security</groupId>\n         <artifactId>spring-security-core</artifactId>\n         <version>${spring-security.version}</version>\n+        <exclusions>\n+          <exclusion>\n+            <groupId>org.springframework</groupId>\n+            <artifactId>spring-aop</artifactId>\n+          </exclusion>\n+          <exclusion>\n+            <groupId>org.springframework</groupId>\n+            <artifactId>spring-expression</artifactId>\n+          </exclusion>\n+        </exclusions>\n       </dependency>\n-\n+      <dependency>\n+        <groupId>org.springframework.security</groupId>\n+        <artifactId>spring-security-web</artifactId>\n+        <version>${spring-security.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.springframework.security</groupId>\n+        <artifactId>spring-security-config</artifactId>\n+        <version>${spring-security.version}</version>\n+      </dependency>\n+    \n       <dependency>\n         <groupId>org.aspectj</groupId>\n         <artifactId>aspectjweaver</artifactId>\n@@ -554,11 +632,23 @@ under the License.\n         <version>${connid.version}</version>\n       </dependency>\n       \n+      <dependency>\n+        <groupId>org.codehaus.groovy</groupId>\n+        <artifactId>groovy-all</artifactId>\n+        <version>${groovy.version}</version>\n+      </dependency>\n+\n       <dependency>\n         <groupId>com.h2database</groupId>\n         <artifactId>h2</artifactId>\n         <version>${h2.version}</version>\n       </dependency>\n+\n+      <dependency>\n+        <groupId>org.apache.directory.server</groupId>\n+        <artifactId>apacheds-all</artifactId>\n+        <version>2.0.0-M19</version>\n+      </dependency>\n       \n       <dependency>\n         <groupId>org.jasypt</groupId>\n@@ -658,7 +748,7 @@ under the License.\n         <artifactId>xercesImpl</artifactId>\n         <version>2.11.0</version>\n       </dependency>\n-\n+      \n       <dependency>\n         <groupId>org.slf4j</groupId>\n         <artifactId>slf4j-api</artifactId>\n@@ -674,6 +764,48 @@ under the License.\n         <artifactId>log4j-core</artifactId>\n         <version>${log4j.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.lmax</groupId>\n+        <artifactId>disruptor</artifactId>\n+        <version>${disruptor.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.apache.logging.log4j</groupId>\n+        <artifactId>log4j-slf4j-impl</artifactId>\n+        <version>${log4j.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>commons-logging</groupId>\n+        <artifactId>commons-logging</artifactId>\n+        <version>${commons.logging.version}</version>\n+        <scope>provided</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.slf4j</groupId>\n+        <artifactId>jcl-over-slf4j</artifactId>\n+        <version>${slf4j.version}</version>\n+      </dependency>\n+      \n+      <dependency>\n+        <groupId>org.webjars</groupId>\n+        <artifactId>jquery</artifactId>\n+        <version>${jquery.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.webjars</groupId>\n+        <artifactId>jquery-ui</artifactId>\n+        <version>${jquery-ui.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.webjars</groupId>\n+        <artifactId>highlightjs</artifactId>\n+        <version>${highlightjs.version}-3</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.webjars</groupId>\n+        <artifactId>codemirror</artifactId>\n+        <version>${codemirror.version}</version>\n+      </dependency>\n       \n       <!-- TEST -->\n       <dependency>\n@@ -709,16 +841,6 @@ under the License.\n         <enabled>true</enabled>\n       </snapshots>\n     </repository>\n-    \n-    <!-- TMP for Spring Security 4.0.0-RC1 -->\n-    <repository>\n-      <id>spring-milestones</id>\n-      <name>Spring Milestones</name>\n-      <url>http://repo.spring.io/milestone</url>\n-      <snapshots>\n-        <enabled>false</enabled>\n-      </snapshots>\n-    </repository>\n   </repositories>\n \n   <pluginRepositories>\n@@ -800,6 +922,31 @@ under the License.\n           </configuration>\n         </plugin>\n         \n+        <plugin>\n+          <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-war-plugin</artifactId>\n+          <version>2.6</version>\n+        </plugin>\n+        \n+        <plugin>\n+          <groupId>org.codehaus.cargo</groupId>\n+          <artifactId>cargo-maven2-plugin</artifactId>\n+          <version>1.4.11</version>\n+          <configuration>\n+            <container>\n+              <containerId>tomcat8x</containerId>\n+              <zipUrlInstaller>\n+                <url>http://archive.apache.org/dist/tomcat/tomcat-8/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip</url>\n+                <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n+                <extractDir>${project.build.directory}/cargo/extract</extractDir>\n+              </zipUrlInstaller>\n+              <timeout>240000</timeout>\n+              <log>${cargo.log}</log>\n+              <output>${cargo.output}</output>    \n+            </container>\n+          </configuration>\n+        </plugin>\n+        \n         <plugin>\n           <groupId>org.apache.maven.plugins</groupId>\n           <artifactId>maven-surefire-plugin</artifactId>\n@@ -843,5 +990,6 @@ under the License.\n     <module>common</module>\n     <module>server</module>\n     <module>client</module>\n+    <module>fit</module>\n   </modules>\n </project>"},{"sha":"ad1a7918638b9abdfe81c9f1bb49dcd7bc58043c","filename":"syncope620/server/logic/pom.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -99,7 +99,7 @@ under the License.\n       \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-provisioning-java</artifactId>\n+      <artifactId>syncope-server-provisioning-java</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n     \n@@ -111,7 +111,7 @@ under the License.\n     </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-workflow-java</artifactId>\n+      <artifactId>syncope-server-workflow-java</artifactId>\n       <version>${project.version}</version>\n       <scope>test</scope>\n     </dependency>\n@@ -122,7 +122,7 @@ under the License.\n     </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-persistence-jpa</artifactId>\n+      <artifactId>syncope-server-persistence-jpa</artifactId>\n       <version>${project.version}</version>\n       <scope>test</scope>\n     </dependency>"},{"sha":"bb369ab9f5ed892457271d8aca3f4f77cd88bcb7","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/ReportLogic.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FReportLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FReportLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FReportLogic.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -235,10 +235,10 @@ public void exportExecutionResult(final OutputStream os, final ReportExec report\n             // a single ZipEntry in the ZipInputStream (see ReportJob)\n             zis.getNextEntry();\n \n-            Pipeline<SAXPipelineComponent> pipeline = new NonCachingPipeline<SAXPipelineComponent>();\n+            Pipeline<SAXPipelineComponent> pipeline = new NonCachingPipeline<>();\n             pipeline.addComponent(new XMLGenerator(zis));\n \n-            Map<String, Object> parameters = new HashMap<String, Object>();\n+            Map<String, Object> parameters = new HashMap<>();\n             parameters.put(\"status\", reportExec.getStatus());\n             parameters.put(\"message\", reportExec.getMessage());\n             parameters.put(\"startDate\", reportExec.getStartDate());"},{"sha":"f7f608fd79f14700b88adc4bf32c08b36619c62e","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/ImplementationClassNamesLoader.java","status":"modified","additions":9,"deletions":2,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FImplementationClassNamesLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FImplementationClassNamesLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FImplementationClassNamesLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -33,6 +33,7 @@\n import org.apache.syncope.server.provisioning.api.sync.SyncActions;\n import org.apache.syncope.server.provisioning.api.sync.SyncCorrelationRule;\n import org.apache.syncope.server.logic.report.Reportlet;\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n@@ -47,7 +48,7 @@\n  * Cache class names for all implementations of Syncope interfaces found in classpath, for later usage.\n  */\n @Component\n-public class ImplementationClassNamesLoader {\n+public class ImplementationClassNamesLoader implements SyncopeLoader {\n \n     public enum Type {\n \n@@ -72,10 +73,16 @@ public enum Type {\n \n     private Map<Type, Set<String>> classNames;\n \n+    @Override\n+    public Integer getPriority() {\n+        return 400;\n+    }\n+\n+    @Override\n     public void load() {\n         CachingMetadataReaderFactory factory = new CachingMetadataReaderFactory();\n \n-        classNames = new EnumMap<Type, Set<String>>(Type.class);\n+        classNames = new EnumMap<>(Type.class);\n         for (Type type : Type.values()) {\n             classNames.put(type, new HashSet<String>());\n         }"},{"sha":"3f6f753020c96d976fb4946007bda613eba21c37","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/JobInstanceLoader.java","status":"modified","additions":8,"deletions":216,"changes":224,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -19,231 +19,23 @@\n package org.apache.syncope.server.logic.init;\n \n import java.text.ParseException;\n-import java.util.ArrayList;\n-import java.util.HashSet;\n-import java.util.List;\n-import java.util.Set;\n-import org.apache.commons.lang3.StringUtils;\n-import org.apache.syncope.common.lib.types.TaskType;\n-import org.apache.syncope.server.persistence.api.dao.ConfDAO;\n-import org.apache.syncope.server.persistence.api.dao.NotFoundException;\n-import org.apache.syncope.server.persistence.api.dao.ReportDAO;\n-import org.apache.syncope.server.persistence.api.dao.TaskDAO;\n import org.apache.syncope.server.persistence.api.entity.Report;\n-import org.apache.syncope.server.persistence.api.entity.conf.CPlainAttr;\n-import org.apache.syncope.server.persistence.api.entity.task.PushTask;\n-import org.apache.syncope.server.persistence.api.entity.task.SchedTask;\n-import org.apache.syncope.server.persistence.api.entity.task.SyncTask;\n import org.apache.syncope.server.persistence.api.entity.task.Task;\n-import org.apache.syncope.server.provisioning.api.job.JobNamer;\n-import org.apache.syncope.server.provisioning.api.job.SyncJob;\n-import org.apache.syncope.server.provisioning.api.job.TaskJob;\n-import org.apache.syncope.server.provisioning.api.sync.SyncActions;\n-import org.apache.syncope.server.logic.notification.NotificationJob;\n-import org.apache.syncope.server.logic.report.ReportJob;\n-import org.apache.syncope.server.misc.spring.ApplicationContextProvider;\n-import org.quartz.Job;\n-import org.quartz.JobExecutionContext;\n-import org.quartz.JobKey;\n-import org.quartz.Scheduler;\n import org.quartz.SchedulerException;\n-import org.quartz.TriggerKey;\n-import org.quartz.impl.JobDetailImpl;\n-import org.quartz.impl.triggers.CronTriggerImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.beans.factory.support.AbstractBeanDefinition;\n-import org.springframework.scheduling.quartz.SchedulerFactoryBean;\n-import org.springframework.stereotype.Component;\n-import org.springframework.transaction.annotation.Transactional;\n \n-@Component\n-public class JobInstanceLoader {\n+public interface JobInstanceLoader {\n \n-    private static final Logger LOG = LoggerFactory.getLogger(JobInstanceLoader.class);\n+    void registerJob(Task task, String jobClassName, String cronExpression)\n+            throws ClassNotFoundException, SchedulerException, ParseException;\n \n-    @Autowired\n-    private SchedulerFactoryBean scheduler;\n+    void registerJob(Report report) throws SchedulerException, ParseException;\n \n-    @Autowired\n-    private TaskDAO taskDAO;\n+    void registerReportJob(Long reportKey) throws SchedulerException, ParseException;\n \n-    @Autowired\n-    private ReportDAO reportDAO;\n+    void registerTaskJob(Long taskKey) throws ClassNotFoundException, SchedulerException, ParseException;\n \n-    @Autowired\n-    private ConfDAO confDAO;\n+    void unregisterJob(Task task);\n \n-    private void registerJob(final String jobName, final Job jobInstance, final String cronExpression)\n-            throws SchedulerException, ParseException {\n+    void unregisterJob(Report report);\n \n-        synchronized (scheduler.getScheduler()) {\n-            boolean jobAlreadyRunning = false;\n-            for (JobExecutionContext jobCtx : scheduler.getScheduler().getCurrentlyExecutingJobs()) {\n-                if (jobName.equals(jobCtx.getJobDetail().getKey().getName())\n-                        && Scheduler.DEFAULT_GROUP.equals(jobCtx.getJobDetail().getKey().getGroup())) {\n-\n-                    jobAlreadyRunning = true;\n-\n-                    LOG.debug(\"Job {} already running, cancel\", jobCtx.getJobDetail().getKey());\n-                }\n-            }\n-\n-            if (jobAlreadyRunning) {\n-                return;\n-            }\n-        }\n-\n-        // 0. unregister job\n-        unregisterJob(jobName);\n-\n-        // 1. Job bean\n-        ApplicationContextProvider.getBeanFactory().registerSingleton(jobName, jobInstance);\n-\n-        // 2. JobDetail bean\n-        JobDetailImpl jobDetail = new JobDetailImpl();\n-        jobDetail.setName(jobName);\n-        jobDetail.setGroup(Scheduler.DEFAULT_GROUP);\n-        jobDetail.setJobClass(jobInstance.getClass());\n-\n-        // 3. Trigger\n-        if (cronExpression == null) {\n-            // Jobs added with no trigger must be durable\n-            jobDetail.setDurability(true);\n-            scheduler.getScheduler().addJob(jobDetail, true);\n-        } else {\n-            CronTriggerImpl cronTrigger = new CronTriggerImpl();\n-            cronTrigger.setName(JobNamer.getTriggerName(jobName));\n-            cronTrigger.setCronExpression(cronExpression);\n-\n-            scheduler.getScheduler().scheduleJob(jobDetail, cronTrigger);\n-        }\n-    }\n-\n-    @SuppressWarnings(\"unchecked\")\n-    public void registerJob(final Task task, final String jobClassName, final String cronExpression)\n-            throws ClassNotFoundException, SchedulerException, ParseException {\n-\n-        final Class<?> jobClass = Class.forName(jobClassName);\n-        Job jobInstance = (Job) ApplicationContextProvider.getBeanFactory().\n-                createBean(jobClass, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, false);\n-        if (jobInstance instanceof TaskJob) {\n-            ((TaskJob) jobInstance).setTaskId(task.getKey());\n-        }\n-\n-        // In case of synchronization job/task retrieve and set synchronization actions:\n-        // actions cannot be changed at runtime but connector and synchronization policies (reloaded at execution time).\n-        if (jobInstance instanceof SyncJob && task instanceof SyncTask) {\n-            final List<SyncActions> actions = new ArrayList<>();\n-            for (String className : ((SyncTask) task).getActionsClassNames()) {\n-                try {\n-                    Class<?> actionsClass = Class.forName(className);\n-\n-                    final SyncActions syncActions =\n-                            (SyncActions) ApplicationContextProvider.getBeanFactory().\n-                            createBean(actionsClass, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, true);\n-\n-                    actions.add(syncActions);\n-                } catch (Exception e) {\n-                    LOG.info(\"Class '{}' not found\", className, e);\n-                }\n-            }\n-\n-            ((SyncJob) jobInstance).setActions(actions);\n-        }\n-\n-        registerJob(JobNamer.getJobName(task), jobInstance, cronExpression);\n-    }\n-\n-    @Transactional(readOnly = true)\n-    public void registerTaskJob(final Long taskId)\n-            throws ClassNotFoundException, SchedulerException, ParseException {\n-\n-        SchedTask task = taskDAO.find(taskId);\n-        if (task == null) {\n-            throw new NotFoundException(\"Task \" + taskId);\n-        } else {\n-            registerJob(task, task.getJobClassName(), task.getCronExpression());\n-        }\n-    }\n-\n-    public void registerJob(final Report report) throws SchedulerException, ParseException {\n-        Job jobInstance = (Job) ApplicationContextProvider.getBeanFactory().\n-                createBean(ReportJob.class, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, false);\n-        ((ReportJob) jobInstance).setReportKey(report.getKey());\n-\n-        registerJob(JobNamer.getJobName(report), jobInstance, report.getCronExpression());\n-    }\n-\n-    @Transactional(readOnly = true)\n-    public void registerReportJob(final Long reportId) throws SchedulerException, ParseException {\n-        Report report = reportDAO.find(reportId);\n-        if (report == null) {\n-            throw new NotFoundException(\"Report \" + reportId);\n-        } else {\n-            registerJob(report);\n-        }\n-    }\n-\n-    private void unregisterJob(final String jobName) {\n-        try {\n-            scheduler.getScheduler().unscheduleJob(new TriggerKey(jobName, Scheduler.DEFAULT_GROUP));\n-            scheduler.getScheduler().deleteJob(new JobKey(jobName, Scheduler.DEFAULT_GROUP));\n-        } catch (SchedulerException e) {\n-            LOG.error(\"Could not remove job \" + jobName, e);\n-        }\n-\n-        if (ApplicationContextProvider.getBeanFactory().containsSingleton(jobName)) {\n-            ApplicationContextProvider.getBeanFactory().destroySingleton(jobName);\n-        }\n-    }\n-\n-    public void unregisterJob(final Task task) {\n-        unregisterJob(JobNamer.getJobName(task));\n-    }\n-\n-    public void unregisterJob(final Report report) {\n-        unregisterJob(JobNamer.getJobName(report));\n-    }\n-\n-    @Transactional\n-    public void load() {\n-        // 1. jobs for SchedTasks\n-        Set<SchedTask> tasks = new HashSet<>(taskDAO.<SchedTask>findAll(TaskType.SCHEDULED));\n-        tasks.addAll(taskDAO.<SyncTask>findAll(TaskType.SYNCHRONIZATION));\n-        tasks.addAll(taskDAO.<PushTask>findAll(TaskType.PUSH));\n-        for (SchedTask task : tasks) {\n-            try {\n-                registerJob(task, task.getJobClassName(), task.getCronExpression());\n-            } catch (Exception e) {\n-                LOG.error(\"While loading job instance for task \" + task.getKey(), e);\n-            }\n-        }\n-\n-        // 2. NotificationJob\n-        CPlainAttr notificationJobCronExp =\n-                confDAO.find(\"notificationjob.cronExpression\", NotificationJob.DEFAULT_CRON_EXP);\n-        if (StringUtils.isBlank(notificationJobCronExp.getValuesAsStrings().get(0))) {\n-            LOG.debug(\"Empty value provided for NotificationJob's cron, not registering anything on Quartz\");\n-        } else {\n-            LOG.debug(\"NotificationJob's cron expression: {} - registering Quartz job and trigger\",\n-                    notificationJobCronExp);\n-\n-            try {\n-                registerJob(null, NotificationJob.class.getName(), notificationJobCronExp.getValuesAsStrings().get(0));\n-            } catch (Exception e) {\n-                LOG.error(\"While loading NotificationJob instance\", e);\n-            }\n-        }\n-\n-        // 3. ReportJobs\n-        for (Report report : reportDAO.findAll()) {\n-            try {\n-                registerJob(report);\n-            } catch (Exception e) {\n-                LOG.error(\"While loading job instance for report \" + report.getName(), e);\n-            }\n-        }\n-    }\n }"},{"sha":"48e7db4de605bdbc461aa535138fe9ca566c67ae","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/JobInstanceLoaderImpl.java","status":"added","additions":270,"deletions":0,"changes":270,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoaderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoaderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FJobInstanceLoaderImpl.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,270 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.logic.init;\n+\n+import java.text.ParseException;\n+import java.util.ArrayList;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.lib.types.TaskType;\n+import org.apache.syncope.server.persistence.api.dao.ConfDAO;\n+import org.apache.syncope.server.persistence.api.dao.NotFoundException;\n+import org.apache.syncope.server.persistence.api.dao.ReportDAO;\n+import org.apache.syncope.server.persistence.api.dao.TaskDAO;\n+import org.apache.syncope.server.persistence.api.entity.Report;\n+import org.apache.syncope.server.persistence.api.entity.conf.CPlainAttr;\n+import org.apache.syncope.server.persistence.api.entity.task.PushTask;\n+import org.apache.syncope.server.persistence.api.entity.task.SchedTask;\n+import org.apache.syncope.server.persistence.api.entity.task.SyncTask;\n+import org.apache.syncope.server.persistence.api.entity.task.Task;\n+import org.apache.syncope.server.provisioning.api.job.JobNamer;\n+import org.apache.syncope.server.provisioning.api.job.SyncJob;\n+import org.apache.syncope.server.provisioning.api.job.TaskJob;\n+import org.apache.syncope.server.provisioning.api.sync.SyncActions;\n+import org.apache.syncope.server.logic.notification.NotificationJob;\n+import org.apache.syncope.server.logic.report.ReportJob;\n+import org.apache.syncope.server.misc.spring.ApplicationContextProvider;\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n+import org.apache.syncope.server.provisioning.api.job.PushJob;\n+import org.apache.syncope.server.provisioning.java.sync.PushJobImpl;\n+import org.apache.syncope.server.provisioning.java.sync.SyncJobImpl;\n+import org.quartz.Job;\n+import org.quartz.JobExecutionContext;\n+import org.quartz.JobKey;\n+import org.quartz.Scheduler;\n+import org.quartz.SchedulerException;\n+import org.quartz.TriggerKey;\n+import org.quartz.impl.JobDetailImpl;\n+import org.quartz.impl.triggers.CronTriggerImpl;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.support.AbstractBeanDefinition;\n+import org.springframework.scheduling.quartz.SchedulerFactoryBean;\n+import org.springframework.stereotype.Component;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Component\n+public class JobInstanceLoaderImpl implements JobInstanceLoader, SyncopeLoader {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(JobInstanceLoader.class);\n+\n+    @Autowired\n+    private SchedulerFactoryBean scheduler;\n+\n+    @Autowired\n+    private TaskDAO taskDAO;\n+\n+    @Autowired\n+    private ReportDAO reportDAO;\n+\n+    @Autowired\n+    private ConfDAO confDAO;\n+\n+    private void registerJob(final String jobName, final Job jobInstance, final String cronExpression)\n+            throws SchedulerException, ParseException {\n+\n+        synchronized (scheduler.getScheduler()) {\n+            boolean jobAlreadyRunning = false;\n+            for (JobExecutionContext jobCtx : scheduler.getScheduler().getCurrentlyExecutingJobs()) {\n+                if (jobName.equals(jobCtx.getJobDetail().getKey().getName())\n+                        && Scheduler.DEFAULT_GROUP.equals(jobCtx.getJobDetail().getKey().getGroup())) {\n+\n+                    jobAlreadyRunning = true;\n+\n+                    LOG.debug(\"Job {} already running, cancel\", jobCtx.getJobDetail().getKey());\n+                }\n+            }\n+\n+            if (jobAlreadyRunning) {\n+                return;\n+            }\n+        }\n+\n+        // 0. unregister job\n+        unregisterJob(jobName);\n+\n+        // 1. Job bean\n+        ApplicationContextProvider.getBeanFactory().registerSingleton(jobName, jobInstance);\n+\n+        // 2. JobDetail bean\n+        JobDetailImpl jobDetail = new JobDetailImpl();\n+        jobDetail.setName(jobName);\n+        jobDetail.setGroup(Scheduler.DEFAULT_GROUP);\n+        jobDetail.setJobClass(jobInstance.getClass());\n+\n+        // 3. Trigger\n+        if (cronExpression == null) {\n+            // Jobs added with no trigger must be durable\n+            jobDetail.setDurability(true);\n+            scheduler.getScheduler().addJob(jobDetail, true);\n+        } else {\n+            CronTriggerImpl cronTrigger = new CronTriggerImpl();\n+            cronTrigger.setName(JobNamer.getTriggerName(jobName));\n+            cronTrigger.setCronExpression(cronExpression);\n+\n+            scheduler.getScheduler().scheduleJob(jobDetail, cronTrigger);\n+        }\n+    }\n+\n+    @SuppressWarnings(\"unchecked\")\n+    @Override\n+    public void registerJob(final Task task, final String jobClassName, final String cronExpression)\n+            throws ClassNotFoundException, SchedulerException, ParseException {\n+\n+        Class<?> jobClass = Class.forName(jobClassName);\n+        if (SyncJob.class.equals(jobClass)) {\n+            jobClass = SyncJobImpl.class;\n+        } else if (PushJob.class.equals(jobClass)) {\n+            jobClass = PushJobImpl.class;\n+        }\n+        Job jobInstance = (Job) ApplicationContextProvider.getBeanFactory().\n+                createBean(jobClass, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, false);\n+        if (jobInstance instanceof TaskJob) {\n+            ((TaskJob) jobInstance).setTaskId(task.getKey());\n+        }\n+\n+        // In case of synchronization job/task retrieve and set synchronization actions:\n+        // actions cannot be changed at runtime but connector and synchronization policies (reloaded at execution time).\n+        if (jobInstance instanceof SyncJob && task instanceof SyncTask) {\n+            final List<SyncActions> actions = new ArrayList<>();\n+            for (String className : ((SyncTask) task).getActionsClassNames()) {\n+                try {\n+                    Class<?> actionsClass = Class.forName(className);\n+\n+                    final SyncActions syncActions =\n+                            (SyncActions) ApplicationContextProvider.getBeanFactory().\n+                            createBean(actionsClass, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, true);\n+\n+                    actions.add(syncActions);\n+                } catch (Exception e) {\n+                    LOG.info(\"Class '{}' not found\", className, e);\n+                }\n+            }\n+\n+            ((SyncJob) jobInstance).setActions(actions);\n+        }\n+\n+        registerJob(JobNamer.getJobName(task), jobInstance, cronExpression);\n+    }\n+\n+    @Transactional(readOnly = true)\n+    @Override\n+    public void registerTaskJob(final Long taskKey)\n+            throws ClassNotFoundException, SchedulerException, ParseException {\n+\n+        SchedTask task = taskDAO.find(taskKey);\n+        if (task == null) {\n+            throw new NotFoundException(\"Task \" + taskKey);\n+        } else {\n+            registerJob(task, task.getJobClassName(), task.getCronExpression());\n+        }\n+    }\n+\n+    @Override\n+    public void registerJob(final Report report) throws SchedulerException, ParseException {\n+        Job jobInstance = (Job) ApplicationContextProvider.getBeanFactory().\n+                createBean(ReportJob.class, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, false);\n+        ((ReportJob) jobInstance).setReportKey(report.getKey());\n+\n+        registerJob(JobNamer.getJobName(report), jobInstance, report.getCronExpression());\n+    }\n+\n+    @Transactional(readOnly = true)\n+    @Override\n+    public void registerReportJob(final Long reportKey) throws SchedulerException, ParseException {\n+        Report report = reportDAO.find(reportKey);\n+        if (report == null) {\n+            throw new NotFoundException(\"Report \" + reportKey);\n+        } else {\n+            registerJob(report);\n+        }\n+    }\n+\n+    private void unregisterJob(final String jobName) {\n+        try {\n+            scheduler.getScheduler().unscheduleJob(new TriggerKey(jobName, Scheduler.DEFAULT_GROUP));\n+            scheduler.getScheduler().deleteJob(new JobKey(jobName, Scheduler.DEFAULT_GROUP));\n+        } catch (SchedulerException e) {\n+            LOG.error(\"Could not remove job \" + jobName, e);\n+        }\n+\n+        if (ApplicationContextProvider.getBeanFactory().containsSingleton(jobName)) {\n+            ApplicationContextProvider.getBeanFactory().destroySingleton(jobName);\n+        }\n+    }\n+\n+    @Override\n+    public void unregisterJob(final Task task) {\n+        unregisterJob(JobNamer.getJobName(task));\n+    }\n+\n+    @Override\n+    public void unregisterJob(final Report report) {\n+        unregisterJob(JobNamer.getJobName(report));\n+    }\n+\n+    @Override\n+    public Integer getPriority() {\n+        return 200;\n+    }\n+\n+    @Transactional\n+    @Override\n+    public void load() {\n+        // 1. jobs for SchedTasks\n+        Set<SchedTask> tasks = new HashSet<>(taskDAO.<SchedTask>findAll(TaskType.SCHEDULED));\n+        tasks.addAll(taskDAO.<SyncTask>findAll(TaskType.SYNCHRONIZATION));\n+        tasks.addAll(taskDAO.<PushTask>findAll(TaskType.PUSH));\n+        for (SchedTask task : tasks) {\n+            try {\n+                registerJob(task, task.getJobClassName(), task.getCronExpression());\n+            } catch (Exception e) {\n+                LOG.error(\"While loading job instance for task \" + task.getKey(), e);\n+            }\n+        }\n+\n+        // 2. NotificationJob\n+        CPlainAttr notificationJobCronExp =\n+                confDAO.find(\"notificationjob.cronExpression\", NotificationJob.DEFAULT_CRON_EXP);\n+        if (StringUtils.isBlank(notificationJobCronExp.getValuesAsStrings().get(0))) {\n+            LOG.debug(\"Empty value provided for NotificationJob's cron, not registering anything on Quartz\");\n+        } else {\n+            LOG.debug(\"NotificationJob's cron expression: {} - registering Quartz job and trigger\",\n+                    notificationJobCronExp);\n+\n+            try {\n+                registerJob(null, NotificationJob.class.getName(), notificationJobCronExp.getValuesAsStrings().get(0));\n+            } catch (Exception e) {\n+                LOG.error(\"While loading NotificationJob instance\", e);\n+            }\n+        }\n+\n+        // 3. ReportJobs\n+        for (Report report : reportDAO.findAll()) {\n+            try {\n+                registerJob(report);\n+            } catch (Exception e) {\n+                LOG.error(\"While loading job instance for report \" + report.getName(), e);\n+            }\n+        }\n+    }\n+}"},{"sha":"d25a3d6301a652fc75164bacc7fa22ede9960688","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/LoggerLoader.java","status":"added","additions":98,"deletions":0,"changes":98,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLoggerLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLoggerLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLoggerLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,98 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.logic.init;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.core.LoggerContext;\n+import org.apache.logging.log4j.core.config.LoggerConfig;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n+import org.apache.syncope.common.lib.types.LoggerLevel;\n+import org.apache.syncope.common.lib.types.LoggerType;\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n+import org.apache.syncope.server.persistence.api.dao.LoggerDAO;\n+import org.apache.syncope.server.persistence.api.entity.EntityFactory;\n+import org.apache.syncope.server.persistence.api.entity.Logger;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Component\n+public class LoggerLoader implements SyncopeLoader {\n+\n+    @Autowired\n+    private LoggerDAO loggerDAO;\n+\n+    @Autowired\n+    private EntityFactory entityFactory;\n+\n+    @Override\n+    public Integer getPriority() {\n+        return 300;\n+    }\n+\n+    @Transactional\n+    @Override\n+    public void load() {\n+        Map<String, Logger> syncopeLoggers = new HashMap<>();\n+        for (Logger syncopeLogger : loggerDAO.findAll(LoggerType.LOG)) {\n+            syncopeLoggers.put(syncopeLogger.getKey(), syncopeLogger);\n+        }\n+\n+        for (Logger syncopeLogger : loggerDAO.findAll(LoggerType.AUDIT)) {\n+            syncopeLoggers.put(syncopeLogger.getKey(), syncopeLogger);\n+        }\n+\n+        LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n+\n+        /*\n+         * Traverse all defined log4j loggers: if there is a matching SyncopeLogger, set log4j level accordingly,\n+         * otherwise create a SyncopeLogger instance with given name and level.\n+         */\n+        for (LoggerConfig logConf : ctx.getConfiguration().getLoggers().values()) {\n+            final String loggerName = LogManager.ROOT_LOGGER_NAME.equals(logConf.getName())\n+                    ? SyncopeConstants.ROOT_LOGGER : logConf.getName();\n+            if (logConf.getLevel() != null) {\n+                if (syncopeLoggers.containsKey(loggerName)) {\n+                    logConf.setLevel(syncopeLoggers.get(loggerName).getLevel().getLevel());\n+                    syncopeLoggers.remove(loggerName);\n+                } else if (!loggerName.equals(LoggerType.AUDIT.getPrefix())) {\n+                    Logger syncopeLogger = entityFactory.newEntity(Logger.class);\n+                    syncopeLogger.setKey(loggerName);\n+                    syncopeLogger.setLevel(LoggerLevel.fromLevel(logConf.getLevel()));\n+                    syncopeLogger.setType(loggerName.startsWith(LoggerType.AUDIT.getPrefix())\n+                            ? LoggerType.AUDIT\n+                            : LoggerType.LOG);\n+                    loggerDAO.save(syncopeLogger);\n+                }\n+            }\n+        }\n+\n+        /*\n+         * Foreach SyncopeLogger not found in log4j create a new log4j logger with given name and level.\n+         */\n+        for (Logger syncopeLogger : syncopeLoggers.values()) {\n+            LoggerConfig logConf = ctx.getConfiguration().getLoggerConfig(syncopeLogger.getKey());\n+            logConf.setLevel(syncopeLogger.getLevel().getLevel());\n+        }\n+\n+        ctx.updateLoggers();\n+    }\n+}"},{"sha":"7a171210a122e77a30dd5b28f56b43c709001a24","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/LogicInitializer.java","status":"added","additions":73,"deletions":0,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLogicInitializer.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLogicInitializer.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FLogicInitializer.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,73 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.logic.init;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n+import org.springframework.beans.BeansException;\n+import org.springframework.beans.factory.BeanFactory;\n+import org.springframework.beans.factory.BeanFactoryAware;\n+import org.springframework.beans.factory.InitializingBean;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.support.DefaultListableBeanFactory;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * Take care of all initializations needed by Syncope logic to run up and safe.\n+ */\n+@Component\n+public class LogicInitializer implements InitializingBean, BeanFactoryAware {\n+\n+    @Autowired\n+    private WorkflowAdapterLoader workflowAdapterLoader;\n+\n+    private DefaultListableBeanFactory beanFactory;\n+\n+    @Override\n+    public void setBeanFactory(final BeanFactory beanFactory) throws BeansException {\n+        this.beanFactory = (DefaultListableBeanFactory) beanFactory;\n+    }\n+\n+    @Override\n+    public void afterPropertiesSet() throws Exception {\n+        Map<String, SyncopeLoader> loaderMap = beanFactory.getBeansOfType(SyncopeLoader.class);\n+\n+        List<SyncopeLoader> loaders = new ArrayList<>(loaderMap.values());\n+        Collections.sort(loaders, new PriorityComparator());\n+\n+        for (SyncopeLoader loader : loaders) {\n+            loader.load();\n+        }\n+\n+        workflowAdapterLoader.init();\n+    }\n+\n+    private static class PriorityComparator implements Comparator<SyncopeLoader> {\n+\n+        @Override\n+        public int compare(final SyncopeLoader o1, final SyncopeLoader o2) {\n+            return o1.getPriority().compareTo(o2.getPriority());\n+        }\n+\n+    }\n+}"},{"sha":"b89e1652700fc0e236264b3b97fb3accd1c23d74","filename":"syncope620/server/logic/src/main/java/org/apache/syncope/server/logic/init/WorkflowAdapterLoader.java","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FWorkflowAdapterLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FWorkflowAdapterLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FWorkflowAdapterLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.server.logic.init;\n \n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n import org.apache.syncope.server.workflow.api.RoleWorkflowAdapter;\n import org.apache.syncope.server.workflow.api.UserWorkflowAdapter;\n import org.apache.syncope.server.workflow.api.WorkflowInstanceLoader;\n@@ -32,7 +33,7 @@\n import org.springframework.stereotype.Component;\n \n @Component\n-public class WorkflowAdapterLoader implements BeanFactoryAware {\n+public class WorkflowAdapterLoader implements BeanFactoryAware, SyncopeLoader {\n \n     private static final Logger LOG = LoggerFactory.getLogger(WorkflowAdapterLoader.class);\n \n@@ -76,6 +77,12 @@ public void init() {\n         }\n     }\n \n+    @Override\n+    public Integer getPriority() {\n+        return Integer.MIN_VALUE;\n+    }\n+\n+    @Override\n     public void load() {\n         lazyInit();\n         if (wfLoader == null) {"},{"sha":"b1e2c716d5a3949f6dce1bcd8537a5d22958785e","filename":"syncope620/server/logic/src/main/resources/report/report2csv.xsl","status":"added","additions":36,"deletions":0,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,36 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:import href=\"userReportlet2csv.xsl\"/>\n+  <xsl:import href=\"roleReportlet2csv.xsl\"/>\n+  <xsl:import href=\"staticReportlet2csv.xsl\"/>\n+ \n+  <xsl:param name=\"status\"/>\n+  <xsl:param name=\"message\"/>\n+  <xsl:param name=\"startDate\"/>\n+  <xsl:param name=\"endDate\"/>\n+    \n+  <xsl:template match=\"/\">\n+    <xsl:apply-templates/>\n+  </xsl:template>\n+\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"7da9cabcf45ddc6ef7ca56b048fe594c71c40f8d","filename":"syncope620/server/logic/src/main/resources/report/report2fo.xsl","status":"added","additions":97,"deletions":0,"changes":97,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,97 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n+                version=\"1.0\">\n+\n+  <xsl:import href=\"userReportlet2fo.xsl\"/>\n+  <xsl:import href=\"roleReportlet2fo.xsl\"/>\n+  <xsl:import href=\"staticReportlet2fo.xsl\"/>\n+ \n+  <xsl:param name=\"status\"/>\n+  <xsl:param name=\"message\"/>\n+  <xsl:param name=\"startDate\"/>\n+  <xsl:param name=\"endDate\"/>\n+  \n+  <xsl:template match=\"/\">\n+    <fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\" font-family=\"Helvetica\" font-size=\"10pt\">\n+      \n+      <!-- defines the layout master -->\n+      <fo:layout-master-set>\n+        <fo:simple-page-master master-name=\"first\" page-height=\"29.7cm\" page-width=\"21cm\" \n+                               margin-top=\"1cm\" margin-bottom=\"2cm\" margin-left=\"2.5cm\" margin-right=\"2.5cm\">\n+          <fo:region-body margin-top=\"1cm\"/>\n+          <fo:region-before extent=\"1cm\"/>\n+          <fo:region-after extent=\"1.5cm\"/>\n+        </fo:simple-page-master>\n+      </fo:layout-master-set>\n+\n+      <!-- starts actual layout -->\n+      <fo:page-sequence master-reference=\"first\">\n+\t\n+        <fo:flow flow-name=\"xsl-region-body\">\n+          <fo:block font-size=\"24pt\" font-weight=\"bold\" text-align=\"center\" space-after=\"1cm\">\n+            Apache Syncope Report - <xsl:value-of select=\"report/@name\"/>\n+          </fo:block>\n+\n+          <fo:table table-layout=\"fixed\" border-width=\"0.5mm\" border-style=\"solid\" width=\"100%\" space-after=\"1cm\">\n+            <fo:table-column column-width=\"proportional-column-width(1)\"/>\n+            <fo:table-column column-width=\"proportional-column-width(1)\"/>\n+            <fo:table-body>\n+              <fo:table-row>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">Report Name:</fo:block>\n+                </fo:table-cell>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n+                    <xsl:value-of select=\"report/@name\"/>\n+                  </fo:block>\n+                </fo:table-cell>\n+              </fo:table-row>\n+              <fo:table-row>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">Start Date:</fo:block>\n+                </fo:table-cell>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n+                    <xsl:value-of select=\"$startDate\"/>\n+                  </fo:block>\n+                </fo:table-cell>\n+              </fo:table-row>\n+              <fo:table-row>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">End Date:</fo:block>\n+                </fo:table-cell>\n+                <fo:table-cell>\n+                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n+                    <xsl:value-of select=\"$endDate\"/>\n+                  </fo:block>\n+                </fo:table-cell>\n+              </fo:table-row>\n+            </fo:table-body>\n+          </fo:table>\n+\n+          <xsl:apply-templates/>\n+        </fo:flow>\n+      </fo:page-sequence>\n+    </fo:root>\n+  </xsl:template>\n+\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"c1d6b6732847146049c23a3ca148590936aaa348","filename":"syncope620/server/logic/src/main/resources/report/report2html.xsl","status":"added","additions":77,"deletions":0,"changes":77,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,77 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:import href=\"userReportlet2html.xsl\"/>\n+  <xsl:import href=\"roleReportlet2html.xsl\"/>\n+  <xsl:import href=\"staticReportlet2html.xsl\"/>\n+ \n+  <xsl:param name=\"status\"/>\n+  <xsl:param name=\"message\"/>\n+  <xsl:param name=\"startDate\"/>\n+  <xsl:param name=\"endDate\"/>\n+  \n+  <xsl:template match=\"/\">\n+    <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n+      <head>\n+        <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\n+        <title>Apache Syncope Report - <xsl:value-of select=\"report/@name\"/></title>\n+      </head>\n+      <body>\n+        <table style=\"border: 1px solid black;\">\n+          <tr>\n+            <td>\n+              <h1>Report Name:</h1>\n+            </td>\n+            <td>\n+              <h1>\n+                <xsl:value-of select=\"report/@name\"/>\n+              </h1>\n+            </td>\n+          </tr>\n+          <tr>\n+            <td>\n+              <h2>Start Date:</h2>\n+            </td>\n+            <td>\n+              <h2>\n+                <xsl:value-of select=\"$startDate\"/>\n+              </h2>\n+            </td>\n+          </tr>\n+          <tr>\n+            <td>\n+              <h2>End Date:</h2>\n+            </td>\n+            <td>\n+              <h2>\n+                <xsl:value-of select=\"$endDate\"/>\n+              </h2>\n+            </td>\n+          </tr>\n+        </table>\n+\n+        <xsl:apply-templates/>\n+      </body>\n+    </html>\n+  </xsl:template>\n+\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"ad092d58060bc587b3424e00346357564b729aa3","filename":"syncope620/server/logic/src/main/resources/report/roleReportlet2csv.xsl","status":"added","additions":118,"deletions":0,"changes":118,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2csv.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,118 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+  \n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n+  \n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.RoleReportlet']\">\n+    \n+    <xsl:call-template name=\"header\">\n+      <xsl:with-param name=\"node\" select=\"configurations/roleAttributes\"/>\n+    </xsl:call-template>\n+    <xsl:for-each select=\"role\">\n+      <xsl:call-template name=\"roleAttributes\">\n+        <xsl:with-param name=\"header\" select=\"../configurations/roleAttributes\"/>\n+        <xsl:with-param name=\"attrs\" select=\".\"/>\n+      </xsl:call-template>\n+      <xsl:text>&#10;</xsl:text>\n+    </xsl:for-each>\n+  </xsl:template>\n+  \n+  <xsl:template name=\"header\">\n+    <xsl:param name=\"node\"/>  \n+    <xsl:for-each select=\"$node/*\">\n+      <xsl:value-of select=\"text()\"/>   \n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>\n+    </xsl:for-each>\n+    <xsl:text>&#10;</xsl:text>\n+  </xsl:template>\n+    \n+  <xsl:template name=\"roleAttributes\">\n+    <xsl:param name=\"header\"/>\n+    <xsl:param name=\"attrs\"/>\n+    \n+    <xsl:for-each select=\"$header/*\">\n+      <xsl:variable name=\"nameAttr\" select=\"text()\"/>\n+      \n+      <xsl:choose> \n+        <xsl:when test=\"string-length($attrs/@*[name()=$nameAttr]) &gt; 0\">\n+          <xsl:variable name=\"roleAttr\" select=\"$attrs/@*[name()=$nameAttr]\"/>\n+          <xsl:text>\"</xsl:text>\n+          <xsl:value-of select=\"$roleAttr/.\"/>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='entitlement']) \n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>       \n+          <xsl:for-each select=\"$attrs/*/entitlement\">\n+            <xsl:variable name=\"value\" select=\"@id\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) \n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>       \n+          <xsl:for-each select=\"$attrs/*/resource\">\n+            <xsl:variable name=\"value\" select=\"@name\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='user']) \n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>       \n+          <xsl:for-each select=\"$attrs/*/user\">\n+            <xsl:variable name=\"value\" select=\"@userUsername\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <xsl:text>\"</xsl:text>\n+          <xsl:if test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0\"> \n+            <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n+            <xsl:value-of select=\"$value\"/>\n+          </xsl:if>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>\n+    \n+    </xsl:for-each>\n+  </xsl:template>\n+  \n+</xsl:stylesheet>\n+"},{"sha":"bb319a45442d3d18eb5e67ff1d2377902de90b20","filename":"syncope620/server/logic/src/main/resources/report/roleReportlet2fo.xsl","status":"added","additions":228,"deletions":0,"changes":228,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2fo.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,228 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.RoleReportlet']\">\n+   \n+    <fo:block font-size=\"16pt\" font-weight=\"bold\" space-after=\"0.5cm\" space-before=\"5mm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n+        \n+    <xsl:for-each select=\"role\">\n+      <fo:block font-size=\"14pt\" font-weight=\"bold\" space-before=\"15mm\" space-after=\"5mm\" background-color=\"(#8888ff)\">Role <xsl:value-of select=\"@name\"/></fo:block>\n+      <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+        <fo:table-column/>\n+        <fo:table-column/>\n+        <fo:table-body>\n+          <fo:table-row background-color=\"(#ccccff)\">\n+            <fo:table-cell>\n+              <fo:block>Id:</fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block font-style=\"italic\">\n+                <xsl:value-of select=\"@id\"/>\n+              </fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+          <xsl:if test=\"@roleOwner != 'null'\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Role Owner:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@roleOwner\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"@userOwner != 'null'\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Last Login Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@userOwner\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+        </fo:table-body>\n+      </fo:table>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS ROLE HASN'T ANY ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS ROLE HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS ROLE HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <!--entitlements-->\n+      <xsl:choose>\n+        <xsl:when test=\"entitlements/entitlement\">\n+          <xsl:call-template name=\"entitlements\">\n+            <xsl:with-param name=\"label\">Entitlements</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"entitlements/entitlement\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS ROLE HASN'T ANY ENTITLEMENT</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"users/user\">\n+          <fo:block font-size=\"11pt\" font-weight=\"bold\">Users</fo:block>\n+          <xsl:for-each select=\"users/user\">\n+            <fo:block background-color=\"(#ccccff)\" font-size=\"9pt\" font-weight=\"bold\" space-before=\"4mm\">User: <xsl:value-of select=\"@userUsername\"/> (Id: <xsl:value-of select=\"@userId\"/>)</fo:block>\n+                 \n+          </xsl:for-each> \n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS ROLE HASN'T ANY USER ASSIGNED TO</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:call-template name=\"roleResources\">\n+        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+      </xsl:call-template>\n+    </xsl:for-each>\n+\n+  </xsl:template>\n+  \n+  <xsl:template name=\"attributes\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\">\n+      <xsl:value-of select=\"$label\"/>\n+    </fo:block>\n+    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+      <fo:table-column/>\n+      <fo:table-column/>\n+      <fo:table-header>\n+        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Schema name</fo:block>\n+          </fo:table-cell>\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Value(s)</fo:block>\n+          </fo:table-cell>\n+        </fo:table-row>\n+      </fo:table-header>\n+      <fo:table-body>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>\n+                  <xsl:value-of select=\"@name\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <xsl:for-each select=\"value\">\n+                  <fo:block></fo:block><!--                        <fo:block>&#x2022;</fo:block>-->\n+                  <fo:block font-style=\"italic\">\n+                    <xsl:value-of select=\"text()\"/>\n+                  </fo:block>\n+                </xsl:for-each>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <fo:table-row>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+        </xsl:for-each>\n+      </fo:table-body>\n+    </fo:table>\n+  </xsl:template>\n+  <!--entitlements template-->\n+  <xsl:template name=\"entitlements\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\" space-before=\"5mm\">\n+      <xsl:value-of select=\"$label\"/>\n+    </fo:block>\n+    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+      <fo:table-column/>\n+      <!--<fo:table-column/>-->\n+      <fo:table-header>\n+        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Name</fo:block>\n+          </fo:table-cell>\n+        </fo:table-row>\n+      </fo:table-header>\n+      <fo:table-body>\n+        <xsl:for-each select=\"$node\">\n+          <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n+            <fo:table-cell>\n+              <fo:block>\n+                <xsl:value-of select=\"@id\"/>\n+              </fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+        </xsl:for-each>\n+      </fo:table-body>\n+    </fo:table>\n+  </xsl:template>\n+  \n+  <xsl:template name=\"roleResources\">\n+    <xsl:param name=\"node\"/>\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"3mm\" space-before=\"5mm\">Role Resources</fo:block>\n+    <xsl:for-each select=\"$node\">\n+      <fo:block></fo:block> <!--            <fo:block>&#x2022;</fo:block>-->\n+      <fo:block background-color=\"(#ccccff)\">\n+        <xsl:value-of select=\"@name\"/>\n+      </fo:block>\n+    </xsl:for-each>\n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"9f5825f131a9c04fe5b3c0b39897bc9905757feb","filename":"syncope620/server/logic/src/main/resources/report/roleReportlet2html.xsl","status":"added","additions":196,"deletions":0,"changes":196,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FroleReportlet2html.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,196 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.RoleReportlet']\">\n+    <h2>Reportlet: <xsl:value-of select=\"@name\"/></h2>\n+    <xsl:for-each select=\"role\">\n+      <h3>Role <xsl:value-of select=\"@name\"/></h3>\n+      \n+      <table style=\"border: 1px solid black;\">\n+        <tr>\n+          <td>Id:</td>\n+          <td>\n+            <xsl:value-of select=\"@id\"/>\n+          </td>\n+        </tr>\n+        <xsl:if test=\"@roleOwner != 'null'\"> <!--!= null test=\"not(USER/FIRSTNAME)\" -->\n+          <tr>\n+            <td>Role Owner:</td>\n+            <td>\n+              <xsl:value-of select=\"@roleOwner\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"@userOwner != 'null'\">\n+          <tr>\n+            <td>User Owner:</td>\n+            <td>\n+              <xsl:value-of select=\"@userOwner\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        \n+      </table>\n+\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS ROLE HASN'T ANY ATTRIBUTE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS ROLE HASN'T ANY DERIVED ATTRIBUTE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <!--</xsl:if>-->\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS ROLE HASN'T ANY VIRTUAL ATTRIBUTE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"entitlements/entitlement\">\n+          <xsl:call-template name=\"entitlements\">\n+            <xsl:with-param name=\"label\">Entitlements: </xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"entitlements/entitlement\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS ROLE HASN'T ANY ENTITLEMENT</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"users/user\">\n+          <h4>Users</h4>\n+          <xsl:for-each select=\"users/user\">\n+            <h5>User: <xsl:value-of select=\"@userUsername\"/> (Id: <xsl:value-of select=\"@userId\"/>)</h5>\n+          </xsl:for-each>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS ROLE HASN'T ANY USER ASSIGNED TO</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:call-template name=\"roleResources\">\n+        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+      </xsl:call-template>\n+      <hr/>\n+      \n+    </xsl:for-each>\n+  </xsl:template>\n+ \n+  <!--entitlement template-->\n+  <xsl:template name=\"entitlements\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+\n+    <h4>\n+      <xsl:value-of select=\"$label\"/>\n+    </h4>\n+    \n+    <table>\n+      \n+      <tbody>\n+        <xsl:for-each select=\"$node\">\n+          <tr>\n+            <td>\n+              <xsl:value-of select=\"@id\"/>\n+            </td>\n+          </tr>\n+        </xsl:for-each>\n+      </tbody>\n+    </table>\n+  </xsl:template>\n+\n+\n+  <xsl:template name=\"attributes\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+\n+    <h4>\n+      <xsl:value-of select=\"$label\"/>\n+    </h4>\n+    \n+    <table>\n+      <thead>\n+        <tr>\n+          <th>Schema name</th>\n+          <th>Value(s)</th>\n+        </tr>\n+      </thead>\n+      <tbody>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <tr>\n+              <td>\n+                <xsl:value-of select=\"@name\"/>\n+              </td>\n+              <td>\n+                <ul>\n+                  <xsl:for-each select=\"value\">\n+                    <li>\n+                      <xsl:value-of select=\"text()\"/>\n+                    </li>\n+                  </xsl:for-each>\n+                </ul>\n+              </td>\n+            </tr>\n+          </xsl:if>\n+        </xsl:for-each>\n+      </tbody>\n+    </table>\n+  </xsl:template>\n+\n+  <xsl:template name=\"roleResources\">\n+    <xsl:param name=\"node\"/>\n+    \n+    <h4>Role Resources</h4>\n+    <ul>\n+      <xsl:for-each select=\"$node\">\n+        <li>\n+          <xsl:value-of select=\"@name\"/>\n+        </li>\n+      </xsl:for-each>\n+    </ul>\n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"90879d980e6223c8f079890a5a1fbfe228146951","filename":"syncope620/server/logic/src/main/resources/report/staticReportlet2csv.xsl","status":"added","additions":81,"deletions":0,"changes":81,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,81 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\">\n+\n+  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n+   \n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n+    <xsl:call-template name=\"header\">\n+      <xsl:with-param name=\"node\" select=\"configurations/staticAttributes\"/>\n+    </xsl:call-template>\n+    \n+    <xsl:call-template name=\"staticAttributes\">\n+      <xsl:with-param name=\"header\" select=\"configurations/staticAttributes\"/>\n+    </xsl:call-template>\n+  </xsl:template>\n+  \n+  <xsl:template name=\"header\">\n+    <xsl:param name=\"node\"/>  \n+    <xsl:for-each select=\"$node/*\">\n+      <xsl:text>\"</xsl:text>\n+      <xsl:value-of select=\"text()\"/>\n+      <xsl:text>\"</xsl:text> \n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>\n+    </xsl:for-each>\n+    <xsl:text>&#10;</xsl:text>\n+  </xsl:template>\n+    \n+  <xsl:template name=\"staticAttributes\">\n+    <xsl:param name=\"header\"/>\n+    \n+    <xsl:variable name=\"attrs\" select=\".\"/>\n+    <xsl:for-each select=\"$header/*\">\n+      <xsl:variable name=\"nameAttr\" select=\"text()\"/> \n+      <xsl:if test=\"string-length($attrs/*[name(.)=$nameAttr]/text()) &gt; 0 \n+                      and count($attrs/*[name(.)=$nameAttr]/*/node()) = 0\">\n+        <xsl:variable name=\"value\" select=\"$attrs/*[name(.)=$nameAttr]/text()\"/>\n+        <xsl:text>\"</xsl:text>\n+        <xsl:value-of select=\"$value\"/>\n+        <xsl:text>\"</xsl:text>\n+      </xsl:if>\n+      \n+      <xsl:if test=\"string-length($attrs/*[name(.)=$nameAttr]/*/text()) &gt; 0 \n+                      and count($attrs/*[name(.)=$nameAttr]/*/node()) &gt; 0\">\n+        <xsl:text>\"</xsl:text>\n+        <xsl:for-each select=\"$attrs/*[name(.)=$nameAttr]/*\">\n+          <xsl:variable name=\"value\" select=\"text()\"/>\n+          <xsl:text></xsl:text>\n+          <xsl:value-of select=\"$value\"/>\n+          <xsl:if test=\"position() != last()\">\n+            <xsl:value-of select=\"$delimiter\"/>\n+          </xsl:if>\n+        </xsl:for-each>\n+        <xsl:text>\"</xsl:text>\n+      </xsl:if>\n+      \n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>\n+    \n+    </xsl:for-each>\n+  </xsl:template>\n+</xsl:stylesheet>"},{"sha":"c123d514fff660a69ebf0554bbad1535e31942ea","filename":"syncope620/server/logic/src/main/resources/report/staticReportlet2fo.xsl","status":"added","additions":84,"deletions":0,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,84 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+\n+-->\n+\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n+\n+    <fo:block font-size=\"14pt\" font-weight=\"bold\" space-after=\"0.5cm\">Reportlet: \n+      <xsl:value-of select=\"@name\"/>\n+    </fo:block>\n+\n+    <xsl:if test=\"string-length(string/text()) &gt; 0\">\n+      <fo:block font-size=\"11pt\">String value: \n+        <xsl:value-of select=\"string/text()\"/>\n+      </fo:block>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(long/text()) &gt; 0\">\n+      <fo:block font-size=\"11pt\">Long value: \n+        <xsl:value-of select=\"long/text()\"/>\n+      </fo:block>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(double/text()) &gt; 0\">\n+      <fo:block font-size=\"11pt\">Double value: \n+        <xsl:value-of select=\"double/text()\"/>\n+      </fo:block>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(date/text()) &gt; 0\">\n+      <fo:block font-size=\"11pt\">Date value: \n+        <xsl:value-of select=\"date/text()\"/>\n+      </fo:block>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(enum/text()) &gt; 0\">\n+      <fo:block font-size=\"11pt\">Enum value: \n+        <xsl:value-of select=\"enum/text()\"/>\n+      </fo:block>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(list) &gt; 0\">\n+      <fo:block font-size=\"11pt\">List values:</fo:block>\n+            \n+      <fo:list-block provisional-label-separation=\"4mm\" provisional-distance-between-starts=\"2mm\">\n+        <xsl:for-each select=\"list/string\">\n+          <xsl:if test=\"string-length(string/text()) &gt; 0\">\n+            <fo:list-item>\n+              <fo:list-item-label end-indent=\"label-end()\">\n+                <fo:block>&#x2022;</fo:block>\n+              </fo:list-item-label>\n+              <fo:list-item-body start-indent=\"body-start()\">\n+                <fo:block>\n+                  <xsl:value-of select=\"text()\"/>\n+                </fo:block>\n+              </fo:list-item-body>\n+            </fo:list-item>\n+          </xsl:if>\n+        </xsl:for-each>\n+      </fo:list-block>\n+    </xsl:if>\n+        \n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"da0ba8590e0a0d569bd72423fbd7c95c5f3595a6","filename":"syncope620/server/logic/src/main/resources/report/staticReportlet2html.xsl","status":"added","additions":74,"deletions":0,"changes":74,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,74 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+\n+-->\n+\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n+    <h2>Reportlet: \n+      <xsl:value-of select=\"@name\"/>\n+    </h2>\n+        \n+    <xsl:if test=\"string-length(string/text()) &gt; 0\">\n+      <p>String value:                 \n+        <xsl:value-of select=\"string/text()\"/>\n+      </p>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(long/text()) &gt; 0\">\n+      <p>Long value: \n+        <xsl:value-of select=\"long/text()\"/>\n+      </p>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(double/text()) &gt; 0\">\n+      <p>Double value: \n+        <xsl:value-of select=\"double/text()\"/>\n+      </p>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(date/text()) &gt; 0\">\n+      <p>Date value: \n+        <xsl:value-of select=\"date/text()\"/>\n+      </p>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(enum/text()) &gt; 0\">\n+      <p>Enum value: \n+        <xsl:value-of select=\"enum/text()\"/>\n+      </p>\n+    </xsl:if>\n+\n+    <xsl:if test=\"string-length(list) &gt; 0\">\n+      <p>List values:</p>\n+            \n+      <ul>\n+        <xsl:for-each select=\"list/string\">\n+          <xsl:if test=\"string-length(string/text()) &gt; 0\">\n+            <li>\n+              <xsl:value-of select=\"text()\"/>\n+            </li>\n+          </xsl:if>\n+        </xsl:for-each>\n+      </ul>\n+    </xsl:if>\n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"87c670f9d113a3f00986ef121b15bb961c5f0876","filename":"syncope620/server/logic/src/main/resources/report/userReportlet2csv.xsl","status":"added","additions":119,"deletions":0,"changes":119,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,119 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n+  \n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n+    \n+    <xsl:call-template name=\"header\">\n+      <xsl:with-param name=\"node\" select=\"configurations/userAttributes\"/>\n+    </xsl:call-template>\n+    <xsl:for-each select=\"user\">\n+      <xsl:call-template name=\"userAttributes\">\n+        <xsl:with-param name=\"header\" select=\"../configurations/userAttributes\"/>\n+      </xsl:call-template>\n+      <xsl:text>&#10;</xsl:text>\n+    </xsl:for-each>\n+  </xsl:template>\n+  \n+  <xsl:template name=\"header\">\n+    <xsl:param name=\"node\"/>  \n+    <xsl:for-each select=\"$node/*\">\n+      <xsl:text>\"</xsl:text>\n+      <xsl:value-of select=\"text()\"/>   \n+      <xsl:text>\"</xsl:text>\n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>\n+    </xsl:for-each>\n+    <xsl:text>&#10;</xsl:text>\n+  </xsl:template>\n+    \n+  <xsl:template name=\"userAttributes\">\n+    <xsl:param name=\"header\"/>\n+  \n+    <xsl:variable name=\"attrs\" select=\".\"/>\n+    <xsl:for-each select=\"$header/*\">\n+      <xsl:variable name=\"nameAttr\" select=\"text()\"/>\n+      <xsl:choose>      \n+        <xsl:when test=\"count($attrs/@*[name()=$nameAttr]) &gt; 0\">\n+          <xsl:variable name=\"userAttr\" select=\"$attrs/@*[name()=$nameAttr]\"/>\n+          <xsl:text>\"</xsl:text>\n+          <xsl:value-of select=\"$userAttr/.\"/>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0 \n+                        and count($attrs/*/*[@name=$nameAttr]/node()) = 0\">\n+          <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n+          <xsl:text>\"</xsl:text>\n+          <xsl:value-of select=\"$value\"/>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0 \n+                        and count($attrs/*/*[@name=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>\n+          <xsl:for-each select=\"$attrs/*/*[@name=$nameAttr]/*\">\n+            <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='membership']) \n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>       \n+          <xsl:variable name=\"value\" select=\"@roleName\"/>\n+          <xsl:for-each select=\"$attrs/*/membership\">\n+            <xsl:variable name=\"value\" select=\"@roleName\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) \n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n+          <xsl:text>\"</xsl:text>\n+          <xsl:variable name=\"value\" select=\"@name\"/>\n+          <xsl:for-each select=\"$attrs/*/resource\">\n+            <xsl:variable name=\"value\" select=\"@name\"/>\n+            <xsl:value-of select=\"$value\"/>\n+            <xsl:if test=\"position() != last()\">\n+              <xsl:value-of select=\"$delimiter\"/>\n+            </xsl:if>\n+          </xsl:for-each>\n+          <xsl:text>\"</xsl:text>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <xsl:text>\"\"</xsl:text> \n+        </xsl:otherwise>  \n+      </xsl:choose>\n+      <xsl:if test=\"position() != last()\">\n+        <xsl:value-of select=\"$delimiter\"/>\n+      </xsl:if>  \n+    </xsl:for-each>\n+  </xsl:template>\n+  \n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"977ef4c4e17ec8fd6f666b633e3928e9fbdd5f06","filename":"syncope620/server/logic/src/main/resources/report/userReportlet2fo.xsl","status":"added","additions":247,"deletions":0,"changes":247,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,247 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n+   \n+    <fo:block font-size=\"16pt\" font-weight=\"bold\" space-after=\"0.5cm\" space-before=\"5mm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n+        \n+    <xsl:for-each select=\"user\">\n+      <fo:block font-size=\"14pt\" font-weight=\"bold\" space-before=\"15mm\" space-after=\"5mm\" background-color=\"(#8888ff)\">User <xsl:value-of select=\"@username\"/></fo:block>\n+      <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+        <fo:table-column/>\n+        <fo:table-column/>\n+        <fo:table-body>\n+          <fo:table-row background-color=\"(#ccccff)\">\n+            <fo:table-cell>\n+              <fo:block>Status:</fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block font-style=\"italic\">\n+                <xsl:value-of select=\"@status\"/>\n+              </fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+          <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Creation Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@creationDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Last Login Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@lastLoginDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Change Password Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@changePwdDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Password History Size:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@passwordHistorySize\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Number of Failed Login Attempts:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@failedLoginCount\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+        </fo:table-body>\n+      </fo:table>\n+      <xsl:call-template name=\"attributes\">\n+        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+      </xsl:call-template>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n+          <fo:block font-size=\"11pt\" font-weight=\"bold\">Memberships</fo:block>\n+          <xsl:for-each select=\"memberships/membership\">\n+            <fo:block font-size=\"10pt\" font-weight=\"bold\" space-before=\"2mm\">Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</fo:block>\n+            <fo:block start-indent=\"1cm\" space-before=\"3mm\" space-after=\"0.5cm\">\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <!-- 'roleResources\" is defined in roleReportlet2fo.xsl -->\n+              <xsl:call-template name=\"roleResources\">\n+                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+              </xsl:call-template>\n+            </fo:block>\n+          </xsl:for-each>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T BEEN ASSIGNED TO ANY ROLE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:call-template name=\"resources\">\n+        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+      </xsl:call-template>\n+    </xsl:for-each>\n+  </xsl:template>\n+  <xsl:template name=\"attributes\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\">\n+      <xsl:value-of select=\"$label\"/>\n+    </fo:block>\n+    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+      <fo:table-column/>\n+      <fo:table-column/>\n+      <fo:table-header>\n+        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Schema name</fo:block>\n+          </fo:table-cell>\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Value(s)</fo:block>\n+          </fo:table-cell>\n+        </fo:table-row>\n+      </fo:table-header>\n+      <fo:table-body>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>\n+                  <xsl:value-of select=\"@name\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <xsl:for-each select=\"value\">\n+                  <fo:block></fo:block><!--                        <fo:block>&#x2022;</fo:block>-->\n+                  <fo:block font-style=\"italic\">\n+                    <xsl:value-of select=\"text()\"/>\n+                  </fo:block>\n+                </xsl:for-each>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <fo:table-row>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+        </xsl:for-each>\n+      </fo:table-body>\n+    </fo:table>\n+  </xsl:template>\n+  <xsl:template name=\"resources\">\n+    <xsl:param name=\"node\"/>\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"3mm\">Resources</fo:block>\n+    <xsl:for-each select=\"$node\">\n+      <fo:block></fo:block> <!--            <fo:block>&#x2022;</fo:block>-->\n+      <fo:block background-color=\"(#ccccff)\">\n+        <xsl:value-of select=\"@name\"/>\n+      </fo:block>\n+    </xsl:for-each>\n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"751cb4c680dbcc65ab689c03fab317c600b12b0e","filename":"syncope620/server/logic/src/main/resources/report/userReportlet2html.xsl","status":"added","additions":219,"deletions":0,"changes":219,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,219 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+                version=\"1.0\">\n+\n+  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n+    \n+    <h3>Reportlet: <xsl:value-of select=\"@name\"/></h3>\n+    \n+    <xsl:for-each select=\"user\">\n+      <h4>User <xsl:value-of select=\"@username\"/></h4>\n+      \n+      <table style=\"border: 1px solid black;\">\n+        <tr>\n+          <td>Status:</td>\n+          <td>\n+            <xsl:value-of select=\"@status\"/>\n+          </td>\n+        </tr>\n+        <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n+          <tr>\n+            <td>Creation Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@creationDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n+          <tr>\n+            <td>Last Login Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@lastLoginDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n+          <tr>\n+            <td>Change Password Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@changePwdDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n+          <tr>\n+            <td>Password History Size:</td>\n+            <td>\n+              <xsl:value-of select=\"@passwordHistorySize\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n+          <tr>\n+            <td>Number of Failed Login Attempts:</td>\n+            <td>\n+              <xsl:value-of select=\"@failedLoginCount\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+      </table>\n+\n+      <xsl:call-template name=\"attributes\">\n+        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+      </xsl:call-template>\n+\n+      <!--<xsl:if test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">-->\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER HASN'T DERIVED ATTRIBUTES</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <!--</xsl:if>-->\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER HASN'T VIRTUAL ATTRIBUTES</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n+          <h4>Memberships</h4>\n+          <xsl:for-each select=\"memberships/membership\">\n+            <h5>Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</h5>\n+            <blockquote>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T ATTRIBUTES</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T DERIVED ATTRIBUTES</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T VIRTUAL ATTRIBUTES</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <!-- 'roleResources\" is defined in roleReportlet2html.xsl -->\n+              <xsl:call-template name=\"roleResources\">\n+                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+              </xsl:call-template>\n+            </blockquote>\n+          </xsl:for-each>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER ISN'T ASSIGNED TO A ROLE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:if test=\"string-length(resources) &gt; 0\">\n+        <xsl:call-template name=\"resources\">\n+          <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+        </xsl:call-template>\n+      </xsl:if>\n+      <hr/>\n+    </xsl:for-each>\n+       \n+  </xsl:template>\n+\n+  <xsl:template name=\"attributes\">\n+    <xsl:param name=\"label\"/>\n+    <xsl:param name=\"node\"/>\n+\n+    <h4>\n+      <xsl:value-of select=\"$label\"/>\n+    </h4>\n+    \n+    <table>\n+      <thead>\n+        <tr>\n+          <th>Schema name</th>\n+          <th>Value(s)</th>\n+        </tr>\n+      </thead>\n+      <tbody>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <tr>\n+              <td>\n+                <xsl:value-of select=\"@name\"/>\n+              </td>\n+              <td>\n+                <ul>\n+                  <xsl:for-each select=\"value\">\n+                    <li>\n+                      <xsl:value-of select=\"text()\"/>\n+                    </li>\n+                  </xsl:for-each>\n+                </ul>\n+              </td>\n+            </tr>\n+          </xsl:if>\n+        </xsl:for-each>\n+      </tbody>\n+    </table>\n+  </xsl:template>\n+\n+  <xsl:template name=\"resources\">\n+    <xsl:param name=\"node\"/>\n+    \n+    <h4>Resources</h4>\n+    <ul>\n+      <xsl:for-each select=\"$node\">\n+        <li>\n+          <xsl:value-of select=\"@name\"/>\n+        </li>\n+      </xsl:for-each>\n+    </ul>\n+  </xsl:template>\n+</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"de655d844a98bb926f84cb05ad4b349a8c0063fe","filename":"syncope620/server/logic/src/test/java/org/apache/syncope/server/logic/NotificationTest.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FNotificationTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FNotificationTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2FNotificationTest.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -89,6 +89,7 @@\n @ContextConfiguration(locations = {\n     \"classpath:provisioningContext.xml\",\n     \"classpath:logicContext.xml\",\n+    \"classpath:workflowContext.xml\",\n     \"classpath:persistenceTest.xml\",\n     \"classpath:logicTest.xml\"\n })"},{"sha":"d3b1bd8106653c5fcd1789011f6467bf7b408443","filename":"syncope620/server/logic/src/test/resources/logicTest.xml","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fresources%2FlogicTest.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fresources%2FlogicTest.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Flogic%2Fsrc%2Ftest%2Fresources%2FlogicTest.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,6 +30,7 @@ under the License.\n         <value>classpath:connid.properties</value>\n         <value>classpath:mail.properties</value>\n         <value>classpath:logic.properties</value>\n+        <value>classpath:workflow.properties</value>\n       </list>\n     </property>\n     <property name=\"ignoreResourceNotFound\" value=\"true\"/>\n@@ -40,9 +41,5 @@ under the License.\n     <property name=\"primary\" value=\"file:${conf.directory}/content.xml\"/>\n     <property name=\"fallback\" value=\"classpath:content.xml\"/>\n   </bean>\n-  <bean class=\"org.apache.syncope.server.persistence.jpa.content.XMLContentLoader\" init-method=\"load\"/>\n-  \n-  <bean class=\"org.apache.syncope.server.workflow.java.DefaultUserWorkflowAdapter\"/>\n-  <bean class=\"org.apache.syncope.server.workflow.java.DefaultRoleWorkflowAdapter\"/>\n   \n </beans>"},{"sha":"513ea91c090fc428b71830002584a7e281f7c593","filename":"syncope620/server/misc/pom.xml","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fmisc%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fmisc%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fmisc%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -77,14 +77,23 @@ under the License.\n       <groupId>org.jasypt</groupId>\n       <artifactId>jasypt</artifactId>\n     </dependency>\n+    \n+    <dependency>\n+      <groupId>org.springframework</groupId>\n+      <artifactId>spring-aop</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.springframework</groupId>\n+      <artifactId>spring-expression</artifactId>\n+    </dependency>\n     <dependency>\n       <groupId>org.springframework.security</groupId>\n       <artifactId>spring-security-core</artifactId>\n     </dependency>\n     \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-provisioning-api</artifactId>\n+      <artifactId>syncope-server-provisioning-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n     "},{"sha":"5dddb075ae1d6743f51010371036f796cbaef55f","filename":"syncope620/server/misc/src/main/resources/securityContext.xml","status":"added","additions":68,"deletions":0,"changes":68,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fmisc%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fmisc%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fmisc%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,68 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xmlns:security=\"http://www.springframework.org/schema/security\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\n+                           http://www.springframework.org/schema/security\n+                           http://www.springframework.org/schema/security/spring-security.xsd\">\n+\n+  <bean id=\"adminUser\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${adminUser}\"/>\n+  </bean>\n+  <bean id=\"anonymousUser\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${anonymousUser}\"/>\n+  </bean>\n+  \n+  <security:global-method-security pre-post-annotations=\"enabled\"/>\n+  \n+  <bean id=\"filterChainProxy\" class=\"org.springframework.security.web.FilterChainProxy\">\n+    <security:filter-chain-map path-type=\"ant\">\n+      <security:filter-chain pattern=\"/**\" filters=\"securityContextPersistenceFilter\"/>\n+    </security:filter-chain-map>\n+  </bean>\n+  \n+  <bean id=\"securityContextRepository\" class='org.springframework.security.web.context.NullSecurityContextRepository'/>\n+\n+  <bean id=\"securityContextPersistenceFilter\"\n+        class=\"org.springframework.security.web.context.SecurityContextPersistenceFilter\">\n+    <property name=\"securityContextRepository\" ref=\"securityContextRepository\"/>\n+  </bean>\n+\n+  <security:http security-context-repository-ref=\"securityContextRepository\" realm=\"Apache Syncope authentication\">\n+    <security:http-basic/>\n+    <security:anonymous username=\"${anonymousUser}\"/>\n+    <security:intercept-url pattern=\"/**\"/>\n+  </security:http>\n+\n+  <bean id=\"syncopeUserDetailsService\" class=\"org.apache.syncope.server.misc.security.SyncopeUserDetailsService\"/>\n+\n+  <bean id=\"syncopeAuthenticationProvider\" class=\"org.apache.syncope.server.misc.security.SyncopeAuthenticationProvider\">\n+    <property name=\"adminPassword\" value=\"${adminPassword}\"/>\n+    <property name=\"adminPasswordAlgorithm\" value=\"${adminPasswordAlgorithm}\"/>\n+    <property name=\"anonymousKey\" value=\"${anonymousKey}\"/>\n+    <property name=\"userDetailsService\" ref=\"syncopeUserDetailsService\"/>\n+  </bean>\n+\n+  <security:authentication-manager>\n+    <security:authentication-provider ref=\"syncopeAuthenticationProvider\"/>\n+  </security:authentication-manager>\n+</beans>\n\\ No newline at end of file"},{"sha":"54f0663af6691f85fdeb51051358cfc9a9a139c1","filename":"syncope620/server/persistence-api/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-api%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,7 +30,7 @@ under the License.\n   <name>Apache Syncope Server Persistence API</name>\n   <description>Apache Syncope Server Persistence API</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-persistence-api</artifactId>\n+  <artifactId>syncope-server-persistence-api</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>"},{"sha":"0bbc3ae925af9183ee726035e0a496eb5ecd55f3","filename":"syncope620/server/persistence-api/src/main/java/org/apache/syncope/server/persistence/api/SyncopeLoader.java","status":"added","additions":35,"deletions":0,"changes":35,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2FSyncopeLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2FSyncopeLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2FSyncopeLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.persistence.api;\n+\n+/**\n+ * Marker interface for Syncope components initialization.\n+ */\n+public interface SyncopeLoader {\n+\n+    /**\n+     * @return the priority that the implementing class has in the initialization process.\n+     */\n+    Integer getPriority();\n+\n+    /**\n+     * Perform initialization operations.\n+     */\n+    void load();\n+}"},{"sha":"ed9ae6fc423a9d6ef3c767e6df98c32a9355ab76","filename":"syncope620/server/persistence-api/src/main/java/org/apache/syncope/server/persistence/api/content/ContentLoader.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2Fcontent%2FContentLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2Fcontent%2FContentLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fapi%2Fcontent%2FContentLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -18,8 +18,8 @@\n  */\n package org.apache.syncope.server.persistence.api.content;\n \n-public interface ContentLoader {\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n \n-    void load();\n+public interface ContentLoader extends SyncopeLoader {\n \n }"},{"sha":"aa65227e7bfd5c92126f9c1e81caf0c6b44851ed","filename":"syncope620/server/persistence-jpa/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,7 +30,7 @@ under the License.\n   <name>Apache Syncope Server Persistence JPA</name>\n   <description>Apache Syncope Server Persistence JPA</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-persistence-jpa</artifactId>\n+  <artifactId>syncope-server-persistence-jpa</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n@@ -95,7 +95,7 @@ under the License.\n       \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-workflow-api</artifactId>\n+      <artifactId>syncope-server-workflow-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n     <dependency>"},{"sha":"9f44ac93b0db9418304d189fb7661d5d42777532","filename":"syncope620/server/persistence-jpa/src/main/java/org/apache/syncope/server/persistence/jpa/content/XMLContentLoader.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fcontent%2FXMLContentLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fcontent%2FXMLContentLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fcontent%2FXMLContentLoader.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -41,6 +41,11 @@ public class XMLContentLoader extends AbstractContentDealer implements ContentLo\n     @Resource(name = \"contentXML\")\n     private ResourceWithFallbackLoader contentXML;\n \n+    @Override\n+    public Integer getPriority() {\n+        return 0;\n+    }\n+\n     @Transactional\n     @Override\n     public void load() {"},{"sha":"ec61b84e8ecb4a23dbefbe7889b7deb6140e4fb2","filename":"syncope620/server/persistence-jpa/src/main/java/org/apache/syncope/server/persistence/jpa/entity/JPAEntityFactory.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -25,6 +25,7 @@\n import org.apache.syncope.server.persistence.api.entity.Entity;\n import org.apache.syncope.server.persistence.api.entity.EntityFactory;\n import org.apache.syncope.server.persistence.api.entity.ExternalResource;\n+import org.apache.syncope.server.persistence.api.entity.Logger;\n import org.apache.syncope.server.persistence.api.entity.Notification;\n import org.apache.syncope.server.persistence.api.entity.PasswordPolicy;\n import org.apache.syncope.server.persistence.api.entity.Policy;\n@@ -252,6 +253,8 @@ public <KEY, T extends Entity<KEY>> T newEntity(final Class<T> reference) {\n             result = (T) new JPATaskExec();\n         } else if (reference.equals(SecurityQuestion.class)) {\n             result = (T) new JPASecurityQuestion();\n+        } else if (reference.equals(Logger.class)) {\n+            result = (T) new JPALogger();\n         } else {\n             throw new IllegalArgumentException(\"Could not find a JPA implementation of \" + reference.getName());\n         }"},{"sha":"664afd0f41efc1e4c365f4d97c46b7b925ea4f27","filename":"syncope620/server/persistence-jpa/src/main/resources/persistence.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -14,6 +14,7 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n+content.directory=${conf.directory}\n jpa.driverClassName=org.postgresql.Driver\n jpa.url=jdbc:postgresql://localhost:5432/syncope\n jpa.username=syncope\n@@ -24,4 +25,4 @@ jpa.pool.validationQuery=SELECT 1\n quartz.jobstore=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n quartz.sql=tables_postgres.sql\n audit.sql=audit.sql\n-database.schema=\n\\ No newline at end of file\n+database.schema="},{"sha":"60b99405c7e54b00466dee7e5cdde2c2ca615fed","filename":"syncope620/server/persistence-jpa/src/main/resources/persistenceContext.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -60,19 +60,19 @@ under the License.\n     <constructor-arg value=\"${database.schema}\"/>\n   </bean>\n   <bean id=\"persistenceProperties\" class=\"org.apache.syncope.server.misc.spring.ResourceWithFallbackLoader\">\n-    <property name=\"primary\" value=\"file:${conf.directory}/persistence.properties\"/>\n+    <property name=\"primary\" value=\"file:${content.directory}/persistence.properties\"/>\n     <property name=\"fallback\" value=\"classpath:persistence.properties\"/>\n   </bean>\n   <bean id=\"contentXML\" class=\"org.apache.syncope.server.misc.spring.ResourceWithFallbackLoader\">\n-    <property name=\"primary\" value=\"file:${conf.directory}/content.xml\"/>\n+    <property name=\"primary\" value=\"file:${content.directory}/content.xml\"/>\n     <property name=\"fallback\" value=\"classpath:content.xml\"/>\n   </bean>\n   <bean id=\"viewsXML\" class=\"org.apache.syncope.server.misc.spring.ResourceWithFallbackLoader\">\n-    <property name=\"primary\" value=\"file:${conf.directory}/views.xml\"/>\n+    <property name=\"primary\" value=\"file:${content.directory}/views.xml\"/>\n     <property name=\"fallback\" value=\"classpath:views.xml\"/>\n   </bean>\n   <bean id=\"indexesXML\" class=\"org.apache.syncope.server.misc.spring.ResourceWithFallbackLoader\">\n-    <property name=\"primary\" value=\"file:${conf.directory}/indexes.xml\"/>\n+    <property name=\"primary\" value=\"file:${content.directory}/indexes.xml\"/>\n     <property name=\"fallback\" value=\"classpath:indexes.xml\"/>\n   </bean>\n "},{"sha":"0fb3b79154e16899789297562d597f1acd42b922","filename":"syncope620/server/persistence-jpa/src/test/resources/content.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -445,7 +445,7 @@ under the License.\n                 bundleName=\"net.tirasa.connid.bundles.soap\"\n                 connectorName=\"net.tirasa.connid.bundles.soap.WebServiceConnector\"\n                 version=\"${connid.soap.version}\"\n-                jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"http://localhost:9080/wssample/services/provisioning\"]},{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]}]'/>\n+                jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"http://localhost:${cargo.servlet.port}/wssample/services/provisioning\"]},{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]}]'/>\n   <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ONE_PHASE_CREATE\"/>\n   <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ONE_PHASE_UPDATE\"/>\n   <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ONE_PHASE_DELETE\"/>\n@@ -476,7 +476,7 @@ under the License.\n                 connectorName=\"net.tirasa.connid.bundles.soap.WebServiceConnector\"\n                 version=\"${connid.soap.version}\"\n                 connRequestTimeout=\"10\"\n-                jsonConf='[{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]},{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":true,\"values\":[\"http://localhost:9080/wssample/services/provisioning\"]}]'/>\n+                jsonConf='[{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]},{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":true,\"values\":[\"http://localhost:${cargo.servlet.port}/wssample/services/provisioning\"]}]'/>\n   <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ONE_PHASE_CREATE\"/>\n   <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ONE_PHASE_UPDATE\"/>\n   <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ONE_PHASE_DELETE\"/>\n@@ -490,7 +490,7 @@ under the License.\n                 bundleName=\"net.tirasa.connid.bundles.soap\"\n                 connectorName=\"net.tirasa.connid.bundles.soap.WebServiceConnector\"\n                 version=\"${connid.soap.version}\"\n-                jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"http://localhost:9080/wssample/services/provisioning\"]},{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]}]'/>\n+                jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"http://localhost:${cargo.servlet.port}/wssample/services/provisioning\"]},{\"schema\":{\"name\":\"servicename\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":false,\"values\":[\"net.tirasa.connid.bundles.soap.provisioning.interfaces.Provisioning\"]}]'/>\n \n   <ConnInstance id=\"104\" displayName=\"CSVDir\"\n                 location=\"${connid.location}\"\n@@ -555,7 +555,7 @@ under the License.\n   <ExternalResource name=\"ws-target-resource-timeout\" connector_id=\"102\"\n                     randomPwdIfNotProvided=\"0\" enforceMandatoryCondition=\"1\" propagationMode=\"TWO_PHASES\"\n                     propagationPriority=\"0\" propagationPrimary=\"1\" createTraceLevel=\"FAILURES\" deleteTraceLevel=\"NONE\" updateTraceLevel=\"ALL\" syncTraceLevel=\"ALL\"\n-                    jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":true,\"values\":[\"http://localhost:9080/syncope-build-tools/services/provisioning\"]}]'\n+                    jsonConf='[{\"schema\":{\"name\":\"endpoint\",\"displayName\":null,\"helpMessage\":null,\"type\":\"java.lang.String\",\"required\":true,\"order\":0,\"confidential\":false,\"defaultValues\":null},\"overridable\":true,\"values\":[\"http://localhost:${cargo.servlet.port}/syncope-fit-build-tools/services/provisioning\"]}]'\n                     creator=\"admin\" lastModifier=\"admin\" \n                     creationDate=\"2010-10-20 11:00:00\" lastChangeDate=\"2010-10-20 11:00:00\"/>\n   <ExternalResource name=\"ws-target-resource-list-mappings-1\" connector_id=\"100\""},{"sha":"384d1081d0597beee46097b244b2e98cb53aefda","filename":"syncope620/server/persistence-jpa/src/test/resources/persistence.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -14,6 +14,7 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n+content.directory=${conf.directory}\n jpa.driverClassName=org.h2.Driver\n jpa.url=jdbc:h2:mem:syncopedb;DB_CLOSE_DELAY=-1\n jpa.username=sa\n@@ -25,4 +26,4 @@ quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n quartz.scheduler.idleWaitTime=5000\n quartz.sql=tables_h2.sql\n audit.sql=audit.sql\n-database.schema=\n\\ No newline at end of file\n+database.schema="},{"sha":"968fa718d62b543d88145f58a59bdb93e875dd59","filename":"syncope620/server/provisioning-api/pom.xml","status":"modified","additions":2,"deletions":7,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-api%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-api%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-api%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,27 +30,22 @@ under the License.\n   <name>Apache Syncope Server Provisioning API</name>\n   <description>Apache Syncope Server Provisioning API</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-provisioning-api</artifactId>\n+  <artifactId>syncope-server-provisioning-api</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n     <rootpom.basedir>${basedir}/../..</rootpom.basedir>\n   </properties>\n \n   <dependencies>\n-    <dependency>\n-      <groupId>net.tirasa.connid</groupId>\n-      <artifactId>connector-framework</artifactId>\n-    </dependency>\n-\n     <dependency>\n       <groupId>org.quartz-scheduler</groupId>\n       <artifactId>quartz</artifactId>\n     </dependency>\n \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-persistence-api</artifactId>\n+      <artifactId>syncope-server-persistence-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n   </dependencies>"},{"sha":"b98895ebf0aa76416738642ca22d9203991e48ef","filename":"syncope620/server/provisioning-api/src/main/java/org/apache/syncope/server/provisioning/api/ConnectorFactory.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fapi%2FConnectorFactory.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fapi%2FConnectorFactory.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fapi%2FConnectorFactory.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -20,15 +20,16 @@\n \n import java.util.Set;\n import org.apache.syncope.common.lib.types.ConnConfProperty;\n+import org.apache.syncope.server.persistence.api.SyncopeLoader;\n import org.apache.syncope.server.persistence.api.entity.ConnInstance;\n import org.apache.syncope.server.persistence.api.entity.ExternalResource;\n \n /**\n  * Entry point for creating and destroying connectors for external resources.\n  *\n- * @see org.apache.syncope.core.propagation.Connector\n+ * @see Connector\n  */\n-public interface ConnectorFactory {\n+public interface ConnectorFactory extends SyncopeLoader {\n \n     /**\n      * Create connector from given connector instance and configuration properties.\n@@ -52,6 +53,7 @@ public interface ConnectorFactory {\n      *\n      * @see ExternalResource\n      */\n+    @Override\n     void load();\n \n     /**"},{"sha":"fa5d588d2312a5fbb0488f3b20398a35bca2673d","filename":"syncope620/server/provisioning-java/pom.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,7 +30,7 @@ under the License.\n   <name>Apache Syncope Server Provisioning Java</name>\n   <description>Apache Syncope Server Provisioning Java</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-provisioning-java</artifactId>\n+  <artifactId>syncope-server-provisioning-java</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n@@ -59,7 +59,7 @@ under the License.\n     \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-workflow-api</artifactId>\n+      <artifactId>syncope-server-workflow-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n     <dependency>\n@@ -71,7 +71,7 @@ under the License.\n     <!-- TEST -->\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-workflow-java</artifactId>\n+      <artifactId>syncope-server-workflow-java</artifactId>\n       <version>${project.version}</version>\n       <scope>test</scope>\n     </dependency>\n@@ -82,7 +82,7 @@ under the License.\n     </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-persistence-jpa</artifactId>\n+      <artifactId>syncope-server-persistence-jpa</artifactId>\n       <version>${project.version}</version>\n       <scope>test</scope>\n     </dependency>"},{"sha":"2485458c12c428b9d35d025934081cbdb777b020","filename":"syncope620/server/provisioning-java/src/main/java/org/apache/syncope/server/provisioning/java/ConnectorManager.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FConnectorManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FConnectorManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FConnectorManager.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -134,6 +134,11 @@ public void unregisterConnector(final String id) {\n         ApplicationContextProvider.getBeanFactory().destroySingleton(id);\n     }\n \n+    @Override\n+    public Integer getPriority() {\n+        return 100;\n+    }\n+\n     @Transactional(readOnly = true)\n     @Override\n     public void load() {"},{"sha":"12f04e7db46db2a8b4c19b3ee1f6192615b8ff0f","filename":"syncope620/server/provisioning-java/src/main/resources/mail.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fmail.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fmail.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fmail.properties?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -14,11 +14,12 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n+templates.directory=${conf.directory}\n smtpHost=none.syncope.apache.org\n smtpPort=25\n smtpUser=\n smtpPassword=\n smtpProtocol=smtp\n smtpEncoding=UTF-8\n smtpConnectionTimeout=3000\n-mailDebug=false\n\\ No newline at end of file\n+mailDebug=false"},{"sha":"d3fa6653a9177b0fa99b67700eb1004cc6fd488f","filename":"syncope620/server/provisioning-java/src/main/resources/provisioningContext.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2FprovisioningContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2FprovisioningContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2FprovisioningContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -81,7 +81,7 @@ under the License.\n   </bean>\n \n   <bean id=\"velocityResourceLoader\" class=\"org.apache.syncope.server.misc.spring.ResourceWithFallbackLoader\">\n-    <property name=\"primary\" value=\"file:${conf.directory}/\"/>\n+    <property name=\"primary\" value=\"file:${templates.directory}/\"/>\n     <property name=\"fallback\" value=\"classpath:\"/>\n   </bean>\n   <bean id=\"velocityEngine\" class=\"org.apache.syncope.server.provisioning.java.notification.VelocityEngineFactoryBean\">"},{"sha":"3b76fb7672373d7396804fffe1f10302c1bcebc1","filename":"syncope620/server/provisioning-java/src/test/java/org/apache/syncope/server/provisioning/java/AbstractTest.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FAbstractTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FAbstractTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fprovisioning%2Fjava%2FAbstractTest.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -26,6 +26,7 @@\n @ContextConfiguration(locations = {\n     \"classpath:persistenceTest.xml\",\n     \"classpath:provisioningContext.xml\",\n+    \"classpath:workflowContext.xml\",\n     \"classpath:provisioningTest.xml\"\n })\n public abstract class AbstractTest {"},{"sha":"398f3fcae7c26ec24795ae07af32d479eff87a7b","filename":"syncope620/server/provisioning-java/src/test/resources/provisioningTest.xml","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -29,6 +29,7 @@ under the License.\n         <value>classpath:security.properties</value>\n         <value>classpath:connid.properties</value>\n         <value>classpath:mail.properties</value>\n+        <value>classpath:workflow.properties</value>\n       </list>\n     </property>\n     <property name=\"ignoreResourceNotFound\" value=\"true\"/>\n@@ -41,7 +42,4 @@ under the License.\n   </bean>\n   <bean class=\"org.apache.syncope.server.persistence.jpa.content.XMLContentLoader\" init-method=\"load\"/>\n   \n-  <bean class=\"org.apache.syncope.server.workflow.java.DefaultUserWorkflowAdapter\"/>\n-  <bean class=\"org.apache.syncope.server.workflow.java.DefaultRoleWorkflowAdapter\"/>\n-  \n </beans>"},{"sha":"f164e438d122fdeb2a936bf3f2b64547da5b8109","filename":"syncope620/server/rest-cxf/pom.xml","status":"modified","additions":32,"deletions":1,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -38,6 +38,12 @@ under the License.\n   </properties>\n \n   <dependencies>\n+    <dependency> \n+      <groupId>javax.servlet</groupId> \n+      <artifactId>javax.servlet-api</artifactId> \n+      <scope>provided</scope>\n+    </dependency>\n+    \n     <dependency>\n       <groupId>org.apache.geronimo.specs</groupId>\n       <artifactId>geronimo-jpa_2.0_spec</artifactId>\n@@ -46,8 +52,20 @@ under the License.\n     <dependency>\n       <groupId>org.springframework</groupId>\n       <artifactId>spring-orm</artifactId>\n+    </dependency>      \n+    <dependency>\n+      <groupId>org.springframework</groupId>\n+      <artifactId>spring-web</artifactId>\n     </dependency>\n-\n+    <dependency>\n+      <groupId>org.springframework.security</groupId>\n+      <artifactId>spring-security-web</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.springframework.security</groupId>\n+      <artifactId>spring-security-config</artifactId>\n+    </dependency>\n+    \n     <dependency>\n       <groupId>com.fasterxml.jackson.jaxrs</groupId>\n       <artifactId>jackson-jaxrs-json-provider</artifactId>\n@@ -82,6 +100,12 @@ under the License.\n       <artifactId>cxf-rt-rs-client</artifactId>\n     </dependency>  \n     \n+    <dependency>\n+      <groupId>org.apache.syncope.common</groupId>\n+      <artifactId>syncope-common-rest-api</artifactId>\n+      <version>${project.version}</version>\n+      <classifier>javadoc</classifier>\n+    </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n       <artifactId>syncope-server-logic</artifactId>\n@@ -105,5 +129,12 @@ under the License.\n         <artifactId>maven-pmd-plugin</artifactId>\n       </plugin>\n     </plugins>\n+    \n+    <resources>\n+      <resource>\n+        <directory>src/main/resources</directory>\n+        <filtering>true</filtering>\n+      </resource>\n+    </resources>\n   </build>\n </project>"},{"sha":"bc139a6e2b90cbff424761bf8591635d5f2d32ec","filename":"syncope620/server/rest-cxf/src/main/java/org/apache/syncope/server/rest/cxf/ThreadLocalCleanupListener.java","status":"added","additions":44,"deletions":0,"changes":44,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FThreadLocalCleanupListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FThreadLocalCleanupListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FThreadLocalCleanupListener.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.rest.cxf;\n+\n+import javax.servlet.ServletRequestEvent;\n+import javax.servlet.ServletRequestListener;\n+import org.apache.syncope.server.misc.DataFormat;\n+import org.identityconnectors.common.l10n.CurrentLocale;\n+import org.identityconnectors.framework.impl.api.local.ThreadClassLoaderManager;\n+\n+/**\n+ * Remove any known thread-local variable when the servlet request is destroyed.\n+ */\n+public class ThreadLocalCleanupListener implements ServletRequestListener {\n+\n+    @Override\n+    public void requestInitialized(final ServletRequestEvent sre) {\n+        // nothing to do while setting up this request (and thread)\n+    }\n+\n+    @Override\n+    public void requestDestroyed(final ServletRequestEvent sre) {\n+        DataFormat.clear();\n+\n+        ThreadClassLoaderManager.clearInstance();\n+        CurrentLocale.clear();\n+    }\n+}"},{"sha":"76f1897df66c4b196507f46f5decab5f1d003498","filename":"syncope620/server/rest-cxf/src/main/java/org/apache/syncope/server/rest/cxf/WADLServlet.java","status":"added","additions":96,"deletions":0,"changes":96,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FWADLServlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FWADLServlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Frest%2Fcxf%2FWADLServlet.java?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,96 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.server.rest.cxf;\n+\n+import java.io.IOException;\n+import java.net.URL;\n+import java.rmi.ServerException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import org.apache.cocoon.pipeline.CachingPipeline;\n+import org.apache.cocoon.pipeline.Pipeline;\n+import org.apache.cocoon.sax.SAXPipelineComponent;\n+import org.apache.cocoon.sax.component.XMLGenerator;\n+import org.apache.cocoon.sax.component.XMLSerializer;\n+import org.apache.cocoon.sax.component.XSLTTransformer;\n+\n+public class WADLServlet extends HttpServlet {\n+\n+    private static final long serialVersionUID = -6737005675471095560L;\n+\n+    private static final Pattern SCHEMA_PATTERN = Pattern.compile(\"/schema_(.*)_(.*)\\\\.html\");\n+\n+    /**\n+     * Handles the HTTP <code>GET</code> method.\n+     *\n+     * @param request servlet request\n+     * @param response servlet response\n+     * @throws ServletException if a servlet-specific error occurs\n+     * @throws IOException if an I/O error occurs\n+     */\n+    @Override\n+    protected void doGet(final HttpServletRequest request, final HttpServletResponse response)\n+            throws ServletException, IOException {\n+\n+        String requestURI = request.getRequestURI().substring(\n+                request.getRequestURI().indexOf(request.getServletPath()) + request.getServletPath().length());\n+        Matcher schemaMatcher = SCHEMA_PATTERN.matcher(requestURI);\n+\n+        Pipeline<SAXPipelineComponent> pipeline = new CachingPipeline<SAXPipelineComponent>();\n+        final String wadlURL = request.getRequestURL().\n+                substring(0, request.getRequestURL().indexOf(\"/doc\")) + \"/?_wadl\";\n+        pipeline.addComponent(new XMLGenerator(new URL(wadlURL)));\n+        if (\"/\".equals(requestURI)) {\n+            XSLTTransformer xslt = new XSLTTransformer(getClass().getResource(\"/wadl2html/index.xsl\"));\n+\n+            Map<String, Object> parameters = new HashMap<>();\n+            parameters.put(\"contextPath\", request.getContextPath());\n+            xslt.setParameters(parameters);\n+\n+            pipeline.addComponent(xslt);\n+        } else if (schemaMatcher.matches()) {\n+            XSLTTransformer xslt = new XSLTTransformer(getClass().getResource(\"/wadl2html/schema.xsl\"));\n+\n+            Map<String, Object> parameters = new HashMap<>();\n+            parameters.put(\"contextPath\", request.getContextPath());\n+            parameters.put(\"schema-position\", schemaMatcher.group(1));\n+            parameters.put(\"schema-prefix\", schemaMatcher.group(2));\n+            xslt.setParameters(parameters);\n+\n+            pipeline.addComponent(xslt);\n+        } else {\n+            throw new ServerException(\"URL not supported: \" + request.getRequestURI());\n+        }\n+\n+        pipeline.addComponent(XMLSerializer.createHTML4Serializer());\n+        pipeline.setup(response.getOutputStream());\n+        try {\n+            pipeline.execute();\n+        } catch (Exception e) {\n+            throw new ServletException(e);\n+        }\n+    }\n+\n+}"},{"sha":"a320aee9bacbe08862493a3f4b0980076a9438b8","filename":"syncope620/server/rest-cxf/src/main/resources/META-INF/web-fragment.xml","status":"added","additions":89,"deletions":0,"changes":89,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fweb-fragment.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fweb-fragment.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fweb-fragment.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,89 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<web-fragment xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n+              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+              xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee \n+                                  http://xmlns.jcp.org/xml/ns/javaee/web-fragment_3_1.xsd\"\n+              id=\"${pom.artifactId}\" version=\"3.1\">\n+  \n+  <display-name>Apache Syncope ${syncope.version} Server</display-name>\n+\n+  <context-param>\n+    <param-name>contextConfigLocation</param-name>\n+    <param-value>classpath*:/*Context.xml</param-value>\n+  </context-param>\n+\n+  <listener>\n+    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n+  </listener>\n+  <listener>\n+    <listener-class>org.apache.syncope.server.rest.cxf.ThreadLocalCleanupListener</listener-class>\n+  </listener>\n+  \n+  <servlet>\n+    <servlet-name>CXFServlet</servlet-name>\n+    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>\n+    <load-on-startup>1</load-on-startup> \n+  </servlet>\n+  <servlet-mapping>\n+    <servlet-name>CXFServlet</servlet-name>\n+    <url-pattern>/rest/*</url-pattern>\n+  </servlet-mapping>\n+  <servlet>\n+    <servlet-name>WADLServlet</servlet-name>\n+    <servlet-class>org.apache.syncope.server.rest.cxf.WADLServlet</servlet-class>\n+    <load-on-startup>2</load-on-startup> \n+  </servlet>\n+  <servlet-mapping>\n+    <servlet-name>WADLServlet</servlet-name>\n+    <url-pattern>/rest/doc/*</url-pattern>\n+  </servlet-mapping>\n+\n+  <filter>\n+    <filter-name>encodingFilter</filter-name>\n+    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n+    <init-param>\n+      <param-name>encoding</param-name>\n+      <param-value>UTF-8</param-value>\n+    </init-param>\n+    <init-param>\n+      <param-name>forceEncoding</param-name>\n+      <param-value>true</param-value>\n+    </init-param>\n+  </filter>\n+  <filter>\n+    <filter-name>springSecurityFilterChain</filter-name>\n+    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\n+  </filter>\n+\n+  <filter-mapping>\n+    <filter-name>encodingFilter</filter-name>\n+    <url-pattern>/*</url-pattern>\n+  </filter-mapping>\n+  <filter-mapping>\n+    <filter-name>springSecurityFilterChain</filter-name>\n+    <url-pattern>/*</url-pattern>\n+  </filter-mapping>\n+\n+  <login-config>\n+    <auth-method>CLIENT-CERT</auth-method>\n+  </login-config>\n+\n+</web-fragment>"},{"sha":"ddb3e5c3903bdf89017a2b64f20dd35ca9cb3263","filename":"syncope620/server/rest-cxf/src/main/resources/restCXFContext.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FrestCXFContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FrestCXFContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2FrestCXFContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -85,11 +85,11 @@ under the License.\n     <property name=\"useJaxbContextForQnames\" value=\"true\"/>\n     <property name=\"ignoreMessageWriters\" value=\"true\"/>\n     <property name=\"addResourceAndMethodIds\" value=\"true\"/>\n-    <property name=\"javaDocPath\" value=\"/WEB-INF/lib/syncope-common-${syncope.version}-javadoc.jar\"/>\n+    <property name=\"javaDocPath\" value=\"/WEB-INF/lib/syncope-common-rest-api-${syncope.version}-javadoc.jar\"/>\n   </bean>\n   \n   <bean id=\"addETagFilter\" class=\"org.apache.syncope.server.rest.cxf.service.AddETagFilter\"/>\n-\n+  \n   <jaxrs:server id=\"restContainer\" address=\"/\" \n                 basePackages=\"org.apache.syncope.common.rest.api.service, org.apache.syncope.server.rest.cxf.service\" \n                 staticSubresourceResolution=\"true\">"},{"sha":"e238b991ee45175b9a2dea176ae2b45378607256","filename":"syncope620/server/rest-cxf/src/main/resources/wadl2html/index.xsl","status":"added","additions":484,"deletions":0,"changes":484,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Findex.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Findex.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Findex.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,484 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Licensed to the Apache Software Foundation (ASF) under one\n+  or more contributor license agreements.  See the NOTICE file\n+  distributed with this work for additional information\n+  regarding copyright ownership.  The ASF licenses this file\n+  to you under the Apache License, Version 2.0 (the\n+  \"License\"); you may not use this file except in compliance\n+  with the License.  You may obtain a copy of the License at\n+\n+   http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing,\n+  software distributed under the License is distributed on an\n+  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  KIND, either express or implied.  See the License for the\n+  specific language governing permissions and limitations\n+  under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" \n+                xmlns:xalan=\"http://xml.apache.org/xalan\"\n+                xmlns:wadl=\"http://wadl.dev.java.net/2009/02\"\n+                xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n+                exclude-result-prefixes=\"xalan wadl xs\"\n+                version=\"1.0\">\n+  \n+  <xsl:param name=\"contextPath\"/>\n+  \n+  <xsl:variable name=\"namespaces\">       \n+    <xsl:for-each select=\"/*/namespace::*\">\n+      <namespace prefix=\"{name()}\" url=\"{.}\"/>            \n+    </xsl:for-each>\n+  </xsl:variable>\n+\n+  <xsl:variable name=\"namespacePos\">       \n+    <xsl:for-each select=\"//xs:schema\">\n+      <namespace url=\"{@targetNamespace}\" position=\"{position()}\"/>\n+    </xsl:for-each>\n+  </xsl:variable>\n+\n+  <xsl:template match=\"/wadl:application\">  \n+    <html lang=\"en\">\n+      <head>\n+        <meta charset=\"utf-8\"/>\n+        <title>          \n+          <xsl:value-of select=\"wadl:doc/@title\"/>\n+        </title>\n+\n+        <link rel=\"stylesheet\" href=\"{$contextPath}/webjars/jquery-ui/${jquery-ui.version}/themes/base/minified/jquery-ui.min.css\"/>\n+        <style>\n+          body {\n+          font-family: \"Verdana,Arial,sans-serif\";\n+          font-size: 0.9em;\n+          }\n+\n+          table {\n+          font-family: \"Verdana,Arial,sans-serif\";\n+          font-size: 0.9em;\n+          border-width: 1px;\n+          border-color: #666666;\n+          border-collapse: collapse;\n+          }\n+          table th {\n+          border-width: 1px;\n+          padding: 8px;\n+          border-style: solid;\n+          border-color: #666666;\n+          background-color: #dedede;\n+          }\n+          td {\n+          border-width: 1px;\n+          padding: 8px;\n+          border-style: solid;\n+          border-color: #666666;\n+          background-color: #ffffff;\n+          vertical-align: top;\n+          }\n+\n+          .methods {\n+          padding: 5px;\n+          }\n+\n+          .representation-label {\n+          font-weight: bold;\n+          width: 80px;\n+          }\n+\n+          .ui-widget { font-size: 0.9em; }\n+          .ui-tabs-vertical { width: 60em; }\n+          .ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 15em; }\n+          .ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }\n+          .ui-tabs-vertical .ui-tabs-nav li a { display:block; }\n+          .ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }\n+          .ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}\n+        </style>\n+        \n+        <script src=\"{$contextPath}/webjars/jquery/${jquery.version}/jquery.min.js\">\n+        </script>\n+        <script src=\"{$contextPath}/webjars/jquery-ui/${jquery-ui.version}/ui/minified/jquery-ui.min.js\">          \n+        </script>\n+        <script>\n+          //<![CDATA[\n+          $(function() {\n+          //]]>\n+          <xsl:for-each select=\"wadl:resources/wadl:resource\">\n+            <xsl:sort select=\"@path\"/>\n+            <xsl:text>$( \"#accordion-</xsl:text>\n+            <xsl:value-of select=\"position()\"/>\n+            <xsl:text>\" ).accordion({\n+              collapsible: true,\n+              heightStyle: \"content\",\n+              active: false\n+              });\n+            </xsl:text>\n+            \n+            <xsl:variable name=\"parentResourcePath\" select=\"translate(@path, '/{}', '___')\"/>\n+            <xsl:call-template name=\"dialog-init\">\n+              <xsl:with-param name=\"resourcePath\" select=\"$parentResourcePath\"/>\n+            </xsl:call-template>\n+            <xsl:for-each select=\"wadl:resource\">\n+              <xsl:variable name=\"childResourcePath\" select=\"translate(@path, '/{}', '___')\"/>\n+              <xsl:call-template name=\"dialog-init\">\n+                <xsl:with-param name=\"resourcePath\" select=\"concat($parentResourcePath, $childResourcePath)\"/>\n+              </xsl:call-template>\n+            </xsl:for-each>\n+          </xsl:for-each>\n+          //<![CDATA[\n+          $( \"#tabs\" ).tabs().addClass( \"ui-tabs-vertical ui-helper-clearfix\" );\n+          $( \"#tabs li\" ).removeClass( \"ui-corner-top\" ).addClass( \"ui-corner-left\" );\n+          });\n+ \n+          /*\n+          * hoverIntent | Copyright 2011 Brian Cherne\n+          * http://cherne.net/brian/resources/jquery.hoverIntent.html\n+          * modified by the jQuery UI team\n+          */\n+          $.event.special.hoverintent = {\n+          setup: function() {\n+          $( this ).bind( \"mouseover\", jQuery.event.special.hoverintent.handler );\n+          },\n+          teardown: function() {\n+          $( this ).unbind( \"mouseover\", jQuery.event.special.hoverintent.handler );\n+          },\n+          handler: function( event ) {\n+          var currentX, currentY, timeout,\n+          args = arguments,\n+          target = $( event.target ),\n+          previousX = event.pageX,\n+          previousY = event.pageY;\n+ \n+          function track( event ) {\n+          currentX = event.pageX;\n+          currentY = event.pageY;\n+          };\n+ \n+          function clear() {\n+          target\n+          .unbind( \"mousemove\", track )\n+          .unbind( \"mouseout\", clear );\n+          clearTimeout( timeout );\n+          }\n+ \n+          function handler() {\n+          var prop,\n+          orig = event;\n+ \n+          if ( ( Math.abs( previousX - currentX ) +\n+          Math.abs( previousY - currentY ) ) < 7 ) {\n+          clear();\n+ \n+          event = $.Event( \"hoverintent\" );\n+          for ( prop in orig ) {\n+          if ( !( prop in event ) ) {\n+          event[ prop ] = orig[ prop ];\n+          }\n+          }\n+          // Prevent accessing the original event since the new event\n+          // is fired asynchronously and the old event is no longer\n+          // usable (#6028)\n+          delete event.originalEvent;\n+ \n+          target.trigger( event );\n+          } else {\n+          previousX = currentX;\n+          previousY = currentY;\n+          timeout = setTimeout( handler, 100 );\n+          }\n+          }\n+ \n+          timeout = setTimeout( handler, 100 );\n+          target.bind({\n+          mousemove: track,\n+          mouseout: clear\n+          });\n+          }\n+          };\n+          //]]>\n+        </script>\n+      </head>\n+      <body>\n+        <h1>\n+          <xsl:value-of select=\"wadl:doc/@title\"/>\n+        </h1>        \n+        \n+        <h3>Namespaces</h3>                                \n+        <table>\n+          <tr>\n+            <th>Prefix</th>\n+            <th>URI</th>\n+            <th>XSD</th>\n+          </tr>\n+          <xsl:apply-templates select=\"wadl:grammars/xs:schema\"/>\n+        </table>\n+                                                                                              \n+        <h3>REST resources</h3>                                \n+        <div id=\"tabs\">\n+          <ul>\n+            <xsl:for-each select=\"wadl:resources/wadl:resource\">\n+              <xsl:sort select=\"@path\"/>\n+              <li>\n+                <a href=\"#tabs-{position()}\">\n+                  <xsl:value-of select=\"@path\"/>\n+                </a>\n+              </li>\n+            </xsl:for-each>\n+          </ul>\n+          \n+          <xsl:apply-templates select=\"wadl:resources/wadl:resource\">\n+            <xsl:sort select=\"@path\"/>            \n+          </xsl:apply-templates>\n+        </div>\n+      </body>\n+    </html>       \n+  </xsl:template>\n+  \n+  <xsl:template name=\"dialog-init\">\n+    <xsl:param name=\"resourcePath\"/>\n+    \n+    <xsl:for-each select=\"wadl:method\">\n+      <xsl:text>$(function() {\n+        $( \"#dialog</xsl:text>\n+      <xsl:value-of select=\"$resourcePath\"/>_<xsl:value-of select=\"position()\"/>\n+      <xsl:text>\" ).dialog({\n+        autoOpen: false,\n+        modal: true,\n+        height: \"auto\",\n+        width: \"auto\",\n+        resizable: false\n+        });\n+ \n+        $( \"#opener</xsl:text>\n+      <xsl:value-of select=\"$resourcePath\"/>_<xsl:value-of select=\"position()\"/>\n+      <xsl:text>\" ).click(function() {\n+        $( \"#dialog</xsl:text>\n+      <xsl:value-of select=\"$resourcePath\"/>_<xsl:value-of select=\"position()\"/>\n+      <xsl:text>\" ).dialog( \"open\" );\n+        });\n+        });\n+      </xsl:text>\n+    </xsl:for-each>\n+  </xsl:template>\n+  \n+  <xsl:template match=\"xs:schema\">\n+    <xsl:variable name=\"targetNamespace\" select=\"@targetNamespace\"/>\n+\n+    <xsl:variable name=\"prefix\" \n+                  select=\"xalan:nodeset($namespaces)/namespace[@url = $targetNamespace]/@prefix\"/>\n+\n+    <tr>\n+      <td>\n+        <xsl:value-of select=\"$prefix\"/>\n+      </td>\n+      <td>\n+        <xsl:value-of select=\"@targetNamespace\"/>\n+      </td>\n+      <td>\n+        <a href=\"schema_{position()}_{$prefix}.html\" \n+           onClick=\"window.open('', 'schema', '', true).focus();\" target=\"schema\">\n+          <xsl:value-of select=\"$prefix\"/>.xsd</a>\n+      </td>\n+    </tr>\n+  </xsl:template>\n+    \n+  <xsl:template match=\"wadl:resource\">\n+    <div id=\"tabs-{position()}\">\n+      <h2>\n+        <xsl:value-of select=\"@path\"/>\n+      </h2>\n+      \n+      <xsl:if test=\"string-length(wadl:doc) &gt; 0\">\n+        <p>\n+          <xsl:value-of select=\"wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+        </p>\n+      </xsl:if>\n+            \n+      <xsl:call-template name=\"parameters\"/>\n+      \n+      <xsl:call-template name=\"methods\">\n+        <xsl:with-param name=\"resourcePath\" select=\"@path\"/>\n+      </xsl:call-template>\n+      \n+      <xsl:variable name=\"parentPath\" select=\"@path\"/>\n+      <div id=\"accordion-{position()}\">\n+        <xsl:for-each select=\"descendant::*[local-name() = 'resource']\">\n+          <xsl:sort select=\"@path\"/>\n+          <xsl:call-template name=\"subresource\">\n+            <xsl:with-param name=\"parentPath\" select=\"$parentPath\"/>\n+          </xsl:call-template>\n+        </xsl:for-each>\n+      </div>\n+    </div>\n+  </xsl:template>\n+ \n+  <xsl:template name=\"methods\">\n+    <xsl:param name=\"resourcePath\"/>\n+\n+    <xsl:variable name=\"escapedPath\" select=\"translate($resourcePath, '/{}', '___')\"/>\n+    <div class=\"methods\">\n+      <xsl:for-each select=\"wadl:method\">\n+        <button id=\"opener{$escapedPath}_{position()}\">\n+          <xsl:value-of select=\"@name\"/>\n+          <xsl:if test=\"string-length(@id) &gt; 0\">\n+            <br/>\n+            (<em>\n+              <xsl:value-of select=\"@id\"/>\n+            </em>)\n+          </xsl:if>\n+        </button>\n+        <div id=\"dialog{$escapedPath}_{position()}\" title=\"{@name} {$resourcePath}\">\n+          <xsl:apply-templates select=\".\"/>\n+        </div>\n+      </xsl:for-each>     \n+    </div>           \n+  </xsl:template>\n+  \n+  <xsl:template name=\"subresource\">\n+    <xsl:param name=\"parentPath\"/>\n+    \n+    <h3>\n+      <xsl:value-of select=\"@path\"/>\n+    </h3>\n+    \n+    <div>\n+      <xsl:if test=\"string-length(wadl:doc) &gt; 0\">\n+        <p>\n+          <xsl:value-of select=\"wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+        </p>\n+      </xsl:if>\n+\n+      <xsl:call-template name=\"parameters\"/>\n+\n+      <xsl:call-template name=\"methods\">\n+        <xsl:with-param name=\"resourcePath\" select=\"concat($parentPath, @path)\"/>\n+      </xsl:call-template>\n+    </div>\n+  </xsl:template>\n+ \n+  <xsl:template match=\"wadl:method\">\n+    <xsl:if test=\"string-length(wadl:doc) &gt; 0\">\n+      <p>\n+        <xsl:value-of select=\"wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+      </p>\n+    </xsl:if>\n+    \n+    <xsl:if test=\"count(wadl:request/@*) + count(wadl:request/*) &gt; 0\">\n+      <xsl:apply-templates select=\"wadl:request\"/>\n+    </xsl:if>\n+    <xsl:if test=\"count(wadl:response/@*) + count(wadl:response/*) &gt; 0\">\n+      <xsl:apply-templates select=\"wadl:response\"/>\n+    </xsl:if>\n+  </xsl:template>\n+  \n+  <xsl:template match=\"wadl:request|wadl:response\">\n+    <xsl:call-template name=\"parameters\"/>\n+    \n+    <h4>\n+      R<xsl:value-of select=\"substring-after(local-name(), 'r')\"/>\n+    </h4>\n+    \n+    <xsl:if test=\"string-length(wadl:doc) &gt; 0\">\n+      <p>\n+        <xsl:value-of select=\"wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+      </p>\n+    </xsl:if>\n+    \n+    <table>\n+      <xsl:if test=\"string-length(@status) &gt;0 \">\n+        <tr>\n+          <td class=\"representation-label\">Status</td>\n+          <td>\n+            <xsl:value-of select=\"@status\"/>\n+          </td>\n+        </tr>\n+      </xsl:if>\n+      <xsl:if test=\"count(wadl:representation) &gt; 0\">\n+        <tr>\n+          <td class=\"representation-label\">Content type</td>\n+          <td>\n+            <xsl:if test=\"count(wadl:representation/@element) &gt; 0\">\n+              <xsl:choose>\n+                <xsl:when test=\"starts-with(wadl:representation/@element, 'xs:')\">\n+                  <xsl:value-of select=\"wadl:representation/@element\"/>                  \n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <xsl:variable name=\"schema-prefix\" \n+                                select=\"substring-before(wadl:representation/@element, ':')\"/>\n+                  <xsl:variable name=\"nsURL\" \n+                                select=\"xalan:nodeset($namespaces)/namespace[@prefix = $schema-prefix]/@url\"/>\n+                  <xsl:variable name=\"schema-position\" \n+                                select=\"xalan:nodeset($namespacePos)/namespace[@url = $nsURL]/@position\"/>\n+                  \n+                  <a href=\"schema_{$schema-position}_{$schema-prefix}.html#{substring-after(wadl:representation/@element, ':')}\"\n+                     onClick=\"window.open('', 'schema', '', true).focus();\" target=\"schema\">\n+                    <xsl:value-of select=\"wadl:representation/@element\"/>\n+                  </a>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+            </xsl:if>\n+            <xsl:if test=\"count(wadl:representation/wadl:param) &gt; 0\">\n+              <xsl:value-of select=\"wadl:representation/wadl:param/@type\"/>\n+            </xsl:if>\n+            <xsl:if test=\"count(wadl:representation/wadl:doc) &gt; 0\">\n+              <br/>\n+              <xsl:value-of select=\"wadl:representation/wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+            </xsl:if>            \n+          </td>\n+        </tr>\n+        <tr>\n+          <td class=\"representation-label\">Media types</td>\n+          <td>\n+            <xsl:for-each select=\"wadl:representation\">\n+              <xsl:value-of select=\"@mediaType\"/>\n+              <br/>\n+            </xsl:for-each>\n+          </td>\n+        </tr>\n+      </xsl:if>\n+    </table>\n+  </xsl:template>\n+\n+  <xsl:template name=\"parameters\">\n+    <xsl:if test=\"count(wadl:param) &gt; 0\">\n+      <h5>Parameters</h5>\n+      <table>\n+        <tr>\n+          <th>Name</th>\n+          <th>Description</th>\n+          <th>Style</th>\n+          <th>Type</th>\n+          <th>Default</th>\n+        </tr>\n+        <xsl:for-each select=\"wadl:param\">\n+          <tr>\n+            <td>\n+              <xsl:value-of select=\"@name\"/>\n+            </td>\n+            <td>\n+              <xsl:value-of select=\"wadl:doc/text()\" disable-output-escaping=\"yes\"/>\n+            </td>\n+            <td>\n+              <xsl:value-of select=\"@style\"/>\n+            </td>\n+            <td>\n+              <xsl:value-of select=\"@type\"/>\n+              <xsl:if test=\"count(wadl:option) &gt; 0\">\n+                <ul>\n+                  <xsl:for-each select=\"wadl:option\">\n+                    <li>\n+                      <xsl:value-of select=\"@value\"/>\n+                    </li>\n+                  </xsl:for-each>\n+                </ul>\n+              </xsl:if>\n+            </td>\n+            <td>\n+              <xsl:value-of select=\"@default\"/>\n+            </td>\n+          </tr>\n+        </xsl:for-each>\n+      </table>\n+    </xsl:if>\n+  </xsl:template>\n+\n+</xsl:stylesheet>"},{"sha":"6551d096873a139fe3f02e9e3c75ff7e6743275c","filename":"syncope620/server/rest-cxf/src/main/resources/wadl2html/schema.xsl","status":"added","additions":148,"deletions":0,"changes":148,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Fschema.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Fschema.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Frest-cxf%2Fsrc%2Fmain%2Fresources%2Fwadl2html%2Fschema.xsl?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,148 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Licensed to the Apache Software Foundation (ASF) under one\n+  or more contributor license agreements.  See the NOTICE file\n+  distributed with this work for additional information\n+  regarding copyright ownership.  The ASF licenses this file\n+  to you under the Apache License, Version 2.0 (the\n+  \"License\"); you may not use this file except in compliance\n+  with the License.  You may obtain a copy of the License at\n+\n+   http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing,\n+  software distributed under the License is distributed on an\n+  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  KIND, either express or implied.  See the License for the\n+  specific language governing permissions and limitations\n+  under the License.\n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" \n+                xmlns:wadl=\"http://wadl.dev.java.net/2009/02\"\n+                xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n+                exclude-result-prefixes=\"wadl xs\"\n+                version=\"1.0\">\n+  \n+  <xsl:strip-space elements=\"*\"/>\n+\n+  <xsl:param name=\"contextPath\"/>\n+  <xsl:param name=\"schema-position\"/>  \n+  <xsl:param name=\"schema-prefix\"/>  \n+  \n+  <xsl:template match=\"/wadl:application\">  \n+    <html lang=\"en\">\n+      <head>\n+        <meta charset=\"utf-8\"/>\n+        <title>          \n+          <xsl:value-of select=\"wadl:doc/@title\"/>\n+        </title>\n+                  \n+        <link rel=\"stylesheet\" href=\"{$contextPath}/webjars/highlightjs/${highlightjs.version}/styles/default.min.css\"/>\n+        \n+        <script src=\"{$contextPath}/webjars/highlightjs/${highlightjs.version}/highlight.min.js\">           \n+        </script>\n+        <script>\n+          hljs.initHighlightingOnLoad();\n+        </script>\n+      </head>\n+      <body>        \n+        <pre>\n+          <code class=\"xml\">\n+            <xsl:apply-templates select=\"//xs:schema[position() = $schema-position]\" mode=\"verb\"/>\n+          </code>\n+        </pre>\n+      </body>\n+    </html>\n+  </xsl:template>\n+\n+  <xsl:template match=\"*|@*\" mode=\"verb\">\n+    <xsl:variable name=\"node-type\">\n+      <xsl:call-template name=\"node-type\"/>\n+    </xsl:variable>\n+    <xsl:choose>\n+      <xsl:when test=\"$node-type='element'\">\n+        <xsl:for-each select=\"ancestor::node()\">\n+          <xsl:if test=\"position() &gt; 3\">\n+            <xsl:text>&#160;&#160;</xsl:text>\n+          </xsl:if>\n+        </xsl:for-each>\n+\n+        <xsl:choose>\n+          <xsl:when test=\"name() = 'xs:complexType' or name() = 'xs:simpleType'\">\n+            <a name=\"int_{@name}\">\n+              <xsl:text>&lt;</xsl:text>\n+              <xsl:value-of select=\"name()\"/>\n+            </a>          \n+          </xsl:when>\n+          <xsl:when test=\"name() = 'xs:element'\">\n+            <a name=\"{@name}\">\n+              <xsl:text>&lt;</xsl:text>\n+              <xsl:value-of select=\"name()\"/>\n+            </a>          \n+          </xsl:when>\n+          <xsl:otherwise>\n+            <xsl:text>&lt;</xsl:text>\n+            <xsl:value-of select=\"name()\"/>\n+          </xsl:otherwise>\n+        </xsl:choose>\n+        \n+        <xsl:apply-templates select=\"@*\" mode=\"verb\"/>        \n+\n+        <xsl:choose>\n+          <xsl:when test=\"count(descendant::node()) = 0\">\n+            <xsl:text>/&gt;&#10;</xsl:text>\n+          </xsl:when>\n+          <xsl:otherwise>\n+            <xsl:text>&gt;&#10;</xsl:text>\n+            \n+            <xsl:apply-templates mode=\"verb\"/>\n+                \n+            <xsl:for-each select=\"ancestor::node()\">\n+              <xsl:if test=\"position() &gt; 3\">\n+                <xsl:text>&#160;&#160;</xsl:text>\n+              </xsl:if>\n+            </xsl:for-each>\n+\n+            <xsl:text>&lt;/</xsl:text>\n+            <xsl:value-of select=\"name()\"/>\n+            <xsl:text>&gt;&#10;</xsl:text>\n+          </xsl:otherwise>\n+        </xsl:choose>                        \n+      </xsl:when>\n+      <xsl:when test=\"$node-type='text'\">\n+        <xsl:value-of select=\"self::text()\"/>\n+      </xsl:when>\n+      <xsl:when test=\"$node-type='attribute'\">\n+        <xsl:text> </xsl:text>\n+        <xsl:value-of select=\"name()\"/>\n+        <xsl:text>=\"</xsl:text>\n+        <xsl:choose>\n+          <xsl:when test=\"contains(., ':') and not(starts-with(., 'xs:'))\">\n+            <a>\n+              <xsl:variable name=\"current\" select=\".\"/>\n+              <xsl:attribute name=\"href\">\n+                <xsl:choose>\n+                  <xsl:when test=\"name() = 'ref'\">#<xsl:value-of select=\"substring-after($current, ':')\"/></xsl:when>\n+                  <xsl:otherwise>#int_<xsl:value-of select=\"substring-after($current, ':')\"/></xsl:otherwise>\n+                </xsl:choose>                \n+              </xsl:attribute>\n+              <xsl:value-of select=\"$current\"/>                          \n+            </a>\n+          </xsl:when>\n+          <xsl:otherwise>\n+            <xsl:value-of select=\".\"/>            \n+          </xsl:otherwise>\n+        </xsl:choose>\n+        <xsl:text>\"</xsl:text>\n+      </xsl:when>\n+    </xsl:choose>\n+  </xsl:template>\n+\n+  <xsl:template name=\"node-type\">\n+    <xsl:param name=\"node\" select=\".\"/>\n+    <xsl:apply-templates mode=\"nodetype\" select=\"$node\"/>\n+  </xsl:template>\n+  <xsl:template mode=\"nodetype\" match=\"*\">element</xsl:template>\n+  <xsl:template mode=\"nodetype\" match=\"@*\">attribute</xsl:template>\n+  <xsl:template mode=\"nodetype\" match=\"text()\">text</xsl:template>\n+</xsl:stylesheet>"},{"sha":"4108c858d59f70d18e85b78d985cc19e582d66d5","filename":"syncope620/server/workflow-api/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-api%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-api%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fworkflow-api%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,7 +30,7 @@ under the License.\n   <name>Apache Syncope Server Workflow API</name>\n   <description>Apache Syncope Server Workflow API</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-workflow-api</artifactId>\n+  <artifactId>syncope-server-workflow-api</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n@@ -40,7 +40,7 @@ under the License.\n   <dependencies>\n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-provisioning-api</artifactId>\n+      <artifactId>syncope-server-provisioning-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n   </dependencies>"},{"sha":"541a5418d0299c3069020abb54e140dd40d16e7c","filename":"syncope620/server/workflow-java/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fworkflow-java%2Fpom.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -30,7 +30,7 @@ under the License.\n   <name>Apache Syncope Server Workflow Java</name>\n   <description>Apache Syncope Server Workflow Java</description>\n   <groupId>org.apache.syncope.server</groupId>\n-  <artifactId>syncope-workflow-java</artifactId>\n+  <artifactId>syncope-server-workflow-java</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n@@ -49,7 +49,7 @@ under the License.\n \n     <dependency>\n       <groupId>org.apache.syncope.server</groupId>\n-      <artifactId>syncope-workflow-api</artifactId>\n+      <artifactId>syncope-server-workflow-api</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n   </dependencies>"},{"sha":"a72e7663ee33973afec20db14126f78a7b80626a","filename":"syncope620/server/workflow-java/src/main/resources/workflow.properties","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,18 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+uwfAdapter=org.apache.syncope.server.workflow.java.DefaultUserWorkflowAdapter\n+rwfAdapter=org.apache.syncope.server.workflow.java.DefaultRoleWorkflowAdapter\n\\ No newline at end of file"},{"sha":"9323891871ae146462ab673eb8b1d3392d510b27","filename":"syncope620/server/workflow-java/src/main/resources/workflowContext.xml","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2FworkflowContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b015c443b57c01349b61bc490594626451e5b364/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2FworkflowContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2FworkflowContext.xml?ref=b015c443b57c01349b61bc490594626451e5b364","patch":"@@ -0,0 +1,28 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans   \n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+  <bean class=\"${uwfAdapter}\"/>\n+  <bean class=\"${rwfAdapter}\"/>\n+    \n+</beans>"}]}