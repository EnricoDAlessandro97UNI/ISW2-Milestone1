{"sha":"3514e04b4fb7908885a20e8ed713802edfeb4006","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjM1MTRlMDRiNGZiNzkwODg4NWEyMGU4ZWQ3MTM4MDJlZGZlYjQwMDY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@users.noreply.github.com","date":"2021-03-16T14:48:53Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-03-16T14:48:53Z"},"message":"Splitting wa-reference test classes into separate runs on Travis (#246)","tree":{"sha":"7fb66dd3c679419371a3fe9a29bb1251fca253cd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7fb66dd3c679419371a3fe9a29bb1251fca253cd"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3514e04b4fb7908885a20e8ed713802edfeb4006","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgUMVVCRBK7hj4Ov3rIwAAdHIIADoTB63XtXBu/ByN936I7Toy\ntkKcJBe7z1dqjuBlNlHHk/FxC7yc6xWD2C//SCd7kojiDxPgEHjl1AXR1A12iPIE\njqeakQiTE0gkNfXonhshFIpw7J6TJ1dRRXPBjcegPslfCov0qdSiuBTj2bgLeACH\nSmgrSBCoFjvezfycZ3kTDF1NZi3CXiofbQ5Y5OzNlw2UNzjuBVUp4zDDNQmaCjpX\n1oS9M2qciHsDItesGjULCHB++sfVXxvmO2kF3N9/QgQDSFk8VCpDa7XwVbIEh/+0\nRGMgmSocdw7JHSxtiZTWbX8Nlxe+eaVA1FPvmmtU2yQFuSAYKb8bnxitutueoSU=\n=lSbN\n-----END PGP SIGNATURE-----\n","payload":"tree 7fb66dd3c679419371a3fe9a29bb1251fca253cd\nparent a1c306fb9b472e9ee40a0bb77d974b2c7608d778\nauthor Francesco Chicchiriccò <ilgrosso@users.noreply.github.com> 1615906133 +0100\ncommitter GitHub <noreply@github.com> 1615906133 +0100\n\nSplitting wa-reference test classes into separate runs on Travis (#246)\n\n"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3514e04b4fb7908885a20e8ed713802edfeb4006","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3514e04b4fb7908885a20e8ed713802edfeb4006","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3514e04b4fb7908885a20e8ed713802edfeb4006/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"a1c306fb9b472e9ee40a0bb77d974b2c7608d778","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a1c306fb9b472e9ee40a0bb77d974b2c7608d778","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a1c306fb9b472e9ee40a0bb77d974b2c7608d778"}],"stats":{"total":46,"additions":30,"deletions":16},"files":[{"sha":"34f1f4226ef95e2bc06beea22f6ebd8fc0d1d441","filename":".travis.yml","status":"modified","additions":26,"deletions":15,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3514e04b4fb7908885a20e8ed713802edfeb4006/.travis.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3514e04b4fb7908885a20e8ed713802edfeb4006/.travis.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/.travis.yml?ref=3514e04b4fb7908885a20e8ed713802edfeb4006","patch":"@@ -29,7 +29,6 @@ git:\n env:\n   global:\n   - MAVEN_OPTS=\"-Xmx4096M -Xss128M -XX:+TieredCompilation -XX:TieredStopAtLevel=1 -noverify\"\n-  - DBMS=H2\n   - jaxrsContentType=application/json\n   - TestCommand=\"mvn -U -T 1C clean test -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Dsass.skip=true\"\n before_install:\n@@ -78,42 +77,54 @@ jobs:\n       script: mvn -f core/persistence-jpa-json/pom.xml -P mysql -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Dsass.skip=true\n       ######################################################\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / H2 / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / H2 / JSON\"\n       script: mvn -f fit/core-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / H2 / XML Content-Type\"\n+      name: \"Integration Tests: Tomcat / H2 / XML\"\n       script: mvn -f fit/core-reference/pom.xml verify -Djaxrs.content.type=application/xml -Dit.test=org.apache.syncope.fit.core.*ITCase -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / H2 / YAML Content-Type\"\n+      name: \"Integration Tests: Tomcat / H2 / YAML\"\n       script: mvn -f fit/core-reference/pom.xml verify -Djaxrs.content.type=application/yaml -Dit.test=org.apache.syncope.fit.core.*ITCase -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Wildfly / H2 / JSON Content-Type\"\n+      name: \"Integration Tests: Wildfly / H2 / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P wildfly-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Payara / H2 / JSON Content-Type\"\n+      name: \"Integration Tests: Payara / H2 / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P payara-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / PostgreSQL / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / PostgreSQL / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P postgres-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / PostgreSQL (JSONB) / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / PostgreSQL (JSONB) / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P pgjsonb-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / MySQL / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / MySQL / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P mysql-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / MySQL (JSON) / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / MySQL (JSON) / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P myjson-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / MariaDB / JSON Content-Type\"\n+      name: \"Integration Tests: Tomcat / MariaDB / JSON\"\n       script: mvn -f fit/core-reference/pom.xml -P mariadb-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / H2 / JSON Content-Type + Elasticsearch\"\n+      name: \"Integration Tests: Tomcat / H2 / JSON + Elasticsearch\"\n       script: mvn -f fit/core-reference/pom.xml -P elasticsearch-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: Tomcat / H2 / JSON Content-Type + Zookeeper\"\n+      name: \"Integration Tests: Tomcat / H2 / JSON + Zookeeper\"\n       script: mvn -f fit/core-reference/pom.xml -P zookeeper-it -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true\n     - stage: fit\n-      name: \"Integration Tests: SRA and WA\"\n-      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true \"-Dit.test=!*SAML*\"\n+      name: \"WA: SRA Integration Tests: CAS client\"\n+      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true -Dit.test=org.apache.syncope.fit.sra.CASSRAITCase\n+    - stage: fit\n+      name: \"WA: SRA Integration Tests: OAuth 2.0\"\n+      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true -Dit.test=org.apache.syncope.fit.sra.OAUTH2SRAITCase\n+    - stage: fit\n+      name: \"WA: SRA Integration Tests:OIDC 1.0\"\n+      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true -Dit.test=org.apache.syncope.fit.sra.OIDCSRAITCase\n+    - stage: fit\n+      name: \"WA: SRA Integration Tests:  SAML 2.0\"\n+      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true -Dit.test=org.apache.syncope.fit.sra.SAML2SRAITCase\n+    - stage: fit\n+      name: \"WA: SSO Integration Tests: SAML2SP4UI / OIDC4UI\"\n+      script: mvn -f fit/wa-reference/pom.xml verify -Dinvoker.streamLogs=true -Dmodernizer.skip=true -Dianal.skip=true -Drat.skip=true -Dcheckstyle.skip=true -Djacoco.skip=true -Dit.test=org.apache.syncope.fit.ui.OIDC4UIITCase\n     #####################################################"},{"sha":"af95548e5431531cfec01a0cf0b5c36eadad6370","filename":"ext/saml2sp4ui/logic/src/main/java/org/apache/syncope/core/logic/saml2/SAML2ClientCache.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3514e04b4fb7908885a20e8ed713802edfeb4006/ext%2Fsaml2sp4ui%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fsaml2%2FSAML2ClientCache.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3514e04b4fb7908885a20e8ed713802edfeb4006/ext%2Fsaml2sp4ui%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fsaml2%2FSAML2ClientCache.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp4ui%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fsaml2%2FSAML2ClientCache.java?ref=3514e04b4fb7908885a20e8ed713802edfeb4006","patch":"@@ -27,6 +27,7 @@\n import java.util.Collections;\n import java.util.List;\n import java.util.Optional;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.cxf.helpers.IOUtils;\n import org.apache.syncope.common.lib.to.ItemTO;\n import org.apache.syncope.common.lib.to.SAML2SP4UIIdPTO;\n@@ -63,8 +64,10 @@ public class SAML2ClientCache {\n     }\n \n     public static Optional<String> getSPMetadataPath(final String spEntityID) {\n+        String entityIDPath = StringUtils.replaceChars(\n+                StringUtils.removeStart(StringUtils.removeStart(spEntityID, \"https://\"), \"http://\"), \":/\", \"__\");\n         return Optional.ofNullable(METADATA_PATH).\n-                map(path -> Optional.of(path.resolve(spEntityID).toAbsolutePath().toString())).\n+                map(path -> Optional.of(path.resolve(entityIDPath).toAbsolutePath().toString())).\n                 orElse(Optional.empty());\n     }\n "}]}