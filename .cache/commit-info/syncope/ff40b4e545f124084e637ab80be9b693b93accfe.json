{"sha":"ff40b4e545f124084e637ab80be9b693b93accfe","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZmNDBiNGU1NDVmMTI0MDg0ZTYzN2FiODBiZTliNjkzYjkzYWNjZmU=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-10T14:54:18Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-10T14:54:18Z"},"message":"Build process should now work + role modeling in core\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246080 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a5ef98be3efb03bcd00d895782e06e8302e73d73","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a5ef98be3efb03bcd00d895782e06e8302e73d73"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ff40b4e545f124084e637ab80be9b693b93accfe","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ff40b4e545f124084e637ab80be9b693b93accfe","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ff40b4e545f124084e637ab80be9b693b93accfe","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ff40b4e545f124084e637ab80be9b693b93accfe/comments","author":null,"committer":null,"parents":[{"sha":"46537ce373705b5e75ae9efb9848053240718d13","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/46537ce373705b5e75ae9efb9848053240718d13","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/46537ce373705b5e75ae9efb9848053240718d13"}],"stats":{"total":643,"additions":540,"deletions":103},"files":[{"sha":"904d8a9e2399879ed9e6dc2d4d6fdb90af553a50","filename":"core/pom.xml","status":"modified","additions":43,"deletions":11,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -32,7 +32,7 @@\n \n     <properties>\n         <jetty.port>8080</jetty.port>\n-        \n+\n         <logfile>/tmp/syncope-core.log</logfile>\n         <logfile.persistence>/tmp/syncope-core-persistence.log</logfile.persistence>\n         <logfile.rest>/tmp/syncope-core-rest.log</logfile.rest>\n@@ -129,20 +129,12 @@\n         <dependency>\n             <groupId>org.syncope.core.identityconnectors</groupId>\n             <artifactId>framework</artifactId>\n-            <version>${framework.version}</version>\n+            <version>${parent.version}</version>\n         </dependency>\n-\n         <dependency>\n             <groupId>org.syncope.core.identityconnectors</groupId>\n             <artifactId>framework-internal</artifactId>\n-            <version>${framework-internal.version}</version>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.syncope.core.identityconnectors</groupId>\n-            <artifactId>test-common</artifactId>\n-            <version>${test-common.version}</version>\n-            <scope>test</scope>\n+            <version>${parent.version}</version>\n         </dependency>\n \n         <!-- TEST -->\n@@ -171,13 +163,53 @@\n             <artifactId>jetty</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.syncope.core.identityconnectors</groupId>\n+            <artifactId>test-common</artifactId>\n+            <version>${parent.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n         <!-- /TEST -->\n     </dependencies>\n \n     <build>\n         <finalName>${parent.artifactId}</finalName>\n \n         <plugins>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>hibernate3-maven-plugin</artifactId>\n+                <version>2.2</version>\n+                <configuration>\n+                    <components>\n+                        <component>\n+                            <name>hbm2ddl</name>\n+                            <implementation>jpaconfiguration</implementation>\n+                        </component>\n+                    </components>\n+                    <componentProperties>\n+                        <jdk5>true</jdk5>\n+                        <propertyfile>src/test/resources/org/syncope/core/persistence/db.properties</propertyfile>\n+                        <skip>${maven.test.skip}</skip>\n+                        <format>true</format>\n+                    </componentProperties>\n+                </configuration>\n+                <executions>\n+                    <execution>\n+                        <phase>process-test-resources</phase>\n+                        <goals>\n+                            <goal>hbm2ddl</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>hsqldb</groupId>\n+                        <artifactId>hsqldb</artifactId>\n+                        <version>1.8.0.7</version>\n+                    </dependency>\n+                </dependencies>\n+            </plugin>\n             <plugin>\n                 <groupId>org.codehaus.mojo</groupId>\n                 <artifactId>failsafe-maven-plugin</artifactId>"},{"sha":"d8be0e666a36801a0a7fa935f936d01ab79eee04","filename":"core/src/main/java/org/syncope/core/persistence/beans/Attribute.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -39,8 +39,7 @@ public class Attribute implements Serializable {\n     private Long id;\n     @ManyToOne(fetch = FetchType.EAGER)\n     private AttributeSchema schema;\n-    @OneToMany(cascade = CascadeType.ALL,\n-    fetch = FetchType.EAGER)\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n     private Set<AttributeValue> values;\n \n     protected Attribute() {"},{"sha":"3e59b720fa3d03e93bc3f329aae1541356a1aca2","filename":"core/src/main/java/org/syncope/core/persistence/beans/DerivedAttribute.java","status":"modified","additions":3,"deletions":19,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FDerivedAttribute.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FDerivedAttribute.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FDerivedAttribute.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -17,13 +17,15 @@\n import java.io.Serializable;\n import java.text.DecimalFormat;\n import java.text.SimpleDateFormat;\n+import java.util.HashSet;\n import java.util.Set;\n import javax.persistence.Entity;\n import javax.persistence.FetchType;\n import javax.persistence.GeneratedValue;\n import javax.persistence.GenerationType;\n import javax.persistence.Id;\n import javax.persistence.ManyToOne;\n+import javax.persistence.OneToMany;\n import org.apache.commons.jexl2.Expression;\n import org.apache.commons.jexl2.JexlContext;\n import org.apache.commons.jexl2.JexlEngine;\n@@ -45,21 +47,18 @@ public class DerivedAttribute implements Serializable {\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     protected Long id;\n-    @ManyToOne\n-    private SyncopeUser owner;\n     @ManyToOne(fetch = FetchType.EAGER)\n     private DerivedAttributeSchema schema;\n \n     /**\n      * @see http://commons.apache.org/jexl/reference/index.html\n      * @return\n      */\n-    public String getValue() {\n+    public String getValue(Set<Attribute> attributes) {\n         Expression jexlExpression = jexlEngine.createExpression(\n                 schema.getExpression());\n         JexlContext jexlContext = new MapContext();\n \n-        Set<Attribute> attributes = owner.getAttributes();\n         Set<AttributeValue> attributeValues = null;\n         String expressionValue = null;\n         AttributeValue attributeValue = null;\n@@ -110,14 +109,6 @@ public void setId(Long id) {\n         this.id = id;\n     }\n \n-    public SyncopeUser getOwner() {\n-        return owner;\n-    }\n-\n-    public void setOwner(SyncopeUser owner) {\n-        this.owner = owner;\n-    }\n-\n     public DerivedAttributeSchema getSchema() {\n         return schema;\n     }\n@@ -140,11 +131,6 @@ public boolean equals(Object obj) {\n \n             return false;\n         }\n-        if (this.owner != other.owner\n-                && (this.owner == null || !this.owner.equals(other.owner))) {\n-\n-            return false;\n-        }\n         if (this.schema != other.schema\n                 && (this.schema == null\n                 || !this.schema.equals(other.schema))) {\n@@ -159,7 +145,6 @@ public boolean equals(Object obj) {\n     public int hashCode() {\n         int hash = 7;\n         hash = 59 * hash + (this.id != null ? this.id.hashCode() : 0);\n-        hash = 59 * hash + (this.owner != null ? this.owner.hashCode() : 0);\n         hash = 59 * hash + (this.schema != null\n                 ? this.schema.hashCode() : 0);\n \n@@ -170,7 +155,6 @@ public int hashCode() {\n     public String toString() {\n         return \"(\"\n                 + \"id=\" + getId() + \",\"\n-                + \"owner=\" + getOwner().getId() + \",\"\n                 + \"schema=\" + getSchema()\n                 + \")\";\n     }"},{"sha":"97a99b215f549295a31c09ae934ff23aca66a84a","filename":"core/src/main/java/org/syncope/core/persistence/beans/SyncopeRole.java","status":"added","additions":101,"deletions":0,"changes":101,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRole.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRole.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRole.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -0,0 +1,101 @@\n+/*\n+ *  Copyright 2010 ilgrosso.\n+ * \n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.beans;\n+\n+import java.io.Serializable;\n+import java.util.HashSet;\n+import java.util.Set;\n+import javax.persistence.CascadeType;\n+import javax.persistence.EmbeddedId;\n+import javax.persistence.Entity;\n+import javax.persistence.FetchType;\n+import javax.persistence.OneToMany;\n+\n+@Entity\n+public class SyncopeRole implements Serializable {\n+\n+    @EmbeddedId\n+    private SyncopeRolePK syncopeUserPK;\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n+    private Set<Attribute> attributes;\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n+    private Set<DerivedAttribute> derivedAttributes;\n+\n+    public SyncopeRole() {\n+        attributes = new HashSet<Attribute>();\n+        derivedAttributes = new HashSet<DerivedAttribute>();\n+    }\n+\n+    public Set<Attribute> getAttributes() {\n+        return attributes;\n+    }\n+\n+    public void setAttributes(Set<Attribute> attributes) {\n+        this.attributes = attributes;\n+    }\n+\n+    public Set<DerivedAttribute> getDerivedAttributes() {\n+        return derivedAttributes;\n+    }\n+\n+    public void setDerivedAttributes(Set<DerivedAttribute> derivedAttributes) {\n+        this.derivedAttributes = derivedAttributes;\n+    }\n+\n+    public SyncopeRolePK getSyncopeRolePK() {\n+        return syncopeUserPK;\n+    }\n+\n+    public void setSyncopeRolePK(SyncopeRolePK syncopeRolePK) {\n+        this.syncopeUserPK = syncopeRolePK;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (obj == null) {\n+            return false;\n+        }\n+        if (getClass() != obj.getClass()) {\n+            return false;\n+        }\n+        final SyncopeRole other = (SyncopeRole) obj;\n+        if (this.syncopeUserPK != other.syncopeUserPK\n+                && (this.syncopeUserPK == null\n+                || !this.syncopeUserPK.equals(other.syncopeUserPK))) {\n+\n+            return false;\n+        }\n+        return true;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        int hash = 7;\n+        hash = 41 * hash + (this.syncopeUserPK != null\n+                ? this.syncopeUserPK.hashCode() : 0);\n+        return hash;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\"\n+                + \"syncopeUserPK=\" + syncopeUserPK + \",\"\n+                + \"attributes=\" + attributes + \",\"\n+                + \"derivedAttributes=\" + derivedAttributes\n+                + \")\";\n+    }\n+}"},{"sha":"709c537b0491fc9de30595372007ce979c873fc8","filename":"core/src/main/java/org/syncope/core/persistence/beans/SyncopeRolePK.java","status":"added","additions":101,"deletions":0,"changes":101,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRolePK.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRolePK.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeRolePK.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -0,0 +1,101 @@\n+/*\n+ *  Copyright 2010 ilgrosso.\n+ * \n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.beans;\n+\n+import java.io.Serializable;\n+import javax.persistence.Embeddable;\n+\n+@Embeddable\n+public class SyncopeRolePK implements Serializable {\n+\n+    final public static String ROOT_ROLE = \"/\";\n+    private String name;\n+    private String parent;\n+\n+    public SyncopeRolePK() {\n+    }\n+\n+    public SyncopeRolePK(String name, String parent)\n+            throws IllegalArgumentException {\n+\n+        setName(name);\n+        setParent(parent);\n+    }\n+\n+    public String getName() {\n+        return name;\n+    }\n+\n+    public void setName(String name) throws IllegalArgumentException {\n+        if (ROOT_ROLE.equals(name)) {\n+            throw new IllegalArgumentException(\n+                    ROOT_ROLE + \" is a reserved role name\");\n+        }\n+\n+        this.name = name;\n+    }\n+\n+    public String getParent() {\n+        return parent;\n+    }\n+\n+    public void setParent(String parent) {\n+        if (parent == null || parent.length() == 0) {\n+            this.parent = ROOT_ROLE;\n+        } else {\n+            this.parent = parent;\n+        }\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (obj == null) {\n+            return false;\n+        }\n+        if (getClass() != obj.getClass()) {\n+            return false;\n+        }\n+        final SyncopeRolePK other = (SyncopeRolePK) obj;\n+        if (this.parent != other.parent\n+                && (this.parent == null || !this.parent.equals(other.parent))) {\n+\n+            return false;\n+        }\n+        if ((this.name == null)\n+                ? (other.name != null) : !this.name.equals(other.name)) {\n+\n+            return false;\n+        }\n+        return true;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        int hash = 7;\n+        hash = 89 * hash + (this.parent != null ? this.parent.hashCode() : 0);\n+        hash = 89 * hash + (this.name != null ? this.name.hashCode() : 0);\n+        return hash;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"(\"\n+                + \"name=\" + name + \",\"\n+                + \"parent=\" + parent\n+                + \")\";\n+    }\n+}"},{"sha":"9c699d5398ec4e3c5006e34daa2bd95011c3bad6","filename":"core/src/main/java/org/syncope/core/persistence/beans/SyncopeUser.java","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -33,11 +33,9 @@ public class SyncopeUser implements Serializable {\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     private Long id;\n-    @OneToMany(cascade = CascadeType.ALL,\n-    fetch = FetchType.EAGER)\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n     private Set<Attribute> attributes;\n-    @OneToMany(cascade = CascadeType.ALL,\n-    fetch = FetchType.EAGER, mappedBy = \"owner\")\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n     private Set<DerivedAttribute> derivedAttributes;\n \n     public SyncopeUser() {\n@@ -116,7 +114,7 @@ public int hashCode() {\n     public String toString() {\n         return \"(\"\n                 + \"id=\" + id + \",\"\n-                + \"attributes=\" + attributes\n+                + \"attributes=\" + attributes + \",\"\n                 + \"derivedAttributes=\" + derivedAttributes\n                 + \")\";\n     }"},{"sha":"55378b7ef99e35c2df2363d22196a106777dadad","filename":"core/src/main/java/org/syncope/core/persistence/dao/SyncopeRoleDAO.java","status":"added","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FSyncopeRoleDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FSyncopeRoleDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FSyncopeRoleDAO.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -0,0 +1,34 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.dao;\n+\n+import java.util.List;\n+import org.syncope.core.persistence.beans.SyncopeRole;\n+import org.syncope.core.persistence.beans.SyncopeRolePK;\n+\n+public interface SyncopeRoleDAO extends DAO {\n+\n+    SyncopeRole find(String name, String parent);\n+\n+    SyncopeRole find(SyncopeRolePK syncopeRolePK);\n+\n+    List<SyncopeRole> findAll();\n+\n+    SyncopeRole save(SyncopeRole syncopeRole);\n+\n+    void delete(String name, String parent);\n+\n+    void delete(SyncopeRolePK syncopeRolePK);\n+}"},{"sha":"16f48bb7693aff28c6071f0ab6b7b6235812ca80","filename":"core/src/main/java/org/syncope/core/persistence/dao/impl/SyncopeRoleDAOImpl.java","status":"added","additions":63,"deletions":0,"changes":63,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FSyncopeRoleDAOImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FSyncopeRoleDAOImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FSyncopeRoleDAOImpl.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -0,0 +1,63 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.dao.impl;\n+\n+import java.util.List;\n+import javax.persistence.Query;\n+import org.springframework.stereotype.Repository;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.syncope.core.persistence.beans.SyncopeRole;\n+import org.syncope.core.persistence.beans.SyncopeRolePK;\n+import org.syncope.core.persistence.dao.SyncopeRoleDAO;\n+\n+@Repository\n+public class SyncopeRoleDAOImpl extends AbstractDAOImpl\n+        implements SyncopeRoleDAO {\n+\n+    @Override\n+    public SyncopeRole find(String name, String parent) {\n+        return find(new SyncopeRolePK(name, parent));\n+    }\n+\n+    @Override\n+    public SyncopeRole find(SyncopeRolePK syncopeRolePK) {\n+        return entityManager.find(SyncopeRole.class, syncopeRolePK);\n+    }\n+\n+    @Override\n+    public List<SyncopeRole> findAll() {\n+        Query query = entityManager.createQuery(\"SELECT e FROM SyncopeRole e\");\n+        return query.getResultList();\n+    }\n+\n+    @Override\n+    public SyncopeRole save(SyncopeRole syncopeRole) {\n+        SyncopeRole result = entityManager.merge(syncopeRole);\n+        entityManager.flush();\n+        return result;\n+    }\n+\n+    @Override\n+    @Transactional\n+    public void delete(String name, String parent) {\n+        delete(new SyncopeRolePK(name, parent));\n+    }\n+\n+    @Override\n+    @Transactional\n+    public void delete(SyncopeRolePK syncopeRolePK) {\n+        entityManager.remove(find(syncopeRolePK));\n+    }\n+}"},{"sha":"bf374fc605222bbb0d06514a55718ebb6fb6c956","filename":"core/src/main/resources/log4j.xml","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2Flog4j.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2Flog4j.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Flog4j.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -10,7 +10,7 @@\n             <param name=\"ConversionPattern\" value=\"%-5p %d %C.%M:%L %m%n\"/>\n         </layout>\n     </appender>\n-    \n+\n     <appender name=\"persistence\" class=\"org.apache.log4j.RollingFileAppender\">\n         <param name=\"File\" value=\"${logfile.persistence}\"/>\n         <param name=\"Append\" value=\"true\"/>\n@@ -81,6 +81,11 @@\n         <appender-ref ref=\"persistence\"/>\n     </logger>\n \n+    <logger name=\"org.dbunit\" additivity=\"false\">\n+        <level value=\"INFO\"/>\n+        <appender-ref ref=\"test\"/>\n+    </logger>\n+\n     <root>\n         <priority value=\"INFO\"/>\n         <appender-ref ref=\"main\"/>"},{"sha":"5c3e6986924cffcf31f5c22502a4273a271e30b1","filename":"core/src/main/resources/org/syncope/core/persistence/db.properties","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -1,5 +1,5 @@\n-db.driverClassName=org.postgresql.Driver\n-db.url=jdbc:postgresql://localhost:5432/syncope\n-db.username=syncope\n-db.password=syncope\n-db.sqlDialect=org.hibernate.dialect.PostgreSQLDialect\n+hibernate.connection.driver_class=org.postgresql.Driver\n+hibernate.connection.url=jdbc:postgresql://localhost:5432/syncope\n+hibernate.connection.username=syncope\n+hibernate.connection.password=syncope\n+hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect"},{"sha":"7c4d45152c8fc0f82ae255028781cc2d8fb55b83","filename":"core/src/main/resources/persistenceContext.xml","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -34,10 +34,10 @@\n     </bean>\n     <bean id=\"localDataSource\"\n           class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n-        <property name=\"driverClassName\" value=\"${db.driverClassName}\"/>\n-        <property name=\"url\" value=\"${db.url}\"/>\n-        <property name=\"username\" value=\"${db.username}\"/>\n-        <property name=\"password\" value=\"${db.password}\"/>\n+        <property name=\"driverClassName\" value=\"${hibernate.connection.driver_class}\"/>\n+        <property name=\"url\" value=\"${hibernate.connection.url}\"/>\n+        <property name=\"username\" value=\"${hibernate.connection.username}\"/>\n+        <property name=\"password\" value=\"${hibernate.connection.password}\"/>\n     </bean>\n \n     <bean id=\"entityManagerFactory\"\n@@ -49,7 +49,7 @@\n                 <property name=\"showSql\" value=\"true\"/>\n                 <property name=\"generateDdl\" value=\"true\"/>\n                 <property name=\"databasePlatform\"\n-                          value=\"${db.sqlDialect}\"/>\n+                          value=\"${hibernate.dialect}\"/>\n             </bean>\n         </property>\n     </bean>"},{"sha":"89bbec2046e5cfc22632222a1b24797b8491a829","filename":"core/src/test/java/org/syncope/core/persistence/test/AbstractDAOTest.java","status":"modified","additions":12,"deletions":11,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAbstractDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAbstractDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAbstractDAOTest.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -16,6 +16,7 @@\n \n import java.io.FileInputStream;\n import java.sql.Connection;\n+import java.sql.DatabaseMetaData;\n import java.sql.ResultSet;\n import java.sql.ResultSetMetaData;\n import java.sql.SQLException;\n@@ -98,17 +99,17 @@ public void setUpTestDataWithinTransaction() throws Exception {\n         if (log.isDebugEnabled()) {\n             conn = DataSourceUtils.getConnection(dataSource);\n \n-            String[] tableNames = new String[]{\n-                \"SyncopeUser\",\n-                \"AttributeSchema\",\n-                \"Attribute\",\n-                \"AttributeValue\",\n-                \"AttributeValueAsString\",\n-                \"AttributeValueAsDate\",\n-                \"Attribute_AttributeValue\",\n-                \"SyncopeUser_Attribute\"};\n-            for (int i = 0; i < tableNames.length; i++) {\n-                logTableContent(conn, tableNames[i]);\n+            DatabaseMetaData dbm = conn.getMetaData();\n+            String[] types = {\"TABLE\"};\n+            ResultSet rs = dbm.getTables(null, null, \"%\", types);\n+            while (rs.next()) {\n+                logTableContent(conn, rs.getString(\"TABLE_NAME\"));\n+            }\n+\n+            try {\n+                rs.close();\n+                conn.close();\n+            } catch (SQLException e) {\n             }\n         }\n     }"},{"sha":"6b35efdbb968a30bf7db01a45daf8f4c30199d7a","filename":"core/src/test/java/org/syncope/core/persistence/test/AttributeDAOTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeDAOTest.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -39,7 +39,7 @@ public class AttributeDAOTest extends AbstractDAOTest {\n     public final void testFindAll() {\n         List<Attribute> list = attributeDAO.findAll();\n         assertEquals(\"did not get expected number of attributes \",\n-                5, list.size());\n+                8, list.size());\n     }\n \n     @Test"},{"sha":"50d58775773d53f4a3afa19b27b246b663114697","filename":"core/src/test/java/org/syncope/core/persistence/test/AttributeSchemaDAOTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeSchemaDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeSchemaDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FAttributeSchemaDAOTest.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -34,7 +34,7 @@ public class AttributeSchemaDAOTest extends AbstractDAOTest {\n     public final void testFindAll() {\n         List<AttributeSchema> list = attributeSchemaDAO.findAll();\n         assertEquals(\"did not get expected number of attribute schemas \",\n-                4, list.size());\n+                6, list.size());\n     }\n \n     @Test"},{"sha":"22ddcdcfa8cda46e86982ebc8b286a2549132a4e","filename":"core/src/test/java/org/syncope/core/persistence/test/DerivedAttributeDAOTest.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FDerivedAttributeDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FDerivedAttributeDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FDerivedAttributeDAOTest.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -71,7 +71,6 @@ public final void testSave() throws ClassNotFoundException {\n \n         DerivedAttribute derivedAttribute = new DerivedAttribute();\n         derivedAttribute.setSchema(derivedAttributeSchema);\n-        derivedAttribute.setOwner(owner);\n \n         derivedAttribute = derivedAttributeDAO.save(derivedAttribute);\n \n@@ -89,7 +88,7 @@ public final void testSave() throws ClassNotFoundException {\n         assertEquals(\"expected derived value\",\n                 firstnameAttribute.getActualValue() + \" \"\n                 + surnameAttribute.getActualValue(),\n-                derivedAttribute.getValue());\n+                derivedAttribute.getValue(owner.getAttributes()));\n     }\n \n     @Test"},{"sha":"2c4d611bea74df7fc6be1e8c92025fdb7d52d52c","filename":"core/src/test/java/org/syncope/core/persistence/test/SyncopeRoleDAOTest.java","status":"added","additions":104,"deletions":0,"changes":104,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeRoleDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeRoleDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeRoleDAOTest.java?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -0,0 +1,104 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.test;\n+\n+import static org.junit.Assert.*;\n+\n+import java.util.List;\n+import java.util.Set;\n+import org.junit.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.syncope.core.persistence.beans.SyncopeRole;\n+import org.syncope.core.persistence.beans.AttributeSchema;\n+import org.syncope.core.persistence.beans.Attribute;\n+import org.syncope.core.persistence.beans.SyncopeRolePK;\n+import org.syncope.core.persistence.dao.AttributeSchemaDAO;\n+import org.syncope.core.persistence.dao.AttributeDAO;\n+import org.syncope.core.persistence.dao.SyncopeRoleDAO;\n+\n+@Transactional\n+public class SyncopeRoleDAOTest extends AbstractDAOTest {\n+\n+    @Autowired\n+    SyncopeRoleDAO syncopeRoleDAO;\n+    @Autowired\n+    AttributeDAO attributeDAO;\n+    @Autowired\n+    AttributeSchemaDAO attributeSchemaDAO;\n+\n+    @Test\n+    public final void testFindAll() {\n+        List<SyncopeRole> list = syncopeRoleDAO.findAll();\n+        assertEquals(\"did not get expected number of roles \", 2, list.size());\n+    }\n+\n+    @Test\n+    public final void testFind() {\n+        SyncopeRole role = syncopeRoleDAO.find(\"root\", null);\n+        assertNotNull(\"did not find expected role\", role);\n+        role = syncopeRoleDAO.find(new SyncopeRolePK(null, null));\n+        assertNull(\"found role but did not expect it\", role);\n+    }\n+\n+    @Test\n+    public final void testSave() {\n+        SyncopeRolePK rolePK = new SyncopeRolePK(\"secondChild\", \"root\");\n+        SyncopeRole role = new SyncopeRole();\n+        role.setSyncopeRolePK(rolePK);\n+\n+        role = syncopeRoleDAO.save(role);\n+\n+        SyncopeRole actual = syncopeRoleDAO.find(role.getSyncopeRolePK());\n+        assertNotNull(\"expected save to work\", actual);\n+    }\n+\n+    @Test\n+    public final void testDelete() {\n+        SyncopeRole role = syncopeRoleDAO.find(\"child\", \"root\");\n+\n+        syncopeRoleDAO.delete(role.getSyncopeRolePK());\n+\n+        SyncopeRole actual = syncopeRoleDAO.find(\"child\", \"root\");\n+        assertNull(\"delete did not work\", actual);\n+    }\n+\n+    @Test\n+    public final void testRelationships() {\n+        SyncopeRole role = syncopeRoleDAO.find(\"root\", null);\n+        Set<Attribute> attributes =\n+                role.getAttributes();\n+        int originalAttributesSize = attributes.size();\n+\n+        Attribute attribute = attributes.iterator().next();\n+        String attributeSchemaName =\n+                attribute.getSchema().getName();\n+\n+        attributeDAO.delete(attribute.getId());\n+        Attribute actualAttribute =\n+                attributeDAO.find(attribute.getId());\n+        assertNull(\"expected delete to work\", actualAttribute);\n+\n+        role = syncopeRoleDAO.find(\"root\", null);\n+        attributes = role.getAttributes();\n+        assertEquals(\"number of attributes differs\",\n+                originalAttributesSize, attributes.size());\n+\n+        AttributeSchema attributeSchema =\n+                attributeSchemaDAO.find(attributeSchemaName);\n+        assertNotNull(\"user attribute schema deleted when deleting values\",\n+                attributeSchema);\n+    }\n+}"},{"sha":"72750943435208cc024e94f56c32b045972b0ce0","filename":"core/src/test/resources/dbunitTestData.xml","status":"modified","additions":37,"deletions":2,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -4,6 +4,9 @@\n     <SyncopeUser id=\"2\"/>\n     <SyncopeUser id=\"3\"/>\n \n+    <SyncopeRole name=\"root\" parent=\"/\"/>\n+    <SyncopeRole name=\"child\" parent=\"root\"/>\n+\n     <AttributeSchema name=\"username\" type=\"String\"\n                      mandatory=\"true\" multivalue=\"false\"\n                      conversionPattern=\"NULL\" validatorClass=\"NULL\"/>\n@@ -16,20 +19,31 @@\n     <AttributeSchema name=\"surname\" type=\"String\"\n                      mandatory=\"true\" multivalue=\"false\"\n                      conversionPattern=\"NULL\" validatorClass=\"NULL\"/>\n+    <AttributeSchema name=\"icon\" type=\"String\"\n+                     mandatory=\"false\" multivalue=\"false\"\n+                     conversionPattern=\"NULL\" validatorClass=\"NULL\"/>\n+    <AttributeSchema name=\"show\" type=\"Boolean\"\n+                     mandatory=\"false\" multivalue=\"false\"\n+                     conversionPattern=\"NULL\" validatorClass=\"NULL\"/>\n \n     <Attribute id=\"100\" schema_name=\"username\"/>\n     <Attribute id=\"200\" schema_name=\"loginDate\"/>\n     <Attribute id=\"300\" schema_name=\"username\"/>\n     <Attribute id=\"400\" schema_name=\"firstname\"/>\n     <Attribute id=\"500\" schema_name=\"surname\"/>\n-\n+    <Attribute id=\"600\" schema_name=\"icon\"/>\n+    <Attribute id=\"700\" schema_name=\"icon\"/>\n+    <Attribute id=\"800\" schema_name=\"show\"/>\n \n     <AttributeValue id=\"10\"/>\n     <AttributeValue id=\"11\"/>\n     <AttributeValue id=\"20\"/>\n     <AttributeValue id=\"21\"/>\n     <AttributeValue id=\"30\"/>\n     <AttributeValue id=\"31\"/>\n+    <AttributeValue id=\"40\"/>\n+    <AttributeValue id=\"41\"/>\n+    <AttributeValue id=\"42\"/>\n \n     <AttributeValueAsString id=\"10\" actualValue=\"chicchiricco\"/>\n     <AttributeValueAsString id=\"11\" actualValue=\"fabio.martelli\"/>\n@@ -40,6 +54,11 @@\n     <AttributeValueAsString id=\"30\" actualValue=\"John\"/>\n     <AttributeValueAsString id=\"31\" actualValue=\"Doe\"/>\n \n+    <AttributeValueAsString id=\"40\" actualValue=\"niceIcon\"/>\n+    <AttributeValueAsString id=\"41\" actualValue=\"badIcon\"/>\n+\n+    <AttributeValueAsBoolean id=\"42\" actualValue=\"TRUE\"/>\n+\n     <Attribute_AttributeValue\n         Attribute_id=\"100\" values_id=\"10\"/>\n     <Attribute_AttributeValue\n@@ -52,6 +71,12 @@\n         Attribute_id=\"400\" values_id=\"30\"/>\n     <Attribute_AttributeValue\n         Attribute_id=\"500\" values_id=\"31\"/>\n+    <Attribute_AttributeValue\n+        Attribute_id=\"600\" values_id=\"40\"/>\n+    <Attribute_AttributeValue\n+        Attribute_id=\"700\" values_id=\"41\"/>\n+    <Attribute_AttributeValue\n+        Attribute_id=\"800\" values_id=\"42\"/>\n \n     <SyncopeUser_Attribute SyncopeUser_id='1'\n                            attributes_id='100'/>\n@@ -64,7 +89,17 @@\n     <SyncopeUser_Attribute SyncopeUser_id='3'\n                            attributes_id='500'/>\n \n+    <SyncopeRole_Attribute SyncopeRole_name=\"root\" SyncopeRole_parent=\"/\"\n+                           attributes_id=\"600\"/>\n+    <SyncopeRole_Attribute SyncopeRole_name=\"root\" SyncopeRole_parent=\"/\"\n+                           attributes_id=\"800\"/>\n+    <SyncopeRole_Attribute SyncopeRole_name=\"child\" SyncopeRole_parent=\"root\"\n+                           attributes_id=\"700\"/>\n+\n     <DerivedAttributeSchema name=\"cn\" expression=\"surname + ', ' + firstname\"/>\n \n-    <DerivedAttribute id=\"1000\" owner_id=\"3\" schema_name=\"cn\"/>\n+    <DerivedAttribute id=\"1000\" schema_name=\"cn\"/>\n+\n+    <SyncopeUser_DerivedAttribute SyncopeUser_id=\"3\"\n+                                  derivedAttributes_id=\"1000\"/>\n </dataset>"},{"sha":"8bca22d7a4123c7573ca9e0a70921e0bb3b0495f","filename":"core/src/test/resources/org/syncope/core/persistence/db.properties","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdb.properties?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -1,5 +1,5 @@\n-db.driverClassName=org.hsqldb.jdbcDriver\n-db.url=jdbc:hsqldb:mem:syncopeTest\n-db.username=sa\n-db.password=\n-db.sqlDialect=org.hibernate.dialect.HSQLDialect\n+hibernate.connection.driver_class=org.hsqldb.jdbcDriver\n+hibernate.connection.url=jdbc:hsqldb:mem:syncopeTest\n+hibernate.connection.username=sa\n+hibernate.connection.password=\n+hibernate.dialect=org.hibernate.dialect.HSQLDialect"},{"sha":"dce4629cd222ee6c05d1fd63fbfe599623ffc172","filename":"identityconnectors/bundles/pom.xml","status":"modified","additions":3,"deletions":8,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fbundles%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fbundles%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/identityconnectors%2Fbundles%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -5,22 +5,17 @@\n \n     <parent>\n         <artifactId>identityconnectors</artifactId>\n-        <groupId>org.syncope.core.identityconnectors</groupId>\n-        <version>${identityconnectors.version}</version>\n+        <groupId>org.syncope.identityconnectors</groupId>\n+        <version>0.1-SNAPSHOT</version>\n     </parent>\n \n     <name>bundles</name>\n     <description>bundles</description>\n-    <groupId>org.syncope.core.identityconnectors</groupId>\n+    <groupId>org.syncope.identityconnectors</groupId>\n     <artifactId>bundles</artifactId>\n \n-    <version>${bundles.version}</version>\n     <packaging>pom</packaging>\n \n-    <properties>\n-        <WebServiceConnector.version>0.1-SNAPSHOT</WebServiceConnector.version>\n-    </properties>\n-    \n     <modules>\n \n     </modules>"},{"sha":"1e568517afde0dd9e24b21400b6de688cbdcd75d","filename":"identityconnectors/framework-internal/pom.xml","status":"modified","additions":5,"deletions":7,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fframework-internal%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fframework-internal%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/identityconnectors%2Fframework-internal%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -6,14 +6,12 @@\n \n     <parent>\n         <artifactId>identityconnectors</artifactId>\n-        <groupId>org.syncope.core.identityconnectors</groupId>\n-        <version>${identityconnectors.version}</version>\n+        <groupId>org.syncope.identityconnectors</groupId>\n+        <version>0.1-SNAPSHOT</version>\n     </parent>\n \n-    <groupId>org.syncope.core.identityconnectors</groupId>\n+    <groupId>org.syncope.identityconnectors</groupId>\n     <artifactId>framework-internal</artifactId>\n-    <version>${framework-internal.version}</version>\n-\n     <name>framework-internal</name>\n     <url>http://maven.apache.org</url>\n \n@@ -22,14 +20,14 @@\n         <dependency>\n             <groupId>org.syncope.core.identityconnectors</groupId>\n             <artifactId>framework</artifactId>\n-            <version>${framework.version}</version>\n+            <version>${parent.version}</version>\n             <scope>provided</scope>\n         </dependency>\n \n         <dependency>\n             <groupId>org.syncope.core.identityconnectors</groupId>\n             <artifactId>test-common</artifactId>\n-            <version>${test-common.version}</version>\n+            <version>${parent.version}</version>\n             <scope>provided</scope>\n         </dependency>\n "},{"sha":"2febdd15131e4b907a043f8fcb354602d83f674f","filename":"identityconnectors/framework/pom.xml","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fframework%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fframework%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/identityconnectors%2Fframework%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -6,14 +6,12 @@\n \n     <parent>\n         <artifactId>identityconnectors</artifactId>\n-        <groupId>org.syncope.core.identityconnectors</groupId>\n-        <version>${identityconnectors.version}</version>\n+        <groupId>org.syncope.identityconnectors</groupId>\n+        <version>0.1-SNAPSHOT</version>\n     </parent>\n \n-    <groupId>org.syncope.core.identityconnectors</groupId>\n+    <groupId>org.syncope.identityconnectors</groupId>\n     <artifactId>framework</artifactId>\n-    <version>${framework.version}</version>\n-\n     <name>framework</name>\n     \n     <url>http://maven.apache.org</url>"},{"sha":"49920d32c950554e355324e289c3e6ed2d405dd7","filename":"identityconnectors/pom.xml","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/identityconnectors%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -25,9 +25,8 @@\n     <name>IdentityConnectors</name>\n     <description>Identity Connectors</description>\n \n-    <groupId>org.syncope.core.identityconnectors</groupId>\n+    <groupId>org.syncope.identityconnectors</groupId>\n     <artifactId>identityconnectors</artifactId>\n-    <version>${identityconnectors.version}</version>\n \n     <packaging>pom</packaging>\n "},{"sha":"3640540cbd6fa014d099705f1a7119eea9b91f8c","filename":"identityconnectors/test-common/pom.xml","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Ftest-common%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/identityconnectors%2Ftest-common%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/identityconnectors%2Ftest-common%2Fpom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -7,22 +7,20 @@\n     <parent>\n         <artifactId>identityconnectors</artifactId>\n         <groupId>org.syncope.core.identityconnectors</groupId>\n-        <version>${identityconnectors.version}</version>\n+        <version>0.1-SNAPSHOT</version>\n     </parent>\n \n     <groupId>org.syncope.core.identityconnectors</groupId>\n     <artifactId>test-common</artifactId>\n-    <version>${test-common.version}</version>\n-\n     <name>test-common</name>\n     <url>http://maven.apache.org</url>\n \n     <dependencies>\n         <dependency>\n             <groupId>org.syncope.core.identityconnectors</groupId>\n             <artifactId>framework</artifactId>\n-            <version>${framework.version}</version>\n             <scope>compile</scope>\n+            <version>${parent.version}</version>\n         </dependency>\n \n         <dependency>"},{"sha":"598aef106639e644e5c8d598d5d728c1dcecfe3f","filename":"pom.xml","status":"modified","additions":0,"deletions":7,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ff40b4e545f124084e637ab80be9b693b93accfe/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ff40b4e545f124084e637ab80be9b693b93accfe/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=ff40b4e545f124084e637ab80be9b693b93accfe","patch":"@@ -128,13 +128,6 @@\n \n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n \n-        <!-- IdentityConnectors Properties -->\n-        <framework.version>0.1-SNAPSHOT</framework.version>\n-        <framework-internal.version>0.1-SNAPSHOT</framework-internal.version>\n-        <test-common.version>0.1-SNAPSHOT</test-common.version>\n-        <identityconnectors.version>0.1-SNAPSHOT</identityconnectors.version>\n-        <bundles.version>0.1-SNAPSHOT</bundles.version>\n-\n     </properties>\n \n     <dependencyManagement>"}]}