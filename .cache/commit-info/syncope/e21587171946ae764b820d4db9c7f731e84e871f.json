{"sha":"e21587171946ae764b820d4db9c7f731e84e871f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmUyMTU4NzE3MTk0NmFlNzY0YjgyMGQ0ZGI5YzdmNzMxZTg0ZTg3MWY=","commit":{"author":{"name":"Massimiliano Perrone","email":"massimiliano.perrone@tirasa.net","date":"2015-12-15T11:04:19Z"},"committer":{"name":"Massimiliano Perrone","email":"massimiliano.perrone@tirasa.net","date":"2015-12-15T17:08:02Z"},"message":"Swagger option, SYNCOPE-637","tree":{"sha":"373f4d8900e6cb3b785ed018f1d1c0164af45564","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/373f4d8900e6cb3b785ed018f1d1c0164af45564"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e21587171946ae764b820d4db9c7f731e84e871f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e21587171946ae764b820d4db9c7f731e84e871f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e21587171946ae764b820d4db9c7f731e84e871f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e21587171946ae764b820d4db9c7f731e84e871f/comments","author":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"committer":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"parents":[{"sha":"54db189335d308adc174a9993ca1ca6862b9f2c7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/54db189335d308adc174a9993ca1ca6862b9f2c7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/54db189335d308adc174a9993ca1ca6862b9f2c7"}],"stats":{"total":78,"additions":64,"deletions":14},"files":[{"sha":"867b925d7c0935a8e9829873a4a76c177907860c","filename":"installer/src/main/java/org/apache/syncope/installer/files/ParentPom.java","status":"modified","additions":11,"deletions":3,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -20,10 +20,18 @@\n \n public final class ParentPom {\n \n-    public static final String PLACEHOLDER = \"</project>\";\n+    public static final String SWAGGER_PLACEHOLDER = \"<dependencies>\";\n \n-    public static final String REPOSITORY =\n-            \"  <repositories>\\n\"\n+    public static final String SWAGGER_CONTENT_TO_ADD = \"<dependencies>\\n\"\n+            + \"    <dependency>\\n\"\n+            + \"      <groupId>org.apache.syncope.ext</groupId>\\n\"\n+            + \"      <artifactId>syncope-ext-swagger-ui</artifactId>\\n\"\n+            + \"      <version>${syncope.version}</version>\\n\"\n+            + \"    </dependency>\\n\";\n+\n+    public static final String REPOSITORY_PLACEHOLDER = \"</project>\";\n+\n+    public static final String REPOSITORY_CONTENT_TO_ADD = \"  <repositories>\\n\"\n             + \"  <repository>\\n\"\n             + \"    <id>ASF</id>\\n\"\n             + \"    <url>https://repository.apache.org/content/repositories/snapshots/</url>\\n\""},{"sha":"30a7270af7b9130682df2e0c7b1f0c109f26166c","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":15,"deletions":4,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -52,6 +52,9 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         final String proxyUser = args[15];\n         final String proxyPwd = args[16];\n         final boolean mavenProxyAutoconf = Boolean.valueOf(args[17]);\n+        final boolean swagger = Boolean.valueOf(args[18]);\n+        final boolean activiti = Boolean.valueOf(args[19]);\n+        final boolean camel = Boolean.valueOf(args[20]);\n \n         setSyncopeInstallDir(installPath, artifactId);\n \n@@ -92,11 +95,19 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         mavenUtils.archetypeGenerate(\n                 syncopeVersion, groupId, artifactId, secretKey, anonymousKey, installPath, customMavenProxySettings);\n \n-        if (syncopeVersion.contains(\"SNAPSHOT\")) {\n-            final File pomFile = new File(syncopeInstallDir + PROPERTIES.getProperty(\"pomFile\"));\n+        if (swagger) {\n+            final File pomFile = new File(\n+                    syncopeInstallDir\n+                    + File.separator\n+                    + \"core\"\n+                    + File.separator\n+                    + PROPERTIES.getProperty(\"pomFile\"));\n             String contentPomFile = fileSystemUtils.readFile(pomFile);\n-            fileSystemUtils.\n-                    writeToFile(pomFile, contentPomFile.replace(ParentPom.PLACEHOLDER, ParentPom.REPOSITORY));\n+            contentPomFile = contentPomFile.replace(\n+                    ParentPom.REPOSITORY_PLACEHOLDER, ParentPom.REPOSITORY_CONTENT_TO_ADD);\n+            contentPomFile = contentPomFile.replace(ParentPom.SWAGGER_PLACEHOLDER, ParentPom.SWAGGER_CONTENT_TO_ADD);\n+\n+            fileSystemUtils.writeToFile(pomFile, contentPomFile);\n         }\n \n         fileSystemUtils.createDirectory(confDirectory);"},{"sha":"7539e9120ca64c156f58e18d1b078685abc8eed4","filename":"installer/src/main/resources/izpack/ProcessPanel.Spec.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -39,6 +39,9 @@ under the License.\n       <arg>$mvn.proxy.user</arg><!-- 15 -->\n       <arg>$mvn.proxy.pwd</arg><!-- 16 -->\n       <arg>$mvn.proxy.autoconf</arg><!-- 17 -->\n+      <arg>$options.swagger</arg><!-- 18 -->\n+      <arg>$options.activiti.workflow.adapter</arg><!-- 19 -->\n+      <arg>$options.camel</arg><!-- 20 -->\n     </executeclass>\n   </job>\n   <job name=\"Persistence configuration...\">"},{"sha":"f0dfed59e30ac00f221b2bdc5b648d17bd56d04b","filename":"installer/src/main/resources/izpack/install.xml","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -149,6 +149,8 @@ under the License.\n     <panel classname=\"UserInputPanel\" id=\"archetype\">\n       <validator classname=\"org.apache.syncope.installer.validators.ArchetypeValidator\"/>\n     </panel>\n+    <panel classname=\"UserInputPanel\" id=\"syncope_options\"/>\n+    \n     <panel classname=\"UserInputPanel\" id=\"persistence\"/>\n     <panel classname=\"UserInputPanel\" id=\"persistence_advanced\">\n       <validator classname=\"org.apache.syncope.installer.validators.PersistenceValidator\"/>"},{"sha":"3e9ee88f9e295e965b017802789f7b99331b1339","filename":"installer/src/main/resources/izpack/userInputLang.xml_eng","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -37,6 +37,10 @@ under the License.\n   <str id=\"mvn.proxy.user.id\" txt=\"Proxy User (if required):\"/>\n   <str id=\"mvn.proxy.pwd.id\" txt=\"Proxy Password (if required):\"/>\n   \n+  <str id=\"options.swagger.id\" txt=\"Swagger\"/>\n+  <str id=\"options.activiti.workflow.adapter.id\" txt=\"Activiti workflow adapter\"/>\n+  <str id=\"options.camel.id\" txt=\"Camel\"/>\n+  \n   <str id=\"persistence.jdbc.url\" txt=\"Database JDBC url:\"/>\n   <str id=\"persistence.db.user\" txt=\"Username:\"/>\n   <str id=\"persistence.db.password\" txt=\"Password:\"/>"},{"sha":"580a17d93b07ce2e67b93724aa7bbedefd8571bb","filename":"installer/src/main/resources/izpack/userInputLang.xml_ita","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -37,6 +37,10 @@ under the License.\n   <str id=\"mvn.proxy.user.id\" txt=\"Proxy User (se richiesto):\"/>\n   <str id=\"mvn.proxy.pwd.id\" txt=\"Proxy Password (se richiesta):\"/>\n   \n+  <str id=\"options.swagger.id\" txt=\"Swagger\"/>\n+  <str id=\"options.activiti.workflow.adapter.id\" txt=\"Activiti workflow adapter\"/>\n+  <str id=\"options.camel.id\" txt=\"Camel\"/>\n+  \n   <str id=\"persistence.jdbc.url\" txt=\"Database JDBC url:\"/>\n   <str id=\"persistence.db.user\" txt=\"Username:\"/>\n   <str id=\"persistence.db.password\" txt=\"Password:\"/>"},{"sha":"72648b07074c71fffd59ceec1364f29f50a86295","filename":"installer/src/main/resources/izpack/userInputSpec.xml","status":"modified","additions":25,"deletions":7,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e21587171946ae764b820d4db9c7f731e84e871f/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml?ref=e21587171946ae764b820d4db9c7f731e84e871f","patch":"@@ -99,8 +99,26 @@ under the License.\n     </field>\n   </panel>\n   \n-  <panel id=\"persistence\" order=\"2\" border=\"false\">\n-    <field type=\"title\" txt=\"Database options\" bold=\"true\" size=\"2\" />\n+  <panel id=\"syncope_options\" order=\"2\" border=\"false\">\n+    <field type=\"title\" txt=\"Syncope options\" bold=\"true\" size=\"2\" />\n+    \n+    <field type=\"divider\"/>\n+    <field type=\"space\"/>\n+    \n+    <field type=\"staticText\" align=\"left\" txt=\"Options\" />\n+    <field type=\"check\" variable=\"options.swagger\">\n+      <spec id=\"options.swagger.id\" true=\"true\" false=\"false\" set=\"false\"/>\n+    </field>\n+    <field type=\"check\" variable=\"options.activiti.workflow.adapter\">\n+      <spec id=\"options.activiti.workflow.adapter.id\" true=\"true\" false=\"false\" set=\"false\"/>\n+    </field>\n+    <field type=\"check\" variable=\"options.camel\">\n+      <spec id=\"options.camel.id\" true=\"true\" false=\"false\" set=\"false\"/>\n+    </field>\n+  </panel>\n+  \n+  <panel id=\"persistence\" order=\"3\" border=\"false\">\n+    <field type=\"title\" txt=\"Database\" bold=\"true\" size=\"2\" />\n     \n     <field type=\"divider\"/>\n     <field type=\"space\"/>\n@@ -116,8 +134,8 @@ under the License.\n     </field>\n   </panel>\n   \n-  <panel id=\"persistence_advanced\" order=\"2\" border=\"false\">\n-    <field type=\"title\" txt=\"Database advanced options\" bold=\"true\" size=\"2\" />\n+  <panel id=\"persistence_advanced\" order=\"3\" border=\"false\">\n+    <field type=\"title\" txt=\"Database settings\" bold=\"true\" size=\"2\" />\n     \n     <field type=\"divider\"/>\n     <field type=\"space\"/>\n@@ -152,7 +170,7 @@ under the License.\n     </field>\n   </panel>\n   \n-  <panel id=\"container\" order=\"3\" border=\"false\">\n+  <panel id=\"container\" order=\"4\" border=\"false\">\n     <field type=\"title\" txt=\"Application Server\" bold=\"true\" size=\"2\" />\n     \n     <field type=\"divider\"/>\n@@ -174,8 +192,8 @@ under the License.\n     </field>\n   </panel>\n   \n-  <panel id=\"container_advanced\" order=\"3\" border=\"false\">\n-    <field type=\"title\" txt=\"Application Server\" bold=\"true\" size=\"2\" />\n+  <panel id=\"container_advanced\" order=\"4\" border=\"false\">\n+    <field type=\"title\" txt=\"Application Server Settings\" bold=\"true\" size=\"2\" />\n     \n     <field type=\"divider\"/>\n     <field type=\"space\"/>"}]}