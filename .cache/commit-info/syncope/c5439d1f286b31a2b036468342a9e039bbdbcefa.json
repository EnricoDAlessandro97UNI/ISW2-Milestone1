{"sha":"c5439d1f286b31a2b036468342a9e039bbdbcefa","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM1NDM5ZDFmMjg2YjMxYTJiMDM2NDY4MzQyYTllMDM5YmJkYmNlZmE=","commit":{"author":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2014-10-22T15:49:27Z"},"committer":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2014-10-22T15:49:27Z"},"message":"Added version check to choose right repository. Fixed #SYNCOPE-575","tree":{"sha":"c7983f020209cc5c59d547271f9579eef2bdaf6b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c7983f020209cc5c59d547271f9579eef2bdaf6b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c5439d1f286b31a2b036468342a9e039bbdbcefa","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c5439d1f286b31a2b036468342a9e039bbdbcefa","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c5439d1f286b31a2b036468342a9e039bbdbcefa","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c5439d1f286b31a2b036468342a9e039bbdbcefa/comments","author":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"committer":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"parents":[{"sha":"c6adbef3ceef989551beabfff3658d0fea92fba9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c6adbef3ceef989551beabfff3658d0fea92fba9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c6adbef3ceef989551beabfff3658d0fea92fba9"}],"stats":{"total":17,"additions":12,"deletions":5},"files":[{"sha":"45569e713dcba8ce879063ace16c6577a134864d","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c5439d1f286b31a2b036468342a9e039bbdbcefa/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c5439d1f286b31a2b036468342a9e039bbdbcefa/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=c5439d1f286b31a2b036468342a9e039bbdbcefa","patch":"@@ -97,9 +97,12 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         handler.logOutput(\"########################## IMPORTANT ##########################\", true);\n         mavenUtils.archetypeGenerate(\n                 syncopeVersion, groupId, artifactId, secretKey, anonymousKey, installPath, customMavenProxySettings);\n-\n-        fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + ParentPom.PATH),\n-                String.format(ParentPom.FILE, syncopeVersion, syncopeVersion, groupId, artifactId));\n+        \n+        if (syncopeVersion.contains(\"SNAPSHOT\")) {\n+            fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + ParentPom.PATH),\n+                    String.format(ParentPom.FILE, syncopeVersion, syncopeVersion, groupId, artifactId));\n+        }\n+        \n         fileSystemUtils.createDirectory(confDirectory);\n         fileSystemUtils.createDirectory(logsDirectory);\n         fileSystemUtils.createDirectory(bundlesDirectory);"},{"sha":"e842ea783cdfd390b37217298426ee57bf98c829","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/MavenUtils.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c5439d1f286b31a2b036468342a9e039bbdbcefa/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c5439d1f286b31a2b036468342a9e039bbdbcefa/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java?ref=c5439d1f286b31a2b036468342a9e039bbdbcefa","patch":"@@ -81,7 +81,11 @@ private Properties archetypeProperties(final String archetypeVersion, final Stri\n         final Properties properties = new Properties();\n         properties.setProperty(\"archetypeGroupId\", \"org.apache.syncope\");\n         properties.setProperty(\"archetypeArtifactId\", \"syncope-archetype\");\n-        properties.setProperty(\"archetypeRepository\", \"http://repository.apache.org/content/repositories/snapshots\");\n+        if (archetypeVersion.contains(\"SNAPSHOT\")) {\n+            properties.setProperty(\"archetypeRepository\", \"http://repository.apache.org/content/repositories/snapshots\");\n+        } else {\n+            properties.setProperty(\"archetypeRepository\", \"http://repo1.maven.org/maven2\");\n+        }\n         properties.setProperty(\"archetypeVersion\", archetypeVersion);\n         properties.setProperty(\"groupId\", groupId);\n         properties.setProperty(\"artifactId\", artifactId);\n@@ -158,7 +162,7 @@ private InvocationResult invoke(final InvocationRequest request, final String pa\n         InvocationResult result = null;\n         final Invoker invoker = new DefaultInvoker();\n         try {\n-            invoker.setLogger( new PrintStreamLogger(\n+            invoker.setLogger(new PrintStreamLogger(\n                     new PrintStream(InstallLog.getInstance().getFileAbsolutePath()), 1000));\n             invoker.setOutputHandler(new PrintStreamHandler(\n                     new PrintStream(InstallLog.getInstance().getFileAbsolutePath()), true));"}]}