{"sha":"cda672efca5fcb58f8447a9352890750f912fe12","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmNkYTY3MmVmY2E1ZmNiNThmODQ0N2E5MzUyODkwNzUwZjkxMmZlMTI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-12-11T13:41:10Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-12-11T13:41:10Z"},"message":"Small refinements\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/DEV_ROLE_PROVISIONING@1420152 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"466591129025438c23e231b789ceac5ced60db7e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/466591129025438c23e231b789ceac5ced60db7e"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/cda672efca5fcb58f8447a9352890750f912fe12","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cda672efca5fcb58f8447a9352890750f912fe12","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/cda672efca5fcb58f8447a9352890750f912fe12","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cda672efca5fcb58f8447a9352890750f912fe12/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"d4f8263bec48aa98599f04121c1a3167a855a964","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d4f8263bec48aa98599f04121c1a3167a855a964","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d4f8263bec48aa98599f04121c1a3167a855a964"}],"stats":{"total":22,"additions":13,"deletions":9},"files":[{"sha":"ff160a77b89c323883aaadeba872752731464892","filename":"core/src/main/java/org/apache/syncope/core/propagation/PropagationManager.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cda672efca5fcb58f8447a9352890750f912fe12/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FPropagationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cda672efca5fcb58f8447a9352890750f912fe12/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FPropagationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FPropagationManager.java?ref=cda672efca5fcb58f8447a9352890750f912fe12","patch":"@@ -450,7 +450,7 @@ protected <T extends AbstractAttributable> Map.Entry<String, Attribute> prepareA\n         switch (mapItem.getIntMappingType().getAttributableType()) {\n             case USER:\n                 if (subject instanceof SyncopeUser) {\n-                    attributables.addAll(Collections.singleton(subject));\n+                    attributables.add(subject);\n                 }\n                 break;\n \n@@ -459,7 +459,7 @@ protected <T extends AbstractAttributable> Map.Entry<String, Attribute> prepareA\n                     attributables.addAll(((SyncopeUser) subject).getRoles());\n                 }\n                 if (subject instanceof SyncopeRole) {\n-                    attributables.addAll(Collections.singleton(subject));\n+                    attributables.add(subject);\n                 }\n                 break;\n "},{"sha":"2c6d22b95afdc4a019520e03a91cbb5fb86e3c89","filename":"core/src/main/java/org/apache/syncope/core/util/MappingUtil.java","status":"modified","additions":11,"deletions":7,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cda672efca5fcb58f8447a9352890750f912fe12/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cda672efca5fcb58f8447a9352890750f912fe12/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java?ref=cda672efca5fcb58f8447a9352890750f912fe12","patch":"@@ -185,9 +185,11 @@ public static Map.Entry<AbstractSchema, List<AbstractAttrValue>> getIntValues(fi\n \n             case Username:\n                 for (AbstractAttributable attributable : attributables) {\n-                    AbstractAttrValue attrValue = new UAttrValue();\n-                    attrValue.setStringValue(((SyncopeUser) attributable).getUsername());\n-                    values.add(attrValue);\n+                    if (attributable instanceof SyncopeUser) {\n+                        AbstractAttrValue attrValue = new UAttrValue();\n+                        attrValue.setStringValue(((SyncopeUser) attributable).getUsername());\n+                        values.add(attrValue);\n+                    }\n                 }\n                 break;\n \n@@ -201,16 +203,18 @@ public static Map.Entry<AbstractSchema, List<AbstractAttrValue>> getIntValues(fi\n \n             case RoleName:\n                 for (AbstractAttributable attributable : attributables) {\n-                    attrValue = new UAttrValue();\n-                    attrValue.setStringValue(((SyncopeRole) attributable).getName());\n-                    values.add(attrValue);\n+                    if (attributable instanceof SyncopeRole) {\n+                        attrValue = new RAttrValue();\n+                        attrValue.setStringValue(((SyncopeRole) attributable).getName());\n+                        values.add(attrValue);\n+                    }\n                 }\n                 break;\n \n             default:\n         }\n \n-        LOG.debug(\"Retrived values '{}'\", values);\n+        LOG.debug(\"Retrieved values '{}'\", values);\n \n         return new DefaultMapEntry(schema, values);\n     }"}]}