{"sha":"e49696e229f9bdb9e87ad68f03d39c00b08f6415","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmU0OTY5NmUyMjlmOWJkYjllODdhZDY4ZjAzZDM5YzAwYjA4ZjY0MTU=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-01-25T14:52:22Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-01-25T14:52:22Z"},"message":"Updates to labels,form's fields and radio components changed in checkboxes\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246755 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"476a5bc1d5b26e93f75b2c42835f8c66567a6bb2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/476a5bc1d5b26e93f75b2c42835f8c66567a6bb2"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e49696e229f9bdb9e87ad68f03d39c00b08f6415","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e49696e229f9bdb9e87ad68f03d39c00b08f6415","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e49696e229f9bdb9e87ad68f03d39c00b08f6415","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e49696e229f9bdb9e87ad68f03d39c00b08f6415/comments","author":null,"committer":null,"parents":[{"sha":"5849c0cba90572296f44e669667a70cc31feb3bc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5849c0cba90572296f44e669667a70cc31feb3bc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5849c0cba90572296f44e669667a70cc31feb3bc"}],"stats":{"total":72,"additions":45,"deletions":27},"files":[{"sha":"1e14556e3b43aa590ea1399b812e1c9f72a62003","filename":"console/src/main/java/org/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":25,"deletions":22,"changes":47,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=e49696e229f9bdb9e87ad68f03d39c00b08f6415","patch":"@@ -27,7 +27,6 @@\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n-import org.apache.wicket.markup.html.form.RadioChoice;\n import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.Model;\n@@ -39,6 +38,7 @@\n import org.syncope.types.SchemaType;\n import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.markup.html.form.CheckBox;\n \n /**\n  * Modal window with Schema form.\n@@ -62,11 +62,13 @@ public enum Entity {\n \n     private AutoCompleteTextField mandatoryCondition;\n \n-    private RadioChoice virtual;\n+    private CheckBox virtual;\n \n-    private RadioChoice multivalue;\n+    private CheckBox multivalue;\n \n-    private RadioChoice readonly;\n+    private CheckBox readonly;\n+\n+    private CheckBox uniqueConstraint;\n \n     private AjaxButton submit;\n \n@@ -134,49 +136,49 @@ protected Iterator getChoices(String input) {\n             }\n         };\n \n-        virtual = new RadioChoice(\"virtual\", Arrays.asList(\n-                new Boolean[]{true, false}));\n+        virtual = new CheckBox(\"virtual\");\n+\n+        multivalue = new CheckBox(\"multivalue\");\n \n-        multivalue = new RadioChoice(\"multivalue\", Arrays.asList(\n-                new Boolean[]{true, false}));\n+        readonly = new CheckBox(\"readonly\");\n \n-        readonly = new RadioChoice(\"readonly\", Arrays.asList(\n-                new Boolean[]{true, false}));\n+        uniqueConstraint = new CheckBox(\"uniqueConstraint\");\n \n         submit = new IndicatingAjaxButton(\"submit\", new Model(\n                 getString(\"submit\"))) {\n \n             @Override\n             protected void onSubmit(AjaxRequestTarget target, Form form) {\n \n+                SchemaTO schemaTO = (SchemaTO) form.getDefaultModelObject();\n+\n+                if (schemaTO.isMultivalue() && schemaTO.isUniqueConstraint()) {\n+                    error(getString(\"multivalueAndUniqueConstr.validation\"));\n+                    return;\n+                }\n+\n                 if (getEntity() == Entity.USER) {\n \n                     if (createFlag) {\n-                        restClient.createUserSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.createUserSchema(schemaTO);\n                     } else {\n-                        restClient.updateUserSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.updateUserSchema(schemaTO);\n                     }\n \n                 } else if (getEntity() == Entity.ROLE) {\n \n                     if (createFlag) {\n-                        restClient.createRoleSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.createRoleSchema(schemaTO);\n                     } else {\n-                        restClient.updateRoleSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.updateRoleSchema(schemaTO);\n                     }\n \n                 } else if (getEntity() == Entity.MEMBERSHIP) {\n \n                     if (createFlag) {\n-                        restClient.createMemberhipSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.createMemberhipSchema(schemaTO);\n                     } else {\n-                        restClient.updateMemberhipSchema((SchemaTO) form.\n-                                getDefaultModelObject());\n+                        restClient.updateMemberhipSchema(schemaTO);\n                     }\n \n                 }\n@@ -213,6 +215,7 @@ protected void onError(AjaxRequestTarget target, Form form) {\n         schemaForm.add(virtual);\n         schemaForm.add(multivalue);\n         schemaForm.add(readonly);\n+        schemaForm.add(uniqueConstraint);\n \n         schemaForm.add(submit);\n "},{"sha":"0643b3d06fb5c93d08987f0ed1977b5a4389de7b","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage.html","status":"modified","additions":14,"deletions":3,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html?ref=e49696e229f9bdb9e87ad68f03d39c00b08f6415","patch":"@@ -37,21 +37,32 @@\n             <fieldset>\n                 <label for=\"name\"><wicket:message key=\"name\"/></label>\n                 <input type=\"text\" id=\"name\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"name\" />\n+\n                 <label for=\"conversionPattern\"><wicket:message key=\"conversionPattern\"/></label>\n                 <input type=\"text\" id=\"conversionPattern\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"conversionPattern\" />\n+\n                 <label for=\"validatorClass\"><wicket:message key=\"validatorClass\"/></label>\n                 <select id=\"validatorClass\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"validatorClass\"/>\n+\n                 <label for=\"type\"><wicket:message key=\"type\"/></label>\n                 <select id=\"type\"  class=\"text ui-widget-content ui-corner-all\" wicket:id=\"type\"/>\n+\n                 <label for=\"mandatoryCondition\"><wicket:message key=\"mandatoryCondition\"/></label>\n                 <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"\n                        id=\"mandatoryCondition\" wicket:id=\"mandatoryCondition\"/>\n+\n                 <label for=\"virtual\"><wicket:message key=\"virtual\"/></label>\n-                <span id=\"virtual\" wicket:id=\"virtual\" class=\"radio\"/>\n+                <input type=\"checkbox\" id=\"virtual\" wicket:id=\"virtual\" class=\"checkbox\"/>\n+\n                 <label for=\"multivalue\"><wicket:message key=\"multivalue\"/></label>\n-                <span id=\"multivalue\" wicket:id=\"multivalue\" class=\"radio\"/>\n+                <input type=\"checkbox\" id=\"multivalue\" wicket:id=\"multivalue\" class=\"checkbox\"/>\n+\n                 <label for=\"readonly\"><wicket:message key=\"readonly\"/></label>\n-                <span id=\"readonly\" wicket:id=\"readonly\" class=\"radio\"/>\n+                <input type=\"checkbox\" id=\"readonly\" wicket:id=\"readonly\" class=\"checkbox\"/>\n+\n+                <label for=\"uniqueConstraint\"><wicket:message key=\"uniqueConstraint\"/></label>\n+                <input type=\"checkbox\" id=\"uniqueConstraint\" wicket:id=\"uniqueConstraint\" class=\"checkbox\"/>\n+\n                 <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"submit\"/>\n             </fieldset>\n         </form>"},{"sha":"4189873b0d5c11c2570de106783b5edc859510a6","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage.properties","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties?ref=e49696e229f9bdb9e87ad68f03d39c00b08f6415","patch":"@@ -5,8 +5,10 @@ tab4=User derived attributes\n create_attribute=Create new attribute\n required_alert=All form fields are required.\n mandatoryCondition=Mandatory condition\n-multivalue=multivalue\n+uniqueConstraint=Unique constraint\n+multivalue=Multivalue\n virtual=Virtual\n+multivalueAndUniqueConstr.validation='Multivalue' and 'Unique constraint' options can't be both checked\n name=Name\n type=Type\n validatorClass=Validator class"},{"sha":"925f62a14fa4aa2fdfaf4386be98da9c35748235","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage_it.properties","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e49696e229f9bdb9e87ad68f03d39c00b08f6415/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties?ref=e49696e229f9bdb9e87ad68f03d39c00b08f6415","patch":"@@ -4,7 +4,7 @@ tab3=Attributi utenti\n tab4=Attributi utenti derivati\n create_attribute=Crea nuovo attributo\n required_alert=Tutti i campi sono richiesti\n-mandatoryCondition=Vincolo d'obbligatoriet\\u00E0\n+mandatoryCondition=Vincolo d'obbligatoriet\\u00e0\n multivalue=Multivalore\n virtual=Virtuale\n name=Nome\n@@ -16,3 +16,5 @@ action=Azione\n edit_attribute=Modifica attributo\n title=Schema\n readonly=Read-only\n+uniqueConstraint=Vincolo unique\n+multivalueAndUniqueConstr.validation=Le opzioni 'Multivalore' e 'Vincolo unique' non possono essere entrambe impostate"}]}