{"sha":"40892e192609d22eabd6dfaaf23a6f313d8d572c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQwODkyZTE5MjYwOWQyMmVhYmQ2ZGZhYWYyM2E2ZjMxM2Q4ZDU3MmM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-09T15:38:32Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-09T15:38:32Z"},"message":"[SYNCOPE-620] MariaDB, SQL Server","tree":{"sha":"72f0801677852a32c9221f35f8a526a7b4726bf2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/72f0801677852a32c9221f35f8a526a7b4726bf2"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/40892e192609d22eabd6dfaaf23a6f313d8d572c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/40892e192609d22eabd6dfaaf23a6f313d8d572c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/40892e192609d22eabd6dfaaf23a6f313d8d572c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/40892e192609d22eabd6dfaaf23a6f313d8d572c/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"498eb7ecd43143100700326bc9af14bea7ff0436","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/498eb7ecd43143100700326bc9af14bea7ff0436","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/498eb7ecd43143100700326bc9af14bea7ff0436"}],"stats":{"total":717,"additions":713,"deletions":4},"files":[{"sha":"2dd3b524fcf9745103815f7d1fe78c5f5871b8fa","filename":"syncope620/ext/camel/logic/src/main/java/org/apache/syncope/server/logic/init/CamelRouteLoader.java","status":"modified","additions":23,"deletions":3,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fext%2Fcamel%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FCamelRouteLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fext%2Fcamel%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FCamelRouteLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fext%2Fcamel%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Flogic%2Finit%2FCamelRouteLoader.java?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -140,8 +140,28 @@ private void loadRoutes(final Resource resource, final SubjectType subjectType)\n \n     private void loadEntitlements() {\n         final JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n-        jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_READ')\");\n-        jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_LIST')\");\n-        jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_UPDATE')\");\n+\n+        boolean existingData;\n+        try {\n+            existingData = jdbcTemplate.queryForObject(\n+                    \"SELECT COUNT(0) FROM Entitlement WHERE NAME LIKE 'ROUTE_%'\", Integer.class) > 0;\n+        } catch (DataAccessException e) {\n+            LOG.error(\"Could not access to Entitlement table\", e);\n+            existingData = true;\n+        }\n+\n+        if (existingData) {\n+            LOG.info(\"Data found in the database, leaving untouched\");\n+        } else {\n+            LOG.info(\"Empty database found, loading default content\");\n+\n+            try {\n+                jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_READ')\");\n+                jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_LIST')\");\n+                jdbcTemplate.update(\"INSERT INTO Entitlement(NAME) VALUES('ROUTE_UPDATE')\");\n+            } catch (Exception e) {\n+                LOG.error(\"While adding additional entitlements\", e);\n+            }\n+        }\n     }\n }"},{"sha":"b10f292e4a38b23e540894fffecd6bd2a15a6677","filename":"syncope620/fit/server-reference/pom.xml","status":"modified","additions":66,"deletions":0,"changes":66,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fpom.xml?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -415,6 +415,72 @@ under the License.\n       </build>\n     </profile>\n     \n+    <profile>\n+      <id>mariadb-it</id>\n+\n+      <properties>\n+        <jdbcdriver.groupId>org.mariadb.jdbc</jdbcdriver.groupId>\n+        <jdbcdriver.artifactId>mariadb-java-client</jdbcdriver.artifactId>\n+      </properties>\n+\n+      <dependencies>\n+        <dependency>\n+          <groupId>org.mariadb.jdbc</groupId>\n+          <artifactId>mariadb-java-client</artifactId>\n+          <version>1.1.8</version>\n+          <scope>test</scope>\n+        </dependency>\n+      </dependencies>\n+      \n+      <build>\n+        <defaultGoal>clean verify</defaultGoal>\n+\n+        <resources>\n+          <resource>\n+            <directory>src/main/resources</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+          <resource>\n+            <directory>src/main/resources/mariadb</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+        </resources>\n+      </build>\n+    </profile>\n+    \n+    <profile>\n+      <id>sqlserver-it</id>\n+\n+      <properties>\n+        <jdbcdriver.groupId>com.microsoft.sqlserver</jdbcdriver.groupId>\n+        <jdbcdriver.artifactId>sqljdbc4</jdbcdriver.artifactId>\n+      </properties>\n+\n+      <dependencies>\n+        <dependency>\n+          <groupId>com.microsoft.sqlserver</groupId>\n+          <artifactId>sqljdbc4</artifactId>\n+          <version>4.0</version>\n+          <scope>test</scope>\n+        </dependency>\n+      </dependencies>\n+      \n+      <build>\n+        <defaultGoal>clean verify</defaultGoal>\n+\n+        <resources>\n+          <resource>\n+            <directory>src/main/resources</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+          <resource>\n+            <directory>src/main/resources/sqlserver</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+        </resources>\n+      </build>\n+    </profile>\n+    \n     <profile>\n       <id>debug</id>\n "},{"sha":"f566122b4a44c296bde5c0f8b5cfbad4103e9b4b","filename":"syncope620/fit/server-reference/src/main/resources/mariadb/persistence.properties","status":"added","additions":29,"deletions":0,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fmariadb%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fmariadb%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fmariadb%2Fpersistence.properties?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -0,0 +1,29 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+content.directory=${conf.directory}\n+jpa.driverClassName=org.mariadb.jdbc.Driver\n+jpa.url=jdbc:mariadb://localhost:3306/syncope?characterEncoding=UTF-8\n+jpa.username=syncope\n+jpa.password=syncope\n+jpa.dialect=org.apache.openjpa.jdbc.sql.MariaDBDictionary\n+jpa.pool.validationQuery=SELECT 1\n+#note: other connection pool settings can also be configured here, see persistenceContext.xml\n+quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n+quartz.scheduler.idleWaitTime=5000\n+quartz.sql=tables_mariadb.sql\n+audit.sql=audit.sql\n+database.schema="},{"sha":"c1e154ac30af0cf63d839366dedd0ed00e5c7d2d","filename":"syncope620/fit/server-reference/src/main/resources/sqlserver/META-INF/orm.xml","status":"added","additions":359,"deletions":0,"changes":359,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2FMETA-INF%2Form.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2FMETA-INF%2Form.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2FMETA-INF%2Form.xml?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -0,0 +1,359 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<entity-mappings xmlns=\"http://java.sun.com/xml/ns/persistence/orm\"\n+                 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                 xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm \n+                                     http://java.sun.com/xml/ns/persistence/orm_2_0.xsd\"\n+                 version=\"2.0\">\n+  \n+  <persistence-unit-metadata>\n+    <persistence-unit-defaults>\n+      <entity-listeners>\n+        <entity-listener class=\"org.apache.syncope.server.persistence.jpa.validation.entity.EntityValidationListener\">\n+          <pre-persist method-name=\"validate\"/>\n+          <pre-update method-name=\"validate\"/>\n+        </entity-listener>\n+      </entity-listeners>\n+    </persistence-unit-defaults>\n+  </persistence-unit-metadata>\n+  \n+  <table-generator name=\"SEQ_UPlainAttrValue\" pk-column-value=\"SEQ_UPlainAttrValue\" initial-value=\"100\"/>\n+  <table-generator name=\"SEQ_RPlainAttrValue\" pk-column-value=\"SEQ_RPlainAttrValue\" initial-value=\"100\"/>\n+  <table-generator name=\"SEQ_MAttrPlainValue\" pk-column-value=\"SEQ_MAttrPlainValue\" initial-value=\"100\"/>\n+  <table-generator name=\"SEQ_CAttrPlainValue\" pk-column-value=\"SEQ_CAttrPlainValue\" initial-value=\"100\"/>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUser\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_User\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_User\" pk-column-value=\"SEQ_User\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARole\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Role\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Role\" pk-column-value=\"SEQ_Role\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.membership.JPAMembership\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Membership\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Membership\" pk-column-value=\"SEQ_Membership\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUMapping\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_UMapping\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_UMapping\" pk-column-value=\"SEQ_UMapping\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARMapping\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RMapping\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_RMapping\" pk-column-value=\"SEQ_RMapping\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUMappingItem\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_UMappingItem\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_UMappingItem\" pk-column-value=\"SEQ_UMappingItem\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARMappingItem\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RMappingItem\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_RMappingItem\" pk-column-value=\"SEQ_RMappingItem\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPAConnInstance\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_ConnInstance\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_ConnInstance\" pk-column-value=\"SEQ_ConnInstance\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUPlainAttr\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_UPlainAttr\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_UPlainAttr\" pk-column-value=\"SEQ_UPlainAttr\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARPlainAttr\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RPlainAttr\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_RPlainAttr\" pk-column-value=\"SEQ_RPlainAttr\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARPlainAttrTemplate\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RPlainAttrTemplate\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_RPlainAttrTemplate\" pk-column-value=\"SEQ_RPlainAttrTemplate\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.membership.JPAMPlainAttr\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_MPlainAttr\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_MPlainAttr\" pk-column-value=\"SEQ_MPlainAttr\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.membership.JPAMPlainAttrTemplate\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_MPlainAttrTemplate\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_MPlainAttrTemplate\" pk-column-value=\"SEQ_MPlainAttrTemplate\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.conf.JPACPlainAttr\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_CAttrPlain\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_CAttrPlain\" pk-column-value=\"SEQ_CAttrPlain\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+    \n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUPlainAttrValue\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_UPlainAttrValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.user.JPAUPlainAttrUniqueValue\">\n+    <table>\n+      <unique-constraint>\n+        <column-name>booleanValue</column-name>\n+        <column-name>dateValue</column-name>\n+        <column-name>stringValue</column-name>\n+        <column-name>doubleValue</column-name>\n+        <column-name>longValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+    </table>\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_UPlainAttrValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARPlainAttrValue\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RPlainAttrValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.role.JPARPlainAttrUniqueValue\">\n+    <table>\n+      <unique-constraint>\n+        <column-name>booleanValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>dateValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>stringValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>doubleValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>longValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+    </table>\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_RPlainAttrValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.membership.JPAMPlainAttrValue\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_MAttrPlainValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.membership.JPAMPlainAttrUniqueValue\">\n+    <table>\n+      <unique-constraint>\n+        <column-name>booleanValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>dateValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>stringValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>doubleValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>longValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+    </table>\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_MAttrPlainValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.conf.JPACPlainAttrValue\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_CAttrPlainValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.conf.JPACPlainAttrUniqueValue\">\n+    <table>\n+      <unique-constraint>\n+        <column-name>booleanValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>dateValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>stringValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>doubleValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+      <unique-constraint>\n+        <column-name>longValue</column-name>\n+        <column-name>schema_name</column-name>\n+      </unique-constraint>\n+    </table>\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_CAttrPlainValue\" strategy=\"TABLE\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.task.JPATask\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Task\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Task\" pk-column-value=\"SEQ_Task\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.task.JPATaskExec\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_TaskExec\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_TaskExec\" pk-column-value=\"SEQ_TaskExec\" initial-value=\"10\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+    \n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPAPolicy\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Policy\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Policy\" pk-column-value=\"SEQ_Policy\" initial-value=\"1000\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPAReport\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Report\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Report\" pk-column-value=\"SEQ_Report\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPAReportExec\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_ReportExec\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_ReportExec\" pk-column-value=\"SEQ_ReportExec\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPAReportletConfInstance\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_ReportletConfInstance\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_ReportletConfInstance\" pk-column-value=\"SEQ_ReportletConfInstance\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPANotification\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_Notification\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_Notification\" pk-column-value=\"SEQ_Notification\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+  <entity class=\"org.apache.syncope.server.persistence.jpa.entity.JPASecurityQuestion\">\n+    <attributes>\n+      <id name=\"id\">\n+        <generated-value generator=\"SEQ_SecurityQuestion\" strategy=\"TABLE\"/>\n+        <table-generator name=\"SEQ_SecurityQuestion\" pk-column-value=\"SEQ_SecurityQuestion\" initial-value=\"100\"/>\n+      </id>\n+    </attributes>\n+  </entity>\n+</entity-mappings>"},{"sha":"cfdf5b0f1cfe53674b6e043668dd99ed7208b9a9","filename":"syncope620/fit/server-reference/src/main/resources/sqlserver/persistence.properties","status":"added","additions":29,"deletions":0,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fsqlserver%2Fpersistence.properties?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -0,0 +1,29 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+content.directory=${conf.directory}\n+jpa.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\n+jpa.url=jdbc:sqlserver://acacia:1433;database=syncope;selectMethod=cursor;sendStringParametersAsUnicode=false\n+jpa.username=syncope\n+jpa.password=syncope\n+jpa.dialect=org.apache.openjpa.jdbc.sql.SQLServerDictionary\n+jpa.pool.validationQuery=SELECT 1\n+#note: other connection pool settings can also be configured here, see persistenceContext.xml\n+quartz.jobstore=org.quartz.impl.jdbcjobstore.MSSQLDelegate\n+quartz.scheduler.idleWaitTime=5000\n+quartz.sql=tables_sqlServer.sql\n+audit.sql=audit_sqlserver.sql\n+database.schema="},{"sha":"1ed36e1f05e75f4acf38f8f486effda321348d1f","filename":"syncope620/server/persistence-jpa/src/main/java/org/apache/syncope/server/persistence/jpa/dao/JPAUserDAO.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fserver%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -124,7 +124,7 @@ public User findByWorkflowId(final String workflowId) {\n     @Override\n     public User findByToken(final String token) {\n         TypedQuery<User> query = entityManager.createQuery(\"SELECT e FROM \" + JPAUser.class.getSimpleName()\n-                + \" e WHERE e.token = :token\", User.class);\n+                + \" e WHERE e.token LIKE :token\", User.class);\n         query.setParameter(\"token\", token);\n \n         User result = null;"},{"sha":"ebb8e59702733989df95b2792d20d08f8b775dd6","filename":"syncope620/server/persistence-jpa/src/main/resources/quartz/tables_mariadb.sql","status":"added","additions":206,"deletions":0,"changes":206,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_mariadb.sql","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/40892e192609d22eabd6dfaaf23a6f313d8d572c/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_mariadb.sql","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_mariadb.sql?ref=40892e192609d22eabd6dfaaf23a6f313d8d572c","patch":"@@ -0,0 +1,206 @@\n+-- Licensed to the Apache Software Foundation (ASF) under one\n+-- or more contributor license agreements.  See the NOTICE file\n+-- distributed with this work for additional information\n+-- regarding copyright ownership.  The ASF licenses this file\n+-- to you under the Apache License, Version 2.0 (the\n+-- \"License\"); you may not use this file except in compliance\n+-- with the License.  You may obtain a copy of the License at\n+--\n+--   http://www.apache.org/licenses/LICENSE-2.0\n+--\n+-- Unless required by applicable law or agreed to in writing,\n+-- software distributed under the License is distributed on an\n+-- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+-- KIND, either express or implied.  See the License for the\n+-- specific language governing permissions and limitations\n+-- under the License.\n+\n+--\n+-- Quartz seems to work best with the driver mm.mysql-2.0.7-bin.jar\n+--\n+-- PLEASE consider using mysql with innodb tables to avoid locking issues\n+--\n+-- In your Quartz properties file, you'll need to set \n+-- org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n+--\n+\n+BEGIN;\n+DROP TABLE IF EXISTS QRTZ_FIRED_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_PAUSED_TRIGGER_GRPS;\n+DROP TABLE IF EXISTS QRTZ_SCHEDULER_STATE;\n+DROP TABLE IF EXISTS QRTZ_LOCKS;\n+DROP TABLE IF EXISTS QRTZ_SIMPLE_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_SIMPROP_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_CRON_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_BLOB_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_TRIGGERS;\n+DROP TABLE IF EXISTS QRTZ_JOB_DETAILS;\n+DROP TABLE IF EXISTS QRTZ_CALENDARS;\n+COMMIT;\n+\n+\n+BEGIN;\n+CREATE TABLE QRTZ_JOB_DETAILS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    JOB_NAME  VARCHAR(200) NOT NULL,\n+    JOB_GROUP VARCHAR(200) NOT NULL,\n+    DESCRIPTION VARCHAR(250) NULL,\n+    JOB_CLASS_NAME   VARCHAR(250) NOT NULL,\n+    IS_DURABLE VARCHAR(1) NOT NULL,\n+    IS_NONCONCURRENT VARCHAR(1) NOT NULL,\n+    IS_UPDATE_DATA VARCHAR(1) NOT NULL,\n+    REQUESTS_RECOVERY VARCHAR(1) NOT NULL,\n+    JOB_DATA BLOB NULL,\n+    PRIMARY KEY (SCHED_NAME,JOB_NAME,JOB_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_TRIGGERS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    JOB_NAME  VARCHAR(200) NOT NULL,\n+    JOB_GROUP VARCHAR(200) NOT NULL,\n+    DESCRIPTION VARCHAR(250) NULL,\n+    NEXT_FIRE_TIME BIGINT(13) NULL,\n+    PREV_FIRE_TIME BIGINT(13) NULL,\n+    PRIORITY INTEGER NULL,\n+    TRIGGER_STATE VARCHAR(16) NOT NULL,\n+    TRIGGER_TYPE VARCHAR(8) NOT NULL,\n+    START_TIME BIGINT(13) NOT NULL,\n+    END_TIME BIGINT(13) NULL,\n+    CALENDAR_NAME VARCHAR(200) NULL,\n+    MISFIRE_INSTR SMALLINT(2) NULL,\n+    JOB_DATA BLOB NULL,\n+    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),\n+    FOREIGN KEY (SCHED_NAME,JOB_NAME,JOB_GROUP)\n+        REFERENCES QRTZ_JOB_DETAILS(SCHED_NAME,JOB_NAME,JOB_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_SIMPLE_TRIGGERS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    REPEAT_COUNT BIGINT(7) NOT NULL,\n+    REPEAT_INTERVAL BIGINT(12) NOT NULL,\n+    TIMES_TRIGGERED BIGINT(10) NOT NULL,\n+    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),\n+    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_CRON_TRIGGERS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    CRON_EXPRESSION VARCHAR(200) NOT NULL,\n+    TIME_ZONE_ID VARCHAR(80),\n+    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),\n+    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_SIMPROP_TRIGGERS\n+  (          \n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    STR_PROP_1 VARCHAR(512) NULL,\n+    STR_PROP_2 VARCHAR(512) NULL,\n+    STR_PROP_3 VARCHAR(512) NULL,\n+    INT_PROP_1 INT NULL,\n+    INT_PROP_2 INT NULL,\n+    LONG_PROP_1 BIGINT NULL,\n+    LONG_PROP_2 BIGINT NULL,\n+    DEC_PROP_1 NUMERIC(13,4) NULL,\n+    DEC_PROP_2 NUMERIC(13,4) NULL,\n+    BOOL_PROP_1 VARCHAR(1) NULL,\n+    BOOL_PROP_2 VARCHAR(1) NULL,\n+    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),\n+    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) \n+    REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_BLOB_TRIGGERS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    BLOB_DATA BLOB NULL,\n+    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),\n+    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_CALENDARS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    CALENDAR_NAME  VARCHAR(200) NOT NULL,\n+    CALENDAR BLOB NOT NULL,\n+    PRIMARY KEY (SCHED_NAME,CALENDAR_NAME)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_PAUSED_TRIGGER_GRPS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    TRIGGER_GROUP  VARCHAR(200) NOT NULL, \n+    PRIMARY KEY (SCHED_NAME,TRIGGER_GROUP)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_FIRED_TRIGGERS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    ENTRY_ID VARCHAR(95) NOT NULL,\n+    TRIGGER_NAME VARCHAR(200) NOT NULL,\n+    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n+    INSTANCE_NAME VARCHAR(200) NOT NULL,\n+    FIRED_TIME BIGINT(13) NOT NULL,\n+    SCHED_TIME BIGINT(13) NOT NULL,\n+    PRIORITY INTEGER NOT NULL,\n+    STATE VARCHAR(16) NOT NULL,\n+    JOB_NAME VARCHAR(200) NULL,\n+    JOB_GROUP VARCHAR(200) NULL,\n+    IS_NONCONCURRENT VARCHAR(1) NULL,\n+    REQUESTS_RECOVERY VARCHAR(1) NULL,\n+    PRIMARY KEY (SCHED_NAME,ENTRY_ID)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_SCHEDULER_STATE\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    INSTANCE_NAME VARCHAR(200) NOT NULL,\n+    LAST_CHECKIN_TIME BIGINT(13) NOT NULL,\n+    CHECKIN_INTERVAL BIGINT(13) NOT NULL,\n+    PRIMARY KEY (SCHED_NAME,INSTANCE_NAME)\n+);\n+COMMIT;\n+\n+BEGIN;\n+CREATE TABLE QRTZ_LOCKS\n+  (\n+    SCHED_NAME VARCHAR(120) NOT NULL,\n+    LOCK_NAME  VARCHAR(40) NOT NULL, \n+    PRIMARY KEY (SCHED_NAME,LOCK_NAME)\n+);\n+COMMIT;"}]}