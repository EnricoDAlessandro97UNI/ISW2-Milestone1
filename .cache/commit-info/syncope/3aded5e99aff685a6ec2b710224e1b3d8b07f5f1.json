{"sha":"3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjNhZGVkNWU5OWFmZjY4NWE2ZWMyYjcxMDIyNGUxYjNkOGIwN2Y1ZjE=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2020-04-17T07:40:04Z"},"committer":{"name":"Francesco Chicchiricc√≤","email":"ilgrosso@apache.org","date":"2020-04-17T13:30:33Z"},"message":"[SYNCOPE-957] provides the possibility to specify a layout for linked account management","tree":{"sha":"55a996cd9f475b93636d852c3d86f7eb6a6ea496","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/55a996cd9f475b93636d852c3d86f7eb6a6ea496"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"f2bc720bfc0871396a4fb8592b05a42d5a0a3dfb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f2bc720bfc0871396a4fb8592b05a42d5a0a3dfb","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f2bc720bfc0871396a4fb8592b05a42d5a0a3dfb"}],"stats":{"total":227,"additions":213,"deletions":14},"files":[{"sha":"f3ae43bd5db09d43425758759bf8ecb782a4fcba","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/layout/IdMUserFormLayoutInfo.java","status":"added","additions":38,"deletions":0,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FIdMUserFormLayoutInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FIdMUserFormLayoutInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FIdMUserFormLayoutInfo.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.layout;\n+\n+public class IdMUserFormLayoutInfo extends UserFormLayoutInfo {\n+\n+    private static final long serialVersionUID = -6577172426410570773L;\n+\n+    private LinkedAccountFormLayoutInfo linkedAccountFormLayoutInfo;\n+\n+    public IdMUserFormLayoutInfo() {\n+        this.linkedAccountFormLayoutInfo = new LinkedAccountFormLayoutInfo();\n+    }\n+\n+    public LinkedAccountFormLayoutInfo getLinkedAccountFormLayoutInfo() {\n+        return linkedAccountFormLayoutInfo;\n+    }\n+\n+    public void setLinkedAccountFormLayoutInfo(final LinkedAccountFormLayoutInfo linkedAccountFormLayoutInfo) {\n+        this.linkedAccountFormLayoutInfo = linkedAccountFormLayoutInfo;\n+    }\n+}"},{"sha":"9a8c41076c82b13ea9e05c34f68360ffcc9d9a05","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/layout/LinkedAccountForm.java","status":"added","additions":25,"deletions":0,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountForm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountForm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountForm.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -0,0 +1,25 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.layout;\n+\n+import org.apache.syncope.client.ui.commons.wizards.ModalPanelBuilder;\n+import org.apache.syncope.common.lib.to.LinkedAccountTO;\n+\n+public interface LinkedAccountForm extends ModalPanelBuilder<LinkedAccountTO> {\n+}"},{"sha":"5ba91155877ebf3b3e7d307fce2b75946da20b83","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/layout/LinkedAccountFormLayoutInfo.java","status":"added","additions":86,"deletions":0,"changes":86,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountFormLayoutInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountFormLayoutInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FLinkedAccountFormLayoutInfo.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -0,0 +1,86 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.layout;\n+\n+import java.io.Serializable;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.syncope.client.console.wizards.any.LinkedAccountWizardBuilder;\n+\n+public class LinkedAccountFormLayoutInfo implements Serializable {\n+\n+    private static final long serialVersionUID = -5573691733739618511L;\n+\n+    private Class<? extends LinkedAccountForm> formClass;\n+\n+    private boolean credentials = true;\n+\n+    private final List<String> whichCredentials = new ArrayList<>();\n+\n+    private boolean plainAttrs = true;\n+\n+    private final List<String> whichPlainAttrs = new ArrayList<>();\n+\n+    private boolean privileges = true;\n+\n+    protected Class<? extends LinkedAccountForm> getDefaultFormClass() {\n+        return LinkedAccountWizardBuilder.class;\n+    }\n+\n+    public Class<? extends LinkedAccountForm> getFormClass() {\n+        return formClass == null ? getDefaultFormClass() : formClass;\n+    }\n+\n+    public void setFormClass(final Class<? extends LinkedAccountForm> formClass) {\n+        this.formClass = formClass;\n+    }\n+\n+    public boolean isPlainAttrs() {\n+        return plainAttrs;\n+    }\n+\n+    public void setPlainAttrs(final boolean plainAttrs) {\n+        this.plainAttrs = plainAttrs;\n+    }\n+\n+    public List<String> getWhichPlainAttrs() {\n+        return whichPlainAttrs;\n+    }\n+\n+    public boolean isCredentials() {\n+        return credentials;\n+    }\n+\n+    public void setCredentials(final boolean credentials) {\n+        this.credentials = credentials;\n+    }\n+\n+    public List<String> getWhichCredentials() {\n+        return whichCredentials;\n+    }\n+\n+    public boolean isPrivileges() {\n+        return privileges;\n+    }\n+\n+    public void setPrivileges(final boolean privileges) {\n+        this.privileges = privileges;\n+    }\n+\n+}"},{"sha":"f6bcf8c14ebb6f8b4a37df233bf712012bb40366","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/panels/LinkedAccountModalPanel.java","status":"modified","additions":26,"deletions":2,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FLinkedAccountModalPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FLinkedAccountModalPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FLinkedAccountModalPanel.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -21,9 +21,16 @@\n import java.util.ArrayList;\n import java.util.Comparator;\n import java.util.List;\n+import java.util.stream.Collectors;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n+import org.apache.syncope.client.console.layout.AnyLayout;\n+import org.apache.syncope.client.console.layout.AnyLayoutUtils;\n+import org.apache.syncope.client.console.layout.IdMUserFormLayoutInfo;\n+import org.apache.syncope.client.console.layout.LinkedAccountForm;\n+import org.apache.syncope.client.console.layout.LinkedAccountFormLayoutInfo;\n import org.apache.syncope.client.console.pages.BasePage;\n+import org.apache.syncope.client.console.rest.AnyTypeRestClient;\n import org.apache.syncope.client.console.rest.UserRestClient;\n import org.apache.syncope.client.console.status.LinkedAccountStatusPanel;\n import org.apache.syncope.client.console.status.ReconTaskPanel;\n@@ -38,6 +45,7 @@\n import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.request.LinkedAccountUR;\n import org.apache.syncope.common.lib.request.UserUR;\n+import org.apache.syncope.common.lib.to.EntityTO;\n import org.apache.syncope.common.lib.to.LinkedAccountTO;\n import org.apache.syncope.common.lib.to.PullTaskTO;\n import org.apache.syncope.common.lib.to.PushTaskTO;\n@@ -64,7 +72,7 @@ public class LinkedAccountModalPanel extends Panel implements ModalPanel {\n \n     private static final Logger LOG = LoggerFactory.getLogger(LinkedAccountModalPanel.class);\n \n-    private final LinkedAccountWizardBuilder wizard;\n+    private LinkedAccountForm wizard;\n \n     private final WizardMgtPanel<LinkedAccountTO> list;\n \n@@ -74,6 +82,8 @@ public class LinkedAccountModalPanel extends Panel implements ModalPanel {\n \n     private UserRestClient userRestClient = new UserRestClient();\n \n+    private AnyTypeRestClient anyTypeRestClient = new AnyTypeRestClient();\n+\n     private final List<LinkedAccountTO> linkedAccountTOs;\n \n     @SuppressWarnings(\"unchecked\")\n@@ -93,7 +103,21 @@ public LinkedAccountModalPanel(\n         actionTogglePanel = new ActionLinksTogglePanel<>(\"toggle\", pageRef);\n         add(actionTogglePanel);\n \n-        wizard = new LinkedAccountWizardBuilder(model, pageRef);\n+        AnyLayout anyLayout = AnyLayoutUtils.fetch(\n+                anyTypeRestClient.listAnyTypes().stream().map(EntityTO::getKey).collect(Collectors.toList()));\n+        LinkedAccountFormLayoutInfo linkedAccountFormLayoutInfo =\n+                anyLayout.getUser() instanceof IdMUserFormLayoutInfo\n+                ? IdMUserFormLayoutInfo.class.cast(anyLayout.getUser()).getLinkedAccountFormLayoutInfo()\n+                : new LinkedAccountFormLayoutInfo();\n+\n+        try {\n+            wizard = linkedAccountFormLayoutInfo.getFormClass().\n+                    getConstructor(model.getClass(), LinkedAccountFormLayoutInfo.class, PageReference.class).\n+                    newInstance(model, linkedAccountFormLayoutInfo, pageRef);\n+        } catch (Exception e) {\n+            LOG.error(\"Error instantiating form layout\", e);\n+            wizard = new LinkedAccountWizardBuilder(model, linkedAccountFormLayoutInfo, pageRef);\n+        }\n \n         ListViewPanel.Builder<LinkedAccountTO> builder = new ListViewPanel.Builder<LinkedAccountTO>(\n                 LinkedAccountTO.class, pageRef) {"},{"sha":"0414781a807e794efde9c6937002d3e403b4db1b","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/wizards/any/LinkedAccountCredentialsPanel.java","status":"modified","additions":11,"deletions":3,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountCredentialsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountCredentialsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountCredentialsPanel.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -20,6 +20,7 @@\n \n import de.agilecoders.wicket.extensions.markup.html.bootstrap.form.checkbox.bootstraptoggle.BootstrapToggle;\n import de.agilecoders.wicket.extensions.markup.html.bootstrap.form.checkbox.bootstraptoggle.BootstrapToggleConfig;\n+import java.util.List;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.lib.to.LinkedAccountTO;\n import org.apache.syncope.client.console.commons.LinkedAccountPlainAttrProperty;\n@@ -49,12 +50,14 @@ public class LinkedAccountCredentialsPanel extends WizardStep {\n \n     private final LinkedAccountTO linkedAccountTO;\n \n-    public LinkedAccountCredentialsPanel(final EntityWrapper<LinkedAccountTO> modelObject) {\n+    public LinkedAccountCredentialsPanel(\n+            final EntityWrapper<LinkedAccountTO> modelObject, final List<String> whichCredentials) {\n         super();\n         setOutputMarkupId(true);\n \n         linkedAccountTO = modelObject.getInnerObject();\n \n+        boolean isUsernameManagementEnabled = whichCredentials.contains(\"username\");\n         AjaxTextFieldPanel usernameField = new AjaxTextFieldPanel(\n                 \"username\",\n                 \"username\",\n@@ -64,9 +67,12 @@ public LinkedAccountCredentialsPanel(final EntityWrapper<LinkedAccountTO> modelO\n         usernameProperty.setOverridable(StringUtils.isNotBlank(linkedAccountTO.getUsername()));\n         usernameProperty.setSchema(\"username\");\n         usernameProperty.getValues().add(linkedAccountTO.getUsername());\n-        usernameField.showExternAction(checkboxToggle(usernameProperty, usernameField));\n+        usernameField.showExternAction(\n+                checkboxToggle(usernameProperty, usernameField).setEnabled(isUsernameManagementEnabled));\n         add(usernameField.setOutputMarkupId(true));\n+        usernameField.setEnabled(isUsernameManagementEnabled);\n \n+        boolean isPasswordManagementEnabled = whichCredentials.contains(\"password\");\n         AjaxPasswordFieldPanel passwordField = new AjaxPasswordFieldPanel(\n                 \"password\",\n                 \"password\",\n@@ -79,9 +85,11 @@ public LinkedAccountCredentialsPanel(final EntityWrapper<LinkedAccountTO> modelO\n         passwordProperty.setOverridable(StringUtils.isNotBlank(linkedAccountTO.getPassword()));\n         passwordProperty.setSchema(\"password\");\n         passwordProperty.getValues().add(linkedAccountTO.getPassword());\n-        passwordField.showExternAction(checkboxToggle(passwordProperty, passwordField));\n+        passwordField.showExternAction(\n+                checkboxToggle(passwordProperty, passwordField).setEnabled(isPasswordManagementEnabled));\n         ((PasswordTextField) passwordField.getField()).setResetPassword(false);\n         add(passwordField.setOutputMarkupId(true));\n+        passwordField.setEnabled(isPasswordManagementEnabled);\n     }\n \n     private FormComponent<?> checkboxToggle("},{"sha":"66056916c6f659e485f10fd8bcbc102bfdf2f845","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/wizards/any/LinkedAccountPlainAttrsPanel.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountPlainAttrsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountPlainAttrsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountPlainAttrsPanel.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -43,7 +43,6 @@\n import org.apache.syncope.client.ui.commons.wicket.markup.html.bootstrap.tabs.Accordion;\n import org.apache.syncope.client.ui.commons.wizards.AjaxWizard;\n import org.apache.syncope.common.lib.Attr;\n-import org.apache.syncope.client.console.layout.AnyLayoutUtils;\n import org.apache.syncope.common.lib.types.SchemaType;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.markup.html.tabs.AbstractTab;\n@@ -72,12 +71,13 @@ public class LinkedAccountPlainAttrsPanel extends AbstractAttrsWizardStep<PlainS\n \n     public <T extends AnyTO> LinkedAccountPlainAttrsPanel(\n             final EntityWrapper<LinkedAccountTO> modelObject,\n-            final UserTO userTO) throws IllegalArgumentException {\n+            final UserTO userTO,\n+            final List<String> whichPlainAttrs) throws IllegalArgumentException {\n \n         super(userTO,\n                 AjaxWizard.Mode.EDIT,\n                 AnyTypeRestClient.read(userTO.getType()).getClasses(),\n-                AnyLayoutUtils.fetch(List.of(userTO.getType())).getUser().getWhichPlainAttrs(),\n+                whichPlainAttrs,\n                 modelObject);\n \n         this.linkedAccountTO = modelObject.getInnerObject();"},{"sha":"9d430d7a54b55eb4edbd050508d7a8a5c33618ce","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/wizards/any/LinkedAccountWizardBuilder.java","status":"modified","additions":24,"deletions":5,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FLinkedAccountWizardBuilder.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -23,6 +23,8 @@\n import java.util.HashSet;\n import java.util.Set;\n import java.util.stream.Collectors;\n+import org.apache.syncope.client.console.layout.LinkedAccountForm;\n+import org.apache.syncope.client.console.layout.LinkedAccountFormLayoutInfo;\n import org.apache.syncope.client.console.rest.UserRestClient;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal.ModalEvent;\n import org.apache.syncope.client.console.wizards.BaseAjaxWizardBuilder;\n@@ -40,17 +42,23 @@\n /**\n  * Accounts wizard builder.\n  */\n-public class LinkedAccountWizardBuilder extends BaseAjaxWizardBuilder<LinkedAccountTO> {\n+public class LinkedAccountWizardBuilder extends BaseAjaxWizardBuilder<LinkedAccountTO> implements LinkedAccountForm {\n \n     private static final long serialVersionUID = -9142332740863374891L;\n \n     private final UserRestClient userRestClient = new UserRestClient();\n \n     private final IModel<UserTO> model;\n \n-    public LinkedAccountWizardBuilder(final IModel<UserTO> model, final PageReference pageRef) {\n+    protected LinkedAccountFormLayoutInfo formLayoutInfo;\n+\n+    public LinkedAccountWizardBuilder(\n+            final IModel<UserTO> model,\n+            final LinkedAccountFormLayoutInfo formLayoutInfo,\n+            final PageReference pageRef) {\n         super(new LinkedAccountTO(), pageRef);\n         this.model = model;\n+        this.formLayoutInfo = formLayoutInfo;\n     }\n \n     @Override\n@@ -61,9 +69,20 @@ public AjaxWizard<LinkedAccountTO> build(final String id, final AjaxWizard.Mode\n     @Override\n     protected WizardModel buildModelSteps(final LinkedAccountTO modelObject, final WizardModel wizardModel) {\n         wizardModel.add(new LinkedAccountDetailsPanel(modelObject));\n-        wizardModel.add(new LinkedAccountCredentialsPanel(new EntityWrapper<>(modelObject)));\n-        wizardModel.add(new LinkedAccountPlainAttrsPanel(new EntityWrapper<>(modelObject), model.getObject()));\n-        wizardModel.add(new LinkedAccountPrivilegesPanel(modelObject));\n+        if (formLayoutInfo.isCredentials()) {\n+            wizardModel.add(new LinkedAccountCredentialsPanel(\n+                    new EntityWrapper<>(modelObject), formLayoutInfo.getWhichCredentials()));\n+        }\n+\n+        if (formLayoutInfo.isPlainAttrs()) {\n+            wizardModel.add(new LinkedAccountPlainAttrsPanel(\n+                    new EntityWrapper<>(modelObject), model.getObject(), formLayoutInfo.getWhichPlainAttrs()));\n+        }\n+\n+        if (formLayoutInfo.isPrivileges()) {\n+            wizardModel.add(new LinkedAccountPrivilegesPanel(modelObject));\n+        }\n+\n         return wizardModel;\n     }\n "},{"sha":"22e7e899809ec5a3b7e6bc3ba422c3f9d235af93","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/layout/UserFormLayoutInfo.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FUserFormLayoutInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3aded5e99aff685a6ec2b710224e1b3d8b07f5f1/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FUserFormLayoutInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Flayout%2FUserFormLayoutInfo.java?ref=3aded5e99aff685a6ec2b710224e1b3d8b07f5f1","patch":"@@ -61,5 +61,4 @@ public boolean isRelationships() {\n     public void setRelationships(final boolean relationships) {\n         this.relationships = relationships;\n     }\n-\n }"}]}