{"sha":"1ece2b2c55db31e84098065ded1e2a8f7b31e97e","node_id":"C_kwDOJfYA1toAKDFlY2UyYjJjNTVkYjMxZTg0MDk4MDY1ZGVkMWUyYThmN2IzMWU5N2U","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2023-02-24T12:08:22Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2023-02-24T12:08:22Z"},"message":"Even more flexible assertions for SRA IT cases","tree":{"sha":"580b8f012984c188959bcdd7ef30123c191a75f9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/580b8f012984c188959bcdd7ef30123c191a75f9"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1ece2b2c55db31e84098065ded1e2a8f7b31e97e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1ece2b2c55db31e84098065ded1e2a8f7b31e97e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1ece2b2c55db31e84098065ded1e2a8f7b31e97e","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1ece2b2c55db31e84098065ded1e2a8f7b31e97e/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"aa207f24d848b504783be5a1ead8aecc3eae34ed","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/aa207f24d848b504783be5a1ead8aecc3eae34ed","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/aa207f24d848b504783be5a1ead8aecc3eae34ed"}],"stats":{"total":10,"additions":7,"deletions":3},"files":[{"sha":"d0bb96a093b7bc729f4db3f9890f801c84734021","filename":"fit/wa-reference/src/test/java/org/apache/syncope/fit/sra/AbstractSRAITCase.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1ece2b2c55db31e84098065ded1e2a8f7b31e97e/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1ece2b2c55db31e84098065ded1e2a8f7b31e97e/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java?ref=1ece2b2c55db31e84098065ded1e2a8f7b31e97e","patch":"@@ -263,9 +263,9 @@ protected static ObjectNode checkGetResponse(\n         assertEquals(MediaType.TEXT_HTML, headers.get(HttpHeaders.ACCEPT).asText());\n         assertThat(headers.get(\"X-Forwarded-Host\").asText(), is(oneOf(\"localhost:\" + PORT, \"127.0.0.1:\" + PORT)));\n \n-        assertEquals(\n-                StringUtils.substringBefore(originalRequestURI, \"?\"),\n-                StringUtils.substringBefore(json.get(\"url\").asText(), \"?\"));\n+        String withHost = StringUtils.substringBefore(originalRequestURI, \"?\");\n+        String withIP = withHost.replace(\"localhost\", \"127.0.0.1\");\n+        assertThat(StringUtils.substringBefore(json.get(\"url\").asText(), \"?\"), is(oneOf(withHost, withIP)));\n \n         return headers;\n     }"},{"sha":"580b78ebd1107cd35e7e90d95983fd84670e2d35","filename":"fit/wa-reference/src/test/java/org/apache/syncope/fit/sra/OIDCSRAITCase.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1ece2b2c55db31e84098065ded1e2a8f7b31e97e/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1ece2b2c55db31e84098065ded1e2a8f7b31e97e/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java?ref=1ece2b2c55db31e84098065ded1e2a8f7b31e97e","patch":"@@ -277,6 +277,10 @@ public void rest() throws IOException, ParseException {\n         assertEquals(MediaType.APPLICATION_JSON, headers.get(HttpHeaders.CONTENT_TYPE).asText());\n         assertThat(headers.get(\"X-Forwarded-Host\").asText(), is(oneOf(\"localhost:\" + PORT, \"127.0.0.1:\" + PORT)));\n \n+        String withHost = client.getBaseURI().toASCIIString().replace(\"/protected\", \"\");\n+        String withIP = withHost.replace(\"localhost\", \"127.0.0.1\");\n+        assertThat(json.get(\"url\").asText(), is(oneOf(withHost, withIP)));\n+\n         assertEquals(client.getBaseURI().toASCIIString().replace(\"/protected\", \"\"), json.get(\"url\").asText());\n     }\n }"}]}