{"sha":"952ebc2a008b3c26bf2a343d184aaa5b82d3e248","node_id":"C_kwDOJfYA1toAKDk1MmViYzJhMDA4YjNjMjZiZjJhMzQzZDE4NGFhYTViODJkM2UyNDg","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-10-10T13:41:12Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-10-13T06:55:43Z"},"message":"Upgrading gmavenplus-plugin, Jackson, Nimbus JOSE JWT and Swagger UI","tree":{"sha":"7e3647fbe5deae119a84172ea16b1deba03ef52c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7e3647fbe5deae119a84172ea16b1deba03ef52c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/952ebc2a008b3c26bf2a343d184aaa5b82d3e248","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/952ebc2a008b3c26bf2a343d184aaa5b82d3e248","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/952ebc2a008b3c26bf2a343d184aaa5b82d3e248","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"782cd4aa4308a336ac4bcaa20194851d1d8cb93f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/782cd4aa4308a336ac4bcaa20194851d1d8cb93f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/782cd4aa4308a336ac4bcaa20194851d1d8cb93f"}],"stats":{"total":57,"additions":30,"deletions":27},"files":[{"sha":"441bd120a85a5b1c2534bf842b3983de4a3bcc99","filename":"core/idrepo/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/AbstractService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fidrepo%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FAbstractService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fidrepo%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FAbstractService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fidrepo%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FAbstractService.java?ref=952ebc2a008b3c26bf2a343d184aaa5b82d3e248","patch":"@@ -62,7 +62,7 @@ public abstract class AbstractService implements JAXRSService {\n     protected String getActualKey(final AnyDAO<?> dao, final String pretendingKey) {\n         String actualKey = pretendingKey;\n         if (uriInfo.getPathParameters(true).containsKey(\"key\")) {\n-            final String keyInPath = uriInfo.getPathParameters(true).get(\"key\").get(0);\n+            String keyInPath = uriInfo.getPathParameters(true).get(\"key\").get(0);\n             if (actualKey == null) {\n                 actualKey = keyInPath;\n             } else if (!actualKey.equals(keyInPath)) {"},{"sha":"d11e887c2ab92d4c3b5be8858811228d0d289563","filename":"core/persistence-jpa-json/src/main/resources/domains/jpa-json/MasterContent.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fpersistence-jpa-json%2Fsrc%2Fmain%2Fresources%2Fdomains%2Fjpa-json%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fpersistence-jpa-json%2Fsrc%2Fmain%2Fresources%2Fdomains%2Fjpa-json%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa-json%2Fsrc%2Fmain%2Fresources%2Fdomains%2Fjpa-json%2FMasterContent.xml?ref=952ebc2a008b3c26bf2a343d184aaa5b82d3e248","patch":"@@ -47,7 +47,6 @@ under the License.\n   <Implementation id=\"PushJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.pushpull.PushJobDelegate\"/>\n \n-\n   <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n   <SchedTask id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\""},{"sha":"3e32eeffd9ee4f9b570210c172c9a71c2ff6f8cc","filename":"core/persistence-jpa/src/main/resources/domains/MasterContent.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml?ref=952ebc2a008b3c26bf2a343d184aaa5b82d3e248","patch":"@@ -47,7 +47,6 @@ under the License.\n   <Implementation id=\"PushJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.pushpull.PushJobDelegate\"/>\n \n-\n   <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n   <SchedTask id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\""},{"sha":"c15b8e807fd1c79b3bb130d7dd8b7da342b0ca3a","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserIssuesITCase.java","status":"modified","additions":25,"deletions":20,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserIssuesITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserIssuesITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserIssuesITCase.java?ref=952ebc2a008b3c26bf2a343d184aaa5b82d3e248","patch":"@@ -94,26 +94,6 @@\n \n public class UserIssuesITCase extends AbstractITCase {\n \n-    @Test\n-    public void issueSYNCOPE1699() throws Exception {\n-        UserTO userTO = createUser(UserITCase.getUniqueSample(\"syncope1669@apache.org\")).getEntity();\n-\n-        UserUR req = new UserUR();\n-        req.setUsername(new StringReplacePatchItem.Builder().value(\"newUsername\" + getUUIDString()).build());\n-\n-        WebClient webClient = WebClient.create(ADDRESS + \"/users/\" + userTO.getKey(), ADMIN_UNAME, ADMIN_PWD, null).\n-            accept(MediaType.APPLICATION_JSON_TYPE).\n-            type(MediaType.APPLICATION_JSON_TYPE);\n-\n-        Response response = webClient.invoke(\"PATCH\", JSON_MAPPER.writeValueAsString(req));\n-        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n-\n-        // Key is mismatched in the path parameter and the request body.\n-        req.setKey(UUID.randomUUID().toString());\n-        response = webClient.invoke(\"PATCH\", JSON_MAPPER.writeValueAsString(req));\n-        assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\n-    }\n-    \n     @Test\n     public void issue186() {\n         // 1. create an user with strict mandatory attributes only\n@@ -1576,4 +1556,29 @@ public void issueSYNCOPE1472() {\n         assertFalse(userTO.getAuxClasses().contains(\"csv\"), \"Should not contain removed auxiliary classes\");\n         assertFalse(userTO.getRoles().contains(\"Other\"), \"Should not contain removed roles\");\n     }\n+\n+    @Test\n+    public void issueSYNCOPE1699() throws Exception {\n+        UserTO userTO = createUser(UserITCase.getUniqueSample(\"syncope1669@apache.org\")).getEntity();\n+\n+        UserUR req = new UserUR();\n+        req.setUsername(new StringReplacePatchItem.Builder().value(\"newUsername\" + getUUIDString()).build());\n+\n+        WebClient webClient = WebClient.create(ADDRESS + \"/users/\" + userTO.getKey(), ADMIN_UNAME, ADMIN_PWD, null).\n+                accept(MediaType.APPLICATION_JSON_TYPE).\n+                type(MediaType.APPLICATION_JSON_TYPE);\n+\n+        Response response = webClient.invoke(\"PATCH\", JSON_MAPPER.writeValueAsString(req));\n+        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n+\n+        // Key is mismatched in the path parameter and the request body.\n+        req.setKey(UUID.randomUUID().toString());\n+        response = webClient.invoke(\"PATCH\", JSON_MAPPER.writeValueAsString(req));\n+        assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\n+        \n+        // reading user by its username still works\n+        userTO = USER_SERVICE.read(userTO.getKey());\n+        userTO = USER_SERVICE.read(userTO.getUsername());\n+        assertNotNull(userTO);\n+    }\n }"},{"sha":"0f829ef50c817c1e5088192f43aed17f02c50570","filename":"pom.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/952ebc2a008b3c26bf2a343d184aaa5b82d3e248/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=952ebc2a008b3c26bf2a343d184aaa5b82d3e248","patch":"@@ -413,9 +413,9 @@ under the License.\n \n     <cxf.version>3.5.3</cxf.version>\n     <bouncycastle.version>1.70</bouncycastle.version>\n-    <nimbus-jose-jwt.version>9.25.4</nimbus-jose-jwt.version>\n+    <nimbus-jose-jwt.version>9.25.5</nimbus-jose-jwt.version>\n \n-    <jackson.version>2.14.0-rc1</jackson.version>\n+    <jackson.version>2.14.0-rc2</jackson.version>\n \n     <spring-boot.version>2.7.4</spring-boot.version>\n     <spring-cloud-gateway.version>3.1.4</spring-cloud-gateway.version>\n@@ -456,7 +456,7 @@ under the License.\n     <h2.version>2.1.214</h2.version>\n \n     <swagger-core.version>2.2.3</swagger-core.version>\n-    <swagger-ui.version>4.14.2</swagger-ui.version>\n+    <swagger-ui.version>4.14.3</swagger-ui.version>\n \n     <jquery-slimscroll.version>1.3.8</jquery-slimscroll.version>\n     <jquery-cookie.version>1.4.1-1</jquery-cookie.version>\n@@ -2047,7 +2047,7 @@ under the License.\n       <plugin>\n         <groupId>org.codehaus.gmavenplus</groupId>\n         <artifactId>gmavenplus-plugin</artifactId>\n-        <version>1.13.1</version>\n+        <version>2.0.0</version>\n         <dependencies>\n           <dependency>\n             <groupId>org.apache.groovy</groupId>"}]}