{"sha":"15b2e91362230914b464d3c68f23588b79ec08df","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjE1YjJlOTEzNjIyMzA5MTRiNDY0ZDNjNjhmMjM1ODhiNzllYzA4ZGY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-10-25T10:59:58Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-10-25T10:59:58Z"},"message":"Poor things\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246605 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"dfdf2e3a9f49938ef70a9ce5b371169f5b1b976d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/dfdf2e3a9f49938ef70a9ce5b371169f5b1b976d"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/15b2e91362230914b464d3c68f23588b79ec08df","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/15b2e91362230914b464d3c68f23588b79ec08df","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/15b2e91362230914b464d3c68f23588b79ec08df","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/15b2e91362230914b464d3c68f23588b79ec08df/comments","author":null,"committer":null,"parents":[{"sha":"0f00ecf5740cc4ead8abd034fe53bd94e0a5837f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0f00ecf5740cc4ead8abd034fe53bd94e0a5837f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0f00ecf5740cc4ead8abd034fe53bd94e0a5837f"}],"stats":{"total":49,"additions":40,"deletions":9},"files":[{"sha":"2b1f7346d13ed9d1f95ea55fe4486d7f73f79f48","filename":"core/src/main/java/org/syncope/core/persistence/beans/membership/Membership.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fmembership%2FMembership.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fmembership%2FMembership.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fmembership%2FMembership.java?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -42,12 +42,16 @@ public class Membership extends AbstractAttributable {\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     private Long id;\n+\n     @ManyToOne\n     private SyncopeUser syncopeUser;\n+\n     @ManyToOne\n     private SyncopeRole syncopeRole;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<MembershipAttribute> attributes;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<MembershipDerivedAttribute> derivedAttributes;\n "},{"sha":"b058c69c78399f14be5a06c59dbf8591c7906418","filename":"core/src/main/java/org/syncope/core/persistence/beans/role/SyncopeRole.java","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FSyncopeRole.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FSyncopeRole.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FSyncopeRole.java?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -39,25 +39,36 @@\n \n @Entity\n @Table(uniqueConstraints =\n-@UniqueConstraint(columnNames = {\"name\", \"parent_id\"}))\n+@UniqueConstraint(columnNames = {\n+    \"name\",\n+    \"parent_id\"\n+}))\n public class SyncopeRole extends AbstractAttributable {\n \n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     private Long id;\n+\n     private String name;\n+\n     @ManyToOne(optional = true)\n     private SyncopeRole parent;\n+\n     @OneToMany(cascade = CascadeType.MERGE, mappedBy = \"syncopeRole\")\n     private List<Membership> memberships;\n+\n     @ManyToMany(fetch = FetchType.LAZY)\n     private Set<Entitlement> entitlements;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<RoleAttribute> attributes;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<RoleDerivedAttribute> derivedAttributes;\n+\n     @Basic\n     private Character inheritAttributes;\n+\n     @Basic\n     private Character inheritDerivedAttributes;\n \n@@ -79,7 +90,8 @@ public String getName() {\n         return name;\n     }\n \n-    public void setName(String name) throws IllegalArgumentException {\n+    public void setName(String name)\n+            throws IllegalArgumentException {\n         this.name = name;\n     }\n "},{"sha":"cb00d14ce242ce57103e3ac4183010a1694329be","filename":"core/src/main/java/org/syncope/core/persistence/beans/user/SyncopeUser.java","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FSyncopeUser.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FSyncopeUser.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FSyncopeUser.java?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -42,6 +42,7 @@\n import org.bouncycastle.jce.provider.BouncyCastleProvider;\n import org.hibernate.annotations.Cache;\n import org.hibernate.annotations.CacheConcurrencyStrategy;\n+import org.hibernate.annotations.Cascade;\n import org.syncope.core.persistence.security.AsymmetricCipher;\n import org.syncope.core.persistence.beans.AbstractAttributable;\n import org.syncope.core.persistence.beans.AbstractAttribute;\n@@ -81,22 +82,30 @@ public class SyncopeUser extends AbstractAttributable {\n     generator = \"SEQ_SyncopeUser\")\n     @TableGenerator(name = \"SEQ_SyncopeUser\", allocationSize = 100)\n     private Long id;\n+\n     @Basic\n     @Lob\n     private byte[] passwordKeyPair;\n+\n     @Basic\n     @Lob\n     private byte[] password;\n+\n     @OneToMany(cascade = CascadeType.MERGE, mappedBy = \"syncopeUser\")\n     private List<Membership> memberships;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<UserAttribute> attributes;\n+\n     @OneToMany(cascade = CascadeType.ALL, mappedBy = \"owner\")\n     private List<UserDerivedAttribute> derivedAttributes;\n+\n     @Column(nullable = true)\n     private Long workflowId;\n+\n     @Lob\n     private String token;\n+\n     @Temporal(TemporalType.TIMESTAMP)\n     private Date tokenExpireTime;\n \n@@ -142,7 +151,10 @@ public List<Membership> getMemberships() {\n     }\n \n     public void setMemberships(List<Membership> memberships) {\n-        this.memberships = memberships;\n+        this.memberships.clear();\n+        if (memberships != null && !memberships.isEmpty()) {\n+            this.memberships.addAll(memberships);\n+        }\n     }\n \n     public Set<SyncopeRole> getRoles() {"},{"sha":"756222e4c293c2b1eab41c703a04d20f90308fde","filename":"core/src/main/java/org/syncope/core/rest/controller/UserController.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -64,12 +64,16 @@ public class UserController extends AbstractController {\n \n     @Autowired\n     private SyncopeUserDAO syncopeUserDAO;\n+\n     @Autowired\n     private UserDataBinder userDataBinder;\n+\n     @Autowired\n     private Workflow userWorkflow;\n+\n     @Autowired(required = false)\n     private SpringHibernateJPAWorkflowStore workflowStore;\n+\n     @Autowired\n     private PropagationManager propagationManager;\n "},{"sha":"58b9037795af706be91550c96870818e703da774","filename":"core/src/main/java/org/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -157,7 +157,7 @@ private void fillAttribute(List<String> values,\n \n         AbstractAttributeValue attributeValue;\n         for (String value : valuesProvided) {\n-            if (value == null || value.length() == 0) {\n+            if (value == null || value.isEmpty()) {\n                 if (LOG.isDebugEnabled()) {\n                     LOG.debug(\"Null value for \" + schema.getName()\n                             + \", ignoring\");\n@@ -410,7 +410,6 @@ protected ResourceOperations fill(\n                         attributeMod.getValuesToBeRemoved()) {\n \n                     for (AbstractAttributeValue mav : attribute.getValues()) {\n-\n                         if (valueToBeRemoved.equals(mav.getValueAsString())) {\n                             valuesToBeRemoved.add(mav.getId());\n                         }"},{"sha":"2c7d07ae285b61c4506a833fa72ea2b7e2e44ff4","filename":"core/src/test/resources/content.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=15b2e91362230914b464d3c68f23588b79ec08df","patch":"@@ -40,10 +40,10 @@\n     <SyncopeConfiguration confKey=\"identityconnectors.bundle.directory\"\n                           confValue=\"/tmp/bundles\"/>\n                           \n-    <SyncopeUser id=\"1\" password=\"1\" workflowId=\"0\"/>\n-    <SyncopeUser id=\"2\" password=\"1\" workflowId=\"0\"/>\n-    <SyncopeUser id=\"3\" password=\"1\" workflowId=\"0\"/>\n-    <SyncopeUser id=\"4\" password=\"1\" workflowId=\"0\"/>\n+    <SyncopeUser id=\"1\" workflowId=\"0\"/>\n+    <SyncopeUser id=\"2\" workflowId=\"0\"/>\n+    <SyncopeUser id=\"3\" workflowId=\"0\"/>\n+    <SyncopeUser id=\"4\" workflowId=\"0\"/>\n \n     <SyncopeRole id=\"1\" name=\"root\" inheritAttributes=\"F\" inheritDerivedAttributes=\"F\"/>\n     <SyncopeRole id=\"2\" name=\"child\" parent_id=\"1\" inheritAttributes=\"F\" inheritDerivedAttributes=\"F\"/>"},{"sha":"a7e47de8d231bfd551a50a23d2ae526594a1d497","filename":"core/src/test/resources/exploredb.jsp","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15b2e91362230914b464d3c68f23588b79ec08df/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp?ref=15b2e91362230914b464d3c68f23588b79ec08df","previous_filename":"core/src/test/webapp/exploredb.jsp"}]}