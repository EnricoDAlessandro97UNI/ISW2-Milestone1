{"sha":"2eef472041062d48ba54db1c25fabd45624cfaea","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjJlZWY0NzIwNDEwNjJkNDhiYTU0ZGIxYzI1ZmFiZDQ1NjI0Y2ZhZWE=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-02-09T10:51:50Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-02-09T10:51:50Z"},"message":"Handling core errors when creating / updating / deletin a resource\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246774 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0919260b5f24ee9c2f81a0752c20d2879ab975b6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0919260b5f24ee9c2f81a0752c20d2879ab975b6"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2eef472041062d48ba54db1c25fabd45624cfaea","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2eef472041062d48ba54db1c25fabd45624cfaea","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2eef472041062d48ba54db1c25fabd45624cfaea","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2eef472041062d48ba54db1c25fabd45624cfaea/comments","author":null,"committer":null,"parents":[{"sha":"25ce4f250e91d7c4123ba7a79f8ba385f817abbc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/25ce4f250e91d7c4123ba7a79f8ba385f817abbc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/25ce4f250e91d7c4123ba7a79f8ba385f817abbc"}],"stats":{"total":79,"additions":38,"deletions":41},"files":[{"sha":"430c917c05c57cff97f5fdb96f7e0a1c01859790","filename":"console/src/main/java/org/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":10,"deletions":6,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=2eef472041062d48ba54db1c25fabd45624cfaea","patch":"@@ -332,7 +332,8 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                 getString(\"submit\"))) {\n \n             @Override\n-            protected void onSubmit(AjaxRequestTarget target, Form form) {\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n \n                 ResourceTO resourceTO =\n                         (ResourceTO) form.getDefaultModelObject();\n@@ -349,27 +350,30 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                     return;\n                 }\n \n+                Resources callerPage = (Resources) basePage;\n                 try {\n-                    LOG.info(\"XXXXXXXX \" + resourceTO);\n-\n                     if (createFlag) {\n                         restClient.createResource(resourceTO);\n                     } else {\n                         restClient.updateResource(resourceTO);\n                     }\n \n-                    Resources callerPage = (Resources) basePage;\n                     callerPage.setOperationResult(true);\n \n                     window.close(target);\n-\n                 } catch (SyncopeClientCompositeErrorException e) {\n                     error(getString(\"error\") + \":\" + e.getMessage());\n+                    callerPage.setOperationResult(false);\n+\n+                    LOG.error(\"While creating or updating resource \"\n+                            + resourceTO);\n                 }\n             }\n \n             @Override\n-            protected void onError(AjaxRequestTarget target, Form form) {\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n                 target.addComponent(feedbackPanel);\n             }\n         };"},{"sha":"892bef7f447b71d53fb8e06a4d3ca41ae0ec9eb3","filename":"console/src/main/java/org/syncope/console/pages/Resources.java","status":"modified","additions":17,"deletions":9,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=2eef472041062d48ba54db1c25fabd45624cfaea","patch":"@@ -27,12 +27,10 @@\n import org.apache.wicket.ajax.calldecorator.AjaxPreprocessingCallDecorator;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata\n-                                            .MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n-import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table\n-                                            .AjaxFallbackDefaultDataTable;\n+import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n@@ -48,6 +46,7 @@\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.ResourceTO;\n+import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.Utility;\n import org.syncope.console.rest.ResourceRestClient;\n@@ -148,12 +147,19 @@ public void populateItem(Item<ICellPopulator<ResourceTO>> cellItem,\n                 AjaxLink deleteLink = new IndicatingAjaxLink(\"deleteLink\") {\n \n                     @Override\n-                    public void onClick(AjaxRequestTarget target) {\n-                        restClient.deleteResource(resourceTO.getName());\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        try {\n+                            restClient.deleteResource(resourceTO.getName());\n \n-                        info(getString(\"operation_succeded\"));\n-                        target.addComponent(feedbackPanel);\n+                            info(getString(\"operation_succeded\"));\n+                        } catch (SyncopeClientCompositeErrorException e) {\n+                            info(getString(\"operation_error\"));\n \n+                            LOG.error(\"While deleting resource \"\n+                                    + resourceTO.getName());\n+                        }\n+\n+                        target.addComponent(feedbackPanel);\n                         target.addComponent(container);\n                     }\n \n@@ -165,7 +171,9 @@ protected IAjaxCallDecorator getAjaxCallDecorator() {\n                             private static final long serialVersionUID = 1L;\n \n                             @Override\n-                            public CharSequence preDecorateScript(CharSequence script) {\n+                            public CharSequence preDecorateScript(\n+                                    CharSequence script) {\n+\n                                 return \"if (confirm('\" + getString(\n                                         \"confirmDelete\") + \"'))\"\n                                         + \"{\" + script + \"}\";"},{"sha":"6bce2228538763eb555c6918f58a2b7f2d4c3220","filename":"console/src/main/java/org/syncope/console/rest/ResourceRestClient.java","status":"modified","additions":11,"deletions":26,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FResourceRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2eef472041062d48ba54db1c25fabd45624cfaea/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FResourceRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FResourceRestClient.java?ref=2eef472041062d48ba54db1c25fabd45624cfaea","patch":"@@ -48,21 +48,17 @@ public List<ResourceTO> getAllResources() {\n      * Create new resource.\n      * @param resourceTO\n      */\n-    public void createResource(ResourceTO resourceTO) {\n-        try {\n-            restTemplate.postForObject(baseURL\n-                    + \"resource/create\", resourceTO, ResourceTO.class);\n-        } catch (SyncopeClientCompositeErrorException e) {\n-            LOG.error(\"While creating a resource\", e);\n-        }\n+    public void createResource(final ResourceTO resourceTO) {\n+        restTemplate.postForObject(baseURL\n+                + \"resource/create\", resourceTO, ResourceTO.class);\n     }\n \n     /**\n      * Load an already existent resource by its name.\n      * @param name (e.g.:surname)\n      * @return ResourceTO\n      */\n-    public ResourceTO readResource(String name) {\n+    public ResourceTO readResource(final String name) {\n         ResourceTO resourceTO = null;\n \n         try {\n@@ -79,29 +75,18 @@ public ResourceTO readResource(String name) {\n      * Update an already existent resource.\n      * @param schemaTO updated\n      */\n-    public void updateResource(ResourceTO resourceTO) {\n-        ResourceTO newResourceTO;\n-\n-        try {\n-            newResourceTO = restTemplate.postForObject(\n-                    baseURL + \"resource/update.json\", resourceTO,\n-                    ResourceTO.class);\n-        } catch (SyncopeClientCompositeErrorException e) {\n-            LOG.error(\"While updating a resource\", e);\n-        }\n-\n+    public void updateResource(final ResourceTO resourceTO) {\n+        restTemplate.postForObject(\n+                baseURL + \"resource/update.json\", resourceTO,\n+                ResourceTO.class);\n     }\n \n     /**\n      * Delete an already existent resource by its name.\n      * @param name\n      */\n-    public void deleteResource(String name) {\n-        try {\n-            restTemplate.delete(baseURL\n-                    + \"resource/delete/{resourceName}.json\", name);\n-        } catch (SyncopeClientCompositeErrorException e) {\n-            LOG.error(\"While deleting a resource\", e);\n-        }\n+    public void deleteResource(final String name) {\n+        restTemplate.delete(baseURL\n+                + \"resource/delete/{resourceName}.json\", name);\n     }\n }"}]}