{"sha":"ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","node_id":"C_kwDOJfYA1toAKGVjYzYzYmYyYjlmMDM3YTg4Y2QyM2NhMzU3NTA3N2JmYjk1OGM5YmE","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-11T12:49:26Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-11T12:49:26Z"},"message":"[SYNCOPE-1466] Context was missing for workflow delete management","tree":{"sha":"459edd061084073ee9a3ff782a26b21174cc4aa1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/459edd061084073ee9a3ff782a26b21174cc4aa1"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"f83114b7dd9e7b91fed783cb105696ea42c002bb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f83114b7dd9e7b91fed783cb105696ea42c002bb","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f83114b7dd9e7b91fed783cb105696ea42c002bb"}],"stats":{"total":121,"additions":61,"deletions":60},"files":[{"sha":"19924937400450c1db9e83dd592ce6b326f1147d","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAAnyObjectDAO.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -48,6 +48,7 @@\n import org.apache.syncope.core.persistence.api.entity.AnyType;\n import org.apache.syncope.core.persistence.api.entity.AnyUtils;\n import org.apache.syncope.core.persistence.api.entity.AnyUtilsFactory;\n+import org.apache.syncope.core.persistence.api.entity.Membership;\n import org.apache.syncope.core.persistence.api.entity.Realm;\n import org.apache.syncope.core.persistence.api.entity.Relationship;\n import org.apache.syncope.core.persistence.api.entity.anyobject.AMembership;\n@@ -322,7 +323,7 @@ public List<Group> findDynGroups(final String key) {\n     public Collection<Group> findAllGroups(final AnyObject anyObject) {\n         Set<Group> result = new HashSet<>();\n         result.addAll(anyObject.getMemberships().stream().\n-                map(Relationship::getRightEnd).collect(Collectors.toSet()));\n+                map(Membership::getRightEnd).collect(Collectors.toSet()));\n         result.addAll(findDynGroups(anyObject.getKey()));\n \n         return result;"},{"sha":"0fe9baeb6b85ad133015c7c57d013f3274127698","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAUserDAO.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -36,7 +36,6 @@\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.syncope.common.lib.types.EntityViolationType;\n import org.apache.syncope.common.lib.types.IdRepoEntitlement;\n-import org.apache.syncope.core.persistence.api.entity.Relationship;\n import org.apache.syncope.core.spring.security.AuthContextUtils;\n import org.apache.syncope.core.spring.security.DelegatedAdministrationException;\n import org.apache.syncope.core.persistence.api.attrvalue.validation.InvalidEntityException;\n@@ -55,6 +54,7 @@\n import org.apache.syncope.core.persistence.api.entity.Delegation;\n import org.apache.syncope.core.persistence.api.entity.Entity;\n import org.apache.syncope.core.persistence.api.entity.Implementation;\n+import org.apache.syncope.core.persistence.api.entity.Membership;\n import org.apache.syncope.core.persistence.api.entity.Privilege;\n import org.apache.syncope.core.persistence.api.entity.Realm;\n import org.apache.syncope.core.persistence.api.entity.Role;\n@@ -572,7 +572,7 @@ public List<Group> findDynGroups(final String key) {\n     public Collection<Group> findAllGroups(final User user) {\n         Set<Group> result = new HashSet<>();\n         result.addAll(user.getMemberships().stream().\n-                map(Relationship::getRightEnd).collect(Collectors.toSet()));\n+                map(Membership::getRightEnd).collect(Collectors.toSet()));\n         result.addAll(findDynGroups(user.getKey()));\n \n         return result;"},{"sha":"9a5ef1441a3ecbc6f22ce5978115a7c3b2e489c5","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/DefaultAnyObjectProvisioningManager.java","status":"modified","additions":2,"deletions":7,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultAnyObjectProvisioningManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultAnyObjectProvisioningManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultAnyObjectProvisioningManager.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -36,7 +36,6 @@\n import org.apache.syncope.core.provisioning.api.propagation.PropagationReporter;\n import org.apache.syncope.core.provisioning.api.propagation.PropagationTaskExecutor;\n import org.apache.syncope.core.provisioning.api.VirAttrHandler;\n-import org.apache.syncope.core.provisioning.api.propagation.PropagationException;\n import org.apache.syncope.core.provisioning.api.propagation.PropagationTaskInfo;\n import org.apache.syncope.core.workflow.api.AnyObjectWorkflowAdapter;\n import org.springframework.transaction.annotation.Propagation;\n@@ -159,7 +158,7 @@ public List<PropagationStatus> delete(\n         // task defined in workflow process definition: this because this\n         // information could only be available after awfAdapter.delete(), which\n         // will also effectively remove user from db, thus making virtually\n-        // impossible by NotificationManager to fetch required user information\n+        // impossible by NotificationManager to fetch required any object information\n         List<PropagationTaskInfo> taskInfos = propagationManager.getDeleteTasks(\n                 AnyTypeKind.ANY_OBJECT,\n                 key,\n@@ -168,11 +167,7 @@ public List<PropagationStatus> delete(\n                 excludedResources);\n         PropagationReporter propagationReporter = taskExecutor.execute(taskInfos, nullPriorityAsync, eraser);\n \n-        try {\n-            awfAdapter.delete(key);\n-        } catch (PropagationException e) {\n-            throw e;\n-        }\n+        awfAdapter.delete(key, eraser, context);\n \n         return propagationReporter.getStatuses();\n     }"},{"sha":"c9b9ce8077addf5b633dbbba724267d47e38e544","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/DefaultGroupProvisioningManager.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultGroupProvisioningManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultGroupProvisioningManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultGroupProvisioningManager.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -200,7 +200,7 @@ public List<PropagationStatus> delete(\n \n         PropagationReporter propagationReporter = taskExecutor.execute(taskInfos, nullPriorityAsync, eraser);\n \n-        gwfAdapter.delete(key);\n+        gwfAdapter.delete(key, eraser, context);\n \n         return propagationReporter.getStatuses();\n     }"},{"sha":"ee80b0f2ebad19a294c107bca8e9fa470ece5d52","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/DefaultUserProvisioningManager.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultUserProvisioningManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultUserProvisioningManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FDefaultUserProvisioningManager.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -229,7 +229,7 @@ public List<PropagationStatus> delete(\n                 excludedResources);\n         PropagationReporter propagationReporter = taskExecutor.execute(taskInfos, nullPriorityAsync, eraser);\n \n-        uwfAdapter.delete(key);\n+        uwfAdapter.delete(key, eraser, context);\n \n         return propagationReporter.getStatuses();\n     }"},{"sha":"193a4d1a4684b2ff5f30168da90ef2a936015407","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/UserDataBinderImpl.java","status":"modified","additions":25,"deletions":27,"changes":52,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -299,23 +299,6 @@ public LinkedAccount get() {\n         }\n     }\n \n-    private LinkedAccountTO getLinkedAccountTO(final LinkedAccount account, final boolean returnPasswordValue) {\n-        LinkedAccountTO accountTO = new LinkedAccountTO.Builder(\n-                account.getKey(), account.getResource().getKey(), account.getConnObjectKeyValue()).\n-                username(account.getUsername()).\n-                password(returnPasswordValue ? account.getPassword() : null).\n-                suspended(BooleanUtils.isTrue(account.isSuspended())).\n-                build();\n-\n-        account.getPlainAttrs().forEach(plainAttr -> accountTO.getPlainAttrs().add(\n-                new Attr.Builder(plainAttr.getSchema().getKey()).values(plainAttr.getValuesAsStrings()).build()));\n-\n-        accountTO.getPrivileges().addAll(account.getPrivileges().stream().\n-                map(Privilege::getKey).collect(Collectors.toList()));\n-\n-        return accountTO;\n-    }\n-\n     @Override\n     public void create(final User user, final UserCR userCR) {\n         SyncopeClientCompositeException scce = SyncopeClientException.buildComposite();\n@@ -769,6 +752,23 @@ public Pair<PropagationByResource<String>, PropagationByResource<Pair<String, St\n         return Pair.of(propByRes, propByLinkedAccount);\n     }\n \n+    private LinkedAccountTO getLinkedAccountTO(final LinkedAccount account, final boolean returnPasswordValue) {\n+        LinkedAccountTO accountTO = new LinkedAccountTO.Builder(\n+                account.getKey(), account.getResource().getKey(), account.getConnObjectKeyValue()).\n+                username(account.getUsername()).\n+                password(returnPasswordValue ? account.getPassword() : null).\n+                suspended(BooleanUtils.isTrue(account.isSuspended())).\n+                build();\n+\n+        account.getPlainAttrs().forEach(plainAttr -> accountTO.getPlainAttrs().add(\n+                new Attr.Builder(plainAttr.getSchema().getKey()).values(plainAttr.getValuesAsStrings()).build()));\n+\n+        accountTO.getPrivileges().addAll(account.getPrivileges().stream().\n+                map(Privilege::getKey).collect(Collectors.toList()));\n+\n+        return accountTO;\n+    }\n+\n     @Transactional(readOnly = true)\n     @Override\n     public LinkedAccountTO getLinkedAccountTO(final LinkedAccount account) {\n@@ -842,23 +842,21 @@ public UserTO getUserTO(final User user, final boolean details) {\n                     collect(Collectors.toList()));\n \n             // memberships\n-            userTO.getMemberships().addAll(\n-                    user.getMemberships().stream().map(membership -> getMembershipTO(\n-                    user.getPlainAttrs(membership),\n+            userTO.getMemberships().addAll(user.getMemberships().stream().\n+                    map(membership -> getMembershipTO(user.getPlainAttrs(membership),\n                     derAttrHandler.getValues(user, membership),\n                     virAttrHandler.getValues(user, membership),\n                     membership)).collect(Collectors.toList()));\n \n             // dynamic memberships\n-            userTO.getDynMemberships().addAll(\n-                    userDAO.findDynGroups(user.getKey()).stream().\n-                            map(group -> new MembershipTO.Builder(group.getKey()).groupName(group.getName()).build()).\n-                            collect(Collectors.toList()));\n+            userTO.getDynMemberships().addAll(userDAO.findDynGroups(user.getKey()).stream().\n+                    map(group -> new MembershipTO.Builder(group.getKey()).groupName(group.getName()).build()).\n+                    collect(Collectors.toList()));\n \n             // linked accounts\n-            userTO.getLinkedAccounts().addAll(\n-                    user.getLinkedAccounts().stream().map(a -> getLinkedAccountTO(a, returnPasswordValue))\n-                            .collect(Collectors.toList()));\n+            userTO.getLinkedAccounts().addAll(user.getLinkedAccounts().stream().\n+                    map(account -> getLinkedAccountTO(account, returnPasswordValue)).\n+                    collect(Collectors.toList()));\n \n             // delegations\n             userTO.getDelegatingDelegations().addAll("},{"sha":"57f8ff56a442086afdd0f551c37da8a4442a0bdb","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/AnyObjectWorkflowAdapter.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -28,7 +28,7 @@\n public interface AnyObjectWorkflowAdapter extends WorkflowAdapter {\n \n     /**\n-     * Create a anyObject.\n+     * Create an anyObject.\n      *\n      * @param anyObjectCR anyObject to be created and whether to propagate it as active\n      * @param creator username that requested this operation\n@@ -38,7 +38,7 @@ public interface AnyObjectWorkflowAdapter extends WorkflowAdapter {\n     WorkflowResult<String> create(AnyObjectCR anyObjectCR, String creator, String context);\n \n     /**\n-     * Update a anyObject.\n+     * Update an anyObject.\n      *\n      * @param anyObjectUR modification set to be performed\n      * @param updater username that requested this operation\n@@ -48,9 +48,11 @@ public interface AnyObjectWorkflowAdapter extends WorkflowAdapter {\n     WorkflowResult<AnyObjectUR> update(AnyObjectUR anyObjectUR, String updater, String context);\n \n     /**\n-     * Delete a anyObject.\n+     * Delete an anyObject.\n      *\n      * @param anyObjectKey anyObject to be deleted\n+     * @param eraser username that requested this operation\n+     * @param context context information\n      */\n-    void delete(String anyObjectKey);\n+    void delete(String anyObjectKey, String eraser, String context);\n }"},{"sha":"c859cb262e31fbea155c6324f1e48cf6b732c3e1","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/GroupWorkflowAdapter.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -51,6 +51,8 @@ public interface GroupWorkflowAdapter extends WorkflowAdapter {\n      * Delete a group.\n      *\n      * @param groupKey group to be deleted\n+     * @param eraser username that requested this operation\n+     * @param context context information\n      */\n-    void delete(String groupKey);\n+    void delete(String groupKey, String eraser, String context);\n }"},{"sha":"6dfcbeb93817da477b303e9e2fb0bc1db5f02042","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/UserWorkflowAdapter.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -128,6 +128,8 @@ UserWorkflowResult<Pair<UserUR, Boolean>> confirmPasswordReset(\n      * Delete an user.\n      *\n      * @param userKey user to be deleted\n+     * @param eraser username that requested this operation\n+     * @param context context information\n      */\n-    void delete(String userKey);\n+    void delete(String userKey, String eraser, String context);\n }"},{"sha":"b8f6d0b68cef4f81df914aadc19da839c09a8652","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractAnyObjectWorkflowAdapter.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -92,10 +92,10 @@ public WorkflowResult<AnyObjectUR> update(\n         return result;\n     }\n \n-    protected abstract void doDelete(AnyObject anyObject);\n+    protected abstract void doDelete(AnyObject anyObject, String eraser, String context);\n \n     @Override\n-    public void delete(final String anyObjectKey) {\n-        doDelete(anyObjectDAO.authFind(anyObjectKey));\n+    public void delete(final String anyObjectKey, final String eraser, final String context) {\n+        doDelete(anyObjectDAO.authFind(anyObjectKey), eraser, context);\n     }\n }"},{"sha":"50a700ea95df7bbb00040a4f380006fe3721a9cc","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractGroupWorkflowAdapter.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -72,10 +72,10 @@ public WorkflowResult<GroupUR> update(final GroupUR groupUR, final String update\n         return result;\n     }\n \n-    protected abstract void doDelete(Group group);\n+    protected abstract void doDelete(Group group, String eraser, String context);\n \n     @Override\n-    public void delete(final String groupKey) {\n-        doDelete(groupDAO.authFind(groupKey));\n+    public void delete(final String groupKey, final String eraser, final String context) {\n+        doDelete(groupDAO.authFind(groupKey), eraser, context);\n     }\n }"},{"sha":"eb9e21eb1f52247f9ab10d8483c2929213db2f2e","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractUserWorkflowAdapter.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -188,10 +188,10 @@ public UserWorkflowResult<Pair<UserUR, Boolean>> confirmPasswordReset(\n         return doConfirmPasswordReset(userDAO.authFind(key), token, password, updater, context);\n     }\n \n-    protected abstract void doDelete(User user);\n+    protected abstract void doDelete(User user, String eraser, String context);\n \n     @Override\n-    public void delete(final String userKey) {\n-        doDelete(userDAO.authFind(userKey));\n+    public void delete(final String userKey, final String eraser, final String context) {\n+        doDelete(userDAO.authFind(userKey), eraser, context);\n     }\n }"},{"sha":"ecb3305c34aeffa01a7886cf431f27da8b529d81","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultAnyObjectWorkflowAdapter.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -68,7 +68,7 @@ protected WorkflowResult<AnyObjectUR> doUpdate(\n     }\n \n     @Override\n-    protected void doDelete(final AnyObject anyObject) {\n+    protected void doDelete(final AnyObject anyObject, final String eraser, final String context) {\n         anyObjectDAO.delete(anyObject);\n     }\n }"},{"sha":"1ec0c8b4d53b98b48f4846b1b22f5ed3e87be6ae","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultGroupWorkflowAdapter.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -66,7 +66,7 @@ protected WorkflowResult<GroupUR> doUpdate(\n     }\n \n     @Override\n-    protected void doDelete(final Group group) {\n+    protected void doDelete(final Group group, final String eraser, final String context) {\n         groupDAO.delete(group);\n     }\n }"},{"sha":"07e0674953c9bf7e9f960b19032b4556df36f751","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultUserWorkflowAdapter.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -179,7 +179,7 @@ protected UserWorkflowResult<Pair<UserUR, Boolean>> doConfirmPasswordReset(\n     }\n \n     @Override\n-    protected void doDelete(final User user) {\n+    protected void doDelete(final User user, final String eraser, final String context) {\n         userDAO.delete(user);\n     }\n }"},{"sha":"c985812e562451a4474bcf1178670c4147b2d1b0","filename":"ext/camel/provisioning-camel/src/main/resources/userRoutes.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/ext%2Fcamel%2Fprovisioning-camel%2Fsrc%2Fmain%2Fresources%2FuserRoutes.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/ext%2Fcamel%2Fprovisioning-camel%2Fsrc%2Fmain%2Fresources%2FuserRoutes.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fcamel%2Fprovisioning-camel%2Fsrc%2Fmain%2Fresources%2FuserRoutes.xml?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -88,7 +88,7 @@ under the License.\n     <from uri=\"direct:deleteUser\"/>\n     <doTry>\n       <to uri=\"propagate:delete?anyTypeKind=USER\"/>\n-      <bean ref=\"uwfAdapter\" method=\"delete(${body})\"/>\n+      <bean ref=\"uwfAdapter\" method=\"delete(${body},${exchangeProperty.eraser},${exchangeProperty.context})\"/>\n       <setBody>\n         <simple>${exchangeProperty.statuses}</simple>\n       </setBody>"},{"sha":"347588c71ad8a6a68cbe800d4b2a52c9b43b4291","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableUserWorkflowAdapter.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -436,7 +436,7 @@ protected UserWorkflowResult<Pair<UserUR, Boolean>> doConfirmPasswordReset(\n     }\n \n     @Override\n-    protected void doDelete(final User user) {\n+    protected void doDelete(final User user, final String eraser, final String context) {\n         String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n \n         doExecuteNextTask(procInstID, user, Map.of(FlowableRuntimeUtils.TASK, \"delete\"));\n@@ -470,6 +470,7 @@ protected void doDelete(final User user) {\n                     propByLinkedAccount);\n \n             FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+            metadata(user, eraser, context);\n             userDAO.save(user);\n \n             engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);"},{"sha":"f590285582e8e3a9f5b7d63ffc5bb0402db0d49d","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","patch":"@@ -466,7 +466,7 @@ under the License.\n     <chartjs.version>1.0.2</chartjs.version>\n \n     <wicket.version>9.9.1</wicket.version>\n-    <wicketstuff.version>9.9.0</wicketstuff.version>\n+    <wicketstuff.version>9.9.1</wicketstuff.version>\n     <wicket-jqueryui.version>9.8.0</wicket-jqueryui.version>\n     <wicket-bootstrap.version>5.0.6</wicket-bootstrap.version>\n     <wicket-spring-boot.version>3.1.6</wicket-spring-boot.version>"}]}