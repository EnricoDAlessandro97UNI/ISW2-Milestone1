{"sha":"60feab587b814e97456dc23c242bc54001d81c60","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjYwZmVhYjU4N2I4MTRlOTc0NTZkYzIzYzI0MmJjNTQwMDFkODFjNjA=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-07-28T09:14:55Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-07-28T09:14:55Z"},"message":"Fixing inheritanche issues between SchedTaskTO and SyncTaskTO\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247054 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"00e2a4622e82cd5982156d5267b4b9122d6509c3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/00e2a4622e82cd5982156d5267b4b9122d6509c3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/60feab587b814e97456dc23c242bc54001d81c60","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/60feab587b814e97456dc23c242bc54001d81c60","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/60feab587b814e97456dc23c242bc54001d81c60","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/60feab587b814e97456dc23c242bc54001d81c60/comments","author":null,"committer":null,"parents":[{"sha":"ca3527c37c5b2bf930b0ed821a4f293b626d0fee","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ca3527c37c5b2bf930b0ed821a4f293b626d0fee","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ca3527c37c5b2bf930b0ed821a4f293b626d0fee"}],"stats":{"total":42,"additions":27,"deletions":15},"files":[{"sha":"4784c7a30f763d246684f39bab9f60fd6b7ee2e3","filename":"core/src/main/java/org/syncope/core/rest/controller/AbstractController.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FAbstractController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FAbstractController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FAbstractController.java?ref=60feab587b814e97456dc23c242bc54001d81c60","patch":"@@ -72,10 +72,10 @@ protected TaskUtil getTaskUtil(final String kind) {\n     protected TaskUtil getTaskUtil(final Task task) {\n         TaskUtil result = (task instanceof PropagationTask)\n                 ? TaskUtil.PROPAGATION\n-                : (task instanceof SchedTask)\n-                ? TaskUtil.SCHED\n                 : (task instanceof SyncTask)\n                 ? TaskUtil.SYNC\n+                : (task instanceof SchedTask)\n+                ? TaskUtil.SCHED\n                 : null;\n \n         if (result == null) {"},{"sha":"33de27833d10a288af4a279b646d498e7a1ec690","filename":"core/src/main/java/org/syncope/core/rest/controller/TaskController.java","status":"modified","additions":12,"deletions":2,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FTaskController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FTaskController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FTaskController.java?ref=60feab587b814e97456dc23c242bc54001d81c60","patch":"@@ -40,6 +40,7 @@\n import org.springframework.web.bind.annotation.RequestParam;\n import org.springframework.web.servlet.ModelAndView;\n import org.syncope.client.mod.SchedTaskMod;\n+import org.syncope.client.mod.SyncTaskMod;\n import org.syncope.client.to.SchedTaskTO;\n import org.syncope.client.to.SyncTaskTO;\n import org.syncope.client.to.TaskExecTO;\n@@ -151,8 +152,17 @@ public TaskTO createSchedTask(final HttpServletResponse response,\n \n     @PreAuthorize(\"hasRole('TASK_UPDATE')\")\n     @RequestMapping(method = RequestMethod.POST,\n-    value = \"/update\")\n-    public TaskTO update(@RequestBody SchedTaskMod taskMod)\n+    value = \"/update/sync\")\n+    public TaskTO updateSync(@RequestBody SyncTaskMod taskMod)\n+            throws NotFoundException {\n+\n+        return updateSched(taskMod);\n+    }\n+\n+    @PreAuthorize(\"hasRole('TASK_UPDATE')\")\n+    @RequestMapping(method = RequestMethod.POST,\n+    value = \"/update/sched\")\n+    public TaskTO updateSched(@RequestBody SchedTaskMod taskMod)\n             throws NotFoundException {\n \n         LOG.debug(\"Task update called with parameter {}\", taskMod);"},{"sha":"c69982dd18e8239d561e5efe6adc517d0f6f2f90","filename":"core/src/test/java/org/syncope/core/rest/TaskTestITCase.java","status":"modified","additions":13,"deletions":11,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/60feab587b814e97456dc23c242bc54001d81c60/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java?ref=60feab587b814e97456dc23c242bc54001d81c60","patch":"@@ -25,26 +25,28 @@\n import org.syncope.client.to.TaskExecTO;\n import org.syncope.client.to.PropagationTaskTO;\n import org.syncope.client.to.SchedTaskTO;\n+import org.syncope.client.to.SyncTaskTO;\n import org.syncope.client.to.TaskTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n-import org.syncope.core.scheduling.SampleJob;\n import org.syncope.types.PropagationTaskExecStatus;\n import org.syncope.types.SyncopeClientExceptionType;\n \n public class TaskTestITCase extends AbstractTest {\n \n     @Test\n     public final void create() {\n-        SchedTaskTO task = new SchedTaskTO();\n-        task.setJobClassName(SampleJob.class.getName());\n-\n-        SchedTaskTO actual = restTemplate.postForObject(\n-                BASE_URL + \"task/create\",\n-                task, SchedTaskTO.class);\n+        SyncTaskTO task = new SyncTaskTO();\n+        task.setResource(\"ws-target-resource-2\");\n+        task.addDefaultResource(\"ws-target-resource-2\");\n+        task.addDefaultRole(8L);\n+\n+        SyncTaskTO actual = restTemplate.postForObject(\n+                BASE_URL + \"task/create/sync\",\n+                task, SyncTaskTO.class);\n         assertNotNull(actual);\n \n         task = restTemplate.getForObject(\n-                BASE_URL + \"task/read/{taskId}\", SchedTaskTO.class,\n+                BASE_URL + \"task/read/{taskId}\", SyncTaskTO.class,\n                 actual.getId());\n         assertNotNull(task);\n         assertEquals(actual.getId(), task.getId());\n@@ -55,15 +57,15 @@ public final void create() {\n     public final void update() {\n         SchedTaskTO task = restTemplate.getForObject(\n                 BASE_URL + \"task/read/{taskId}\", SchedTaskTO.class,\n-                4);\n+                5);\n         assertNotNull(task);\n \n         SchedTaskMod taskMod = new SchedTaskMod();\n-        taskMod.setId(4);\n+        taskMod.setId(5);\n         taskMod.setCronExpression(null);\n \n         SchedTaskTO actual = restTemplate.postForObject(\n-                BASE_URL + \"task/update\",\n+                BASE_URL + \"task/update/sched\",\n                 taskMod, SchedTaskTO.class);\n         assertNotNull(actual);\n         assertEquals(task.getId(), actual.getId());"}]}