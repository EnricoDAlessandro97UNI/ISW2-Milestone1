{"sha":"9658f8c384543889779cd2c398c8fcc115b43778","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjk2NThmOGMzODQ1NDM4ODk3NzljZDJjMzk4YzhmY2MxMTViNDM3Nzg=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-08-28T14:27:30Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-08-28T14:27:30Z"},"message":"Preliminary changes for SYNCOPE-689","tree":{"sha":"f6509913944f07db9a797928592cc47610ff5707","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/f6509913944f07db9a797928592cc47610ff5707"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9658f8c384543889779cd2c398c8fcc115b43778","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9658f8c384543889779cd2c398c8fcc115b43778","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9658f8c384543889779cd2c398c8fcc115b43778","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9658f8c384543889779cd2c398c8fcc115b43778/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"716e2ed6a0614cf4b9e1882a80b7bb2496b83343","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/716e2ed6a0614cf4b9e1882a80b7bb2496b83343","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/716e2ed6a0614cf4b9e1882a80b7bb2496b83343"}],"stats":{"total":218,"additions":142,"deletions":76},"files":[{"sha":"d9d9227b54cb7eea8faac80d7911038cc3ce1f62","filename":"fit/core-reference/pom.xml","status":"modified","additions":8,"deletions":2,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fpom.xml?ref=9658f8c384543889779cd2c398c8fcc115b43778","patch":"@@ -559,6 +559,12 @@ under the License.\n       <id>jboss-it</id>\n \n       <dependencies>\n+        <dependency>\n+          <groupId>javax.xml.ws</groupId>\n+          <artifactId>jaxws-api</artifactId>\n+          <version>2.2.11</version>\n+        </dependency>\n+        \n         <dependency>\n           <groupId>com.h2database</groupId>\n           <artifactId>h2</artifactId>\n@@ -644,9 +650,9 @@ under the License.\n             <inherited>true</inherited>\n             <configuration>\n               <container>\n-                <containerId>wildfly8x</containerId>\n+                <containerId>wildfly9x</containerId>\n                 <zipUrlInstaller>\n-                  <url>http://download.jboss.org/wildfly/8.2.0.Final/wildfly-8.2.0.Final.zip</url>\n+                  <url>http://download.jboss.org/wildfly/9.0.1.Final/wildfly-9.0.1.Final.zip</url>\n                   <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n                   <extractDir>${project.build.directory}/cargo/extract</extractDir>\n                 </zipUrlInstaller>"},{"sha":"35eacdc81a3a727d200377ac05ec154e4ba3ba10","filename":"fit/core-reference/src/main/resources/jboss/domains/MasterDomain.xml","status":"added","additions":131,"deletions":0,"changes":131,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2Fdomains%2FMasterDomain.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2Fdomains%2FMasterDomain.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2Fdomains%2FMasterDomain.xml?ref=9658f8c384543889779cd2c398c8fcc115b43778","patch":"@@ -0,0 +1,131 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n+       xmlns:util=\"http://www.springframework.org/schema/util\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd                           \n+                           http://www.springframework.org/schema/tx\n+                           http://www.springframework.org/schema/tx/spring-tx.xsd\n+                           http://www.springframework.org/schema/util\n+                           http://www.springframework.org/schema/util/spring-util.xsd\">\n+  \n+  <bean id=\"MasterContentXML\" class=\"org.apache.syncope.core.misc.spring.ResourceWithFallbackLoader\">\n+    <property name=\"primary\" value=\"file:${content.directory}/domains/MasterContent.xml\"/>\n+    <property name=\"fallback\" value=\"classpath:domains/MasterContent.xml\"/>\n+  </bean>\n+  <bean id=\"MasterProperties\" class=\"org.apache.syncope.core.misc.spring.ResourceWithFallbackLoader\">\n+    <property name=\"primary\" value=\"file:${content.directory}/domains/Master.properties\"/>\n+    <property name=\"fallback\" value=\"classpath:domains/Master.properties\"/>\n+  </bean>\n+  <bean id=\"MasterDatabaseSchema\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${Master.schema}\"/>\n+  </bean>\n+\n+  <!-- Use JNDI datasource as default but, when not available, revert to\n+  local datasource, with different properties for execution and testing. \n+  In any case, get all JDBC connections with a determined isolation level. -->\n+  <bean id=\"MasterDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\">\n+    <property name=\"jndiName\" value=\"java:comp/env/jdbc/syncopeMasterDataSource\"/>\n+    <property name=\"defaultObject\" ref=\"localMasterDataSource\"/>\n+  </bean>\n+\n+  <bean id=\"localMasterDataSource\" class=\"org.apache.commons.dbcp2.BasicDataSource\" destroy-method=\"close\">\n+    <property name=\"driverClassName\" value=\"${Master.driverClassName}\"/>\n+    <property name=\"url\" value=\"${Master.url}\"/>\n+    <property name=\"username\" value=\"${Master.username}\"/>\n+    <property name=\"password\" value=\"${Master.password}\"/>\n+    <!-- connection pool configuration - transaction isolation, default READ_COMMITTED (see SYNCOPE-202) -->\n+    <property name=\"defaultTransactionIsolation\">\n+      <util:constant static-field=\"${Master.pool.defaultTransactionIsolation:java.sql.Connection.TRANSACTION_READ_COMMITTED}\"/>\n+    </property>\n+    <!-- connection pool configuration - default values taken from BasicDataSource default values -->\n+    <property name=\"initialSize\" value=\"${Master.pool.initialSize:0}\"/>\n+    <property name=\"maxTotal\" value=\"${Master.pool.maxActive:8}\"/>\n+    <property name=\"maxIdle\" value=\"${Master.pool.maxIdle:8}\"/>\n+    <property name=\"minIdle\" value=\"${Master.pool.minIdle:0}\"/>\n+    <property name=\"maxWaitMillis\" value=\"${Master.pool.maxWait:-1}\"/>\n+    <property name=\"validationQuery\" value=\"${Master.pool.validationQuery}\"/>\n+    <property name=\"validationQueryTimeout\" value=\"${Master.pool.validationQueryTimeout:-1}\"/>\n+    <property name=\"testOnBorrow\" value=\"${Master.pool.testOnBorrow:true}\"/>\n+    <property name=\"testOnReturn\" value=\"${Master.pool.testOnReturn:false}\"/>\n+    <property name=\"testWhileIdle\" value=\"${Master.pool.testWhileIdle:false}\"/>\n+    <property name=\"timeBetweenEvictionRunsMillis\" value=\"${Master.pool.timeBetweenEvictionRunsMillis:-1}\"/>\n+    <property name=\"numTestsPerEvictionRun\" value=\"${Master.pool.numTestsPerEvictionRun:3}\"/>\n+    <property name=\"minEvictableIdleTimeMillis\" value=\"${Master.pool.minEvictableIdleTimeMillis:1800000}\"/>\n+    <property name=\"removeAbandonedOnBorrow\" value=\"${Master.pool.removeAbandoned:false}\"/>\n+    <property name=\"removeAbandonedOnMaintenance\" value=\"${Master.pool.removeAbandoned:false}\"/>\n+    <property name=\"removeAbandonedTimeout\" value=\"${Master.pool.removeAbandonedTimeout:300}\"/>\n+    <property name=\"logAbandoned\" value=\"${Master.pool.logAbandoned:false}\"/>\n+  </bean>\n+  \n+  <bean class=\"org.springframework.jdbc.datasource.init.DataSourceInitializer\">\n+    <property name=\"dataSource\" ref=\"MasterDataSource\"/>\n+    <property name=\"enabled\" value=\"true\"/>\n+    <property name=\"databasePopulator\">\n+      <bean class=\"org.springframework.jdbc.datasource.init.ResourceDatabasePopulator\">\n+        <property name=\"continueOnError\" value=\"true\"/>\n+        <property name=\"ignoreFailedDrops\" value=\"true\"/>\n+        <property name=\"sqlScriptEncoding\" value=\"UTF-8\"/>\n+        <property name=\"scripts\">\n+          <array>\n+            <value type=\"org.springframework.core.io.Resource\">\n+              classpath:/audit/${Master.audit.sql}\n+            </value>\n+          </array>\n+        </property>\n+      </bean>\n+    </property>\n+  </bean>\n+  \n+  <bean id=\"MasterEntityManagerFactory\"\n+        class=\"org.apache.syncope.core.persistence.jpa.spring.DomainEntityManagerFactoryBean\">\n+    <property name=\"mappingResources\">\n+      <list>\n+        <value>${Master.orm}</value>\n+      </list>\n+    </property>\n+    <property name=\"persistenceUnitName\" value=\"Master\"/>\n+    <property name=\"dataSource\" ref=\"MasterDataSource\"/>\n+    <property name=\"jpaVendorAdapter\">\n+      <bean class=\"org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter\">\n+        <property name=\"showSql\" value=\"false\"/>\n+        <property name=\"generateDdl\" value=\"true\"/>\n+        <property name=\"databasePlatform\" value=\"${Master.databasePlatform}\"/>\n+      </bean>\n+    </property>\n+    <property name=\"commonEntityManagerFactoryConf\" ref=\"commonEMFConf\"/>\n+    <property name=\"jpaPropertyMap\">\n+      <map>\n+        <entry key=\"openjpa.MetaDataFactory\" \n+               value=\"jpa(URLs=vfs:${project.build.directory}/cargo/configurations/wildfly8x/deployments/syncope.war/WEB-INF/classes, Resources=${Master.orm)\"/>\n+      </map>\n+    </property>\n+  </bean>\n+\n+  <bean id=\"MasterTransactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\">\n+    <property name=\"entityManagerFactory\" ref=\"MasterEntityManagerFactory\"/>\n+    <qualifier value=\"Master\"/>\n+  </bean>\n+  \n+  <tx:annotation-driven transaction-manager=\"MasterTransactionManager\"/>\n+  \n+</beans>\n\\ No newline at end of file"},{"sha":"889400a3a7f70a531b5f44a01e44612c1684fd0a","filename":"fit/core-reference/src/main/resources/jboss/persistenceContextEMFactory.xml","status":"removed","additions":0,"deletions":73,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/716e2ed6a0614cf4b9e1882a80b7bb2496b83343/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/716e2ed6a0614cf4b9e1882a80b7bb2496b83343/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml?ref=716e2ed6a0614cf4b9e1882a80b7bb2496b83343","patch":"@@ -1,73 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<beans xmlns=\"http://www.springframework.org/schema/beans\"\n-       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n-                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n-\n-  <bean id=\"entityManagerFactory\"\n-        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\">\n-    <property name=\"packagesToScan\" value=\"org.apache.syncope.core.persistence.jpa.entity\"/>\n-    <property name=\"validationMode\" value=\"NONE\"/>\n-    <property name=\"mappingResources\">\n-      <list>\n-        <value>${jpa.orm}</value>\n-      </list>\n-    </property>\n-    <property name=\"persistenceUnitName\" value=\"syncopePersistenceUnit\"/>\n-    <property name=\"persistenceUnitPostProcessors\">\n-      <list>\n-        <bean class=\"org.apache.syncope.core.persistence.jpa.spring.MultiJarAwarePersistenceUnitPostProcessor\"/>\n-      </list>\n-    </property>\n-    <property name=\"dataSource\" ref=\"dataSource\"/>\n-    <property name=\"jpaVendorAdapter\">\n-      <bean class=\"org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter\">\n-        <property name=\"showSql\" value=\"false\"/>\n-        <property name=\"generateDdl\" value=\"true\"/>\n-        <property name=\"databasePlatform\" value=\"${jpa.dialect}\"/>\n-      </bean>\n-    </property>\n-    <property name=\"jpaPropertyMap\">\n-      <map>\n-        <!--<entry key=\"openjpa.Log\" value=\"SQL=TRACE\"/>\n-        <entry key=\"openjpa.ConnectionFactoryProperties\" value=\"PrettyPrint=true, PrettyPrintLineLength=80\"/>-->\n-                \n-        <entry key=\"openjpa.NontransactionalWrite\" value=\"false\"/>\n-        <entry key=\"openjpa.AutoDetach\" value=\"close, commit, nontx-read, rollback\"/>\n-\n-        <entry key=\"openjpa.jdbc.SchemaFactory\" value=\"native(ForeignKeys=true)\"/>\n-        <entry key=\"openjpa.jdbc.MappingDefaults\" value=\"ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict\"/>\n-                \n-        <entry key=\"openjpa.ReadLockLevel\" value=\"none\"/>\n-        <entry key=\"openjpa.WriteLockLevel\" value=\"write\"/>\n-        <entry key=\"openjpa.LockTimeout\" value=\"30000\"/>\n-                                \n-        <entry key=\"openjpa.DataCache\" value=\"true\" />\n-        <entry key=\"openjpa.QueryCache\" value=\"true\"/>\n-        <entry key=\"openjpa.RemoteCommitProvider\" value=\"sjvm\"/>\n-        \n-        <entry key=\"openjpa.MetaDataFactory\" \n-               value=\"jpa(URLs=vfs:${project.build.directory}/cargo/configurations/wildfly8x/deployments/syncope.war/WEB-INF/classes, Resources=${jpa.orm})\"/>\n-      </map>\n-    </property>\n-  </bean>\n-\n-</beans>"},{"sha":"8f753d99c36aa07bac65601b806dc524c6627655","filename":"fit/core-reference/src/main/webapp/WEB-INF/jboss-deployment-structure.xml","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9658f8c384543889779cd2c398c8fcc115b43778/fit%2Fcore-reference%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml?ref=9658f8c384543889779cd2c398c8fcc115b43778","patch":"@@ -33,6 +33,8 @@ under the License.\n       <module name=\"org.hibernate\"/>\n       <module name=\"org.slf4j\"/>\n       <module name=\"org.slf4j.impl\"/>\n+      <module name=\"org.apache.log4j\"/>\n+      <module name=\"org.jboss.log4j.logmanager\"/>\n     </exclusions>\n   </deployment>\n </jboss-deployment-structure>"},{"sha":"a61c8c80386c9c96e6d49de19a68aeab4785ca3f","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9658f8c384543889779cd2c398c8fcc115b43778/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9658f8c384543889779cd2c398c8fcc115b43778/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=9658f8c384543889779cd2c398c8fcc115b43778","patch":"@@ -320,7 +320,7 @@ under the License.\n     <syncope.version>${project.version}</syncope.version>\n \n     <connid.version>1.4.1.0</connid.version>\n-    <connid.soap.version>1.3.0</connid.soap.version>\n+    <connid.soap.version>1.4.0-SNAPSHOT</connid.soap.version>\n     <connid.database.version>2.2.3-SNAPSHOT</connid.database.version>\n     <connid.csvdir.version>0.8.2</connid.csvdir.version>\n     <connid.ldap.version>1.4.0</connid.ldap.version>"}]}