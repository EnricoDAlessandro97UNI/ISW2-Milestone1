{"sha":"d022749c41de90dd5805259235da37f4556bf7d8","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQwMjI3NDljNDFkZTkwZGQ1ODA1MjU5MjM1ZGEzN2Y0NTU2YmY3ZDg=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T13:10:10Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T13:10:10Z"},"message":"Rest Client (Schema section) for console updated\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246223 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0f9a577eba644bd7926f33d3dc052852b3e739a6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0f9a577eba644bd7926f33d3dc052852b3e739a6"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d022749c41de90dd5805259235da37f4556bf7d8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d022749c41de90dd5805259235da37f4556bf7d8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d022749c41de90dd5805259235da37f4556bf7d8","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d022749c41de90dd5805259235da37f4556bf7d8/comments","author":null,"committer":null,"parents":[{"sha":"76808ef0adfd521da83a8837b977f7816afc96e2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/76808ef0adfd521da83a8837b977f7816afc96e2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/76808ef0adfd521da83a8837b977f7816afc96e2"}],"stats":{"total":159,"additions":132,"deletions":27},"files":[{"sha":"81b950562c5db98ad585c857f9bd96a953602a84","filename":"console/src/main/java/org/syncope/console/SyncopeApplication.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -18,6 +18,7 @@\n import org.apache.wicket.Response;\n import org.apache.wicket.Session;\n import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.spring.injection.annot.SpringComponentInjector;\n import org.syncope.console.pages.HomePage;\n import org.syncope.console.pages.Login;\n import org.syncope.console.rest.RestClient;\n@@ -38,7 +39,7 @@ public SyncopeApplication()\n     protected void init()\n     {\n         getResourceSettings().setThrowExceptionOnMissingResource( true );\n-\n+        addComponentInstantiationListener(new SpringComponentInjector(this));\n     }\n \n     /**"},{"sha":"33d0b2d2dd403da66beaad2a202567a70571678b","filename":"console/src/main/java/org/syncope/console/pages/Login.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -60,7 +60,6 @@ public Login(PageParameters parameters) {\n         Button submitButton = new Button(\"submit\", new Model(getString(\"submit\"))) {\n             @Override\n             public void onSubmit() {\n-                System.out.println(\"Submit\");\n                 setResponsePage(new HomePage(null));\n             }\n         };"},{"sha":"f9d7db6e53c4e34c3c599b36d8b436bf3b4a6a27","filename":"console/src/main/java/org/syncope/console/pages/Schema.java","status":"modified","additions":28,"deletions":3,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -19,8 +19,6 @@\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n import org.syncope.console.rest.RestClient;\n-\n-import org.syncope.client.to.AttributeSchemaTO;\n import org.syncope.console.SyncopeApplication;\n \n /**\n@@ -36,12 +34,39 @@ public Schema(PageParameters parameters)\n         \n         restClient = ((SyncopeApplication)getApplication()).getRestClient();\n \n-        add(new ListView(\"attrList\",restClient.getAttributeList()) {\n+        add(new ListView(\"attributesList\",restClient.getAttributesList()) {\n+\n+            @Override\n+            protected void populateItem(ListItem item) {\n+                LinkedHashMap attributeSchema = (LinkedHashMap) item.getDefaultModelObject();\n+            }\n+        });\n+\n+       add(new ListView(\"derivedAttributesList\",restClient.getDerivedAttributesList()) {\n+\n+            @Override\n+            protected void populateItem(ListItem item) {\n+                LinkedHashMap attributeSchema = (LinkedHashMap) item.getDefaultModelObject();\n+            }\n+        });\n+\n+        add(new ListView(\"userAttributesList\",restClient.getUserAttributesList()) {\n+\n+            @Override\n+            protected void populateItem(ListItem item) {\n+                LinkedHashMap attributeSchema = (LinkedHashMap) item.getDefaultModelObject();\n+            }\n+        });\n+\n+        //TODO: when core will be fixed change call to restClient.getUserDerivedAttributesList()\n+        add(new ListView(\"userDerivedAttributesList\",restClient.getUserAttributesList()) {\n \n             @Override\n             protected void populateItem(ListItem item) {\n                 LinkedHashMap attributeSchema = (LinkedHashMap) item.getDefaultModelObject();\n             }\n         });\n+\n+\n     }\n }"},{"sha":"d5c071d77155b8351ab6243dd3e3297651d02596","filename":"console/src/main/java/org/syncope/console/pages/Users.java","status":"modified","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -14,15 +14,25 @@\n  */\n package org.syncope.console.pages;\n \n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Set;\n import org.apache.wicket.PageParameters;\n+import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.Button;\n import org.apache.wicket.markup.html.form.TextField;\n+import org.apache.wicket.markup.html.list.ListItem;\n+import org.apache.wicket.markup.html.list.ListView;\n import org.apache.wicket.model.Model;\n+import org.syncope.client.to.UserTO;\n+import org.syncope.console.SyncopeApplication;\n+import org.syncope.console.rest.RestClient;\n \n /**\n  * Users WebPage.\n  */\n public class Users extends BasePage{\n+     RestClient restClient;\n \n     public Users(PageParameters parameters) {\n         super(parameters);\n@@ -31,5 +41,29 @@ public Users(PageParameters parameters) {\n \n         add(new Button(\"newUserBtn\",new Model(getString(\"newUserBtn\"))));\n \n+         restClient = ((SyncopeApplication)getApplication()).getRestClient();\n+\n+        final Set<UserTO> users = restClient.getUserList();\n+        System.out.println(\"Numero di user: \"+users.size());\n+\n+        if(!users.isEmpty()){\n+\n+\n+        List<UserTO> userList = new ArrayList(users);\n+\n+        add(new ListView(\"userList\", userList) {\n+\n+        @Override\n+        protected void populateItem(ListItem item) {\n+        //LinkedHashMap users = (LinkedHashMap) item.getDefaultModelObject();\n+        item.add(new Label(\"label\", item.getModel()));\n+            }\n+            });\n+            \n+        }\n+\n+        UserTO userTO = restClient.getUser();\n+        System.out.println(userTO.getId());\n+      \n     }\n }"},{"sha":"01b49b932531ba0753660fd96a0cf79f4b57c35d","filename":"console/src/main/java/org/syncope/console/rest/RestClient.java","status":"modified","additions":42,"deletions":13,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -12,21 +12,22 @@\n  *  limitations under the License.\n  *  under the License.\n  */\n-\n package org.syncope.console.rest;\n \n import java.util.List;\n+import java.util.Set;\n import org.springframework.web.client.RestTemplate;\n-import org.syncope.client.to.AttributeSchemaTO;\n-import org.syncope.client.to.DerivedAttributeSchemaTO;\n+import org.syncope.client.to.DerivedSchemaTO;\n+import org.syncope.client.to.SchemaTO;\n+import org.syncope.client.to.UserTO;\n \n /**\n  * Client for calling rest services.\n  */\n public class RestClient {\n \n-    private RestTemplate restTemplate;\n-    private static final String BASE_URL = \"http://192.168.0.137:8080/syncope/\";\n+    protected RestTemplate restTemplate;\n+    protected static final String BASE_URL = \"http://192.168.0.137:8080/syncope/\";\n \n     public RestTemplate getRestTemplate() {\n         return restTemplate;\n@@ -36,20 +37,48 @@ public void setRestTemplate(RestTemplate restTemplate) {\n         this.restTemplate = restTemplate;\n     }\n \n-    public List<AttributeSchemaTO> getAttributeList() {\n-        List<AttributeSchemaTO> attributeSchemas =\n-                restTemplate.getForObject(BASE_URL\n-                + \"schema/attribute/list.json\", List.class);\n+    public List<SchemaTO> getAttributesList() {\n+        List<SchemaTO> attributeSchemas =\n+                restTemplate.getForObject(BASE_URL + \"schema/attribute/role/list.json\", List.class);\n \n         return attributeSchemas;\n     }\n \n-    public List<DerivedAttributeSchemaTO> derivedAttributeList() {\n-        List<DerivedAttributeSchemaTO> derivedAttributeSchemas =\n-                restTemplate.getForObject(BASE_URL\n-                + \"schema/derivedAttribute/list.json\", List.class);\n+    public List<DerivedSchemaTO> getDerivedAttributesList() {\n+        List<DerivedSchemaTO> derivedAttributeSchemas =\n+                restTemplate.getForObject(BASE_URL + \"schema/derivedAttribute/role/list.json\", List.class);\n \n         return derivedAttributeSchemas;\n     }\n \n+    public List<SchemaTO> getUserAttributesList() {\n+        List<SchemaTO> attributeSchemas =\n+                restTemplate.getForObject(BASE_URL + \"schema/attribute/user/list.json\", List.class);\n+\n+        return attributeSchemas;\n+    }\n+\n+    public List<DerivedSchemaTO> getUserDerivedAttributesList() {\n+        List<DerivedSchemaTO> derivedAttributeSchemas =\n+                restTemplate.getForObject(BASE_URL + \"schema/derivedAttribute/user/list.json\", List.class);\n+\n+        return derivedAttributeSchemas;\n+    }\n+\n+    /*-- USERS --*/\n+\n+    public Set<UserTO> getUserList() {\n+        Set<UserTO> listUsers =\n+                restTemplate.getForObject(BASE_URL\n+                + \"user/list.json\", Set.class);\n+        return listUsers;\n+    }\n+\n+    public UserTO getUser() {\n+        UserTO userTO =\n+                restTemplate.getForObject(BASE_URL + \"user/read/{userId}.json\",\n+                UserTO.class, \"11\");\n+        return userTO;\n+    }\n+\n }"},{"sha":"5719cb094e004c0e39e6670ae051bc80875fb123","filename":"console/src/main/resources/org/syncope/console/pages/Schema.html","status":"modified","additions":10,"deletions":6,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.html?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -29,16 +29,20 @@\n                 <ul class=\"ui-tabs-nav\">\n                     <li class=\"ui-tabs-selected\"><a href=\"#tab1-schema\"><span><wicket:message key=\"tab1-schema\"/></span></a></li>\n                     <li class=\"\"><a href=\"#tab2-schema\"><span><wicket:message key=\"tab2-schema\"/></span></a></li>\n+                    <li class=\"\"><a href=\"#tab3-schema\"><span><wicket:message key=\"tab3-schema\"/></span></a></li>\n+                    <li class=\"\"><a href=\"#tab4-schema\"><span><wicket:message key=\"tab4-schema\"/></span></a></li>\n                 </ul>\n                 <div class=\"ui-tabs-panel\" id=\"tab1-schema\">\n-                    <!--input type=\"button\" wicket:id=\"newUserBtn\"/-->\n-                    <div wicket:id=\"attrList\" />\n+                    <div wicket:id=\"userAttributesList\" />\n                 </div>\n                 <div class=\"ui-tabs-panel ui-tabs-hide\" id=\"tab2-schema\">\n-                    <!--div id=\"searchBox\">\n-                        <label for=\"search\"><wicket:message key=\"search\"/></label>\n-                        <input type=\"text\" wicket:id=\"search\" id=\"search\" />\n-                    </div-->\n+                    <div wicket:id=\"userDerivedAttributesList\" />\n+                </div>\n+                <div class=\"ui-tabs-panel\" id=\"tab3-schema\">\n+                    <div wicket:id=\"attributesList\" />\n+                </div>\n+                <div class=\"ui-tabs-panel ui-tabs-hide\" id=\"tab4-schema\">\n+                    <div wicket:id=\"derivedAttributesList\" />\n                 </div>\n             </div>\n "},{"sha":"44e1f19bcbc1ea7a8e38ccc29d98cba7a904260c","filename":"console/src/main/resources/org/syncope/console/pages/Schema.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.properties?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -1,2 +1,4 @@\n tab1-schema=Attributes\n tab2-schema=Derived attributes\n+tab3-schema=User attributes\n+tab4-schema=User derived attributes"},{"sha":"5eee1f37f48d405fadea944c73ad8290f4e5e670","filename":"console/src/main/resources/org/syncope/console/pages/Schema_it.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema_it.properties?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -1,2 +1,4 @@\n tab1-schema=Attributi\n tab2-schema=Attributi derivati\n+tab3-schema=Attributi utenti\n+tab4-schema=Attributi utenti derivati"},{"sha":"d4355b40a594fcd6e6aa8ffbae622e9ec7211b30","filename":"console/src/main/resources/org/syncope/console/pages/Users.html","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -32,6 +32,10 @@\n                 </ul>\n                 <div class=\"ui-tabs-panel\" id=\"pan-home-1\">\n                     <input type=\"button\" wicket:id=\"newUserBtn\"/>\n+                    <div wicket:id=\"userList\" >\n+                        <span wicket:id=\"label\">label</span><br/>\n+                    </div>\n+\n                 </div>\n                 <div class=\"ui-tabs-panel ui-tabs-hide\" id=\"pan-home-2\">\n                     <div id=\"searchBox\">"},{"sha":"12f054d4b917534186beac636e204e4bc3b3c7b8","filename":"console/src/main/webapp/WEB-INF/web.xml","status":"modified","additions":8,"deletions":3,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d022749c41de90dd5805259235da37f4556bf7d8/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=d022749c41de90dd5805259235da37f4556bf7d8","patch":"@@ -38,7 +38,7 @@\n     <!-- SPRING INTEGRATION END-->\n \n     <!--filter>\n-        <filter-name>wicket.console</filter-name>\n+        <filter-name>SyncopeApplication</filter-name>\n         <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>\n         <init-param>\n             <param-name>applicationClassName</param-name>\n@@ -47,8 +47,13 @@\n     </filter>\n \n     <filter-mapping>\n-        <filter-name>wicket.console</filter-name>\n+        <filter-name>SyncopeApplication</filter-name>\n         <url-pattern>/*</url-pattern>\n-    </filter-mapping-->\n+    </filter-mapping>\n+\n+    <init-param>\n+        <param-name>applicationBean</param-name>\n+        <param-value>syncopeApplication</param-value>\n+    </init-param-->\n \n </web-app>"}]}