{"sha":"bd5c1af88ab99432577cfa826b2a3ea6dc655418","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmJkNWMxYWY4OGFiOTk0MzI1NzdjZmE4MjZiMmEzZWE2ZGM2NTU0MTg=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-07-11T08:03:37Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-07-11T08:03:51Z"},"message":"[SYNCOPE-1150] Properly handling of propagation tasks' labels for Realms","tree":{"sha":"528eba7fb2913292788cb5be04835818b962dc38","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/528eba7fb2913292788cb5be04835818b962dc38"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/bd5c1af88ab99432577cfa826b2a3ea6dc655418","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bd5c1af88ab99432577cfa826b2a3ea6dc655418","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/bd5c1af88ab99432577cfa826b2a3ea6dc655418","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bd5c1af88ab99432577cfa826b2a3ea6dc655418/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"9779e13e0d55efa445c6b046c51781d55d91991d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9779e13e0d55efa445c6b046c51781d55d91991d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9779e13e0d55efa445c6b046c51781d55d91991d"}],"stats":{"total":59,"additions":35,"deletions":24},"files":[{"sha":"595ff5ad7743d072b80dc3c3d046022a767b7b19","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ConnObjects.java","status":"modified","additions":5,"deletions":7,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FConnObjects.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FConnObjects.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FConnObjects.java?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -23,7 +23,6 @@\n import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.Transformer;\n import org.apache.syncope.client.console.commons.Constants;\n-import org.apache.syncope.client.console.rest.ResourceRestClient;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.apache.syncope.common.lib.SyncopeConstants;\n@@ -46,19 +45,18 @@ public class ConnObjects extends Panel implements ModalPanel {\n \n     private final MultilevelPanel connObjects;\n \n-    public ConnObjects(final String resource, final PageReference pageRef) {\n+    public ConnObjects(final ResourceTO resource, final PageReference pageRef) {\n         super(BaseModal.CONTENT_ID);\n \n-        ResourceTO resourceTO = new ResourceRestClient().read(resource);\n-        List<String> availableAnyTypes = CollectionUtils.collect(resourceTO.getProvisions(),\n+        List<String> availableAnyTypes = CollectionUtils.collect(resource.getProvisions(),\n                 new Transformer<ProvisionTO, String>() {\n \n             @Override\n             public String transform(final ProvisionTO provision) {\n                 return provision.getAnyType();\n             }\n         }, new ArrayList<String>());\n-        if (resourceTO.getOrgUnit() != null) {\n+        if (resource.getOrgUnit() != null) {\n             availableAnyTypes.add(SyncopeConstants.REALM_ANYTYPE);\n         }\n \n@@ -89,7 +87,7 @@ protected void prev(final AjaxRequestTarget target) {\n \n         };\n         connObjects.setFirstLevel(new NextableConnObjectDirectoryPanel(\n-                connObjects, resource, anyTypes.getField().getModelObject(), pageRef));\n+                connObjects, resource.getKey(), anyTypes.getField().getModelObject(), pageRef));\n         connObjects.setOutputMarkupId(true);\n         add(connObjects);\n \n@@ -100,7 +98,7 @@ protected void prev(final AjaxRequestTarget target) {\n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n                 connObjects.setFirstLevel(new NextableConnObjectDirectoryPanel(\n-                        connObjects, resource, anyTypes.getField().getModelObject(), pageRef));\n+                        connObjects, resource.getKey(), anyTypes.getField().getModelObject(), pageRef));\n                 target.add(connObjects);\n             }\n         });"},{"sha":"614ebe3917b025dd4e1b4d987ab3c17127674fcb","filename":"client/console/src/main/java/org/apache/syncope/client/console/tasks/PropagationTaskDirectoryPanel.java","status":"modified","additions":19,"deletions":8,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.java?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -40,16 +40,15 @@\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.syncope.common.lib.types.TaskType;\n import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.model.StringResourceModel;\n \n-/**\n- * Tasks page.\n- */\n public abstract class PropagationTaskDirectoryPanel\n         extends TaskDirectoryPanel<PropagationTaskTO> implements ModalPanel {\n \n@@ -74,15 +73,27 @@ protected List<IColumn<PropagationTaskTO, String>> getColumns() {\n         columns.add(new KeyPropertyColumn<PropagationTaskTO>(\n                 new StringResourceModel(\"key\", this), \"key\"));\n \n-        columns.add(new PropertyColumn<PropagationTaskTO, String>(new StringResourceModel(\n-                \"operation\", this), \"operation\", \"operation\"));\n+        columns.add(new PropertyColumn<PropagationTaskTO, String>(\n+                new StringResourceModel(\"operation\", this), \"operation\", \"operation\"));\n \n         if (resource == null) {\n-            columns.add(new PropertyColumn<PropagationTaskTO, String>(new StringResourceModel(\n-                    \"resource\", this), \"resource\", \"resource\"));\n+            columns.add(new PropertyColumn<PropagationTaskTO, String>(\n+                    new StringResourceModel(\"resource\", this), \"resource\", \"resource\"));\n         } else {\n             columns.add(new PropertyColumn<PropagationTaskTO, String>(\n-                    new StringResourceModel(\"anyTypeKind\", this), \"anyTypeKind\", \"anyTypeKind\"));\n+                    new StringResourceModel(\"anyTypeKind\", this), \"anyTypeKind\", \"anyTypeKind\") {\n+\n+                private static final long serialVersionUID = 3344577098912281394L;\n+\n+                @Override\n+                public IModel<?> getDataModel(final IModel<PropagationTaskTO> rowModel) {\n+                    if (rowModel.getObject().getAnyTypeKind() == null) {\n+                        return Model.of(SyncopeConstants.REALM_ANYTYPE);\n+                    } else {\n+                        return super.getDataModel(rowModel);\n+                    }\n+                }\n+            });\n         }\n \n         columns.add(new PropertyColumn<PropagationTaskTO, String>("},{"sha":"956afd6ae28c8fb2c4cdcad0ac59376778d467ee","filename":"client/console/src/main/java/org/apache/syncope/client/console/tasks/TaskDirectoryPanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTaskDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTaskDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTaskDirectoryPanel.java?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -37,7 +37,7 @@\n import org.apache.wicket.model.IModel;\n \n /**\n- * Tasks page.\n+ * Tasks {@link DirectoryPanel}.\n  *\n  * @param <T> task type.\n  */"},{"sha":"520bf1a9fe2b36f234c974fd46a972136c72ac5b","filename":"client/console/src/main/java/org/apache/syncope/client/console/topology/TopologyTogglePanel.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -413,12 +413,12 @@ public String getAjaxIndicatorMarkupId() {\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n-                ResourceTO modelObject = resourceRestClient.read(node.getKey());\n+                ResourceTO resource = resourceRestClient.read(node.getKey());\n \n-                IModel<ResourceTO> model = new CompoundPropertyModel<>(modelObject);\n+                IModel<ResourceTO> model = new CompoundPropertyModel<>(resource);\n                 provisionModal.setFormModel(model);\n \n-                target.add(provisionModal.setContent(new ResourceProvisionPanel(provisionModal, modelObject, pageRef)));\n+                target.add(provisionModal.setContent(new ResourceProvisionPanel(provisionModal, resource, pageRef)));\n \n                 provisionModal.header(new Model<>(MessageFormat.format(getString(\"resource.edit\"), node.getKey())));\n \n@@ -443,7 +443,9 @@ public String getAjaxIndicatorMarkupId() {\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n-                target.add(propTaskModal.setContent(new ConnObjects(node.getKey(), pageRef)));\n+                ResourceTO resource = resourceRestClient.read(node.getKey());\n+\n+                target.add(propTaskModal.setContent(new ConnObjects(resource, pageRef)));\n                 propTaskModal.header(new StringResourceModel(\"resource.explore.list\", Model.of(node)));\n                 propTaskModal.show(true);\n             }"},{"sha":"d06158d0329b947abb9ffe3a4b7b2095feb4bd6a","filename":"client/console/src/main/resources/org/apache/syncope/client/console/tasks/PropagationTaskDirectoryPanel.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel.properties?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -18,5 +18,5 @@ operation=Operation\n anyTypeKind=Object Type\n entityKey=Local ID\n connObjectKey=Remote ID\n-task.view=${right.operation} task about ${right.anyTypeKind}\n+task.view=${right.operation} ${right.objectClassName}\n resource=Resource"},{"sha":"71a1e8562d62b61a99e06ad835990a6f3c92e34d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/tasks/PropagationTaskDirectoryPanel_it.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_it.properties?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -18,5 +18,5 @@ operation=Operazione\n anyTypeKind=Tipo Oggetto\n entityKey=ID Locale\n connObjectKey=ID Remoto\n-task.view=${right.operation} task per ${right.anyTypeKind}\n+task.view=${right.operation} ${right.objectClassName}\n resource=risorsa"},{"sha":"4e2efd0e486d7712394d509e96e217ea8a2a927a","filename":"client/console/src/main/resources/org/apache/syncope/client/console/tasks/PropagationTaskDirectoryPanel_pt_BR.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_pt_BR.properties?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -18,5 +18,5 @@ operation=Operation\n anyTypeKind=Object Type\n entityKey=Local ID\n connObjectKey=Remote ID\n-task.view=${right.operation} task about ${right.anyTypeKind}\n+task.view=${right.operation} ${right.objectClassName}\n resource=Recurso"},{"sha":"593eb12132b2ebf5616e8e529d3017fb5799b9b1","filename":"client/console/src/main/resources/org/apache/syncope/client/console/tasks/PropagationTaskDirectoryPanel_ru.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd5c1af88ab99432577cfa826b2a3ea6dc655418/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FPropagationTaskDirectoryPanel_ru.properties?ref=bd5c1af88ab99432577cfa826b2a3ea6dc655418","patch":"@@ -19,5 +19,5 @@ operation=\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\n anyTypeKind=\\u041e\\u0431\\u044a\\u0435\\u043a\\u0442\n entityKey=\\u041b\\u043e\\u043a\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0438\\u0434\\u0435\\u043d\\u0442\\u0438\\u0444\\u0438\\u043a\\u0430\\u0442\\u043e\\u0440\n connObjectKey=\\u0418\\u0434\\u0435\\u043d\\u0442\\u0438\\u0444\\u0438\\u043a\\u0430\\u0442\\u043e\\u0440 \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0435\n-task.view=\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 ${right.operation} \\u0434\\u043b\\u044f ${right.anyTypeKind}\n+task.view=${right.operation} ${right.objectClassName}\n resource=Pecypce"}]}