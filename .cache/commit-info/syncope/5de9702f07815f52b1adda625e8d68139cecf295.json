{"sha":"5de9702f07815f52b1adda625e8d68139cecf295","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjVkZTk3MDJmMDc4MTVmNTJiMWFkZGE2MjVlOGQ2ODEzOWNlY2YyOTU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-02-27T17:06:13Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-02-27T17:06:13Z"},"message":"[SYNCOPE-327] Fixing messages related to JDBC\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1450847 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"06f39dfb0ca06746b5c6efc4e9ddacb8e35bd180","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/06f39dfb0ca06746b5c6efc4e9ddacb8e35bd180"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/5de9702f07815f52b1adda625e8d68139cecf295","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5de9702f07815f52b1adda625e8d68139cecf295","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5de9702f07815f52b1adda625e8d68139cecf295","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5de9702f07815f52b1adda625e8d68139cecf295/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"3fb90f478fbc16b061f078d94b8ae028d87b084b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3fb90f478fbc16b061f078d94b8ae028d87b084b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3fb90f478fbc16b061f078d94b8ae028d87b084b"}],"stats":{"total":30,"additions":16,"deletions":14},"files":[{"sha":"d76bbc617372c4e31d91be6641d81395473bb69c","filename":"build-tools/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5de9702f07815f52b1adda625e8d68139cecf295/build-tools%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5de9702f07815f52b1adda625e8d68139cecf295/build-tools%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fpom.xml?ref=5de9702f07815f52b1adda625e8d68139cecf295","patch":"@@ -16,7 +16,6 @@ software distributed under the License is distributed on an\n KIND, either express or implied.  See the License for the\n specific language governing permissions and limitations\n under the License.\n-\n -->\n <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n \n@@ -78,6 +77,7 @@ under the License.\n     <dependency>\n       <groupId>com.h2database</groupId>\n       <artifactId>h2</artifactId>\n+      <scope>provided</scope>\n     </dependency>\n \n     <dependency>"},{"sha":"41506166d9972aecbb28542aaea4633d537a1d73","filename":"build-tools/src/main/java/org/apache/syncope/buildtools/H2StartStopListener.java","status":"modified","additions":8,"deletions":9,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5de9702f07815f52b1adda625e8d68139cecf295/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5de9702f07815f52b1adda625e8d68139cecf295/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java?ref=5de9702f07815f52b1adda625e8d68139cecf295","patch":"@@ -34,8 +34,7 @@\n import org.springframework.web.context.support.WebApplicationContextUtils;\n \n /**\n- * Utility serlvet context listener managing H2 test server instance (to be used\n- * as external resource).\n+ * Utility serlvet context listener managing H2 test server instance (to be used as external resource).\n  */\n public class H2StartStopListener implements ServletContextListener {\n \n@@ -48,11 +47,11 @@ public class H2StartStopListener implements ServletContextListener {\n \n     @Override\n     public void contextInitialized(final ServletContextEvent sce) {\n-        ServletContext context = sce.getServletContext();\n+        final ServletContext context = sce.getServletContext();\n \n-        File workDir = (File) sce.getServletContext().getAttribute(\"javax.servlet.context.tempdir\");\n+        final File workDir = (File) sce.getServletContext().getAttribute(\"javax.servlet.context.tempdir\");\n         try {\n-            Server h2TestDb = new Server();\n+            final Server h2TestDb = new Server();\n             h2TestDb.runTool(\"-baseDir\", workDir.getAbsolutePath(), \"-tcp\", \"-tcpDaemon\", \"-web\", \"-webDaemon\",\n                     \"-webPort\", sce.getServletContext().getInitParameter(\"testdb.webport\"));\n \n@@ -61,8 +60,8 @@ public void contextInitialized(final ServletContextEvent sce) {\n             LOG.error(\"Could not start H2 test db\", e);\n         }\n \n-        WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(context);\n-        DataSource datasource = ctx.getBean(DataSource.class);\n+        final WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(context);\n+        final DataSource datasource = ctx.getBean(DataSource.class);\n \n         Connection conn = null;\n         Statement stmt = null;\n@@ -91,9 +90,9 @@ public void contextInitialized(final ServletContextEvent sce) {\n \n     @Override\n     public void contextDestroyed(final ServletContextEvent sce) {\n-        ServletContext context = sce.getServletContext();\n+        final ServletContext context = sce.getServletContext();\n \n-        Server h2TestDb = (Server) context.getAttribute(H2_TESTDB);\n+        final Server h2TestDb = (Server) context.getAttribute(H2_TESTDB);\n         if (h2TestDb != null) {\n             h2TestDb.shutdown();\n         }"},{"sha":"9683e93327028dc8f7ba505c5e4e8480cefbd506","filename":"core/src/test/resources/persistence.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5de9702f07815f52b1adda625e8d68139cecf295/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5de9702f07815f52b1adda625e8d68139cecf295/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties?ref=5de9702f07815f52b1adda625e8d68139cecf295","patch":"@@ -15,10 +15,10 @@\n # specific language governing permissions and limitations\n # under the License.\n jpa.driverClassName=org.h2.Driver\n-jpa.url=jdbc:h2:mem:syncopedb;DB_CLOSE_DELAY=1000\n+jpa.url=jdbc:h2:mem:syncopedb;DB_CLOSE_DELAY=-1\n jpa.username=sa\n jpa.password=\n jpa.dialect=org.apache.openjpa.jdbc.sql.H2Dictionary\n quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n quartz.sql=tables_h2.sql\n-logback.sql=h2.sql\n\\ No newline at end of file\n+logback.sql=h2.sql"},{"sha":"675f6a9ccead9952ef92e67d426dbfbdf85d6821","filename":"standalone/pom.xml","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5de9702f07815f52b1adda625e8d68139cecf295/standalone%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5de9702f07815f52b1adda625e8d68139cecf295/standalone%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/standalone%2Fpom.xml?ref=5de9702f07815f52b1adda625e8d68139cecf295","patch":"@@ -116,9 +116,12 @@ under the License.\n                 <copy file=\"${settings.localRepository}/org/codehaus/groovy/groovy-all/${groovy.version}/groovy-all-${groovy.version}.jar\"\n                       todir=\"${work.dir}/apache-tomcat-${tomcat.version}/lib\"/>\n                 \n+                <copy file=\"../core/target/test-classes/context.xml\"\n+                      todir=\"${work.dir}/apache-tomcat-${tomcat.version}/conf\" overwrite=\"true\"/>\n+                \n                 <copy file=\"src/main/resources/setenv.sh\"\n-                      todir=\"${work.dir}/apache-tomcat-${tomcat.version}/bin\"/>\n-\t\t\t\t<copy file=\"src/main/resources/setenv.bat\"\n+                    todir=\"${work.dir}/apache-tomcat-${tomcat.version}/bin\"/>\n+                <copy file=\"src/main/resources/setenv.bat\"\n                       todir=\"${work.dir}/apache-tomcat-${tomcat.version}/bin\"/>\n                 <replace file=\"${work.dir}/apache-tomcat-${tomcat.version}/conf/server.xml\" \n                          token=\"8080\" value=\"${cargo.servlet.port}\"/>"}]}