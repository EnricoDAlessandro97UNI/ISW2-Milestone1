{"sha":"b0c333993e5e198ec7fb7cef889e11681c6042dd","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmIwYzMzMzk5M2U1ZTE5OGVjN2ZiN2NlZjg4OWUxMTY4MWM2MDQyZGQ=","commit":{"author":{"name":"Colm O Heigeartaigh","email":"coheigea@apache.org","date":"2012-10-23T14:58:35Z"},"committer":{"name":"Colm O Heigeartaigh","email":"coheigea@apache.org","date":"2012-10-23T14:58:35Z"},"message":"[SYNCOPE-212] - Provide Validation Error message to user \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1401308 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"fa595adfdcd5e714844d0270bd23980e00a7622c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/fa595adfdcd5e714844d0270bd23980e00a7622c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b0c333993e5e198ec7fb7cef889e11681c6042dd","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b0c333993e5e198ec7fb7cef889e11681c6042dd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b0c333993e5e198ec7fb7cef889e11681c6042dd","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b0c333993e5e198ec7fb7cef889e11681c6042dd/comments","author":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"committer":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"parents":[{"sha":"bec87170e49a6cb491b6883eea1f7e0ff2e3c503","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bec87170e49a6cb491b6883eea1f7e0ff2e3c503","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/bec87170e49a6cb491b6883eea1f7e0ff2e3c503"}],"stats":{"total":35,"additions":27,"deletions":8},"files":[{"sha":"3cffff015625b22552674e62c2789b5c5290c122","filename":"client/src/main/java/org/apache/syncope/client/validation/SyncopeClientCompositeErrorException.java","status":"modified","additions":7,"deletions":2,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fvalidation%2FSyncopeClientCompositeErrorException.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fvalidation%2FSyncopeClientCompositeErrorException.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fvalidation%2FSyncopeClientCompositeErrorException.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -77,12 +77,17 @@ public String getMessage() {\n         StringBuilder message = new StringBuilder();\n \n         message.append(\"{\");\n-        for (SyncopeClientException e : getExceptions()) {\n+        Iterator<SyncopeClientException> iter = getExceptions().iterator();\n+        while (iter.hasNext()) {\n+            SyncopeClientException e = iter.next();\n             message.append(\"[\");\n             message.append(e.getType());\n             message.append(\" \");\n             message.append(e.getElements());\n-            message.append(\"], \");\n+            message.append(\"]\");\n+            if (iter.hasNext()) {\n+                message.append(\", \");\n+            }\n         }\n         message.append(\"}\");\n "},{"sha":"082719276b42f49367dc311a19492d0bf2206e27","filename":"core/src/main/java/org/apache/syncope/core/persistence/validation/attrvalue/AlwaysTrueValidator.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FAlwaysTrueValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FAlwaysTrueValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FAlwaysTrueValidator.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -33,7 +33,8 @@ protected void doValidate(AbstractAttrValue attributeValue) throws InvalidAttrVa\n \n         Boolean value = attributeValue.getValue();\n         if (!value) {\n-            throw new InvalidAttrValueException(attributeValue);\n+            String error = \"This attribute must be set to \\\"true\\\"\";\n+            throw new InvalidAttrValueException(error);\n         }\n     }\n }"},{"sha":"93206613ce7f4bd9b7b14af922cce5ef54061361","filename":"core/src/main/java/org/apache/syncope/core/persistence/validation/attrvalue/BasicValidator.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FBasicValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FBasicValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FBasicValidator.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -18,6 +18,8 @@\n  */\n package org.apache.syncope.core.persistence.validation.attrvalue;\n \n+import java.util.Arrays;\n+\n import org.apache.syncope.core.persistence.beans.AbstractSchema;\n import org.apache.syncope.core.persistence.beans.AbstractAttrValue;\n import org.apache.syncope.types.SchemaType;\n@@ -47,7 +49,8 @@ protected void doValidate(AbstractAttrValue attributeValue) throws InvalidAttrVa\n             }\n \n             if (!found) {\n-                throw new InvalidAttrValueException(attributeValue);\n+                String error = \"\\\"\" + value + \"\\\" is not one of: \" + Arrays.toString(enumeration);\n+                throw new InvalidAttrValueException(error);\n             }\n         }\n     }"},{"sha":"03b01a3b51ecd267bfbbbb3833b32d0e0f27e800","filename":"core/src/main/java/org/apache/syncope/core/persistence/validation/attrvalue/EmailAddressValidator.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FEmailAddressValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FEmailAddressValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FEmailAddressValidator.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -37,7 +37,8 @@ protected void doValidate(final AbstractAttrValue attributeValue) throws Invalid\n \n         Matcher matcher = EMAIL_PATTERN.matcher((CharSequence) attributeValue.getValue());\n         if (!matcher.matches()) {\n-            throw new InvalidAttrValueException(attributeValue);\n+            String error = \"\\\"\" + attributeValue.getValue() + \"\\\" is not a valid email address\";\n+            throw new InvalidAttrValueException(error);\n         }\n     }\n }"},{"sha":"6db95ac748113bb0a5fe39e3407dec8f5221913a","filename":"core/src/main/java/org/apache/syncope/core/persistence/validation/attrvalue/InvalidAttrValueException.java","status":"modified","additions":10,"deletions":2,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FInvalidAttrValueException.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FInvalidAttrValueException.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fattrvalue%2FInvalidAttrValueException.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -22,12 +22,20 @@\n import org.apache.syncope.core.persistence.beans.AbstractAttrValue;\n \n public class InvalidAttrValueException extends ValidationException {\n+    \n+    public InvalidAttrValueException(String errorMessage) {\n+        super(errorMessage);\n+    }\n+    \n+    public InvalidAttrValueException(String errorMessage, Throwable t) {\n+        super(errorMessage, t);\n+    }\n \n     public InvalidAttrValueException(final AbstractAttrValue value) {\n-        super(\"Could not validate \" + value);\n+        this(\"Could not validate \" + value.getValue());\n     }\n \n     public InvalidAttrValueException(final AbstractAttrValue value, Throwable t) {\n-        super(\"Could not validate \" + value, t);\n+        this(\"Could not validate \" + value.getValue(), t);\n     }\n }"},{"sha":"cc85dd0242743f92734857f404ad13f7911f6208","filename":"core/src/main/java/org/apache/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b0c333993e5e198ec7fb7cef889e11681c6042dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=b0c333993e5e198ec7fb7cef889e11681c6042dd","patch":"@@ -196,7 +196,8 @@ protected void fillAttribute(final List<String> values, final AttributableUtil a\n                 } catch (ValidationException e) {\n                     LOG.error(\"Invalid value for attribute \" + schema.getName() + \": \" + value, e);\n \n-                    invalidValues.addElement(schema.getName() + \": \" + value);\n+                    invalidValues.addElement(schema.getName() + \": \" + value \n+                            + \" - \" + e.getMessage());\n                 }\n             }\n         }"}]}