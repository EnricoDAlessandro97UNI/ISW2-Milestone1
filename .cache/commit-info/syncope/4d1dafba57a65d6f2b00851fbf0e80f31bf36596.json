{"sha":"4d1dafba57a65d6f2b00851fbf0e80f31bf36596","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjRkMWRhZmJhNTdhNjVkNmYyYjAwODUxZmJmMGU4MGYzMWJmMzY1OTY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-12-17T16:12:57Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-12-17T16:12:57Z"},"message":"Quick porkaround for RCS deployment\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246703 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5188a284fa4a0612e7a48ad0d2255c783835e0ea","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5188a284fa4a0612e7a48ad0d2255c783835e0ea"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/4d1dafba57a65d6f2b00851fbf0e80f31bf36596","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4d1dafba57a65d6f2b00851fbf0e80f31bf36596","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4d1dafba57a65d6f2b00851fbf0e80f31bf36596","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/comments","author":null,"committer":null,"parents":[{"sha":"4b4b56d4ad99d5df39dd40b6dac6fa36e2b5ae9c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4b4b56d4ad99d5df39dd40b6dac6fa36e2b5ae9c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4b4b56d4ad99d5df39dd40b6dac6fa36e2b5ae9c"}],"stats":{"total":63,"additions":47,"deletions":16},"files":[{"sha":"7a21e467356a1375ca68245294786855f5db8741","filename":"console/pom.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=4d1dafba57a65d6f2b00851fbf0e80f31bf36596","patch":"@@ -116,6 +116,11 @@\n             <groupId>javax.servlet</groupId>\n             <artifactId>servlet-api</artifactId>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>commons-httpclient</groupId>\n+            <artifactId>commons-httpclient</artifactId>\n+        </dependency>\n     </dependencies>\n \n     <build>"},{"sha":"54d929fdc4a69a88eff5de75becbaae1a7144a1b","filename":"console/src/main/java/org/syncope/console/rest/RestClient.java","status":"modified","additions":12,"deletions":5,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FRestClient.java?ref=4d1dafba57a65d6f2b00851fbf0e80f31bf36596","patch":"@@ -2,9 +2,9 @@\n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n  *  You may obtain a copy of the License at\n- * \n+ *\n  *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  *  Unless required by applicable law or agreed to in writing, software\n  *  distributed under the License is distributed on an \"AS IS\" BASIS,\n  *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -14,13 +14,16 @@\n  */\n package org.syncope.console.rest;\n \n+import org.apache.commons.httpclient.UsernamePasswordCredentials;\n+import org.apache.commons.httpclient.auth.AuthScope;\n+import org.springframework.http.client.CommonsClientHttpRequestFactory;\n import org.springframework.web.client.RestTemplate;\n \n /**\n  * Base Rest client for invoking rest services.\n  */\n-public class RestClient\n-{\n+public class RestClient {\n+\n     protected RestTemplate restTemplate;\n \n     protected String baseURL;\n@@ -31,6 +34,11 @@ public RestTemplate getRestTemplate() {\n \n     public void setRestTemplate(RestTemplate restTemplate) {\n         this.restTemplate = restTemplate;\n+\n+        // TODO: CABLATONE!!!\n+        ((CommonsClientHttpRequestFactory) this.restTemplate.getRequestFactory()).\n+                getHttpClient().getState().setCredentials(AuthScope.ANY,\n+                new UsernamePasswordCredentials(\"admin\", \"password\"));\n     }\n \n     public String getBaseURL() {\n@@ -40,5 +48,4 @@ public String getBaseURL() {\n     public void setBaseURL(String baseURL) {\n         this.baseURL = baseURL;\n     }\n-    \n }"},{"sha":"dea74b07d45de479004c9ec492786427a35a2105","filename":"console/src/main/java/org/syncope/console/rest/UsersRestClient.java","status":"modified","additions":15,"deletions":9,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java?ref=4d1dafba57a65d6f2b00851fbf0e80f31bf36596","patch":"@@ -1,11 +1,10 @@\n /*\n- * \n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n  *  You may obtain a copy of the License at\n- * \n+ *\n  *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  *  Unless required by applicable law or agreed to in writing, software\n  *  distributed under the License is distributed on an \"AS IS\" BASIS,\n  *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -37,7 +36,8 @@ public List<UserTO> getAllUsers() {\n         List<UserTO> users = null;\n         try {\n             users = Arrays.asList(restClient.getRestTemplate().getForObject(\n-                    restClient.getBaseURL() + \"user/list.json\", UserTO[].class));\n+                    restClient.getBaseURL()\n+                    + \"user/list.json\", UserTO[].class));\n         } catch (SyncopeClientCompositeErrorException e) {\n             e.printStackTrace();\n         }\n@@ -49,7 +49,8 @@ public List<UserTO> getPaginatedUsersList(int page, int size) {\n         try {\n             final PaginatedResult paginatedResult =\n                     restClient.getRestTemplate().getForObject(\n-                    restClient.getBaseURL() + \"user/paginatedList/{page}/{size}\",\n+                    restClient.getBaseURL()\n+                    + \"user/paginatedList/{page}/{size}\",\n                     PaginatedResult.class, page, size);\n \n             users = paginatedResult.getRecords();\n@@ -70,20 +71,23 @@ public void createUser(UserTO userTO)\n \n         // Create user\n         newUserTO = restClient.getRestTemplate().postForObject(\n-                restClient.getBaseURL() + \"user/create\", userTO, UserTO.class);\n+                restClient.getBaseURL()\n+                + \"user/create\", userTO, UserTO.class);\n     }\n \n     /**\n      * Update existing user.\n      * @param userTO\n      * @return true is the opertion ends succesfully, false otherwise\n      */\n-    public boolean updateUser(UserMod userModTO) throws\n+    public boolean updateUser(UserMod userModTO)\n+            throws\n             SyncopeClientCompositeErrorException {\n         UserTO newUserTO = null;\n \n         newUserTO = restClient.getRestTemplate().postForObject(\n-                restClient.getBaseURL() + \"user/update\", userModTO, UserTO.class);\n+                restClient.getBaseURL()\n+                + \"user/update\", userModTO, UserTO.class);\n \n         return userModTO.getId() == newUserTO.getId();\n     }\n@@ -134,7 +138,9 @@ public boolean createConfigurationAttributes(\n     public boolean updateConfigurationAttributes(\n             ConfigurationTO configurationTO) {\n \n-        ConfigurationTO newConfigurationTO = restClient.getRestTemplate().postForObject(restClient.getBaseURL() + \"configuration/update\",\n+        ConfigurationTO newConfigurationTO = restClient.getRestTemplate().\n+                postForObject(restClient.getBaseURL()\n+                + \"configuration/update\",\n                 configurationTO, ConfigurationTO.class);\n \n         return configurationTO.equals(newConfigurationTO);"},{"sha":"689e024b66b887828f9e9bf92802ec8dff434479","filename":"console/src/main/resources/applicationContext.xml","status":"modified","additions":14,"deletions":1,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml?ref=4d1dafba57a65d6f2b00851fbf0e80f31bf36596","patch":"@@ -32,7 +32,20 @@\n         <property name=\"objectMapper\" ref=\"jacksonObjectMapper\"/>\n     </bean>\n \n+    <bean id=\"httpClientParams\" class=\"org.apache.commons.httpclient.params.HttpClientParams\">\n+        <property name=\"authenticationPreemptive\" value=\"true\"/>\n+        <property name=\"connectionManagerClass\"\n+                  value=\"org.apache.commons.httpclient.MultiThreadedHttpConnectionManager\"/>\n+    </bean>\n+    <bean id=\"httpClient\" class=\"org.apache.commons.httpclient.HttpClient\">\n+        <constructor-arg ref=\"httpClientParams\"/>\n+    </bean>\n+    <bean id=\"httpClientFactory\" class=\"org.springframework.http.client.CommonsClientHttpRequestFactory\">\n+        <constructor-arg ref=\"httpClient\"/>\n+    </bean>\n     <bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\">\n+        <constructor-arg ref=\"httpClientFactory\"/>\n+\n         <property name=\"messageConverters\" ref=\"mappingJacksonHttpMessageConverter\"/>\n         <property name=\"errorHandler\">\n             <bean id=\"syncopeClientErrorHandler\"\n@@ -78,6 +91,6 @@\n     </bean>\n \n     <bean id=\"xmlRolesReader\" class=\"org.syncope.console.commons.XMLRolesReader\">\n-         <constructor-arg value=\"authorizations.xml\"/>\n+        <constructor-arg value=\"authorizations.xml\"/>\n     </bean>\n </beans>"},{"sha":"79fcc9e5a795aee53b5dc069195034790b07b94d","filename":"core/src/main/resources/content.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4d1dafba57a65d6f2b00851fbf0e80f31bf36596/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml?ref=4d1dafba57a65d6f2b00851fbf0e80f31bf36596","patch":"@@ -69,7 +69,7 @@\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n                       conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n \n-                          <!-- Authentication and authorization -->\n+    <!-- Authentication and authorization -->\n     <Entitlement name=\"SCHEMA_LIST\"/>\n     <Entitlement name=\"SCHEMA_CREATE\"/>\n     <Entitlement name=\"SCHEMA_READ\"/>"}]}