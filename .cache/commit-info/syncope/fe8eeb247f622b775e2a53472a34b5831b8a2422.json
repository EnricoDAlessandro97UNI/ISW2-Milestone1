{"sha":"fe8eeb247f622b775e2a53472a34b5831b8a2422","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZlOGVlYjI0N2Y2MjJiNzc1ZTJhNTM0NzJhMzRiNTgzMWI4YTI0MjI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-12-23T07:46:13Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-12-23T07:46:13Z"},"message":"Merge remote-tracking branch 'upstream/master'","tree":{"sha":"3d08c9be1d2b077866943df88f8f1f5ce54a8671","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/3d08c9be1d2b077866943df88f8f1f5ce54a8671"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/fe8eeb247f622b775e2a53472a34b5831b8a2422","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fe8eeb247f622b775e2a53472a34b5831b8a2422","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fe8eeb247f622b775e2a53472a34b5831b8a2422","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fe8eeb247f622b775e2a53472a34b5831b8a2422/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"7aa0db378d8ab7931c78d570c6f5968e2967bc7b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7aa0db378d8ab7931c78d570c6f5968e2967bc7b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7aa0db378d8ab7931c78d570c6f5968e2967bc7b"},{"sha":"51c543da581970052942c506021d3329b3853d30","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/51c543da581970052942c506021d3329b3853d30","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/51c543da581970052942c506021d3329b3853d30"}],"stats":{"total":1058,"additions":589,"deletions":469},"files":[{"sha":"a8b795af57d4e56ab12d76d5f621eb32b16b8e65","filename":"installer/pom.xml","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fpom.xml?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -172,6 +172,18 @@ under the License.\n     </plugins>\n \n     <resources>\n+      <resource>\n+        <directory>${basedir}/../core/src/main/resources/</directory>\n+        <includes>\n+          <include>**/orm*</include>\n+        </includes>\n+      </resource>\n+      <resource>\n+        <directory>${basedir}/../core/src/test/resources/</directory>\n+        <includes>\n+          <include>**/persistenceContextEMFactory.xml</include>\n+        </includes>\n+      </resource>\n       <resource>\n         <directory>${basedir}</directory>\n         <targetPath>META-INF</targetPath>\n@@ -180,6 +192,14 @@ under the License.\n           <include>NOTICE</include>\n         </includes>\n       </resource>\n+      <resource>\n+        <directory>src/main/resources</directory>\n+        <includes>\n+          <include>**/configuration.properties</include>\n+          <include>**/modelerPom.xml</include>\n+        </includes>\n+        <filtering>true</filtering>\n+      </resource>\n     </resources>\n   </build>\n "},{"sha":"c0e67224cb227c28e723227da84aeafdc1bdd2c5","filename":"installer/src/main/java/org/apache/syncope/installer/containers/jboss/JBoss.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fcontainers%2Fjboss%2FJBoss.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fcontainers%2Fjboss%2FJBoss.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fcontainers%2Fjboss%2FJBoss.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -33,23 +33,23 @@ public class JBoss extends AbstractContainer {\n \n     private final String jbossHost;\n \n-    private final String jbossPort;\n+    private final String jbossManagementPort;\n \n     private final String installPath;\n \n     private final String artifactId;\n \n     private final HttpUtils httpUtils;\n \n-    public JBoss(final boolean jbossSsl, final String jbossHost, final String jbossPort,\n+    public JBoss(final boolean jbossSsl, final String jbossHost, final String jbossManagementPort,\n             final String jbossAdminUsername, final String jbossAdminPassword,\n             final String installPath, final String artifactId, final AbstractUIProcessHandler handler) {\n         this.jbossSsl = jbossSsl;\n         this.jbossHost = jbossHost;\n-        this.jbossPort = jbossPort;\n+        this.jbossManagementPort = jbossManagementPort;\n         this.installPath = installPath;\n         this.artifactId = artifactId;\n-        httpUtils = new HttpUtils(jbossSsl, jbossHost, jbossPort, jbossAdminUsername, jbossAdminPassword, handler);\n+        httpUtils = new HttpUtils(jbossSsl, jbossHost, jbossManagementPort, jbossAdminUsername, jbossAdminPassword, handler);\n \n     }\n \n@@ -63,7 +63,7 @@ public boolean deployConsole() {\n \n     public boolean deploy(final String whatDeploy, final String warName) {\n         final String responseBodyAsString = httpUtils.postWithDigestAuth(\n-                String.format(addContentUrl, jbossHost, jbossPort),\n+                String.format(addContentUrl, jbossHost, jbossManagementPort),\n                 String.format(whatDeploy, installPath, artifactId));\n \n         final JBossAddResponse jBossAddResponse = JsonUtils.jBossAddResponse(responseBodyAsString);\n@@ -72,7 +72,7 @@ public boolean deploy(final String whatDeploy, final String warName) {\n                 jBossAddResponse.getResult().getBYTES_VALUE(), warName);\n \n         int status = httpUtils.\n-                postWithStringEntity(String.format(enableUrl, jbossHost, jbossPort),\n+                postWithStringEntity(String.format(enableUrl, jbossHost, jbossManagementPort),\n                         JsonUtils.jBossDeployRequestContent(jBossDeployRequestContent));\n         return status == 200;\n     }"},{"sha":"db7f8ecb87986c6bad43850f1168382bc9fce612","filename":"installer/src/main/java/org/apache/syncope/installer/enums/DBs.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -43,7 +43,10 @@ public static DBs fromDbName(final String containerName) {\n             db = MYSQL;\n         } else if (ORACLE.getName().equalsIgnoreCase(containerName)) {\n             db = ORACLE;\n+        } else {\n+            db = SQLSERVER;\n         }\n+\n         return db;\n     }\n }"},{"sha":"d6d2deb781bccbef8580ded0b38ca17655d98864","filename":"installer/src/main/java/org/apache/syncope/installer/files/ConsoleProperties.java","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsoleProperties.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsoleProperties.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsoleProperties.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.installer.files;\n+\n+public class ConsoleProperties {\n+\n+    public static final String PLACEHOLDER = \"scheme=http\\n\"\n+            + \"host=localhost\\n\"\n+            + \"port=8080\";\n+\n+    public static final String CONSOLE = \"scheme=%s\\n\"\n+            + \"host=%s\\n\"\n+            + \"port=%s\";\n+\n+}"},{"sha":"1f78dbc0a9ffc7c4d1e55899bb51bd4b5f223779","filename":"installer/src/main/java/org/apache/syncope/installer/files/CoreWebXml.java","status":"modified","additions":14,"deletions":62,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCoreWebXml.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCoreWebXml.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCoreWebXml.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -20,78 +20,30 @@\n \n public class CoreWebXml {\n \n-    public static final String PATH = \"/core/src/main/webapp/WEB-INF/web.xml\";\n+    public static final String PLACEHOLDER = \"</web-app>\";\n \n-    public static String withDataSource() {\n-        return String.format(FILE, withDataSource);\n-    }\n-\n-    public static String withDataSourceForJBoss() {\n-        return String.format(FILE, withDataSourceForJBoss);\n-    }\n-\n-    private static final String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + \"<!--\\n\"\n-            + \"Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"distributed with this work for additional information\\n\"\n-            + \"regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"\\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"with the License.  You may obtain a copy of the License at\\n\" + \"\\n\"\n-            + \"  http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"\\n\"\n-            + \"Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"software distributed under the License is distributed on an\\n\"\n-            + \"\\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"KIND, either express or implied.  See the License for the\\n\"\n-            + \"specific language governing permissions and limitations\\n\" + \"under the License.\\n\" + \"-->\\n\"\n-            + \"<web-app xmlns=\\\"http://java.sun.com/xml/ns/javaee\\\"\\n\"\n-            + \"         xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n-            + \"         xsi:schemaLocation=\\\"http://java.sun.com/xml/ns/javaee \\n\"\n-            + \"                             http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\\\"\\n\"\n-            + \"         version=\\\"3.0\\\">\\n\" + \"\\n\" + \"  <display-name>Apache Syncope core</display-name>\\n\" + \"\\n\"\n-            + \"  <context-param>\\n\" + \"    <param-name>contextConfigLocation</param-name>\\n\"\n-            + \"    <param-value>classpath*:/*Context.xml</param-value>\\n\" + \"  </context-param>\\n\" + \"\\n\"\n-            + \"  <listener>\\n\"\n-            + \"    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\\n\"\n-            + \"  </listener>\\n\" + \"  <listener>\\n\"\n-            + \"    <listener-class>org.apache.syncope.core.init.ThreadLocalCleanupListener</listener-class>\\n\"\n-            + \"  </listener>\\n\" + \"    \\n\" + \"  <servlet>\\n\" + \"    <servlet-name>CXFServlet</servlet-name>\\n\"\n-            + \"    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>\\n\"\n-            + \"    <load-on-startup>1</load-on-startup> \\n\" + \"  </servlet>\\n\" + \"  <servlet-mapping>\\n\"\n-            + \"    <servlet-name>CXFServlet</servlet-name>\\n\" + \"    <url-pattern>/rest/*</url-pattern>\\n\"\n-            + \"  </servlet-mapping>\\n\" + \"  <servlet>\\n\" + \"    <servlet-name>WADLServlet</servlet-name>\\n\"\n-            + \"    <servlet-class>org.apache.syncope.core.rest.WADLServlet</servlet-class>\\n\"\n-            + \"    <load-on-startup>2</load-on-startup> \\n\" + \"  </servlet>\\n\" + \"  <servlet-mapping>\\n\"\n-            + \"    <servlet-name>WADLServlet</servlet-name>\\n\" + \"    <url-pattern>/rest/doc/*</url-pattern>\\n\"\n-            + \"  </servlet-mapping>\\n\" + \"\\n\" + \"  <filter>\\n\" + \"    <filter-name>encodingFilter</filter-name>\\n\"\n-            + \"    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\\n\"\n-            + \"    <init-param>\\n\" + \"      <param-name>encoding</param-name>\\n\"\n-            + \"      <param-value>UTF-8</param-value>\\n\" + \"    </init-param>\\n\" + \"    <init-param>\\n\"\n-            + \"      <param-name>forceEncoding</param-name>\\n\" + \"      <param-value>true</param-value>\\n\"\n-            + \"    </init-param>\\n\" + \"  </filter>\\n\" + \"  <filter>\\n\"\n-            + \"    <filter-name>springSecurityFilterChain</filter-name>\\n\"\n-            + \"    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\\n\"\n-            + \"  </filter>\\n\" + \"\\n\" + \"  <filter-mapping>\\n\" + \"    <filter-name>encodingFilter</filter-name>\\n\"\n-            + \"    <url-pattern>/*</url-pattern>\\n\" + \"  </filter-mapping>\\n\" + \"  <filter-mapping>\\n\"\n-            + \"    <filter-name>springSecurityFilterChain</filter-name>\\n\" + \"    <url-pattern>/*</url-pattern>\\n\"\n-            + \"  </filter-mapping>\\n\" + \"\\n\" + \"  <login-config>\\n\" + \"    <auth-method>CLIENT-CERT</auth-method>\\n\"\n-            + \"  </login-config>\\n\" + \"    \\n\" + \"  <!-- Uncomment this when using JNDI DataSource -->\\n\"\n-            + \"%s\"\n-            + \"</web-app>\\n\";\n-\n-    private static final String withDataSource = \"<!-- Uncomment this when using JNDI DataSource -->\\n\"\n+    private static final String WITH_DATA_SOURCE = \"<!-- Uncomment this when using JNDI DataSource -->\\n\"\n             + \"  <resource-ref>\\n\"\n             + \"    <res-ref-name>jdbc/syncopeDataSource</res-ref-name>\\n\"\n             + \"    <res-type>javax.sql.DataSource</res-type>\\n\"\n             + \"    <res-auth>Container</res-auth>\\n\"\n-            + \"  </resource-ref>\\n\" + \"\\n\";\n+            + \"  </resource-ref>\\n\"\n+            + \"</web-app>\";\n \n-    private static final String withDataSourceForJBoss = \"<!-- Uncomment this when using JNDI DataSource -->\\n\"\n+    private static final String WITH_DATA_SOURCE_FOR_JBOSS = \"<!-- Uncomment this when using JNDI DataSource -->\\n\"\n             + \"  <resource-ref>\\n\"\n             + \"    <res-ref-name>jdbc/syncopeDataSource</res-ref-name>\\n\"\n             + \"    <res-type>javax.sql.DataSource</res-type>\\n\"\n             + \"    <res-auth>Container</res-auth>\\n\"\n             + \"    <lookup-name>java:/syncopeDataSource</lookup-name>\\n\"\n-            + \"  </resource-ref>\\n\" + \"\\n\";\n+            + \"  </resource-ref>\\n\"\n+            + \"</web-app>\";\n+\n+    public static String withDataSource(final String content) {\n+        return content.replace(PLACEHOLDER, WITH_DATA_SOURCE);\n+    }\n \n+    public static String withDataSourceForJBoss(final String content) {\n+        return content.replace(PLACEHOLDER, WITH_DATA_SOURCE_FOR_JBOSS);\n+    }\n }"},{"sha":"9eadedd96548a5704c52db1d49e46cbfadf838b2","filename":"installer/src/main/java/org/apache/syncope/installer/files/GlassfishCoreWebXml.java","status":"modified","additions":7,"deletions":31,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FGlassfishCoreWebXml.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FGlassfishCoreWebXml.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FGlassfishCoreWebXml.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -20,38 +20,14 @@\n \n public class GlassfishCoreWebXml {\n \n-    public static final String PATH = \"/core/src/main/webapp/WEB-INF/glassfish-web.xml\";\n-\n-    public static String withDataSource() {\n-        return String.format(FILE, dataSource);\n-    }\n-\n-    private final static String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + \"<!--\\n\"\n-            + \"Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"distributed with this work for additional information\\n\"\n-            + \"regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"\\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"with the License.  You may obtain a copy of the License at\\n\" + \"\\n\"\n-            + \"  http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"\\n\"\n-            + \"Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"software distributed under the License is distributed on an\\n\"\n-            + \"\\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"KIND, either express or implied.  See the License for the\\n\"\n-            + \"specific language governing permissions and limitations\\n\" + \"under the License.\\n\" + \"\\n\" + \"-->\\n\"\n-            + \"<!DOCTYPE glassfish-web-app PUBLIC \\\"-//GlassFish.org//DTD \\n\"\n-            + \"GlassFish Application Server 3.1 Servlet 3.0//EN\\\" \\\"http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd\\\">\\n\"\n-            + \"<glassfish-web-app>\\n\" + \"  <context-root>/syncope</context-root>\\n\"\n-            + \"%s\"\n-            + \"  <class-loader delegate=\\\"false\\\"/>\\n\" + \"  <jsp-config>\\n\"\n-            + \"    <property name=\\\"httpMethods\\\" value=\\\"GET,POST,HEAD,PUT,DELETE\\\"/>\\n\" + \"  </jsp-config>\\n\"\n-            + \"</glassfish-web-app>\";\n-\n-    private static final String dataSource = \"<!-- Uncomment this when using JNDI DataSource -->\\n\"\n-            + \"  <resource-ref>\\n\"\n+    public static final String PLACEHOLDER = \"  <!--<resource-ref>\\n\"\n             + \"    <res-ref-name>jdbc/syncopeDataSource</res-ref-name>\\n\"\n             + \"    <jndi-name>jdbc/syncopeDataSource</jndi-name>\\n\"\n-            + \"  </resource-ref>\\n\";\n+            + \"  </resource-ref>-->\";\n+\n+    public static final String DATA_SOURCE = \"  <resource-ref>\\n\"\n+            + \"    <res-ref-name>jdbc/syncopeDataSource</res-ref-name>\\n\"\n+            + \"    <jndi-name>jdbc/syncopeDataSource</jndi-name>\\n\" \n+            + \"  </resource-ref>\";\n \n }"},{"sha":"1d70e36a6271a8ccc3d570b5570a5e1e280a64a4","filename":"installer/src/main/java/org/apache/syncope/installer/files/JBossDeploymentStructureXml.java","status":"modified","additions":4,"deletions":36,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FJBossDeploymentStructureXml.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FJBossDeploymentStructureXml.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FJBossDeploymentStructureXml.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -19,42 +19,10 @@\n package org.apache.syncope.installer.files;\n \n public class JBossDeploymentStructureXml {\n+    \n+    public static final String PLACEHOLDER = \"<module name=\\\"org.apache.xalan\\\"/>\";\n \n-    public static final String PATH = \"/core/src/main/webapp/WEB-INF/jboss-deployment-structure.xml\";\n-\n-    public static final String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + \"<!--\\n\"\n-            + \"Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"distributed with this work for additional information\\n\"\n-            + \"regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"\\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"with the License.  You may obtain a copy of the License at\\n\" + \"\\n\"\n-            + \"       http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"\\n\"\n-            + \"Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"software distributed under the License is distributed on an\\n\"\n-            + \"\\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"KIND, either express or implied.  See the License for the\\n\"\n-            + \"specific language governing permissions and limitations\\n\" + \"under the License.\\n\" + \"\\n\" + \"-->\\n\"\n-            + \"<jboss-deployment-structure xmlns=\\\"urn:jboss:deployment-structure:1.2\\\">\\n\"\n-            + \"  <deployment>\\n\"\n-            + \"    <exclude-subsystems>\\n\" \n-            + \"      <subsystem name=\\\"webservices\\\"/>\\n\" \n-            + \"      <subsystem name=\\\"jaxrs\\\"/>\\n\" \n-            + \"    </exclude-subsystems>\"\n-            + \"    <dependencies>\\n\"\n-            + \"      <module name=\\\"org.apache.xalan\\\"/>\\n\"\n-            + \"      <module name=\\\"%s\\\"/>\\n\"\n-            + \"    </dependencies>\\n\"\n-            + \"    <exclusions>\\n\"\n-            + \"      <module name=\\\"org.hibernate\\\"/>\\n\"\n-            + \"      <module name=\\\"org.slf4j\\\"/>\\n\"\n-            + \"      <module name=\\\"org.slf4j.impl\\\"/>\\n\"\n-            + \"      <module name=\\\"javax.ws.rs.api\\\"/>\\n\"\n-            + \"      <module name=\\\"org.apache.cxf\\\"/>\\n\"\n-            + \"      <module name=\\\"org.apache.cxf.impl\\\"/>\\n\"\n-            + \"    </exclusions>\\n\"\n-            + \"  </deployment>\\n\"\n-            + \"</jboss-deployment-structure>\";\n+    public static final String JBOSSMODULE = \"<module name=\\\"org.apache.xalan\\\"/>\\n\"\n+            + \"<module name=\\\"%s\\\"/>\";\n \n }"},{"sha":"49c05f37b930fa2722951bc42fedcab350c9a8a9","filename":"installer/src/main/java/org/apache/syncope/installer/files/ParentPom.java","status":"modified","additions":9,"deletions":167,"changes":176,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FParentPom.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -19,176 +19,18 @@\n package org.apache.syncope.installer.files;\n \n public class ParentPom {\n+    \n+    public static final String PLACEHOLDER = \"</project>\";\n \n-    public static final String PATH = \"/pom.xml\";\n-\n-    public static final String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><!--\\n\"\n-            + \"Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"distributed with this work for additional information\\n\"\n-            + \"regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"\\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"with the License.  You may obtain a copy of the License at\\n\" + \"\\n\"\n-            + \"  http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"\\n\"\n-            + \"Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"software distributed under the License is distributed on an\\n\"\n-            + \"\\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"KIND, either express or implied.  See the License for the\\n\"\n-            + \"specific language governing permissions and limitations\\n\"\n-            + \"under the License.\\n\"\n-            + \"-->\\n\"\n-            + \"<project xmlns=\\\"http://maven.apache.org/POM/4.0.0\\\"\\n\"\n-            + \"         xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n-            + \"         xsi:schemaLocation=\\\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\\\">\\n\"\n-            + \"  \\n\"\n-            + \"  <modelVersion>4.0.0</modelVersion>\\n\"\n-            + \"  \\n\"\n-            + \"  <parent>\\n\"\n-            + \"    <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"    <artifactId>syncope</artifactId>\\n\"\n-            + \"    <version>%s</version>\\n\"\n-            + \"  </parent>\\n\"\n-            + \"  \\n\"\n-            + \"  <properties>\\n\"\n-            + \"    <syncope.version>%s</syncope.version>\\n\"\n-            + \"    <secretKey>ahsdgausygdausygduasygd</secretKey>\\n\"\n-            + \"    <anonymousKey>asdasdasdasd</anonymousKey>\\n\"\n-            + \"  </properties>\\n\"\n-            + \"  \\n\"\n-            + \"  <name>Apache Syncope sample project</name>\\n\"\n-            + \"  <groupId>%s</groupId>\\n\"\n-            + \"  <artifactId>%s</artifactId>\\n\"\n-            + \"  <version>1.0-SNAPSHOT</version>\\n\"\n-            + \"  <packaging>pom</packaging>\\n\"\n-            + \"  \\n\"\n-            + \"  <dependencyManagement>\\n\"\n-            + \"    <dependencies>\\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-common</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"      \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-common</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <classifier>javadoc</classifier>\\n\"\n-            + \"      </dependency>\\n\"\n-            + \"      \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-client</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"      \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-build-tools</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <type>war</type>\\n\"\n-            + \"        <scope>test</scope>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"      \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-core</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <type>war</type>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-core</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <classifier>classes</classifier>\\n\"\n-            + \"        <scope>provided</scope>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"     \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-console</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <type>war</type>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"      <dependency>\\n\"\n-            + \"        <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"        <artifactId>syncope-console</artifactId>\\n\"\n-            + \"        <version>${syncope.version}</version>\\n\"\n-            + \"        <classifier>classes</classifier>\\n\"\n-            + \"        <scope>provided</scope>\\n\"\n-            + \"      </dependency> \\n\"\n-            + \"    </dependencies>\\n\"\n-            + \"  </dependencyManagement>\\n\"\n-            + \"    \\n\"\n-            + \"  <build>\\n\"\n-            + \"    \\n\"\n-            + \"    <pluginManagement>\\n\"\n-            + \"      <plugins>\\n\"\n-            + \"        <!-- Disable LICENSE / NOTICE inclusion: see SYNCOPE-84 -->\\n\"\n-            + \"        <plugin>\\n\"\n-            + \"          <groupId>org.apache.maven.plugins</groupId>\\n\"\n-            + \"          <artifactId>maven-war-plugin</artifactId>\\n\"\n-            + \"          <inherited>false</inherited>\\n\"\n-            + \"          <configuration>\\n\"\n-            + \"            <webResources>\\n\"\n-            + \"              <resource>\\n\"\n-            + \"                <directory>src/main/webapp</directory>\\n\"\n-            + \"                <includes>\\n\"\n-            + \"                  <include>**/*.jsp</include>\\n\"\n-            + \"                </includes>\\n\"\n-            + \"                <filtering>true</filtering>\\n\"\n-            + \"              </resource>\\n\"\n-            + \"            </webResources>\\n\"\n-            + \"          </configuration>\\n\"\n-            + \"        </plugin>\\n\"\n-            + \"      </plugins>\\n\"\n-            + \"    </pluginManagement>\\n\"\n-            + \"    \\n\"\n-            + \"    <!-- Disable legal check for generated projects: see SYNCOPE-84 -->\\n\"\n-            + \"    <plugins>\\n\"\n-            + \"      <plugin>\\n\"\n-            + \"        <groupId>org.codehaus.mojo</groupId>\\n\"\n-            + \"        <artifactId>ianal-maven-plugin</artifactId>\\n\"\n-            + \"        <inherited>true</inherited>\\n\"\n-            + \"        <executions>\\n\"\n-            + \"          <execution>            \\n\"\n-            + \"            <goals>\\n\"\n-            + \"              <goal>verify-legal-files</goal>\\n\"\n-            + \"            </goals>\\n\"\n-            + \"            <phase>none</phase>\\n\"\n-            + \"          </execution>\\n\"\n-            + \"        </executions>\\n\"\n-            + \"      </plugin>\\n\"\n-            + \"      <plugin>\\n\"\n-            + \"        <groupId>org.apache.rat</groupId>\\n\"\n-            + \"        <artifactId>apache-rat-plugin</artifactId>\\n\"\n-            + \"        <inherited>true</inherited>\\n\"\n-            + \"        <executions>\\n\"\n-            + \"          <execution>\\n\"\n-            + \"            <goals>\\n\"\n-            + \"              <goal>check</goal>\\n\"\n-            + \"            </goals>\\n\"\n-            + \"            <phase>none</phase>\\n\"\n-            + \"          </execution>\\n\"\n-            + \"        </executions>\\n\"\n-            + \"      </plugin>\\n\"\n-            + \"    </plugins>\\n\"\n-            + \"  </build>\\n\"\n-            + \"  \\n\"\n-            + \"  <modules>\\n\"\n-            + \"    <module>core</module>\\n\"\n-            + \"    <module>console</module>\\n\"\n-            + \"  </modules>\\n\"\n-            + \"  \\n\"\n-            + \"  <repositories>\\n\" \n-            + \"  <repository>\\n\" \n+    public static final String REPOSITORY =\n+            \"  <repositories>\\n\"\n+            + \"  <repository>\\n\"\n             + \"    <id>ASF</id>\\n\"\n-            + \"    <url>https://repository.apache.org/content/repositories/snapshots/</url>\\n\" \n+            + \"    <url>https://repository.apache.org/content/repositories/snapshots/</url>\\n\"\n             + \"    <snapshots>\\n\"\n-            + \"      <enabled>true</enabled>\\n\" \n-            + \"    </snapshots>\\n\" \n-            + \"  </repository>\\n\" \n+            + \"      <enabled>true</enabled>\\n\"\n+            + \"    </snapshots>\\n\"\n+            + \"  </repository>\\n\"\n             + \"</repositories>\\n\"\n             + \"</project>\\n\";\n "},{"sha":"a64ea361a04ed79d21f2e03d0f26837532b56b80","filename":"installer/src/main/java/org/apache/syncope/installer/files/PersistenceContextEMFactoryXml.java","status":"modified","additions":7,"deletions":40,"changes":47,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceContextEMFactoryXml.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceContextEMFactoryXml.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceContextEMFactoryXml.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -20,45 +20,12 @@\n \n public class PersistenceContextEMFactoryXml {\n \n-    public static final String PATH = \"/core/src/main/resources/persistenceContextEMFactory.xml\";\n+    public static final String PLACEHOLDER = \"<entry key=\\\"openjpa.MetaDataFactory\\\"\\n\"\n+            + \"               value=\\\"jpa(URLs=vfs:${project.build.directory}/cargo/configurations/wildfly8x/\"\n+            + \"deployments/${project.build.finalName}.war/WEB-INF/classes/, Resources=META-INF/orm.xml)\\\"/>\";\n+\n+    public static final String JBOSS =\n+            \"<entry key=\\\"openjpa.MetaDataFactory\\\" value=\\\"jpa(URLs=vfs:/content/${project.build.finalName}.war/\"\n+            + \"WEB-INF/classes/, Resources=META-INF/orm.xml)\\\"/>\";\n \n-    public static final String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + \"<!--\\n\"\n-            + \"Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"distributed with this work for additional information\\n\"\n-            + \"regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"\\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"with the License.  You may obtain a copy of the License at\\n\" + \"\\n\"\n-            + \"  http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"\\n\"\n-            + \"Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"software distributed under the License is distributed on an\\n\"\n-            + \"\\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"KIND, either express or implied.  See the License for the\\n\"\n-            + \"specific language governing permissions and limitations\\n\" + \"under the License.\\n\" + \"-->\\n\"\n-            + \"<beans xmlns=\\\"http://www.springframework.org/schema/beans\\\"\\n\"\n-            + \"       xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n-            + \"       xsi:schemaLocation=\\\"http://www.springframework.org/schema/beans\\n\"\n-            + \"       http://www.springframework.org/schema/beans/spring-beans.xsd\\\">\\n\" + \"\\n\"\n-            + \"  <bean id=\\\"entityManagerFactory\\\"\\n\"\n-            + \"        class=\\\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\\\">\\n\"\n-            + \"    <property name=\\\"persistenceXmlLocation\\\" value=\\\"classpath*:META-INF/spring-persistence.xml\\\"/>\\n\"\n-            + \"    <property name=\\\"persistenceUnitName\\\" value=\\\"syncopePersistenceUnit\\\"/>\\n\"\n-            + \"    <property name=\\\"dataSource\\\" ref=\\\"dataSource\\\"/>\\n\" + \"    <property name=\\\"jpaVendorAdapter\\\">\\n\"\n-            + \"      <bean class=\\\"org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter\\\">\\n\"\n-            + \"        <property name=\\\"showSql\\\" value=\\\"false\\\"/>\\n\"\n-            + \"        <property name=\\\"generateDdl\\\" value=\\\"true\\\"/>\\n\"\n-            + \"        <property name=\\\"databasePlatform\\\" value=\\\"${jpa.dialect}\\\"/>\\n\" + \"      </bean>\\n\"\n-            + \"    </property>\\n\" + \"    <property name=\\\"jpaPropertyMap\\\">\\n\" + \"      <map>\\n\"\n-            + \"        <!--<entry key=\\\"openjpa.Log\\\" value=\\\"SQL=TRACE\\\"/>\\n\"\n-            + \"        <entry key=\\\"openjpa.ConnectionFactoryProperties\\\" \\n\"\n-            + \"               value=\\\"PrintParameters=true, PrettyPrint=true, PrettyPrintLineLength=80\\\"/>-->\\n\"\n-            + \"                \\n\" + \"        <entry key=\\\"openjpa.NontransactionalWrite\\\" value=\\\"false\\\"/>\\n\"\n-            + \"        <entry key=\\\"openjpa.AutoDetach\\\" value=\\\"close, commit, nontx-read, rollback\\\"/>\\n\" + \"\\n\"\n-            + \"        <entry key=\\\"openjpa.jdbc.SchemaFactory\\\" value=\\\"native(ForeignKeys=true)\\\"/>\\n\"\n-            + \"        <entry key=\\\"openjpa.jdbc.MappingDefaults\\\" value=\\\"ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict\\\"/>\\n\"\n-            + \"                \\n\" + \"        <entry key=\\\"openjpa.DataCache\\\" value=\\\"true\\\"/>\\n\"\n-            + \"        <entry key=\\\"openjpa.QueryCache\\\" value=\\\"true\\\"/>\\n\"\n-            + \"        <entry key=\\\"openjpa.RemoteCommitProvider\\\" value=\\\"sjvm\\\"/>\\n\" + \"      </map>\\n\"\n-            + \"    </property>\\n\" + \"  </bean>\\n\" + \"\\n\" + \"</beans>\\n\";\n }"},{"sha":"cba0b6100f39d8f43f811aa163db8cd1d5d60ac9","filename":"installer/src/main/java/org/apache/syncope/installer/files/PersistenceProperties.java","status":"modified","additions":14,"deletions":13,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -20,8 +20,6 @@\n \n public class PersistenceProperties {\n \n-    public static final String PATH = \"/core/src/main/resources/persistence.properties\";\n-\n     public static final String HEADER = \"# Licensed to the Apache Software Foundation (ASF) under one\\n\"\n             + \"# or more contributor license agreements.  See the NOTICE file\\n\"\n             + \"# distributed with this work for additional information\\n\"\n@@ -59,28 +57,31 @@ public class PersistenceProperties {\n             + \"audit.sql=audit.sql\\n\"\n             + \"database.schema=\\n\";\n \n-    public static final String ORACLE = \"\"\n-            + \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n+    public static final String ORACLE = \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n             + \"jpa.url=%s\\n\"\n             + \"jpa.username=%s\\n\"\n             + \"jpa.password=%s\\n\"\n             + \"jpa.dialect=org.apache.openjpa.jdbc.sql.OracleDictionary\\n\"\n-            + \"jpa.pool.validationQuery=SELECT 1\\n\"\n+            + \"jpa.pool.validationQuery=SELECT 1 FROM DUAL\\n\"\n+            + \"#note: other connection pool settings can also be configured here, see persistenceContext.xml\\n\"\n             + \"quartz.jobstore=org.quartz.impl.jdbcjobstore.oracle.OracleDelegate\\n\"\n+            + \"quartz.scheduler.idleWaitTime=5000\\n\"\n             + \"quartz.sql=tables_oracle.sql\\n\"\n-            + \"audit.sql=audit.sql\\n\"\n+            + \"audit.sql=audit_oracle.sql\\n\"\n             + \"database.schema=%s\\n\";\n \n-    public static final String SQLSERVER = \"\"\n-            + \"jpa.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\\n\"\n+    public static final String SQLSERVER = \"jpa.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\\n\"\n             + \"jpa.url=%s\\n\"\n             + \"jpa.username=%s\\n\"\n             + \"jpa.password=%s\\n\"\n-            + \"jpa.dialect=org.apache.openjpa.jdbc.sql.SQLServerDictionary\\n\"\n-            + \"quartz.jobstore=org.quartz.impl.jdbcjobstore.MSSQLDelegate\\n\"\n-            + \"quartz.sql=tables_sqlServer.sql\\n\"\n-            + \"audit.sql=audit.sql\\n\"\n-            + \"database.schema=\\n\";\n+            + \"jpa.dialect=org.apache.openjpa.jdbc.sql.SQLServerDictionary\\n\" \n+            + \"jpa.pool.validationQuery=SELECT 1\\n\"\n+            + \"#note: other connection pool settings can also be configured here, see persistenceContext.xml\\n\"\n+            + \"quartz.jobstore=org.quartz.impl.jdbcjobstore.MSSQLDelegate\\n\" \n+            + \"quartz.scheduler.idleWaitTime=5000\\n\"\n+            + \"quartz.sql=tables_sqlServer.sql\\n\" \n+            + \"audit.sql=audit_sqlserver.sql\\n\" \n+            + \"database.schema=\";\n \n     public static final String QUARTZ_INNO_DB = \"quartz.sql=tables_mysql_innodb.sql\";\n "},{"sha":"0c7bdea36e46eaeaf0c0e2866ce8c609bce62c6b","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":29,"deletions":12,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -22,16 +22,15 @@\n import com.izforge.izpack.panels.process.AbstractUIProcessHandler;\n import java.io.File;\n import java.io.IOException;\n+import java.util.Properties;\n import javax.xml.parsers.ParserConfigurationException;\n import javax.xml.transform.TransformerException;\n-import org.apache.syncope.installer.files.ModelerPom;\n-import org.apache.syncope.installer.files.ModelerTokenValueMap;\n import org.apache.syncope.installer.files.ParentPom;\n import org.apache.syncope.installer.utilities.InstallLog;\n import org.apache.syncope.installer.utilities.MavenUtils;\n import org.xml.sax.SAXException;\n \n-public class ArchetypeProcess {\n+public class ArchetypeProcess extends BaseProcess {\n \n     public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         final String installPath = args[0];\n@@ -52,6 +51,8 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         final String proxyUser = args[15];\n         final String proxyPwd = args[16];\n         final boolean mavenProxyAutoconf = Boolean.valueOf(args[17]);\n+        \n+        setSyncopeInstallDir(installPath, artifactId);\n \n         final FileSystemUtils fileSystemUtils = new FileSystemUtils(handler);\n         fileSystemUtils.createDirectory(installPath);\n@@ -97,21 +98,37 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         handler.logOutput(\"########################## IMPORTANT ##########################\", true);\n         mavenUtils.archetypeGenerate(\n                 syncopeVersion, groupId, artifactId, secretKey, anonymousKey, installPath, customMavenProxySettings);\n-        \n+\n         if (syncopeVersion.contains(\"SNAPSHOT\")) {\n-            fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + ParentPom.PATH),\n-                    String.format(ParentPom.FILE, syncopeVersion, syncopeVersion, groupId, artifactId));\n+            final File pomFile =\n+                    new File(syncopeInstallDir + properties.getProperty(\"pomFile\"));\n+            String contentPomFile = fileSystemUtils.readFile(pomFile);\n+            fileSystemUtils.writeToFile(pomFile, contentPomFile.replace(ParentPom.PLACEHOLDER, ParentPom.REPOSITORY));\n         }\n-        \n+\n         fileSystemUtils.createDirectory(confDirectory);\n         fileSystemUtils.createDirectory(logsDirectory);\n         fileSystemUtils.createDirectory(bundlesDirectory);\n         fileSystemUtils.createDirectory(modelerDirectory);\n-        fileSystemUtils.writeToFile(new File(modelerDirectory + ModelerPom.PATH),\n-                String.format(ModelerPom.FILE, modelerDirectory, modelerDirectory));\n-        fileSystemUtils.writeToFile(new File(modelerDirectory + ModelerTokenValueMap.PATH), ModelerTokenValueMap.FILE);\n-        mavenUtils.mvnCleanPackage(modelerDirectory, customMavenProxySettings);\n+        \n+        fileSystemUtils.copyFileFromResources(\"/\" + properties.getProperty(\"modelerPomFile\"),\n+                modelerDirectory + \"/\" + properties.getProperty(\"pomFile\"), handler);\n+\n+        fileSystemUtils.copyFile(\n+                syncopeInstallDir\n+                + properties.getProperty(\"consoleResDirectory\")\n+                + \"/\" + properties.getProperty(\"tokenValueMapFile\"),\n+                modelerDirectory + \"/\" + properties.getProperty(\"tokenValueMapFile\"));\n+\n+        final Properties modelerProperties = new Properties();\n+        modelerProperties.setProperty(\"modeler.directory\", modelerDirectory);\n+        mavenUtils.mvnCleanPackageWithProperties(modelerDirectory, modelerProperties, customMavenProxySettings);\n+\n+        final Properties syncopeProperties = new Properties();\n+        syncopeProperties.setProperty(\"conf.directory\", confDirectory);\n+        syncopeProperties.setProperty(\"log.directory\", logsDirectory);\n+        syncopeProperties.setProperty(\"bundles.directory\", bundlesDirectory);\n         mavenUtils.mvnCleanPackageWithProperties(\n-                installPath + \"/\" + artifactId, confDirectory, logsDirectory, bundlesDirectory, customMavenProxySettings);\n+                installPath + \"/\" + artifactId, syncopeProperties, customMavenProxySettings);\n     }\n }"},{"sha":"2058c12528ca73bd196aa54151dc8d790da0b197","filename":"installer/src/main/java/org/apache/syncope/installer/processes/BaseProcess.java","status":"added","additions":54,"deletions":0,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FBaseProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FBaseProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FBaseProcess.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -0,0 +1,54 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.installer.processes;\n+\n+import static org.apache.syncope.installer.processes.ArchetypeProcess.properties;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.Properties;\n+import org.apache.commons.io.IOUtils;\n+\n+public class BaseProcess {\n+\n+    protected final static Properties properties = new Properties();\n+\n+    protected String syncopeInstallDir;\n+\n+    private static InputStream is = null;\n+\n+    static {\n+        try {\n+            is = BaseProcess.class.getResourceAsStream(\"/configuration.properties\");\n+            properties.load(is);\n+        } catch (final IOException e) {\n+        } finally {\n+            IOUtils.closeQuietly(is);\n+        }\n+    }\n+\n+    protected void setSyncopeInstallDir(final String installPath, final String artifactId) {\n+        final StringBuilder path = new StringBuilder();\n+        path.append(installPath);\n+        path.append(\"/\");\n+        path.append(artifactId);\n+        path.append(\"/\");\n+        syncopeInstallDir = path.toString();\n+    }\n+}"},{"sha":"6b99918114517890ddd1bf3138c5142687c089c9","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ContainerProcess.java","status":"modified","additions":133,"deletions":38,"changes":171,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -22,21 +22,31 @@\n import com.izforge.izpack.panels.process.AbstractUIProcessHandler;\n import java.io.File;\n import java.io.IOException;\n+import java.util.Properties;\n import javax.xml.parsers.ParserConfigurationException;\n import javax.xml.transform.TransformerException;\n import org.apache.syncope.installer.containers.Glassfish;\n import org.apache.syncope.installer.containers.Tomcat;\n import org.apache.syncope.installer.containers.jboss.JBoss;\n import org.apache.syncope.installer.enums.Containers;\n+import org.apache.syncope.installer.files.ConsoleProperties;\n import org.apache.syncope.installer.files.GlassfishCoreWebXml;\n import org.apache.syncope.installer.files.JBossDeploymentStructureXml;\n-import org.apache.syncope.installer.files.PersistenceContextEMFactoryXml;\n import org.apache.syncope.installer.files.CoreWebXml;\n+import org.apache.syncope.installer.files.PersistenceContextEMFactoryXml;\n import org.apache.syncope.installer.utilities.InstallLog;\n import org.apache.syncope.installer.utilities.MavenUtils;\n import org.xml.sax.SAXException;\n \n-public class ContainerProcess {\n+public class ContainerProcess extends BaseProcess {\n+\n+    private final static String HTTP = \"http\";\n+\n+    private final static String HTTPS = \"https\";\n+\n+    private final static String DEFAULT_HOST = \"localhost\";\n+\n+    private final static String DEFAULT_PORT = \"8080\";\n \n     private String installPath;\n \n@@ -56,6 +66,12 @@ public class ContainerProcess {\n \n     private String glassfishDir;\n \n+    private boolean glassfishSsl;\n+\n+    private String glassfishHost;\n+\n+    private String glassfishPort;\n+\n     private String confDirectory;\n \n     private String logsDirectory;\n@@ -76,6 +92,8 @@ public class ContainerProcess {\n \n     private String jbossAdminPassword;\n \n+    private String jbossManagementPort;\n+\n     private boolean isProxyEnabled;\n \n     private String proxyHost;\n@@ -99,49 +117,104 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         tomcatPort = args[6];\n         tomcatUser = args[7];\n         tomcatPassword = args[8];\n-        glassfishDir = args[9];\n-        confDirectory = args[10];\n-        logsDirectory = args[11];\n-        bundlesDirectory = args[12];\n-        withDataSource = Boolean.valueOf(args[13]);\n-        jbossSsl = Boolean.valueOf(args[14]);\n-        jbossHost = args[15];\n-        jbossPort = args[16];\n-        jbossJdbcModuleName = args[17];\n-        jbossAdminUsername = args[18];\n-        jbossAdminPassword = args[19];\n-        isProxyEnabled = Boolean.valueOf(args[20]);\n-        proxyHost = args[21];\n-        proxyPort = args[22];\n-        proxyUser = args[23];\n-        proxyPwd = args[24];\n-        mavenProxyAutoconf = Boolean.valueOf(args[25]);\n+        glassfishSsl = Boolean.valueOf(args[9]);\n+        glassfishHost = args[10];\n+        glassfishPort = args[11];\n+        glassfishDir = args[12];\n+        confDirectory = args[13];\n+        logsDirectory = args[14];\n+        bundlesDirectory = args[15];\n+        withDataSource = Boolean.valueOf(args[16]);\n+        jbossSsl = Boolean.valueOf(args[17]);\n+        jbossHost = args[18];\n+        jbossPort = args[19];\n+        jbossJdbcModuleName = args[20];\n+        jbossAdminUsername = args[21];\n+        jbossAdminPassword = args[22];\n+        jbossManagementPort = args[23];\n+        isProxyEnabled = Boolean.valueOf(args[24]);\n+        proxyHost = args[25];\n+        proxyPort = args[26];\n+        proxyUser = args[27];\n+        proxyPwd = args[28];\n+        mavenProxyAutoconf = Boolean.valueOf(args[28]);\n \n         final FileSystemUtils fileSystemUtils = new FileSystemUtils(handler);\n-\n+        \n         handler.logOutput(\"Configure web.xml file according to \" + selectedContainer + \" properties\", true);\n         InstallLog.getInstance().info(\"Configure web.xml file according to \" + selectedContainer + \" properties\");\n-\n+        \n+        setSyncopeInstallDir(installPath, artifactId);\n+                \n         if (withDataSource) {\n-            fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + CoreWebXml.PATH), CoreWebXml.\n-                    withDataSource());\n+            final File coreWebXmlFile =\n+                    new File(syncopeInstallDir + properties.getProperty(\"coreWebXmlFile\"));\n+            final String contentCoreWebXmlFile = fileSystemUtils.readFile(coreWebXmlFile);\n+\n             switch (selectedContainer) {\n+                case TOMCAT:\n+                    fileSystemUtils.writeToFile(coreWebXmlFile, CoreWebXml.withDataSource(contentCoreWebXmlFile));\n+                    break;\n                 case JBOSS:\n-                    fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + CoreWebXml.PATH),\n-                            CoreWebXml.withDataSourceForJBoss());\n-                    fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId\n-                            + PersistenceContextEMFactoryXml.PATH), PersistenceContextEMFactoryXml.FILE);\n-                    fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId\n-                            + JBossDeploymentStructureXml.PATH),\n-                            String.format(JBossDeploymentStructureXml.FILE, jbossJdbcModuleName));\n+                    fileSystemUtils.\n+                            writeToFile(coreWebXmlFile, CoreWebXml.withDataSourceForJBoss(contentCoreWebXmlFile));\n+                    final File jbossDeploymentStructureFile =\n+                            new File(syncopeInstallDir + properties.getProperty(\"jBossDeploymentStructureXmlFile\"));\n+                    final String contentJbossDeploymentStructureFile =\n+                            fileSystemUtils.readFile(jbossDeploymentStructureFile);\n+                    fileSystemUtils.writeToFile(\n+                            jbossDeploymentStructureFile,\n+                            contentJbossDeploymentStructureFile.replace(\n+                                    JBossDeploymentStructureXml.PLACEHOLDER,\n+                                    String.format(JBossDeploymentStructureXml.JBOSSMODULE, jbossJdbcModuleName)));\n                     break;\n                 case GLASSFISH:\n-                    fileSystemUtils.writeToFile(new File(installPath + \"/\" + artifactId + GlassfishCoreWebXml.PATH),\n-                            GlassfishCoreWebXml.withDataSource());\n+                    final File glassfishCoreWebXmlFile =\n+                            new File(syncopeInstallDir + properties.getProperty(\"glassfishCoreWebXmlFile\"));\n+                    final String contentGlassfishWebXmlFile = fileSystemUtils.readFile(glassfishCoreWebXmlFile);\n+                    fileSystemUtils.writeToFile(glassfishCoreWebXmlFile,\n+                            contentGlassfishWebXmlFile.replace(GlassfishCoreWebXml.PLACEHOLDER,\n+                                    GlassfishCoreWebXml.DATA_SOURCE));\n                     break;\n             }\n         }\n \n+        final File consolePropertiesFile =\n+                new File(syncopeInstallDir\n+                        + properties.getProperty(\"consoleResDirectory\")\n+                        + \"/\" + properties.getProperty(\"consolePropertiesFile\"));\n+        final String contentConsolePropertiesFile = fileSystemUtils.readFile(consolePropertiesFile);\n+\n+        final String scheme;\n+        final String host;\n+        final String port;\n+        switch (selectedContainer) {\n+            case TOMCAT:\n+                scheme = tomcatSsl ? HTTPS : HTTP;\n+                host = tomcatHost;\n+                port = tomcatPort;\n+                break;\n+            case JBOSS:\n+                scheme = jbossSsl ? HTTPS : HTTP;\n+                host = jbossHost;\n+                port = jbossPort;\n+                persistenceContextEMFactory(fileSystemUtils, handler);\n+                break;\n+            case GLASSFISH:\n+                scheme = glassfishSsl ? HTTPS : HTTP;\n+                host = glassfishHost;\n+                port = glassfishPort;\n+                break;\n+            default:\n+                scheme = HTTP;\n+                host = DEFAULT_HOST;\n+                port = DEFAULT_PORT;\n+        }\n+\n+        fileSystemUtils.writeToFile(consolePropertiesFile,\n+                contentConsolePropertiesFile.replace(ConsoleProperties.PLACEHOLDER,\n+                        String.format(ConsoleProperties.CONSOLE, scheme, host, port)));\n+\n         final MavenUtils mavenUtils = new MavenUtils(mavenDir, handler);\n         File customMavenProxySettings = null;\n         try {\n@@ -178,16 +251,23 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n             InstallLog.getInstance().error(messageError.append(ex.getMessage() == null ? \"\" : ex.getMessage()).\n                     toString());\n         }\n-        mavenUtils.mvnCleanPackageWithProperties(installPath + \"/\" + artifactId, confDirectory, logsDirectory, bundlesDirectory,\n-                customMavenProxySettings);\n+\n+        final Properties mvnProperties = new Properties();\n+        mvnProperties.setProperty(\"conf.directory\", confDirectory);\n+        mvnProperties.setProperty(\"log.directory\", logsDirectory);\n+        mvnProperties.setProperty(\"bundles.directory\", bundlesDirectory);\n+        mavenUtils.mvnCleanPackageWithProperties(\n+                installPath + \"/\" + artifactId, mvnProperties, customMavenProxySettings);\n+\n         if (isProxyEnabled && mavenProxyAutoconf) {\n             FileSystemUtils.delete(customMavenProxySettings);\n         }\n \n         switch (selectedContainer) {\n             case TOMCAT:\n                 final Tomcat tomcat = new Tomcat(\n-                        tomcatSsl, tomcatHost, tomcatPort, installPath, artifactId, tomcatUser, tomcatPassword, handler);\n+                        tomcatSsl, tomcatHost, tomcatPort, installPath, artifactId, tomcatUser, tomcatPassword,\n+                        handler);\n                 boolean deployCoreResult = tomcat.deployCore();\n                 if (deployCoreResult) {\n                     handler.logOutput(\"Core successfully deployed \", true);\n@@ -210,7 +290,7 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n                 break;\n             case JBOSS:\n                 final JBoss jBoss = new JBoss(\n-                        jbossSsl, jbossHost, jbossPort, jbossAdminUsername,\n+                        jbossSsl, jbossHost, jbossManagementPort, jbossAdminUsername,\n                         jbossAdminPassword, installPath, artifactId, handler);\n \n                 boolean deployCoreJboss = jBoss.deployCore();\n@@ -239,10 +319,25 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n \n                 final Glassfish glassfish = new Glassfish(installPath, artifactId);\n \n-                fileSystemUtils.exec(\"sh \" + glassfishDir + Glassfish.DEPLOY_COMMAND + glassfish.deployCore(), null);\n-                fileSystemUtils.exec(\"sh \" + glassfishDir + Glassfish.DEPLOY_COMMAND + glassfish.deployConsole(), null);\n+                fileSystemUtils.exec(\"sh \" + glassfishDir\n+                        + Glassfish.DEPLOY_COMMAND + glassfish.deployCore(), null);\n+                fileSystemUtils.exec(\"sh \" + glassfishDir\n+                        + Glassfish.DEPLOY_COMMAND + glassfish.deployConsole(), null);\n                 break;\n         }\n     }\n \n+    private void persistenceContextEMFactory(\n+            final FileSystemUtils fileSystemUtils, final AbstractUIProcessHandler handler) {\n+        fileSystemUtils.copyFileFromResources(\"/jboss/persistenceContextEMFactory.xml\",\n+                syncopeInstallDir\n+                + properties.getProperty(\"persistenceContextEMFactoryFile\"), handler);\n+        final File persistenceContextEMFactoryFile = new File(\n+                syncopeInstallDir + properties.getProperty(\"persistenceContextEMFactoryFile\"));\n+        final String contentPersistenceContextEMFactory = fileSystemUtils.readFile(persistenceContextEMFactoryFile);\n+        fileSystemUtils.writeToFile(\n+                persistenceContextEMFactoryFile,\n+                contentPersistenceContextEMFactory.replace(PersistenceContextEMFactoryXml.PLACEHOLDER,\n+                        PersistenceContextEMFactoryXml.JBOSS));\n+    }\n }"},{"sha":"33356f67a074548dc8be1a233e8f0d3440d4e0cb","filename":"installer/src/main/java/org/apache/syncope/installer/processes/PersistenceProcess.java","status":"modified","additions":11,"deletions":14,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -22,11 +22,10 @@\n import com.izforge.izpack.panels.process.AbstractUIProcessHandler;\n import java.io.File;\n import org.apache.syncope.installer.enums.DBs;\n-import org.apache.syncope.installer.files.OrmXml;\n import org.apache.syncope.installer.files.PersistenceProperties;\n import org.apache.syncope.installer.utilities.InstallLog;\n \n-public class PersistenceProcess {\n+public class PersistenceProcess extends BaseProcess {\n \n     private String installPath;\n \n@@ -56,8 +55,8 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         oracleTableSpace = args[7];\n \n         final FileSystemUtils fileSystemUtils = new FileSystemUtils(handler);\n-\n         final StringBuilder persistenceProperties = new StringBuilder(PersistenceProperties.HEADER);\n+        setSyncopeInstallDir(installPath, artifactId);\n \n         handler.logOutput(\"Configure persistence file according to \" + dbSelected + \" properties\", true);\n         InstallLog.getInstance().info(\"Configure persistence file according to \" + dbSelected + \" properties\");\n@@ -80,24 +79,22 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.ORACLE, persistenceUrl, persistenceUser, persistencePassword,\n                         oracleTableSpace));\n-                writeOrmFile(fileSystemUtils, OrmXml.ORACLE_ORM);\n+                fileSystemUtils.copyFileFromResources(\"/META-INF/orm.xml.oracle\",\n+                        syncopeInstallDir + properties.getProperty(\"coreMetaInfDirectory\")\n+                        + \"/\" + properties.getProperty(\"ormXmlFile\"), handler);\n                 break;\n             case SQLSERVER:\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.SQLSERVER, persistenceUrl, persistenceUser, persistencePassword));\n-                writeOrmFile(fileSystemUtils, OrmXml.SQLSERVER_ORM);\n+                fileSystemUtils.copyFileFromResources(\"/META-INF/orm.xml.sqlserver\",\n+                        syncopeInstallDir\n+                        + properties.getProperty(\"coreMetaInfDirectory\")\n+                        + \"/\" + properties.getProperty(\"ormXmlFile\"), handler);\n                 break;\n         }\n \n         fileSystemUtils.writeToFile(new File(\n-                installPath + \"/\" + artifactId + PersistenceProperties.PATH), persistenceProperties.toString());\n-\n-    }\n-\n-    private void writeOrmFile(final FileSystemUtils fileSystemUtils, final String content) {\n-        fileSystemUtils.createDirectory(\n-                installPath + File.separator + artifactId + OrmXml.PATH_DIR);\n-        fileSystemUtils.writeToFile(\n-                new File(installPath + File.separator + artifactId + OrmXml.PATH_COMPLETE), content);\n+                syncopeInstallDir + properties.getProperty(\"persistencePropertiesFile\")),\n+                persistenceProperties.toString());\n     }\n }"},{"sha":"4381c1eefabc80a91ab1c357cfb56f4b981bd973","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/FileSystemUtils.java","status":"modified","additions":45,"deletions":0,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -29,6 +29,11 @@\n import java.io.OutputStream;\n import java.io.OutputStreamWriter;\n import java.io.PrintWriter;\n+import java.net.URL;\n+import java.nio.file.CopyOption;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.nio.file.StandardCopyOption;\n import javax.xml.transform.OutputKeys;\n import javax.xml.transform.Transformer;\n import javax.xml.transform.TransformerException;\n@@ -54,6 +59,21 @@ public void createDirectory(final String directoryPath) {\n         }\n     }\n \n+    public void copyFile(final String sourceFilePath, final String targetFilePath) {\n+        try {\n+            final CopyOption[] options = new CopyOption[] {\n+                StandardCopyOption.REPLACE_EXISTING,\n+                StandardCopyOption.COPY_ATTRIBUTES\n+            };\n+            Files.copy(Paths.get(sourceFilePath), Paths.get(targetFilePath), options);\n+        } catch (final IOException ex) {\n+            final String errorMessage =\n+                    \"Error copy file \" + sourceFilePath + \" to \" + targetFilePath;\n+            handler.emitError(errorMessage, errorMessage);\n+            InstallLog.getInstance().error(errorMessage);\n+        }\n+    }\n+\n     public void exec(final String cmd, final String path) {\n         try {\n             handler.logOutput(\"Executing \" + cmd, true);\n@@ -96,6 +116,18 @@ public void writeToFile(final File file, final String content) {\n         }\n     }\n \n+    public String readFile(final File file) {\n+        String content = \"\";\n+        try {\n+            content = FileUtils.readFileToString(file);\n+        } catch (IOException ex) {\n+            final String errorMessage = \"Error reading file \" + file.getAbsolutePath() + \": \" + ex.getMessage();\n+            handler.emitError(errorMessage, errorMessage);\n+            InstallLog.getInstance().error(errorMessage);\n+        }\n+        return content;\n+    }\n+\n     public void appendToFile(final File file, final String content) {\n         try {\n             if (!file.exists()) {\n@@ -131,4 +163,17 @@ public static void writeXML(final Document doc, final OutputStream out) throws I\n     public static void delete(final File file) {\n         FileUtils.deleteQuietly(file);\n     }\n+\n+    public void copyFileFromResources(final String filePath,\n+            final String destination, final AbstractUIProcessHandler handler) {\n+        try {\n+            final URL url = getClass().getResource(filePath);\n+            final File dest = new File(destination);\n+            FileUtils.copyURLToFile(url, dest);\n+        } catch (IOException ex) {\n+            final String errorMessage = \"Error copy file \" + filePath;\n+            handler.emitError(errorMessage, errorMessage);\n+            InstallLog.getInstance().error(errorMessage);\n+        }\n+    }\n }"},{"sha":"f39d4b4e41b66bb4259698868e2c340e4f870c72","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/MavenUtils.java","status":"modified","additions":3,"deletions":28,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -65,8 +65,8 @@ public void archetypeGenerate(final String archetypeVersion, final String groupI\n         final InvocationRequest request = new DefaultInvocationRequest();\n         request.setGoals(Collections.singletonList(\"archetype:generate\"));\n         request.setInteractive(false);\n-        final Properties properties\n-                = archetypeProperties(archetypeVersion, groupId, artifactId, secretKey, anonymousKey);\n+        final Properties properties =\n+                archetypeProperties(archetypeVersion, groupId, artifactId, secretKey, anonymousKey);\n         request.setProperties(properties);\n         if (customSettingsFile != null && FileUtils.sizeOf(customSettingsFile) > 0) {\n             request.setUserSettingsFile(customSettingsFile);\n@@ -94,24 +94,8 @@ private Properties archetypeProperties(final String archetypeVersion, final Stri\n         return properties;\n     }\n \n-    public void mvnCleanPackage(final String path, final File customSettingsFile) {\n+    public void mvnCleanPackageWithProperties(final String path, final Properties properties, final File customSettingsFile) {\n         final InvocationRequest request = new DefaultInvocationRequest();\n-        if (customSettingsFile != null && FileUtils.sizeOf(customSettingsFile) > 0) {\n-            request.setUserSettingsFile(customSettingsFile);\n-        }\n-        final List<String> mavenGoals = new ArrayList<String>();\n-        mavenGoals.add(\"clean\");\n-        mavenGoals.add(\"package\");\n-        request.setGoals(mavenGoals);\n-        logToHandler(request.getGoals(), new Properties());\n-        logToFile(request.getGoals(), new Properties());\n-        invoke(request, path);\n-    }\n-\n-    public void mvnCleanPackageWithProperties(final String path, final String confDirectory,\n-            final String logDirectory, final String bundlesDirectory, final File customSettingsFile) {\n-        final InvocationRequest request = new DefaultInvocationRequest();\n-        final Properties properties = packageProperties(confDirectory, logDirectory, bundlesDirectory);\n         request.setProperties(properties);\n         if (customSettingsFile != null && FileUtils.sizeOf(customSettingsFile) > 0) {\n             request.setUserSettingsFile(customSettingsFile);\n@@ -149,15 +133,6 @@ private void logToFile(final List<String> goals, final Properties properties) {\n         }\n     }\n \n-    private Properties packageProperties(final String confDirectory, final String logDirectory,\n-            final String bundlesDirectory) {\n-        final Properties properties = new Properties();\n-        properties.setProperty(\"conf.directory\", confDirectory);\n-        properties.setProperty(\"log.directory\", logDirectory);\n-        properties.setProperty(\"bundles.directory\", bundlesDirectory);\n-        return properties;\n-    }\n-\n     private InvocationResult invoke(final InvocationRequest request, final String path) {\n         InvocationResult result = null;\n         final Invoker invoker = new DefaultInvoker();"},{"sha":"e06fe57f712ab332f77de31e7ee42c4dff6d4af6","filename":"installer/src/main/resources/configuration.properties","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -0,0 +1,31 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+coreWebXmlFile=core/src/main/webapp/WEB-INF/web.xml\n+jBossDeploymentStructureXmlFile=core/src/main/webapp/WEB-INF/jboss-deployment-structure.xml\n+glassfishCoreWebXmlFile=core/src/main/webapp/WEB-INF/glassfish-web.xml\n+tokenValueMapFile=oryx.debug.js-tokenValueMap.properties\n+consoleResDirectory=console/src/main/resources\n+pomFile=pom.xml\n+persistenceContextEMFactoryFile=core/src/main/resources/persistenceContextEMFactory.xml\n+coreMetaInfDirectory=core/src/main/resources/META-INF\n+ormXmlFile=orm.xml\n+ormXmlOracle=orm.xml.oracle\n+ormXmlOracleSqlServer=orm.xml.sqlserver\n+persistencePropertiesFile=core/src/main/resources/persistence.properties\n+consolePropertiesFile=console.properties\n+modelerPomFile=modelerPom.xml\n\\ No newline at end of file"},{"sha":"859ec18785945891deaf4de2fb848abbcb54de31","filename":"installer/src/main/resources/izpack/ProcessPanel.Spec.xml","status":"modified","additions":23,"deletions":17,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -64,23 +64,29 @@ under the License.\n       <arg>$tomcat.container.port</arg><!-- 6 -->\n       <arg>$tomcat.container.user</arg><!-- 7 -->\n       <arg>$tomcat.container.pwd</arg><!-- 8 -->\n-      <arg>$glassfish.container.dir</arg><!-- 9 -->\n-      <arg>$mvn.conf.directory</arg><!-- 10 -->\n-      <arg>$mvn.log.directory</arg><!-- 11 -->\n-      <arg>$mvn.bundle.directory</arg><!-- 12 -->\n-      <arg>$with.datasuorce</arg><!-- 13 -->\n-      <arg>$jboss.container.ssl</arg><!-- 14 -->\n-      <arg>$jboss.container.host</arg><!-- 15 -->\n-      <arg>$jboss.container.port</arg><!-- 16 -->\n-      <arg>$jboss.container.jdbc.module</arg><!-- 17 -->\n-      <arg>$jboss.container.user</arg><!-- 18 -->\n-      <arg>$jboss.container.pwd</arg><!-- 19 -->\n-      <arg>$mvn.proxy</arg><!-- 20 -->\n-      <arg>$mvn.proxy.host</arg><!-- 21 -->\n-      <arg>$mvn.proxy.port</arg><!-- 22 -->\n-      <arg>$mvn.proxy.user</arg><!-- 23 -->\n-      <arg>$mvn.proxy.pwd</arg><!-- 24 -->\n-      <arg>$mvn.proxy.autoconf</arg><!-- 25 -->\n+      <arg>$glassfish.container.ssl</arg><!-- 9 -->\n+      <arg>$glassfish.container.host</arg><!-- 10 -->\n+      <arg>$glassfish.container.port</arg><!--11 -->\n+      <arg>$glassfish.container.dir</arg><!-- 12 -->\n+      <arg>$mvn.conf.directory</arg><!-- 13 -->\n+      <arg>$mvn.log.directory</arg><!-- 14 -->\n+      <arg>$mvn.bundle.directory</arg><!-- 15 -->\n+      <arg>$with.datasuorce</arg><!-- 16 -->\n+      <arg>$jboss.container.ssl</arg><!-- 17 -->\n+      <arg>$jboss.container.host</arg><!-- 18 -->\n+      <arg>$jboss.container.port</arg><!-- 19 -->\n+      <arg>$jboss.container.jdbc.module</arg><!-- 20 -->\n+      <arg>$jboss.container.user</arg><!-- 21 -->\n+      <arg>$jboss.container.pwd</arg><!-- 22 -->\n+      <arg>$jboss.container.management.port</arg><!-- 23 -->\n+      <arg>$mvn.proxy</arg><!-- 24 -->\n+      <arg>$mvn.proxy.host</arg><!-- 25 -->\n+      <arg>$mvn.proxy.port</arg><!-- 26 -->\n+      <arg>$mvn.proxy.user</arg><!-- 27 -->\n+      <arg>$mvn.proxy.pwd</arg><!-- 28 -->\n+      <arg>$mvn.proxy.autoconf</arg><!-- 29 -->\n+      <arg>$mvn.proxy.autoconf</arg><!-- 30 -->\n+      <arg>$mvn.proxy.autoconf</arg><!-- 31 -->\n     </executeclass>\n   </job>\n   <onFail previous=\"true\" next=\"false\" />"},{"sha":"f2c35b85ddd5187f3e1f41c70bd2e04a3ffd071d","filename":"installer/src/main/resources/izpack/install.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2Finstall.xml?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -33,7 +33,7 @@ under the License.\n     <javaversion>${targetJdk}</javaversion>\n   </info>\n   \n-  <guiprefs resizable=\"no\" width=\"800\" height=\"600\">\n+  <guiprefs resizable=\"no\" width=\"800\" height=\"600\">    \n     <modifier key=\"useButtonIcons\" value=\"yes\"/>\n     <modifier key=\"useLabelIcons\" value=\"no\"/>\n     <modifier key=\"labelGap\" value=\"2\"/>\n@@ -55,7 +55,7 @@ under the License.\n     <variable name=\"InstallerFrame.logfilePath\" value=\"Default\"/>\n     <variable name=\"WELCOME_TEXT\" value=\"Apache Syncope Installer\"/>\n     <variable name=\"WELCOME_VERSION\" value=\"${appversion}\"/>\n-    <variable name=\"TargetPanel.dir.unix\" value=\"/tmp/syncope\"/>\n+    <variable name=\"TargetPanel.dir.unix\" value=\"/var/tmp/syncope\"/>\n     <variable name=\"TargetPanel.dir.windows\" value=\"C:\\Program Files\"/>\n   </variables>\n   \n@@ -170,6 +170,6 @@ under the License.\n     <pack name=\"Apache Syncope\" required=\"yes\">\n       <description>Apache Syncope Installer</description>\n     </pack>\n-  </packs>\n+  </packs> \n   \n </izpack:installation>"},{"sha":"00f183f8b9c090afcb2eadb10e666f4db96be294","filename":"installer/src/main/resources/izpack/userInputLang.xml_eng","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -52,11 +52,15 @@ under the License.\n   <str id=\"tomcat.container.pwd.id\" txt=\"Tomcat password:\"/>\n   \n   <str id=\"glassfish.container.dir.id\" txt=\"Glassfish home directory:\"/>\n+  <str id=\"glassfish.container.ssl.id\" txt=\"Https\"/>\n+  <str id=\"glassfish.container.host.id\" txt=\"Glassfish host:\"/>\n+  <str id=\"glassfish.container.port.id\" txt=\"Glassfish port:\"/>\n   \n   <str id=\"jboss.container.ssl.id\" txt=\"Https\"/>\n   <str id=\"jboss.container.host.id\" txt=\"Jboss host:\"/>\n   <str id=\"jboss.container.port.id\" txt=\"Jboss port:\"/>\n   <str id=\"jboss.container.jdbc.module.id\" txt=\"Jboss JDBC module name:\"/>\n   <str id=\"jboss.container.user.id\" txt=\"Jboss admin username:\"/>\n   <str id=\"jboss.container.pwd.id\" txt=\"Jboss admin password:\"/>\n+  <str id='jboss.container.management.port.id' txt=\"Jboss management port\"/>\n </langpack>\n\\ No newline at end of file"},{"sha":"65dc51f10f65e9b40eac407636116bae23f09d1c","filename":"installer/src/main/resources/izpack/userInputLang.xml_ita","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -52,11 +52,15 @@ under the License.\n   <str id=\"tomcat.container.pwd.id\" txt=\"Tomcat password:\"/>\n   \n   <str id=\"glassfish.container.dir.id\" txt=\"Glassfish home directory:\"/>\n+  <str id=\"glassfish.container.ssl.id\" txt=\"Https\"/>\n+  <str id=\"glassfish.container.host.id\" txt=\"Glassfish host:\"/>\n+  <str id=\"glassfish.container.port.id\" txt=\"Glassfish port:\"/>\n   \n   <str id=\"jboss.container.ssl.id\" txt=\"Https\"/>\n   <str id=\"jboss.container.host.id\" txt=\"Jboss host:\"/>\n   <str id=\"jboss.container.port.id\" txt=\"Jboss port:\"/>\n   <str id=\"jboss.container.jdbc.module.id\" txt=\"Jboss JDBC module name:\"/>\n   <str id=\"jboss.container.user.id\" txt=\"Jboss admin username:\"/>\n   <str id=\"jboss.container.pwd.id\" txt=\"Jboss admin password:\"/>\n+  <str id='jboss.container.management.port.id' txt=\"Jbos management port\"/>\n </langpack>\n\\ No newline at end of file"},{"sha":"0253a3350c1095c0f9bec28eceb7e61429da25d3","filename":"installer/src/main/resources/izpack/userInputSpec.xml","status":"modified","additions":18,"deletions":2,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -131,7 +131,7 @@ under the License.\n       <spec id=\"persistence.jdbc.url\" size=\"20\" set=\"jdbc:oracle:thin:@localhost:1521:orcl\"/>\n     </field>\n     <field type=\"text\" variable=\"persistence.url\" conditionid=\"sqlserver.choice\">\n-      <spec id=\"persistence.jdbc.url\" size=\"20\" set=\"jdbc:sqlserver://localhost:1344;database=syncope;selectMethod=cursor;sendStringParametersAsUnicode=false\"/>\n+      <spec id=\"persistence.jdbc.url\" size=\"20\" set=\"jdbc:sqlserver://localhost:1433;database=syncope;selectMethod=cursor;sendStringParametersAsUnicode=false\"/>\n     </field>\n     <field type=\"space\"/>\n     <field type=\"text\" variable=\"persistence.dbuser\">\n@@ -200,6 +200,18 @@ under the License.\n       <spec id=\"tomcat.container.pwd.id\" size=\"20\" set=\"s3cret\"/>\n     </field>\n     \n+    <field type=\"check\" variable=\"glassfish.container.ssl\" conditionid=\"glassfish.choice\">\n+      <spec id=\"glassfish.container.ssl.id\" true=\"true\" false=\"false\" set=\"false\"/>\n+    </field>\n+    <field type=\"space\"/>\n+    <field type=\"text\" variable=\"glassfish.container.host\" conditionid=\"glassfish.choice\">\n+      <spec id=\"glassfish.container.host.id\" size=\"20\" set=\"localhost\"/>\n+    </field>\n+    <field type=\"space\"/>\n+    <field type=\"text\" variable=\"glassfish.container.port\" conditionid=\"glassfish.choice\">\n+      <spec id=\"glassfish.container.port.id\" size=\"20\" set=\"8080\"/>\n+    </field>\n+    <field type=\"space\"/>\n     <field type=\"text\" variable=\"glassfish.container.dir\" conditionid=\"glassfish.choice\">\n       <spec id=\"glassfish.container.dir.id\" size=\"20\" set=\"/opt/glassfish4/\"/>\n     </field>\n@@ -213,7 +225,7 @@ under the License.\n     </field>\n     <field type=\"space\"/>\n     <field type=\"text\" variable=\"jboss.container.port\" conditionid=\"jboss.choice\">\n-      <spec id=\"jboss.container.port.id\" size=\"20\" set=\"9990\"/>\n+      <spec id=\"jboss.container.port.id\" size=\"20\" set=\"8080\"/>\n     </field>\n     <field type=\"space\"/>\n     <field type=\"text\" variable=\"jboss.container.jdbc.module\" conditionid=\"jboss.choice\">\n@@ -227,5 +239,9 @@ under the License.\n     <field type=\"text\" variable=\"jboss.container.pwd\" conditionid=\"jboss.choice\">\n       <spec id=\"jboss.container.pwd.id\" size=\"20\" set=\"password\"/>\n     </field>\n+    <field type=\"space\"/>\n+    <field type=\"text\" variable=\"jboss.container.management.port\" conditionid=\"jboss.choice\">\n+      <spec id=\"jboss.container.management.port.id\" size=\"20\" set=\"9990\"/>\n+    </field> \n   </panel>\n </userInput>"},{"sha":"8b65ba6811574bcf5aeb8fd63adca8227b5941c1","filename":"installer/src/main/resources/modelerPom.xml","status":"added","additions":116,"deletions":0,"changes":116,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fe8eeb247f622b775e2a53472a34b5831b8a2422/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml?ref=fe8eeb247f622b775e2a53472a34b5831b8a2422","patch":"@@ -0,0 +1,116 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n+                             http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+   \n+  <groupId>org.apache.syncope</groupId>\n+  <artifactId>activitiModelerSetup</artifactId>\n+  <version>1.0-SNAPSHOT</version>\n+  <packaging>jar</packaging>\n+   \n+  <properties>\n+    <activiti.version>5.16.2</activiti.version>\n+    <activiti-modeler.directory>${modeler.directory}</activiti-modeler.directory>\n+    <tokenValueMap>${modeler.directory}/oryx.debug.js-tokenValueMap.properties</tokenValueMap>\n+     \n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+  </properties>\n+   \n+  <dependencies>\n+    <dependency>\n+      <groupId>org.activiti</groupId>\n+      <artifactId>activiti-webapp-explorer2</artifactId>           \n+      <version>${activiti.version}</version>\n+      <type>war</type>\n+      <scope>test</scope>\n+    </dependency>   \n+  </dependencies>\n+   \n+  <build>   \n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-antrun-plugin</artifactId>\n+        <version>1.7</version>\n+        <executions>\n+          <execution>\n+            <id>setupActivitiModeler</id>\n+            <phase>process-resources</phase>\n+            <configuration>\n+              <target>\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\"\n+                       dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n+                 \n+                <mkdir dir=\"${activiti-modeler.directory}\" />\n+                 \n+                <mkdir dir=\"${activiti-modeler.directory}/editor\" />\n+                <copy todir=\"${activiti-modeler.directory}/editor\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\n+                    <exclude name=\"oryx.js\" />\n+                  </fileset>\n+                </copy>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\"\n+                      todir=\"${activiti-modeler.directory}/editor\" />\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\"\n+                      todir=\"${activiti-modeler.directory}/editor\" />\n+                 \n+                <mkdir dir=\"${activiti-modeler.directory}/explorer\" />\n+                <copy todir=\"${activiti-modeler.directory}/explorer\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\" />\n+                </copy>\n+                 \n+                <mkdir dir=\"${activiti-modeler.directory}/libs\" />\n+                <copy todir=\"${activiti-modeler.directory}/libs\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\" />\n+                </copy>\n+              </target>\n+            </configuration>\n+            <goals>\n+              <goal>run</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      <plugin>\n+        <groupId>com.google.code.maven-replacer-plugin</groupId>\n+        <artifactId>replacer</artifactId>\n+        <version>1.5.3</version>\n+        <executions>\n+          <execution>\n+            <phase>process-resources</phase>\n+            <goals>\n+              <goal>replace</goal>\n+            </goals>                  \n+          </execution>\n+        </executions>\n+        <configuration>\n+          <file>${activiti-modeler.directory}/editor/oryx.debug.js</file>\n+          <tokenValueMap>${tokenValueMap}</tokenValueMap>\n+          <unescape>true</unescape>\n+          <regex>false</regex>\n+        </configuration>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>"}]}