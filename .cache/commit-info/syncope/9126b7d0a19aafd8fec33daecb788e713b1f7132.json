{"sha":"9126b7d0a19aafd8fec33daecb788e713b1f7132","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjkxMjZiN2QwYTE5YWFmZDhmZWMzM2RhZWNiNzg4ZTcxM2IxZjcxMzI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-08-14T12:02:04Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-08-14T12:02:11Z"},"message":"[SYNCOPE-1348] Async test improvement","tree":{"sha":"20e736c67c1632cc613bd23af3e1036c475b6473","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/20e736c67c1632cc613bd23af3e1036c475b6473"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9126b7d0a19aafd8fec33daecb788e713b1f7132","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9126b7d0a19aafd8fec33daecb788e713b1f7132","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9126b7d0a19aafd8fec33daecb788e713b1f7132","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9126b7d0a19aafd8fec33daecb788e713b1f7132/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"36909584156437e0b424cee04fe3e6641325c0aa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/36909584156437e0b424cee04fe3e6641325c0aa","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/36909584156437e0b424cee04fe3e6641325c0aa"}],"stats":{"total":37,"additions":20,"deletions":17},"files":[{"sha":"ac8a0011203296de25845646c1a52c718adf558c","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/BatchITCase.java","status":"modified","additions":20,"deletions":16,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9126b7d0a19aafd8fec33daecb788e713b1f7132/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBatchITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9126b7d0a19aafd8fec33daecb788e713b1f7132/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBatchITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBatchITCase.java?ref=9126b7d0a19aafd8fec33daecb788e713b1f7132","patch":"@@ -237,16 +237,18 @@ public void webClientAsync() throws IOException, JAXBException {\n         URI monitor = response.getLocation();\n         assertNotNull(monitor);\n \n-        // wait a bit...\n-        try {\n-            Thread.sleep(5000);\n-        } catch (InterruptedException e) {\n+        for (int i = 0; i < 10 && response.getStatus() == Response.Status.ACCEPTED.getStatusCode(); i++) {\n+            // wait a bit...\n+            try {\n+                Thread.sleep(2000);\n+            } catch (InterruptedException e) {\n+            }\n+\n+            // check results\n+            response = WebClient.create(monitor).\n+                    header(HttpHeaders.AUTHORIZATION, \"Bearer \" + adminClient.getJWT()).\n+                    type(RESTHeaders.multipartMixedWith(boundary.substring(2))).get();\n         }\n-\n-        // check results: now available\n-        response = WebClient.create(monitor).\n-                header(HttpHeaders.AUTHORIZATION, \"Bearer \" + adminClient.getJWT()).\n-                type(RESTHeaders.multipartMixedWith(boundary.substring(2))).get();\n         assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n         assertTrue(response.getMediaType().toString().\n                 startsWith(RESTHeaders.multipartMixedWith(boundary.substring(2))));\n@@ -325,14 +327,16 @@ public void syncopeClientAsync() throws IOException, JAXBException {\n         assertEquals(Response.Status.ACCEPTED.getStatusCode(), response.getStatus());\n         assertTrue(response.getMediaType().toString().startsWith(RESTHeaders.MULTIPART_MIXED));\n \n-        // wait a bit...\n-        try {\n-            Thread.sleep(5000);\n-        } catch (InterruptedException e) {\n-        }\n+        for (int i = 0; i < 10 && response.getStatus() == Response.Status.ACCEPTED.getStatusCode(); i++) {\n+            // wait a bit...\n+            try {\n+                Thread.sleep(2000);\n+            } catch (InterruptedException e) {\n+            }\n \n-        // check results: now available\n-        response = batchResponse.poll();\n+            // check results\n+            response = batchResponse.poll();\n+        }\n         assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n         assertTrue(response.getMediaType().toString().startsWith(RESTHeaders.MULTIPART_MIXED));\n "},{"sha":"7e445975d43e62aeed2ae02a19d650df3031b4cb","filename":"src/main/asciidoc/reference-guide/concepts/policies.adoc","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9126b7d0a19aafd8fec33daecb788e713b1f7132/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9126b7d0a19aafd8fec33daecb788e713b1f7132/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc?ref=9126b7d0a19aafd8fec33daecb788e713b1f7132","patch":"@@ -305,7 +305,6 @@ with existing Users, Groups or Any Objects.\n The\n ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n https://github.com/apache/syncope/blob/syncope-{docVersion}/core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/DefaultPullCorrelationRule.java[default^]\n-]\n endif::[]\n ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n https://github.com/apache/syncope/blob/master/core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/DefaultPullCorrelationRule.java[default^]"}]}