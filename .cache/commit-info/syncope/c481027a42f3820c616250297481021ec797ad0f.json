{"sha":"c481027a42f3820c616250297481021ec797ad0f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM0ODEwMjdhNDJmMzgyMGM2MTYyNTAyOTc0ODEwMjFlYzc5N2FkMGY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-02-18T07:08:19Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-02-18T07:08:33Z"},"message":"Error message improvements","tree":{"sha":"8199e925bb8831c2bb21a71a0930a865d4065e0c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/8199e925bb8831c2bb21a71a0930a865d4065e0c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c481027a42f3820c616250297481021ec797ad0f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c481027a42f3820c616250297481021ec797ad0f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c481027a42f3820c616250297481021ec797ad0f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c481027a42f3820c616250297481021ec797ad0f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"c05b6db430e64c92c31710a9e4b6b8625aadeae9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c05b6db430e64c92c31710a9e4b6b8625aadeae9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c05b6db430e64c92c31710a9e4b6b8625aadeae9"}],"stats":{"total":56,"additions":31,"deletions":25},"files":[{"sha":"2d4db1c8c17147e561b3b0887c1f954e4a2394fd","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/AnyObjectDataBinderImpl.java","status":"modified","additions":14,"deletions":12,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FAnyObjectDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FAnyObjectDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FAnyObjectDataBinderImpl.java?ref=c481027a42f3820c616250297481021ec797ad0f","patch":"@@ -189,12 +189,13 @@ public void create(final AnyObject anyObject, final AnyObjectCR anyObjectCR) {\n                             anyObject.add(relationship);\n                         }\n                     } else {\n-                        LOG.error(\"{} cannot be assigned to {}\", otherEnd, anyObject);\n+                        LOG.error(\"{} cannot be related to {}\", otherEnd, anyObject);\n \n-                        SyncopeClientException unassignabled =\n+                        SyncopeClientException unrelatable =\n                                 SyncopeClientException.build(ClientExceptionType.InvalidRelationship);\n-                        unassignabled.getElements().add(\"Cannot be assigned: \" + otherEnd);\n-                        scce.addException(unassignabled);\n+                        unrelatable.getElements().add(otherEnd.getType().getKey() + \" \" + otherEnd.getName()\n+                                + \" cannot be related\");\n+                        scce.addException(unrelatable);\n                     }\n                 }\n             });\n@@ -221,7 +222,7 @@ public void create(final AnyObject anyObject, final AnyObjectCR anyObjectCR) {\n \n                     SyncopeClientException unassignable =\n                             SyncopeClientException.build(ClientExceptionType.InvalidMembership);\n-                    unassignable.getElements().add(\"Cannot be assigned: \" + group);\n+                    unassignable.getElements().add(\"Group \" + group.getName() + \" cannot be assigned\");\n                     scce.addException(unassignable);\n                 }\n             });\n@@ -300,12 +301,13 @@ public PropagationByResource<String> update(final AnyObject toBeUpdated, final A\n \n                             anyObject.add(newRelationship);\n                         } else {\n-                            LOG.error(\"{} cannot be assigned to {}\", otherEnd, anyObject);\n+                            LOG.error(\"{} cannot be related to {}\", otherEnd, anyObject);\n \n-                            SyncopeClientException unassignable =\n+                            SyncopeClientException unrelatable =\n                                     SyncopeClientException.build(ClientExceptionType.InvalidRelationship);\n-                            unassignable.getElements().add(\"Cannot be assigned: \" + otherEnd);\n-                            scce.addException(unassignable);\n+                            unrelatable.getElements().add(otherEnd.getType().getKey() + \" \" + otherEnd.getName()\n+                                    + \" cannot be related\");\n+                            scce.addException(unrelatable);\n                         }\n                     }\n                 }\n@@ -401,10 +403,10 @@ public PropagationByResource<String> update(final AnyObject toBeUpdated, final A\n                 } else {\n                     LOG.error(\"{} cannot be assigned to {}\", group, anyObject);\n \n-                    SyncopeClientException unassignabled =\n+                    SyncopeClientException unassignable =\n                             SyncopeClientException.build(ClientExceptionType.InvalidMembership);\n-                    unassignabled.getElements().add(\"Cannot be assigned: \" + group);\n-                    scce.addException(unassignabled);\n+                    unassignable.getElements().add(\"Group \" + group.getName() + \" cannot be assigned\");\n+                    scce.addException(unassignable);\n                 }\n             }\n         });"},{"sha":"cd3f9aa49abcf87c50e20b5346fcc4e1ff1fa704","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/UserDataBinderImpl.java","status":"modified","additions":14,"deletions":12,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FUserDataBinderImpl.java?ref=c481027a42f3820c616250297481021ec797ad0f","patch":"@@ -283,12 +283,13 @@ public void create(final User user, final UserCR userCR) {\n                     user.add(relationship);\n                 }\n             } else {\n-                LOG.error(\"{} cannot be assigned to {}\", otherEnd, user);\n+                LOG.error(\"{} cannot be related to {}\", otherEnd, user);\n \n-                SyncopeClientException unassignabled =\n+                SyncopeClientException unrelatable =\n                         SyncopeClientException.build(ClientExceptionType.InvalidRelationship);\n-                unassignabled.getElements().add(\"Cannot be assigned: \" + otherEnd);\n-                scce.addException(unassignabled);\n+                unrelatable.getElements().add(otherEnd.getType().getKey() + \" \" + otherEnd.getName()\n+                        + \" cannot be related\");\n+                scce.addException(unrelatable);\n             }\n         });\n \n@@ -314,7 +315,7 @@ public void create(final User user, final UserCR userCR) {\n \n                 SyncopeClientException unassignable =\n                         SyncopeClientException.build(ClientExceptionType.InvalidMembership);\n-                unassignable.getElements().add(\"Cannot be assigned: \" + group);\n+                unassignable.getElements().add(\"Group \" + group.getName() + \" cannot be assigned\");\n                 scce.addException(unassignable);\n             }\n         });\n@@ -466,12 +467,13 @@ public Pair<PropagationByResource<String>, PropagationByResource<Pair<String, St\n \n                         user.add(newRelationship);\n                     } else {\n-                        LOG.error(\"{} cannot be assigned to {}\", otherEnd, user);\n+                        LOG.error(\"{} cannot be related to {}\", otherEnd, user);\n \n-                        SyncopeClientException unassignable =\n+                        SyncopeClientException unrelatable =\n                                 SyncopeClientException.build(ClientExceptionType.InvalidRelationship);\n-                        unassignable.getElements().add(\"Cannot be assigned: \" + otherEnd);\n-                        scce.addException(unassignable);\n+                        unrelatable.getElements().add(otherEnd.getType().getKey() + \" \" + otherEnd.getName()\n+                                + \" cannot be related\");\n+                        scce.addException(unrelatable);\n                     }\n                 }\n             }\n@@ -576,10 +578,10 @@ public Pair<PropagationByResource<String>, PropagationByResource<Pair<String, St\n                 } else {\n                     LOG.error(\"{} cannot be assigned to {}\", group, user);\n \n-                    SyncopeClientException unassignabled =\n+                    SyncopeClientException unassignable =\n                             SyncopeClientException.build(ClientExceptionType.InvalidMembership);\n-                    unassignabled.getElements().add(\"Cannot be assigned: \" + group);\n-                    scce.addException(unassignabled);\n+                    unassignable.getElements().add(\"Group \" + group.getName() + \" cannot be assigned\");\n+                    scce.addException(unassignable);\n                 }\n             }\n         });"},{"sha":"3f2a95b50d2772f80dcf3aefbb41e5a46d7ae827","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/AbstractPullResultHandler.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java?ref=c481027a42f3820c616250297481021ec797ad0f","patch":"@@ -214,6 +214,7 @@ protected List<ProvisioningReport> provision(\n                     action.beforeProvision(profile, delta, anyCR);\n                 }\n             }\n+            result.setName(getName(anyTO));\n \n             Object output;\n             Result resultStatus;"},{"sha":"e28b8148ef68309dd9c9086bc1225bbccafd5ef0","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/DefaultUserPullResultHandler.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c481027a42f3820c616250297481021ec797ad0f/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java?ref=c481027a42f3820c616250297481021ec797ad0f","patch":"@@ -353,6 +353,7 @@ protected Optional<ProvisioningReport> provision(\n                     action.beforeProvision(profile, delta, accountTO);\n                 }\n             }\n+            report.setName(accountTO.getConnObjectKeyValue());\n \n             UserUR req = new UserUR();\n             req.setKey(user.getKey());\n@@ -369,12 +370,12 @@ protected Optional<ProvisioningReport> provision(\n                         null,\n                         Set.of(profile.getTask().getResource().getKey()),\n                         true);\n-                resultStatus = Result.SUCCESS;\n \n                 LinkedAccountTO created = userDAO.find(req.getKey()).\n                         getLinkedAccount(accountTO.getResource(), accountTO.getConnObjectKeyValue()).\n                         map(acct -> userDataBinder.getLinkedAccountTO(acct)).\n                         orElse(null);\n+\n                 output = created;\n                 resultStatus = Result.SUCCESS;\n "}]}