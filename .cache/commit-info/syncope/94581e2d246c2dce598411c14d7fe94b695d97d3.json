{"sha":"94581e2d246c2dce598411c14d7fe94b695d97d3","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjk0NTgxZTJkMjQ2YzJkY2U1OTg0MTFjMTRkN2ZlOTRiNjk1ZDk3ZDM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-08T16:47:16Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-08T16:47:30Z"},"message":"[SYNCOPE-1445] docker-compose working with pgjsonb","tree":{"sha":"bf89a6b4e711f1dfc3269cdbd0275e981a56cf07","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/bf89a6b4e711f1dfc3269cdbd0275e981a56cf07"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/94581e2d246c2dce598411c14d7fe94b695d97d3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/94581e2d246c2dce598411c14d7fe94b695d97d3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/94581e2d246c2dce598411c14d7fe94b695d97d3","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/94581e2d246c2dce598411c14d7fe94b695d97d3/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"43a914c87a6455386564ca7daaa48cb579af4260","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/43a914c87a6455386564ca7daaa48cb579af4260","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/43a914c87a6455386564ca7daaa48cb579af4260"}],"stats":{"total":296,"additions":251,"deletions":45},"files":[{"sha":"634ade5aebf7fe055b02b28520938deb2ca80fdc","filename":"core/provisioning-java/src/main/resources/quartz/tables_postgres.sql","status":"modified","additions":11,"deletions":11,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_postgres.sql","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_postgres.sql","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fresources%2Fquartz%2Ftables_postgres.sql?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -20,17 +20,17 @@\n -- In your Quartz properties file, you'll need to set \n -- org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n \n-drop table qrtz_fired_triggers;\n-DROP TABLE QRTZ_PAUSED_TRIGGER_GRPS;\n-DROP TABLE QRTZ_SCHEDULER_STATE;\n-DROP TABLE QRTZ_LOCKS;\n-drop table qrtz_simple_triggers;\n-drop table qrtz_cron_triggers;\n-drop table qrtz_simprop_triggers;\n-DROP TABLE QRTZ_BLOB_TRIGGERS;\n-drop table qrtz_triggers;\n-drop table qrtz_job_details;\n-drop table qrtz_calendars;\n+DROP TABLE IF EXISTS qrtz_fired_triggers;\n+DROP TABLE IF EXISTS qrtz_paused_trigger_grps;\n+DROP TABLE IF EXISTS qrtz_scheduler_state;\n+DROP TABLE IF EXISTS qrtz_locks;\n+DROP TABLE IF EXISTS qrtz_simple_triggers;\n+DROP TABLE IF EXISTS qrtz_cron_triggers;\n+DROP TABLE IF EXISTS qrtz_simprop_triggers;\n+DROP TABLE IF EXISTS qrtz_blob_triggers;\n+DROP TABLE IF EXISTS qrtz_triggers;\n+DROP TABLE IF EXISTS qrtz_job_details;\n+DROP TABLE IF EXISTS qrtz_calendars;\n \n CREATE TABLE qrtz_job_details\n   ("},{"sha":"2464cbfccc1061432ceb2f3f9d4154a9c671c29a","filename":"docker/core/pom.xml","status":"modified","additions":8,"deletions":6,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fpom.xml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -56,7 +56,7 @@ under the License.\n \n     <dependency>\n       <groupId>org.apache.syncope.core</groupId>\n-      <artifactId>syncope-core-persistence-jpa-json</artifactId>\n+      <artifactId>syncope-core-persistence-jpa</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n     \n@@ -143,7 +143,7 @@ under the License.\n     <dependency>\n       <groupId>com.microsoft.sqlserver</groupId>\n       <artifactId>mssql-jdbc</artifactId>\n-      <version>${jdbc.mssql.version}8</version>\n+      <version>${jdbc.mssql.version}11</version>\n       <scope>test</scope>\n     </dependency>\n   </dependencies>\n@@ -178,10 +178,12 @@ under the License.\n             <phase>process-resources</phase>\n             <configuration>\n               <target>\n-                <copy file=\"${settings.localRepository}/org/postgresql/postgresql/${jdbc.postgresql.version}/postgresql-${jdbc.postgresql.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\" />\n-                <copy file=\"${settings.localRepository}/mysql/mysql-connector-java/${jdbc.mysql.version}/mysql-connector-java-${jdbc.mysql.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\" />\n-                <copy file=\"${settings.localRepository}/org/mariadb/jdbc/mariadb-java-client/${jdbc.mariadb.version}/mariadb-java-client-${jdbc.mariadb.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\" />\n-                <copy file=\"${settings.localRepository}/com/microsoft/sqlserver/mssql-jdbc/${jdbc.mssql.version}8/mssql-jdbc-${jdbc.mssql.version}8.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\" />\n+                <copy file=\"${settings.localRepository}/org/postgresql/postgresql/${jdbc.postgresql.version}/postgresql-${jdbc.postgresql.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\"/>\n+                <copy file=\"${settings.localRepository}/mysql/mysql-connector-java/${jdbc.mysql.version}/mysql-connector-java-${jdbc.mysql.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\"/>\n+                <copy file=\"${settings.localRepository}/org/mariadb/jdbc/mariadb-java-client/${jdbc.mariadb.version}/mariadb-java-client-${jdbc.mariadb.version}.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\"/>\n+                <copy file=\"${settings.localRepository}/com/microsoft/sqlserver/mssql-jdbc/${jdbc.mssql.version}11/mssql-jdbc-${jdbc.mssql.version}11.jar\" todir=\"${project.build.outputDirectory}/lib\" overwrite=\"true\"/>\n+\n+                <copy file=\"${basedir}/../../core/persistence-jpa-json/target/syncope-core-persistence-jpa-json-${project.version}.jar\" todir=\"${project.build.outputDirectory}/pgjsonb\" overwrite=\"true\"/>\n               </target>\n             </configuration>\n             <goals>"},{"sha":"5bf36e0644da902977510ea35baae520aa55ee87","filename":"docker/core/src/main/resources/Dockerfile","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -26,6 +26,7 @@ RUN mkdir /opt/syncope/bundles\n RUN mkdir /opt/syncope/conf\n RUN mkdir /opt/syncope/conf/domains\n RUN mkdir /opt/syncope/lib\n+RUN mkdir /opt/syncope/pgjsonb\n RUN mkdir /opt/syncope/log\n \n COPY *.properties* /opt/syncope/conf/\n@@ -35,6 +36,7 @@ COPY domains/* /opt/syncope/conf/domains/\n \n COPY bundles/*.jar /opt/syncope/bundles/\n COPY lib/*.jar /opt/syncope/lib/\n+COPY pgjsonb/*.jar /opt/syncope/pgjsonb/\n \n COPY lib/syncope-docker-core-*war /opt/syncope/lib/syncope.war\n "},{"sha":"814b3c6255ec1711193db0e846d08a4b774d1c1d","filename":"docker/core/src/main/resources/domains/MasterContent.xml.pgjsonb","status":"added","additions":183,"deletions":0,"changes":183,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml.pgjsonb","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml.pgjsonb","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml.pgjsonb?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -0,0 +1,183 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+     http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<dataset>\n+  <Realm id=\"ea696a4f-e77a-4ef1-be67-8f8093bc8686\" name=\"/\"/>  \n+\n+  <SyncopeSchema id=\"password.cipher.algorithm\"/>\n+  <PlainSchema id=\"password.cipher.algorithm\" type=\"String\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <!-- notificationjob.cronExpression:\n+  + not existing: NotificationJob runs according to NotificationJob.DEFAULT_CRON_EXP\n+  + provided as empty string: NotificationJob disabled\n+  + provided as non-empty string: NotificationJob runs according to the given value -->\n+  <SyncopeSchema id=\"notificationjob.cronExpression\"/>\n+  <PlainSchema id=\"notificationjob.cronExpression\" type=\"String\"\n+               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+  \n+  <SyncopeSchema id=\"notification.maxRetries\"/>\n+  <PlainSchema id=\"notification.maxRetries\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"token.length\"/>\n+  <PlainSchema id=\"token.length\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"token.expireTime\"/>\n+  <PlainSchema id=\"token.expireTime\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"selfRegistration.allowed\"/>\n+  <PlainSchema id=\"selfRegistration.allowed\" type=\"Boolean\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"passwordReset.allowed\"/>\n+  <PlainSchema id=\"passwordReset.allowed\" type=\"Boolean\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"passwordReset.securityQuestion\"/>\n+  <PlainSchema id=\"passwordReset.securityQuestion\" type=\"Boolean\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"authentication.attributes\"/>\n+  <PlainSchema id=\"authentication.attributes\" type=\"String\" multivalue=\"1\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <SyncopeSchema id=\"authentication.statuses\"/>\n+  <PlainSchema id=\"authentication.statuses\" type=\"String\" multivalue=\"1\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <!-- Save user login date upon successful authentication -->\n+  <SyncopeSchema id=\"log.lastlogindate\"/>\n+  <PlainSchema id=\"log.lastlogindate\" type=\"Boolean\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+  <!-- Return hashed password values when reading users -->\n+  <SyncopeSchema id=\"return.password.value\"/>\n+  <PlainSchema id=\"return.password.value\" type=\"Boolean\"\n+               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+  \n+  <!--  JWT lifetime in minutes -->                   \n+  <SyncopeSchema id=\"jwt.lifetime.minutes\"/>\n+  <PlainSchema id=\"jwt.lifetime.minutes\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+    \n+  <!--  Connector and Resource configuration history -->                   \n+  <SyncopeSchema id=\"connector.conf.history.size\"/>\n+  <PlainSchema id=\"connector.conf.history.size\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+  \n+  <SyncopeSchema id=\"resource.conf.history.size\"/>\n+  <PlainSchema id=\"resource.conf.history.size\" type=\"Long\"\n+               mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+  \n+  <SyncopeConf id=\"cd64d66f-6fff-4008-b966-a06b1cc1436d\"\n+               plainAttrs=\"[{&quot;values&quot;:[{&quot;stringValue&quot;:&quot;SSHA256&quot;}],&quot;schema&quot;:&quot;password.cipher.algorithm&quot;},{&quot;values&quot;:[{&quot;stringValue&quot;:&quot;&quot;}],&quot;schema&quot;:&quot;notificationjob.cronExpression&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:3}],&quot;schema&quot;:&quot;notification.maxRetries&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:256}],&quot;schema&quot;:&quot;token.length&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:60}],&quot;schema&quot;:&quot;token.expireTime&quot;},{&quot;values&quot;:[{&quot;booleanValue&quot;:true}],&quot;schema&quot;:&quot;selfRegistration.allowed&quot;},{&quot;values&quot;:[{&quot;booleanValue&quot;:true}],&quot;schema&quot;:&quot;passwordReset.allowed&quot;},{&quot;values&quot;:[{&quot;booleanValue&quot;:true}],&quot;schema&quot;:&quot;passwordReset.securityQuestion&quot;},{&quot;values&quot;:[{&quot;stringValue&quot;:&quot;username&quot;},{&quot;stringValue&quot;:&quot;email&quot;}],&quot;schema&quot;:&quot;authentication.attributes&quot;},{&quot;values&quot;:[{&quot;stringValue&quot;:&quot;created&quot;},{&quot;stringValue&quot;:&quot;active&quot;}],&quot;schema&quot;:&quot;authentication.statuses&quot;},{&quot;values&quot;:[{&quot;booleanValue&quot;:true}],&quot;schema&quot;:&quot;log.lastlogindate&quot;},{&quot;values&quot;:[{&quot;booleanValue&quot;:false}],&quot;schema&quot;:&quot;return.password.value&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:120}],&quot;schema&quot;:&quot;jwt.lifetime.minutes&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:10}],&quot;schema&quot;:&quot;connector.conf.history.size&quot;},{&quot;values&quot;:[{&quot;longValue&quot;:10}],&quot;schema&quot;:&quot;resource.conf.history.size&quot;}]\"/>\n+\n+  <AnyType id=\"USER\" kind=\"USER\"/>\n+  <AnyTypeClass id=\"BaseUser\"/>\n+  <AnyType_AnyTypeClass anyType_id=\"USER\" anyTypeClass_id=\"BaseUser\"/>\n+\n+  <AnyType id=\"GROUP\" kind=\"GROUP\"/>\n+  <AnyTypeClass id=\"BaseGroup\"/>\n+  <AnyType_AnyTypeClass anyType_id=\"GROUP\" anyTypeClass_id=\"BaseGroup\"/>\n+        \n+  <!-- Actual plain schemas -->\n+  <Implementation id=\"EmailAddressValidator\" type=\"VALIDATOR\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.persistence.jpa.attrvalue.validation.EmailAddressValidator\"/>\n+  <SyncopeSchema id=\"email\"/>\n+  <PlainSchema id=\"email\" type=\"String\" anyTypeClass_id=\"BaseUser\"\n+               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n+               validator_id=\"EmailAddressValidator\"/>\n+  \n+  <Implementation id=\"BinaryValidator\" type=\"VALIDATOR\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.persistence.jpa.attrvalue.validation.BinaryValidator\"/>\n+\n+  <Implementation id=\"PullJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.provisioning.java.pushpull.PullJobDelegate\"/>\n+  <Implementation id=\"PushJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.provisioning.java.pushpull.PushJobDelegate\"/>\n+\n+\n+  <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n+  <Task DTYPE=\"SchedTask\" id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\"\n+        jobDelegate_id=\"ExpiredAccessTokenCleanup\" cronExpression=\"0 0/5 * * * ?\"/>\n+  <Implementation id=\"ExpiredBatchCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n+                  body=\"org.apache.syncope.core.provisioning.java.job.ExpiredBatchCleanup\"/>\n+  <Task DTYPE=\"SchedTask\" id=\"8ea0ea51-ce08-4fe3-a0c8-c281b31b5893\" name=\"Expired Batch Operations Cleanup Task\"  active=\"1\"\n+        jobDelegate_id=\"ExpiredBatchCleanup\" cronExpression=\"0 0/5 * * * ?\"/>\n+\n+  <!-- Password reset notifications -->\n+  <MailTemplate id=\"requestPasswordReset\"\n+                textTemplate=\"Hi,\n+a password reset was request for ${user.getUsername()}.\n+\n+In order to complete this request, you need to visit this link:\n+\n+http://localhost:9080/syncope-enduser/app/#!/confirmpasswordreset?token=${input.get(0).replaceAll(' ', '%20')}\n+\n+If you did not request this reset, just ignore the present e-mail.\n+\n+Best regards.\"\n+                htmlTemplate=\"&lt;html&gt;\n+&lt;body&gt;\n+&lt;p&gt;Hi,\n+a password reset was request for ${user.getUsername()}.&lt;/p&gt;\n+\n+&lt;p&gt;In order to complete this request, you need to visit this \n+&lt;a href=&quot;http://localhost:9080/syncope-enduser/app/#!/confirmpasswordreset?token=${input.get(0).replaceAll(' ', '%20')}&quot;&gt;link&lt;/a&gt;&lt;/p&gt;.\n+\n+&lt;p&gt;If you did not request this reset, just ignore the present e-mail.&lt;/p&gt;\n+\n+&lt;p&gt;Best regards.&lt;/p&gt;\n+&lt;/body&gt;\n+&lt;/html&gt;\"/>\n+  <MailTemplate id=\"confirmPasswordReset\"\n+                textTemplate=\"Hi,\n+we are happy to inform you that the password request was successfully executed for your account.\n+\n+Best regards.\"\n+                htmlTemplate=\"&lt;html&gt;\n+&lt;body&gt;\n+&lt;p&gt;Hi,&lt;/br&gt;\n+we are happy to inform you that the password request was successfully executed for your account.&lt;/p&gt;\n+\n+&lt;p&gt;Best regards.&lt;/p&gt;\n+&lt;/body&gt;\n+&lt;/html&gt;\"/>\n+\n+  <Notification id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" \n+                sender=\"admin@syncope.apache.org\" subject=\"Password Reset request\" template_id=\"requestPasswordReset\" \n+                traceLevel=\"FAILURES\"/> \n+  <AnyAbout id=\"a328f2e6-25e9-4cc1-badf-7425d7be4b39\" anyType_id=\"USER\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" filter=\"token!=$null\"/>\n+  <Notification_events notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" event=\"[CUSTOM]:[]:[]:[requestPasswordReset]:[SUCCESS]\"/>\n+  \n+  <Notification id=\"bef0c250-e8a7-4848-bb63-2564fc409ce2\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" \n+                sender=\"admin@syncope.apache.org\" subject=\"Password Reset successful\" template_id=\"confirmPasswordReset\" \n+                traceLevel=\"FAILURES\"/> \n+  <Notification_events notification_id=\"bef0c250-e8a7-4848-bb63-2564fc409ce2\" event=\"[CUSTOM]:[]:[]:[confirmPasswordReset]:[SUCCESS]\"/>\n+\n+  <ReportTemplate id=\"empty\"/>  \n+\n+  <Report id=\"c3520ad9-179f-49e7-b315-d684d216dd97\" name=\"reconciliation\" active=\"1\" template_id=\"empty\"/>\n+  <Implementation id=\"ReconciliationReportletConf\" type=\"REPORTLET\" engine=\"JAVA\"\n+                  body='{\"@class\":\"org.apache.syncope.common.lib.report.ReconciliationReportletConf\",\"name\":\"dashboardReconciliationReportlet\",\"userMatchingCond\":null,\"groupMatchingCond\":null,\"anyObjectMatchingCond\":null,\"features\":[\"key\",\"username\",\"groupName\"]}'/>\n+  <ReportReportlet report_id=\"c3520ad9-179f-49e7-b315-d684d216dd97\" implementation_id=\"ReconciliationReportletConf\"/>\n+\n+</dataset>"},{"sha":"0da7a20041b8e8bdee423eb3930f2ac5b79c2590","filename":"docker/core/src/main/resources/persistence.properties.all","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties.all","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties.all","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties.all?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","previous_filename":"docker/core/src/main/resources/persistence.properties"},{"sha":"fd8771133425c3022d64f0069e0b7403c64a5801","filename":"docker/core/src/main/resources/startup.sh","status":"modified","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fstartup.sh","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fstartup.sh","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2Fstartup.sh?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -22,6 +22,13 @@ cd /opt/syncope/conf\n rm -f provisioning.properties\n ln -s provisioning.properties.$DBMS provisioning.properties\n \n+rm -f persistence.properties\n+if [ $DBMS = \"pgjsonb\" ]; then\n+  ln -s persistence.properties.pgjsonb persistence.properties\n+else\n+  ln -s persistence.properties.all persistence.properties\n+fi\n+\n rm -f views.xml\n ln -s views.xml.$DBMS views.xml\n \n@@ -33,9 +40,21 @@ fi\n \n cd domains\n \n+if [ $DBMS = \"pgjsonb\" ]; then\n+  mv MasterContent.xml MasterContent.xml.all\n+  ln -s MasterContent.xml.pgjsonb MasterContent.xml\n+else\n+  rm -f MasterContent.xml\n+  mv MasterContent.xml.all MasterContent.xml\n+fi\n+\n rm -f Master.properties\n ln -s Master.properties.$DBMS Master.properties\n \n+if [ $DBMS = \"pgjsonb\" ]; then\n+export LOADER_PATH=\"/opt/syncope/conf,/opt/syncope/lib,/opt/syncope/pgjsonb\"\n+else\n export LOADER_PATH=\"/opt/syncope/conf,/opt/syncope/lib\"\n+fi\n java -Dfile.encoding=UTF-8 -server -Xms1536m -Xmx1536m -XX:NewSize=256m -XX:MaxNewSize=256m \\\n  -XX:+DisableExplicitGC -Djava.security.egd=file:/dev/./urandom -jar /opt/syncope/lib/syncope.war"},{"sha":"c5857ba05e144841e802c8f7aa5012f044aff662","filename":"docker/src/main/resources/docker-compose/docker-compose-ha.yml","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-ha.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-ha.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-ha.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -22,7 +22,7 @@ version: '3.3'\n \n services:\n    db:\n-     image: postgres:latest\n+     image: postgres:11.2\n      restart: always\n      environment:\n        POSTGRES_DB: syncope\n@@ -32,7 +32,7 @@ services:\n    syncope1:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n@@ -48,7 +48,7 @@ services:\n    syncope2:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18081:8080\"\n      restart: always\n@@ -64,7 +64,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope1\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -76,7 +76,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope1\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"e39ff8b089279a58745be737c03e5cec00b9a1d5","filename":"docker/src/main/resources/docker-compose/docker-compose-mariadb.yml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mariadb.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mariadb.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mariadb.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -32,7 +32,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n@@ -48,7 +48,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -60,7 +60,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"32a93009b5e0c2517221a91820e6ce4efa5cebfe","filename":"docker/src/main/resources/docker-compose/docker-compose-mssql.yml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mssql.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mssql.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mssql.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -33,7 +33,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n@@ -50,7 +50,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -62,7 +62,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"c7ecd2bc4b8c6dad33aadab9b557b57ef7f26d48","filename":"docker/src/main/resources/docker-compose/docker-compose-mysql.yml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -31,7 +31,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n@@ -47,7 +47,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -59,7 +59,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"8af76b7d3b7c0737be7e8b126aa519c2938cf3db","filename":"docker/src/main/resources/docker-compose/docker-compose-pgjsonb.yml","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-pgjsonb.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-pgjsonb.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-pgjsonb.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -15,13 +15,13 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-# Full deployment (Core, Console, Enduser) on PostgreSQL\n+# Full deployment (Core, Console, Enduser) on PostgreSQL with JSONB support\n \n version: '3.3'\n \n services:\n    db:\n-     image: postgres:11.1\n+     image: postgres:11.2\n      restart: always\n      environment:\n        POSTGRES_DB: syncope\n@@ -31,13 +31,13 @@ services:\n    syncope:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n      environment:\n        DBMS: pgjsonb\n-       DB_URL: jdbc:postgresql://localhost:5432/syncope?stringtype=unspecified\n+       DB_URL: jdbc:postgresql://db:5432/syncope?stringtype=unspecified\n        DB_USER: syncope\n        DB_PASSWORD: syncope\n        DB_POOL_MAX: 10\n@@ -47,7 +47,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -59,7 +59,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"59110831cde0e33f25a4b3d2b54ac1ddc6968afd","filename":"docker/src/main/resources/docker-compose/docker-compose-postgresql.yml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-postgresql.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-postgresql.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-postgresql.yml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -21,7 +21,7 @@ version: '3.3'\n \n services:\n    db:\n-     image: postgres:11.1\n+     image: postgres:11.2\n      restart: always\n      environment:\n        POSTGRES_DB: syncope\n@@ -31,7 +31,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n-     image: apache/syncope:${syncope.version}\n+     image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\"\n      restart: always\n@@ -47,7 +47,7 @@ services:\n    syncope-console:\n      depends_on:\n        - syncope\n-     image: apache/syncope-console:${syncope.version}\n+     image: apache/syncope-console:${SYNCOPE_VERSION}\n      ports:\n        - \"28080:8080\"\n      restart: always\n@@ -59,7 +59,7 @@ services:\n    syncope-enduser:\n      depends_on:\n        - syncope\n-     image: apache/syncope-enduser:${syncope.version}\n+     image: apache/syncope-enduser:${SYNCOPE_VERSION}\n      ports:\n        - \"38080:8080\"\n      restart: always"},{"sha":"e138c963d12c74814ee3a0d88105f8c252fef806","filename":"fit/core-reference/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/fit%2Fcore-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/fit%2Fcore-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fpom.xml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -1033,7 +1033,7 @@ under the License.\n         <dependency>\n           <groupId>com.microsoft.sqlserver</groupId>\n           <artifactId>mssql-jdbc</artifactId>\n-          <version>${jdbc.mssql.version}8</version>\n+          <version>${jdbc.mssql.version}11</version>\n           <scope>test</scope>\n         </dependency>\n       </dependencies>"},{"sha":"de9c6a0efa9bb44c95aa801f9f315ea7731e212f","filename":"pom.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94581e2d246c2dce598411c14d7fe94b695d97d3/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94581e2d246c2dce598411c14d7fe94b695d97d3/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=94581e2d246c2dce598411c14d7fe94b695d97d3","patch":"@@ -514,13 +514,13 @@ under the License.\n \n     <tomcat.version>9.0.16</tomcat.version>\n \n-    <docker.postgresql.version>11.1</docker.postgresql.version>\n+    <docker.postgresql.version>11.2</docker.postgresql.version>\n     <docker.mariadb.version>10.4</docker.mariadb.version>\n \n     <jdbc.postgresql.version>42.2.5</jdbc.postgresql.version>\n     <jdbc.mysql.version>5.1.47</jdbc.mysql.version>\n-    <jdbc.mariadb.version>2.3.0</jdbc.mariadb.version>\n-    <jdbc.mssql.version>7.0.0.jre</jdbc.mssql.version>\n+    <jdbc.mariadb.version>2.4.0</jdbc.mariadb.version>\n+    <jdbc.mssql.version>7.2.1.jre</jdbc.mssql.version>\n \n     <adminUser>admin</adminUser>\n     <anonymousUser>anonymous</anonymousUser>"}]}