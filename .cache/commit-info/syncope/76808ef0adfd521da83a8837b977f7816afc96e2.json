{"sha":"76808ef0adfd521da83a8837b977f7816afc96e2","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc2ODA4ZWYwYWRmZDUyMWRhODNhODgzN2I5NzdmNzgxNmFmYzk2ZTI=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T11:27:50Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T11:27:50Z"},"message":"Now RESTful services are working again after issue #11\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246222 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"95ed5f1a0665c543d1118eefccfb8354f6e1dbd0","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/95ed5f1a0665c543d1118eefccfb8354f6e1dbd0"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/76808ef0adfd521da83a8837b977f7816afc96e2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/76808ef0adfd521da83a8837b977f7816afc96e2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/76808ef0adfd521da83a8837b977f7816afc96e2","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/76808ef0adfd521da83a8837b977f7816afc96e2/comments","author":null,"committer":null,"parents":[{"sha":"2604eb7df30bdd73492f9540c14a281b2cc185f1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2604eb7df30bdd73492f9540c14a281b2cc185f1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2604eb7df30bdd73492f9540c14a281b2cc185f1"}],"stats":{"total":121,"additions":58,"deletions":63},"files":[{"sha":"d43141cf43063d9d677b88e89846c6d8c256ec8f","filename":"client/src/main/java/org/syncope/client/to/DerivedSchemaTO.java","status":"renamed","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FDerivedSchemaTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FDerivedSchemaTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FDerivedSchemaTO.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -17,14 +17,14 @@\n import java.util.HashSet;\n import java.util.Set;\n \n-public class DerivedAttributeSchemaTO extends AbstractBaseTO {\n+public class DerivedSchemaTO extends AbstractBaseTO {\n \n     private String name;\n     private String expression;\n-    private Set<String> attributeSchemas;\n+    private Set<String> schemas;\n \n-    public DerivedAttributeSchemaTO() {\n-        attributeSchemas = new HashSet<String>();\n+    public DerivedSchemaTO() {\n+        schemas = new HashSet<String>();\n     }\n \n     public String getName() {\n@@ -43,19 +43,19 @@ public void setExpression(String expression) {\n         this.expression = expression;\n     }\n \n-    public boolean addAttributeSchema(String attributeSchema) {\n-        return attributeSchemas.add(attributeSchema);\n+    public boolean addSchema(String schema) {\n+        return schemas.add(schema);\n     }\n \n-    public boolean removeAttributeSchema(String attributeSchema) {\n-        return attributeSchemas.remove(attributeSchema);\n+    public boolean removeSchema(String schema) {\n+        return schemas.remove(schema);\n     }\n \n-    public Set<String> getAttributeSchemas() {\n-        return attributeSchemas;\n+    public Set<String> getSchemas() {\n+        return schemas;\n     }\n \n-    public void setAttributeSchemas(Set<String> attributeSchemas) {\n-        this.attributeSchemas = attributeSchemas;\n+    public void setSchemas(Set<String> schemas) {\n+        this.schemas = schemas;\n     }\n }","previous_filename":"client/src/main/java/org/syncope/client/to/DerivedAttributeSchemaTO.java"},{"sha":"7afb1b7c502310d6c85a2bd6ac109a6d8380ad24","filename":"client/src/main/java/org/syncope/client/to/SchemaTO.java","status":"renamed","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FSchemaTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FSchemaTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FSchemaTO.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -18,18 +18,18 @@\n import java.util.Set;\n import org.syncope.types.AttributeType;\n \n-public class AttributeSchemaTO extends AbstractBaseTO {\n+public class SchemaTO extends AbstractBaseTO {\n \n     private String name;\n     private AttributeType type;\n     private boolean mandatory;\n     private boolean multivalue;\n     private String conversionPattern;\n     private String validatorClass;\n-    private Set<String> derivedAttributeSchemas;\n+    private Set<String> derivedSchemas;\n \n-    public AttributeSchemaTO() {\n-        derivedAttributeSchemas = new HashSet<String>();\n+    public SchemaTO() {\n+        derivedSchemas = new HashSet<String>();\n     }\n \n     public String getConversionPattern() {\n@@ -40,20 +40,20 @@ public void setConversionPattern(String conversionPattern) {\n         this.conversionPattern = conversionPattern;\n     }\n \n-    public boolean addDerivedAttributeSchema(String derivedAttributeSchema) {\n-        return derivedAttributeSchemas.add(derivedAttributeSchema);\n+    public boolean addDerivedSchema(String derivedSchema) {\n+        return derivedSchemas.add(derivedSchema);\n     }\n \n-    public boolean removeDerivedAttributeSchema(String derivedAttributeSchema) {\n-        return derivedAttributeSchemas.remove(derivedAttributeSchema);\n+    public boolean removeDerivedSchema(String derivedSchema) {\n+        return derivedSchemas.remove(derivedSchema);\n     }\n \n-    public Set<String> getDerivedAttributeSchemas() {\n-        return derivedAttributeSchemas;\n+    public Set<String> getDerivedSchemas() {\n+        return derivedSchemas;\n     }\n \n-    public void setDerivedAttributeSchemas(Set<String> derivedAttributeSchemas) {\n-        this.derivedAttributeSchemas = derivedAttributeSchemas;\n+    public void setDerivedSchemas(Set<String> derivedSchemas) {\n+        this.derivedSchemas = derivedSchemas;\n     }\n \n     public boolean isMandatory() {","previous_filename":"client/src/main/java/org/syncope/client/to/AttributeSchemaTO.java"},{"sha":"066a7a0d4db3a6cf4b7a5cfadbd68bb4074b6f32","filename":"core/src/main/java/org/syncope/core/persistence/beans/role/RoleSchema.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FRoleSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FRoleSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Frole%2FRoleSchema.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -33,7 +33,7 @@ public class RoleSchema extends AbstractSchema {\n     fetch = FetchType.EAGER, mappedBy = \"schema\")\n     @Cascade(CascadeType.DELETE_ORPHAN)\n     Set<RoleAttribute> attributes;\n-    @ManyToMany\n+    @ManyToMany(mappedBy = \"schemas\")\n     Set<RoleDerivedSchema> derivedSchemas;\n \n     public RoleSchema() {"},{"sha":"267bbbfee89417dc505f2dff78bf9f3380bb1506","filename":"core/src/main/java/org/syncope/core/persistence/beans/user/UserSchema.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FUserSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FUserSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2Fuser%2FUserSchema.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -33,7 +33,7 @@ public class UserSchema extends AbstractSchema {\n     fetch = FetchType.EAGER, mappedBy = \"schema\")\n     @Cascade(CascadeType.DELETE_ORPHAN)\n     Set<UserAttribute> attributes;\n-    @ManyToMany\n+    @ManyToMany(mappedBy = \"schemas\")\n     Set<UserDerivedSchema> derivedSchemas;\n \n     public UserSchema() {"},{"sha":"e1254b515d7476ca18a99fcbd052e75eb50a7d0c","filename":"core/src/main/java/org/syncope/core/rest/controller/SchemaController.java","status":"modified","additions":24,"deletions":29,"changes":53,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSchemaController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSchemaController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSchemaController.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -27,8 +27,8 @@\n import org.springframework.web.bind.annotation.RequestMethod;\n import org.springframework.web.context.WebApplicationContext;\n import org.springframework.web.servlet.support.RequestContextUtils;\n-import org.syncope.client.to.AttributeSchemaTO;\n-import org.syncope.client.to.DerivedAttributeSchemaTO;\n+import org.syncope.client.to.DerivedSchemaTO;\n+import org.syncope.client.to.SchemaTO;\n import org.syncope.core.persistence.beans.AbstractSchema;\n import org.syncope.core.persistence.beans.AbstractDerivedSchema;\n import org.syncope.core.persistence.beans.role.RoleSchema;\n@@ -58,7 +58,7 @@ private Class getReference(String kind) throws IOException {\n \n     @RequestMapping(method = RequestMethod.GET,\n     value = \"/attribute/{kind}/list\")\n-    public List<AttributeSchemaTO> attributeList(HttpServletRequest request,\n+    public List<SchemaTO> attributeList(HttpServletRequest request,\n             @PathVariable(\"kind\") String kind) throws IOException {\n \n         Class reference = getReference(kind);\n@@ -69,34 +69,32 @@ public List<AttributeSchemaTO> attributeList(HttpServletRequest request,\n         SchemaDAO schemaDAO =\n                 (SchemaDAO) webApplicationContext.getBean(\"schemaDAOImpl\");\n \n-        List<AbstractSchema> attributeSchemas = schemaDAO.findAll(reference);\n+        List<AbstractSchema> schemas = schemaDAO.findAll(reference);\n \n         // TODO: change TO?\n-        List<AttributeSchemaTO> result = new ArrayList<AttributeSchemaTO>(\n-                attributeSchemas.size());\n-        AttributeSchemaTO attributeSchemaTO = null;\n-        String[] ignoreProperties = {\"derivedAttributeSchemas\"};\n-        for (AbstractSchema attributeSchema : attributeSchemas) {\n-            attributeSchemaTO = new AttributeSchemaTO();\n-            BeanUtils.copyProperties(attributeSchema, attributeSchemaTO,\n+        List<SchemaTO> result = new ArrayList<SchemaTO>(schemas.size());\n+        SchemaTO schemaTO = null;\n+        String[] ignoreProperties = {\"derivedSchemas\"};\n+        for (AbstractSchema schema : schemas) {\n+            schemaTO = new SchemaTO();\n+            BeanUtils.copyProperties(schema, schemaTO,\n                     ignoreProperties);\n \n-            for (AbstractDerivedSchema derivedAttributeSchema :\n-                    attributeSchema.getDerivedSchemas()) {\n+            for (AbstractDerivedSchema derivedSchema :\n+                    schema.getDerivedSchemas()) {\n \n-                attributeSchemaTO.addDerivedAttributeSchema(\n-                        derivedAttributeSchema.getName());\n+                schemaTO.addDerivedSchema(derivedSchema.getName());\n             }\n \n-            result.add(attributeSchemaTO);\n+            result.add(schemaTO);\n         }\n \n         return result;\n     }\n \n     @RequestMapping(method = RequestMethod.GET,\n     value = \"/derivedAttribute/{kind}/list\")\n-    public List<DerivedAttributeSchemaTO> derivedAttributeList(\n+    public List<DerivedSchemaTO> derivedAttributeList(\n             HttpServletRequest request, @PathVariable(\"kind\") String kind)\n             throws IOException {\n \n@@ -112,23 +110,20 @@ public List<DerivedAttributeSchemaTO> derivedAttributeList(\n         List<AbstractDerivedSchema> derivedAttributeSchemas =\n                 derivedAttributeSchemaDAO.findAll(reference);\n         // TODO: change TO?\n-        List<DerivedAttributeSchemaTO> result =\n-                new ArrayList<DerivedAttributeSchemaTO>(\n+        List<DerivedSchemaTO> result =\n+                new ArrayList<DerivedSchemaTO>(\n                 derivedAttributeSchemas.size());\n-        DerivedAttributeSchemaTO derivedAttributeSchemaTO = null;\n-        String[] ignoreProperties = {\"attributeSchemas\"};\n-        for (AbstractDerivedSchema derivedAttributeSchema :\n-                derivedAttributeSchemas) {\n+        DerivedSchemaTO derivedAttributeSchemaTO = null;\n+        String[] ignoreProperties = {\"schemas\"};\n+        for (AbstractDerivedSchema derivedSchema : derivedAttributeSchemas) {\n \n-            derivedAttributeSchemaTO = new DerivedAttributeSchemaTO();\n-            BeanUtils.copyProperties(derivedAttributeSchema,\n+            derivedAttributeSchemaTO = new DerivedSchemaTO();\n+            BeanUtils.copyProperties(derivedSchema,\n                     derivedAttributeSchemaTO, ignoreProperties);\n \n-            for (AbstractSchema attributeSchema :\n-                    derivedAttributeSchema.getSchemas()) {\n+            for (AbstractSchema schema : derivedSchema.getSchemas()) {\n \n-                derivedAttributeSchemaTO.addAttributeSchema(\n-                        attributeSchema.getName());\n+                derivedAttributeSchemaTO.addSchema(schema.getName());\n             }\n \n             result.add(derivedAttributeSchemaTO);"},{"sha":"9eeea426e66fb14cf3f6da73df6ed4289a22cf8d","filename":"core/src/main/resources/org/syncope/core/persistence/defaultContent.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdefaultContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdefaultContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdefaultContent.xml?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -23,8 +23,8 @@\n \n     <UserDerivedSchema name=\"username\" expression=\"firstname + '.' + surname\"/>\n \n-    <UserDerivedSchema_UserSchema UserDerivedSchema_name=\"username\"\n+    <UserDerivedSchema_UserSchema derivedSchemas_name=\"username\"\n                                   schemas_name=\"firstname\"/>\n-    <UserDerivedSchema_UserSchema UserDerivedSchema_name=\"username\"\n+    <UserDerivedSchema_UserSchema derivedSchemas_name=\"username\"\n                                   schemas_name=\"surname\"/>\n </dataset>"},{"sha":"df12dcdec7e791c91dde41fc50473f0d5eb84a51","filename":"core/src/test/java/org/syncope/core/rest/test/SchemaTestITCase.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Ftest%2FSchemaTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Ftest%2FSchemaTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Ftest%2FSchemaTestITCase.java?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -14,17 +14,17 @@\n  */\n package org.syncope.core.rest.test;\n \n-import org.syncope.client.to.DerivedAttributeSchemaTO;\n+import org.syncope.client.to.DerivedSchemaTO;\n import java.util.List;\n import org.junit.Test;\n-import org.syncope.client.to.AttributeSchemaTO;\n+import org.syncope.client.to.SchemaTO;\n import static org.junit.Assert.*;\n \n public class SchemaTestITCase extends AbstractTestITCase {\n \n     @Test\n     public void attributeList() {\n-        List<AttributeSchemaTO> attributeSchemas =\n+        List<SchemaTO> attributeSchemas =\n                 restTemplate.getForObject(BASE_URL\n                 + \"schema/attribute/role/list.json\", List.class);\n \n@@ -33,7 +33,7 @@ public void attributeList() {\n \n     @Test\n     public void derivedAttributeList() {\n-        List<DerivedAttributeSchemaTO> derivedAttributeSchemas =\n+        List<DerivedSchemaTO> derivedAttributeSchemas =\n                 restTemplate.getForObject(BASE_URL\n                 + \"schema/derivedAttribute/user/list.json\", List.class);\n "},{"sha":"b6e1ec7d5d459d0ea209a7a13f79a4bf2a2de83d","filename":"core/src/test/resources/org/syncope/core/persistence/dbunitTestData.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdbunitTestData.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76808ef0adfd521da83a8837b977f7816afc96e2/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdbunitTestData.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FdbunitTestData.xml?ref=76808ef0adfd521da83a8837b977f7816afc96e2","patch":"@@ -66,9 +66,9 @@\n \n     <UserDerivedSchema name=\"cn\" expression=\"surname + ', ' + firstname\"/>\n     \n-    <UserDerivedSchema_UserSchema UserDerivedSchema_name=\"cn\"\n+    <UserDerivedSchema_UserSchema derivedSchemas_name=\"cn\"\n                                   schemas_name=\"surname\" />\n-    <UserDerivedSchema_UserSchema UserDerivedSchema_name=\"cn\"\n+    <UserDerivedSchema_UserSchema derivedSchemas_name=\"cn\"\n                                   schemas_name=\"firstname\" />\n                                             \n     <UserDerivedAttribute id=\"1000\" derivedSchema_name=\"cn\" owner_id=\"3\"/>"}]}