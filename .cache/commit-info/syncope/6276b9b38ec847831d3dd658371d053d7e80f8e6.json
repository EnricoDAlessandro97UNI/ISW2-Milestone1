{"sha":"6276b9b38ec847831d3dd658371d053d7e80f8e6","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjYyNzZiOWIzOGVjODQ3ODMxZDNkZDY1ODM3MWQwNTNkN2U4MGY4ZTY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-22T13:47:54Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-22T13:47:54Z"},"message":"In preparation to fix issue #15\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246409 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"231bc28dfbb5700691500114284a8c54347eb462","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/231bc28dfbb5700691500114284a8c54347eb462"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/6276b9b38ec847831d3dd658371d053d7e80f8e6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6276b9b38ec847831d3dd658371d053d7e80f8e6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/6276b9b38ec847831d3dd658371d053d7e80f8e6","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6276b9b38ec847831d3dd658371d053d7e80f8e6/comments","author":null,"committer":null,"parents":[{"sha":"0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8"}],"stats":{"total":948,"additions":52,"deletions":896},"files":[{"sha":"0ab6aecdc00620d4b7cdce77b7739f6e21e21f36","filename":"core/pom.xml","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -152,11 +152,6 @@\n             <artifactId>hibernate-entitymanager</artifactId>\n         </dependency>\n \n-        <dependency>\n-            <groupId>com.forgerock.openam</groupId>\n-            <artifactId>clientsdk</artifactId>\n-        </dependency>\n-\n         <dependency>\n             <groupId>org.dbunit</groupId>\n             <artifactId>dbunit</artifactId>\n@@ -349,6 +344,9 @@\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-war-plugin</artifactId>\n                 <inherited>true</inherited>\n+                <configuration>\n+                    <attachClasses>true</attachClasses>\n+                </configuration>\n                 <executions>\n                     <execution>\n                         <id>integration-test-war</id>"},{"sha":"34708c91b06df0390124ea380c32b97c7ed7452b","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/CheckIfUserIdAlreadyExists.java","status":"removed","additions":0,"deletions":94,"changes":94,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FCheckIfUserIdAlreadyExists.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FCheckIfUserIdAlreadyExists.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FCheckIfUserIdAlreadyExists.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,94 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.InvalidInputException;\n-import com.opensymphony.workflow.Validator;\n-import com.opensymphony.workflow.Workflow;\n-import com.opensymphony.workflow.WorkflowException;\n-import com.opensymphony.workflow.query.FieldExpression;\n-import com.opensymphony.workflow.query.WorkflowExpressionQuery;\n-import com.opensymphony.workflow.spi.Step;\n-import com.opensymphony.workflow.spi.WorkflowEntry;\n-import java.util.List;\n-import java.util.Map;\n-import org.syncope.client.to.UserTO;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.persistence.beans.user.UserAttributeValue;\n-import org.syncope.core.persistence.dao.SyncopeUserDAO;\n-import org.syncope.core.workflow.Constants;\n-import org.syncope.core.workflow.WorkflowInitException;\n-\n-public class CheckIfUserIdAlreadyExists extends OSWorkflowComponent\n-        implements Validator {\n-\n-    @Override\n-    public void validate(Map transientVars, Map args, PropertySet ps)\n-            throws InvalidInputException, WorkflowException {\n-\n-        UserTO userTO = (UserTO) transientVars.get(Constants.USER_TO);\n-        String userId = Utils.getUserId(userTO);\n-\n-        // Check if there is at least another workflow instance involving the\n-        // same user, using userId as matching value (stored as owner)\n-        Workflow workflow = getUserWorkflow();\n-        WorkflowExpressionQuery query = new WorkflowExpressionQuery(\n-                new FieldExpression(FieldExpression.CALLER,\n-                FieldExpression.CURRENT_STEPS, FieldExpression.EQUALS, userId));\n-        List<Long> entries = workflow.query(query);\n-        if (!entries.isEmpty()) {\n-            WorkflowInitException initException = new WorkflowInitException();\n-            initException.setWorkflowEntryId(((WorkflowEntry) transientVars.get(\n-                    Constants.ENTRY)).getId());\n-\n-            // Find SyncopeUser involved in ther other worklfow instance\n-            SyncopeUserDAO syncopeUserDAO = (SyncopeUserDAO) context.getBean(\n-                    \"syncopeUserDAOImpl\");\n-            UserAttributeValue userIdValue = new UserAttributeValue();\n-            userIdValue.setStringValue(userId);\n-            List<SyncopeUser> matchingUsers =\n-                    syncopeUserDAO.findByAttributeValue(userIdValue);\n-            if (matchingUsers != null && !matchingUsers.isEmpty()) {\n-                initException.setSyncopeUserId(\n-                        matchingUsers.iterator().next().getId());\n-            }\n-\n-            // Check if the user, in the other workflow instance, has status\n-            // \"active\" or \"suspended\" and report the corresponding action to\n-            // take\n-            List<Step> currentSteps =\n-                    workflow.getCurrentSteps(entries.iterator().next());\n-            if (currentSteps.size() > 1) {\n-                throw new WorkflowException(\n-                        \"Unexpected number of current steps: \"\n-                        + currentSteps.size());\n-            }\n-            Step currentStep = currentSteps.iterator().next();\n-            if (currentStep.getStatus().equals(\"active\")\n-                    || currentStep.getStatus().equals(\"suspended\")) {\n-\n-                initException.setExceptionOperation(\n-                        WorkflowInitException.ExceptionOperation.REJECT);\n-            } else {\n-                initException.setExceptionOperation(\n-                        WorkflowInitException.ExceptionOperation.OVERWRITE);\n-            }\n-\n-            throw initException;\n-        }\n-    }\n-}"},{"sha":"db4a5ea5497227b8e49dae7db411425386a1a251","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/IsMobileApplication.java","status":"removed","additions":0,"deletions":49,"changes":49,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FIsMobileApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FIsMobileApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FIsMobileApplication.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,49 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.Condition;\n-import com.opensymphony.workflow.WorkflowException;\n-import java.util.Map;\n-import org.syncope.core.persistence.beans.role.RoleAttribute;\n-import org.syncope.core.persistence.beans.role.SyncopeRole;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.workflow.Constants;\n-\n-public class IsMobileApplication extends OSWorkflowComponent\n-        implements Condition {\n-\n-    @Override\n-    public boolean passesCondition(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-        boolean mobileApplication = false;\n-\n-        RoleAttribute attribute = null;\n-        for (SyncopeRole application : syncopeUser.getRoles()) {\n-            attribute = application.getAttribute(\"applicationType\");\n-            if (attribute != null && !attribute.getAttributeValues().isEmpty()) {\n-                mobileApplication = \"mobile\".equals(\n-                        attribute.getAttributeValues().iterator().next().getStringValue());\n-            }\n-        }\n-\n-        return mobileApplication;\n-    }\n-}"},{"sha":"bccd1934b54483d5d6f37a50adad482f94a74b83","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/OpenAMActivate.java","status":"removed","additions":0,"deletions":82,"changes":82,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMActivate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMActivate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMActivate.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,82 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.iplanet.sso.SSOToken;\n-import com.iplanet.sso.SSOTokenManager;\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.FunctionProvider;\n-import com.opensymphony.workflow.WorkflowException;\n-import com.sun.identity.idm.AMIdentity;\n-import com.sun.identity.idm.AMIdentityRepository;\n-import com.sun.identity.idm.IdSearchControl;\n-import com.sun.identity.idm.IdSearchOpModifier;\n-import com.sun.identity.idm.IdSearchResults;\n-import com.sun.identity.idm.IdType;\n-import com.sun.identity.security.AdminTokenAction;\n-import java.security.AccessController;\n-import java.util.Collections;\n-import java.util.Map;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.workflow.Constants;\n-\n-/**\n- * TODO: remove ASAP!\n- */\n-public class OpenAMActivate extends OSWorkflowComponent\n-        implements FunctionProvider {\n-\n-    @Override\n-    public void execute(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-\n-        String realm = OpenAMUtils.getRealmFromRoles(syncopeUser.getRoles());\n-\n-        try {\n-            SSOToken adminToken = (SSOToken) AccessController.doPrivileged(\n-                    AdminTokenAction.getInstance());\n-\n-            AMIdentityRepository repo =\n-                    new AMIdentityRepository(adminToken, realm);\n-\n-            IdSearchControl controls = new IdSearchControl();\n-            controls.setSearchModifiers(IdSearchOpModifier.OR,\n-                    Collections.singletonMap(\"uid\",\n-                    Collections.singleton(String.valueOf(syncopeUser.getId()))));\n-\n-            IdSearchResults idSearchResults = repo.searchIdentities(\n-                    IdType.USER, \"*\", controls);\n-            if (!idSearchResults.getSearchResults().isEmpty()) {\n-                AMIdentity amUser =\n-                        (AMIdentity) idSearchResults.getSearchResults().iterator().next();\n-                amUser.setAttributes(Collections.singletonMap(\"inetuserstatus\",\n-                        Collections.singleton(\"Active\")));\n-                amUser.store();\n-            } else {\n-                log.info(\"No user found with uid \"\n-                        + String.valueOf(syncopeUser.getId()));\n-            }\n-\n-            SSOTokenManager.getInstance().destroyToken(adminToken);\n-        } catch (Throwable t) {\n-            log.error(\"While trying to activate the user on OpenAM, \"\n-                    + \"under realm \" + realm, t);\n-        }\n-    }\n-}"},{"sha":"045c373375547f76c54366d7c1ad655c8197e5c7","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/OpenAMCreate.java","status":"removed","additions":0,"deletions":78,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMCreate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMCreate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMCreate.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,78 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.iplanet.sso.SSOToken;\n-import com.iplanet.sso.SSOTokenManager;\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.FunctionProvider;\n-import com.opensymphony.workflow.WorkflowException;\n-import com.sun.identity.idm.AMIdentityRepository;\n-import com.sun.identity.idm.IdType;\n-import com.sun.identity.security.AdminTokenAction;\n-import java.security.AccessController;\n-import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.Map;\n-import java.util.Set;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.workflow.Constants;\n-\n-/**\n- * TODO: remove ASAP!\n- */\n-public class OpenAMCreate extends OSWorkflowComponent\n-        implements FunctionProvider {\n-\n-    @Override\n-    public void execute(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-\n-        String realm = OpenAMUtils.getRealmFromRoles(syncopeUser.getRoles());\n-\n-        try {\n-            SSOToken adminToken = (SSOToken) AccessController.doPrivileged(\n-                    AdminTokenAction.getInstance());\n-\n-            Map<String, Set<String>> map = new HashMap<String, Set<String>>();\n-            map.put(\"cn\", Collections.singleton(\n-                    String.valueOf(syncopeUser.getId())));\n-            map.put(\"sn\", Collections.singleton(\n-                    String.valueOf(syncopeUser.getId())));\n-            map.put(\"uid\", Collections.singleton(\n-                    String.valueOf(syncopeUser.getId())));\n-            map.put(\"mail\",\n-                    Collections.singleton(Utils.getUserId(syncopeUser)));\n-            map.put(\"userpassword\",\n-                    Collections.singleton(syncopeUser.getPassword()));\n-            map.put(\"inetuserstatus\", Collections.singleton(\"Inactive\"));\n-\n-            AMIdentityRepository repo =\n-                    new AMIdentityRepository(adminToken, realm);\n-\n-            repo.createIdentity(IdType.USER,\n-                    String.valueOf(syncopeUser.getId()), map);\n-\n-            SSOTokenManager.getInstance().destroyToken(adminToken);\n-        } catch (Throwable t) {\n-            log.error(\"While trying to create the user on OpenAM, \"\n-                    + \" under realm \" + realm, t);\n-        }\n-    }\n-}"},{"sha":"fdf7fd6ed8985c6e80328fd5857700b5d1a0bc40","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/OpenAMUtils.java","status":"removed","additions":0,"deletions":43,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FOpenAMUtils.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,43 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import java.util.Set;\n-import org.syncope.core.persistence.beans.role.SyncopeRole;\n-\n-/**\n- * TODO: remove ASAP!\n- */\n-public class OpenAMUtils {\n-\n-    public static String getRealmFromRoles(Set<SyncopeRole> roles) {\n-        String realm = \"/\";\n-\n-        if (roles.size() > 0) {\n-            SyncopeRole role = roles.iterator().next();\n-\n-            while (role.getParent() != null\n-                    && !role.getParent().getName().equals(\"/\")) {\n-\n-                role = role.getParent();\n-            }\n-            if (role.getParent() != null) {\n-                realm = String.valueOf(role.getId());\n-            }\n-        }\n-\n-        return realm;\n-    }\n-}"},{"sha":"0fbb7960845695f56fc78911a3ae3df4bfd8b9a5","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/SendEmail.java","status":"removed","additions":0,"deletions":68,"changes":68,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendEmail.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendEmail.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendEmail.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,68 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.opensymphony.workflow.WorkflowException;\n-import java.net.URLEncoder;\n-import java.util.Map;\n-import org.apache.commons.mail.EmailException;\n-import org.apache.commons.mail.HtmlEmail;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.persistence.dao.MissingConfKeyException;\n-import org.syncope.core.workflow.*;\n-\n-public class SendEmail extends BaseSendEmail {\n-\n-    @Override\n-    protected HtmlEmail getHtmlEmail(Map<String, String> args,\n-            SyncopeUser syncopeUser)\n-            throws EmailException, WorkflowException {\n-\n-        String urlSuffix = \".jsp\";\n-        if (Boolean.valueOf(args.get(\"parametrize\"))) {\n-            try {\n-                urlSuffix += \"?confirmationLink=\"\n-                        + syncopeConfigurationDAO.find(\n-                        \"servicelayer.baseurl\").getConfValue()\n-                        + \"?token=\"\n-                        + URLEncoder.encode(syncopeUser.getToken(), \"UTF-8\")\n-                        + \"&userId=\" + Utils.getUserId(syncopeUser);\n-            } catch (Throwable t) {\n-                log.error(\"Unexpected exception\", t);\n-            }\n-        }\n-\n-        HtmlEmail email = super.getHtmlEmail(args, syncopeUser);\n-        email.addTo(Utils.getUserId(syncopeUser));\n-        try {\n-            email.setHtmlMsg(getEmailBody(syncopeConfigurationDAO.find(\n-                    \"mail.templates.url\").getConfValue(),\n-                    syncopeConfigurationDAO.find(\n-                    args.get(\"template.html\")).getConfValue(),\n-                    urlSuffix,\n-                    urlSuffix.substring(0, urlSuffix.indexOf('=') + 1)));\n-            email.setTextMsg(getEmailBody(syncopeConfigurationDAO.find(\n-                    \"mail.templates.url\").getConfValue(),\n-                    syncopeConfigurationDAO.find(\n-                    args.get(\"template.txt\")).getConfValue(),\n-                    urlSuffix,\n-                    urlSuffix.substring(0, urlSuffix.indexOf('=') + 1)));\n-        } catch (MissingConfKeyException e) {\n-            new WorkflowException(e);\n-        }\n-\n-        return email;\n-    }\n-}"},{"sha":"ae4b9534890c73c465278d7d266bb8759b8564b4","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/SendSMSText.java","status":"removed","additions":0,"deletions":37,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendSMSText.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendSMSText.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FSendSMSText.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,37 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.FunctionProvider;\n-import com.opensymphony.workflow.WorkflowException;\n-import java.util.Map;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.workflow.Constants;\n-\n-public class SendSMSText extends OSWorkflowComponent\n-        implements FunctionProvider {\n-\n-    @Override\n-    public void execute(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-\n-        log.info(\"Send an SMS text to \" + syncopeUser);\n-    }\n-}"},{"sha":"ed028a4f008cee4e13e5be5c7f2c6c6c36b4badf","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/StoreActivationDate.java","status":"removed","additions":0,"deletions":59,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreActivationDate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreActivationDate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreActivationDate.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,59 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.FunctionProvider;\n-import com.opensymphony.workflow.WorkflowException;\n-import java.text.SimpleDateFormat;\n-import java.util.Date;\n-import java.util.Map;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.persistence.beans.user.UserAttribute;\n-import org.syncope.core.persistence.beans.user.UserAttributeValue;\n-import org.syncope.core.persistence.beans.user.UserSchema;\n-import org.syncope.core.persistence.dao.SchemaDAO;\n-import org.syncope.core.persistence.validation.ValidationException;\n-import org.syncope.core.workflow.Constants;\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-\n-public class StoreActivationDate extends OSWorkflowComponent\n-        implements FunctionProvider {\n-\n-    @Override\n-    public void execute(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-\n-        SchemaDAO schemaDAO = (SchemaDAO) context.getBean(\"schemaDAOImpl\");\n-        UserSchema schema = schemaDAO.find(\"activationDate\", UserSchema.class);\n-\n-        UserAttribute attribute = new UserAttribute();\n-        attribute.setSchema(schema);\n-        attribute.setOwner(syncopeUser);\n-        syncopeUser.addAttribute(attribute);\n-\n-        SimpleDateFormat sdf = new SimpleDateFormat(\n-                schema.getConversionPattern());\n-        try {\n-            attribute.addValue(sdf.format(new Date()),\n-                    new UserAttributeValue());\n-        } catch (ValidationException e) {\n-            log.error(\"Could not store activation date\", e);\n-        }\n-    }\n-}"},{"sha":"2d6c8b95706645f656c64d9aea597982a697aab7","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/StoreUserIdAsCaller.java","status":"removed","additions":0,"deletions":55,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreUserIdAsCaller.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreUserIdAsCaller.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FStoreUserIdAsCaller.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,55 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.opensymphony.module.propertyset.PropertySet;\n-import com.opensymphony.workflow.FunctionProvider;\n-import com.opensymphony.workflow.Workflow;\n-import com.opensymphony.workflow.WorkflowException;\n-import com.opensymphony.workflow.spi.WorkflowEntry;\n-import com.opensymphony.workflow.spi.hibernate.HibernateCurrentStep;\n-import java.util.List;\n-import java.util.Map;\n-import org.syncope.client.to.UserTO;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.workflow.Constants;\n-import org.syncope.core.workflow.OSWorkflowComponent;\n-\n-public class StoreUserIdAsCaller extends OSWorkflowComponent\n-        implements FunctionProvider {\n-\n-    @Override\n-    public void execute(Map transientVars, Map args, PropertySet ps)\n-            throws WorkflowException {\n-\n-        UserTO userTO = (UserTO) transientVars.get(\"userTO\");\n-        String userId = null;\n-        if (userTO == null) {\n-            SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                    Constants.SYNCOPE_USER);\n-            userId = Utils.getUserId(syncopeUser);\n-        } else {\n-            userId = Utils.getUserId(userTO);\n-        }\n-\n-        WorkflowEntry entry = (WorkflowEntry) transientVars.get(\"entry\");\n-        Workflow workflow = getUserWorkflow();\n-        List<HibernateCurrentStep> currentSteps = workflow.getCurrentSteps(\n-                entry.getId());\n-        for (HibernateCurrentStep currentStep : currentSteps) {\n-            currentStep.setCaller(userId);\n-        }\n-    }\n-}"},{"sha":"4542dd5e51135839b27dc88f3576e0045fac50b2","filename":"core/src/main/java/org/syncope/core/workflow/prcsiam/Utils.java","status":"removed","additions":0,"deletions":56,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2Fprcsiam%2FUtils.java?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,56 +0,0 @@\n-/*\n- *  Licensed under the Apache License, Version 2.0 (the \"License\");\n- *  you may not use this file except in compliance with the License.\n- *  You may obtain a copy of the License at\n- * \n- *       http://www.apache.org/licenses/LICENSE-2.0\n- * \n- *  Unless required by applicable law or agreed to in writing, software\n- *  distributed under the License is distributed on an \"AS IS\" BASIS,\n- *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- *  See the License for the specific language governing permissions and\n- *  limitations under the License.\n- *  under the License.\n- */\n-package org.syncope.core.workflow.prcsiam;\n-\n-import com.opensymphony.workflow.WorkflowException;\n-import org.syncope.client.to.AttributeTO;\n-import org.syncope.client.to.UserTO;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n-import org.syncope.core.persistence.beans.user.UserAttribute;\n-\n-public class Utils {\n-\n-    public static String getUserId(UserTO userTO) throws WorkflowException {\n-        String userId = null;\n-\n-        for (AttributeTO attributeTO : userTO.getAttributes()) {\n-            if (attributeTO.getSchema().equals(\"userId\")\n-                    && attributeTO.getValues() != null\n-                    && !attributeTO.getValues().isEmpty()) {\n-\n-                userId = attributeTO.getValues().iterator().next();\n-            }\n-        }\n-        if (userId == null) {\n-            throw new WorkflowException(\n-                    \"UserTO not provided with mandatory userId: \" + userTO);\n-        }\n-\n-        return userId;\n-    }\n-\n-    public static String getUserId(SyncopeUser syncopeUser)\n-            throws WorkflowException {\n-\n-        UserAttribute userId = syncopeUser.getAttribute(\"userId\");\n-        if (userId == null || userId.getAttributeValues().isEmpty()) {\n-            throw new WorkflowException(\n-                    \"SyncopeUser not provided with mandatory userId: \"\n-                    + syncopeUser);\n-        }\n-\n-        return userId.getAttributeValues().iterator().next().getStringValue();\n-    }\n-}"},{"sha":"4000faa128d410ca71d4c81c9116d4a3651b7ef6","filename":"core/src/main/resources/AMConfig.properties","status":"removed","additions":0,"deletions":30,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fresources%2FAMConfig.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8/core%2Fsrc%2Fmain%2Fresources%2FAMConfig.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FAMConfig.properties?ref=0a6f0f0b2b696c0cab9b0c06f109bf725ae71ae8","patch":"@@ -1,30 +0,0 @@\n-com.iplanet.am.session.client.polling.enable=true\n-com.iplanet.am.session.client.polling.period=180\n-com.sun.identity.policy.client.cacheMode=subtree\n-com.sun.identity.agents.logging.level=ALLOW\n-com.sun.identity.agents.server.log.file.name=amRemotePolicyLog\n-com.iplanet.security.SecureRandomFactoryImpl=com.iplanet.am.util.SecureRandomFactoryImpl\n-com.iplanet.security.encryptor=com.iplanet.services.util.JCEEncryption\n-com.iplanet.security.SSLSocketFactoryImpl=netscape.ldap.factory.JSSESocketFactory\n-com.iplanet.security.encryptor=com.iplanet.services.util.JCEEncryption\n-#com.iplanet.am.sdk.package=com.iplanet.am.sdk.remote\n-com.iplanet.amsdk.package=remote\n-com.sun.identity.agents.polling.interval=3\n-com.iplanet.am.serverMode=false\n-com.sun.identity.monitoring=on\n-com.iplanet.services.debug.level=message\n-com.iplanet.am.cookie.name=iPlanetDirectoryPro\n-com.sun.identity.policy.client.resourceComparators=serviceType=iPlanetAMWebAgentService|class=com.sun.identity.policy.plugins.URLResourceName|wildcard=*|delimiter=/|caseSensitive=true\n-com.iplanet.services.debug.directory=/tmp\n-com.iplanet.am.server.protocol=http\n-com.iplanet.am.server.host=localhost\n-com.iplanet.am.server.port=8080\n-com.iplanet.am.services.deploymentDescriptor=openam\n-com.iplanet.am.naming.url=http://localhost:8080/openam/namingservice\n-com.sun.identity.agents.app.username=amadmin\n-com.iplanet.am.service.password=password\n-com.sun.identity.agents.notification.enabled=false\n-com.iplanet.am.notification.url=http://localhost:8080/openam/notificationservice\n-\n-am.encryption.pwd=\n-com.sun.identity.client.encryptionKey="},{"sha":"785225f530b4552d0db4ec113e913e16fae65112","filename":"core/src/main/resources/org/syncope/core/persistence/content.xml","status":"modified","additions":0,"deletions":69,"changes":69,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -33,28 +33,13 @@\n     <SyncopeConfiguration confKey=\"identityconnectors.bundle.directory\"\n                           confValue=\"/tmp/bundles\"/>\n \n-    <UserSchema name=\"userId\" type=\"String\" virtual=\"false\"\n-                mandatory=\"true\" multivalue=\"false\" uniquevalue=\"true\"\n-                validatorClass=\"org.syncope.core.persistence.validation.EmailAddressValidator\"/>\n     <UserSchema name=\"surname\" type=\"String\" virtual=\"false\"\n                 mandatory=\"true\" multivalue=\"false\" uniquevalue=\"false\"/>\n     <UserSchema name=\"firstname\" type=\"String\" virtual=\"false\"\n                 mandatory=\"false\" multivalue=\"false\" uniquevalue=\"false\"/>\n     <UserSchema name=\"email\" type=\"String\" virtual=\"false\"\n                 mandatory=\"false\" multivalue=\"true\" uniquevalue=\"false\"\n                 validatorClass=\"org.syncope.core.persistence.validation.EmailAddressValidator\"/>\n-    <UserSchema name=\"activationDate\" type=\"Date\" virtual=\"false\"\n-                mandatory=\"false\" multivalue=\"false\" uniquevalue=\"false\"\n-                conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n-    <UserSchema name=\"treatmentAuth\" type=\"Boolean\" virtual=\"false\"\n-                mandatory=\"true\" multivalue=\"false\" uniquevalue=\"false\"\n-                validatorClass=\"org.syncope.core.persistence.validation.AlwaysTrueValidator\"/>\n-    <UserSchema name=\"promoRCSAuth\" type=\"Boolean\" virtual=\"false\"\n-                mandatory=\"true\" multivalue=\"false\" uniquevalue=\"false\"/>\n-    <UserSchema name=\"promoThirdPartyAuth\" type=\"Boolean\" virtual=\"false\"\n-                mandatory=\"true\" multivalue=\"false\" uniquevalue=\"false\"/>\n-    <UserSchema name=\"type\" type=\"String\" virtual=\"false\"\n-                mandatory=\"false\" multivalue=\"false\" uniquevalue=\"false\"/>\n \n     <UserDerivedSchema name=\"username\" expression=\"firstname + '.' + surname\"/>\n \n@@ -63,64 +48,10 @@\n     <UserDerivedSchema_UserSchema derivedSchemas_name=\"username\"\n                                   schemas_name=\"surname\"/>\n \n-    <RoleSchema name=\"applicationType\" type=\"String\" virtual=\"false\"\n-                mandatory=\"true\" multivalue=\"false\" uniquevalue=\"false\"/>\n-                      \n     <SyncopeRole id=\"0\" name=\"/\" inheritAttributes=\"FALSE\" inheritDerivedAttributes=\"FALSE\"/>\n-    <SyncopeRole id=\"1\" name=\"EDUCATION2\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"2\" name=\"ABBONAMENTI2009\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"3\" name=\"PORTFEM\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"4\" name=\"MAIN_OUTSIDE_FENCE\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"5\" name=\"COMPARTIMENTO_PAN\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"6\" name=\"MAIN\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"7\" name=\"ATCASA\" parent_id=\"0\" inheritAttributes=\"TRUE\" inheritDerivedAttributes=\"TRUE\"/>\n-    <SyncopeRole id=\"10\" name=\"testApplication1\" parent_id=\"1\" inheritAttributes=\"FALSE\" inheritDerivedAttributes=\"FALSE\"/>\n-    <SyncopeRole id=\"11\" name=\"testApplication2\" parent_id=\"1\" inheritAttributes=\"FALSE\" inheritDerivedAttributes=\"FALSE\"/>\n-    <SyncopeRole id=\"20\" name=\"testApplication3\" parent_id=\"2\" inheritAttributes=\"FALSE\" inheritDerivedAttributes=\"FALSE\"/>\n-\n-    <RoleAttribute id=\"10\" owner_id=\"4\" schema_name=\"applicationType\"/>\n-    <RoleAttribute id=\"11\" owner_id=\"3\" schema_name=\"applicationType\"/>\n-\n-    <RoleAttributeValue attribute_id=\"10\" id=\"100\" stringValue=\"mobile\"/>\n-    <RoleAttributeValue attribute_id=\"11\" id=\"101\" stringValue=\"e-commerce\"/>\n \n     <MembershipSchema name=\"subscriptionDate\" type=\"Date\" virtual=\"false\"\n                       mandatory=\"false\" multivalue=\"false\" uniquevalue=\"false\"\n                       conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n \n-    <ConnectorInstance id=\"1\"\n-                       bundleName=\"org.syncope.identityconnectors.bundles.staticws\"\n-                       connectorName=\"org.syncope.identityconnectors.bundles.staticwebservice.WebServiceConnector\"\n-                       version=\"0.1-SNAPSHOT\"\n-                       xmlConfiguration=\"%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E+%0A%3Cjava+version%3D%221.6.0_20%22+class%3D%22java.beans.XMLDecoder%22%3E+%0A+%3Cobject+class%3D%22java.util.HashSet%22%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.client.to.PropertyTO%22%3E+%0A++++%3Cvoid+property%3D%22key%22%3E+%0A+++++%3Cstring%3Eendpoint%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Ehttp%3A%2F%2Flocalhost%3A8888%2FsampleCode%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.client.to.PropertyTO%22%3E+%0A++++%3Cvoid+property%3D%22key%22%3E+%0A+++++%3Cstring%3Eservicename%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3EProvisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A+%3C%2Fobject%3E+%0A%3C%2Fjava%3E+%0A\" />\n-\n-    <Resource name=\"ws-target-resource\" connector_id=\"1\"/>\n-\n-    <Resource_SyncopeRole Resource_name=\"ws-target-resource\" roles_id=\"2\" />\n-    <SyncopeRole_Resource SyncopeRole_id=\"2\" resources_name=\"ws-target-resource\" />\n-\n-    <SchemaMapping id=\"1\" field=\"userId\"\n-                   resource_name=\"ws-target-resource\"\n-                   userSchema_name=\"userId\" nullable=\"false\"\n-                   accountid=\"true\" password=\"false\"/>\n-\n-    <SchemaMapping id=\"2\" field=\"password\"\n-                   resource_name=\"ws-target-resource\"\n-                   userSchema_name=\"userId\" nullable=\"false\"\n-                   accountid=\"false\" password=\"true\"/>\n-\n-    <SchemaMapping id=\"3\" field=\"name\"\n-                   resource_name=\"ws-target-resource\"\n-                   userSchema_name=\"firstname\" nullable=\"false\"\n-                   accountid=\"false\" password=\"false\"/>\n-\n-    <SchemaMapping id=\"4\" field=\"surname\"\n-                   resource_name=\"ws-target-resource\"\n-                   userSchema_name=\"surname\" nullable=\"false\"\n-                   accountid=\"false\" password=\"false\"/>\n-\n-    <SchemaMapping id=\"5\" field=\"type\"\n-                   resource_name=\"ws-target-resource\"\n-                   userSchema_name=\"type\" nullable=\"false\"\n-                   accountid=\"false\" password=\"false\"/>\n </dataset>"},{"sha":"ac3de9f45a765db0fbc51c3c50a023144881f8ce","filename":"core/src/main/resources/userWorkflow.xml","status":"modified","additions":3,"deletions":158,"changes":161,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -16,153 +16,32 @@\n <workflow>\n     <initial-actions>\n         <action name=\"start\" id=\"0\">\n-            <validators>\n-                <validator type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.CheckIfUserIdAlreadyExists</arg>\n-                </validator>\n-            </validators>\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-            </pre-functions>\n             <results>\n                 <unconditional-result old-status=\"n/a\" status=\"creationRequest\" step=\"1\"/>\n             </results>\n         </action>\n     </initial-actions>\n-    <common-actions>\n-        <action name=\"reset\" id=\"100\">\n-            <results>\n-                <unconditional-result old-status=\"n/a\" status=\"creationRequest\" step=\"1\"/>\n-            </results>\n-        </action>\n-    </common-actions>\n     <steps>\n         <step name=\"creationRequest\" id=\"1\">\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-            </pre-functions>\n             <actions>\n                 <action name=\"create\" id=\"1001\">\n-                    <pre-functions>\n-                        <function type=\"class\">\n-                            <arg name=\"class.name\">org.syncope.core.workflow.GenerateToken</arg>\n-                        </function>\n-                    </pre-functions>\n                     <results>\n-                        <result old-status=\"creationRequest\" status=\"active\" step=\"3\">\n-                            <conditions>\n-                                <condition type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.IsMobileApplication</arg>\n-                                </condition>\n-                            </conditions>\n-                            <post-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.SendSMSText</arg>\n-                                </function>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreActivationDate</arg>\n-                                </function>\n-                            </post-functions>\n-                        </result>\n                         <unconditional-result old-status=\"creationRequest\" status=\"doubleOptIn\" step=\"2\"/>\n                     </results>\n-                    <post-functions>\n-                        <function type=\"class\">\n-                            <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.SendEmail</arg>\n-                            <arg name=\"from\">activate.email.from</arg>\n-                            <arg name=\"subject\">activate.email.subject</arg>\n-                            <arg name=\"template.html\">activate.email.template.html</arg>\n-                            <arg name=\"template.txt\">activate.email.template.txt</arg>\n-                            <arg name=\"parametrize\">true</arg>\n-                        </function>\n-                        <!-- TMP -->\n-                        <function type=\"class\">\n-                            <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.OpenAMCreate</arg>\n-                        </function>\n-                    </post-functions>\n                 </action>\n             </actions>\n         </step>\n-        <step name=\"doubleOptIn\" id=\"2\">\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-            </pre-functions>\n+        <step name=\"activatable\" id=\"2\">\n             <actions>\n-                <common-action id=\"100\"/>\n-\n                 <action name=\"activate\" id=\"2001\">\n                     <results>\n-                        <result old-status=\"doubleOptIn\" status=\"active\" step=\"3\">\n-                            <conditions>\n-                                <condition type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.IsValidToken</arg>\n-                                </condition>\n-                            </conditions>\n-                            <post-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreActivationDate</arg>\n-                                </function>\n-                            </post-functions>\n-                        </result>\n-                        <result old-status=\"doubleOptIn\" status=\"doubleOptIn\" step=\"2\">\n-                            <conditions>\n-                                <condition type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.IsNotValidToken</arg>\n-                                </condition>\n-                            </conditions>\n-                            <pre-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.GenerateToken</arg>\n-                                </function>\n-                            </pre-functions>\n-                            <post-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.SendEmail</arg>\n-                                    <arg name=\"from\">activate.email.from</arg>\n-                                    <arg name=\"subject\">activate.email.subject</arg>\n-                                    <arg name=\"template.html\">activate.email.template.html</arg>\n-                                    <arg name=\"template.txt\">activate.email.template.txt</arg>\n-                                    <arg name=\"parametrize\">true</arg>\n-                                </function>\n-                            </post-functions>\n-                        </result>\n-                        <unconditional-result old-status=\"doubleOptIn\" status=\"doubleOptIn\" step=\"2\"/>\n+                        <unconditional-result old-status=\"doubleOptIn\" status=\"active\" step=\"3\"/>\n                     </results>\n                 </action>\n             </actions>\n         </step>\n         <step name=\"active\" id=\"3\">\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-                <!-- TMP -->\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.OpenAMActivate</arg>\n-                </function>\n-            </pre-functions>\n             <actions>\n-                <action name=\"subscribe\" id=\"3001\">\n-                    <results>\n-                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n-                    </results>\n-                </action>\n-                <action name=\"unsubscribe\" id=\"3002\">\n-                    <results>\n-                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n-                    </results>\n-                </action>\n-                <action name=\"update\" id=\"3003\">\n-                    <results>\n-                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n-                    </results>\n-                </action>\n                 <action name=\"generateToken\" id=\"3004\">\n                     <pre-functions>\n                         <function type=\"class\">\n@@ -172,16 +51,6 @@\n                     <results>\n                         <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n                     </results>\n-                    <post-functions>\n-                        <function type=\"class\">\n-                            <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.SendEmail</arg>\n-                            <arg name=\"from\">generateToken.email.from</arg>\n-                            <arg name=\"subject\">generateToken.email.subject</arg>\n-                            <arg name=\"template.html\">generateToken.email.template.html</arg>\n-                            <arg name=\"template.txt\">generateToken.email.template.txt</arg>\n-                            <arg name=\"parametrize\">true</arg>\n-                        </function>\n-                    </post-functions>\n                 </action>\n                 <action name=\"verifyToken\" id=\"3005\">\n                     <results>\n@@ -191,16 +60,6 @@\n                                     <arg name=\"class.name\">org.syncope.core.workflow.IsValidToken</arg>\n                                 </condition>\n                             </conditions>\n-                            <post-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.SendEmail</arg>\n-                                    <arg name=\"from\">verifyToken.email.from</arg>\n-                                    <arg name=\"subject\">verifyToken.email.subject</arg>\n-                                    <arg name=\"template.html\">verifyToken.email.template.html</arg>\n-                                    <arg name=\"template.txt\">verifyToken.email.template.txt</arg>\n-                                    <arg name=\"parametrize\">false</arg>\n-                                </function>\n-                            </post-functions>\n                         </result>\n                         <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n                     </results>\n@@ -218,11 +77,6 @@\n             </actions>\n         </step>\n         <step name=\"suspended\" id=\"4\">\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-            </pre-functions>\n             <actions>\n                 <action name=\"reactivate\" id=\"4001\">\n                     <results>\n@@ -231,15 +85,6 @@\n                 </action>\n             </actions>\n         </step>\n-        <step name=\"deleted\" id=\"5\">\n-            <pre-functions>\n-                <function type=\"class\">\n-                    <arg name=\"class.name\">org.syncope.core.workflow.prcsiam.StoreUserIdAsCaller</arg>\n-                </function>\n-            </pre-functions>\n-            <actions>\n-                <common-action id=\"100\"/>\n-            </actions>\n-        </step>\n+        <step name=\"deleted\" id=\"5\"/>\n     </steps>\n </workflow>"},{"sha":"d51ed83e3329e379c05b9cdb731a513f8d86e3b0","filename":"core/src/main/webapp/mailTemplates/generateToken.txt.jsp","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FgenerateToken.txt.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FgenerateToken.txt.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FgenerateToken.txt.jsp?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -1,3 +1,17 @@\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+   http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+under the License.\n+-->\n <%@ page language=\"java\" contentType=\"text/plain\" %>\n Please, confirm your request here: ${param.confirmationLink}.\n "},{"sha":"1531475bc6bd38e077b33b53fff9867391e96a24","filename":"core/src/main/webapp/mailTemplates/registration.txt.jsp","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2Fregistration.txt.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2Fregistration.txt.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2Fregistration.txt.jsp?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -1,3 +1,17 @@\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+   http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+under the License.\n+-->\n <%@ page language=\"java\" contentType=\"text/plain\" %>\n Welcome to Syncope!\n Please, confirm your registration here: ${param.confirmationLink}."},{"sha":"28a840b66099a4b4001efe777499627d9f666b1e","filename":"core/src/main/webapp/mailTemplates/verifyToken.txt.jsp","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FverifyToken.txt.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FverifyToken.txt.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FmailTemplates%2FverifyToken.txt.jsp?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -1,3 +1,17 @@\n+<!--\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+   http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+under the License.\n+-->\n <%@ page language=\"java\" contentType=\"text/plain\" %>\n Your confirmation has been successfully performed.\n "},{"sha":"6469328f8808cb0c0ffa29306f21c5a1a39d37fa","filename":"core/src/test/java/org/syncope/core/test/rest/AbstractTestITCase.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FAbstractTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FAbstractTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FAbstractTestITCase.java?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -26,7 +26,7 @@\n @ContextConfiguration(locations = {\n     \"classpath:persistenceContext.xml\",\n     \"classpath:workflowContext.xml\",\n-    \"file:src/main/webapp/WEB-INF/syncope-core-rest-servlet.xml\"})\n+    \"file:target/syncope/WEB-INF/syncope-core-rest-servlet.xml\"})\n public abstract class AbstractTestITCase {\n \n     protected static final Logger log = LoggerFactory.getLogger("},{"sha":"593c64472537e9107542ff61239f9760736ecaba","filename":"pom.xml","status":"modified","additions":3,"deletions":12,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6276b9b38ec847831d3dd658371d053d7e80f8e6/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6276b9b38ec847831d3dd658371d053d7e80f8e6/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=6276b9b38ec847831d3dd658371d053d7e80f8e6","patch":"@@ -104,9 +104,7 @@\n         <commons-jexl.version>2.0.1</commons-jexl.version>\n         <commons-lang.version>2.5</commons-lang.version>\n         <commons-email.version>1.2</commons-email.version>\n-\n-        <openam.version>snapshot9</openam.version>\n-\n+        \n         <osworkflow.version>2.8.0</osworkflow.version>\n         <propertyset.version>1.3</propertyset.version>\n         <oscore.version>2.2.6</oscore.version>\n@@ -120,6 +118,8 @@\n \n         <wicket.version>1.4.9</wicket.version>\n \n+        <org.apache.cxf.version>2.2.9</org.apache.cxf.version>\n+\n         <commons-logging.version>1.1.1</commons-logging.version>\n         <log4j.version>1.2.16</log4j.version>\n         <slf4j.version>1.5.2</slf4j.version>\n@@ -131,9 +131,6 @@\n         <jetty.version>6.1.24</jetty.version>\n \n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n-\n-        <org.apache.cxf.version>2.2.9</org.apache.cxf.version>\n-\n     </properties>\n \n     <dependencyManagement>\n@@ -184,12 +181,6 @@\n                 <version>${commons-email.version}</version>\n             </dependency>\n \n-            <dependency>\n-                <groupId>com.forgerock.openam</groupId>\n-                <artifactId>clientsdk</artifactId>\n-                <version>${openam.version}</version>\n-            </dependency>\n-\n             <dependency>\n                 <groupId>opensymphony</groupId>\n                 <artifactId>osworkflow</artifactId>"}]}