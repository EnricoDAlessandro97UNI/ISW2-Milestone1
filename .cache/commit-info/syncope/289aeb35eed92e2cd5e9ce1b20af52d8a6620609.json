{"sha":"289aeb35eed92e2cd5e9ce1b20af52d8a6620609","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjI4OWFlYjM1ZWVkOTJlMmNkNWU5Y2UxYjIwYWY1MmQ4YTY2MjA2MDk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-04-02T10:17:58Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-04-02T10:21:41Z"},"message":"[SYNCOPE-1454] Ensuring no duplicated tasks","tree":{"sha":"5e3b80b35f63026a3b77839b2aa7afd2df1f8801","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5e3b80b35f63026a3b77839b2aa7afd2df1f8801"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/289aeb35eed92e2cd5e9ce1b20af52d8a6620609","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/289aeb35eed92e2cd5e9ce1b20af52d8a6620609","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/289aeb35eed92e2cd5e9ce1b20af52d8a6620609","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/289aeb35eed92e2cd5e9ce1b20af52d8a6620609/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"a4636c0443d521ebc193cbf4ee6b4358c64bc0d7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a4636c0443d521ebc193cbf4ee6b4358c64bc0d7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a4636c0443d521ebc193cbf4ee6b4358c64bc0d7"}],"stats":{"total":6,"additions":5,"deletions":1},"files":[{"sha":"94a82bcce9ce67fef3d06d1631601e086ab64ba0","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/propagation/PropagationManagerImpl.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/289aeb35eed92e2cd5e9ce1b20af52d8a6620609/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/289aeb35eed92e2cd5e9ce1b20af52d8a6620609/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java?ref=289aeb35eed92e2cd5e9ce1b20af52d8a6620609","patch":"@@ -211,11 +211,13 @@ public List<PropagationTaskInfo> getUserUpdateTasks(final WorkflowResult<Pair<Us\n         UserUR userUR = wfResult.getResult().getLeft();\n \n         // Propagate password update only to requested resources\n-        List<PropagationTaskInfo> tasks = new ArrayList<>();\n+        List<PropagationTaskInfo> tasks;\n         if (userUR.getPassword() == null) {\n             // a. no specific password propagation request: generate propagation tasks for any resource associated\n             tasks = getUserUpdateTasks(wfResult, false, null);\n         } else {\n+            tasks = new ArrayList<>();\n+\n             // b. generate the propagation task list in two phases: first the ones containing password,\n             // the the rest (with no password)\n             WorkflowResult<Pair<UserUR, Boolean>> pwdWFResult = new WorkflowResult<>(\n@@ -244,6 +246,8 @@ public List<PropagationTaskInfo> getUserUpdateTasks(final WorkflowResult<Pair<Us\n             if (!noPwdWFResult.getPropByRes().isEmpty()) {\n                 tasks.addAll(getUserUpdateTasks(noPwdWFResult, false, pwdResourceNames));\n             }\n+\n+            tasks = tasks.stream().distinct().collect(Collectors.toList());\n         }\n \n         return tasks;"}]}