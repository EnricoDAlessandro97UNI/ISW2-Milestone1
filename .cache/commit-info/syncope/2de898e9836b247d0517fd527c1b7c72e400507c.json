{"sha":"2de898e9836b247d0517fd527c1b7c72e400507c","node_id":"C_kwDOJfYA1toAKDJkZTg5OGU5ODM2YjI0N2QwNTE3ZmQ1MjdjMWI3YzcyZTQwMDUwN2M","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2023-02-24T15:22:18Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2023-02-24T15:22:18Z"},"message":"[SYNCOPE-1733] Fix building","tree":{"sha":"8edde3f6d85b4ec0d6bb5b733f41e5c40b407ebb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/8edde3f6d85b4ec0d6bb5b733f41e5c40b407ebb"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2de898e9836b247d0517fd527c1b7c72e400507c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2de898e9836b247d0517fd527c1b7c72e400507c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2de898e9836b247d0517fd527c1b7c72e400507c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2de898e9836b247d0517fd527c1b7c72e400507c/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"b591939cf1dd1764cb98fb6bb788cb376d2b5d0e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b591939cf1dd1764cb98fb6bb788cb376d2b5d0e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b591939cf1dd1764cb98fb6bb788cb376d2b5d0e"}],"stats":{"total":26,"additions":6,"deletions":20},"files":[{"sha":"34d445743fac133ab79cab8cce03fdc1a0ee3602","filename":"common/am/lib/src/main/java/org/apache/syncope/common/lib/auth/OAuth20AuthModuleConf.java","status":"modified","additions":2,"deletions":12,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOAuth20AuthModuleConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOAuth20AuthModuleConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOAuth20AuthModuleConf.java?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -27,15 +27,13 @@ public class OAuth20AuthModuleConf extends AbstractOIDCAuthModuleConf implements\n     private static final long serialVersionUID = 299820485764241682L;\n \n     protected String authUrl;\n-    \n+\n     protected String profileUrl;\n-    \n+\n     protected Map<String, String> profileAttrs = new LinkedHashMap<>();\n \n     protected boolean withState;\n \n-    protected String profilePath;\n-\n     protected String profileVerb = \"POST\";\n \n     public String getAuthUrl() {\n@@ -62,14 +60,6 @@ public void setWithState(final boolean withState) {\n         this.withState = withState;\n     }\n \n-    public String getProfilePath() {\n-        return profilePath;\n-    }\n-\n-    public void setProfilePath(final String profilePath) {\n-        this.profilePath = profilePath;\n-    }\n-\n     public String getProfileUrl() {\n         return profileUrl;\n     }"},{"sha":"7779241e73cdc47fe8753522720d45c96784eda7","filename":"core/persistence-jpa-json/src/test/resources/domains/MasterContent.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/core%2Fpersistence-jpa-json%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/core%2Fpersistence-jpa-json%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa-json%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -88,7 +88,7 @@ under the License.\n   <AuthModule id=\"DefaultU2FAuthModule\" authModuleState=\"ACTIVE\"\n               description=\"U2F auth module\" jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.U2FAuthModuleConf\",\"expireDevices\":40}'/>\n   <AuthModule id=\"DefaultOAuth20AuthModule\" description=\"OAuth20 auth module\" authModuleOrder=\"0\" \n-              jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.OAuth20AuthModuleConf\",\"clientName\":\"oauth20\",\"clientId\":\"OAUTH20\",\"clientSecret\":\"secret\",\"enabled\":true,\"customParams\":{},\"tokenUrl\":\"https://localhost/oauth2/token\",\"responseType\":\"code\",\"scope\":\"oauth test\",\"userIdAttribute\":\"username\",\"authUrl\":\"https://localhost/oauth2/auth\",\"profileUrl\":\"https://localhost/oauth2/profile\",\"profileAttrs\":{},\"withState\":false,\"profilePath\":null,\"profileVerb\":\"POST\"}' authModuleState=\"ACTIVE\"/>\n+              jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.OAuth20AuthModuleConf\",\"clientName\":\"oauth20\",\"clientId\":\"OAUTH20\",\"clientSecret\":\"secret\",\"enabled\":true,\"customParams\":{},\"tokenUrl\":\"https://localhost/oauth2/token\",\"responseType\":\"code\",\"scope\":\"oauth test\",\"userIdAttribute\":\"username\",\"authUrl\":\"https://localhost/oauth2/auth\",\"profileUrl\":\"https://localhost/oauth2/profile\",\"profileAttrs\":{},\"withState\":false,\"profileVerb\":\"POST\"}' authModuleState=\"ACTIVE\"/>\n \n \n   <!-- Attribute repositories -->"},{"sha":"17a4ef65bfd58b3a461cfe0f9da0bf88a01b611d","filename":"core/persistence-jpa/src/test/resources/domains/MasterContent.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -88,7 +88,7 @@ under the License.\n   <AuthModule id=\"DefaultU2FAuthModule\" authModuleState=\"ACTIVE\"\n               description=\"U2F auth module\" jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.U2FAuthModuleConf\",\"expireDevices\":40}'/>\n   <AuthModule id=\"DefaultOAuth20AuthModule\" description=\"OAuth20 auth module\" authModuleOrder=\"0\"\n-              jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.OAuth20AuthModuleConf\",\"clientName\":\"oauth20\",\"clientId\":\"OAUTH20\",\"clientSecret\":\"secret\",\"enabled\":true,\"customParams\":{},\"tokenUrl\":\"https://localhost/oauth2/token\",\"responseType\":\"code\",\"scope\":\"oauth test\",\"userIdAttribute\":\"username\",\"authUrl\":\"https://localhost/oauth2/auth\",\"profileUrl\":\"https://localhost/oauth2/profile\",\"profileAttrs\":{},\"withState\":false,\"profilePath\":null,\"profileVerb\":\"POST\"}' authModuleState=\"ACTIVE\"/>\n+              jsonConf='{\"_class\":\"org.apache.syncope.common.lib.auth.OAuth20AuthModuleConf\",\"clientName\":\"oauth20\",\"clientId\":\"OAUTH20\",\"clientSecret\":\"secret\",\"enabled\":true,\"customParams\":{},\"tokenUrl\":\"https://localhost/oauth2/token\",\"responseType\":\"code\",\"scope\":\"oauth test\",\"userIdAttribute\":\"username\",\"authUrl\":\"https://localhost/oauth2/auth\",\"profileUrl\":\"https://localhost/oauth2/profile\",\"profileAttrs\":{},\"withState\":false,\"profileVerb\":\"POST\"}' authModuleState=\"ACTIVE\"/>\n \n   <!-- Attribute repositories -->\n   <AttrRepo id=\"DefaultLDAPAttrRepo\" attrRepoState=\"ACTIVE\""},{"sha":"478911174673465b33708de8661153f4ec9d1aa8","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/AuthModuleITCase.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthModuleITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthModuleITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthModuleITCase.java?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -151,7 +151,6 @@ private static AuthModuleTO buildAuthModuleTO(final AuthModuleSupportedType type\n                 OAuth20AuthModuleConf.class.cast(conf).setAuthUrl(\"https://localhost/oauth2/auth\");\n                 OAuth20AuthModuleConf.class.cast(conf).setProfileAttrs(Map.of(\"uid\", \"id\"));\n                 OAuth20AuthModuleConf.class.cast(conf).setProfileUrl(\"https://localhost/oauth2/profile\");\n-                OAuth20AuthModuleConf.class.cast(conf).setProfilePath(\"/info\");\n                 OAuth20AuthModuleConf.class.cast(conf).setTokenUrl(\"https://localhost/oauth2/token\");\n                 OAuth20AuthModuleConf.class.cast(conf).setResponseType(\"code\");\n                 OAuth20AuthModuleConf.class.cast(conf).setScope(\"oauth test\");"},{"sha":"f22ede9ff6cc3341c835ec9ff33893feb675b6a2","filename":"fit/wa-reference/src/test/java/org/apache/syncope/fit/sra/OIDCSRAITCase.java","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FOIDCSRAITCase.java?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -280,7 +280,5 @@ public void rest() throws IOException, ParseException {\n         String withHost = client.getBaseURI().toASCIIString().replace(\"/protected\", \"\");\n         String withIP = withHost.replace(\"localhost\", \"127.0.0.1\");\n         assertThat(json.get(\"url\").asText(), is(oneOf(withHost, withIP)));\n-\n-        assertEquals(client.getBaseURI().toASCIIString().replace(\"/protected\", \"\"), json.get(\"url\").asText());\n     }\n }"},{"sha":"553cd0ae2b7d349eebdfb494608c70f39f5314ed","filename":"wa/bootstrap/src/main/java/org/apache/syncope/wa/bootstrap/AuthModulePropertySourceMapper.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapper.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapper.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapper.java?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -160,12 +160,12 @@ public Map<String, Object> map(final AuthModuleTO authModuleTO, final OAuth20Aut\n         props.setCustomParams(conf.getCustomParams());\n         props.setAuthUrl(conf.getAuthUrl());\n         props.setProfileAttrs(conf.getProfileAttrs());\n-        props.setProfilePath(conf.getProfilePath());\n+        props.setProfileVerb(conf.getProfileVerb());\n         props.setProfileUrl(conf.getProfileUrl());\n         props.setTokenUrl(conf.getTokenUrl());\n         props.setResponseType(conf.getResponseType());\n         props.setScope(conf.getScope());\n-        props.setPrincipalAttributeId(conf.getUserIdAttribute());\n+        props.setPrincipalIdAttribute(conf.getUserIdAttribute());\n         props.setWithState(conf.isWithState());\n         \n         return prefix(\"cas.authn.pac4j.oauth2[].\", CasCoreConfigurationUtils.asMap(props));"},{"sha":"88d0452182a025de8a0e851ddff6cba9b8848559","filename":"wa/bootstrap/src/test/java/org/apache/syncope/wa/bootstrap/AuthModulePropertySourceMapperTest.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2de898e9836b247d0517fd527c1b7c72e400507c/wa%2Fbootstrap%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapperTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2de898e9836b247d0517fd527c1b7c72e400507c/wa%2Fbootstrap%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapperTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fbootstrap%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FAuthModulePropertySourceMapperTest.java?ref=2de898e9836b247d0517fd527c1b7c72e400507c","patch":"@@ -64,7 +64,6 @@ public void mapOAuth20AuthModuleConf() {\n         conf.setAuthUrl(\"https://localhost/oauth2/auth\");\n         conf.setProfileAttrs(Map.of(\"uid\", \"id\"));\n         conf.setProfileUrl(\"https://localhost/oauth2/profile\");\n-        conf.setProfilePath(\"/info\");\n         conf.setTokenUrl(\"https://localhost/oauth2/token\");\n         conf.setResponseType(\"code\");\n         conf.setScope(\"cns\");"}]}