{"sha":"660b0ce88b22152e816b7c7812eb6e1bdfdc496b","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjY2MGIwY2U4OGIyMjE1MmU4MTZiN2M3ODEyZWI2ZTFiZGZkYzQ5NmI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-07-23T08:53:04Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-07-23T08:53:04Z"},"message":"[SYNCOPE-684] The StatusMod for UserMod#pwdPropRequest was not set at all from UserSelfModalPage","tree":{"sha":"02157ef9d59fb137e9286660e8784678b06dc515","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/02157ef9d59fb137e9286660e8784678b06dc515"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/660b0ce88b22152e816b7c7812eb6e1bdfdc496b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/660b0ce88b22152e816b7c7812eb6e1bdfdc496b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/660b0ce88b22152e816b7c7812eb6e1bdfdc496b","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"5d2817ad6f76e22ce82934c5238d5732fa39180a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5d2817ad6f76e22ce82934c5238d5732fa39180a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5d2817ad6f76e22ce82934c5238d5732fa39180a"}],"stats":{"total":48,"additions":25,"deletions":23},"files":[{"sha":"9ae618b8307cf2d23a8696889d43cf1c2746ac13","filename":"console/src/main/java/org/apache/syncope/console/pages/EditUserModalPage.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -76,9 +76,8 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n         }\n     }\n \n-    @SuppressWarnings(\"rawtypes\")\n     @Override\n-    protected void submitAction(final AjaxRequestTarget target, final Form form) {\n+    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n         final UserTO updatedUserTO = (UserTO) form.getModelObject();\n \n         if (updatedUserTO.getId() == 0) {\n@@ -97,9 +96,8 @@ protected void submitAction(final AjaxRequestTarget target, final Form form) {\n         }\n     }\n \n-    @SuppressWarnings(\"rawtypes\")\n     @Override\n-    protected void closeAction(final AjaxRequestTarget target, final Form form) {\n+    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n         setResponsePage(new ResultStatusModalPage.Builder(window, userTO).mode(mode).build());\n     }\n }"},{"sha":"faca8181023040f279df0318b7bb8a2dd613af39","filename":"console/src/main/java/org/apache/syncope/console/pages/UserModalPage.java","status":"modified","additions":7,"deletions":11,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -78,8 +78,7 @@ public UserModalPage(final PageReference callerPageRef, final ModalWindow window\n         fragment.setOutputMarkupId(true);\n         add(fragment);\n \n-        storePassword = new AjaxCheckBoxPanel(\"storePassword\", \"storePassword\",\n-                new Model<Boolean>(Boolean.TRUE));\n+        storePassword = new AjaxCheckBoxPanel(\"storePassword\", \"storePassword\", new Model<Boolean>(Boolean.TRUE));\n     }\n \n     public UserTO getUserTO() {\n@@ -90,18 +89,17 @@ public void setUserTO(final UserTO userTO) {\n         this.userTO = userTO;\n     }\n \n-    @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n-    protected Form setupEditPanel() {\n+    protected Form<UserTO> setupEditPanel() {\n         fragment.add(new Label(\"id\", userTO.getId() == 0\n                 ? \"\"\n                 : userTO.getUsername()));\n \n         fragment.add(new Label(\"new\", userTO.getId() == 0\n                 ? new ResourceModel(\"new\")\n-                : new Model(\"\")));\n+                : new Model<String>(\"\")));\n \n-        final Form form = new Form(\"UserForm\");\n-        form.setModel(new CompoundPropertyModel(userTO));\n+        final Form<UserTO> form = new Form<UserTO>(\"UserForm\");\n+        form.setModel(new CompoundPropertyModel<UserTO>(userTO));\n \n         //--------------------------------\n         // User details\n@@ -222,9 +220,7 @@ protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n         };\n     }\n \n-    @SuppressWarnings(\"rawtypes\")\n-    protected abstract void submitAction(AjaxRequestTarget target, Form form);\n+    protected abstract void submitAction(AjaxRequestTarget target, Form<?> form);\n \n-    @SuppressWarnings(\"rawtypes\")\n-    protected abstract void closeAction(AjaxRequestTarget target, Form form);\n+    protected abstract void closeAction(AjaxRequestTarget target, Form<?> form);\n }"},{"sha":"2c1407e515d09a81b8077c53b03f3d27a4e0ae7b","filename":"console/src/main/java/org/apache/syncope/console/pages/UserSelfModalPage.java","status":"modified","additions":12,"deletions":2,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserSelfModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserSelfModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserSelfModalPage.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -19,6 +19,8 @@\n package org.apache.syncope.console.pages;\n \n import org.apache.commons.lang3.SerializationUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.mod.StatusMod;\n import org.apache.syncope.common.mod.UserMod;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.util.AttributableOperations;\n@@ -50,14 +52,22 @@ public UserSelfModalPage(final PageReference callerPageRef, final ModalWindow wi\n     }\n \n     @Override\n-    protected void submitAction(final AjaxRequestTarget target, final Form form) {\n+    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n         final UserTO updatedUserTO = (UserTO) form.getModelObject();\n \n         if (updatedUserTO.getId() == 0) {\n             restClient.create(updatedUserTO, storePassword.getModelObject());\n         } else {\n             final UserMod userMod = AttributableOperations.diff(updatedUserTO, initialUserTO);\n \n+            if (StringUtils.isNotBlank(userMod.getPassword())) {\n+                StatusMod pwdPropRequest = new StatusMod();\n+                pwdPropRequest.setOnSyncope(true);\n+                pwdPropRequest.getResourceNames().addAll(updatedUserTO.getResources());\n+\n+                userMod.setPwdPropRequest(pwdPropRequest);\n+            }\n+\n             // update user only if it has changed\n             if (!userMod.isEmpty()) {\n                 restClient.update(userMod);\n@@ -66,7 +76,7 @@ protected void submitAction(final AjaxRequestTarget target, final Form form) {\n     }\n \n     @Override\n-    protected void closeAction(final AjaxRequestTarget target, final Form form) {\n+    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n         setResponsePage(new ResultStatusModalPage.Builder(window, userTO).mode(mode).build());\n     }\n }"},{"sha":"b12a0ed9cda5f2482eae28aeabc783899063169a","filename":"console/src/main/java/org/apache/syncope/console/pages/UserTemplateModalPage.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserTemplateModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserTemplateModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserTemplateModalPage.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -48,13 +48,13 @@ public UserTemplateModalPage(final PageReference callerPageRef, final ModalWindo\n     }\n \n     @Override\n-    protected void submitAction(final AjaxRequestTarget target, final Form form) {\n+    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n         syncTaskTO.setUserTemplate((UserTO) form.getModelObject());\n         taskRestClient.updateSyncTask(syncTaskTO);\n     }\n \n     @Override\n-    protected void closeAction(final AjaxRequestTarget target, final Form form) {\n+    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n         window.close(target);\n     }\n }"},{"sha":"d424295738b3564dfaf1b5aff0e4c9395ef2839d","filename":"console/src/main/java/org/apache/syncope/console/pages/ViewUserModalPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FViewUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FViewUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FViewUserModalPage.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -43,7 +43,7 @@ protected AjaxButton getOnSubmit() {\n     }\n \n     @Override\n-    protected void submitAction(final AjaxRequestTarget target, final Form form) {\n+    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n         // No submit allowed, read-only form\n     }\n }"},{"sha":"d1c7cec2223d3b93cc18a3862670586d3e41552d","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/UserDetailsPanel.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserDetailsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660b0ce88b22152e816b7c7812eb6e1bdfdc496b/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserDetailsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserDetailsPanel.java?ref=660b0ce88b22152e816b7c7812eb6e1bdfdc496b","patch":"@@ -20,8 +20,6 @@\n \n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.console.commons.JexlHelpUtil;\n-import org.apache.syncope.console.pages.UserModalPage;\n-import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxPasswordFieldPanel;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.apache.syncope.console.wicket.markup.html.form.FieldPanel;\n@@ -43,7 +41,7 @@ public class UserDetailsPanel extends Panel {\n \n     private static final long serialVersionUID = 6592027822510220463L;\n \n-    public UserDetailsPanel(final String id, final UserTO userTO, final Form form, final boolean resetPassword,\n+    public UserDetailsPanel(final String id, final UserTO userTO, final Form<?> form, final boolean resetPassword,\n             final boolean templateMode) {\n \n         super(id);"}]}