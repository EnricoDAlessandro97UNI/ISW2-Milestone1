{"sha":"c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM5OTVlNWQ5ZTAzOWNmZTAyZDc0ZWU2ZDY1MzVkNGE5MmRmYmM3ZDM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-02T10:50:47Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-02T10:50:47Z"},"message":"Updating docs with OpenJPA customization","tree":{"sha":"9af9d90b9ab11ea3c5b71932c5a0055f9c063422","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/9af9d90b9ab11ea3c5b71932c5a0055f9c063422"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"e4c92705c6fb918bddd8859681071b6a4610dddd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e4c92705c6fb918bddd8859681071b6a4610dddd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e4c92705c6fb918bddd8859681071b6a4610dddd"}],"stats":{"total":199,"additions":137,"deletions":62},"files":[{"sha":"c91ff53a4984c18b7a328fd7f76ccb1b1ab4ecb6","filename":"src/main/asciidoc/reference-guide/architecture/core.adoc","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Fcore.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Fcore.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Fcore.adoc?ref=c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","patch":"@@ -36,7 +36,7 @@ An <<swagger,extension>> is also available, providing full http://swagger.io/[Sw\n which enables in-browser access to all the REST endpoints defined.\n \n At a technical level, the RESTful interface is a fully-compliant \n-https://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services[JAX-RS 2.0^] implementation based on \n+https://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services[JAX-RS 2.1^] implementation based on \n http://cxf.apache.org[Apache CXF^], natively dealing either with JSON, YAML and XML payloads.\n \n More details are available in the dedicated <<restful-services,usage>> section.\n@@ -87,9 +87,10 @@ https://camunda.org/[Camunda^] or http://jbpm.jboss.org/[jBPM^], can be written\n ==== Persistence\n \n All data (users, groups, attributes, resources, ...) is internally managed at a high level using a standard \n-https://en.wikipedia.org/wiki/Java_Persistence_API[JPA 2.0^] approach. The data is persisted into an underlying \n+https://en.wikipedia.org/wiki/Java_Persistence_API[JPA 2.0^] approach based on http://openjpa.apache.org[Apache OpenJPA^].\n+The data is persisted into an underlying \n database, referred to as *_Internal Storage_*. Consistency is ensured via the comprehensive\n-http://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/transaction.html[transaction management^] \n+https://docs.spring.io/spring/docs/5.1.x/spring-framework-reference/data-access.html#transaction[transaction management^] \n provided by the Spring Framework.\n \n Globally, this offers the ability to easily scale up to a million entities and at the same time allows great portability"},{"sha":"2c08f4c169cfbfbcf71d8372e16991c08c333e30","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/customization.adoc","status":"modified","additions":128,"deletions":54,"changes":182,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc?ref=c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","patch":"@@ -30,9 +30,8 @@ Once the project has been created from the provided Maven archetype, the generat\n adding new features or replacing existing components.\n \n [[override-behavior]]\n-[TIP]\n .Override behavior\n-====\n+****\n As a rule of thumb, any file of the local project will take precedence over a file with the same name in the same\n directory of the standard Apache Syncope release.\n \n@@ -60,8 +59,40 @@ ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n https://github.com/apache/syncope/blob/master/client/console/src/main/resources/org/apache/syncope/client/console/pages/BasePage.html[BasePage.html^].\n endif::[]\n \n-This general behavior might have exceptions, as highlighted below.\n-====\n+This general behavior might have exceptions: when you need to customize one of the Spring context definitions, say\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/core/spring/src/main/resources/securityContext.xml[securityContext.xml^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/core/spring/src/main/resources/securityContext.xml[securityContext.xml^]\n+endif::[]\n+for example, you will also need to replace the following text in `core/src/main/webapp/WEB-INF/web.xml`,\n+\n+....\n+classpath*:/coreContext.xml\n+classpath*:/securityContext.xml\n+classpath*:/logicContext.xml\n+classpath*:/restCXFContext.xml\n+classpath*:/persistenceContext.xml\n+classpath*:/provisioning*Context.xml\n+classpath*:/workflow*Context.xml\n+....\n+\n+with\n+\n+....\n+classpath*:/coreContext.xml\n+classpath:/securityContext.xml\n+classpath*:/logicContext.xml\n+classpath*:/restCXFContext.xml\n+classpath*:/persistenceContext.xml\n+classpath*:/provisioning*Context.xml\n+classpath*:/workflow*Context.xml\n+....\n+\n+to be sure that `core/src/main/resources/securityContext.xml` is picked up. +\n+Please also note that the actual list of Spring context files to include might depend on the configured extensions.\n+****\n \n In general, the Embedded Mode (see the\n ifeval::[\"{backend}\" == \"html5\"]\n@@ -195,54 +226,16 @@ be provided - under `core/src/main/java` if Java - for the following components:\n * <<jwtssoprovider,JWT SSO providers>>\n * <<audit-appenders, audit appenders>>\n \n-[[new-rest-endpoints]]\n-[TIP]\n-.New REST endpoints\n-====\n-Adding a new REST endpoint involves several operations:\n+[discrete]\n+===== Customize OpenJPA settings\n \n-. create - in an extension's `rest-api` module or under `common` otherwise - a Java interface with package\n-`org.apache.syncope.common.rest.api.service` and proper JAX-RS annotations; check\n-ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/CamelRouteService.java[CamelRouteService^]\n-endif::[]\n-ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/ext/camel/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/CamelRouteService.java[CamelRouteService^]\n-endif::[]\n-for reference;\n-. if needed, define supporting payload objects - in an extension's `common-lib` module or under `common` otherwise;\n-check\n-ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/common-lib/src/main/java/org/apache/syncope/common/lib/to/CamelRouteTO.java[CamelRouteTO^]\n-endif::[]\n-ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/ext/camel/common-lib/src/main/java/org/apache/syncope/common/lib/to/CamelRouteTO.java[CamelRouteTO^]\n-endif::[]\n-for reference;\n-. implement - in an extension's `rest-cxf` module or under `core` otherwise -  the interface defined above in a Java\n-class with package `org.apache.syncope.core.rest.cxf.service`; check\n-ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/CamelRouteServiceImpl.java[CamelRouteServiceImpl^]\n-endif::[]\n-ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/ext/camel/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/CamelRouteServiceImpl.java[CamelRouteServiceImpl^]\n-endif::[]\n-for reference.\n+Apache OpenJPA is at the core of the <<persistence,persistence>> layer; its configuration can be tweaked under several\n+aspects - including http://openjpa.apache.org/builds/3.0.0/apache-openjpa/docs/ref_guide_caching.html[caching^] for\n+example, to best suit the various environments.\n \n-By following such conventions, the new REST endpoint will be automatically picked up alongside the default services.\n-====\n+In case you need to alter the standard settings provided, proceed as follows.\n \n-[WARNING]\n-====\n-The <<override-behavior,override behavior>> might have exceptions; if you need to customize one of the\n-Spring context definitions. For example, if you want to customize \n-ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/core/spring/src/main/resources/securityContext.xml[securityContext.xml^]\n-endif::[]\n-ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/core/spring/src/main/resources/securityContext.xml[securityContext.xml^]\n-endif::[]\n-, you will also need to replace the following text in `core/src/main/webapp/WEB-INF/web.xml`,\n+Replace\n \n ....\n classpath*:/coreContext.xml\n@@ -258,16 +251,63 @@ with\n \n ....\n classpath*:/coreContext.xml\n-classpath:/securityContext.xml\n+classpath*:/securityContext.xml\n classpath*:/logicContext.xml\n-classpath*:/restCXFContext.xml\n-classpath*:/persistenceContext.xml\n+classpath:/restCXFContext.xml\n+classpath:/persistenceContext.xml\n classpath*:/provisioning*Context.xml\n classpath*:/workflow*Context.xml\n ....\n \n-to be sure that `core/src/main/resources/securityContext.xml` is picked up. +\n-Please also note that the actual list of Spring context files to include might depend on the configured extensions.\n+in `core/src/main/webapp/WEB-INF/web.xml`.\n+\n+Download\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n+endif::[]\n+and save it under `core/src/main/resources/`.\n+\n+Download\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/core/persistence-jpa/src/main/resources/domains.xml\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/core/persistence-jpa/src/main/resources/domains.xml[domains.xml^]\n+endif::[]\n+and save it under `core/src/main/resources/`.\n+\n+Now you can add any OpenJPA configuration property in one of domains configuration files as\n+`core/src/main/resources/domains/MasterDomain.xml` as follows, for the `EntityManagerFactory` bean:\n+\n+[source,xml]\n+....\n+<property name=\"jpaPropertyMap\">\n+  <map>\n+    <entry key=\"openjpa.DataCache\" value=\"true(Lru=true)\"/>\n+    <entry key=\"openjpa.QueryCache\" value=\"true(Lru=true)\"/>\n+  </map>\n+</property>\n+....\n+\n+[WARNING]\n+====\n+The OpenJPA documentation's XML snippets refer to a different configuration style; for example, when used in\n+one of domains configuration files as `MasterDomain.xml`, this:\n+\n+[source,xml]\n+....\n+<property name=\"openjpa.DataCache\" value=\"true\"/>\n+....\n+\n+becomes:\n+\n+[source,xml]\n+....\n+<entry key=\"openjpa.DataCache\" value=\"true\"/>\n+....\n ====\n \n [discrete]\n@@ -466,6 +506,40 @@ Add the following dependencies to `core/pom.xml`:\n </dependency>\n ----\n \n+[discrete]\n+===== New REST endpoints\n+Adding a new REST endpoint involves several operations:\n+\n+. create - in an extension's `rest-api` module or under `common` otherwise - a Java interface with package\n+`org.apache.syncope.common.rest.api.service` and proper JAX-RS annotations; check\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/CamelRouteService.java[CamelRouteService^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/ext/camel/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/CamelRouteService.java[CamelRouteService^]\n+endif::[]\n+for reference;\n+. if needed, define supporting payload objects - in an extension's `common-lib` module or under `common` otherwise;\n+check\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/common-lib/src/main/java/org/apache/syncope/common/lib/to/CamelRouteTO.java[CamelRouteTO^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/ext/camel/common-lib/src/main/java/org/apache/syncope/common/lib/to/CamelRouteTO.java[CamelRouteTO^]\n+endif::[]\n+for reference;\n+. implement - in an extension's `rest-cxf` module or under `core` otherwise -  the interface defined above in a Java\n+class with package `org.apache.syncope.core.rest.cxf.service`; check\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/ext/camel/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/CamelRouteServiceImpl.java[CamelRouteServiceImpl^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/ext/camel/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/CamelRouteServiceImpl.java[CamelRouteServiceImpl^]\n+endif::[]\n+for reference.\n+\n+By following such conventions, the new REST endpoint will be automatically picked up alongside the default services.\n+\n [[customization-console]]\n ==== Console\n "},{"sha":"c79af0cfa39b198e3cd1f4f3f93d03bdb7a4afc3","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/highavailability.adoc","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fhighavailability.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fhighavailability.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fhighavailability.adoc?ref=c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","patch":"@@ -40,7 +40,7 @@ see the OpenJPA documentation for reference.\n [WARNING]\n ====\n The http://openjpa.apache.org/builds/3.0.0/apache-openjpa/docs/ref_guide_event.html[OpenJPA documentation^]'s XML\n-snippets refer to a different configuration style; for example, when used in persistence.properties`, this:\n+snippets refer to a different configuration style; for example, when used in `persistence.properties`, this:\n \n [source,xml]\n ...."},{"sha":"e9b45949e5f9c54d87de0092e5db2285a9a30580","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/javaeecontainer.adoc","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc?ref=c995e5d9e039cfe02d74ee6d6535d4a92dfbc7d3","patch":"@@ -188,19 +188,19 @@ and save it under `core/src/main/resources/`.\n \n Download\n ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/fit/core-reference/src/main/resources/jboss/domains.xml[domains.xml^]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n endif::[]\n ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/fit/core-reference/src/main/resources/jboss/domains.xml[domains.xml^]\n+https://github.com/apache/syncope/blob/master/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n endif::[]\n and save it under `core/src/main/resources/`.\n \n Download\n ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/fit/core-reference/src/main/resources/jboss/domains.xml[domains.xml^]\n endif::[]\n ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/core/persistence-jpa/src/main/resources/persistenceContext.xml[persistenceContext.xml^]\n+https://github.com/apache/syncope/blob/master/fit/core-reference/src/main/resources/jboss/domains.xml[domains.xml^]\n endif::[]\n and save it under `core/src/main/resources/`.\n "}]}