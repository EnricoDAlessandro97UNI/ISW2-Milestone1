{"sha":"53c54d7f13f2a60a5f44519bcc251bad097b0c28","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjUzYzU0ZDdmMTNmMmE2MGE1ZjQ0NTE5YmNjMjUxYmFkMDk3YjBjMjg=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2017-06-27T15:37:43Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2017-06-27T15:38:13Z"},"message":"[SYNCOPE-1130] fix the issue by handling NPE + fix a further NPE issue aoccurring in case of missing information during user approval (case of test user)","tree":{"sha":"ccd3881937e152fe4aeecb6441acea991299b710","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ccd3881937e152fe4aeecb6441acea991299b710"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/53c54d7f13f2a60a5f44519bcc251bad097b0c28","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/53c54d7f13f2a60a5f44519bcc251bad097b0c28","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/53c54d7f13f2a60a5f44519bcc251bad097b0c28","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/53c54d7f13f2a60a5f44519bcc251bad097b0c28/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"cfb6c638d570536233743cca16a5498dcceea6ce","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cfb6c638d570536233743cca16a5498dcceea6ce","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/cfb6c638d570536233743cca16a5498dcceea6ce"}],"stats":{"total":17,"additions":16,"deletions":1},"files":[{"sha":"2d169f66e22ad08b290ef929cfdc86a75404651a","filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDetails.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java?ref=53c54d7f13f2a60a5f44519bcc251bad097b0c28","patch":"@@ -41,6 +41,11 @@ public ApprovalDetails(final PageReference pageRef, final WorkflowFormTO formTO)\n         if (formTO.getUserPatch() == null) {\n             newUserTO = formTO.getUserTO();\n             previousUserTO = null;\n+        } else if (formTO.getUserTO() == null) {\n+            // make it stronger by handling NPE in case of test users or missing approval info\n+            previousUserTO = new UserTO();\n+            previousUserTO.setKey(formTO.getUserPatch().getKey());\n+            newUserTO = AnyOperations.patch(previousUserTO, formTO.getUserPatch());\n         } else {\n             formTO.getUserTO().setKey(formTO.getUserPatch().getKey());\n             newUserTO = AnyOperations.patch(formTO.getUserTO(), formTO.getUserPatch());"},{"sha":"d1c204cabfbc21403aed59546c8a15e73d51873c","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Realms.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java?ref=53c54d7f13f2a60a5f44519bcc251bad097b0c28","patch":"@@ -33,6 +33,7 @@\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n import org.apache.syncope.client.console.wizards.any.ResultPage;\n import org.apache.syncope.common.lib.to.AnyTO;\n+import org.apache.syncope.common.lib.to.ProvisioningResult;\n import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.syncope.common.lib.to.TemplatableTO;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -194,8 +195,10 @@ public void onClose(final AjaxRequestTarget target) {\n                         target.add(realmChoicePanel.reloadRealmTree(target));\n \n                         if (modal.getContent() instanceof ResultPage) {\n+                            Serializable result = ResultPage.class.cast(modal.getContent()).getResult();\n+\n                             updateRealmContent(RealmTO.class.cast(\n-                                    ResultPage.class.cast(modal.getContent()).getItem()), selectedIndex);\n+                                    ProvisioningResult.class.cast(result).getEntity()), selectedIndex);\n                             target.add(content);\n                         }\n "},{"sha":"a195b8a2d10c10cfe5076d27fdc24d7930d7ba09","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/ResultPage.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FResultPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53c54d7f13f2a60a5f44519bcc251bad097b0c28/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FResultPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FResultPage.java?ref=53c54d7f13f2a60a5f44519bcc251bad097b0c28","patch":"@@ -33,10 +33,13 @@\n \n     private final T item;\n \n+    private final Serializable result;\n+\n     public ResultPage(final T item, final Serializable result) {\n         super(BaseModal.CONTENT_ID);\n         setOutputMarkupId(true);\n         this.item = item;\n+        this.result = result;\n \n         add(customResultBody(\"customResultBody\", item, result));\n \n@@ -64,4 +67,8 @@ public void onClick(final AjaxRequestTarget target, final T ignore) {\n     public T getItem() {\n         return this.item;\n     }\n+\n+    public Serializable getResult() {\n+        return result;\n+    }\n }"}]}