{"sha":"2b61a46603f11cfd887cfd8f0255cef0ea54400e","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjJiNjFhNDY2MDNmMTFjZmQ4ODdjZmQ4ZjAyNTVjZWYwZWE1NDQwMGU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-02-10T15:27:09Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-02-10T15:42:15Z"},"message":"Improving Schema Type's search bar","tree":{"sha":"23aa71fab3da025f77e81bf19e0e1467465efa15","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/23aa71fab3da025f77e81bf19e0e1467465efa15"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2b61a46603f11cfd887cfd8f0255cef0ea54400e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2b61a46603f11cfd887cfd8f0255cef0ea54400e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2b61a46603f11cfd887cfd8f0255cef0ea54400e","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2b61a46603f11cfd887cfd8f0255cef0ea54400e/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"15838a962ac6814bf392ba86b50f73b2d426ae29","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/15838a962ac6814bf392ba86b50f73b2d426ae29","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/15838a962ac6814bf392ba86b50f73b2d426ae29"}],"stats":{"total":116,"additions":43,"deletions":73},"files":[{"sha":"6cf177f9e14170d362ce52f577ac361e006a2032","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/DirectoryPanel.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -268,11 +268,11 @@ public void updateResultTable(final AjaxRequestTarget target) {\n         }\n     }\n \n-    private void updateResultTable(final boolean create) {\n+    protected void updateResultTable(final boolean create) {\n         updateResultTable(create, rows);\n     }\n \n-    private void updateResultTable(final boolean create, final int rows) {\n+    protected void updateResultTable(final boolean create, final int rows) {\n         dataProvider = dataProvider();\n \n         final int currentPage = Optional.ofNullable(resultTable)\n@@ -294,9 +294,9 @@ protected ActionLinksTogglePanel<T> getTogglePanel() {\n                 return DirectoryPanel.this.getTogglePanel();\n             }\n \n-        }.\n-                setColumns(getColumns()).\n-                setRowsPerPage(rows).setBatches(getBatches(), restClient, itemKeyFieldName).\n+        }.setColumns(getColumns()).\n+                setRowsPerPage(rows).\n+                setBatches(getBatches(), restClient, itemKeyFieldName).\n                 setContainer(container);\n \n         if (!checkBoxEnabled) {"},{"sha":"390a453584f43cd1dae5a8e71a57f3316945360e","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/SchemaTypePanel.java","status":"modified","additions":7,"deletions":5,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemaTypePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemaTypePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemaTypePanel.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -238,11 +238,13 @@ public void onEvent(final IEvent<?> event) {\n             AjaxRequestTarget target = payload.getTarget();\n \n             keyword = payload.getKeyword();\n-            if (!keyword.startsWith(\"*\")) {\n-                keyword = '*' + keyword;\n-            }\n-            if (!keyword.endsWith(\"*\")) {\n-                keyword = keyword + '*';\n+            if (StringUtils.isNotBlank(keyword)) {\n+                if (!StringUtils.startsWith(keyword, \"*\")) {\n+                    keyword = \"*\" + keyword;\n+                }\n+                if (!StringUtils.endsWith(keyword, \"*\")) {\n+                    keyword = keyword + \"*\";\n+                }\n             }\n \n             updateResultTable(target);"},{"sha":"24c49709a726ed6a3e877446d09150d8324cd5f3","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/SchemasPanel.java","status":"modified","additions":15,"deletions":54,"changes":69,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -24,14 +24,9 @@\n import org.apache.syncope.client.ui.commons.wicket.markup.html.bootstrap.tabs.Accordion;\n import org.apache.syncope.client.ui.commons.markup.html.form.AjaxTextFieldPanel;\n import org.apache.syncope.common.lib.types.SchemaType;\n-import org.apache.wicket.AttributeModifier;\n-import org.apache.wicket.Component;\n import org.apache.wicket.PageReference;\n-import org.apache.wicket.ajax.AjaxEventBehavior;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.ajax.attributes.AjaxCallListener;\n-import org.apache.wicket.ajax.attributes.AjaxRequestAttributes;\n-import org.apache.wicket.ajax.markup.html.form.AjaxSubmitLink;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.event.Broadcast;\n import org.apache.wicket.extensions.markup.html.tabs.AbstractTab;\n import org.apache.wicket.extensions.markup.html.tabs.ITab;\n@@ -44,71 +39,37 @@ public class SchemasPanel extends Panel {\n \n     private static final long serialVersionUID = -1140213992451232279L;\n \n-    private static final String SEARCH_SUBMIT_LINK = \"searchSubmitLink\";\n-\n-    private final PageReference pageReference;\n+    private final PageReference pageRef;\n \n     public SchemasPanel(final String id, final PageReference pageRef) {\n         super(id);\n \n-        this.pageReference = pageRef;\n+        this.pageRef = pageRef;\n \n-        final Model<String> keywordModel = new Model<>(StringUtils.EMPTY);\n+        Model<String> keywordModel = new Model<>(StringUtils.EMPTY);\n \n         WebMarkupContainer searchBoxContainer = new WebMarkupContainer(\"searchBox\");\n         add(searchBoxContainer);\n \n-        final Form<?> form = new Form<>(\"form\");\n+        Form<?> form = new Form<>(\"form\");\n         searchBoxContainer.add(form);\n \n-        final AjaxTextFieldPanel searchPanel = new AjaxTextFieldPanel(\n-                \"filter\", \"filter\", keywordModel, true);\n-        form.add(searchPanel.hideLabel().setOutputMarkupId(true));\n+        AjaxTextFieldPanel filter = new AjaxTextFieldPanel(\"filter\", \"filter\", keywordModel, true);\n+        form.add(filter.hideLabel().setOutputMarkupId(true));\n \n-        final AjaxSubmitLink submitLink = new AjaxSubmitLink(\"search\") {\n+        AjaxButton search = new AjaxButton(\"search\") {\n \n-            private static final long serialVersionUID = -1765773642975892072L;\n+            private static final long serialVersionUID = 8390605330558248736L;\n \n             @Override\n-            protected void onAfterSubmit(final AjaxRequestTarget target) {\n-                super.onAfterSubmit(target);\n-\n-                send(SchemasPanel.this, Broadcast.DEPTH,\n+            protected void onSubmit(final AjaxRequestTarget target) {\n+                send(SchemasPanel.this, Broadcast.DEPTH, \n                         new SchemaTypePanel.SchemaSearchEvent(target, keywordModel.getObject()));\n             }\n         };\n-        submitLink.setOutputMarkupId(true);\n-        submitLink.setMarkupId(SEARCH_SUBMIT_LINK);\n-        form.add(submitLink);\n-\n-        searchPanel.getField().add(AttributeModifier.replace(\n-                \"onkeydown\",\n-                Model.of(\"if(event.keyCode == 13) {event.preventDefault();}\")));\n-\n-        searchPanel.getField().add(new AjaxEventBehavior(\"onkeydown\") {\n-\n-            private static final long serialVersionUID = -7133385027739964990L;\n-\n-            @Override\n-            protected void onEvent(final AjaxRequestTarget target) {\n-                target.appendJavaScript(\"$('#\" + SEARCH_SUBMIT_LINK + \"').click();\");\n-            }\n-\n-            @Override\n-            protected void updateAjaxAttributes(final AjaxRequestAttributes attributes) {\n-                super.updateAjaxAttributes(attributes);\n-\n-                attributes.getAjaxCallListeners().add(new AjaxCallListener() {\n-\n-                    private static final long serialVersionUID = 7160235486520935153L;\n-\n-                    @Override\n-                    public CharSequence getPrecondition(final Component component) {\n-                        return \"if (Wicket.Event.keyCode(attrs.event)  == 13) { return true; } else { return false; }\";\n-                    }\n-                });\n-            }\n-        });\n+        search.setOutputMarkupId(true);\n+        form.add(search);\n+        form.setDefaultButton(search);\n \n         Accordion accordion = new Accordion(\"accordionPanel\", buildTabList());\n         accordion.setOutputMarkupId(true);\n@@ -125,7 +86,7 @@ private List<ITab> buildTabList() {\n \n                 @Override\n                 public Panel getPanel(final String panelId) {\n-                    return new SchemaTypePanel(panelId, schemaType, pageReference);\n+                    return new SchemaTypePanel(panelId, schemaType, pageRef);\n                 }\n             });\n         }"},{"sha":"87b2a17097b5ee080f59c8399a55bd71c18102a1","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/search/AbstractSearchPanel.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FAbstractSearchPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FAbstractSearchPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FAbstractSearchPanel.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -85,7 +85,9 @@ public abstract class AbstractSearchPanel extends Panel {\n         protected boolean enableSearch = false;\n \n         protected SearchClausePanel.Customizer customizer = new SearchClausePanel.Customizer() {\n-            private static final long serialVersionUID = 2177241588084108076L;\n+\n+            private static final long serialVersionUID = 4449199405807453441L;\n+\n         };\n \n         protected IEventSink resultContainer;"},{"sha":"179ee1257d7c2994e3e3330d37112f92c3c4f1d9","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/wicket/extensions/markup/html/repeater/data/table/AjaxFallbackDataTable.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fextensions%2Fmarkup%2Fhtml%2Frepeater%2Fdata%2Ftable%2FAjaxFallbackDataTable.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fextensions%2Fmarkup%2Fhtml%2Frepeater%2Fdata%2Ftable%2FAjaxFallbackDataTable.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fextensions%2Fmarkup%2Fhtml%2Frepeater%2Fdata%2Ftable%2FAjaxFallbackDataTable.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -118,7 +118,6 @@ protected ActionLinksTogglePanel<T> getTogglePanel() {\n         return null;\n     }\n \n-\n     @Override\n     protected Item<T> newRowItem(final String id, final int index, final IModel<T> model) {\n         final OddEvenItem<T> item = new OddEvenItem<>(id, index, model);\n@@ -130,7 +129,7 @@ protected Item<T> newRowItem(final String id, final int index, final IModel<T> m\n                 item.add(new AttributeModifier(\"style\", \"cursor: pointer;\"));\n                 item.add(new AjaxEventBehavior(Constants.ON_CLICK) {\n \n-                    private static final long serialVersionUID = 1L;\n+                    private static final long serialVersionUID = -4609215765213990763L;\n \n                     @Override\n                     protected String findIndicatorId() {"},{"sha":"4d258da66cdbd6b24acc9f3faa6250bdfadddaa7","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksTogglePanel.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -126,8 +126,12 @@ public void updateHeader(final AjaxRequestTarget target, final Serializable mode\n     }\n \n     public void toggleWithContent(\n-            final AjaxRequestTarget target, final ActionsPanel<T> actionsPanel, final T modelObject) {\n+            final AjaxRequestTarget target,\n+            final ActionsPanel<T> actionsPanel,\n+            final T modelObject) {\n+\n         updateHeader(target, modelObject);\n+\n         modal.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n \n             private static final long serialVersionUID = 8804221891699487139L;\n@@ -138,7 +142,7 @@ public void onClose(final AjaxRequestTarget target) {\n             }\n         });\n \n-        final Fragment frag = new Fragment(\"actions\", \"actionsFragment\", this);\n+        Fragment frag = new Fragment(\"actions\", \"actionsFragment\", this);\n         frag.setOutputMarkupId(true);\n         frag.add(actionsPanel);\n "},{"sha":"bf3cc469867b35127c748a868dfc7598bc644d74","filename":"client/idrepo/console/src/main/resources/org/apache/syncope/client/console/panels/SchemasPanel.html","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2b61a46603f11cfd887cfd8f0255cef0ea54400e/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FSchemasPanel.html?ref=2b61a46603f11cfd887cfd8f0255cef0ea54400e","patch":"@@ -20,15 +20,17 @@\n   <wicket:panel>\n     <div wicket:id=\"searchBox\">\n       <form wicket:id=\"form\">\n-        <div class=\"form-group input-group\">\n+        <div class=\"input-group margin-bottom\">\n           <span wicket:id=\"filter\">[FILTER]</span>\n-          <span class=\"input-group-addon\">\n-            <a href=\"#\" wicket:id=\"search\"><i class=\"glyphicon glyphicon-search\"></i></a>\n+          <span class=\"input-group-btn\">\n+            <button type=\"button\" class=\"btn btn-default btn-flat\" wicket:id=\"search\">\n+              <span class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"></span>\n+            </button>\n           </span>\n         </div>\n       </form>\n     </div>\n \n     <div wicket:id=\"accordionPanel\"></div>\n   </wicket:panel>\n-</html>\n\\ No newline at end of file\n+</html>"}]}