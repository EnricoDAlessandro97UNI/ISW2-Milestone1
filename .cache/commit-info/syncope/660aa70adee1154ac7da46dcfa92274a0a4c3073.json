{"sha":"660aa70adee1154ac7da46dcfa92274a0a4c3073","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjY2MGFhNzBhZGVlMTE1NGFjN2RhNDZkY2ZhOTIyNzRhMGE0YzMwNzM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-08-12T13:55:29Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-08-12T13:55:35Z"},"message":"[SYNCOPE-700] Notifications","tree":{"sha":"012f6bde8081d2b58721829284fa10a690133ea2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/012f6bde8081d2b58721829284fa10a690133ea2"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/660aa70adee1154ac7da46dcfa92274a0a4c3073","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/660aa70adee1154ac7da46dcfa92274a0a4c3073","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/660aa70adee1154ac7da46dcfa92274a0a4c3073","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/660aa70adee1154ac7da46dcfa92274a0a4c3073/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"577d0577447c341362fcce075c492b5be4e18e3a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/577d0577447c341362fcce075c492b5be4e18e3a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/577d0577447c341362fcce075c492b5be4e18e3a"}],"stats":{"total":180,"additions":172,"deletions":8},"files":[{"sha":"3bd969266adb4a2610c786d41d259de4c5d785b9","filename":"src/main/asciidoc/reference-guide/architecture/architecture.adoc","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Farchitecture.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Farchitecture.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Farchitecture%2Farchitecture.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -60,5 +60,6 @@ Java <<client-library,Client Library>> (the basis of Admin UI, End-user UI and C\n \n ==== Eclipse IDE Plugin\n \n-The Eclipse IDE plugin allows remote management of notification e-mail and report templates, and constitutes an example\n-of a Java application relying on the Client Library for interacting with the Core via REST.\n+The Eclipse IDE plugin allows remote management of <<notification-templates,notification e-mail>> and\n+<<report-templates,report>> templates, and constitutes an example of a Java application relying on the Client Library\n+for interacting with the Core via REST."},{"sha":"5bfe6e9b1e14e50036bff1cb9895c31ceb4d4cad","filename":"src/main/asciidoc/reference-guide/concepts/concepts.adoc","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fconcepts.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fconcepts.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fconcepts.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -36,7 +36,7 @@ include::policies.adoc[]\n \n include::workflow.adoc[]\n \n-=== Notifications\n+include::notifications.adoc[]\n \n === Tasks\n \n@@ -57,6 +57,10 @@ include::workflow.adoc[]\n \n === Reports\n \n+==== Report Templates\n+\n === Audit\n \n+==== Audit Events\n+\n === Domains"},{"sha":"587cdc69be0034b5bfaa615078556fa94f2c046b","filename":"src/main/asciidoc/reference-guide/concepts/externalresources.adoc","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fexternalresources.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fexternalresources.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fexternalresources.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -31,7 +31,7 @@ provisioning. For each entity supported by the related connector bundle (user, g\n \n ==== Connector Instance details\n \n-When defining a connector instance, the following information is to be provided:\n+When defining a connector instance, the following information must be provided:\n \n * connector bundle - one of the several\n https://github.com/Tirasa/ConnId/blob/master/README.md#available-connectors[already available^], or some to be"},{"sha":"605a3db9aec5e663e3dd01635d6db28b5410914b","filename":"src/main/asciidoc/reference-guide/concepts/notifications.adoc","status":"added","additions":152,"deletions":0,"changes":152,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fnotifications.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fnotifications.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fnotifications.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -0,0 +1,152 @@\n+//\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+//\n+=== Notifications\n+\n+Apache Syncope can be instructed to send out notification e-mails when certain <<notification-events,events>> occur.\n+\n+Every notification generates one or more <<tasks-notification,notification tasks>>, holding the actual\n+e-mails to be sent. The tasks are ordinarily scheduled for execution according to the value provided for\n+`notificationjob.cronExpression` - see <<configuration-parameters, below>> for details - and can be saved for later\n+re-execution.\n+\n+When defining a notification, the following information must be provided:\n+\n+* <<notification-templates,notification template>> - template for e-mail generation\n+* sender - e-mail address appearing in the `From` field of the generated e-mail(s)\n+* subject - text used as e-mail subject\n+* recipient e-mail attribute - which user attribute shall be considered as e-mail address for delivery (as users might\n+in principle have different e-mail attributes)\n+* recipient(s) - the actual e-mail recipient(s) which can be specified either as:\n+** list of static e-mail addresses\n+** matching condition to be applied to available users\n+** Java class implementing the\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/notification/NotificationRecipientsProvider.java[NotificationRecipientsProvider^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/notification/NotificationRecipientsProvider.java[NotificationRecipientsProvider^]\n+endif::[]\n+interface\n+* <<notification-events,notification event(s)>> - event(s) triggering the enclosing notification\n+* about - the condition matching Users, Groups or Any Objects which are evaluated for the specified events; for users,\n+the matching entities can be also considered as additional recipients\n+* trace level - control how much tracing (including logs and execution details) shall be carried over during execution\n+of the generated <<tasks-notification,notification tasks>>\n+\n+==== Notification Events\n+\n+Notification (and <<audit-events,Audit>>) events are essentially a mean to identify the invocation of specific methods\n+within the Apache Syncope <<core>>, in line with _join points_ in the\n+https://en.wikipedia.org/wiki/Aspect-oriented_programming[Aspect Oriented Programming (AOP)^].\n+\n+An event is identified by the following five coordinates:\n+\n+. type - which can be one of\n+** `LOGIC`\n+** `TASK`\n+** `PROPAGATION`\n+** `PULL`\n+** `PUSH`\n+** `CUSTOM`\n+. category - the possible values depend on the selected type: for `LOGIC` the <<logic>> components available,\n+for `TASK` the various <<tasks-generic>> Tasks configured, for `PROPAGATION`, `PULL` and `PUSH` the defined Any Types\n+. subcategory - completes category with external resource name, when selecting `PROPAGATION`, `PULL` or `PUSH`\n+. event type - the final identification of the event; depends on the other coordinates\n+. success or failure - whether the current event shall be considered in case of success or failure\n+\n+The admin console provides <<console-configuration-notifications,tooling>> for assisted specification of valid events. \n+\n+[TIP]\n+====\n+An event is uniquely identified by a string of the following form:\n+\n+[source]\n+----\n+[type]:[category]:[subcategory]:[event type]:[SUCCESS|FAILURE]\n+----\n+\n+Some samples:\n+\n+* `[PushTask]:[group]:[resource-db-scripted]:[matchingrule_deprovision]:[SUCCESS]` +\n+successful Group <<provisioning-push,push>> to the external resource `resource-db-scripted`, when deprovisioning\n+matching entities\n+* `[LOGIC]:[RealmLogic]:[]:[create]:[FAILURE]` +\n+unsuccessful Realm creation\n+* `[CUSTOM]:[]:[]:[unexpected identification]:[SUCCESS]` +\n+successful execution of the event identified by the `unexpected identification` string\n+====\n+\n+[NOTE]\n+====\n+Custom events can be used when in need of triggering notifications from non-predefined joint points, as BPMN `userTask`\n+instances within the <<activiti-user-workflow-adapter>>, <<propagationactions>>, <<pushactions>>, <<pullactions>> or\n+other custom code.\n+====\n+\n+==== Notification Templates\n+\n+A notification template is defined as a pair of http://commons.apache.org/proper/commons-jexl/[JEXL^] expressions,\n+to be used respectively for plaintext and HTML e-mails, and is available for selection in the notification specification.\n+\n+[NOTE]\n+====\n+Notification templates can be easily managed either via <<console-configuration-notifications,admin console>> or\n+<<eclipse-ide-plugin>>.\n+====\n+\n+The full power of JEXL expressions - see http://commons.apache.org/proper/commons-jexl/reference/syntax.html[reference^]\n+and http://commons.apache.org/proper/commons-jexl/reference/examples.html[some examples^] - is available. +\n+Among others, the `user` variable, instance of \n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/common/lib/src/main/java/org/apache/syncope/common/lib/to/UserTO.java[UserTO^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/common/lib/src/main/java/org/apache/syncope/common/lib/to/UserTO.java[UserTO^]\n+endif::[]\n+with actual value matching the _about_ condition as introduced above, can be used.\n+\n+.Plaintext notification template\n+====\n+[source]\n+----\n+Hi ${user.plainAttrMap[\"firstname\"].values[0]} ${user.plainAttrMap[\"surname\"].values[0]},\n+  welcome to Syncope!\n+\n+Your username is ${user.username}.\n+Your email address is ${user.plainAttrMap[\"email\"].values[0]}.\n+\n+Best regards.\n+----\n+====\n+\n+.HTML notification template\n+====\n+[source,html]\n+----\n+<html>\n+  <body>\n+    <h3>Hi ${user.plainAttrMap[\"firstname\"].values[0]} ${user.plainAttrMap[\"surname\"].values[0]},\n+      welcome to Syncope!</h3>\n+    <p>Your username is ${user.username}.<br/>\n+    Your email address is ${user.plainAttrMap[\"email\"].values[0]}.</p>\n+    <p>Best regards.</p>\n+  </body>\n+</html>\n+----\n+===="},{"sha":"c18fece55e1e52e104d7836697a6d8a451655b38","filename":"src/main/asciidoc/reference-guide/concepts/policies.adoc","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fpolicies.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -45,7 +45,7 @@ When set for realm R, an account policy is enforced to all Users of R and sub-re\n When set for resource R, an account policy is enforced to all Users that have R assigned.\n ====\n \n-When defining an account policy, the following information is to be provided:\n+When defining an account policy, the following information must be provided:\n \n * max authentication attempts - how many times Users are allowed to fail authentication before getting suspended\n * propagate suspension - when suspended as consequence of too many authentication failures, should Users also be\n@@ -135,7 +135,7 @@ When set for realm R, a password policy is enforced to all Users of R and sub-re\n When set for resource R, a password policy is enforced to all Users that have R assigned.\n ====\n \n-When defining a password policy, the following information is to be provided:\n+When defining a password policy, the following information must be provided:\n \n * allow null password - whether password is mandatory for Users or not\n * history length - how many values shall be considered in the history\n@@ -229,7 +229,7 @@ can be mapped to two distinct Users in Apache Syncope?)\n When set for resource R, a pull policy is enforced to all Users, Groups and Any Objects pulled from R.\n ====\n \n-When defining a pull policy, the following information is to be provided:\n+When defining a pull policy, the following information must be provided:\n \n * conflict resolution action\n ** `IGNORE` - do nothing"},{"sha":"2f5335f2ff42125cd3d7c6eb8f1c550f5d1cd65f","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/adminconsole/configuration.adoc","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fadminconsole%2Fconfiguration.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/660aa70adee1154ac7da46dcfa92274a0a4c3073/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fadminconsole%2Fconfiguration.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fadminconsole%2Fconfiguration.adoc?ref=660aa70adee1154ac7da46dcfa92274a0a4c3073","patch":"@@ -21,40 +21,47 @@\n The configuration tab allows the admin to customize the syncope deployment to fit the needs of the\n organization. It provides the following functionality\n \n+[[console-configuration-audit]]\n Audit::\n \n Allows the admin to inspect the functionality of various components of the syncope deployment.\n \n+[[console-configuration-logs]]\n Logs::\n \n The admin can set the level of logs that are to be displayed. For example, the admin can set it\n to display only the errors of io.swagger, in which case the warnings and information logs will\n not be displayed.\n \n+[[console-configuration-notifications]]\n Notifications::\n \n This allows the admin to set events and corresponding templates for mail notification to be sent\n to the Users. Trace level defines the condition in which an event will trigger the sending of a\n notification. Templates for such notifications can also be added and edited using this tab.\n \n+[[console-configuration-parameters]]\n Parameters::\n \n Presents the user with a list of key value pairs containing variables used in the syncope\n deployment such as token.expireTime and password.cipher.algorithm . These can be edited by the\n admin to further customize the deployment.\n \n+[[console-configuration-policies]]\n Policies::\n \n Allows the admin to define rules for account, passwords and pulls. Accounts and password policies\n are defined using java classes while pull policies are defined from within the console using\n correlation rules.\n \n+[[console-configuration-roles]]\n Roles::\n \n Displays and provides editing functionality for roles and their corresponding entitlements along\n with the realms that they are enforced upon.\n \n-Security Question::\n+[[console-configuration-security-questions]]\n+Security Questions::\n \n The admin can use this to define a set of security questions which the endUsers can choose from\n to allow them to recover their account in case of a forgotten password."}]}