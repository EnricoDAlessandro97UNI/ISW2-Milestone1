{"sha":"89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjg5YmQ0OWRmMGRlOTZmNWU1M2RkMmZkYmNiYjJiYjZiYzIyYjIyMTU=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T15:52:22Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-22T15:52:22Z"},"message":"Enhancement on Wicket Spring integration\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246225 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c36fabb96a7dac061991a7f9a8306a45f7e8ebe0","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c36fabb96a7dac061991a7f9a8306a45f7e8ebe0"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/comments","author":null,"committer":null,"parents":[{"sha":"f4eb1bfb26b8f48c6c769629e3dc96cdca07d7db","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f4eb1bfb26b8f48c6c769629e3dc96cdca07d7db","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f4eb1bfb26b8f48c6c769629e3dc96cdca07d7db"}],"stats":{"total":75,"additions":25,"deletions":50},"files":[{"sha":"528b6ba3d50b2d39ab0179e6e2f9f3526f6974ce","filename":"console/src/main/java/org/syncope/console/SyncopeApplication.java","status":"modified","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java?ref=89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","patch":"@@ -19,27 +19,30 @@\n import org.apache.wicket.Session;\n import org.apache.wicket.protocol.http.WebApplication;\n import org.apache.wicket.spring.injection.annot.SpringComponentInjector;\n+import org.springframework.beans.BeansException;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.ApplicationContextAware;\n import org.syncope.console.pages.HomePage;\n import org.syncope.console.pages.Login;\n-import org.syncope.console.rest.RestClient;\n \n /**\n  * SyncopeApplication class.\n  */\n-public class SyncopeApplication extends WebApplication\n+public class SyncopeApplication extends WebApplication implements ApplicationContextAware\n {\n     SyncopeUser user = null;\n-    RestClient restClient;\n-\n+    \n+    private ApplicationContext ctx;\n+    \n     public SyncopeApplication()\n     {\n     }\n \n     @Override\n     protected void init()\n     {\n-        getResourceSettings().setThrowExceptionOnMissingResource( true );\n         addComponentInstantiationListener(new SpringComponentInjector(this));\n+        getResourceSettings().setThrowExceptionOnMissingResource( true );\n     }\n \n     /**\n@@ -82,12 +85,9 @@ public String getConfigurationType()\n         return DEVELOPMENT;\n     }\n \n-    public RestClient getRestClient() {\n-        return restClient;\n-    }\n-\n-    public void setRestClient(RestClient restClient) {\n-        this.restClient = restClient;\n+    @Override\n+    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n+          this.ctx = applicationContext;\n     }\n \n-}\n+}\n\\ No newline at end of file"},{"sha":"27d9fc9d896716e8efcef3a2d0653ed5ce16f0cf","filename":"console/src/main/java/org/syncope/console/pages/Schema.java","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","patch":"@@ -18,21 +18,20 @@\n import org.apache.wicket.PageParameters;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.console.rest.RestClient;\n-import org.syncope.console.SyncopeApplication;\n \n /**\n  * Schema WebPage.\n  */\n public class Schema extends BasePage\n {\n+    @SpringBean(name = \"restClient\")\n     RestClient restClient;\n \n     public Schema(PageParameters parameters)\n     {\n         super(parameters);\n-        \n-        restClient = ((SyncopeApplication)getApplication()).getRestClient();\n \n         add(new ListView(\"attributesList\",restClient.getAttributesList()) {\n \n@@ -58,8 +57,7 @@ protected void populateItem(ListItem item) {\n             }\n         });\n \n-        //TODO: when core will be fixed change call to restClient.getUserDerivedAttributesList()\n-        add(new ListView(\"userDerivedAttributesList\",restClient.getUserAttributesList()) {\n+        add(new ListView(\"userDerivedAttributesList\",restClient.getUserDerivedAttributesList()) {\n \n             @Override\n             protected void populateItem(ListItem item) {"},{"sha":"4e01abfd579897a2381b9eb8b0a7bd4e349763d5","filename":"console/src/main/java/org/syncope/console/pages/Users.java","status":"modified","additions":6,"deletions":9,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","patch":"@@ -24,15 +24,17 @@\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n import org.apache.wicket.model.Model;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.UserTO;\n-import org.syncope.console.SyncopeApplication;\n import org.syncope.console.rest.RestClient;\n \n /**\n  * Users WebPage.\n  */\n public class Users extends BasePage{\n-     RestClient restClient;\n+\n+    @SpringBean(name = \"restClient\")\n+    RestClient restClient;\n \n     public Users(PageParameters parameters) {\n         super(parameters);\n@@ -41,13 +43,11 @@ public Users(PageParameters parameters) {\n \n         add(new Button(\"newUserBtn\",new Model(getString(\"newUserBtn\"))));\n \n-         restClient = ((SyncopeApplication)getApplication()).getRestClient();\n-\n         final Set<UserTO> users = restClient.getUserList();\n         System.out.println(\"Numero di user: \"+users.size());\n \n-        if(!users.isEmpty()){\n-\n+        if(!users.isEmpty())\n+        {\n \n         List<UserTO> userList = new ArrayList(users);\n \n@@ -61,9 +61,6 @@ protected void populateItem(ListItem item) {\n             });\n             \n         }\n-\n-        UserTO userTO = restClient.getUser();\n-        System.out.println(userTO.getId());\n       \n     }\n }"},{"sha":"6c91a0a2481dfb0932875492a05da26681d2cd5b","filename":"console/src/main/resources/applicationContext.xml","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml?ref=89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","patch":"@@ -14,9 +14,7 @@\n        http://www.springframework.org/schema/tx\n        http://www.springframework.org/schema/tx/spring-tx.xsd\">\n \n-    <bean id=\"syncopeApplication\" class=\"org.syncope.console.SyncopeApplication\">\n-        <property name=\"restClient\" ref=\"restClient\"/>\n-    </bean>\n+    <bean id=\"syncopeApplication\" class=\"org.syncope.console.SyncopeApplication\"/>\n \n     <bean id=\"objectMapper\" class=\"org.codehaus.jackson.map.ObjectMapper\"/>\n         "},{"sha":"f969b724c27d4f208831100f98b1bf1f2cc167f7","filename":"console/src/main/webapp/WEB-INF/web.xml","status":"modified","additions":3,"deletions":21,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=89bd49df0de96f5e53dd2fdbcbb2bb6bc22b2215","patch":"@@ -6,8 +6,6 @@\n \n     <display-name>Syncope console</display-name>\n \n-    <!-- SPRING INTEGRATION START-->\n-\n     <servlet>\n         <servlet-name>SyncopeApplication</servlet-name>\n         <servlet-class>org.apache.wicket.protocol.http.WicketServlet</servlet-class>\n@@ -33,27 +31,11 @@\n         <listener-class>\n \t\t\torg.springframework.web.context.ContextLoaderListener\n         </listener-class>\n-    </listener>\n-\n-    <!-- SPRING INTEGRATION END-->\n-\n-    <!--filter>\n-        <filter-name>SyncopeApplication</filter-name>\n-        <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>\n-        <init-param>\n-            <param-name>applicationClassName</param-name>\n-            <param-value>org.syncope.console.SyncopeApplication</param-value>\n-        </init-param>\n-    </filter>\n-\n-    <filter-mapping>\n-        <filter-name>SyncopeApplication</filter-name>\n-        <url-pattern>/*</url-pattern>\n-    </filter-mapping>\n-\n+    </listener>    \n+    \n     <init-param>\n         <param-name>applicationBean</param-name>\n         <param-value>syncopeApplication</param-value>\n-    </init-param-->\n+    </init-param>\n \n </web-app>"}]}