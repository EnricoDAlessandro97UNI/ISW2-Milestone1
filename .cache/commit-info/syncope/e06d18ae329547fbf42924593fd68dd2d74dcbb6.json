{"sha":"e06d18ae329547fbf42924593fd68dd2d74dcbb6","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmUwNmQxOGFlMzI5NTQ3ZmJmNDI5MjQ1OTNmZDY4ZGQyZDc0ZGNiYjY=","commit":{"author":{"name":"Matteo Alessandroni","email":"matteo.alessandroni@tirasa.net","date":"2017-07-25T14:27:43Z"},"committer":{"name":"Francesco Chicchiricc√≤","email":"ilgrosso@apache.org","date":"2017-07-28T07:50:10Z"},"message":"[SYNCOPE-1167] Preliminary AnyType selection when adding new provision rule - This closes #57","tree":{"sha":"6ea2c1c342002cc76db2513cc4f91d568e4f1301","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6ea2c1c342002cc76db2513cc4f91d568e4f1301"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e06d18ae329547fbf42924593fd68dd2d74dcbb6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e06d18ae329547fbf42924593fd68dd2d74dcbb6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e06d18ae329547fbf42924593fd68dd2d74dcbb6","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e06d18ae329547fbf42924593fd68dd2d74dcbb6/comments","author":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"64ef5bf1800f699168f59fbd27be113c76cd0baa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/64ef5bf1800f699168f59fbd27be113c76cd0baa","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/64ef5bf1800f699168f59fbd27be113c76cd0baa"}],"stats":{"total":459,"additions":362,"deletions":97},"files":[{"sha":"32514ad64a1738ac21e459022623cb137aefd8c6","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/AjaxWizardBuilder.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FAjaxWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FAjaxWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FAjaxWizardBuilder.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -87,7 +87,7 @@ public AjaxWizard<T> build(final AjaxWizard.Mode mode) {\n     public AjaxWizard<T> build(final String id, final AjaxWizard.Mode mode) {\n         this.mode = mode;\n \n-        // ge the specified item if available\n+        // get the specified item if available\n         final T modelObject = newModelObject();\n \n         return new AjaxWizard<T>(id, modelObject, buildModelSteps(modelObject, new WizardModel()), mode, this.pageRef) {"},{"sha":"509dd920693097583ede99dc3bd94469dbe68b2d","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/WizardMgtPanel.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FWizardMgtPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FWizardMgtPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2FWizardMgtPanel.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -296,6 +296,16 @@ protected final WizardMgtPanel<T> enableExitButton() {\n     public MarkupContainer addInnerObject(final Component... childs) {\n         return initialFragment.add(childs);\n     }\n+    \n+    /**\n+     * Add or replace object inside the main container.\n+     *\n+     * @param childs components to be added.\n+     * @return the current panel instance.\n+     */\n+    public MarkupContainer addOrReplaceInnerObject(final Component... childs) {\n+        return initialFragment.addOrReplace(childs);\n+    }\n \n     /**\n      * Add object outside the main container."},{"sha":"9e26700ab8bae8a26df293033930a56d458acecd","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel.java","status":"added","additions":85,"deletions":0,"changes":85,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,85 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.wizards.resources;\n+\n+import java.io.Serializable;\n+import java.util.List;\n+import org.apache.syncope.client.console.pages.BasePage;\n+import org.apache.syncope.client.console.panels.TogglePanel;\n+import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n+import org.apache.wicket.PageReference;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxSubmitLink;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.model.LoadableDetachableModel;\n+import org.apache.wicket.model.PropertyModel;\n+\n+public abstract class ObjectTypeTogglePanel extends TogglePanel<Serializable> {\n+\n+    private static final long serialVersionUID = -1366846136630731264L;\n+\n+    protected PropertyModel<String> typeModel;\n+\n+    private final Form<Object> form;\n+\n+    ObjectTypeTogglePanel(\n+            final String id,\n+            final ResourceProvision item,\n+            final LoadableDetachableModel<List<String>> anyTypes,\n+            final PageReference pageRef) {\n+        super(id, pageRef);\n+\n+        form = new Form<>(\"objectTypeForm\");\n+        addInnerObject(form);\n+\n+        typeModel = new PropertyModel<>(item, \"anyType\");\n+\n+        form.add(new AjaxDropDownChoicePanel<>(\n+                \"type\", \"type\", typeModel, false).\n+                setNullValid(false).\n+                setChoices(anyTypes).\n+                setStyleSheet(\"form-control\").\n+                hideLabel());\n+\n+        form.add(new AjaxSubmitLink(\"changeit\", form) {\n+\n+            private static final long serialVersionUID = -7978723352517770644L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                ObjectTypeTogglePanel.this.onSubmit(typeModel.getObject(), target);\n+                target.add(form);\n+                toggle(target, false);\n+\n+                ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n+            }\n+        });\n+    }\n+\n+    protected abstract void onSubmit(final String type, final AjaxRequestTarget target);\n+\n+    public void setHeaderLabel(final AjaxRequestTarget target) {\n+        setHeader(target, getString(\"type\"));\n+    }\n+}"},{"sha":"2ade6cfbb3f678b8cd85efe363d4e3628b08d60a","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder.java","status":"modified","additions":18,"deletions":66,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -19,25 +19,18 @@\n package org.apache.syncope.client.console.wizards.resources;\n \n import java.io.Serializable;\n-import java.util.ArrayList;\n import java.util.List;\n-import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.ListUtils;\n import org.apache.commons.collections4.Predicate;\n-import org.apache.commons.collections4.Transformer;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.commons.ConnIdSpecialName;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.panels.ProvisionAuxClassesPanel;\n-import org.apache.syncope.client.console.rest.AnyTypeRestClient;\n import org.apache.syncope.client.console.rest.ConnectorRestClient;\n import org.apache.syncope.client.console.wicket.ajax.form.IndicatorAjaxFormComponentUpdatingBehavior;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n-import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxTextFieldPanel;\n-import org.apache.syncope.client.console.wicket.markup.html.form.FieldPanel;\n import org.apache.syncope.client.console.wizards.AjaxWizardBuilder;\n-import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.MappingTO;\n import org.apache.syncope.common.lib.to.ProvisionTO;\n import org.apache.syncope.common.lib.to.ResourceTO;\n@@ -47,7 +40,6 @@\n import org.apache.wicket.extensions.wizard.WizardModel;\n import org.apache.wicket.extensions.wizard.WizardStep;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n@@ -61,36 +53,7 @@ public class ProvisionWizardBuilder extends AjaxWizardBuilder<ResourceProvision>\n \n     private final ResourceTO resourceTO;\n \n-    private final LoadableDetachableModel<List<String>> anyTypes = new LoadableDetachableModel<List<String>>() {\n-\n-        private static final long serialVersionUID = 5275935387613157437L;\n-\n-        @Override\n-        protected List<String> load() {\n-            final List<String> currentlyAdded = new ArrayList<>();\n-\n-            CollectionUtils.collect(resourceTO.getProvisions(), new Transformer<ProvisionTO, String>() {\n-\n-                @Override\n-                public String transform(final ProvisionTO provisionTO) {\n-                    return provisionTO.getAnyType();\n-                }\n-            }, currentlyAdded);\n-\n-            List<String> result = ListUtils.select(new AnyTypeRestClient().list(), new Predicate<String>() {\n-\n-                @Override\n-                public boolean evaluate(final String key) {\n-                    return !currentlyAdded.contains(key);\n-                }\n-            });\n-            if (resourceTO.getOrgUnit() == null) {\n-                result.add(0, SyncopeConstants.REALM_ANYTYPE);\n-            }\n-\n-            return result;\n-        }\n-    };\n+    protected AjaxTextFieldPanel clazz;\n \n     /**\n      * The object type specification step.\n@@ -100,41 +63,30 @@ private final class ObjectType extends WizardStep {\n         private static final long serialVersionUID = -1657800545799468278L;\n \n         ObjectType(final ResourceProvision item) {\n-            super(new ResourceModel(\"type.title\", StringUtils.EMPTY),\n-                    new ResourceModel(\"type.summary\", StringUtils.EMPTY), new Model<>(item));\n+            super(new ResourceModel(\"clazz.title\", StringUtils.EMPTY),\n+                    new ResourceModel(\"clazz.summary\", StringUtils.EMPTY), new Model<>(item));\n \n             final WebMarkupContainer container = new WebMarkupContainer(\"container\");\n             container.setOutputMarkupId(true);\n             add(container);\n \n-            final FieldPanel<String> type = new AjaxDropDownChoicePanel<>(\n-                    \"type\", \"type\", new PropertyModel<String>(item, \"anyType\"), false).\n-                    setChoices(anyTypes).\n-                    setStyleSheet(\"form-control\").\n-                    setRequired(true);\n-            container.add(type);\n-\n-            final AjaxTextFieldPanel clazz = new AjaxTextFieldPanel(\n+            clazz = new AjaxTextFieldPanel(\n                     \"clazz\", \"clazz\", new PropertyModel<String>(item, \"objectClass\"));\n             clazz.setRequired(true);\n             clazz.setChoices(connectorRestClient.getObjectClasses(resourceTO.getConnector()));\n             container.add(clazz);\n+        }\n+    }\n \n-            type.getField().add(new IndicatorAjaxFormComponentUpdatingBehavior(Constants.ON_CHANGE) {\n-\n-                private static final long serialVersionUID = -1107858522700306810L;\n-\n-                @Override\n-                protected void onUpdate(final AjaxRequestTarget target) {\n-                    if (AnyTypeKind.USER.name().equals(type.getModelObject())) {\n-                        clazz.setModelObject(ConnIdSpecialName.ACCOUNT);\n-                        target.add(container);\n-                    } else if (AnyTypeKind.GROUP.name().equals(type.getModelObject())) {\n-                        clazz.setModelObject(ConnIdSpecialName.GROUP);\n-                        target.add(container);\n-                    }\n-                }\n-            });\n+    protected void setObjectClassModelObject(final String type) {\n+        if (clazz != null) {\n+            if (AnyTypeKind.USER.name().equals(type)) {\n+                clazz.setModelObject(ConnIdSpecialName.ACCOUNT);\n+            } else if (AnyTypeKind.GROUP.name().equals(type)) {\n+                clazz.setModelObject(ConnIdSpecialName.GROUP);\n+            } else {\n+                clazz.setModelObject(\"\");\n+            }\n         }\n     }\n \n@@ -230,12 +182,12 @@ protected void onUpdate(final AjaxRequestTarget target) {\n     /**\n      * Construct.\n      *\n-     * @param resurceTO external resource to be updated.\n+     * @param resourceTO external resource to be updated.\n      * @param pageRef Caller page reference.\n      */\n-    public ProvisionWizardBuilder(final ResourceTO resurceTO, final PageReference pageRef) {\n+    public ProvisionWizardBuilder(final ResourceTO resourceTO, final PageReference pageRef) {\n         super(new ResourceProvision(), pageRef);\n-        this.resourceTO = resurceTO;\n+        this.resourceTO = resourceTO;\n     }\n \n     @Override"},{"sha":"fa13fc7f33ede06ab407af474af733bc21ffc109","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/resources/ResourceProvisionPanel.java","status":"modified","additions":92,"deletions":3,"changes":95,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -23,9 +23,12 @@\n import java.util.Collections;\n import java.util.Comparator;\n import java.util.List;\n+import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.IterableUtils;\n import org.apache.commons.collections4.IteratorUtils;\n+import org.apache.commons.collections4.ListUtils;\n import org.apache.commons.collections4.Predicate;\n+import org.apache.commons.collections4.Transformer;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n@@ -37,6 +40,7 @@\n import org.apache.syncope.client.console.rest.ResourceRestClient;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink;\n+import org.apache.syncope.client.console.wicket.markup.html.form.ActionLinksTogglePanel;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n import org.apache.syncope.client.console.wizards.WizardMgtPanel;\n import org.apache.syncope.common.lib.SyncopeClientException;\n@@ -47,8 +51,10 @@\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.event.Broadcast;\n import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.StringResourceModel;\n \n@@ -62,6 +68,14 @@ public class ResourceProvisionPanel extends AbstractModalPanel<Serializable> {\n \n     private final List<ResourceProvision> provisions;\n \n+    private final ObjectTypeTogglePanel objectTypeTogglePanel;\n+\n+    private final WizardMgtPanel<ResourceProvision> list;\n+\n+    private final ProvisionWizardBuilder wizard;\n+\n+    private final AjaxLink<ResourceProvision> addAjaxLink;\n+\n     public ResourceProvisionPanel(\n             final BaseModal<Serializable> modal,\n             final ResourceTO resourceTO,\n@@ -72,7 +86,7 @@ public ResourceProvisionPanel(\n \n         setOutputMarkupId(true);\n \n-        final ProvisionWizardBuilder wizard = new ProvisionWizardBuilder(resourceTO, pageRef);\n+        wizard = new ProvisionWizardBuilder(resourceTO, pageRef);\n \n         final ListViewPanel.Builder<ResourceProvision> builder = new ListViewPanel.Builder<ResourceProvision>(\n                 ResourceProvision.class, pageRef) {\n@@ -111,6 +125,8 @@ protected void customActionOnCancelCallback(final AjaxRequestTarget target) {\n \n             @Override\n             protected void customActionOnFinishCallback(final AjaxRequestTarget target) {\n+                checkAddButton();\n+\n                 // keep list ordered - SYNCOPE-1154\n                 sortProvisions();\n \n@@ -141,7 +157,7 @@ protected void customActionOnFinishCallback(final AjaxRequestTarget target) {\n             public void onClick(final AjaxRequestTarget target, final ResourceProvision provision) {\n                 try {\n                     send(ResourceProvisionPanel.this, Broadcast.DEPTH,\n-                            new AjaxWizard.NewItemActionEvent<>(provision, 2, target).setResourceModel(\n+                            new AjaxWizard.NewItemActionEvent<>(provision, 1, target).setResourceModel(\n                                     new StringResourceModel(\"inner.provision.mapping\",\n                                             ResourceProvisionPanel.this,\n                                             Model.of(provision))));\n@@ -201,14 +217,53 @@ public void onClick(final AjaxRequestTarget target, final ResourceProvision prov\n                             resourceTO.getProvisions().remove(provision.getProvisionTO());\n                         }\n                         provisions.remove(provision);\n+                        checkAddButton();\n                         send(ResourceProvisionPanel.this, Broadcast.DEPTH, new ListViewReload<>(target));\n                     }\n                 }, ActionLink.ActionType.DELETE, StandardEntitlement.RESOURCE_UPDATE);\n \n         builder.addNewItemPanelBuilder(wizard);\n \n-        final WizardMgtPanel<ResourceProvision> list = builder.build(\"provision\");\n+        list = builder.build(\"provision\");\n+\n+        addAjaxLink = new AjaxLink<ResourceProvision>(\"add\") {\n+\n+            private static final long serialVersionUID = -7978723352517770644L;\n+\n+            @Override\n+            public void onClick(final AjaxRequestTarget target) {\n+                objectTypeTogglePanel.setHeaderLabel(target);\n+                objectTypeTogglePanel.toggle(target, true);\n+            }\n+        };\n+        list.addOrReplaceInnerObject(addAjaxLink);\n         add(list);\n+\n+        // ----------------------------------------------------------------------\n+        // toggle panel, used to choose 'type' before starting wizard - SYNCOPE-1167\n+        final ResourceProvision provision = new ResourceProvision();\n+        provision.setAnyType(\"\");\n+        objectTypeTogglePanel =\n+                new ObjectTypeTogglePanel(\"objectTypeToggle\", provision, getAnyTypes(), pageRef) {\n+\n+            private static final long serialVersionUID = 7878063325027015067L;\n+\n+            @Override\n+            protected void onSubmit(final String type, final AjaxRequestTarget target) {\n+\n+                provision.setAnyType(type);\n+\n+                send(list, Broadcast.BREADTH,\n+                        new ActionLinksTogglePanel.ActionLinkToggleCloseEventPayload(target));\n+                send(list, Broadcast.DEPTH,\n+                        new AjaxWizard.NewItemActionEvent<>(provision, target));\n+\n+                wizard.setObjectClassModelObject(type);\n+            }\n+\n+        };\n+        checkAddButton();\n+        add(objectTypeTogglePanel);\n     }\n \n     private void checkConnObjectKeyCount(final String anyType, final List<ItemTO> items) {\n@@ -263,4 +318,38 @@ public int compare(final ResourceProvision o1, final ResourceProvision o2) {\n             }\n         });\n     }\n+\n+    private LoadableDetachableModel<List<String>> getAnyTypes() {\n+        return new LoadableDetachableModel<List<String>>() {\n+\n+            private static final long serialVersionUID = 5275935387613157437L;\n+\n+            @Override\n+            protected List<String> load() {\n+                final List<String> currentlyAdded = new ArrayList<>();\n+\n+                CollectionUtils.collect(resourceTO.getProvisions(), new Transformer<ProvisionTO, String>() {\n+\n+                    @Override\n+                    public String transform(final ProvisionTO provisionTO) {\n+                        return provisionTO.getAnyType();\n+                    }\n+                }, currentlyAdded);\n+\n+                return ListUtils.select(new AnyTypeRestClient().list(), new Predicate<String>() {\n+\n+                    @Override\n+                    public boolean evaluate(final String key) {\n+                        return !currentlyAdded.contains(key);\n+                    }\n+                });\n+            }\n+        };\n+    }\n+\n+    private void checkAddButton() {\n+        boolean test = !getAnyTypes().getObject().isEmpty();\n+        addAjaxLink.setVisible(test);\n+        objectTypeTogglePanel.setEnabled(test);\n+    }\n }"},{"sha":"cea7a633369c831831e946ebd200194df88e182f","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel.html","status":"added","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.html?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,32 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+    <div id=\"startAtContainer\">\n+      <form wicket:id=\"objectTypeForm\">\n+        <div class=\"input-group\">\n+          <span wicket:id=\"type\"/>\n+          <div class=\"input-group-addon\">\n+            <a wicket:id=\"changeit\"><i class=\"fa fa-list-alt\" alt=\"object type icon\" title=\"ObjectType\"></i></a>\n+          </div>\n+        </div>\n+      </form>\n+    </div>\n+  </wicket:extend>\n+</html>\n\\ No newline at end of file"},{"sha":"e966cde2fcfe551925bf5b6265451e8660d5a185","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel.properties","status":"added","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+type.title=Specify the type of the provisioning object\n+type.summary=\n+\n+type=Type\n+type.Required=Type is required"},{"sha":"263c9f121ca7b55da88d049d45435cd4e49fd37e","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel_it.properties","status":"added","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_it.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+type.title=Specifica il tipo del provisioning\n+type.summary=\n+\n+type=Type\n+type.Required=Type \\u00e8 richiesto"},{"sha":"fe0c9f573e4449dade529a32eba69e3ed63fc9ca","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel_pt_BR.properties","status":"added","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_pt_BR.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+type.title=Especifique o tipo de objeto de provisioning\n+type.summary=\n+\n+type=Type\n+type.Required=Type \\u00e9 necess\\u00e1rio"},{"sha":"c1f2f2722da81e9b074bc0029eb64db7c467f146","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ObjectTypeTogglePanel_ru.properties","status":"added","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FObjectTypeTogglePanel_ru.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -0,0 +1,22 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+type.title=\\u0423\\u043a\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\n+type.summary=\n+\n+type=Type\n+type.Required=Type \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e"},{"sha":"c5ff7b13126543e1779dc662a82ab9edd5ff32fd","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder$ObjectType.html","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.html?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -19,9 +19,6 @@\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n   <wicket:panel>\n     <div wicket:id=\"container\">\n-      <div class=\"form-group\">\n-        <span wicket:id=\"type\"/>\n-      </div>\n       <div class=\"form-group\">\n         <span wicket:id=\"clazz\"/>\n       </div>"},{"sha":"08d4d6149e07b33516ed8b731926722ed3fef53d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder$ObjectType.properties","status":"modified","additions":2,"deletions":5,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -15,11 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-type.title=Specify the type of the provisioning object\n-type.summary=\n+clazz.title=Specify the object class of the provisioning object\n+clazz.summary=\n \n-type=Type\n-type.Required=Type is required\n clazz=Object Class\n clazz.Required=Object class is required\n-"},{"sha":"3219b30cd92982efd97b567ffc3f2a011b9a52af","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder$ObjectType_it.properties","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_it.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -15,10 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-type.title=Specifica il tipo del provisioning\n-type.summary=\n+clazz.title=Specifica il campo object class del provisioning\n+clazz.summary=\n \n-type=Type\n-type.Required=Type \\u00e8 richiesto\n clazz=Object Class\n clazz.Required=Object class \\u00e8 richiesto"},{"sha":"7e16e5c28a41119f4ee47a45e9276d6ddb617af6","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder$ObjectType_pt_BR.properties","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_pt_BR.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -15,10 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-type.title=Specify the type of the provisioning object\n-type.summary=\n+clazz.title=Especifique a classe de objeto do objeto de provisioning\n+clazz.summary=\n \n-type=Type\n-type.Required=Type is required\n clazz=Object Class\n-clazz.Required=Object class is required\n+clazz.Required=Object class \\u00e9 necess\\u00e1ria"},{"sha":"dd86e10599526ff9f15503f3ed28fdd740e84193","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ProvisionWizardBuilder$ObjectType_ru.properties","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FProvisionWizardBuilder%24ObjectType_ru.properties?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -15,10 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-type.title=Specify the type of the provisioning object\n-type.summary=\n+clazz.title=\\u0423\\u043a\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043a\\u043b\\u0430\\u0441\\u0441 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\n+clazz.summary=\n \n-type=Type\n-type.Required=Type is required\n clazz=Object Class\n-clazz.Required=Object class is required\n+clazz.Required=Object class \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u043e"},{"sha":"1998775966bef1fa6f0ee83d5ba8cd30ece56176","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/resources/ResourceProvisionPanel.html","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fresources%2FResourceProvisionPanel.html?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -17,7 +17,8 @@\n under the License.\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n-  <wicket:panel>\n+    <wicket:extend>\n     <span wicket:id=\"provision\">[PROVISION]</span>\n-  </wicket:panel>\n+    <span wicket:id=\"objectTypeToggle\"/>\n+  </wicket:extend>\n </html>"},{"sha":"d2da2e216c3b05c94c7e78cf813421824ebec8d5","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/TopologyITCase.java","status":"modified","additions":23,"deletions":3,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e06d18ae329547fbf42924593fd68dd2d74dcbb6/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e06d18ae329547fbf42924593fd68dd2d74dcbb6/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java?ref=e06d18ae329547fbf42924593fd68dd2d74dcbb6","patch":"@@ -119,6 +119,10 @@ public void editProvisioning() {\n                 \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n         formTester.submit(\"buttons:next\");\n \n+        formTester = TESTER.newFormTester(\n+                \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n+        formTester.submit(\"buttons:next\");\n+\n         TESTER.assertComponent(\"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:\"\n                 + \"container:content:wizard:form:view:mapping:mappingContainer:mappings:1\", WebMarkupContainer.class);\n \n@@ -166,23 +170,32 @@ public void createNewResurceAndProvisionRules() {\n         TESTER.executeAjaxEvent(component.getPageRelativePath() + \":res\", Constants.ON_CLICK);\n         TESTER.clickLink(\"body:toggle:container:content:togglePanelContainer:container:actions:provision\");\n \n+        // -- create new provision rules for the current resource\n         TESTER.clickLink(\"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:add\");\n \n         formTester = TESTER.newFormTester(\n-                \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n+                \"body:toggle:outerObjectsRepeater:3:outer:form:content:objectTypeToggle:container:\"\n+                + \"content:togglePanelContainer:objectTypeForm\");\n+        formTester.select(\"type:dropDownChoiceField\", 1);\n+        formTester.submit(\"changeit\");\n+        TESTER.assertNoErrorMessage();\n+        TESTER.assertNoInfoMessage();\n \n-        formTester.setValue(\"view:container:type:dropDownChoiceField\", \"1\");\n-        formTester.setValue(\"view:container:clazz:textField\", \"__ACCOUNT__\");\n+        // choose object class\n+        formTester = TESTER.newFormTester(\n+                \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n         formTester.submit(\"buttons:next\");\n         TESTER.assertNoErrorMessage();\n         TESTER.assertNoInfoMessage();\n \n+        // aux classes\n         formTester = TESTER.newFormTester(\n                 \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n         formTester.submit(\"buttons:next\");\n         TESTER.assertNoErrorMessage();\n         TESTER.assertNoInfoMessage();\n \n+        // set a new mapping rule\n         TESTER.executeAjaxEvent(\"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:\"\n                 + \"content:wizard:form:view:mapping:mappingContainer:addMappingBtn\", Constants.ON_CLICK);\n \n@@ -202,6 +215,7 @@ public void createNewResurceAndProvisionRules() {\n         TESTER.assertNoErrorMessage();\n         TESTER.assertNoInfoMessage();\n \n+        // finish\n         TESTER.cleanupFeedbackMessages();\n         // ajax event required to retrieve AjaxRequestTarget (used into finish custom event)\n         TESTER.executeAjaxEvent(\"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:\"\n@@ -211,9 +225,11 @@ public void createNewResurceAndProvisionRules() {\n         TESTER.assertComponent(\n                 \"body:toggle:outerObjectsRepeater:3:outer:dialog:footer:inputs:0:submit\", AjaxSubmitLink.class);\n \n+        // save\n         TESTER.cleanupFeedbackMessages();\n         TESTER.executeAjaxEvent(\n                 \"body:toggle:outerObjectsRepeater:3:outer:dialog:footer:inputs:0:submit\", Constants.ON_CLICK);\n+        TESTER.assertNoErrorMessage();\n         TESTER.assertInfoMessages(\"Operation executed successfully\");\n \n         TESTER.clickLink(\"body:toggle:container:content:togglePanelContainer:container:actions:provision\");\n@@ -225,6 +241,10 @@ public void createNewResurceAndProvisionRules() {\n                 \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n         formTester.submit(\"buttons:next\");\n \n+        formTester = TESTER.newFormTester(\n+                \"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:container:content:wizard:form\");\n+        formTester.submit(\"buttons:next\");\n+\n         TESTER.assertComponent(\"body:toggle:outerObjectsRepeater:3:outer:form:content:provision:\"\n                 + \"container:content:wizard:form:view:mapping:mappingContainer:mappings:0\", WebMarkupContainer.class);\n "}]}