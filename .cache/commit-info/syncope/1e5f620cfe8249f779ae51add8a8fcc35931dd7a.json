{"sha":"1e5f620cfe8249f779ae51add8a8fcc35931dd7a","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjFlNWY2MjBjZmU4MjQ5Zjc3OWFlNTFhZGQ4YThmY2MzNTkzMWRkN2E=","commit":{"author":{"name":"Matteo Di Carlo","email":"matteo.dicarlo@tirasa.net","date":"2016-09-07T13:13:31Z"},"committer":{"name":"Matteo Di Carlo","email":"matteo.dicarlo@tirasa.net","date":"2016-09-07T13:13:31Z"},"message":"[SYNCOPE-853] fix jasmine timeout error","tree":{"sha":"e5d7042f7be344283072bf4e3d631996db653cfd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/e5d7042f7be344283072bf4e3d631996db653cfd"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1e5f620cfe8249f779ae51add8a8fcc35931dd7a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1e5f620cfe8249f779ae51add8a8fcc35931dd7a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1e5f620cfe8249f779ae51add8a8fcc35931dd7a","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/comments","author":null,"committer":null,"parents":[{"sha":"ef5784b1ede2fd33de430cf2764cc669f79106d9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ef5784b1ede2fd33de430cf2764cc669f79106d9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ef5784b1ede2fd33de430cf2764cc669f79106d9"}],"stats":{"total":124,"additions":69,"deletions":55},"files":[{"sha":"52b597778f49a6e15d961d3357e40f7eda6fb76f","filename":"fit/enduser-reference/src/test/resources/org/apache/syncope/client/enduser/protractor/protractor-conf.js","status":"modified","additions":16,"deletions":14,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Fprotractor-conf.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Fprotractor-conf.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Fprotractor-conf.js?ref=1e5f620cfe8249f779ae51add8a8fcc35931dd7a","patch":"@@ -17,18 +17,20 @@\n  * under the License.\n  */\n exports.config = {\n-        directConnect: false,\n-\n-        capabilities: {\n-          'browserName': 'phantomjs',\n-          'phantomjs.binary.path': '@phantomjs.binary.path@',\n-          'phantomjs.ghostdriver.cli.args': ['--loglevel=DEBUG']\n-        },\n-        \n-        allScriptsTimeout: 241000,\n-\n-        // Spec patterns are relative to the current working directly when protractor is called.\n-        specs: ['tests/*.js'],\n-        \n-        exclude: ['tests/abstract.js'],\n+  directConnect: false,\n+  capabilities: {\n+    'browserName': 'phantomjs',\n+    'phantomjs.binary.path': '@phantomjs.binary.path@',\n+    'phantomjs.ghostdriver.cli.args': ['--loglevel=DEBUG']\n+  },\n+  \n+  allScriptsTimeout: 241000,\n+  \n+  jasmineNodeOpts: {\n+    defaultTimeoutInterval: 2500000\n+  },\n+  \n+  // Spec patterns are relative to the current working directly when protractor is called.\n+  specs: ['tests/*.js'],\n+  exclude: ['tests/abstract.js']\n };"},{"sha":"6c306eaeb1497696f4f23faf481efc65c86c9d5a","filename":"fit/enduser-reference/src/test/resources/org/apache/syncope/client/enduser/protractor/tests/abstract.js","status":"modified","additions":15,"deletions":6,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fabstract.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fabstract.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fabstract.js?ref=1e5f620cfe8249f779ae51add8a8fcc35931dd7a","patch":"@@ -17,13 +17,11 @@\n  * under the License.\n  */\n \n-var home = 'http://localhost:9080/syncope-enduser/app/';\n \n exports.doCreate = function () {\n   describe('doCreate', function () {\n \n     it('create donizetti', function () {\n-      browser.get(home);\n \n       browser.wait(element(by.id('register')).isPresent());\n       element(by.id('register')).click();\n@@ -49,8 +47,9 @@ exports.doCreate = function () {\n \n       element.all(by.id('next')).first().click();\n \n-      element(by.id('save')).click();\n-     \n+      element.all(by.id('cancel')).last().click();\n+\n+\n     });\n   });\n };\n@@ -67,9 +66,19 @@ exports.doLogin = function (username, password) {\n \n       expect(element(by.model('user.username')).getAttribute('value')).toEqual(username);\n \n-//      element(by.id('logout')).click();\n     });\n   });\n-}\n+};\n \n+exports.goHome = function () {\n+  var home = 'http://localhost:9080/syncope-enduser/app/';\n+  browser.get(home);\n+};\n+\n+exports.doNext = function () {\n+  element.all(by.id('next')).last().click();\n+};\n \n+exports.doCancel = function () {\n+  element.all(by.id('cancel')).last().click();\n+};"},{"sha":"53ef48dbd8588aff80eb512736e92565c9239629","filename":"fit/enduser-reference/src/test/resources/org/apache/syncope/client/enduser/protractor/tests/create.js","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fcreate.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fcreate.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fcreate.js?ref=1e5f620cfe8249f779ae51add8a8fcc35931dd7a","patch":"@@ -18,13 +18,11 @@\n  */\n \n var abstract = require('./abstract.js');\n-\n+abstract.goHome();\n abstract.doCreate();\n \n describe('waitSuccess', function () {\n   it('wait redirect link', function () {     \n     browser.wait(element(by.id('redirect')).isPresent());      \n   });\n });\n-\n-//abstract.doLogin(\"donizetti\", \"password123\");"},{"sha":"c10882492976034c7ef6cb6bedb57580b53a5b79","filename":"fit/enduser-reference/src/test/resources/org/apache/syncope/client/enduser/protractor/tests/edituser.js","status":"modified","additions":33,"deletions":27,"changes":60,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fedituser.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fedituser.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Fedituser.js?ref=1e5f620cfe8249f779ae51add8a8fcc35931dd7a","patch":"@@ -17,22 +17,22 @@\n  * under the License.\n  */\n \n-//var abstract = require('./abstract.js');\n+var abstract = require('./abstract.js');\n \n describe('syncope enduser user edit', function () {\n \n-  function next() {\n-    element.all(by.id('next')).last().click();\n-  }\n-  ;\n-\n-  function cancel() {\n-    element.all(by.id('cancel')).last().click();\n+  function waitSpinner() {\n+    element.all(by.css('treasure-overlay-spinner')).isDisplayed().then(function (result) {\n+      if (result) {\n+        browser.driver.sleep(3000);\n+      }\n+    });\n   }\n   ;\n \n   it('should edit user credentials', function () {\n-    browser.get('http://localhost:9080/syncope-enduser/app/');\n+\n+    abstract.goHome();\n \n     //login\n     element(by.model('credentials.username')).sendKeys('bellini');\n@@ -45,8 +45,6 @@ describe('syncope enduser user edit', function () {\n             get(0).click();\n     element(by.id('login-btn')).click();\n \n-//    abstract.doLogin(\"bellini\", \"password\");\n-\n     //credential\n     element(by.model('user.username')).clear();\n     element(by.model('user.username')).sendKeys('bellini');\n@@ -59,33 +57,37 @@ describe('syncope enduser user edit', function () {\n             .last();\n     selectedSecQuestion.click();\n     element(by.model('user.securityAnswer')).sendKeys('Agata Ferlito');\n-    browser.driver.sleep(1000);\n-    next();\n+    abstract.doNext();\n \n     //groups\n     var group = element(by.model('dynamicForm.selectedGroups'));\n     var selectedGroup = group.element(by.css('.ui-select-search'));\n     group.click();\n \n-    // add \"additional\", a group with type extensions, and \"root\".\n     selectedGroup.sendKeys('additional');\n     element.all(by.css('.ui-select-choices-row-inner span')).first().click();\n+    waitSpinner();\n+\n     selectedGroup.sendKeys('root');\n     element.all(by.css('.ui-select-choices-row-inner span')).first().click();\n-    browser.driver.sleep(1000);\n-    next();\n+    waitSpinner();\n+\n+    abstract.doNext();\n \n     //plainSchemas\n-    //  count groups in plainschemas: \"own\" and \"additional\".\n     element.all(by.repeater('groupSchema in dynamicForm.groupSchemas')).then(function (groupSchema) {\n       expect(groupSchema.length).toBe(2);\n-    })\n-    //  fills own fields\n+    });\n+\n     element(by.css('[name=\"fullname\"]')).clear();\n     element(by.css('[name=\"fullname\"]')).sendKeys('Vincenzo Bellini');\n+    browser.manage().timeouts().pageLoadTimeout(5000);\n+\n     element(by.css('[name=\"userId\"]')).clear();\n     element(by.css('[name=\"userId\"]')).sendKeys('bellini@apache.org');\n-    var selectedDate = element(by.model('selectedDate')).click();\n+    browser.manage().timeouts().pageLoadTimeout(5000);\n+\n+    var selectedDate = element(by.model('selectedDate'));\n     selectedDate.clear();\n     selectedDate.sendKeys('2009-06-21');\n     element(by.css('[name=\"firstname\"]')).clear();\n@@ -94,15 +96,19 @@ describe('syncope enduser user edit', function () {\n     element(by.css('[name=\"surname\"]')).sendKeys('Bellini');\n     element(by.css('[name=\"ctype\"]')).clear();\n     element(by.css('[name=\"ctype\"]')).sendKeys('bellinictype');\n-    next();\n+\n+    abstract.doNext();\n+\n     //derSchemas\n-    next();\n+    abstract.doNext();\n+\n     //virSchemas\n-    next();\n+    abstract.doNext();\n+\n     //Resources\n-    next();\n-    browser.driver.sleep(1000);\n-    element.all(by.id('cancel')).last().click();\n-    browser.driver.sleep(1000);\n+    abstract.doNext();\n+\n+    //Captcha\n+    abstract.doCancel();\n   });\n });"},{"sha":"23ec3d5b88a8957c2bf413f96ac6983d2943ae14","filename":"fit/enduser-reference/src/test/resources/org/apache/syncope/client/enduser/protractor/tests/login.js","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Flogin.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1e5f620cfe8249f779ae51add8a8fcc35931dd7a/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Flogin.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Ftest%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fprotractor%2Ftests%2Flogin.js?ref=1e5f620cfe8249f779ae51add8a8fcc35931dd7a","patch":"@@ -17,15 +17,12 @@\n  * under the License.\n  */\n \n-//var abstract = require('./abstract.js');\n-\n-//abstract.doLogin(\"rossini\", \"password\");\n-\n+var abstract = require('./abstract.js');\n \n describe('syncope enduser user login', function () {\n \n   it('should login user', function () {\n-    browser.get('http://localhost:9080/syncope-enduser/app/');\n+    abstract.goHome();\n \n     element(by.model('credentials.username')).sendKeys('rossini');\n     element(by.model('credentials.password')).sendKeys('password');\n@@ -35,6 +32,8 @@ describe('syncope enduser user login', function () {\n             });\n     element.all(by.options('language.name for language in languages.availableLanguages track by language.id')).\n             get(1).click();\n+    browser.driver.sleep(3000);\n+\n     element(by.id('login-btn')).click();\n \n   });"}]}