{"sha":"e4947c909e4cf18713653a4e4977489331c5fb45","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmU0OTQ3YzkwOWU0Y2YxODcxMzY1M2E0ZTQ5Nzc0ODkzMzFjNWZiNDU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-02-22T17:59:41Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-02-22T18:01:15Z"},"message":"[SYNCOPE-1023] Moving the Activiti test content setup from the all profile into the embedded profile (with condition)","tree":{"sha":"4ebcadd7d099f36515f68f0718f6fcdb284ce3f0","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/4ebcadd7d099f36515f68f0718f6fcdb284ce3f0"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e4947c909e4cf18713653a4e4977489331c5fb45","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e4947c909e4cf18713653a4e4977489331c5fb45","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e4947c909e4cf18713653a4e4977489331c5fb45","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e4947c909e4cf18713653a4e4977489331c5fb45/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"0d090c7b74d1d399f8c488790aad2826bb0a2558","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0d090c7b74d1d399f8c488790aad2826bb0a2558","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0d090c7b74d1d399f8c488790aad2826bb0a2558"}],"stats":{"total":183,"additions":36,"deletions":147},"files":[{"sha":"4102c4edd7138607984cbeb333fbd7d64a393d80","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":1,"deletions":111,"changes":112,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=e4947c909e4cf18713653a4e4977489331c5fb45","patch":"@@ -192,117 +192,7 @@ ORYX.Editor.createByUrl = function(modelUrl){\"/>\n     </testResources>\n   </build>\n \n-  <profiles>\n-    <profile>\n-      <id>embedded</id>\n-      \n-      <properties>\n-        <conf.directory>${project.build.directory}/test-classes</conf.directory>\n-      </properties>\n-      \n-      <dependencies>\n-        <dependency>\n-          <groupId>org.apache.syncope.fit</groupId>\n-          <artifactId>syncope-fit-build-tools</artifactId>\n-          <version>${syncope.version}</version>\n-          <type>war</type>\n-          <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-          <groupId>com.h2database</groupId>\n-          <artifactId>h2</artifactId>\n-          <scope>test</scope>\n-        </dependency>\n-      </dependencies>\n-      \n-      <build>\n-        <defaultGoal>clean verify cargo:run</defaultGoal>  \n-        \n-        <plugins>\n-          <plugin>\n-            <groupId>org.apache.maven.plugins</groupId>\n-            <artifactId>maven-antrun-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <executions>\n-              <execution>\n-                <id>setupEmbeddedConf</id>\n-                <phase>package</phase>\n-                <configuration>\n-                  <target>\n-                    <delete dir=\"../core/target/syncope/WEB-INF/classes/domains\"/>\n-                    <copy todir=\"../core/target/syncope/WEB-INF/classes/domains\">\n-                      <fileset dir=\"../core/target/test-classes/domains\"/>\n-                    </copy>\n-                    <copy file=\"../core/target/test-classes/connid.properties\" \n-                          todir=\"../core/target/syncope/WEB-INF/classes\" \n-                          overwrite=\"true\"/>\n-                    <copy file=\"../core/target/test-classes/db.jsp\" \n-                          todir=\"../core/target/syncope\" \n-                          overwrite=\"true\"/>\n-\n-                    <copy file=\"${project.build.directory}/test-classes/console.properties\" \n-                          todir=\"${project.build.directory}/${project.build.finalName}/WEB-INF/classes\" \n-                          overwrite=\"true\"/>\n-                  </target>\n-                </configuration>\n-                <goals>\n-                  <goal>run</goal>\n-                </goals>\n-              </execution>\n-            </executions>\n-          </plugin>\n-      \n-          <plugin>\n-            <groupId>org.codehaus.cargo</groupId>\n-            <artifactId>cargo-maven2-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <configuration>\n-              <container>\n-                <dependencies>\n-                  <dependency>\n-                    <groupId>com.h2database</groupId>\n-                    <artifactId>h2</artifactId>\n-                  </dependency>\n-                </dependencies>\n-              </container>\n-              <configuration>\n-                <type>standalone</type>\n-                <properties>\n-                  <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>\n-                  <cargo.tomcat.ajp.port>${cargo.tomcat.ajp.port}</cargo.tomcat.ajp.port>\n-                  <cargo.rmi.port>${cargo.rmi.port}</cargo.rmi.port>\n-\n-                  <cargo.jvmargs>-noverify -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC</cargo.jvmargs>\n-                </properties>\n-              </configuration>\n-              <deployables>\n-                <deployable>\n-                  <groupId>org.apache.syncope.fit</groupId>\n-                  <artifactId>syncope-fit-build-tools</artifactId>\n-                  <type>war</type>\n-                  <properties>\n-                    <context>syncope-fit-build-tools</context>\n-                  </properties>\n-                </deployable>\n-                <deployable>\n-                  <location>../core/target/syncope</location>\n-                  <properties>\n-                    <context>syncope</context>\n-                  </properties>\n-                </deployable>\n-                <deployable>\n-                  <location>${project.build.directory}/${project.build.finalName}</location>\n-                  <properties>\n-                    <context>syncope-console</context>\n-                  </properties>\n-                </deployable>\n-              </deployables>\n-            </configuration>\n-          </plugin>\n-        </plugins>  \n-      </build>\n-    </profile>\n-    \n+  <profiles>    \n     <profile>\n       <id>all</id>\n       "},{"sha":"24f7f19264c79c39fe7aac4cd758ae44b4023876","filename":"archetype/src/main/resources/archetype-resources/core/pom.xml","status":"modified","additions":1,"deletions":36,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml?ref=e4947c909e4cf18713653a4e4977489331c5fb45","patch":"@@ -178,42 +178,7 @@ under the License.\n         </dependency>\n       </dependencies>\n       \n-      <build>\n-        <plugins>\n-          <!-- Adds Activiti test content -->\n-          <plugin>\n-            <groupId>org.codehaus.mojo</groupId>\n-            <artifactId>xml-maven-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <executions>\n-              <execution>\n-                <phase>prepare-package</phase>\n-                <goals>\n-                  <goal>transform</goal>\n-                </goals>\n-              </execution>\n-            </executions>\n-            <configuration>\n-              <transformationSets>\n-                <transformationSet>\n-                  <dir>${project.build.directory}/test-classes</dir>\n-                  <includes>\n-                    <include>domains/MasterContent.xml</include>\n-                  </includes>\n-                  <outputDir>${project.build.directory}/classes</outputDir>\n-                  <stylesheet>${basedir}/src/test/resources/addActivitiToContent.xsl</stylesheet>\n-                  <outputProperties>\n-                    <outputProperty>\n-                      <name>indent</name>\n-                      <value>yes</value>\n-                    </outputProperty>\n-                  </outputProperties>\n-                </transformationSet>\n-              </transformationSets>\n-            </configuration>\n-          </plugin>                    \n-        </plugins>\n-        \n+      <build>        \n         <resources>\n           <resource>\n             <directory>src/main/resources</directory>"},{"sha":"99ed1dfd6ac471cc4a43d00e9a534072ba213733","filename":"archetype/src/main/resources/archetype-resources/enduser/pom.xml","status":"modified","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e4947c909e4cf18713653a4e4977489331c5fb45/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml?ref=e4947c909e4cf18713653a4e4977489331c5fb45","patch":"@@ -167,6 +167,33 @@ under the License.\n             <artifactId>maven-antrun-plugin</artifactId>\n             <inherited>true</inherited>\n             <executions>\n+              <execution>\n+                <id>addActivitiTestContent</id>\n+                <phase>prepare-package</phase>\n+                <configuration>\n+                  <target>\n+                    <taskdef resource=\"net/sf/antcontrib/antcontrib.properties\"\n+                             classpathref=\"maven.plugin.classpath\"/>\n+\n+                    <if>\n+                      <available file=\"../core/target/syncope/WEB-INF/lib/activiti-engine-${activiti.version}.jar\"/>\n+                      <then>\n+                        <xslt basedir=\"../core/target/test-classes/domains\" \n+                              includes=\"MasterContent.xml\"\n+                              destdir=\"../core/target\"\n+                              extension=\".xml\"\n+                              force=\"true\"\n+                              style=\"../core/src/test/resources/addActivitiToContent.xsl\"/>\n+                        <move file=\"../core/target/MasterContent.xml\"\n+                               tofile=\"../core/target/test-classes/domains/MasterContent.xml\"/>\n+                      </then>\n+                    </if>\n+                  </target>\n+                </configuration>\n+                <goals>\n+                  <goal>run</goal>\n+                </goals>\n+              </execution>\n               <execution>\n                 <id>setupEmbeddedConf</id>\n                 <phase>package</phase>\n@@ -193,6 +220,13 @@ under the License.\n                 </goals>\n               </execution>\n             </executions>\n+            <dependencies>\n+              <dependency>\n+                <groupId>ant-contrib</groupId>\n+                <artifactId>ant-contrib</artifactId>\n+                <version>20020829</version>\n+              </dependency>\n+            </dependencies>\n           </plugin>\n       \n           <plugin>"}]}