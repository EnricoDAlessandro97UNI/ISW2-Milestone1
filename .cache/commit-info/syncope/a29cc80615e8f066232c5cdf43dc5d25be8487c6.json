{"sha":"a29cc80615e8f066232c5cdf43dc5d25be8487c6","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmEyOWNjODA2MTVlOGYwNjYyMzJjNWNkZjQzZGM1ZDI1YmU4NDg3YzY=","commit":{"author":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2016-09-07T13:56:41Z"},"committer":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2016-09-07T13:56:41Z"},"message":"SYNCOPE-931 - Added a test","tree":{"sha":"f11dd758cd4fd3dd17d6f751dc677587c7594397","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/f11dd758cd4fd3dd17d6f751dc677587c7594397"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/a29cc80615e8f066232c5cdf43dc5d25be8487c6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a29cc80615e8f066232c5cdf43dc5d25be8487c6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a29cc80615e8f066232c5cdf43dc5d25be8487c6","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a29cc80615e8f066232c5cdf43dc5d25be8487c6/comments","author":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"committer":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"parents":[{"sha":"0d97f451542c42665a10c8e5ec2a07212d3163e8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0d97f451542c42665a10c8e5ec2a07212d3163e8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0d97f451542c42665a10c8e5ec2a07212d3163e8"}],"stats":{"total":46,"additions":46,"deletions":0},"files":[{"sha":"66fbcc13c00ffac92d6f879d2e003d83fc6eb14b","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/CamelRouteITCase.java","status":"modified","additions":46,"deletions":0,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a29cc80615e8f066232c5cdf43dc5d25be8487c6/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FCamelRouteITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a29cc80615e8f066232c5cdf43dc5d25be8487c6/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FCamelRouteITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FCamelRouteITCase.java?ref=a29cc80615e8f066232c5cdf43dc5d25be8487c6","patch":"@@ -33,6 +33,7 @@\n import org.apache.syncope.common.lib.types.AttrSchemaType;\n import org.apache.syncope.common.lib.types.SchemaType;\n import org.apache.syncope.fit.AbstractITCase;\n+import org.junit.Assert;\n import org.junit.Assume;\n import org.junit.Test;\n \n@@ -170,4 +171,49 @@ public void scriptingUpdate() {\n         }\n     }\n \n+    @Test\n+    public void issueSYNCOPE931() {\n+        Assume.assumeTrue(CamelDetector.isCamelEnabledForUsers(syncopeService));\n+\n+        CamelRouteTO oldRoute = camelRouteService.read(\"createUser\");\n+        assertNotNull(oldRoute);\n+        String routeContent = \"<route id=\\\"createUser\\\">\\n\"\n+                + \"  <from uri=\\\"direct:createUser\\\"/>\\n\"\n+                + \"  <setProperty propertyName=\\\"actual\\\">\\n\"\n+                + \"    <simple>${body}</simple>\\n\"\n+                + \"  </setProperty>\\n\"\n+                + \"  <doTry>\\n\"\n+                + \"    <bean ref=\\\"uwfAdapter\\\" method=\\\"create(${body},${property.disablePwdPolicyCheck},\\n\"\n+                + \"                             ${property.enabled},${property.storePassword})\\\"/>\\n\"\n+                + \"    <to uri=\\\"propagate:create123?anyTypeKind=USER\\\"/>\\n\"\n+                + \"    <to uri=\\\"direct:createPort\\\"/>\\n\"\n+                + \"    <to uri=\\\"log:myLog\\\"/>\\n\"\n+                + \"    <doCatch>        \\n\"\n+                + \"      <exception>java.lang.RuntimeException</exception>\\n\"\n+                + \"      <handled>\\n\"\n+                + \"        <constant>false</constant>\\n\"\n+                + \"      </handled>\\n\"\n+                + \"      <to uri=\\\"direct:createPort\\\"/>\\n\"\n+                + \"    </doCatch>\\n\"\n+                + \"  </doTry>\\n\"\n+                + \"</route>\";\n+\n+        // Try to update a route with an incorrect propagation type\n+        try {\n+            doUpdate(\"createUser\", routeContent);\n+            Assert.fail(\"Error expected on an incorrect propagation type\");\n+        } catch (Exception ex) {\n+            // Expected\n+        }\n+\n+        // Now update the route again with the correct propagation type\n+        routeContent = routeContent.replaceFirst(\"create123\", \"create\");\n+        try {\n+            CamelRouteTO route = doUpdate(\"createUser\", routeContent);\n+            assertEquals(routeContent, route.getContent());\n+        } finally {\n+            doUpdate(oldRoute.getKey(), oldRoute.getContent());\n+        }\n+    }\n+\n }"}]}