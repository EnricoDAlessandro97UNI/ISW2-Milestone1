{"sha":"fec04d0468ab4bc2933709a6f2122477e08f750c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZlYzA0ZDA0NjhhYjRiYzI5MzM3MDlhNmYyMTIyNDc3ZTA4Zjc1MGM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-12-05T13:00:48Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-12-05T13:00:48Z"},"message":"Upgrading Payara and related docs - still auth not working","tree":{"sha":"f157769413d5eed8fb5369472dd91c5ce4e70014","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/f157769413d5eed8fb5369472dd91c5ce4e70014"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/fec04d0468ab4bc2933709a6f2122477e08f750c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fec04d0468ab4bc2933709a6f2122477e08f750c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fec04d0468ab4bc2933709a6f2122477e08f750c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fec04d0468ab4bc2933709a6f2122477e08f750c/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"7dcd93842b7ab82b9092d74681885b890cc7ffd2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7dcd93842b7ab82b9092d74681885b890cc7ffd2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7dcd93842b7ab82b9092d74681885b890cc7ffd2"}],"stats":{"total":175,"additions":102,"deletions":73},"files":[{"sha":"b1db0141b32d22a20d1375352f5eba23ad02f441","filename":"fit/build-tools/pom.xml","status":"modified","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fec04d0468ab4bc2933709a6f2122477e08f750c/fit%2Fbuild-tools%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fec04d0468ab4bc2933709a6f2122477e08f750c/fit%2Fbuild-tools%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fbuild-tools%2Fpom.xml?ref=fec04d0468ab4bc2933709a6f2122477e08f750c","patch":"@@ -364,5 +364,60 @@ under the License.\n         </plugins>\n       </build>\n     </profile>\n+\n+    <profile>\n+      <id>payara</id>\n+\n+      <dependencies>\n+        <dependency>\n+          <groupId>org.glassfish</groupId>\n+          <artifactId>javax.faces</artifactId>\n+          <version>${javax.faces.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+          <groupId>com.fasterxml.jackson.dataformat</groupId>\n+          <artifactId>jackson-dataformat-xml</artifactId>\n+        </dependency>\n+      </dependencies>\n+\n+      <build>\n+        <defaultGoal>clean verify cargo:run</defaultGoal>\n+\n+        <plugins>\n+          <plugin>\n+            <groupId>org.codehaus.cargo</groupId>\n+            <artifactId>cargo-maven2-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <configuration>\n+              <container>\n+                <containerId>payara</containerId>\n+                <zipUrlInstaller>\n+                  <url>https://repo1.maven.org/maven2/fish/payara/distributions/payara/${payara.version}/payara-${payara.version}.zip</url>\n+                  <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n+                  <extractDir>${project.build.directory}/cargo/extract</extractDir>\n+                </zipUrlInstaller>\n+                <timeout>300000</timeout>\n+                <log>${cargo.log}</log>\n+                <output>${cargo.output}</output>\n+                <dependencies>\n+                  <dependency>\n+                    <groupId>com.h2database</groupId>\n+                    <artifactId>h2</artifactId>\n+                  </dependency>\n+                </dependencies>\n+              </container>\n+              <configuration>\n+                <properties>\n+                  <cargo.jvmargs>-Xdebug -Djaxb.debug=true -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n\n+                    -XX:+CMSClassUnloadingEnabled</cargo.jvmargs>\n+                </properties>\n+              </configuration>\n+              <skip>${skipTests}</skip>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n   </profiles>\n </project>"},{"sha":"c39b9cc2cc4d34e83d61fb73e74a1638296f06da","filename":"fit/core-reference/pom.xml","status":"modified","additions":31,"deletions":41,"changes":72,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fec04d0468ab4bc2933709a6f2122477e08f750c/fit%2Fcore-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fec04d0468ab4bc2933709a6f2122477e08f750c/fit%2Fcore-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fpom.xml?ref=fec04d0468ab4bc2933709a6f2122477e08f750c","patch":"@@ -1414,48 +1414,22 @@ under the License.\n       </build>\n     </profile>\n     \n+    <!-- Running IT with this profile requires prior build of ../build-tools with -Ppayara -->\n     <profile>\n-      <id>glassfish-it</id>\n-      \n-      <build>\n-        <defaultGoal>clean verify</defaultGoal>\n+      <id>payara-it</id>\n \n-        <plugins>\n-          <plugin>\n-            <groupId>org.codehaus.cargo</groupId>\n-            <artifactId>cargo-maven2-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <configuration>\n-              <container>\n-                <containerId>glassfish5x</containerId>\n-                <zipUrlInstaller>\n-                  <url>http://download.oracle.com/glassfish/5.0.1/release/glassfish-5.0.1.zip</url>\n-                  <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n-                  <extractDir>${project.build.directory}/cargo/extract</extractDir>\n-                </zipUrlInstaller>\n-                <log>${cargo.log}</log>\n-                <output>${cargo.output}</output>\n-                <dependencies>\n-                  <dependency>\n-                    <groupId>com.h2database</groupId>\n-                    <artifactId>h2</artifactId>\n-                  </dependency>\n-                </dependencies>\n-              </container>\n-              <configuration>\n-                <properties>\n-                  <cargo.jvmargs>-Dspring.profiles.active=embedded\n-                    -XX:+CMSClassUnloadingEnabled -XX:+UseG1GC -Xmx2048m -Xms1024m</cargo.jvmargs>\n-                </properties>\n-              </configuration>\n-            </configuration>\n-          </plugin>\n-        </plugins>\n-      </build>\n-    </profile>\n+      <dependencies>\n+        <dependency>\n+          <groupId>org.glassfish</groupId>\n+          <artifactId>javax.faces</artifactId>\n+          <version>${javax.faces.version}</version>\n+        </dependency>\n \n-    <profile>\n-      <id>payara-it</id>\n+        <dependency>\n+          <groupId>com.fasterxml.jackson.dataformat</groupId>\n+          <artifactId>jackson-dataformat-xml</artifactId>\n+        </dependency>\n+      </dependencies>\n \n       <build>\n         <defaultGoal>clean verify</defaultGoal>\n@@ -1467,9 +1441,9 @@ under the License.\n             <inherited>true</inherited>\n             <configuration>\n               <container>\n-                <containerId>glassfish5x</containerId>\n+                <containerId>payara</containerId>\n                 <zipUrlInstaller>\n-                  <url>https://repo1.maven.org/maven2/fish/payara/distributions/payara/5.193/payara-5.193.zip</url>\n+                  <url>https://repo1.maven.org/maven2/fish/payara/distributions/payara/${payara.version}/payara-${payara.version}.zip</url>\n                   <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n                   <extractDir>${project.build.directory}/cargo/extract</extractDir>\n                 </zipUrlInstaller>\n@@ -1488,6 +1462,22 @@ under the License.\n                     -XX:+CMSClassUnloadingEnabled -XX:+UseG1GC -Xmx2048m -Xms1024m</cargo.jvmargs>\n                 </properties>\n               </configuration>\n+              <deployables>\n+                <deployable>\n+                  <location>${basedir}/../build-tools/target/syncope-fit-build-tools-${project.version}</location>\n+                  <properties>\n+                    <context>syncope-fit-build-tools</context>\n+                  </properties>\n+                </deployable>\n+                <deployable>\n+                  <location>${project.build.directory}/${project.build.finalName}</location>\n+                  <pingURL>http://localhost:${cargo.servlet.port}/syncope/index.html</pingURL>\n+                  <pingTimeout>${cargo.deployable.ping.timeout}</pingTimeout>\n+                  <properties>\n+                    <context>syncope</context>\n+                  </properties>\n+                </deployable>\n+              </deployables>\n             </configuration>\n           </plugin>\n         </plugins>"},{"sha":"a7d02fd8c2f6ae42f50e42d55b196d75b6759162","filename":"pom.xml","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fec04d0468ab4bc2933709a6f2122477e08f750c/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fec04d0468ab4bc2933709a6f2122477e08f750c/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=fec04d0468ab4bc2933709a6f2122477e08f750c","patch":"@@ -518,6 +518,8 @@ under the License.\n     <cargo.output>${log.directory}/cargo-output.log</cargo.output>\n \n     <tomcat.version>9.0.29</tomcat.version>\n+    <payara.version>5.194</payara.version>\n+    <javax.faces.version>2.4.0</javax.faces.version>\n \n     <docker.postgresql.version>12</docker.postgresql.version>\n     <docker.mysql.version>8.0.18</docker.mysql.version>\n@@ -2459,7 +2461,7 @@ under the License.\n             <link>http://fasterxml.github.io/jackson-dataformat-yaml/javadoc/2.9.pr1/</link>\n             <link>http://fasterxml.github.io/jackson-datatype-joda/javadoc/2.10/</link>\n             <link>http://www.javadoc.io/doc/org.apache.camel/camel-core/3.0.0/</link>\n-\t    <link>http://www.javadoc.io/doc/org.apache.camel/camel-spring/3.0.0/</link>\n+            <link>http://www.javadoc.io/doc/org.apache.camel/camel-spring/3.0.0/</link>\n             <link>https://ci.apache.org/projects/wicket/apidocs/8.x/</link>\n             <link>https://commons.apache.org/proper/commons-lang/javadocs/api-release/</link>\n             <link>https://commons.apache.org/proper/commons-jexl/apidocs/</link>"},{"sha":"1b39de65eb6f22413531217ad24a08e5d779a3dd","filename":"src/main/asciidoc/getting-started/systemRequirements.adoc","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fec04d0468ab4bc2933709a6f2122477e08f750c/src%2Fmain%2Fasciidoc%2Fgetting-started%2FsystemRequirements.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fec04d0468ab4bc2933709a6f2122477e08f750c/src%2Fmain%2Fasciidoc%2Fgetting-started%2FsystemRequirements.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Fgetting-started%2FsystemRequirements.adoc?ref=fec04d0468ab4bc2933709a6f2122477e08f750c","patch":"@@ -37,7 +37,6 @@ Apache Syncope {docVersion} requires the latest JDK 11 that is available.\n Apache Syncope {docVersion} is verified with the following Java EE containers:\n \n  . http://tomcat.apache.org/download-90.cgi[Apache Tomcat 9^]\n- . https://javaee.github.io/glassfish/[Glassfish 5^]\n  . http://www.payara.fish/[Payara Server 5^]\n  . http://www.wildfly.org/[Wildfly 18^]\n "},{"sha":"df6a6667d00ef3fb4ebf238592afa0ff4a015b90","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/javaeecontainer.adoc","status":"modified","additions":13,"deletions":30,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fec04d0468ab4bc2933709a6f2122477e08f750c/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fec04d0468ab4bc2933709a6f2122477e08f750c/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fjavaeecontainer.adoc?ref=fec04d0468ab4bc2933709a6f2122477e08f750c","patch":"@@ -38,7 +38,6 @@ for the Master domain.\n `java:comp/env/jdbc/syncopeMasterDataSource` for the Master domain. +\n Each JavaEE Container provides its own way to accomplish this task:\n   * https://tomcat.apache.org/tomcat-9.0-doc/jdbc-pool.html[Apache Tomcat 9^]\n-  * https://javaeesquad.github.io/tutorials/glassfishDatasource/glassFishDatasource.html[Glassfish 5^]\n   * https://payara.gitbooks.io/payara-server/content/documentation/user-guides/connection-pools/connection-pools.html[Payara Server 5^]\n   * http://docs.wildfly.org/18/Admin_Guide.html#DataSource[Wildfly 18^]\n ****\n@@ -83,41 +82,25 @@ domain and MySQL): please also check that the connection parameters are the same\n [CAUTION]\n Be sure to put the corresponding JDBC driver JAR file under `$CATALINA_HOME/lib` for each datasource defined.\n \n-===== Glassfish 5 and Payara Server 5\n+===== Payara Server 5\n \n-Replace\n+Add\n \n [source,xml]\n ....\n-    <dependency>\n-      <groupId>org.apache.syncope.core</groupId>\n-      <artifactId>syncope-core-persistence-jpa</artifactId>\n-    </dependency>\n-....\n-\n-with\n+        <dependency>\n+          <groupId>org.glassfish</groupId>\n+          <artifactId>javax.faces</artifactId>\n+          <version>2.4.0</version>\n+        </dependency>\n \n-[source,xml]\n-....\n-    <dependency>\n-      <groupId>org.apache.syncope.core</groupId>\n-      <artifactId>syncope-core-persistence-jpa</artifactId>\n-      <version>${syncope.version}</version>\n-      <exclusions>\n-        <exclusion>\n-          <groupId>org.apache.bval</groupId>\n-          <artifactId>bval-jsr</artifactId>\n-        </exclusion>\n-      </exclusions>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.hibernate.validator</groupId>\n-      <artifactId>hibernate-validator</artifactId>\n-      <version>6.0.11.Final</version>\n-    </dependency>\n+        <dependency>\n+          <groupId>com.fasterxml.jackson.dataformat</groupId>\n+          <artifactId>jackson-dataformat-xml</artifactId>\n+        </dependency>\n ....\n \n-in `core/pom.xml`.\n+to `core/pom.xml`, `console/pom.xml` and `enduser/pom.xml`.\n \n When using a datasource for internal storage, be sure to add\n \n@@ -129,7 +112,7 @@ When using a datasource for internal storage, be sure to add\n </resource-ref>\n ....\n \n-right after `</context-root>` in `core/src/main/webapp/WEB-INF/glassfish-web.xml`, assuming that your Glassfish instance\n+right after `</context-root>` in `core/src/main/webapp/WEB-INF/glassfish-web.xml`, assuming that your Payara Server instance\n provides a datasource named `jdbc/syncopeMasterDataSource`.\n \n [TIP]"}]}