{"sha":"f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmYwMDBhZmE3ZTE1Y2FmYjVmN2ZjMjZiZDUzMzJiMzRlNjAyYzRmNmM=","commit":{"author":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2018-11-30T09:15:16Z"},"committer":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2018-11-30T09:52:42Z"},"message":"[SYNCOPE-1394] Added unclaim capability for user requests","tree":{"sha":"d73defca2266dbca52f9de130734132d22bf6f8a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d73defca2266dbca52f9de130734132d22bf6f8a"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/comments","author":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"committer":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"parents":[{"sha":"fe090c99c707502a29616f4b00e3246de762a06c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fe090c99c707502a29616f4b00e3246de762a06c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fe090c99c707502a29616f4b00e3246de762a06c"}],"stats":{"total":226,"additions":192,"deletions":34},"files":[{"sha":"dd53e218e18aca94b7f7761e27f64b9180c13aff","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLink.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -68,6 +68,7 @@ public enum ActionType {\n         REQUEST_PASSWORD_RESET(\"update\"),\n         DRYRUN(\"execute\"),\n         CLAIM(\"claim\"),\n+        UNCLAIM(\"unclaim\"),\n         SELECT(\"read\"),\n         CLOSE(\"read\"),\n         EXPORT(\"read\"),"},{"sha":"698e4cc633fbb5d79543a9eac6d4d1e2ec3531c0","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel.properties","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -142,6 +142,10 @@ claim.class=fa fa-ticket\n claim.title=claim\n claim.alt=claim icon\n \n+unclaim.class=fa fa-undo\n+unclaim.title=unclaim\n+unclaim.alt=unclaim icon\n+\n select.class=glyphicon glyphicon-ok\n select.title=select\n select.alt=select icon"},{"sha":"c6b254b04e3aa3a86eafce5bf7678972b14b1e68","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/panels/UserRequestFormDirectoryPanel.java","status":"modified","additions":33,"deletions":3,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserRequestFormDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserRequestFormDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserRequestFormDirectoryPanel.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -132,7 +132,7 @@ protected List<IColumn<UserRequestForm, String>> getColumns() {\n         columns.add(new DatePropertyColumn<>(\n                 new ResourceModel(\"dueDate\"), \"dueDate\", \"dueDate\"));\n         columns.add(new PropertyColumn<>(\n-                new ResourceModel(\"owner\"), \"owner\", \"owner\"));\n+                new ResourceModel(\"assignee\"), \"assignee\", \"assignee\"));\n \n         return columns;\n     }\n@@ -152,8 +152,30 @@ public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore\n                 ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n                 target.add(container);\n             }\n+\n         }, ActionLink.ActionType.CLAIM, FlowableEntitlement.USER_REQUEST_FORM_CLAIM);\n \n+        panel.add(new ActionLink<UserRequestForm>() {\n+\n+            private static final long serialVersionUID = -4496313424398213416L;\n+\n+            @Override\n+            public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore) {\n+                unclaimForm(model.getObject().getTaskId());\n+                SyncopeConsoleSession.get().info(getString(Constants.OPERATION_SUCCEEDED));\n+                UserRequestFormDirectoryPanel.this.getTogglePanel().close(target);\n+                target.add(container);\n+                ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n+            }\n+\n+            @Override\n+            protected boolean statusCondition(final UserRequestForm modelObject) {\n+                return SyncopeConsoleSession.get().getSelfTO().getUsername().\n+                        equals(model.getObject().getAssignee());\n+            }\n+\n+        }, ActionLink.ActionType.UNCLAIM, FlowableEntitlement.USER_REQUEST_FORM_UNCLAIM);\n+\n         panel.add(new ActionLink<UserRequestForm>() {\n \n             private static final long serialVersionUID = -3722207913631435501L;\n@@ -188,7 +210,7 @@ public void onSubmit(final AjaxRequestTarget target) {\n             @Override\n             protected boolean statusCondition(final UserRequestForm modelObject) {\n                 return SyncopeConsoleSession.get().getSelfTO().getUsername().\n-                        equals(model.getObject().getOwner());\n+                        equals(model.getObject().getAssignee());\n             }\n \n         }, ActionLink.ActionType.MANAGE_APPROVAL, FlowableEntitlement.USER_REQUEST_FORM_SUBMIT);\n@@ -237,7 +259,7 @@ public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore\n             @Override\n             protected boolean statusCondition(final UserRequestForm modelObject) {\n                 return SyncopeConsoleSession.get().getSelfTO().getUsername().\n-                        equals(model.getObject().getOwner());\n+                        equals(model.getObject().getAssignee());\n             }\n \n         }, ActionLink.ActionType.EDIT_APPROVAL, FlowableEntitlement.USER_REQUEST_FORM_SUBMIT);\n@@ -305,6 +327,14 @@ private void claimForm(final String taskId) {\n         }\n     }\n \n+    private void unclaimForm(final String taskId) {\n+        try {\n+            restClient.unclaimForm(taskId);\n+        } catch (SyncopeClientException scee) {\n+            SyncopeConsoleSession.get().error(getString(Constants.ERROR) + \": \" + scee.getMessage());\n+        }\n+    }\n+\n     private class FormUserWizardBuilder extends UserWizardBuilder {\n \n         private static final long serialVersionUID = 1854981134836384069L;"},{"sha":"7921249be4a102beffe4338dea71ab5c454b5159","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/rest/UserRequestRestClient.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -73,6 +73,10 @@ public UserRequestForm claimForm(final String taskKey) {\n         return getService(UserRequestService.class).claimForm(taskKey);\n     }\n \n+    public UserRequestForm unclaimForm(final String taskKey) {\n+        return getService(UserRequestService.class).unclaimForm(taskKey);\n+    }\n+\n     public void submitForm(final UserRequestForm form) {\n         getService(UserRequestService.class).submitForm(form);\n     }"},{"sha":"41ac1065be43f44b84d35518ea02ab7e0b8ece23","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/UserRequests.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -19,8 +19,9 @@ key=Key\n description=Description\n createTime=Create Time\n dueDate=Due Date\n-owner=Owner\n+assignee=Assignee\n claim=Claim\n+unclaim=Unclaim\n manage=Manage\n userRequests=User Requests\n delete=Delete"},{"sha":"e355780aeb1b63712c851c49f979ce135029f4d6","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/UserRequests_it.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_it.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -19,8 +19,9 @@ key=Chiave\n description=Descrizione\n createTime=Data di creazione\n dueDate=Scadenza\n-owner=Esecutore\n+assignee=Esecutore\n claim=Richiedi\n+unclaim=Annulla richiesta\n manage=Gestisci\n userRequests=Richieste utente\n delete=Rimuovi"},{"sha":"51ae26a489ebcd1f7c1817a4b082bf328a64d6bc","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/UserRequests_ja.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ja.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -19,8 +19,9 @@ key=\\u30ad\\u30fc\n description=\\u8aac\\u660e\n createTime=\\u4f5c\\u6210\\u6642\\u523b\n dueDate=\\u671f\\u9650\n-owner=\\u30aa\\u30fc\\u30ca\\u30fc\n+assignee=\\u30aa\\u30fc\\u30ca\\u30fc\n claim=\\u7533\\u8acb\n+unclaim=\\u7533\\u3057\\u7acb\\u3066\\u3092\\u53d6\\u308a\\u6d88\\u3059\n manage=\\u7ba1\\u7406\n userRequests=User Requests\n delete=\\u524a\\u9664"},{"sha":"e9c3e92bcee70331279a89bc94d860029a096c8c","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/UserRequests_pt_BR.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_pt_BR.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -19,8 +19,9 @@ key=Chave\n description=Descri\\u00e7\\u00e3o\n createTime=Tempo de Cria\\u00e7\\u00e3o\n dueDate=Data acordada\n-owner=Propriet\\u00e1rio\n+assignee=Propriet\\u00e1rio\n claim=Requerimento\n+unclaim=Cancelar requerimento\n manage=Ger\\u00eancia\n userRequests=User Requests\n delete=Excluir"},{"sha":"f97c4ef8ed8725ddb098794f9b90873abcce92eb","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/UserRequests_ru.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FUserRequests_ru.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -26,9 +26,10 @@ createTime=\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0438\\u\n # dueDate=\\u00d0\\u00a1\\u00d1\\u0080\\u00d0\\u00be\\u00d0\\u00ba\n dueDate=\\u0421\\u0440\\u043e\\u043a\n # owner=\\u00d0\\u0092\\u00d0\\u00bb\\u00d0\\u00b0\\u00d0\\u00b4\\u00d0\\u00b5\\u00d0\\u00bb\\u00d0\\u00b5\\u00d1\\u0086\n-owner=\\u0412\\u043b\\u0430\\u0434\\u0435\\u043b\\u0435\\u0446\n+assignee=\\u0412\\u043b\\u0430\\u0434\\u0435\\u043b\\u0435\\u0446\n # claim=\\u00d0\\u0092\\u00d1\\u008b\\u00d0\\u00bf\\u00d0\\u00be\\u00d0\\u00bb\\u00d0\\u00bd\\u00d0\\u00b8\\u00d1\\u0082\\u00d1\\u008c \\u00d1\\u0081\\u00d0\\u00be\\u00d0\\u00b3\\u00d0\\u00bb\\u00d0\\u00b0\\u00d1\\u0081\\u00d0\\u00be\\u00d0\\u00b2\\u00d0\\u00b0\\u00d0\\u00bd\\u00d0\\u00b8\\u00d0\\u00b5\n claim=\\u0412\\u044b\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u044c \\u0441\\u043e\\u0433\\u043b\\u0430\\u0441\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\n+unclaim=\\u041e\\u0442\\u043c\\u0435\\u043d\\u0438\\u0442\\u044c \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441\n # manage=\\u00d0\\u00a3\\u00d0\\u00bf\\u00d1\\u0080\\u00d0\\u00b0\\u00d0\\u00b2\\u00d0\\u00bb\\u00d0\\u00b5\\u00d0\\u00bd\\u00d0\\u00b8\\u00d0\\u00b5\n manage=\\u0423\\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435\n # approvals=\\u00d0\\u0097\\u00d0\\u00b0\\u00d1\\u008f\\u00d0\\u00b2\\u00d0\\u00ba\\u00d0\\u00b8"},{"sha":"753a2d8856971d339e59590aa8ba33a2ec375732","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/UserRequestFormsWidget.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -16,5 +16,5 @@\n # under the License.\n alerts.view.all=View all forms\n duedate=Due date\n-owner=Owner\n+assignee=Assignee\n summary=${number} pending form(s)"},{"sha":"796636ee9ff530857178dd42af1f1d4973ba8a23","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/UserRequestFormsWidget_it.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_it.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -16,5 +16,5 @@\n # under the License.\n alerts.view.all=Tutte le form\n duedate=Scadenza\n-owner=Assegnato\n+assignee=Assegnato\n summary=${number} form pendenti"},{"sha":"ef5d77ffeb4471b321594969408c37be5563bd5c","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/UserRequestFormsWidget_ja.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ja.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -16,5 +16,5 @@\n # under the License.\n alerts.view.all=View all forms\n duedate=\\u671f\\u9650\n-owner=\\u30aa\\u30fc\\u30ca\\u30fc\n+assignee=\\u30aa\\u30fc\\u30ca\\u30fc\n summary=${number} pending form(s)"},{"sha":"753a2d8856971d339e59590aa8ba33a2ec375732","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/UserRequestFormsWidget_pt_BR.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_pt_BR.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -16,5 +16,5 @@\n # under the License.\n alerts.view.all=View all forms\n duedate=Due date\n-owner=Owner\n+assignee=Assignee\n summary=${number} pending form(s)"},{"sha":"bb1fa45ac87b2953a83a1efa81442e116ead2422","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/UserRequestFormsWidget_ru.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FUserRequestFormsWidget_ru.properties?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -17,5 +17,5 @@\n #\n alerts.view.all=View all forms\n duedate=\\u0421\\u0440\\u043e\\u043a\n-owner=\\u0412\\u043b\\u0430\\u0434\\u0435\\u043b\\u0435\\u0446\n+assignee=\\u0412\\u043b\\u0430\\u0434\\u0435\\u043b\\u0435\\u0446\n summary=${number} pending form(s)"},{"sha":"a073a0bb5c013c79b80cca5710f5e4d4a59488c5","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/UserRequestForm.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -51,7 +51,7 @@ public class UserRequestForm extends BaseBean {\n \n     private Date dueDate;\n \n-    private String owner;\n+    private String assignee;\n \n     private UserTO userTO;\n \n@@ -129,12 +129,12 @@ public void setDueDate(final Date dueDate) {\n         }\n     }\n \n-    public String getOwner() {\n-        return owner;\n+    public String getAssignee() {\n+        return assignee;\n     }\n \n-    public void setOwner(final String owner) {\n-        this.owner = owner;\n+    public void setAssignee(final String assignee) {\n+        this.assignee = assignee;\n     }\n \n     public UserTO getUserTO() {"},{"sha":"0c41c99bbd45307be3b43169315588c0a568b2ee","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/types/FlowableEntitlement.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -42,6 +42,8 @@ public final class FlowableEntitlement {\n \n     public static final String USER_REQUEST_FORM_CLAIM = \"USER_REQUEST_FORM_CLAIM\";\n \n+    public static final String USER_REQUEST_FORM_UNCLAIM = \"USER_REQUEST_FORM_UNCLAIM\";\n+\n     public static final String USER_REQUEST_FORM_SUBMIT = \"USER_REQUEST_FORM_SUBMIT\";\n \n     public static final String USER_REQUEST_START = \"USER_REQUEST_START\";"},{"sha":"f7d7a352a70a8138ffcad42528ce349c61afaee9","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/api/UserRequestHandler.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -103,6 +103,14 @@ Pair<Integer, List<UserRequestForm>> getForms(\n      * @return updated form\n      */\n     UserRequestForm claimForm(String taskId);\n+    \n+    /**\n+     * Unclaim a form for a given object.\n+     *\n+     * @param taskId Workflow task to which the form is associated\n+     * @return updated form\n+     */\n+    UserRequestForm unclaimForm(String taskId);\n \n     /**\n      * Submit a form."},{"sha":"1f539fbd90e864281296a2f36de84cce76488817","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableUserRequestHandler.java","status":"modified","additions":35,"deletions":7,"changes":42,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -62,6 +62,7 @@\n import org.flowable.engine.impl.persistence.entity.ExecutionEntity;\n import org.flowable.engine.impl.persistence.entity.HistoricFormPropertyEntity;\n import org.flowable.engine.runtime.ProcessInstance;\n+import org.flowable.identitylink.api.IdentityLinkType;\n import org.flowable.task.api.Task;\n import org.flowable.task.api.TaskQuery;\n import org.flowable.task.api.history.HistoricTaskInstance;\n@@ -310,7 +311,7 @@ protected UserRequestForm getForm(final Task task, final TaskFormData fd) {\n         formTO.setDueDate(task.getDueDate());\n         formTO.setExecutionId(task.getExecutionId());\n         formTO.setFormKey(task.getFormKey());\n-        formTO.setOwner(task.getOwner());\n+        formTO.setAssignee(task.getAssignee());\n \n         return formTO;\n     }\n@@ -328,7 +329,7 @@ protected UserRequestForm getForm(final HistoricTaskInstance task) {\n         formTO.setDueDate(task.getDueDate());\n         formTO.setExecutionId(task.getExecutionId());\n         formTO.setFormKey(task.getFormKey());\n-        formTO.setOwner(task.getOwner());\n+        formTO.setAssignee(task.getAssignee());\n \n         HistoricActivityInstance historicActivityInstance = engine.getHistoryService().\n                 createHistoricActivityInstanceQuery().\n@@ -509,8 +510,8 @@ protected Pair<Integer, List<UserRequestForm>> getForms(\n                     query.orderByTaskDueDate();\n                     break;\n \n-                case \"owner\":\n-                    query.orderByTaskOwner();\n+                case \"assignee\":\n+                    query.orderByTaskAssignee();\n                     break;\n \n                 default:\n@@ -570,9 +571,21 @@ public UserRequestForm claimForm(final String taskId) {\n             }\n         }\n \n+        boolean hasAssignees =\n+                engine.getTaskService().getIdentityLinksForTask(taskId).stream().anyMatch(identityLink -> {\n+                    return IdentityLinkType.ASSIGNEE.equals(identityLink.getType());\n+                });\n+        if (hasAssignees) {\n+            try {\n+                engine.getTaskService().unclaim(taskId);\n+            } catch (FlowableException e) {\n+                throw new WorkflowException(\"While unclaiming task \" + taskId, e);\n+            }\n+        }\n+\n         Task task;\n         try {\n-            engine.getTaskService().setOwner(taskId, authUser);\n+            engine.getTaskService().claim(taskId, authUser);\n             task = FlowableRuntimeUtils.createTaskQuery(engine, true).taskId(taskId).singleResult();\n         } catch (FlowableException e) {\n             throw new WorkflowException(\"While reading task \" + taskId, e);\n@@ -581,6 +594,21 @@ public UserRequestForm claimForm(final String taskId) {\n         return FlowableUserRequestHandler.this.getForm(task, parsed.getRight());\n     }\n \n+    @Override\n+    public UserRequestForm unclaimForm(final String taskId) {\n+        Pair<Task, TaskFormData> parsed = parseTask(taskId);\n+\n+        Task task;\n+        try {\n+            engine.getTaskService().unclaim(taskId);\n+            task = FlowableRuntimeUtils.createTaskQuery(engine, true).taskId(taskId).singleResult();\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\"While unclaiming task \" + taskId, e);\n+        }\n+\n+        return FlowableUserRequestHandler.this.getForm(task, parsed.getRight());\n+    }\n+\n     private Map<String, String> getPropertiesForSubmit(final UserRequestForm form) {\n         Map<String, String> props = new HashMap<>();\n         form.getProperties().stream().\n@@ -596,9 +624,9 @@ public WorkflowResult<UserPatch> submitForm(final UserRequestForm form) {\n         Pair<Task, TaskFormData> parsed = parseTask(form.getTaskId());\n \n         String authUser = AuthContextUtils.getUsername();\n-        if (!parsed.getLeft().getOwner().equals(authUser)) {\n+        if (!parsed.getLeft().getAssignee().equals(authUser)) {\n             throw new WorkflowException(new IllegalArgumentException(\"Task \" + form.getTaskId() + \" assigned to \"\n-                    + parsed.getLeft().getOwner() + \" but submitted by \" + authUser));\n+                    + parsed.getLeft().getAssignee() + \" but submitted by \" + authUser));\n         }\n \n         String procInstId = parsed.getLeft().getProcessInstanceId();"},{"sha":"d3851cd30226ff531f060e60d10bbe8f36aa38ad","filename":"ext/flowable/logic/src/main/java/org/apache/syncope/core/logic/UserRequestLogic.java","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -143,6 +143,15 @@ public UserRequestForm claimForm(final String taskId) {\n         return form;\n     }\n \n+    @PreAuthorize(\"isAuthenticated()\")\n+    public UserRequestForm unclaimForm(final String taskId) {\n+        UserRequestForm form = userRequestHandler.unclaimForm(taskId);\n+        securityChecks(form.getUsername(),\n+                FlowableEntitlement.USER_REQUEST_FORM_UNCLAIM,\n+                \"Unclaiming form \" + taskId + \" not allowed\");\n+        return form;\n+    }\n+\n     @PreAuthorize(\"isAuthenticated()\")\n     @Transactional(readOnly = true)\n     public Pair<Integer, List<UserRequestForm>> getForms("},{"sha":"c58020a72e324fe32abcdc4850f0889157718cb5","filename":"ext/flowable/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/UserRequestService.java","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -47,7 +47,8 @@\n  */\n @Tag(name = \"Flowable\")\n @SecurityRequirements({\n-    @SecurityRequirement(name = \"BasicAuthentication\"),\n+    @SecurityRequirement(name = \"BasicAuthentication\")\n+    ,\n     @SecurityRequirement(name = \"Bearer\") })\n @Path(\"flowable/userRequests\")\n public interface UserRequestService extends JAXRSService {\n@@ -113,6 +114,17 @@ void cancel(\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n     UserRequestForm claimForm(@NotNull @PathParam(\"taskId\") String taskId);\n \n+    /**\n+     * Cancels request to manage the form for the given task id.\n+     *\n+     * @param taskId workflow task id\n+     * @return the workflow form for the given task id\n+     */\n+    @POST\n+    @Path(\"forms/{taskId}/unclaim\")\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    UserRequestForm unclaimForm(@NotNull @PathParam(\"taskId\") String taskId);\n+\n     /**\n      * Submits a user request form.\n      *"},{"sha":"580ca7651c4f4b75b0a775ecce38d91672b0e84e","filename":"ext/flowable/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/UserRequestServiceImpl.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -68,6 +68,11 @@ public void cancel(final String executionId, final String reason) {\n     public UserRequestForm claimForm(final String taskId) {\n         return logic.claimForm(taskId);\n     }\n+    \n+    @Override\n+    public UserRequestForm unclaimForm(final String taskId) {\n+        return logic.unclaimForm(taskId);\n+    }\n \n     @Override\n     public PagedResult<UserRequestForm> getForms(final UserRequestFormQuery query) {"},{"sha":"63e16721b2028b1142bd74d71d1de7ffd63db24f","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserSelfITCase.java","status":"modified","additions":58,"deletions":8,"changes":66,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f000afa7e15cafb5f7fc26bd5332b34e602c4f6c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java?ref=f000afa7e15cafb5f7fc26bd5332b34e602c4f6c","patch":"@@ -106,7 +106,7 @@ public void create() {\n     public void createAndApprove() {\n         assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n-        // self-create user with membership: goes 'createApproval' with resources and membership but no propagation\n+        // 1. self-create user with membership: goes 'createApproval' with resources and membership but no propagation\n         UserTO userTO = UserITCase.getUniqueSampleTO(\"anonymous@syncope.apache.org\");\n         userTO.getMemberships().add(\n                 new MembershipTO.Builder().group(\"29f96485-729e-4d31-88a1-6fc60e4677f3\").build());\n@@ -129,7 +129,7 @@ public void createAndApprove() {\n             assertEquals(ClientExceptionType.NotFound, e.getType());\n         }\n \n-        // now approve and verify that propagation has happened\n+        // 2. now approve and verify that propagation has happened\n         UserRequestForm form = userRequestService.getForms(\n                 new UserRequestFormQuery.Builder().user(userTO.getKey()).build()).getResult().get(0);\n         form = userRequestService.claimForm(form.getTaskId());\n@@ -140,6 +140,56 @@ public void createAndApprove() {\n         assertNotNull(resourceService.readConnObject(RESOURCE_NAME_TESTDB, AnyTypeKind.USER.name(), userTO.getKey()));\n     }\n \n+    @Test\n+    public void createAndUnclaim() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        // 1. self-create user with membership: goes 'createApproval' with resources and membership but no propagation\n+        UserTO userTO = UserITCase.getUniqueSampleTO(\"anonymous@syncope.apache.org\");\n+        userTO.getMemberships().add(\n+                new MembershipTO.Builder().group(\"29f96485-729e-4d31-88a1-6fc60e4677f3\").build());\n+        userTO.getResources().add(RESOURCE_NAME_TESTDB);\n+        SyncopeClient anonClient = clientFactory.create();\n+        userTO = anonClient.getService(UserSelfService.class).\n+                create(userTO, true).\n+                readEntity(new GenericType<ProvisioningResult<UserTO>>() {\n+                }).getEntity();\n+        assertNotNull(userTO);\n+        assertEquals(\"createApproval\", userTO.getStatus());\n+        assertFalse(userTO.getMemberships().isEmpty());\n+        assertFalse(userTO.getResources().isEmpty());\n+        try {\n+            resourceService.readConnObject(RESOURCE_NAME_TESTDB, AnyTypeKind.USER.name(), userTO.getKey());\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+\n+        // 2. unclaim and verify that propagation has NOT happened\n+        UserRequestForm form = userRequestService.getForms(\n+                new UserRequestFormQuery.Builder().user(userTO.getKey()).build()).getResult().get(0);\n+        form = userRequestService.unclaimForm(form.getTaskId());\n+        assertNull(form.getAssignee());\n+        assertNotNull(userTO);\n+        assertNotEquals(\"active\", userTO.getStatus());\n+        try {\n+            resourceService.readConnObject(RESOURCE_NAME_TESTDB, AnyTypeKind.USER.name(), userTO.getKey());\n+            fail();\n+        } catch (Exception e) {\n+            assertNotNull(e);\n+        }\n+\n+        // 3. approve and verify that propagation has happened\n+        form = userRequestService.getForms(\n+                new UserRequestFormQuery.Builder().user(userTO.getKey()).build()).getResult().get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n+        userTO = userRequestService.submitForm(form);\n+        assertNotNull(userTO);\n+        assertEquals(\"active\", userTO.getStatus());\n+        assertNotNull(resourceService.readConnObject(RESOURCE_NAME_TESTDB, AnyTypeKind.USER.name(), userTO.getKey()));\n+    }\n+\n     @Test\n     public void read() {\n         UserTO user = createUser(UserITCase.getUniqueSampleTO(\"selfread@syncope.apache.org\")).getEntity();\n@@ -428,7 +478,7 @@ public void createWithReject() {\n         assertNotNull(form.getUsername());\n         assertEquals(userTO.getUsername(), form.getUsername());\n         assertNotNull(form.getTaskId());\n-        assertNull(form.getOwner());\n+        assertNull(form.getAssignee());\n \n         // 3. claim task as rossini, with role \"User manager\" granting entitlement to claim forms but not in\n         // groupForWorkflowApproval, designated for approval in workflow definition: fail\n@@ -457,7 +507,7 @@ public void createWithReject() {\n         form = userService3.claimForm(form.getTaskId());\n         assertNotNull(form);\n         assertNotNull(form.getTaskId());\n-        assertNotNull(form.getOwner());\n+        assertNotNull(form.getAssignee());\n \n         // 5. reject user\n         form.getProperty(\"approveCreate\").get().setValue(Boolean.FALSE.toString());\n@@ -533,7 +583,7 @@ public void createWithApproval() {\n         assertNotNull(form.getUserTO());\n         assertEquals(updatedUsername, form.getUserTO().getUsername());\n         assertNull(form.getUserPatch());\n-        assertNull(form.getOwner());\n+        assertNull(form.getAssignee());\n \n         // 4. claim task (as admin)\n         form = userRequestService.claimForm(form.getTaskId());\n@@ -542,7 +592,7 @@ public void createWithApproval() {\n         assertNotNull(form.getUserTO());\n         assertEquals(updatedUsername, form.getUserTO().getUsername());\n         assertNull(form.getUserPatch());\n-        assertNotNull(form.getOwner());\n+        assertNotNull(form.getAssignee());\n \n         // 5. approve user (and verify that propagation occurred)\n         form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n@@ -595,7 +645,7 @@ public void updateApproval() {\n                 new UserRequestFormQuery.Builder().user(created.getKey()).build()).getResult().get(0);\n         assertNotNull(form);\n         assertNotNull(form.getTaskId());\n-        assertNull(form.getOwner());\n+        assertNull(form.getAssignee());\n         assertNotNull(form.getUserTO());\n         assertNotNull(form.getUserPatch());\n         assertEquals(patch, form.getUserPatch());\n@@ -684,7 +734,7 @@ public void issueSYNCOPE15() {\n         form = userService3.claimForm(form.getTaskId());\n         assertNotNull(form);\n         assertNotNull(form.getTaskId());\n-        assertNotNull(form.getOwner());\n+        assertNotNull(form.getAssignee());\n \n         // 4. second claim task by admin\n         form = userRequestService.claimForm(form.getTaskId());"}]}