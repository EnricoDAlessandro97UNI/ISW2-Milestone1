{"sha":"c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM5MmMzNGE5ZTQ5ZjBmODgzZWQ3MThjNmFhNmNiMzY3M2U1ZDljNWI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-13T08:28:51Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-13T08:32:47Z"},"message":"[SYNCOPE-1396] Configuration option for TLSClientParameters","tree":{"sha":"5353a433b9ee9bcc7c1d6854cf0620814d734c41","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5353a433b9ee9bcc7c1d6854cf0620814d734c41"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"b5f4cb42d3ed31f96cb85e0aafe00c20a89e96dd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b5f4cb42d3ed31f96cb85e0aafe00c20a89e96dd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b5f4cb42d3ed31f96cb85e0aafe00c20a89e96dd"}],"stats":{"total":41,"additions":36,"deletions":5},"files":[{"sha":"26bc71b3a5de012e6a1a167cb339eafbe9423c49","filename":"client/lib/src/main/java/org/apache/syncope/client/lib/SyncopeClient.java","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClient.java?ref=c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","patch":"@@ -32,12 +32,14 @@\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.cxf.configuration.jsse.TLSClientParameters;\n import org.apache.cxf.jaxrs.client.Client;\n import org.apache.cxf.jaxrs.client.ClientConfiguration;\n import org.apache.cxf.jaxrs.client.JAXRSClientFactoryBean;\n import org.apache.cxf.jaxrs.client.WebClient;\n import org.apache.cxf.transport.common.gzip.GZIPInInterceptor;\n import org.apache.cxf.transport.common.gzip.GZIPOutInterceptor;\n+import org.apache.cxf.transport.http.HTTPConduit;\n import org.apache.cxf.transport.http.URLConnectionHTTPConduit;\n import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.search.AnyObjectFiqlSearchConditionBuilder;\n@@ -70,19 +72,23 @@ public class SyncopeClient {\n \n     private final boolean useCompression;\n \n+    private final TLSClientParameters tlsClientParameters;\n+\n     public SyncopeClient(\n             final MediaType mediaType,\n             final JAXRSClientFactoryBean restClientFactory,\n             final RestClientExceptionMapper exceptionMapper,\n             final AuthenticationHandler handler,\n-            final boolean useCompression) {\n+            final boolean useCompression,\n+            final TLSClientParameters tlsClientParameters) {\n \n         this.mediaType = mediaType;\n         this.restClientFactory = restClientFactory;\n         if (this.restClientFactory.getHeaders() == null) {\n             this.restClientFactory.setHeaders(new HashMap<>());\n         }\n         this.exceptionMapper = exceptionMapper;\n+        this.tlsClientParameters = tlsClientParameters;\n         init(handler);\n         this.useCompression = useCompression;\n     }\n@@ -247,6 +253,10 @@ public <T> T getService(final Class<T> serviceClass) {\n                 config.getInInterceptors().add(new GZIPInInterceptor());\n                 config.getOutInterceptors().add(new GZIPOutInterceptor());\n             }\n+            if (tlsClientParameters != null) {\n+                HTTPConduit httpConduit = (HTTPConduit) config.getConduit();\n+                httpConduit.setTlsClientParameters(tlsClientParameters);\n+            }\n \n             return serviceInstance;\n         }"},{"sha":"f055f83dfefb3e65fa2ceef47fc976f20dade077","filename":"client/lib/src/main/java/org/apache/syncope/client/lib/SyncopeClientFactoryBean.java","status":"modified","additions":18,"deletions":1,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClientFactoryBean.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClientFactoryBean.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Flib%2FSyncopeClientFactoryBean.java?ref=c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","patch":"@@ -29,6 +29,7 @@\n import javax.ws.rs.core.MediaType;\n import javax.xml.bind.Marshaller;\n import org.apache.commons.lang3.StringUtils;\n+import org.apache.cxf.configuration.jsse.TLSClientParameters;\n import org.apache.cxf.feature.Feature;\n import org.apache.cxf.ext.logging.LoggingFeature;\n import org.apache.cxf.jaxrs.client.JAXRSClientFactoryBean;\n@@ -83,6 +84,8 @@ public static ContentType fromString(final String value) {\n \n     private boolean useCompression;\n \n+    private TLSClientParameters tlsClientParameters;\n+\n     private JAXRSClientFactoryBean restClientFactoryBean;\n \n     protected JacksonJaxbJsonProvider defaultJsonProvider() {\n@@ -226,6 +229,19 @@ public boolean isUseCompression() {\n         return useCompression;\n     }\n \n+    /**\n+     * Sets the client TLS configuration.\n+     *\n+     * @param tlsClientParameters client TLS configuration\n+     */\n+    public void setTlsClientParameters(final TLSClientParameters tlsClientParameters) {\n+        this.tlsClientParameters = tlsClientParameters;\n+    }\n+\n+    public TLSClientParameters getTlsClientParameters() {\n+        return tlsClientParameters;\n+    }\n+\n     public JAXRSClientFactoryBean getRestClientFactoryBean() {\n         return restClientFactoryBean == null\n                 ? defaultRestClientFactoryBean()\n@@ -285,6 +301,7 @@ public SyncopeClient create(final AuthenticationHandler handler) {\n                 getRestClientFactoryBean(),\n                 getExceptionMapper(),\n                 handler,\n-                useCompression);\n+                useCompression,\n+                tlsClientParameters);\n     }\n }"},{"sha":"0e9ce1af8673aa4999b251a019daa26f8b184e91","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/restfulservices.adoc","status":"modified","additions":7,"deletions":3,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Frestfulservices.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Frestfulservices.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Frestfulservices.adoc?ref=c92c34a9e49f0f883ed718c6aa6cb3673e5d9c5b","patch":"@@ -550,17 +550,21 @@ SyncopeClientFactoryBean clientFactory = new SyncopeClientFactoryBean().\n ----\n \n You might also select a specific <<domains,domain>> - other than `Master`, choose to exchange XML payloads - rather\n-than JSON (default), or to select \n-https://en.wikipedia.org/wiki/HTTP_compression[HTTP compression^] (more options in the\n+than JSON (default), to select \n+https://en.wikipedia.org/wiki/HTTP_compression[HTTP compression^] or to set the\n+https://cxf.apache.org/javadoc/latest/org/apache/cxf/configuration/jsse/TLSClientParameters.html[TLS client configuration^]\n+(more options in the\n http://syncope.apache.org/apidocs/2.1/org/apache/syncope/client/lib/SyncopeClientFactoryBean.html[Javadoc^]):\n \n [source,java]\n ----\n+TLSClientParameters tlsClientParameters = ...;\n SyncopeClientFactoryBean clientFactory = new SyncopeClientFactoryBean().\n               setAddress(\"http://localhost:9080/syncope/rest/\").\n               setDomain(\"Two\").\n               setContentType(SyncopeClientFactoryBean.ContentType.XML).\n-              setUseCompression(true);\n+              setUseCompression(true).\n+              setTlsClientParameters(tlsClientParameters);\n ----\n \n At this point an instance of `SyncopeClient` can be obtained by passing the login credentials via:"}]}