{"sha":"34898008ed897ee54cce87cd01303109cf8c209c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjM0ODk4MDA4ZWQ4OTdlZTU0Y2NlODdjZDAxMzAzMTA5Y2Y4YzIwOWM=","commit":{"author":{"name":"Misagh Moayyed","email":"mm1844@gmail.com","date":"2020-07-15T10:50:36Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2020-07-15T10:50:36Z"},"message":"SYNCOPE-1545: Enable Swagger support for WA (#204)","tree":{"sha":"7de247ef9ba7f1466d5d506a5def24b9dfb809db","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7de247ef9ba7f1466d5d506a5def24b9dfb809db"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/34898008ed897ee54cce87cd01303109cf8c209c","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfDt98CRBK7hj4Ov3rIwAAdHIIAGTw4nUDoW5nYmaT6xNmDXR1\nRuosImdzj9AW/422H3YlRCG0lEo+x5oQ2JtyUYVEEcngpd0+TUpOKolULMm5rZx6\nRszJKvYRcPLKaG1faVNbxBXsgWZo5MiOeK9/c8MHl+bFfxz/WVjDaECeuw9064Hk\nvHSucGFswQZXvh+VIG/ZBh+HvwiyYnv+qSRWYYco9pYu+pugAuc25IH+ngi326kI\nQhT5eTgCTe52EsUN+WN6yDxgvsroYsEGXB+EYnvYuePIax08uW++Fh5Mecb/gpDC\nfUj4JQpVVtMmO3P+6tTrdnV/QsUxpSQSg2e9+j2MNBkX1wThvA8MaeXUPeg/kMI=\n=gxo3\n-----END PGP SIGNATURE-----\n","payload":"tree 7de247ef9ba7f1466d5d506a5def24b9dfb809db\nparent 94daac48b247bf73b8394d333ade507ead78286c\nauthor Misagh Moayyed <mm1844@gmail.com> 1594810236 +0430\ncommitter GitHub <noreply@github.com> 1594810236 +0430\n\nSYNCOPE-1545: Enable Swagger support for WA (#204)\n\n"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/34898008ed897ee54cce87cd01303109cf8c209c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/34898008ed897ee54cce87cd01303109cf8c209c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/34898008ed897ee54cce87cd01303109cf8c209c/comments","author":{"login":"mmoayyed","id":1205228,"node_id":"MDQ6VXNlcjEyMDUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1205228?v=4","gravatar_id":"","url":"https://api.github.com/users/mmoayyed","html_url":"https://github.com/mmoayyed","followers_url":"https://api.github.com/users/mmoayyed/followers","following_url":"https://api.github.com/users/mmoayyed/following{/other_user}","gists_url":"https://api.github.com/users/mmoayyed/gists{/gist_id}","starred_url":"https://api.github.com/users/mmoayyed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmoayyed/subscriptions","organizations_url":"https://api.github.com/users/mmoayyed/orgs","repos_url":"https://api.github.com/users/mmoayyed/repos","events_url":"https://api.github.com/users/mmoayyed/events{/privacy}","received_events_url":"https://api.github.com/users/mmoayyed/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"94daac48b247bf73b8394d333ade507ead78286c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/94daac48b247bf73b8394d333ade507ead78286c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/94daac48b247bf73b8394d333ade507ead78286c"}],"stats":{"total":49,"additions":48,"deletions":1},"files":[{"sha":"1267324ffbbd4967e1e078f46b246800a20c6c8c","filename":"docker/wa/src/main/resources/wa.properties","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fwa.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fwa.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fwa.properties?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -49,3 +49,8 @@ cas.monitor.endpoints.endpoint.defaults.access=AUTHENTICATED\n \n spring.security.user.name=${anonymousUser}\n spring.security.user.password=${anonymousKey}\n+\n+springdoc.show-actuator=true\n+springdoc.model-and-view-allowed=true\n+springdoc.writer-with-default-pretty-printer=true\n+springdoc.swagger-ui.displayRequestDuration=true"},{"sha":"c00cea1f09da32380352faa46abc5788ee1d0722","filename":"fit/wa-reference/src/main/resources/wa.properties","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -54,3 +54,8 @@ cas.monitor.endpoints.endpoint.defaults.access=AUTHENTICATED\n \n spring.security.user.name=${anonymousUser}\n spring.security.user.password=${anonymousKey}\n+\n+springdoc.show-actuator=true\n+springdoc.model-and-view-allowed=true\n+springdoc.writer-with-default-pretty-printer=true\n+springdoc.swagger-ui.displayRequestDuration=true"},{"sha":"59c4d21b5f0d601f055b799c8ebc1db59ae3c7fa","filename":"pom.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -1662,6 +1662,11 @@ under the License.\n         <artifactId>cas-server-support-oidc-services</artifactId>\n         <version>${cas.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.apereo.cas</groupId>\n+        <artifactId>cas-server-support-swagger</artifactId>\n+        <version>${cas.version}</version>\n+      </dependency>\n       <dependency>\n         <groupId>org.apereo.cas</groupId>\n         <artifactId>cas-server-core-authentication-attributes</artifactId>"},{"sha":"bb361aaca3a3768e17c11b62a79519acd0e371a8","filename":"wa/starter/pom.xml","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fpom.xml?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -250,7 +250,11 @@ under the License.\n       <groupId>org.apereo.cas</groupId>\n       <artifactId>cas-server-core-services-authentication</artifactId>\n     </dependency>\n-\n+    <dependency>\n+      <groupId>org.apereo.cas</groupId>\n+      <artifactId>cas-server-support-swagger</artifactId>\n+    </dependency>\n+    \n     <dependency>\n       <groupId>org.springframework.boot</groupId>\n       <artifactId>spring-boot-starter-web</artifactId>"},{"sha":"9f09c50c336cc2de1d7c1b2844805eac87acd728","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/config/SyncopeWAConfiguration.java","status":"modified","additions":21,"deletions":0,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -38,6 +38,9 @@\n import com.github.benmanes.caffeine.cache.Caffeine;\n import com.github.benmanes.caffeine.cache.LoadingCache;\n import com.warrenstrange.googleauth.IGoogleAuthenticator;\n+import io.swagger.v3.oas.models.OpenAPI;\n+import io.swagger.v3.oas.models.info.Contact;\n+import io.swagger.v3.oas.models.info.Info;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.keymaster.client.api.model.NetworkService;\n import org.apache.syncope.common.keymaster.client.api.startstop.KeymasterStart;\n@@ -199,6 +202,19 @@ public OidcJsonWebKeystoreGeneratorService oidcJsonWebKeystoreGeneratorService(f\n         return new SyncopeWAOIDCJWKSGeneratorService(restClient);\n     }\n \n+    @Bean\n+    public OpenAPI casSwaggerOpenApi() {\n+        return new OpenAPI()\n+            .info(new Info()\n+                .title(\"Apache Syncope\")\n+                .description(\"Apache Syncope \" + version())\n+                .contact(new Contact()\n+                    .name(\"The Apache Syncope community\")\n+                    .email(\"dev@syncope.apache.org\")\n+                    .url(\"http://syncope.apache.org\"))\n+                .version(version()));\n+    }\n+\n     @Bean\n     @Autowired\n     @RefreshScope\n@@ -221,4 +237,9 @@ public KeymasterStart keymasterStart() {\n     public KeymasterStop keymasterStop() {\n         return new KeymasterStop(NetworkService.Type.WA);\n     }\n+\n+    @Bean\n+    public String version() {\n+        return applicationContext.getEnvironment().getProperty(\"version\");\n+    }\n }"},{"sha":"861cec20502ddfe99935295ce6dd0aac1c672435","filename":"wa/starter/src/main/resources/application.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -45,3 +45,5 @@ spring.main.allow-bean-definition-overriding=true\n spring.main.lazy-initialization=false\n \n service.discovery.address=http://localhost:8080/syncope-wa/\n+\n+version=${syncope.version}"},{"sha":"dac755a3e82b6f6e3a9d87655fedc629d3467d39","filename":"wa/starter/src/test/resources/dev/wa.properties","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdev%2Fwa.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/34898008ed897ee54cce87cd01303109cf8c209c/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdev%2Fwa.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdev%2Fwa.properties?ref=34898008ed897ee54cce87cd01303109cf8c209c","patch":"@@ -54,3 +54,8 @@ cas.monitor.endpoints.endpoint.defaults.access=AUTHENTICATED\n \n spring.security.user.name=${anonymousUser}\n spring.security.user.password=${anonymousKey}\n+\n+springdoc.show-actuator=true\n+springdoc.model-and-view-allowed=true\n+springdoc.writer-with-default-pretty-printer=true\n+springdoc.swagger-ui.displayRequestDuration=true"}]}