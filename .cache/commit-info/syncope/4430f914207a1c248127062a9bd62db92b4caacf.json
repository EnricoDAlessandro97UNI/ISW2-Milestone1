{"sha":"4430f914207a1c248127062a9bd62db92b4caacf","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ0MzBmOTE0MjA3YTFjMjQ4MTI3MDYyYTliZDYyZGI5MmI0Y2FhY2Y=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-02T15:56:39Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-02T15:56:39Z"},"message":"First attempt to include workflow definitions\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246332 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0a74addf47d173417d8996956cb7cb0d89a8d755","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0a74addf47d173417d8996956cb7cb0d89a8d755"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/4430f914207a1c248127062a9bd62db92b4caacf","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4430f914207a1c248127062a9bd62db92b4caacf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4430f914207a1c248127062a9bd62db92b4caacf","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4430f914207a1c248127062a9bd62db92b4caacf/comments","author":null,"committer":null,"parents":[{"sha":"4efcf31894f9347fcbf0b112b60da1e71e8752e0","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4efcf31894f9347fcbf0b112b60da1e71e8752e0","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4efcf31894f9347fcbf0b112b60da1e71e8752e0"}],"stats":{"total":138,"additions":137,"deletions":1},"files":[{"sha":"8e72ad10a8b4fbf4b84e7fcf945964a59b449965","filename":"core/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -73,6 +73,14 @@\n             <groupId>opensymphony</groupId>\n             <artifactId>osworkflow</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>opensymphony</groupId>\n+            <artifactId>propertyset</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>opensymphony</groupId>\n+            <artifactId>oscore</artifactId>\n+        </dependency>\n \n         <dependency>\n             <groupId>org.springframework</groupId>"},{"sha":"62e7865b7d54050ab443f1a018bee2db1dc56344","filename":"core/src/main/java/org/syncope/core/persistence/SpringHibernateJPAWorkflowStore.java","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FSpringHibernateJPAWorkflowStore.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FSpringHibernateJPAWorkflowStore.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FSpringHibernateJPAWorkflowStore.java?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -0,0 +1,41 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence;\n+\n+import com.opensymphony.workflow.StoreException;\n+import com.opensymphony.workflow.spi.hibernate3.AbstractHibernateWorkflowStore;\n+import java.util.Map;\n+import javax.persistence.EntityManager;\n+import javax.persistence.PersistenceContext;\n+import javax.persistence.PersistenceContextType;\n+import org.hibernate.Session;\n+import org.springframework.beans.factory.annotation.Configurable;\n+\n+@Configurable\n+public class SpringHibernateJPAWorkflowStore\n+        extends AbstractHibernateWorkflowStore {\n+\n+    @PersistenceContext(type = PersistenceContextType.EXTENDED)\n+    private EntityManager entityManager;\n+\n+    @Override\n+    public void init(Map props) throws StoreException {\n+    }\n+\n+    @Override\n+    protected Object execute(InternalCallback action) throws StoreException {\n+        return action.doInHibernate((Session) entityManager.getDelegate());\n+    }\n+}"},{"sha":"62b7a9effd47ddcd8d0ae018e26dc0e4005a136b","filename":"core/src/main/resources/org/syncope/core/persistence/userWorkflow.xml","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FuserWorkflow.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FuserWorkflow.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FuserWorkflow.xml?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -0,0 +1,17 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE workflow PUBLIC \"-//OpenSymphony Group//DTD OSWorkflow 2.8//EN\" \"http://www.opensymphony.com/osworkflow/workflow_2_8.dtd\">\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<workflow>\n+</workflow>"},{"sha":"d555ee432632371043682fa7c4e949f820eb25ac","filename":"core/src/main/resources/org/syncope/core/persistence/workflows.xml","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fworkflows.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fworkflows.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fworkflows.xml?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -0,0 +1,17 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<workflows>\n+    <workflow name=\"user\" type=\"resource\" location=\"userWorkflow.xml\"/>\n+</workflows>"},{"sha":"b6307ab495cd9a4e9a50646174ffd8e677a55b5e","filename":"core/src/main/resources/persistenceContext.xml","status":"modified","additions":42,"deletions":1,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -27,7 +27,7 @@\n        http://www.springframework.org/schema/tx/spring-tx.xsd\">\n \n     <context:annotation-config/>\n-    <context:component-scan base-package=\"org.syncope.core.persistence.dao.impl\"/>\n+    <context:component-scan base-package=\"org.syncope.core.persistence\"/>\n     <context:component-scan base-package=\"org.syncope.core.rest.data\"/>\n \n     <bean id=\"propertyConfigurer\"\n@@ -81,4 +81,45 @@\n         <property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/>\n     </bean>\n \n+    <!-- workflow -->\n+    <bean id=\"workflowFactory\"\n+          class=\"com.opensymphony.workflow.spi.hibernate.SpringWorkflowFactory\"\n+          init-method=\"init\">\n+        <property name=\"resource\">\n+            <value>org/syncope/core/persistence/workflows.xml</value>\n+        </property>\n+        <property name=\"reload\">\n+            <value>true</value>\n+        </property>\n+    </bean>\n+\n+    <bean id=\"workflowStore\"\n+          class=\"org.syncope.core.persistence.SpringHibernateJPAWorkflowStore\"/>\n+\n+    <bean id=\"osworkflowConfiguration\"\n+          class=\"com.opensymphony.workflow.config.SpringConfiguration\">\n+        <property name=\"store\">\n+            <ref local=\"workflowStore\"/>\n+        </property>\n+        <property name=\"factory\">\n+            <ref local=\"workflowFactory\"/>\n+        </property>\n+    </bean>\n+\n+    <bean id=\"workflowTypeResolver\"\n+          class=\"com.opensymphony.workflow.util.SpringTypeResolver\"/>\n+\n+    <bean id=\"userWorkflow\"\n+          class=\"com.opensymphony.workflow.basic.BasicWorkflow\">\n+        <constructor-arg>\n+            <value>user</value>\n+        </constructor-arg>\n+        <property name=\"configuration\">\n+            <ref local=\"osworkflowConfiguration\"/>\n+        </property>\n+        <property name=\"resolver\">\n+            <ref local=\"workflowTypeResolver\"/>\n+        </property>\n+    </bean>\n+\n </beans>\n\\ No newline at end of file"},{"sha":"011684fc555a2034ba6c3a3b8be9998ce389fcda","filename":"pom.xml","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4430f914207a1c248127062a9bd62db92b4caacf/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4430f914207a1c248127062a9bd62db92b4caacf/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=4430f914207a1c248127062a9bd62db92b4caacf","patch":"@@ -104,6 +104,8 @@\n         <openam.version>snapshot9</openam.version>\n \n         <osworkflow.version>2.8.0</osworkflow.version>\n+        <propertyset.version>1.3</propertyset.version>\n+        <oscore.version>2.2.6</oscore.version>\n \n         <org.springframework.version>3.0.3.RELEASE</org.springframework.version>\n         <cglib.version>2.2</cglib.version>\n@@ -171,6 +173,16 @@\n                 <artifactId>osworkflow</artifactId>\n                 <version>${osworkflow.version}</version>\n             </dependency>\n+            <dependency>\n+                <groupId>opensymphony</groupId>\n+                <artifactId>propertyset</artifactId>\n+                <version>${propertyset.version}</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>opensymphony</groupId>\n+                <artifactId>oscore</artifactId>\n+                <version>${oscore.version}</version>\n+            </dependency>\n \n             <dependency>\n                 <groupId>org.hibernate</groupId>"}]}