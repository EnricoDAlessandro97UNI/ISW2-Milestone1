{"sha":"cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmNiZTA4MmEyZWJmMTdjYjVlYmYwZjRiZTkzY2NhMWVkYTViODA0NDY=","commit":{"author":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2014-06-24T13:17:33Z"},"committer":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2014-06-24T13:17:33Z"},"message":"[SYNCOPE-515] fix for the branch\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/1_1_X@1605076 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c6bed6c59922198053e8d6422eee6a2569f218c1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c6bed6c59922198053e8d6422eee6a2569f218c1"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"bc9ec67d1f0d2fe8f7aabedfc1b9b32b19c0f224","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bc9ec67d1f0d2fe8f7aabedfc1b9b32b19c0f224","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/bc9ec67d1f0d2fe8f7aabedfc1b9b32b19c0f224"}],"stats":{"total":12,"additions":10,"deletions":2},"files":[{"sha":"af05eba942db4c5021fda00d626e75f3cabe2d24","filename":"core/src/main/java/org/apache/syncope/core/sync/impl/SyncopeSyncResultHandler.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java?ref=cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","patch":"@@ -266,7 +266,7 @@ public void setDryRun(final boolean dryRun) {\n     }\n \n     public Map<Long, String> getRoleOwnerMap() {\n-        return roleOwnerMap;\n+        return this.roleOwnerMap;\n     }\n \n     @Override\n@@ -641,7 +641,7 @@ protected Map.Entry<UserTO, UserTO> updateUser(final Long id, SyncDelta delta, f\n         UserMod actual = attrTransformer.transform(userMod);\n         LOG.debug(\"Transformed: {}\", actual);\n \n-        delta = actions.beforeUpdate(this, delta, before, userMod);\n+        delta = actions.beforeUpdate(this, delta, before, actual);\n \n         WorkflowResult<Map.Entry<Long, Boolean>> updated;\n         try {"},{"sha":"b66b5988c5e7980a9677057565941907ed1d1c7c","filename":"core/src/test/java/org/apache/syncope/core/rest/RoleTestITCase.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java?ref=cbe082a2ebf17cb5ebf0f4be93cca1eda5b80446","patch":"@@ -28,6 +28,7 @@\n import java.security.AccessControlException;\n import java.util.ArrayList;\n import java.util.List;\n+import org.apache.syncope.common.mod.ReferenceMod;\n \n import org.apache.syncope.common.mod.RoleMod;\n import org.apache.syncope.common.services.RoleService;\n@@ -112,6 +113,13 @@ public void create() {\n                 resourceService.getConnectorObject(RESOURCE_NAME_LDAP, AttributableType.ROLE, roleTO.getId());\n         assertNotNull(connObjectTO);\n         assertNotNull(connObjectTO.getAttributeMap().get(\"owner\"));\n+\n+        // SYNCOPE-515: remove ownership\n+        final RoleMod roleMod = new RoleMod();\n+        roleMod.setId(roleTO.getId());\n+        roleMod.setRoleOwner(new ReferenceMod());\n+\n+        assertNull(roleService.update(roleMod.getId(), roleMod).getRoleOwner());\n     }\n \n     @Test"}]}