{"sha":"b03947a33a3ee3dced1cac6a863856824a4ae158","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmIwMzk0N2EzM2EzZWUzZGNlZDFjYWM2YTg2Mzg1NjgyNGE0YWUxNTg=","commit":{"author":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2017-04-20T09:46:12Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-04-20T13:50:44Z"},"message":"[SYNCOPE-808] fixed problems about bundle not found, fixed some editor bugs and added validation - This closes #43 / This closes #27","tree":{"sha":"62aa6aad3e5d67a32b8af3db450b2e16c4bfd585","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/62aa6aad3e5d67a32b8af3db450b2e16c4bfd585"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b03947a33a3ee3dced1cac6a863856824a4ae158","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABAgAGBQJY+LzeAAoJEGtDE+0nPfKHyZoIAKb3sWEHXR7MNm+A7mjY6wfa\nY7ihZEXHeq/6vNlCFN66oguiuEf4nQsn9nyXKKm8aQZ4saAWsPx+3v3NaqST2PLi\n+0HCrt/+BGzIAdUiSxUCh2w9z1x5cdRZf1ugOgJTPmShzzr6HqnhzuBWPU6VZdCW\niqOAQwq0ZRL6ixBiVZQJQbJmtYuBuLbkfKiI+j76knHLLXkT1t+Jwj1mf7Bn3lFr\nm/4+PaMmwo0UG+A79vhIv2Z69Lr0gyrKpsWQwWoxiZdz3lAG2G9p70mGHPCk6eTy\nD+7rjxR5uv9Mb/XN7hFYhy6+HUUa5k9XHf2NtF1/T4kyyqWC/8ys6lpae+yOv8g=\n=g9NJ\n-----END PGP SIGNATURE-----","payload":"tree 62aa6aad3e5d67a32b8af3db450b2e16c4bfd585\nparent 218674e75e669127cd677f1d199984973b005b41\nauthor Andrea Patricelli <andreapatricelli@apache.org> 1492681572 +0200\ncommitter Francesco Chicchiriccò <ilgrosso@apache.org> 1492696244 +0200\n\n[SYNCOPE-808] fixed problems about bundle not found, fixed some editor bugs and added validation - This closes #43 / This closes #27\n"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b03947a33a3ee3dced1cac6a863856824a4ae158","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b03947a33a3ee3dced1cac6a863856824a4ae158","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b03947a33a3ee3dced1cac6a863856824a4ae158/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"218674e75e669127cd677f1d199984973b005b41","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/218674e75e669127cd677f1d199984973b005b41","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/218674e75e669127cd677f1d199984973b005b41"}],"stats":{"total":772,"additions":477,"deletions":295},"files":[{"sha":"13bbd6994fe9076ac84a41995a5e4f6de3ac5a5b","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/ConnectionParams.java","status":"added","additions":122,"deletions":0,"changes":122,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -0,0 +1,122 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.ide.netbeans;\n+\n+public final class ConnectionParams {\n+\n+    private String url;\n+\n+    private String username;\n+\n+    private String password;\n+\n+    public static final class Builder {\n+\n+        private String scheme;\n+        private String host;\n+        private String port;\n+\n+        private String username;\n+\n+        private String password;\n+\n+        private Builder() {\n+        }\n+\n+        public Builder scheme(final String value) {\n+            this.scheme = value;\n+            return this;\n+        }\n+        public Builder host(final String value) {\n+            this.host = value;\n+            return this;\n+        }\n+        public Builder port(final String value) {\n+            this.port = value;\n+            return this;\n+        }\n+\n+        public Builder username(final String value) {\n+            this.username = value;\n+            return this;\n+        }\n+\n+        public Builder password(final String value) {\n+            this.password = value;\n+            return this;\n+        }\n+\n+        public ConnectionParams build() {\n+            return new ConnectionParams(scheme + \"://\" + host + \":\" + port + \"/syncope/rest\", username, password);\n+        }\n+    }\n+\n+    public static ConnectionParams.Builder builder() {\n+        return new ConnectionParams.Builder();\n+    }\n+\n+    private ConnectionParams(\n+            final String url,\n+            final String userName,\n+            final String password) {\n+        this.url = url;\n+        this.username = userName;\n+        this.password = password;\n+    }\n+\n+    public String getUrl() {\n+        return url;\n+    }\n+\n+    public void setUrl(final String url) {\n+        this.url = url;\n+    }\n+\n+    public String getUsername() {\n+        return username;\n+    }\n+\n+    public void setUsername(final String username) {\n+        this.username = username;\n+    }\n+\n+    public String getPassword() {\n+        return password;\n+    }\n+\n+    public void setPassword(final String password) {\n+        this.password = password;\n+    }\n+\n+    public ConnectionParams port(final String value) {\n+        this.url = value;\n+        return this;\n+    }\n+\n+    public ConnectionParams userName(final String value) {\n+        this.username = value;\n+        return this;\n+    }\n+\n+    public ConnectionParams password(final String value) {\n+        this.password = value;\n+        return this;\n+    }\n+\n+}"},{"sha":"e666c4a8d6593866e9ae290f06b84b68687632c0","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/ResourceConnector.java","status":"modified","additions":22,"deletions":19,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -18,13 +18,13 @@\n  */\n package org.apache.syncope.ide.netbeans;\n \n-import java.io.BufferedReader;\n-import java.io.File;\n-import java.io.FileNotFoundException;\n-import java.io.FileReader;\n import java.io.IOException;\n+import java.util.prefs.Preferences;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.ide.netbeans.service.MailTemplateManagerService;\n import org.apache.syncope.ide.netbeans.service.ReportTemplateManagerService;\n+import org.apache.syncope.ide.netbeans.view.ResourceExplorerTopComponent;\n+import org.openide.util.NbPreferences;\n \n public final class ResourceConnector {\n \n@@ -42,10 +42,11 @@ private ResourceConnector() {\n     public static MailTemplateManagerService getMailTemplateManagerService() throws IOException {\n         synchronized (MAIL_TEMPLATE_MONITOR) {\n             if (MAIL_TEMPLATE_MANAGER_SERVICE == null) {\n-                UserProperties userProperties = getUserProperties();\n+                ConnectionParams connParams = getConnectionParams();\n                 MAIL_TEMPLATE_MANAGER_SERVICE = new MailTemplateManagerService(\n-                        userProperties.getUrl(), userProperties.getUserName(),\n-                        userProperties.getPassword());\n+                        connParams.getUrl(),\n+                        connParams.getUsername(),\n+                        connParams.getPassword());\n             }\n         }\n         return MAIL_TEMPLATE_MANAGER_SERVICE;\n@@ -54,24 +55,26 @@ public static MailTemplateManagerService getMailTemplateManagerService() throws\n     public static ReportTemplateManagerService getReportTemplateManagerService() throws IOException {\n         synchronized (REPORT_TEMPLATE_MONITOR) {\n             if (REPORT_TEMPLATE_MANAGER_SERVICE == null) {\n-                UserProperties userProperties = getUserProperties();\n+                ConnectionParams connParams = getConnectionParams();\n                 REPORT_TEMPLATE_MANAGER_SERVICE = new ReportTemplateManagerService(\n-                        userProperties.getUrl(), userProperties.getUserName(),\n-                        userProperties.getPassword());\n+                        connParams.getUrl(),\n+                        connParams.getUsername(),\n+                        connParams.getPassword());\n             }\n         }\n         return REPORT_TEMPLATE_MANAGER_SERVICE;\n     }\n \n-    private static UserProperties getUserProperties() throws FileNotFoundException, IOException {\n-        File file = new File(\"UserData.txt\");\n-        BufferedReader bufferedReader = new BufferedReader(new FileReader(file));\n-        String url = bufferedReader.readLine();\n-        String userName = bufferedReader.readLine();\n-        String password = bufferedReader.readLine();\n-\n-        UserProperties userProperties = new UserProperties(url, userName, password);\n-        return userProperties;\n+    public static ConnectionParams getConnectionParams() {\n+        Preferences prefs = NbPreferences.forModule(ResourceExplorerTopComponent.class);\n+        ConnectionParams connectionParams = ConnectionParams.builder()\n+                .scheme(prefs.get(\"scheme\", \"http\"))\n+                .host(prefs.get(\"host\", \"localhost\"))\n+                .port(prefs.get(\"port\", \"8080\"))\n+                .username(prefs.get(\"username\", StringUtils.EMPTY))\n+                .password(prefs.get(\"password\", StringUtils.EMPTY))\n+                .build();\n+        return connectionParams;\n     }\n \n }"},{"sha":"fdff30af39ba663ceefd6d90c25e1df092eaef7a","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/UserProperties.java","status":"removed","additions":0,"deletions":79,"changes":79,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/218674e75e669127cd677f1d199984973b005b41/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FUserProperties.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/218674e75e669127cd677f1d199984973b005b41/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FUserProperties.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FUserProperties.java?ref=218674e75e669127cd677f1d199984973b005b41","patch":"@@ -1,79 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.ide.netbeans;\n-\n-public class UserProperties {\n-\n-    private String url;\n-\n-    private String userName;\n-\n-    private String password;\n-\n-    public UserProperties() {\n-    }\n-\n-    public UserProperties(final String url, final String userName, final String password) {\n-        this.url = url;\n-        this.userName = userName;\n-        this.password = password;\n-    }\n-\n-    /**\n-     * @return the userName\n-     */\n-    public String getUserName() {\n-        return userName;\n-    }\n-\n-    /**\n-     * @return the password\n-     */\n-    public String getPassword() {\n-        return password;\n-    }\n-\n-    /**\n-     * @return the url\n-     */\n-    public String getUrl() {\n-        return url;\n-    }\n-\n-    /**\n-     * @param url the url to set\n-     */\n-    public void setUrl(final String url) {\n-        this.url = url;\n-    }\n-\n-    /**\n-     * @param userName the userName to set\n-     */\n-    public void setUserName(final String userName) {\n-        this.userName = userName;\n-    }\n-\n-    /**\n-     * @param password the password to set\n-     */\n-    public void setPassword(final String password) {\n-        this.password = password;\n-    }\n-}"},{"sha":"f7d57831785842a7bf7532a7c20308a55d04fb86","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/view/ResourceExplorerTopComponent.form","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.form","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.form","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.form?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -17,6 +17,7 @@ KIND, either express or implied.  See the License for the\n specific language governing permissions and limitations\n under the License.\n -->\n+\n <Form version=\"1.7\" maxVersion=\"1.9\" type=\"org.netbeans.modules.form.forminfo.JPanelFormInfo\">\n   <AuxValues>\n     <AuxValue name=\"FormSettings_autoResourcing\" type=\"java.lang.Integer\" value=\"1\"/>"},{"sha":"6305abebc476cce7bc559a41cfe42500b18d19c1","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/view/ResourceExplorerTopComponent.java","status":"modified","additions":134,"deletions":77,"changes":211,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -22,14 +22,15 @@\n import java.awt.event.ActionListener;\n import java.awt.event.MouseEvent;\n import java.beans.PropertyChangeListener;\n-import java.io.BufferedReader;\n import java.io.File;\n-import java.io.FileReader;\n import java.io.FileWriter;\n import java.io.IOException;\n import java.io.InputStream;\n import java.nio.charset.Charset;\n import java.util.List;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import java.util.prefs.Preferences;\n import javax.swing.Action;\n import javax.swing.JMenuItem;\n import javax.swing.JOptionPane;\n@@ -40,8 +41,11 @@\n import javax.swing.tree.DefaultMutableTreeNode;\n import javax.swing.tree.DefaultTreeModel;\n import org.apache.commons.io.IOUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.to.MailTemplateTO;\n import org.apache.syncope.common.lib.to.ReportTemplateTO;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n import org.apache.syncope.common.lib.types.MailTemplateFormat;\n import org.apache.syncope.common.lib.types.ReportTemplateFormat;\n import org.apache.syncope.ide.netbeans.PluginConstants;\n@@ -60,6 +64,7 @@\n import org.openide.loaders.DataObject;\n import org.openide.util.Cancellable;\n import org.openide.util.Exceptions;\n+import org.openide.util.NbPreferences;\n import org.openide.util.RequestProcessor;\n import org.openide.windows.TopComponent;\n \n@@ -86,6 +91,8 @@ public final class ResourceExplorerTopComponent extends TopComponent {\n \n     private static final long serialVersionUID = -1643737786852621861L;\n \n+    public static final Logger LOG = Logger.getLogger(\"ResourceExplorerTopComponent\");\n+\n     private final DefaultTreeModel treeModel;\n \n     private final DefaultMutableTreeNode root;\n@@ -196,15 +203,21 @@ private void resourceExplorerTreeMouseClicked(final java.awt.event.MouseEvent ev\n \n     @Override\n     public void componentOpened() {\n-        File file = new File(\"UserData.txt\");\n-        if (!file.exists()) {\n+        // look for connection preferences\n+        Preferences prefs = NbPreferences.forModule(ResourceExplorerTopComponent.class);\n+        if (StringUtils.isBlank(prefs.get(\"scheme\", null))\n+                || StringUtils.isBlank(prefs.get(\"host\", null))\n+                || StringUtils.isBlank(prefs.get(\"port\", null))\n+                || StringUtils.isBlank(prefs.get(\"username\", null))\n+                || StringUtils.isBlank(prefs.get(\"password\", null))) {\n             new ServerDetailsView(null, true).setVisible(true);\n         }\n         try {\n             mailTemplateManagerService = ResourceConnector.getMailTemplateManagerService();\n             reportTemplateManagerService = ResourceConnector.getReportTemplateManagerService();\n         } catch (IOException e) {\n-            JOptionPane.showMessageDialog(null, \"Error Occured.\", \"Error\", JOptionPane.ERROR_MESSAGE);\n+            JOptionPane.showMessageDialog(null, e.getMessage(), \"Error while retrieving templates\",\n+                    JOptionPane.ERROR_MESSAGE);\n             new ServerDetailsView(null, true).setVisible(true);\n         }\n \n@@ -316,21 +329,23 @@ public void actionPerformed(final ActionEvent e) {\n \n             @Override\n             public void actionPerformed(final ActionEvent evt) {\n-                File file = new File(\"UserData.txt\");\n-                try {\n-                    BufferedReader bf = new BufferedReader(new FileReader(file));\n-                    String host = bf.readLine();\n-                    String userName = bf.readLine();\n-                    String password = bf.readLine();\n-                    ServerDetailsView serverDetails = new ServerDetailsView(null, true);\n-                    serverDetails.setDetails(host, userName, password);\n-                    serverDetails.setVisible(true);\n-                } catch (IOException e) {\n-                    Exceptions.printStackTrace(e);\n-                }\n+                ServerDetailsView serverDetails = new ServerDetailsView(null, true);\n+                // set previous preferences\n+                Preferences prefs = NbPreferences.forModule(ResourceExplorerTopComponent.class);\n+                serverDetails.setDetails(prefs.get(\"scheme\", \"http\"),\n+                        prefs.get(\"host\", \"localhost\"),\n+                        prefs.get(\"port\", \"8080\"),\n+                        prefs.get(\"username\", StringUtils.EMPTY),\n+                        prefs.get(\"password\", StringUtils.EMPTY));\n+                // reset connection preferences\n+                prefs.remove(\"scheme\");\n+                prefs.remove(\"host\");\n+                prefs.remove(\"port\");\n+                prefs.remove(\"username\");\n+                prefs.remove(\"password\");\n+                serverDetails.setVisible(true);\n             }\n         });\n-\n         menu.show(evt.getComponent(), evt.getX(), evt.getY());\n     }\n \n@@ -431,75 +446,117 @@ private void openMailEditor(final String name) throws IOException {\n         String formatStr = (String) JOptionPane.showInputDialog(null, \"Select File Format\",\n                 \"File format\", JOptionPane.QUESTION_MESSAGE, null,\n                 PluginConstants.MAIL_TEMPLATE_FORMATS, MailTemplateFormat.TEXT.name());\n-        MailTemplateFormat format = MailTemplateFormat.valueOf(formatStr);\n-\n-        String type = null;\n-        InputStream is = null;\n-        switch (format) {\n-            case HTML:\n-                type = \"html\";\n-                is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.HTML);\n-                break;\n-            case TEXT:\n-                type = \"txt\";\n-                is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.TEXT);\n-                break;\n-            default:\n-                break;\n-        }\n-        String content = IOUtils.toString(is, encodingPattern);\n \n-        File directory = new File(\"Template/Mail\");\n-        if (!directory.exists()) {\n-            directory.mkdirs();\n+        if (StringUtils.isNotBlank(formatStr)) {\n+\n+            MailTemplateFormat format = MailTemplateFormat.valueOf(formatStr);\n+            String type = null;\n+            InputStream is = null;\n+\n+            try {\n+                switch (format) {\n+                    case HTML:\n+                        type = \"html\";\n+                        is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.HTML);\n+                        break;\n+                    case TEXT:\n+                        type = \"txt\";\n+                        is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.TEXT);\n+                        break;\n+                    default:\n+                        LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n+                        break;\n+                }\n+            } catch (SyncopeClientException e) {\n+                LOG.log(Level.SEVERE,\n+                        String.format(\"Unable to get [%s] mail template in [%s] format\", name, format), e);\n+                if (ClientExceptionType.NotFound.equals(e.getType())) {\n+                    LOG.log(Level.SEVERE, String.format(\n+                            \"Report template in [%s] format not found, create an empty one\", format));\n+                } else {\n+                    JOptionPane.showMessageDialog(\n+                            null, String.format(\"Unable to get [%s] report template in [%s] format\", name, format),\n+                            \"Connection Error\", JOptionPane.ERROR_MESSAGE);\n+                }\n+            } catch (Exception e) {\n+                LOG.log(Level.SEVERE,\n+                        String.format(\"Unable to get [%s] mail template in [%s] format\", name, format), e);\n+                JOptionPane.showMessageDialog(\n+                        null, String.format(\"Unable to get [%s] mail template in [%s] format\", name, format), \"Error\",\n+                        JOptionPane.ERROR_MESSAGE);\n+            }\n+            String content = is == null ? StringUtils.EMPTY : IOUtils.toString(is, encodingPattern);\n+\n+            File directory = new File(\"Template/Mail\");\n+            if (!directory.exists()) {\n+                directory.mkdirs();\n+            }\n+            File file = new File(\"Template/Mail/\" + name + \".\" + type);\n+            FileWriter fw = new FileWriter(file);\n+            fw.write(content);\n+            fw.flush();\n+            FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n+            fob.setAttribute(\"description\", \"TEXT\");\n+            DataObject data = DataObject.find(fob);\n+            data.getLookup().lookup(OpenCookie.class).open();\n         }\n-        File file = new File(\"Template/Mail/\" + name + \".\" + type);\n-        FileWriter fw = new FileWriter(file);\n-        fw.write(content);\n-        fw.flush();\n-        FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n-        fob.setAttribute(\"description\", \"TEXT\");\n-        DataObject data = DataObject.find(fob);\n-        data.getLookup().lookup(OpenCookie.class).open();\n     }\n \n     private void openReportEditor(final String name) throws IOException {\n         String formatStr = (String) JOptionPane.showInputDialog(null, \"Select File Format\",\n                 \"File format\", JOptionPane.QUESTION_MESSAGE, null,\n                 PluginConstants.REPORT_TEMPLATE_FORMATS, ReportTemplateFormat.FO.name());\n-        ReportTemplateFormat format = ReportTemplateFormat.valueOf(formatStr);\n-\n-        String type = null;\n-        InputStream is = null;\n-        switch (format) {\n-            case HTML:\n-                type = \"html\";\n-                is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.HTML);\n-                break;\n-            case CSV:\n-                type = \"csv\";\n-                is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.CSV);\n-                break;\n-            case FO:\n-                type = \"fo\";\n-                is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.FO);\n-                break;\n-            default:\n-                break;\n-        }\n-        String content = IOUtils.toString(is, encodingPattern);\n+        if (StringUtils.isNotBlank(formatStr)) {\n+            ReportTemplateFormat format = ReportTemplateFormat.valueOf(formatStr);\n+\n+            InputStream is = null;\n+            try {\n+                switch (format) {\n+                    case HTML:\n+                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.HTML);\n+                        break;\n+                    case CSV:\n+                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.CSV);\n+                        break;\n+                    case FO:\n+                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.FO);\n+                        break;\n+                    default:\n+                        LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n+                        break;\n+                }\n+            } catch (SyncopeClientException e) {\n+                LOG.log(Level.SEVERE, String.format(\"Unable to get [%s] report template in [%s] format\", name, format),\n+                        e);\n+                if (ClientExceptionType.NotFound.equals(e.getType())) {\n+                    LOG.log(Level.SEVERE, String.format(\n+                            \"Report template [%s] not found, create an empty one\", name));\n+                } else {\n+                    JOptionPane.showMessageDialog(\n+                            null, String.format(\"Unable to get [%s] report template in [%s] format\", name, format),\n+                            \"Connection Error\", JOptionPane.ERROR_MESSAGE);\n+                }\n+            } catch (Exception e) {\n+                LOG.log(Level.SEVERE, String.format(\"Unable to get [%s] report template in [%s] format\", name, format),\n+                        e);\n+                JOptionPane.showMessageDialog(\n+                        null, String.format(\"Unable to get [%s] report template in [%s] format\", name, format),\n+                        \"Generic Error\", JOptionPane.ERROR_MESSAGE);\n+            }\n+            String content = is == null ? StringUtils.EMPTY : IOUtils.toString(is, encodingPattern);\n \n-        File directory = new File(\"Template/Report\");\n-        if (!directory.exists()) {\n-            directory.mkdirs();\n+            File directory = new File(\"Template/Report\");\n+            if (!directory.exists()) {\n+                directory.mkdirs();\n+            }\n+            File file = new File(\"Template/Report/\" + name + \".\" + format.name().toLowerCase());\n+            FileWriter fw = new FileWriter(file);\n+            fw.write(content);\n+            fw.flush();\n+            FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n+            DataObject data = DataObject.find(fob);\n+            data.getLookup().lookup(OpenCookie.class).open();\n         }\n-        File file = new File(\"Template/Report/\" + name + \".\" + type);\n-        FileWriter fw = new FileWriter(file);\n-        fw.write(content);\n-        fw.flush();\n-        FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n-        DataObject data = DataObject.find(fob);\n-        data.getLookup().lookup(OpenCookie.class).open();\n     }\n \n     private void saveContent() {"},{"sha":"7cb27e125e47ca01cbd594185427d21dd8707cda","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/view/ServerDetailsView.form","status":"modified","additions":76,"deletions":56,"changes":132,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.form","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.form","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.form?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -17,6 +17,7 @@ KIND, either express or implied.  See the License for the\n specific language governing permissions and limitations\n under the License.\n -->\n+\n <Form version=\"1.5\" maxVersion=\"1.9\" type=\"org.netbeans.modules.form.forminfo.JDialogFormInfo\">\n   <Properties>\n     <Property name=\"defaultCloseOperation\" type=\"int\" value=\"2\"/>\n@@ -26,11 +27,11 @@ under the License.\n     <SyntheticProperty name=\"generateCenter\" type=\"boolean\" value=\"false\"/>\n   </SyntheticProperties>\n   <AuxValues>\n-    <AuxValue name=\"FormSettings_autoResourcing\" type=\"java.lang.Integer\" value=\"1\"/>\n+    <AuxValue name=\"FormSettings_autoResourcing\" type=\"java.lang.Integer\" value=\"0\"/>\n     <AuxValue name=\"FormSettings_autoSetComponentName\" type=\"java.lang.Boolean\" value=\"false\"/>\n     <AuxValue name=\"FormSettings_generateFQN\" type=\"java.lang.Boolean\" value=\"true\"/>\n     <AuxValue name=\"FormSettings_generateMnemonicsCode\" type=\"java.lang.Boolean\" value=\"true\"/>\n-    <AuxValue name=\"FormSettings_i18nAutoMode\" type=\"java.lang.Boolean\" value=\"true\"/>\n+    <AuxValue name=\"FormSettings_i18nAutoMode\" type=\"java.lang.Boolean\" value=\"false\"/>\n     <AuxValue name=\"FormSettings_layoutCodeTarget\" type=\"java.lang.Integer\" value=\"1\"/>\n     <AuxValue name=\"FormSettings_listenerGenerationStyle\" type=\"java.lang.Integer\" value=\"0\"/>\n     <AuxValue name=\"FormSettings_variablesLocal\" type=\"java.lang.Boolean\" value=\"false\"/>\n@@ -41,51 +42,60 @@ under the License.\n     <DimensionLayout dim=\"0\">\n       <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n           <Group type=\"102\" attributes=\"0\">\n+              <EmptySpace min=\"-2\" pref=\"41\" max=\"-2\" attributes=\"0\"/>\n               <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n-                  <Group type=\"102\" attributes=\"0\">\n-                      <EmptySpace min=\"-2\" pref=\"41\" max=\"-2\" attributes=\"0\"/>\n-                      <Group type=\"103\" groupAlignment=\"1\" attributes=\"0\">\n-                          <Component id=\"okButton\" min=\"-2\" pref=\"74\" max=\"-2\" attributes=\"0\"/>\n-                          <Group type=\"102\" attributes=\"0\">\n-                              <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n-                                  <Component id=\"jLabel1\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n-                                  <Component id=\"jLabel2\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n-                                  <Component id=\"jLabel3\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n-                              </Group>\n-                              <EmptySpace min=\"-2\" pref=\"39\" max=\"-2\" attributes=\"0\"/>\n-                              <Group type=\"103\" groupAlignment=\"0\" max=\"-2\" attributes=\"0\">\n-                                  <Component id=\"userNameTxt\" max=\"32767\" attributes=\"0\"/>\n-                                  <Component id=\"urlTxt\" max=\"32767\" attributes=\"0\"/>\n-                                  <Component id=\"passwordTxt\" alignment=\"0\" min=\"-2\" pref=\"155\" max=\"-2\" attributes=\"0\"/>\n-                              </Group>\n+                  <Component id=\"jLabel4\" alignment=\"0\" min=\"-2\" pref=\"256\" max=\"-2\" attributes=\"0\"/>\n+                  <Group type=\"103\" groupAlignment=\"1\" attributes=\"0\">\n+                      <Component id=\"okButton\" min=\"-2\" pref=\"74\" max=\"-2\" attributes=\"0\"/>\n+                      <Group type=\"102\" alignment=\"1\" attributes=\"0\">\n+                          <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n+                              <Component id=\"jLabel1\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                              <Component id=\"jLabel2\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                              <Component id=\"jLabel3\" alignment=\"0\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                              <Component id=\"jLabel5\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                              <Component id=\"jLabel6\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                          </Group>\n+                          <EmptySpace min=\"-2\" pref=\"39\" max=\"-2\" attributes=\"0\"/>\n+                          <Group type=\"103\" groupAlignment=\"0\" max=\"-2\" attributes=\"0\">\n+                              <Component id=\"portTxt\" max=\"32767\" attributes=\"0\"/>\n+                              <Component id=\"hostTxt\" max=\"32767\" attributes=\"0\"/>\n+                              <Component id=\"userNameTxt\" max=\"32767\" attributes=\"0\"/>\n+                              <Component id=\"schemeTxt\" max=\"32767\" attributes=\"0\"/>\n+                              <Component id=\"passwordTxt\" alignment=\"0\" pref=\"155\" max=\"32767\" attributes=\"0\"/>\n                           </Group>\n                       </Group>\n                   </Group>\n-                  <Group type=\"102\" alignment=\"0\" attributes=\"0\">\n-                      <EmptySpace min=\"-2\" pref=\"101\" max=\"-2\" attributes=\"0\"/>\n-                      <Component id=\"jLabel4\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n-                  </Group>\n               </Group>\n-              <EmptySpace pref=\"41\" max=\"32767\" attributes=\"0\"/>\n+              <EmptySpace pref=\"40\" max=\"32767\" attributes=\"0\"/>\n           </Group>\n       </Group>\n     </DimensionLayout>\n     <DimensionLayout dim=\"1\">\n       <Group type=\"103\" groupAlignment=\"0\" attributes=\"0\">\n           <Group type=\"102\" alignment=\"1\" attributes=\"0\">\n-              <EmptySpace max=\"-2\" attributes=\"0\"/>\n-              <Component id=\"jLabel4\" pref=\"32\" max=\"32767\" attributes=\"0\"/>\n+              <EmptySpace max=\"32767\" attributes=\"0\"/>\n+              <Component id=\"jLabel4\" min=\"-2\" pref=\"65\" max=\"-2\" attributes=\"0\"/>\n               <EmptySpace type=\"separate\" max=\"-2\" attributes=\"0\"/>\n               <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n                   <Component id=\"jLabel1\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n-                  <Component id=\"urlTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                  <Component id=\"schemeTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n               </Group>\n-              <EmptySpace type=\"separate\" max=\"-2\" attributes=\"0\"/>\n+              <EmptySpace max=\"-2\" attributes=\"0\"/>\n+              <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n+                  <Component id=\"hostTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                  <Component id=\"jLabel6\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+              </Group>\n+              <EmptySpace max=\"-2\" attributes=\"0\"/>\n+              <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n+                  <Component id=\"portTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                  <Component id=\"jLabel5\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+              </Group>\n+              <EmptySpace max=\"-2\" attributes=\"0\"/>\n               <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n-                  <Component id=\"jLabel2\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n                   <Component id=\"userNameTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n+                  <Component id=\"jLabel2\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n               </Group>\n-              <EmptySpace type=\"separate\" max=\"-2\" attributes=\"0\"/>\n+              <EmptySpace max=\"-2\" attributes=\"0\"/>\n               <Group type=\"103\" groupAlignment=\"3\" attributes=\"0\">\n                   <Component id=\"jLabel3\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n                   <Component id=\"passwordTxt\" alignment=\"3\" min=\"-2\" max=\"-2\" attributes=\"0\"/>\n@@ -100,61 +110,71 @@ under the License.\n   <SubComponents>\n     <Component class=\"javax.swing.JLabel\" name=\"jLabel1\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.jLabel1.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n+        <Property name=\"labelFor\" type=\"java.awt.Component\" editor=\"org.netbeans.modules.form.ComponentChooserEditor\">\n+          <ComponentRef name=\"schemeTxt\"/>\n         </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Scheme\"/>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n       </Properties>\n     </Component>\n     <Component class=\"javax.swing.JLabel\" name=\"jLabel2\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.jLabel2.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Username\"/>\n       </Properties>\n     </Component>\n     <Component class=\"javax.swing.JLabel\" name=\"jLabel3\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.jLabel3.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Password\"/>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n       </Properties>\n     </Component>\n-    <Component class=\"javax.swing.JTextField\" name=\"urlTxt\">\n+    <Component class=\"javax.swing.JTextField\" name=\"schemeTxt\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.urlTxt.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n       </Properties>\n     </Component>\n     <Component class=\"javax.swing.JTextField\" name=\"userNameTxt\">\n-      <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.userNameTxt.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n-      </Properties>\n     </Component>\n     <Component class=\"javax.swing.JPasswordField\" name=\"passwordTxt\">\n-      <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.passwordTxt.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n-      </Properties>\n     </Component>\n     <Component class=\"javax.swing.JButton\" name=\"okButton\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.okButton.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n-        </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"submit\"/>\n       </Properties>\n       <Events>\n         <EventHandler event=\"actionPerformed\" listener=\"java.awt.event.ActionListener\" parameters=\"java.awt.event.ActionEvent\" handler=\"okButtonActionPerformed\"/>\n       </Events>\n     </Component>\n     <Component class=\"javax.swing.JLabel\" name=\"jLabel4\">\n       <Properties>\n-        <Property name=\"text\" type=\"java.lang.String\" editor=\"org.netbeans.modules.i18n.form.FormI18nStringEditor\">\n-          <ResourceString bundle=\"org/apache/syncope/ide/netbeans/view/Bundle.properties\" key=\"ServerDetailsView.jLabel4.text\" replaceFormat=\"org.openide.util.NbBundle.getMessage({sourceFileName}.class, &quot;{key}&quot;)\"/>\n+        <Property name=\"horizontalAlignment\" type=\"int\" value=\"0\"/>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Apache Syncope connection\"/>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n+      </Properties>\n+    </Component>\n+    <Component class=\"javax.swing.JTextField\" name=\"hostTxt\">\n+      <Properties>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n+      </Properties>\n+    </Component>\n+    <Component class=\"javax.swing.JLabel\" name=\"jLabel5\">\n+      <Properties>\n+        <Property name=\"labelFor\" type=\"java.awt.Component\" editor=\"org.netbeans.modules.form.ComponentChooserEditor\">\n+          <ComponentRef name=\"portTxt\"/>\n+        </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Port\"/>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n+      </Properties>\n+    </Component>\n+    <Component class=\"javax.swing.JTextField\" name=\"portTxt\">\n+    </Component>\n+    <Component class=\"javax.swing.JLabel\" name=\"jLabel6\">\n+      <Properties>\n+        <Property name=\"labelFor\" type=\"java.awt.Component\" editor=\"org.netbeans.modules.form.ComponentChooserEditor\">\n+          <ComponentRef name=\"hostTxt\"/>\n         </Property>\n+        <Property name=\"text\" type=\"java.lang.String\" value=\"Host\"/>\n+        <Property name=\"toolTipText\" type=\"java.lang.String\" value=\"\"/>\n       </Properties>\n     </Component>\n   </SubComponents>"},{"sha":"f4177ac327d6a3f225860656b9edf21ce5363fd1","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/view/ServerDetailsView.java","status":"modified","additions":122,"deletions":53,"changes":175,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FServerDetailsView.java?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -18,16 +18,22 @@\n  */\n package org.apache.syncope.ide.netbeans.view;\n \n-import java.io.File;\n-import java.io.FileWriter;\n-import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.logging.Logger;\n+import java.util.prefs.Preferences;\n import javax.swing.JDialog;\n import javax.swing.JOptionPane;\n+import javax.swing.JTextField;\n+import org.apache.commons.lang3.StringUtils;\n+import org.openide.util.NbPreferences;\n \n public class ServerDetailsView extends JDialog {\n \n     private static final long serialVersionUID = -8693554903195406915L;\n \n+    public static final Logger LOG = Logger.getLogger(\"ServerDetailsView\");\n+\n     /**\n      * Creates new form LoginView\n      */\n@@ -50,74 +56,98 @@ private void initComponents() {\n         jLabel1 = new javax.swing.JLabel();\n         jLabel2 = new javax.swing.JLabel();\n         jLabel3 = new javax.swing.JLabel();\n-        urlTxt = new javax.swing.JTextField();\n+        schemeTxt = new javax.swing.JTextField();\n         userNameTxt = new javax.swing.JTextField();\n         passwordTxt = new javax.swing.JPasswordField();\n         okButton = new javax.swing.JButton();\n         jLabel4 = new javax.swing.JLabel();\n+        hostTxt = new javax.swing.JTextField();\n+        jLabel5 = new javax.swing.JLabel();\n+        portTxt = new javax.swing.JTextField();\n+        jLabel6 = new javax.swing.JLabel();\n \n         setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);\n \n-        org.openide.awt.Mnemonics.setLocalizedText(jLabel1, org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.jLabel1.text\")); // NOI18N\n-\n-        org.openide.awt.Mnemonics.setLocalizedText(jLabel2, org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.jLabel2.text\")); // NOI18N\n-\n-        org.openide.awt.Mnemonics.setLocalizedText(jLabel3, org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.jLabel3.text\")); // NOI18N\n+        jLabel1.setLabelFor(schemeTxt);\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel1, \"Scheme\");\n+        jLabel1.setToolTipText(\"\");\n \n-        urlTxt.setText(org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.urlTxt.text\")); // NOI18N\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel2, \"Username\");\n \n-        userNameTxt.setText(org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.userNameTxt.text\")); // NOI18N\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel3, \"Password\");\n+        jLabel3.setToolTipText(\"\");\n \n-        passwordTxt.setText(org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.passwordTxt.text\")); // NOI18N\n+        schemeTxt.setToolTipText(\"\");\n \n-        org.openide.awt.Mnemonics.setLocalizedText(okButton, org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.okButton.text\")); // NOI18N\n+        org.openide.awt.Mnemonics.setLocalizedText(okButton, \"submit\");\n         okButton.addActionListener(new java.awt.event.ActionListener() {\n             public void actionPerformed(java.awt.event.ActionEvent evt) {\n                 okButtonActionPerformed(evt);\n             }\n         });\n \n-        org.openide.awt.Mnemonics.setLocalizedText(jLabel4, org.openide.util.NbBundle.getMessage(ServerDetailsView.class, \"ServerDetailsView.jLabel4.text\")); // NOI18N\n+        jLabel4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel4, \"Apache Syncope connection\");\n+        jLabel4.setToolTipText(\"\");\n+\n+        hostTxt.setToolTipText(\"\");\n+\n+        jLabel5.setLabelFor(portTxt);\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel5, \"Port\");\n+        jLabel5.setToolTipText(\"\");\n+\n+        jLabel6.setLabelFor(hostTxt);\n+        org.openide.awt.Mnemonics.setLocalizedText(jLabel6, \"Host\");\n+        jLabel6.setToolTipText(\"\");\n \n         javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\n         getContentPane().setLayout(layout);\n         layout.setHorizontalGroup(\n             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n             .addGroup(layout.createSequentialGroup()\n+                .addGap(41, 41, 41)\n                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n-                    .addGroup(layout.createSequentialGroup()\n-                        .addGap(41, 41, 41)\n-                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)\n-                            .addComponent(okButton, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)\n-                            .addGroup(layout.createSequentialGroup()\n-                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n-                                    .addComponent(jLabel1)\n-                                    .addComponent(jLabel2)\n-                                    .addComponent(jLabel3))\n-                                .addGap(39, 39, 39)\n-                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)\n-                                    .addComponent(userNameTxt)\n-                                    .addComponent(urlTxt)\n-                                    .addComponent(passwordTxt, javax.swing.GroupLayout.PREFERRED_SIZE, 155, javax.swing.GroupLayout.PREFERRED_SIZE)))))\n-                    .addGroup(layout.createSequentialGroup()\n-                        .addGap(101, 101, 101)\n-                        .addComponent(jLabel4)))\n-                .addContainerGap(41, Short.MAX_VALUE))\n+                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 256, javax.swing.GroupLayout.PREFERRED_SIZE)\n+                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)\n+                        .addComponent(okButton, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)\n+                        .addGroup(layout.createSequentialGroup()\n+                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n+                                .addComponent(jLabel1)\n+                                .addComponent(jLabel2)\n+                                .addComponent(jLabel3)\n+                                .addComponent(jLabel5)\n+                                .addComponent(jLabel6))\n+                            .addGap(39, 39, 39)\n+                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)\n+                                .addComponent(portTxt)\n+                                .addComponent(hostTxt)\n+                                .addComponent(userNameTxt)\n+                                .addComponent(schemeTxt)\n+                                .addComponent(passwordTxt, javax.swing.GroupLayout.DEFAULT_SIZE, 155, Short.MAX_VALUE)))))\n+                .addContainerGap(40, Short.MAX_VALUE))\n         );\n         layout.setVerticalGroup(\n             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n             .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()\n-                .addContainerGap()\n-                .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, 32, Short.MAX_VALUE)\n+                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n+                .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)\n                 .addGap(18, 18, 18)\n                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n                     .addComponent(jLabel1)\n-                    .addComponent(urlTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\n-                .addGap(18, 18, 18)\n+                    .addComponent(schemeTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\n+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n-                    .addComponent(jLabel2)\n-                    .addComponent(userNameTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\n-                .addGap(18, 18, 18)\n+                    .addComponent(hostTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n+                    .addComponent(jLabel6))\n+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n+                    .addComponent(portTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n+                    .addComponent(jLabel5))\n+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n+                    .addComponent(userNameTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n+                    .addComponent(jLabel2))\n+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n                     .addComponent(jLabel3)\n                     .addComponent(passwordTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\n@@ -131,23 +161,33 @@ public void actionPerformed(java.awt.event.ActionEvent evt) {\n     //CHECKSTYLE:ON\n \n     private void okButtonActionPerformed(final java.awt.event.ActionEvent evt) {\n-        String url = urlTxt.getText();\n-        String userName = userNameTxt.getText();\n-        String password = new String(passwordTxt.getPassword());\n-        File file = new File(\"UserData.txt\");\n-        try {\n-            FileWriter fileWriter = new FileWriter(file);\n-            fileWriter.write(url + \"\\n\" + userName + \"\\n\" + password);\n-            fileWriter.flush();\n+        // validation\n+        List<String> validation = validate(schemeTxt, hostTxt, portTxt, userNameTxt);\n+        if (validation.isEmpty()) {\n+            Preferences prefs = NbPreferences.forModule(ResourceExplorerTopComponent.class);\n+            prefs.put(\"scheme\", schemeTxt.getText());\n+            prefs.put(\"host\", hostTxt.getText());\n+            prefs.put(\"port\", portTxt.getText());\n+            prefs.put(\"username\", userNameTxt.getText());\n+            prefs.put(\"password\", new String(passwordTxt.getPassword()));\n+            // dismiss panel\n             this.dispose();\n-        } catch (IOException ex) {\n-            JOptionPane.showMessageDialog(this, \"Error while saving Data.\", \"Error\", JOptionPane.ERROR_MESSAGE);\n+        } else {\n+            JOptionPane.showMessageDialog(\n+                    null, \"Please insert valid \" + validation, \"Validation  Error\", JOptionPane.ERROR_MESSAGE);\n         }\n     }\n \n-    public void setDetails(final String host, final String userName, final String password) {\n-        urlTxt.setText(host);\n-        userNameTxt.setText(userName);\n+    public void setDetails(\n+            final String scheme,\n+            final String host,\n+            final String port,\n+            final String username,\n+            final String password) {\n+        schemeTxt.setText(scheme);\n+        hostTxt.setText(host);\n+        portTxt.setText(port);\n+        userNameTxt.setText(username);\n         passwordTxt.setText(password);\n     }\n \n@@ -171,13 +211,42 @@ public void windowClosing(final java.awt.event.WindowEvent e) {\n     }\n \n     // Variables declaration - do not modify//GEN-BEGIN:variables\n+    private javax.swing.JTextField hostTxt;\n     private javax.swing.JLabel jLabel1;\n     private javax.swing.JLabel jLabel2;\n     private javax.swing.JLabel jLabel3;\n     private javax.swing.JLabel jLabel4;\n+    private javax.swing.JLabel jLabel5;\n+    private javax.swing.JLabel jLabel6;\n     private javax.swing.JButton okButton;\n     private javax.swing.JPasswordField passwordTxt;\n-    private javax.swing.JTextField urlTxt;\n+    private javax.swing.JTextField portTxt;\n+    private javax.swing.JTextField schemeTxt;\n     private javax.swing.JTextField userNameTxt;\n     // End of variables declaration//GEN-END:variables\n+\n+    private List<String> validate(\n+            final JTextField schemeTxt,\n+            final JTextField hostTxt,\n+            final JTextField portTxt,\n+            final JTextField userNameTxt) {\n+\n+        List<String> res = new ArrayList<>();\n+\n+        if (StringUtils.isBlank(schemeTxt.getText())\n+                || (!StringUtils.equals(schemeTxt.getText(), \"http\")\n+                && !StringUtils.equals(schemeTxt.getText(), \"https\"))) {\n+            res.add(\"scheme\");\n+        }\n+        if (StringUtils.isBlank(hostTxt.getText())) {\n+            res.add(\"host\");\n+        }\n+        if (StringUtils.isBlank(portTxt.getText()) || !StringUtils.isNumeric(portTxt.getText())) {\n+            res.add(\"port\");\n+        }\n+        if (StringUtils.isBlank(userNameTxt.getText())) {\n+            res.add(\"username\");\n+        }\n+        return res;\n+    }\n }"},{"sha":"794144eb8e38c21196293de07e27eeefcae5e9f2","filename":"pom.xml","status":"modified","additions":0,"deletions":11,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b03947a33a3ee3dced1cac6a863856824a4ae158/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b03947a33a3ee3dced1cac6a863856824a4ae158/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=b03947a33a3ee3dced1cac6a863856824a4ae158","patch":"@@ -1834,17 +1834,6 @@ under the License.\n           <version>4.1</version>\n         </plugin>\n \n-        <plugin>\n-          <groupId>org.codehaus.mojo</groupId>\n-          <artifactId>nbm-maven-plugin</artifactId>\n-          <version>4.1</version>\n-        </plugin>\n-\n-        <plugin>\n-          <groupId>org.codehaus.mojo</groupId>\n-          <artifactId>nbm-maven-plugin</artifactId>\n-          <version>4.1</version>\n-        </plugin>\n       </plugins>\n     </pluginManagement>\n "}]}