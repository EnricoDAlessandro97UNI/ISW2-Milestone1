{"sha":"8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjhkNmQ3MTJkZGI4Y2ZmNWU0NTcwNjhlOWE4ZTFiOGU1ZTMyMmYyZGQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-03-26T10:20:33Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-03-26T10:20:33Z"},"message":"[SYNCOPE-487] White noise: formatting\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/1_1_X@1581781 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7ae69fc46c10881b13acb592f1d0f18817b9372f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7ae69fc46c10881b13acb592f1d0f18817b9372f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"88b5ee2b85177c6a95d7e97f2e75161c8abaaed4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/88b5ee2b85177c6a95d7e97f2e75161c8abaaed4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/88b5ee2b85177c6a95d7e97f2e75161c8abaaed4"}],"stats":{"total":107,"additions":50,"deletions":57},"files":[{"sha":"ca99d0128ee002a52a24adc97d696bafa0d16d4e","filename":"core/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","patch":"@@ -192,7 +192,7 @@ under the License.\n     <dependency>\n       <groupId>org.apache.velocity</groupId>\n       <artifactId>velocity-tools</artifactId>\n-\t</dependency>\n+    </dependency>\n \t\n     <dependency>\n       <groupId>org.quartz-scheduler</groupId>"},{"sha":"200594d4e9f95dc46e35b42349240981b55b859e","filename":"core/src/main/java/org/apache/syncope/core/notification/NotificationManager.java","status":"modified","additions":24,"deletions":32,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java?ref=8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","patch":"@@ -70,7 +70,7 @@\n  *\n  * @see NotificationTask\n  */\n-@Transactional(rollbackFor = {Throwable.class})\n+@Transactional(rollbackFor = { Throwable.class })\n public class NotificationManager {\n \n     /**\n@@ -125,7 +125,7 @@ public class NotificationManager {\n      */\n     @Autowired\n     private VelocityEngine velocityEngine;\n-    \n+\n     /**\n      * Velocity tool manager.\n      */\n@@ -193,47 +193,39 @@ private NotificationTask getNotificationTask(\n \n         String htmlBody = mergeTemplateIntoString(\"mailTemplates/\" + notification.getTemplate() + \".html.vm\", model);\n         String textBody = mergeTemplateIntoString(\"mailTemplates/\" + notification.getTemplate() + \".txt.vm\", model);\n-        \n+\n         task.setHtmlBody(htmlBody);\n         task.setTextBody(textBody);\n-        \n+\n         return task;\n     }\n \n-    \n-    \n-    private String mergeTemplateIntoString(String templateLocation, Map<String, Object> model) {\n-    \tStringWriter result = new StringWriter();\n-    \ttry {\n-\t\t\tContext velocityContext = createVelocityContext(model);\n-\t\t\tvelocityEngine.mergeTemplate(templateLocation, SyncopeConstants.DEFAULT_ENCODING, velocityContext, result);\n-\t\t}\n-\t\tcatch (VelocityException e) {\n-\t\t\tLOG.error(\"Could not get mail body\", e);\n-\t\t\treturn \"\";\n-\t\t}\n-    \t// ensure same behaviour as by using Spring VelocityEngineUtils.mergeTemplateIntoString()\n-\t\tcatch (RuntimeException e) {\n-\t\t\tthrow e;\n-\t\t}\n-\t\tcatch (Exception e) {\n-\t\t\tLOG.error(\"Could not get mail body\", e);\n-\t\t\treturn \"\";\n-\t\t}\n-    \treturn result.toString();\n-    \t\n+    private String mergeTemplateIntoString(final String templateLocation, final Map<String, Object> model) {\n+        StringWriter result = new StringWriter();\n+        try {\n+            Context velocityContext = createVelocityContext(model);\n+            velocityEngine.mergeTemplate(templateLocation, SyncopeConstants.DEFAULT_ENCODING, velocityContext, result);\n+        } catch (VelocityException e) {\n+            LOG.error(\"Could not get mail body\", e);\n+        } catch (RuntimeException e) {\n+            // ensure same behaviour as by using Spring VelocityEngineUtils.mergeTemplateIntoString()\n+            throw e;\n+        } catch (Exception e) {\n+            LOG.error(\"Could not get mail body\", e);\n+        }\n+\n+        return result.toString();\n     }\n-    \n-    \n+\n     /**\n      * Create a Velocity Context for the given model, to be passed to the template for merging.\n-     * \n+     *\n      * @param model Velocity model\n      * @return Velocity context\n      */\n     protected Context createVelocityContext(Map<String, Object> model) {\n-    \tContext toolContext = velocityToolManager.createContext();\n-    \treturn new VelocityContext(model, toolContext);\n+        Context toolContext = velocityToolManager.createContext();\n+        return new VelocityContext(model, toolContext);\n     }\n \n     /**\n@@ -279,7 +271,7 @@ public void createTasks(\n                 LOG.debug(\"No events found about {}\", attributable);\n             } else if (attributableType == null || attributable == null || notification.getAbout() == null\n                     || searchDAO.matches(attributable, notification.getAbout(),\n-                    AttributableUtil.getInstance(attributableType))) {\n+                            AttributableUtil.getInstance(attributableType))) {\n \n                 LOG.debug(\"Creating notification task for events {} about {}\", events, attributable);\n "},{"sha":"e0181fe488de537c0a1d7b5a043d6ba740835723","filename":"core/src/test/java/org/apache/syncope/core/notification/NotificationTest.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java?ref=8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","patch":"@@ -256,9 +256,10 @@ public void notifyByMail() throws Exception {\n         assertNotNull(taskId);\n         assertNotNull(textBody);\n         assertTrue(\"Notification mail text doesn't contain expected content.\",\n-        \t\ttextBody.contains(\"Your email address is notificationtest@syncope.apache.org.\"));\n+                textBody.contains(\"Your email address is notificationtest@syncope.apache.org.\"));\n         assertTrue(\"Notification mail text doesn't contain expected content.\",\n-        \t\ttextBody.contains(\"Your email address inside a link: http://localhost/?email=notificationtest%40syncope.apache.org .\"));\n+                textBody.contains(\n+                        \"Your email address inside a link: http://localhost/?email=notificationtest%40syncope.apache.org .\"));\n \n         // 5. execute Notification task and verify e-mail\n         taskController.execute(taskId, false);"},{"sha":"ff918c94e199b18818b10ba81476f07e773ae762","filename":"pom.xml","status":"modified","additions":22,"deletions":22,"changes":44,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=8d6d712ddb8cff5e457068e9a8e1b8e5e322f2dd","patch":"@@ -260,7 +260,7 @@ under the License.\n       <email>gwimmel@apache.org</email>\n     </developer>\n     <developer>\n-        <id>andreapatricelli</id>\n+      <id>andreapatricelli</id>\n       <name>Andrea Patricelli</name>\n       <organization>Tirasa</organization>\n       <organizationUrl>http://www.tirasa.net/</organizationUrl>\n@@ -531,27 +531,27 @@ under the License.\n         <artifactId>velocity-tools</artifactId>\n         <version>${velocitytools.version}</version>\n         <exclusions>\n-  \t\t\t<exclusion>\n-  \t\t\t\t<artifactId>struts-core</artifactId>\n-  \t\t\t\t<groupId>org.apache.struts</groupId>\n-  \t\t\t</exclusion>\n-  \t\t\t<exclusion>\n-  \t\t\t\t<artifactId>struts-taglib</artifactId>\n-  \t\t\t\t<groupId>org.apache.struts</groupId>\n-  \t\t\t</exclusion>\n-  \t\t\t<exclusion>\n-  \t\t\t\t<artifactId>struts-tiles</artifactId>\n-  \t\t\t\t<groupId>org.apache.struts</groupId>\n-  \t\t\t</exclusion>\n-  \t\t\t<exclusion>\n-  \t\t\t\t<artifactId>sslext</artifactId>\n-  \t\t\t\t<groupId>sslext</groupId>\n-  \t\t\t</exclusion>\n-  \t\t\t<exclusion>\n-  \t\t\t\t<artifactId>commons-beanutils</artifactId>\n-  \t\t\t\t<groupId>commons-beanutils</groupId>\n-  \t\t\t</exclusion>\n-  \t\t</exclusions>\n+          <exclusion>\n+            <artifactId>struts-core</artifactId>\n+            <groupId>org.apache.struts</groupId>\n+          </exclusion>\n+          <exclusion>\n+            <artifactId>struts-taglib</artifactId>\n+            <groupId>org.apache.struts</groupId>\n+          </exclusion>\n+          <exclusion>\n+            <artifactId>struts-tiles</artifactId>\n+            <groupId>org.apache.struts</groupId>\n+          </exclusion>\n+          <exclusion>\n+            <artifactId>sslext</artifactId>\n+            <groupId>sslext</groupId>\n+          </exclusion>\n+          <exclusion>\n+            <artifactId>commons-beanutils</artifactId>\n+            <groupId>commons-beanutils</groupId>\n+          </exclusion>\n+        </exclusions>\n       </dependency>\n \n       <!-- Spring -->"}]}