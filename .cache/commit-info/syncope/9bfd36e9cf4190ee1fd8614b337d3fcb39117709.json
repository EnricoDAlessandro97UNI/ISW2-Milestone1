{"sha":"9bfd36e9cf4190ee1fd8614b337d3fcb39117709","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjliZmQzNmU5Y2Y0MTkwZWUxZmQ4NjE0YjMzN2QzZmNiMzkxMTc3MDk=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-05-13T13:32:49Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-05-13T13:32:49Z"},"message":"Fixes issue 20\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246944 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"860a01f514a15f008a4ca8f7f6e06499bb563328","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/860a01f514a15f008a4ca8f7f6e06499bb563328"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9bfd36e9cf4190ee1fd8614b337d3fcb39117709","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9bfd36e9cf4190ee1fd8614b337d3fcb39117709","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9bfd36e9cf4190ee1fd8614b337d3fcb39117709","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/comments","author":null,"committer":null,"parents":[{"sha":"bbe942bf53ee4370bfb3af7434dd9cd6d0b61e6a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bbe942bf53ee4370bfb3af7434dd9cd6d0b61e6a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/bbe942bf53ee4370bfb3af7434dd9cd6d0b61e6a"}],"stats":{"total":1590,"additions":921,"deletions":669},"files":[{"sha":"93c5845ee47342f0a033840a1b97dff251a614f2","filename":"client/src/main/java/org/syncope/client/mod/AbstractAttributableMod.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fmod%2FAbstractAttributableMod.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fmod%2FAbstractAttributableMod.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fmod%2FAbstractAttributableMod.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -87,6 +87,10 @@ public boolean addDerivedAttributeToBeAdded(String derivedAttribute) {\n         return derivedAttributesToBeAdded.add(derivedAttribute);\n     }\n \n+    public boolean addVirtualAttributeToBeAdded(String virtualAttribute) {\n+        return virtualAttributesToBeAdded.add(virtualAttribute);\n+    }\n+\n     public boolean removeDerivedAttributeToBeAdded(String derivedAttribute) {\n         return derivedAttributesToBeAdded.remove(derivedAttribute);\n     }\n@@ -105,6 +109,10 @@ public boolean addDerivedAttributeToBeRemoved(String derivedAttribute) {\n         return derivedAttributesToBeRemoved.add(derivedAttribute);\n     }\n \n+    public boolean addVirtualAttributeToBeRemoved(String virtualAttribute) {\n+        return virtualAttributesToBeRemoved.add(virtualAttribute);\n+    }\n+\n     public boolean removeDerivedAttributeToBeRemoved(String derivedAttribute) {\n         return derivedAttributesToBeRemoved.remove(derivedAttribute);\n     }"},{"sha":"93dfc162149a838c28084f569ee0dcad77491854","filename":"console/src/main/java/org/syncope/console/pages/MembershipModalPage.java","status":"modified","additions":21,"deletions":0,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -53,6 +53,8 @@\n import org.syncope.console.wicket.markup.html.form.AjaxDecoratedCheckbox;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.syncope.console.wicket.markup.html.form.DateFieldPanel;\n+import org.syncope.console.wicket.markup.html.form.DerivedAttributesForm;\n+import org.syncope.console.wicket.markup.html.form.VirtualAttributesForm;\n import org.syncope.types.SchemaType;\n \n /**\n@@ -87,6 +89,15 @@ protected List<String> load() {\n                     }\n                 };\n \n+        final IModel<List<String>> virtualSchemaNames =\n+                new LoadableDetachableModel<List<String>>() {\n+\n+                    @Override\n+                    protected List<String> load() {\n+                        return schemaRestClient.getVirtualSchemaNames(\"membership\");\n+                    }\n+                };\n+\n         final ListView userAttributesView = new ListView(\"membershipSchemas\",\n                 schemaWrappers) {\n \n@@ -284,8 +295,18 @@ protected void onError(AjaxRequestTarget target, Form form) {\n         //--------------------------------\n         // Derived attributes container\n         //--------------------------------\n+        form.add(\n+                (new DerivedAttributesForm(\"derAttributesForm\")).build(\n+                this, membershipTO, derivedSchemaNames));\n+        //--------------------------------\n \n         //--------------------------------\n+        // Virtual attributes container\n+        //--------------------------------\n+        form.add(\n+                (new VirtualAttributesForm(\"virAttributesForm\")).build(\n+                this, membershipTO, virtualSchemaNames));\n+        //--------------------------------\n \n         add(form);\n     }"},{"sha":"b689932f3c5e34816d73daead3c186203da14df8","filename":"console/src/main/java/org/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":36,"deletions":0,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -72,14 +72,20 @@ public class ResourceModalPage extends BaseModalPage {\n \n     private List<String> uDerSchemaAttrNames;\n \n+    private List<String> uVirSchemaAttrNames;\n+\n     private List<String> rSchemaAttrNames;\n \n     private List<String> rDerSchemaAttrNames;\n \n+    private List<String> rVirSchemaAttrNames;\n+\n     private List<String> mSchemaAttrNames;\n \n     private List<String> mDerSchemaAttrNames;\n \n+    private List<String> mVirSchemaAttrNames;\n+\n     private WebMarkupContainer mappingContainer;\n \n     public ResourceModalPage(final Resources basePage, final ModalWindow window,\n@@ -91,16 +97,22 @@ public ResourceModalPage(final Resources basePage, final ModalWindow window,\n                 schemaRestClient.getSchemaNames(\"user\");\n         uDerSchemaAttrNames =\n                 schemaRestClient.getDerivedSchemaNames(\"user\");\n+        uVirSchemaAttrNames =\n+                schemaRestClient.getVirtualSchemaNames(\"user\");\n \n         rSchemaAttrNames =\n                 schemaRestClient.getSchemaNames(\"role\");\n         rDerSchemaAttrNames =\n                 schemaRestClient.getDerivedSchemaNames(\"role\");\n+        rVirSchemaAttrNames =\n+                schemaRestClient.getVirtualSchemaNames(\"role\");\n \n         mSchemaAttrNames =\n                 schemaRestClient.getSchemaNames(\"membership\");\n         mDerSchemaAttrNames =\n                 schemaRestClient.getDerivedSchemaNames(\"membership\");\n+        mVirSchemaAttrNames =\n+                schemaRestClient.getVirtualSchemaNames(\"membership\");\n \n         final IModel<List<ConnInstanceTO>> connectors =\n                 new LoadableDetachableModel<List<ConnInstanceTO>>() {\n@@ -263,6 +275,10 @@ public CharSequence preDecorateScript(\n                             schemaAttrChoice.setChoices(uDerSchemaAttrNames);\n                             break;\n \n+                        case UserVirtualSchema:\n+                            schemaAttrChoice.setChoices(uVirSchemaAttrNames);\n+                            break;\n+\n                         case RoleSchema:\n                             schemaAttrChoice.setChoices(rSchemaAttrNames);\n                             break;\n@@ -271,6 +287,10 @@ public CharSequence preDecorateScript(\n                             schemaAttrChoice.setChoices(rDerSchemaAttrNames);\n                             break;\n \n+                        case RoleVirtualSchema:\n+                            schemaAttrChoice.setChoices(rVirSchemaAttrNames);\n+                            break;\n+\n                         case MembershipSchema:\n                             schemaAttrChoice.setChoices(mSchemaAttrNames);\n                             break;\n@@ -279,6 +299,10 @@ public CharSequence preDecorateScript(\n                             schemaAttrChoice.setChoices(mDerSchemaAttrNames);\n                             break;\n \n+                        case MembershipVirtualSchema:\n+                            schemaAttrChoice.setChoices(mVirSchemaAttrNames);\n+                            break;\n+\n                         case SyncopeUserId:\n                             schemaAttrChoice.setEnabled(false);\n                             schemaAttrChoice.setRequired(false);\n@@ -442,6 +466,10 @@ protected List<String> load() {\n                                             result = uDerSchemaAttrNames;\n                                             break;\n \n+                                        case UserVirtualSchema:\n+                                            result = uVirSchemaAttrNames;\n+                                            break;\n+\n                                         case RoleSchema:\n                                             result = rSchemaAttrNames;\n                                             break;\n@@ -450,6 +478,10 @@ protected List<String> load() {\n                                             result = rDerSchemaAttrNames;\n                                             break;\n \n+                                        case RoleVirtualSchema:\n+                                            result = rVirSchemaAttrNames;\n+                                            break;\n+\n                                         case MembershipSchema:\n                                             result = mSchemaAttrNames;\n                                             break;\n@@ -458,6 +490,10 @@ protected List<String> load() {\n                                             result = mDerSchemaAttrNames;\n                                             break;\n \n+                                        case MembershipVirtualSchema:\n+                                            result = mVirSchemaAttrNames;\n+                                            break;\n+\n                                         case SyncopeUserId:\n                                         case Password:\n                                         default:"},{"sha":"be82af14d0b379fc2795f6a93d8f602fdc581fa0","filename":"console/src/main/java/org/syncope/console/pages/RoleModalPage.java","status":"modified","additions":28,"deletions":192,"changes":220,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -38,7 +38,6 @@\n import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n-import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n@@ -47,7 +46,6 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.model.Model;\n-import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.util.ListModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.mod.AttributeMod;\n@@ -63,9 +61,10 @@\n import org.syncope.console.rest.RoleRestClient;\n import org.syncope.console.rest.SchemaRestClient;\n import org.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n-import org.syncope.console.wicket.markup.html.form.AjaxDecoratedCheckbox;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.syncope.console.wicket.markup.html.form.DateFieldPanel;\n+import org.syncope.console.wicket.markup.html.form.DerivedAttributesForm;\n+import org.syncope.console.wicket.markup.html.form.VirtualAttributesForm;\n import org.syncope.types.SchemaType;\n \n /**\n@@ -306,13 +305,17 @@ public CharSequence preDecorateScript(\n         //--------------------------------\n         // Derived attributes container\n         //--------------------------------\n-        setDerivedAttributeContainer(form, roleTO, derivedSchemaNames);\n+        form.add(\n+                (new DerivedAttributesForm(\"derAttributesForm\")).build(\n+                this, roleTO, derivedSchemaNames));\n         //--------------------------------\n \n         //--------------------------------\n         // Virtual attributes container\n         //--------------------------------\n-        setVirtualAttributeContainer(form, roleTO, virtualSchemaNames);\n+        form.add(\n+                (new VirtualAttributesForm(\"virAttributesForm\")).build(\n+                this, roleTO, virtualSchemaNames));\n         //--------------------------------\n \n         ListModel<ResourceTO> selectedResources = new ListModel<ResourceTO>();\n@@ -590,12 +593,29 @@ public void setupRoleMod(final RoleTO roleTO) {\n                     newDerivedAttribute.getSchema());\n         }\n \n-        //3.Search and update role's attributes\n+        //4.Update user's schema virtual attributes\n+        final List<AttributeTO> newVirtualAttributes =\n+                roleTO.getVirtualAttributes();\n+\n+        final List<AttributeTO> oldVirtualAttributes =\n+                oldRole.getVirtualAttributes();\n+\n+        for (AttributeTO oldVirtualAttribute : oldVirtualAttributes) {\n+            roleMod.addVirtualAttributeToBeRemoved(\n+                    oldVirtualAttribute.getSchema());\n+        }\n+\n+        for (AttributeTO newVirtualAttribute : newVirtualAttributes) {\n+            roleMod.addVirtualAttributeToBeAdded(\n+                    newVirtualAttribute.getSchema());\n+        }\n+\n+        //4.Search and update role's attributes\n         for (AttributeTO attributeTO : roleTO.getAttributes()) {\n             searchAndUpdateAttribute(attributeTO);\n         }\n \n-        //4.Search and update role's resources\n+        //5.Search and update role's resources\n         for (String resource : roleTO.getResources()) {\n             searchAndAddResource(resource);\n         }\n@@ -604,7 +624,7 @@ public void setupRoleMod(final RoleTO roleTO) {\n             searchAndDropResource(resource, roleTO);\n         }\n \n-        //5.Check if entitlements' list has been changed\n+        //6.Check if entitlements' list has been changed\n         if (!oldRole.getEntitlements().equals(roleTO.getEntitlements())) {\n             roleMod.setEntitlements(roleTO.getEntitlements());\n         }\n@@ -733,188 +753,4 @@ public void searchAndUpdateAttribute(AttributeTO attributeTO) {\n             }\n         }\n     }\n-\n-    private void setDerivedAttributeContainer(\n-            final Form form,\n-            final RoleTO roleTO,\n-            final IModel<List<String>> derivedSchemaNames) {\n-        final WebMarkupContainer derivedAttributesContainer =\n-                new WebMarkupContainer(\"derivedAttributesContainer\");\n-\n-        derivedAttributesContainer.setOutputMarkupId(true);\n-        form.add(derivedAttributesContainer);\n-\n-        AjaxButton addDerivedAttributeBtn = new IndicatingAjaxButton(\n-                \"addDerivedAttributeBtn\",\n-                new Model(getString(\"addDerivedAttributeBtn\"))) {\n-\n-            @Override\n-            protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n-\n-                roleTO.getDerivedAttributes().add(new AttributeTO());\n-                target.addComponent(derivedAttributesContainer);\n-            }\n-        };\n-        addDerivedAttributeBtn.setDefaultFormProcessing(false);\n-        form.add(addDerivedAttributeBtn);\n-\n-        ListView<AttributeTO> derivedAttributes = new ListView<AttributeTO>(\n-                \"derivedAttributes\", roleTO.getDerivedAttributes()) {\n-\n-            @Override\n-            protected void populateItem(final ListItem<AttributeTO> item) {\n-                final AttributeTO derivedAttributeTO = item.getModelObject();\n-\n-                item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n-                        new Model(Boolean.FALSE)) {\n-\n-                    @Override\n-                    protected void onUpdate(final AjaxRequestTarget target) {\n-                        roleTO.getDerivedAttributes().remove(derivedAttributeTO);\n-                        item.getParent().removeAll();\n-                        target.addComponent(derivedAttributesContainer);\n-                    }\n-\n-                    @Override\n-                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n-                        return new AjaxPreprocessingCallDecorator(\n-                                super.getAjaxCallDecorator()) {\n-\n-                            @Override\n-                            public CharSequence preDecorateScript(\n-                                    final CharSequence script) {\n-\n-                                return \"if (confirm('\"\n-                                        + getString(\"confirmDelete\") + \"'))\"\n-                                        + \"{\" + script + \"} \"\n-                                        + \"else {this.checked = false;}\";\n-                            }\n-                        };\n-                    }\n-                });\n-\n-                final DropDownChoice<String> derivedSchemaChoice =\n-                        new DropDownChoice<String>(\n-                        \"schema\",\n-                        new PropertyModel<String>(derivedAttributeTO, \"schema\"),\n-                        derivedSchemaNames);\n-\n-                derivedSchemaChoice.setOutputMarkupId(true);\n-\n-                if (derivedAttributeTO.getSchema() != null) {\n-                    item.add(derivedSchemaChoice.setEnabled(Boolean.FALSE));\n-                } else {\n-                    item.add(derivedSchemaChoice.setRequired(true));\n-                }\n-\n-                final List<String> values = derivedAttributeTO.getValues();\n-\n-                if (values == null || values.isEmpty()) {\n-                    item.add(new TextField(\n-                            \"derivedAttributeValue\",\n-                            new Model(null)).setVisible(Boolean.FALSE));\n-                } else {\n-                    item.add(new TextField(\n-                            \"derivedAttributeValue\",\n-                            new Model(values.get(0))).setEnabled(\n-                            Boolean.FALSE));\n-                }\n-            }\n-        };\n-        derivedAttributes.setReuseItems(true);\n-        derivedAttributesContainer.add(derivedAttributes);\n-    }\n-\n-    private void setVirtualAttributeContainer(\n-            final Form form,\n-            final RoleTO roleTO,\n-            final IModel<List<String>> virtualSchemaNames) {\n-        final WebMarkupContainer virtualAttributesContainer =\n-                new WebMarkupContainer(\"virtualAttributesContainer\");\n-\n-        virtualAttributesContainer.setOutputMarkupId(true);\n-        form.add(virtualAttributesContainer);\n-\n-        AjaxButton addVirtualAttributeBtn = new IndicatingAjaxButton(\n-                \"addVirtualAttributeBtn\",\n-                new Model(getString(\"addVirtualAttributeBtn\"))) {\n-\n-            @Override\n-            protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n-\n-                roleTO.getVirtualAttributes().add(new AttributeTO());\n-                target.addComponent(virtualAttributesContainer);\n-            }\n-        };\n-        addVirtualAttributeBtn.setDefaultFormProcessing(false);\n-        form.add(addVirtualAttributeBtn);\n-\n-        ListView<AttributeTO> virtualAttributes = new ListView<AttributeTO>(\n-                \"virtualAttributes\", roleTO.getVirtualAttributes()) {\n-\n-            @Override\n-            protected void populateItem(final ListItem<AttributeTO> item) {\n-                final AttributeTO virtualAttributeTO = item.getModelObject();\n-\n-                item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n-                        new Model(Boolean.FALSE)) {\n-\n-                    @Override\n-                    protected void onUpdate(final AjaxRequestTarget target) {\n-                        roleTO.getVirtualAttributes().remove(virtualAttributeTO);\n-                        item.getParent().removeAll();\n-                        target.addComponent(virtualAttributesContainer);\n-                    }\n-\n-                    @Override\n-                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n-                        return new AjaxPreprocessingCallDecorator(\n-                                super.getAjaxCallDecorator()) {\n-\n-                            @Override\n-                            public CharSequence preDecorateScript(\n-                                    final CharSequence script) {\n-\n-                                return \"if (confirm('\"\n-                                        + getString(\"confirmDelete\") + \"'))\"\n-                                        + \"{\" + script + \"} \"\n-                                        + \"else {this.checked = false;}\";\n-                            }\n-                        };\n-                    }\n-                });\n-\n-                final DropDownChoice<String> virtualSchemaChoice =\n-                        new DropDownChoice<String>(\n-                        \"schema\",\n-                        new PropertyModel<String>(virtualAttributeTO, \"schema\"),\n-                        virtualSchemaNames);\n-\n-                virtualSchemaChoice.setOutputMarkupId(true);\n-\n-                if (virtualAttributeTO.getSchema() != null) {\n-                    item.add(virtualSchemaChoice.setEnabled(Boolean.FALSE));\n-                } else {\n-                    item.add(virtualSchemaChoice.setRequired(true));\n-                }\n-\n-                final List<String> values = virtualAttributeTO.getValues();\n-\n-                if (values == null || values.isEmpty()) {\n-                    item.add(new TextField(\n-                            \"virtualAttributeValue\",\n-                            new Model(null)).setVisible(Boolean.FALSE));\n-                } else {\n-                    item.add(new TextField(\n-                            \"virtualAttributeValue\",\n-                            new Model(values.get(0))).setEnabled(\n-                            Boolean.FALSE));\n-                }\n-            }\n-        };\n-        virtualAttributes.setReuseItems(true);\n-        virtualAttributesContainer.add(virtualAttributes);\n-    }\n }"},{"sha":"68e32d9aa05614c058bd673e0473faf5f611b349","filename":"console/src/main/java/org/syncope/console/pages/Roles.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -42,9 +42,9 @@ public class Roles extends BasePage {\n \n     private ModalWindow createRoleWin = null;\n \n-    private static final int WIN_HEIGHT = 450;\n+    private static final int WIN_HEIGHT = 500;\n \n-    private static final int WIN_WIDTH = 600;\n+    private static final int WIN_WIDTH = 700;\n \n     private WebMarkupContainer container;\n "},{"sha":"15efd96ac1ba6505f82bf0bad407faf23067c10e","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":43,"deletions":205,"changes":248,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -32,8 +32,6 @@\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.ajax.IAjaxCallDecorator;\n-import org.apache.wicket.ajax.calldecorator.AjaxPreprocessingCallDecorator;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n@@ -47,10 +45,8 @@\n import org.apache.wicket.markup.html.WebMarkupContainerWithAssociatedMarkup;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n-import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.PasswordTextField;\n-import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n import org.apache.wicket.markup.html.panel.Panel;\n@@ -83,9 +79,10 @@\n import org.syncope.console.rest.UserRestClient;\n import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n-import org.syncope.console.wicket.markup.html.form.AjaxDecoratedCheckbox;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.syncope.console.wicket.markup.html.form.DateFieldPanel;\n+import org.syncope.console.wicket.markup.html.form.DerivedAttributesForm;\n+import org.syncope.console.wicket.markup.html.form.VirtualAttributesForm;\n import org.syncope.types.SchemaType;\n \n /**\n@@ -141,9 +138,9 @@ public UserModalPage(final Users basePage, final ModalWindow window,\n \n         add(new Label(\"id\", String.valueOf(userTO.getId())));\n \n-        final Form userForm = new Form(\"UserForm\");\n+        final Form form = new Form(\"UserForm\");\n \n-        userForm.setModel(new CompoundPropertyModel(userTO));\n+        form.setModel(new CompoundPropertyModel(userTO));\n \n         setupSchemaWrappers(createFlag, userTO);\n         setupMemberships(createFlag, userTO);\n@@ -163,7 +160,7 @@ protected List<String> load() {\n \n                     @Override\n                     protected List<String> load() {\n-                        return schemaRestClient.getDerivedSchemaNames(\"user\");\n+                        return schemaRestClient.getVirtualSchemaNames(\"user\");\n                     }\n                 };\n \n@@ -180,14 +177,16 @@ protected void populateItem(ListItem item) {\n                         item.add(new Label(\"name\",\n                                 schemaWrapper.getSchemaTO().getName()));\n \n-                        item.add(new ListView(\"fields\", schemaWrapper.getValues()) {\n+                        item.add(new ListView(\"fields\",\n+                                schemaWrapper.getValues()) {\n \n                             Panel panel;\n \n                             @Override\n                             protected void populateItem(final ListItem item) {\n \n-                                String mandatoryCondition = schemaTO.getMandatoryCondition();\n+                                String mandatoryCondition =\n+                                        schemaTO.getMandatoryCondition();\n                                 boolean required = false;\n \n                                 if (mandatoryCondition.equalsIgnoreCase(\"true\")) {\n@@ -259,7 +258,7 @@ public void setObject(Serializable object) {\n                                         }\n                                     }, schemaTO.getConversionPattern(),\n                                             required,\n-                                            schemaTO.isReadonly(), userForm);\n+                                            schemaTO.isReadonly(), form);\n                                 } else {\n                                     panel = new AjaxTextFieldPanel(\"panel\",\n                                             schemaTO.getName(), new Model() {\n@@ -331,18 +330,22 @@ protected void onSubmit(AjaxRequestTarget target,\n                     }\n                 };\n \n-        userForm.add(userAttributesView);\n+        form.add(userAttributesView);\n \n         //--------------------------------\n         // Derived attributes container\n         //--------------------------------\n-        setDerivedAttributeContainer(userForm, userTO, derivedSchemaNames);\n+        form.add(\n+                (new DerivedAttributesForm(\"derAttributesForm\")).build(\n+                this, userTO, derivedSchemaNames));\n         //--------------------------------\n \n         //--------------------------------\n         // Virtual attributes container\n         //--------------------------------\n-        setVirtualAttributeContainer(userForm, userTO, derivedSchemaNames);\n+        form.add(\n+                (new VirtualAttributesForm(\"virAttributesForm\")).build(\n+                this, userTO, virtualSchemaNames));\n         //--------------------------------\n \n         ListModel<ResourceTO> selectedResources = new ListModel<ResourceTO>();\n@@ -355,7 +358,7 @@ protected void onSubmit(AjaxRequestTarget target,\n         final Palette resourcesPalette = new Palette(\"resourcesPalette\",\n                 selectedResources, availableResources, paletteRenderer,\n                 8, false);\n-        userForm.add(resourcesPalette);\n+        form.add(resourcesPalette);\n \n         container = new WebMarkupContainer(\"container\");\n         container.add(userAttributesView);\n@@ -383,7 +386,7 @@ public void onComponentTag(final Component component,\n \n         container.setOutputMarkupId(true);\n \n-        userForm.add(container);\n+        form.add(container);\n \n         submit = new IndicatingAjaxButton(\"submit\", new Model(\n                 getString(\"submit\"))) {\n@@ -438,7 +441,7 @@ protected void onError(AjaxRequestTarget target, Form form) {\n         MetaDataRoleAuthorizationStrategy.authorize(\n                 submit, RENDER, allowedRoles);\n \n-        userForm.add(submit);\n+        form.add(submit);\n \n         // Roles Tab\n         final List<RoleTO> roles = roleRestClient.getAllRoles();\n@@ -476,7 +479,7 @@ public Page createPage() {\n         tree.getTreeState().expandAll();\n         tree.updateTree();\n \n-        userForm.add(tree);\n+        form.add(tree);\n \n \n         ListView membershipsView = new ListView(\"memberships\", membershipTOs) {\n@@ -536,8 +539,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n         setWindowClosedCallback(membershipWin, membershipsContainer);\n \n-        userForm.add(membershipsContainer);\n-        add(userForm);\n+        form.add(membershipsContainer);\n+        add(form);\n     }\n \n     private String getRoleName(long roleId, List<RoleTO> roles) {\n@@ -795,12 +798,29 @@ private void setupUserMod(final UserTO userTO) {\n                     newDerivedAttribute.getSchema());\n         }\n \n-        //3.Update user's schema attributes\n+        //3.Update user's schema virtual attributes\n+        final List<AttributeTO> newVirtualAttributes =\n+                userTO.getDerivedAttributes();\n+\n+        final List<AttributeTO> oldVirtualAttributes =\n+                oldUser.getDerivedAttributes();\n+\n+        for (AttributeTO oldVirtualAttribute : oldVirtualAttributes) {\n+            userMod.addVirtualAttributeToBeRemoved(\n+                    oldVirtualAttribute.getSchema());\n+        }\n+\n+        for (AttributeTO newVirtualAttribute : newVirtualAttributes) {\n+            userMod.addVirtualAttributeToBeAdded(\n+                    newVirtualAttribute.getSchema());\n+        }\n+\n+        //4.Update user's schema attributes\n         for (AttributeTO attributeTO : userTO.getAttributes()) {\n             searchAndUpdateAttribute(attributeTO);\n         }\n \n-        //4.Update user's resources\n+        //5.Update user's resources\n         for (String resource : userTO.getResources()) {\n             searchAndAddResource(resource);\n         }\n@@ -810,7 +830,7 @@ private void setupUserMod(final UserTO userTO) {\n             searchAndDropResource(resource, userTO);\n         }\n \n-        //5.Update user's memberships\n+        //6.Update user's memberships\n         for (MembershipTO membership : userTO.getMemberships()) {\n             searchAndUpdateMembership(membership);\n         }\n@@ -1036,186 +1056,4 @@ private void searchAndDropMembership(final MembershipTO oldMembership,\n             userMod.addMembershipToBeRemoved(oldMembership.getId());\n         }\n     }\n-\n-    private void setDerivedAttributeContainer(\n-            final Form userForm,\n-            final UserTO userTO,\n-            final IModel<List<String>> derivedSchemaNames) {\n-        final WebMarkupContainer derivedAttributesContainer =\n-                new WebMarkupContainer(\"derivedAttributesContainer\");\n-        derivedAttributesContainer.setOutputMarkupId(true);\n-        userForm.add(derivedAttributesContainer);\n-\n-        AjaxButton addDerivedAttributeBtn = new IndicatingAjaxButton(\n-                \"addDerivedAttributeBtn\",\n-                new Model(getString(\"addDerivedAttributeBtn\"))) {\n-\n-            @Override\n-            protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n-\n-                userTO.getDerivedAttributes().add(new AttributeTO());\n-                target.addComponent(derivedAttributesContainer);\n-            }\n-        };\n-        addDerivedAttributeBtn.setDefaultFormProcessing(false);\n-        userForm.add(addDerivedAttributeBtn);\n-\n-        ListView<AttributeTO> derivedAttributes = new ListView<AttributeTO>(\n-                \"derivedAttributes\", userTO.getDerivedAttributes()) {\n-\n-            @Override\n-            protected void populateItem(final ListItem<AttributeTO> item) {\n-                final AttributeTO derivedAttributeTO = item.getModelObject();\n-\n-                item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n-                        new Model(Boolean.FALSE)) {\n-\n-                    @Override\n-                    protected void onUpdate(final AjaxRequestTarget target) {\n-                        userTO.getDerivedAttributes().remove(derivedAttributeTO);\n-                        item.getParent().removeAll();\n-                        target.addComponent(derivedAttributesContainer);\n-                    }\n-\n-                    @Override\n-                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n-                        return new AjaxPreprocessingCallDecorator(\n-                                super.getAjaxCallDecorator()) {\n-\n-                            @Override\n-                            public CharSequence preDecorateScript(\n-                                    final CharSequence script) {\n-\n-                                return \"if (confirm('\"\n-                                        + getString(\"confirmDelete\") + \"'))\"\n-                                        + \"{\" + script + \"} \"\n-                                        + \"else {this.checked = false;}\";\n-                            }\n-                        };\n-                    }\n-                });\n-\n-                final DropDownChoice<String> derivedSchemaChoice =\n-                        new DropDownChoice<String>(\n-                        \"schema\",\n-                        new PropertyModel<String>(derivedAttributeTO, \"schema\"),\n-                        derivedSchemaNames);\n-\n-                derivedSchemaChoice.setOutputMarkupId(true);\n-\n-                if (derivedAttributeTO.getSchema() != null) {\n-                    item.add(derivedSchemaChoice.setEnabled(Boolean.FALSE));\n-                } else {\n-                    item.add(derivedSchemaChoice.setRequired(true));\n-                }\n-\n-                final List<String> values = derivedAttributeTO.getValues();\n-\n-                if (values == null || values.isEmpty()) {\n-                    item.add(new TextField(\n-                            \"derivedAttributeValue\",\n-                            new Model(null)).setVisible(Boolean.FALSE));\n-                } else {\n-                    item.add(new TextField(\n-                            \"derivedAttributeValue\",\n-                            new Model(values.get(0))).setEnabled(\n-                            Boolean.FALSE));\n-                }\n-            }\n-        };\n-        derivedAttributes.setReuseItems(true);\n-        derivedAttributesContainer.add(derivedAttributes);\n-    }\n-\n-    private void setVirtualAttributeContainer(\n-            final Form userForm,\n-            final UserTO userTO,\n-            final IModel<List<String>> virtualSchemaNames) {\n-        final WebMarkupContainer virtualAttributesContainer =\n-                new WebMarkupContainer(\"virtualAttributesContainer\");\n-        virtualAttributesContainer.setOutputMarkupId(true);\n-        userForm.add(virtualAttributesContainer);\n-\n-        AjaxButton addVirtualAttributeBtn = new IndicatingAjaxButton(\n-                \"addVirtualAttributeBtn\",\n-                new Model(getString(\"addVirtualAttributeBtn\"))) {\n-\n-            @Override\n-            protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n-\n-                userTO.getVirtualAttributes().add(new AttributeTO());\n-                target.addComponent(virtualAttributesContainer);\n-            }\n-        };\n-        addVirtualAttributeBtn.setDefaultFormProcessing(false);\n-        userForm.add(addVirtualAttributeBtn);\n-\n-        ListView<AttributeTO> virtulaAttributes = new ListView<AttributeTO>(\n-                \"virtualAttributes\", userTO.getVirtualAttributes()) {\n-\n-            @Override\n-            protected void populateItem(final ListItem<AttributeTO> item) {\n-                final AttributeTO virtualAttributeTO = item.getModelObject();\n-\n-                item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n-                        new Model(Boolean.FALSE)) {\n-\n-                    @Override\n-                    protected void onUpdate(final AjaxRequestTarget target) {\n-                        userTO.getVirtualAttributes().remove(virtualAttributeTO);\n-                        item.getParent().removeAll();\n-                        target.addComponent(virtualAttributesContainer);\n-                    }\n-\n-                    @Override\n-                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n-                        return new AjaxPreprocessingCallDecorator(\n-                                super.getAjaxCallDecorator()) {\n-\n-                            @Override\n-                            public CharSequence preDecorateScript(\n-                                    final CharSequence script) {\n-\n-                                return \"if (confirm('\"\n-                                        + getString(\"confirmDelete\") + \"'))\"\n-                                        + \"{\" + script + \"} \"\n-                                        + \"else {this.checked = false;}\";\n-                            }\n-                        };\n-                    }\n-                });\n-\n-                final DropDownChoice<String> virtualSchemaChoice =\n-                        new DropDownChoice<String>(\n-                        \"schema\",\n-                        new PropertyModel<String>(virtualAttributeTO, \"schema\"),\n-                        virtualSchemaNames);\n-\n-                virtualSchemaChoice.setOutputMarkupId(true);\n-\n-                if (virtualAttributeTO.getSchema() != null) {\n-                    item.add(virtualSchemaChoice.setEnabled(Boolean.FALSE));\n-                } else {\n-                    item.add(virtualSchemaChoice.setRequired(true));\n-                }\n-\n-                final List<String> values = virtualAttributeTO.getValues();\n-\n-                if (values == null || values.isEmpty()) {\n-                    item.add(new TextField(\n-                            \"virtualAttributeValue\",\n-                            new Model(null)).setVisible(Boolean.FALSE));\n-                } else {\n-                    item.add(new TextField(\n-                            \"virtualAttributeValue\",\n-                            new Model(values.get(0))).setEnabled(\n-                            Boolean.FALSE));\n-                }\n-            }\n-        };\n-        virtulaAttributes.setReuseItems(true);\n-        virtualAttributesContainer.add(virtulaAttributes);\n-    }\n }"},{"sha":"0f0f9397749acff22f7911a583918edbd6654afe","filename":"console/src/main/java/org/syncope/console/pages/Users.java","status":"modified","additions":19,"deletions":1,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -85,6 +85,8 @@ public class Users extends BasePage {\n \n     private final static String DERIVED_ATTRIBUTE_PREFIX = \"[D] \";\n \n+    private final static String VIRTUAL_ATTRIBUTE_PREFIX = \"[V] \";\n+\n     @SpringBean\n     private UserRestClient userRestClient;\n \n@@ -138,6 +140,15 @@ protected List<String> load() {\n                         }\n                     }\n \n+                    List<String> virtualSchemas =\n+                            schemaRestClient.getVirtualSchemaNames(\"user\");\n+\n+                    if (virtualSchemas != null) {\n+                        for (String schema : virtualSchemas) {\n+                            schemas.add(VIRTUAL_ATTRIBUTE_PREFIX + schema);\n+                        }\n+                    }\n+\n                     return schemas;\n                 }\n             };\n@@ -495,7 +506,7 @@ protected List<IColumn<UserTO>> getColumns(final ModalWindow editModalWin) {\n         columns.add(new PropertyColumn(\n                 new Model(getString(\"status\")), \"status\", \"status\"));\n         columns.add(new TokenColumn(new Model(getString(\"token\")), \"token\"));\n-        \n+\n         for (String schemaName : prefMan.getList(getWebRequestCycle().\n                 getWebRequest(), Constants.PREF_USERS_ATTRIBUTES_VIEW)) {\n \n@@ -795,6 +806,9 @@ public UserAttrColumn(final IModel<String> displayModel,\n                     schemaName.startsWith(DERIVED_ATTRIBUTE_PREFIX)\n                     ? schemaName.substring(\n                     DERIVED_ATTRIBUTE_PREFIX.length(), schemaName.length())\n+                    : schemaName.startsWith(VIRTUAL_ATTRIBUTE_PREFIX)\n+                    ? schemaName.substring(\n+                    VIRTUAL_ATTRIBUTE_PREFIX.length(), schemaName.length())\n                     : schemaName);\n \n             this.schemaName = schemaName;\n@@ -813,6 +827,10 @@ public void populateItem(\n                     ? rowModel.getObject().getDerivedAttributeMap().get(\n                     schemaName.substring(\n                     DERIVED_ATTRIBUTE_PREFIX.length(), schemaName.length()))\n+                    : schemaName.startsWith(VIRTUAL_ATTRIBUTE_PREFIX)\n+                    ? rowModel.getObject().getVirtualAttributeMap().get(\n+                    schemaName.substring(\n+                    VIRTUAL_ATTRIBUTE_PREFIX.length(), schemaName.length()))\n                     : rowModel.getObject().getAttributeMap().get(schemaName);\n \n             if (values == null || values.isEmpty()) {"},{"sha":"faedd002d49fbf75b83b82e3a48628841cacf1bb","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/DerivedAttributesForm.java","status":"added","additions":159,"deletions":0,"changes":159,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDerivedAttributesForm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDerivedAttributesForm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDerivedAttributesForm.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -0,0 +1,159 @@\n+/*\n+ *  Copyright 2011 fabio.\n+ * \n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.wicket.markup.html.form;\n+\n+import java.util.List;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.IAjaxCallDecorator;\n+import org.apache.wicket.ajax.calldecorator.AjaxPreprocessingCallDecorator;\n+import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.WebPage;\n+import org.apache.wicket.markup.html.form.DropDownChoice;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.TextField;\n+import org.apache.wicket.markup.html.list.ListItem;\n+import org.apache.wicket.markup.html.list.ListView;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.PropertyModel;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.syncope.client.to.AbstractAttributableTO;\n+import org.syncope.client.to.AttributeTO;\n+\n+public class DerivedAttributesForm extends Form {\n+\n+    /**\n+     * Logger.\n+     */\n+    protected static final Logger LOG =\n+            LoggerFactory.getLogger(DerivedAttributesForm.class);\n+\n+    public DerivedAttributesForm(String id, IModel<?> model) {\n+        super(id, model);\n+    }\n+\n+    public DerivedAttributesForm(String id) {\n+        super(id);\n+    }\n+\n+    public <T extends AbstractAttributableTO> Form build(\n+            final WebPage page,\n+            final T entityTO,\n+            final IModel<List<String>> schemaNames) {\n+\n+        setOutputMarkupId(true);\n+\n+        final WebMarkupContainer attributesContainer =\n+                new WebMarkupContainer(\"derAttrContainer\");\n+\n+        attributesContainer.setOutputMarkupId(true);\n+        add(attributesContainer);\n+\n+        AjaxButton addAttributeBtn = new IndicatingAjaxButton(\n+                \"addAttributeBtn\",\n+                new Model(page.getString(\"addAttributeBtn\"))) {\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                entityTO.getDerivedAttributes().add(new AttributeTO());\n+                target.addComponent(attributesContainer);\n+            }\n+        };\n+\n+        add(addAttributeBtn.setDefaultFormProcessing(Boolean.FALSE));\n+\n+        ListView<AttributeTO> attributes = new ListView<AttributeTO>(\n+                \"attributes\",\n+                new PropertyModel<List<? extends AttributeTO>>(\n+                entityTO, \"derivedAttributes\")) {\n+\n+            @Override\n+            protected void populateItem(final ListItem<AttributeTO> item) {\n+                final AttributeTO attributeTO = item.getModelObject();\n+\n+                item.add(new AjaxDecoratedCheckbox(\n+                        \"toRemove\", new Model(Boolean.FALSE)) {\n+\n+                    @Override\n+                    protected void onUpdate(final AjaxRequestTarget target) {\n+                        entityTO.getDerivedAttributes().remove(attributeTO);\n+                        target.addComponent(attributesContainer);\n+                    }\n+\n+                    @Override\n+                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n+                        return new AjaxPreprocessingCallDecorator(\n+                                super.getAjaxCallDecorator()) {\n+\n+                            @Override\n+                            public CharSequence preDecorateScript(\n+                                    final CharSequence script) {\n+\n+                                return \"if (confirm('\"\n+                                        + getString(\"confirmDelete\") + \"'))\"\n+                                        + \"{\" + script + \"} \"\n+                                        + \"else {this.checked = false;}\";\n+                            }\n+                        };\n+                    }\n+                });\n+\n+                final DropDownChoice<String> schemaChoice =\n+                        new DropDownChoice<String>(\n+                        \"schema\",\n+                        new PropertyModel<String>(attributeTO, \"schema\"),\n+                        schemaNames);\n+\n+                schemaChoice.add(new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+\n+                    @Override\n+                    protected void onUpdate(AjaxRequestTarget art) {\n+                        attributeTO.setSchema(schemaChoice.getModelObject());\n+                    }\n+                });\n+\n+                item.add(schemaChoice.setRequired(true));\n+\n+                schemaChoice.setOutputMarkupId(true);\n+                schemaChoice.setRequired(true);\n+                item.add(schemaChoice);\n+\n+                final List<String> values = attributeTO.getValues();\n+\n+                if (values == null || values.isEmpty()) {\n+                    item.add(new TextField(\n+                            \"value\",\n+                            new Model(null)).setVisible(Boolean.FALSE));\n+                } else {\n+                    item.add(new TextField(\n+                            \"value\",\n+                            new Model(values.get(0))).setEnabled(\n+                            Boolean.FALSE));\n+                }\n+            }\n+        };\n+\n+        attributesContainer.add(attributes);\n+        return this;\n+    }\n+}"},{"sha":"b29149b2f67f61749b0bdd6b5623dda30315ffc3","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/VirtualAttributesForm.java","status":"added","additions":224,"deletions":0,"changes":224,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FVirtualAttributesForm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FVirtualAttributesForm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FVirtualAttributesForm.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -0,0 +1,224 @@\n+/*\n+ *  Copyright 2011 fabio.\n+ * \n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.wicket.markup.html.form;\n+\n+import java.util.List;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.IAjaxCallDecorator;\n+import org.apache.wicket.ajax.calldecorator.AjaxPreprocessingCallDecorator;\n+import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.WebPage;\n+import org.apache.wicket.markup.html.form.DropDownChoice;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.TextField;\n+import org.apache.wicket.markup.html.list.ListItem;\n+import org.apache.wicket.markup.html.list.ListView;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.PropertyModel;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.syncope.client.to.AbstractAttributableTO;\n+import org.syncope.client.to.AttributeTO;\n+\n+public class VirtualAttributesForm extends Form {\n+\n+    /**\n+     * Logger.\n+     */\n+    protected static final Logger LOG =\n+            LoggerFactory.getLogger(VirtualAttributesForm.class);\n+\n+    public VirtualAttributesForm(String id, IModel<?> model) {\n+        super(id, model);\n+    }\n+\n+    public VirtualAttributesForm(String id) {\n+        super(id);\n+    }\n+\n+    public <T extends AbstractAttributableTO> Form build(\n+            final WebPage page,\n+            final T entityTO,\n+            final IModel<List<String>> schemaNames) {\n+\n+        setOutputMarkupId(true);\n+\n+        final WebMarkupContainer attributesContainer =\n+                new WebMarkupContainer(\"virAttrContainer\");\n+\n+        attributesContainer.setOutputMarkupId(true);\n+        add(attributesContainer);\n+\n+\n+        AjaxButton addAttributeBtn = new IndicatingAjaxButton(\n+                \"addAttributeBtn\",\n+                new Model(page.getString(\"addAttributeBtn\"))) {\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                entityTO.addVirtualAttribute(new AttributeTO());\n+                target.addComponent(attributesContainer);\n+            }\n+        };\n+\n+        add(addAttributeBtn.setDefaultFormProcessing(Boolean.FALSE));\n+\n+        ListView<AttributeTO> attributes = new ListView<AttributeTO>(\n+                \"attributes\",\n+                new PropertyModel<List<? extends AttributeTO>>(\n+                entityTO, \"virtualAttributes\")) {\n+\n+            @Override\n+            protected void populateItem(final ListItem<AttributeTO> item) {\n+                final AttributeTO attributeTO = item.getModelObject();\n+\n+                item.add(new AjaxDecoratedCheckbox(\n+                        \"toRemove\", new Model(Boolean.FALSE)) {\n+\n+                    @Override\n+                    protected void onUpdate(final AjaxRequestTarget target) {\n+                        entityTO.getVirtualAttributes().remove(attributeTO);\n+                        target.addComponent(attributesContainer);\n+                    }\n+\n+                    @Override\n+                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n+                        return new AjaxPreprocessingCallDecorator(\n+                                super.getAjaxCallDecorator()) {\n+\n+                            @Override\n+                            public CharSequence preDecorateScript(\n+                                    final CharSequence script) {\n+\n+                                return \"if (confirm('\"\n+                                        + getString(\"confirmDelete\") + \"'))\"\n+                                        + \"{\" + script + \"} \"\n+                                        + \"else {this.checked = false;}\";\n+                            }\n+                        };\n+                    }\n+                });\n+\n+                final DropDownChoice<String> schemaChoice =\n+                        new DropDownChoice<String>(\n+                        \"schema\",\n+                        new PropertyModel<String>(attributeTO, \"schema\"),\n+                        schemaNames);\n+\n+                schemaChoice.add(new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+\n+                    @Override\n+                    protected void onUpdate(AjaxRequestTarget art) {\n+                        attributeTO.setSchema(schemaChoice.getModelObject());\n+                    }\n+                });\n+\n+                schemaChoice.setOutputMarkupId(true);\n+                schemaChoice.setRequired(true);\n+                item.add(schemaChoice);\n+\n+                if (attributeTO.getValues().isEmpty()) {\n+                    attributeTO.addValue(\"\");\n+                }\n+\n+                item.add(new ListView<String>(\n+                        \"values\", new PropertyModel<List<String>>(\n+                        attributeTO, \"values\")) {\n+\n+                    @Override\n+                    protected void populateItem(final ListItem<String> item) {\n+\n+                        final TextField field = new TextField(\n+                                \"value\",\n+                                item.getModel(),\n+                                String.class);\n+\n+                        field.add(new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+\n+                            @Override\n+                            protected void onUpdate(AjaxRequestTarget art) {\n+                                attributeTO.getValues().set(\n+                                        item.getIndex(), item.getModelObject());\n+                            }\n+                        });\n+\n+                        item.add(field);\n+\n+                        AjaxButton dropButton = new IndicatingAjaxButton(\"drop\",\n+                                new Model(page.getString(\"drop\"))) {\n+\n+                            @Override\n+                            protected void onSubmit(\n+                                    AjaxRequestTarget target, Form form) {\n+\n+                                //Drop current component\n+                                attributeTO.getValues().remove(\n+                                        item.getModelObject());\n+\n+                                target.addComponent(attributesContainer);\n+                            }\n+                        };\n+\n+                        item.add(dropButton.setDefaultFormProcessing(\n+                                Boolean.FALSE));\n+\n+                        AjaxButton addButton = new IndicatingAjaxButton(\"add\",\n+                                new Model(page.getString(\"add\"))) {\n+\n+                            @Override\n+                            protected void onSubmit(\n+                                    AjaxRequestTarget target, Form form) {\n+\n+                                attributeTO.addValue(\"\");\n+                                target.addComponent(attributesContainer);\n+                            }\n+                        };\n+\n+                        item.add(addButton.setDefaultFormProcessing(\n+                                Boolean.FALSE));\n+\n+                        if (item.getIndex() == attributeTO.getValues().size() - 1) {\n+                            addButton.setVisible(Boolean.TRUE);\n+                            addButton.setEnabled(Boolean.TRUE);\n+                        } else {\n+                            addButton.setVisible(Boolean.FALSE);\n+                            addButton.setEnabled(Boolean.FALSE);\n+                        }\n+\n+                        if (attributeTO.getValues().size() <= 1) {\n+                            dropButton.setVisible(Boolean.FALSE);\n+                            dropButton.setEnabled(Boolean.FALSE);\n+                        } else {\n+                            dropButton.setVisible(Boolean.TRUE);\n+                            dropButton.setEnabled(Boolean.TRUE);\n+                        }\n+                    }\n+                });\n+            }\n+        };\n+\n+        attributesContainer.add(attributes);\n+\n+        return this;\n+    }\n+}"},{"sha":"410bccae5dd781eb1be5a9357bacea207ddc1868","filename":"console/src/main/resources/org/syncope/console/pages/MembershipModalPage.html","status":"modified","additions":88,"deletions":74,"changes":162,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -44,85 +44,99 @@\n             </table>\n         </div>\n         <div id=\"tabs-2\">\n-            <table id=\"derivedAttributes\"\n-                   class=\"ui-widget ui-widget-content ui-corner-all\"\n-                   style=\"font-size: 1em;margin-top:2px;\"\n-                   width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                <thead>\n-                    <tr class=\"ui-widget-header\">\n-                        <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n-                <th><wicket:message key=\"derivedAttributeName\"/></th>\n-                <th><wicket:message key=\"derivedAttributeValue\"/></th>\n-                </tr>\n-                </thead>\n-\n-                <tfoot>\n-                    <tr>\n-                        <td>\n-                            <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                   wicket:id=\"addDerivedAttributeBtn\" />\n-                        </td>\n-                    </tr>\n-                </tfoot>\n-\n-                <tbody wicket:id=\"derivedAttributesContainer\">\n-                    <tr wicket:id=\"derivedAttributes\">\n-                        <td align=\"center\" valign=\"middle\">\n-                            <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                        </td>\n-\n-                        <td>\n-                            <select class=\"text ui-widget-content ui-corner-all\"\n-                                    style=\"width:100%\" wicket:id=\"schema\"/>\n-                        </td>\n-\n-                        <td align=\"center\" valign=\"middle\">\n-                            <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"derivedAttributeValue\"/>\n-                        </td>\n+            <form wicket:id=\"derAttributesForm\">\n+                <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                       style=\"font-size: 1em;margin-top:2px;\"\n+                       width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                    <thead>\n+                        <tr class=\"ui-widget-header\">\n+                            <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n+                    <th><wicket:message key=\"derivedAttributeName\"/></th>\n+                    <th><wicket:message key=\"derivedAttributeValue\"/></th>\n                     </tr>\n-                </tbody>\n-            </table>\n+                    </thead>\n+\n+                    <tfoot>\n+                        <tr>\n+                            <td>\n+                                <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                       wicket:id=\"addAttributeBtn\" />\n+                            </td>\n+                        </tr>\n+                    </tfoot>\n+\n+                    <tbody wicket:id=\"derAttrContainer\">\n+                        <tr wicket:id=\"attributes\">\n+                            <td align=\"center\" valign=\"middle\">\n+                                <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                            </td>\n+\n+                            <td>\n+                                <select class=\"text ui-widget-content ui-corner-all\"\n+                                        style=\"width:100%\" wicket:id=\"schema\"/>\n+                            </td>\n+\n+                            <td align=\"center\" valign=\"middle\">\n+                                <input type=\"text\"\n+                                       style=\"width:100%\" wicket:id=\"value\"/>\n+                            </td>\n+                        </tr>\n+                    </tbody>\n+                </table>\n+            </form>\n         </div>\n \n         <div id=\"tabs-3\">\n-            <table id=\"virtualAttributes\"\n-                   class=\"ui-widget ui-widget-content ui-corner-all\"\n-                   style=\"font-size: 1em;margin-top:2px;\"\n-                   width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                <thead>\n-                    <tr class=\"ui-widget-header\">\n-                        <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n-                <th><wicket:message key=\"virtualAttributeName\"/></th>\n-                <th><wicket:message key=\"virtualAttributeValue\"/></th>\n-                </tr>\n-                </thead>\n-\n-                <tfoot>\n-                    <tr>\n-                        <td>\n-                            <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                   wicket:id=\"addVirtualAttributeBtn\" />\n-                        </td>\n+            <form wicket:id=\"virAttributesForm\">\n+                <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                       style=\"font-size: 1em;margin-top:2px;\"\n+                       width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                    <thead>\n+                        <tr class=\"ui-widget-header\">\n+                            <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n+                    <th><wicket:message key=\"virtualAttributeName\"/></th>\n+                    <th><wicket:message key=\"virtualAttributeValue\"/></th>\n                     </tr>\n-                </tfoot>\n-\n-                <tbody wicket:id=\"virtualAttributesContainer\">\n-                    <tr wicket:id=\"virtualAttributes\">\n-                        <td align=\"center\" valign=\"middle\">\n-                            <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                        </td>\n-\n-                        <td>\n-                            <select class=\"text ui-widget-content ui-corner-all\"\n-                                    style=\"width:100%\" wicket:id=\"schema\"/>\n-                        </td>\n-\n-                        <td align=\"center\" valign=\"middle\">\n-                            <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"virtualAttributeValue\"/>\n-                        </td>\n-                    </tr>\n-                </tbody>\n-            </table>\n+                    </thead>\n+\n+                    <tfoot>\n+                        <tr>\n+                            <td>\n+                                <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                       wicket:id=\"addAttributeBtn\" />\n+                            </td>\n+                        </tr>\n+                    </tfoot>\n+\n+                    <tbody wicket:id=\"virAttrContainer\">\n+                        <tr wicket:id=\"attributes\">\n+                            <td align=\"center\" valign=\"top\">\n+                                <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                            </td>\n+\n+                            <td align=\"center\" valign=\"top\">\n+                                <select class=\"text ui-widget-content ui-corner-all\"\n+                                        style=\"width:100%\" wicket:id=\"schema\"/>\n+                            </td>\n+\n+                            <td align=\"center \" valign=\"top\">\n+                                <span wicket:id=\"values\" style=\"width:100%\">\n+\n+                                    <input type=\"text\" style=\"width:80%\" wicket:id=\"value\"/>\n+\n+                                    <input type=\"button\" wicket:id=\"drop\"/>\n+\n+                                    <input align=\"right\" type=\"button\" wicket:id=\"add\"/>\n+\n+                                    <br />\n+                                </span>\n+\n+                            </td>\n+\n+                        </tr>\n+                    </tbody>\n+                </table>\n+            </form>\n         </div>\n     </div>\n     <div>"},{"sha":"94b223897b6f1f53bf7359fa81b9cc3b60e34097","filename":"console/src/main/resources/org/syncope/console/pages/MembershipModalPage.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -10,10 +10,10 @@ derivedAttributes=Derived Attributes\n derivedAttributeToBeRemoved=Delete\n derivedAttributeName=Name\n derivedAttributeValue=Derived value\n-addDerivedAttributeBtn=Add\n \n virtualAttributes=Virtual Attributes\n virtualAttributeToBeRemoved=Delete\n virtualAttributeName=Name\n virtualAttributeValue=Virtual value\n-addVirtualAttributeBtn=Add\n+\n+addAttributeBtn=Add"},{"sha":"a5f1b6801865ed6295666eda4671d6e603252771","filename":"console/src/main/resources/org/syncope/console/pages/MembershipModalPage_it.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage_it.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -10,10 +10,10 @@ derivedAttributes=Attributi derivati\n derivedAttributeToBeRemoved=Elimina\n derivedAttributeName=Nome\n derivedAttributeValue=Valore derivato\n-addDerivedAttributeBtn=Aggiungi\n \n virtualAttributes=Attributi virtuali\n virtualAttributeToBeRemoved=Elimina\n virtualAttributeName=Nome\n virtualAttributeValue=Valore virtuale\n-addVirtualAttributeBtn=Aggiungi\n+\n+addAttributeBtn=Aggiungi"},{"sha":"7f5cfb9e580d943fe4b3ab29271108e8c320632d","filename":"console/src/main/resources/org/syncope/console/pages/RoleModalPage.html","status":"modified","additions":87,"deletions":75,"changes":162,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -75,87 +75,99 @@\n                 </div>\n \n                 <div id=\"tabs-2\">\n-                    <table id=\"derivedAttributes\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n-                        <th><wicket:message key=\"derivedAttributeName\"/></th>\n-                        <th><wicket:message key=\"derivedAttributeValue\"/></th>\n-                        </tr>\n-                        </thead>\n-\n-                        <tfoot>\n-                            <tr>\n-                                <td>\n-                                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                           wicket:id=\"addDerivedAttributeBtn\" />\n-                                </td>\n-                            </tr>\n-                        </tfoot>\n-\n-                        <tbody wicket:id=\"derivedAttributesContainer\">\n-                            <tr wicket:id=\"derivedAttributes\">\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                </td>\n-\n-                                <td>\n-                                    <select class=\"text ui-widget-content ui-corner-all\"\n-                                            style=\"width:100%\" wicket:id=\"schema\"/>\n-                                </td>\n-\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"derivedAttributeValue\"/>\n-                                </td>\n+                    <form wicket:id=\"derAttributesForm\">\n+                        <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                               style=\"font-size: 1em;margin-top:2px;\"\n+                               width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                            <thead>\n+                                <tr class=\"ui-widget-header\">\n+                                    <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n+                            <th><wicket:message key=\"derivedAttributeName\"/></th>\n+                            <th><wicket:message key=\"derivedAttributeValue\"/></th>\n                             </tr>\n-                        </tbody>\n-                    </table>\n-\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <td>\n+                                        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                               wicket:id=\"addAttributeBtn\" />\n+                                    </td>\n+                                </tr>\n+                            </tfoot>\n+\n+                            <tbody wicket:id=\"derAttrContainer\">\n+                                <tr wicket:id=\"attributes\">\n+                                    <td align=\"center\" valign=\"middle\">\n+                                        <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                                    </td>\n+\n+                                    <td>\n+                                        <select class=\"text ui-widget-content ui-corner-all\"\n+                                                style=\"width:100%\" wicket:id=\"schema\"/>\n+                                    </td>\n+\n+                                    <td align=\"center\" valign=\"middle\">\n+                                        <input type=\"text\"\n+                                               style=\"width:100%\" wicket:id=\"value\"/>\n+                                    </td>\n+                                </tr>\n+                            </tbody>\n+                        </table>\n+                    </form>\n                 </div>\n \n                 <div id=\"tabs-3\">\n-                    <table id=\"virtualAttributes\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n-                        <th><wicket:message key=\"virtualAttributeName\"/></th>\n-                        <th><wicket:message key=\"virtualAttributeValue\"/></th>\n-                        </tr>\n-                        </thead>\n-\n-                        <tfoot>\n-                            <tr>\n-                                <td>\n-                                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                           wicket:id=\"addVirtualAttributeBtn\" />\n-                                </td>\n-                            </tr>\n-                        </tfoot>\n-\n-                        <tbody wicket:id=\"virtualAttributesContainer\">\n-                            <tr wicket:id=\"virtualAttributes\">\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                </td>\n-\n-                                <td>\n-                                    <select class=\"text ui-widget-content ui-corner-all\"\n-                                            style=\"width:100%\" wicket:id=\"schema\"/>\n-                                </td>\n-\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"virtualAttributeValue\"/>\n-                                </td>\n+                    <form wicket:id=\"virAttributesForm\">\n+                        <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                               style=\"font-size: 1em;margin-top:2px;\"\n+                               width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                            <thead>\n+                                <tr class=\"ui-widget-header\">\n+                                    <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n+                            <th><wicket:message key=\"virtualAttributeName\"/></th>\n+                            <th><wicket:message key=\"virtualAttributeValue\"/></th>\n                             </tr>\n-                        </tbody>\n-                    </table>\n+                            </thead>\n+\n+                            <tfoot>\n+                                <tr>\n+                                    <td>\n+                                        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                               wicket:id=\"addAttributeBtn\" />\n+                                    </td>\n+                                </tr>\n+                            </tfoot>\n+\n+                            <tbody wicket:id=\"virAttrContainer\">\n+                                <tr wicket:id=\"attributes\">\n+                                    <td align=\"center\" valign=\"top\">\n+                                        <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                                    </td>\n+\n+                                    <td align=\"center\" valign=\"top\">\n+                                        <select class=\"text ui-widget-content ui-corner-all\"\n+                                                style=\"width:100%\" wicket:id=\"schema\"/>\n+                                    </td>\n+\n+                                    <td align=\"center \" valign=\"top\">\n+                                        <span wicket:id=\"values\" style=\"width:100%\">\n+\n+                                            <input type=\"text\" style=\"width:80%\" wicket:id=\"value\"/>\n+\n+                                            <input type=\"button\" wicket:id=\"drop\"/>\n+\n+                                            <input align=\"right\" type=\"button\" wicket:id=\"add\"/>\n+\n+                                            <br />\n+                                        </span>\n+\n+                                    </td>\n \n+                                </tr>\n+                            </tbody>\n+                        </table>\n+                    </form>\n                 </div>\n \n                 <div id=\"tabs-4\">"},{"sha":"462cad05135eba9554fb2217002364618d07123a","filename":"console/src/main/resources/org/syncope/console/pages/RoleModalPage.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -17,10 +17,10 @@ derivedAttributes=Derived Attributes\n derivedAttributeToBeRemoved=Delete\n derivedAttributeName=Name\n derivedAttributeValue=Derived value\n-addDerivedAttributeBtn=Add\n \n virtuyalAttributes=Virtual Attributes\n virtualAttributeToBeRemoved=Delete\n virtualAttributeName=Name\n virtualAttributeValue=Virtual value\n-addVirtualAttributeBtn=Add\n+\n+addAttributeBtn=Add"},{"sha":"9f491502cb542a13235aff331e0ee05936557a49","filename":"console/src/main/resources/org/syncope/console/pages/RoleModalPage_it.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage_it.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -17,10 +17,10 @@ derivedAttributes=Attributi derivati\n derivedAttributeToBeRemoved=Elimina\n derivedAttributeName=Nome\n derivedAttributeValue=Valore derivato\n-addDerivedAttributeBtn=Aggiungi\n \n virtuyalAttributes=Attributi virtuali\n virtualAttributeToBeRemoved=Elimina\n virtualAttributeName=Nome\n virtualAttributeValue=Valore virtuale\n-addVirtualAttributeBtn=Aggiungi\n+\n+addAttributeBtn=Aggiungi"},{"sha":"c222e1d8617edd02a1c577150bfc1f24d5ee428c","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.html","status":"modified","additions":83,"deletions":69,"changes":152,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -62,7 +62,7 @@\n                     <li><a href=\"#tabs-2\"><span><wicket:message key=\"tab2\"/></span></a></li>\n                     <li><a href=\"#tabs-3\"><span><wicket:message key=\"tab3\"/></span></a></li>\n                     <li><a href=\"#tabs-4\"><span><wicket:message key=\"tab4\"/></span></a></li>\n-                    <li><a href=\"#tabs-4\"><span><wicket:message key=\"tab5\"/></span></a></li>\n+                    <li><a href=\"#tabs-5\"><span><wicket:message key=\"tab5\"/></span></a></li>\n                 </ul>\n                 <div id=\"tabs-1\">\n                     <table class=\"stripedTable\" style=\"font-size:1.1em;border:none\" wicket:id=\"container\" width=\"100%\">\n@@ -97,85 +97,99 @@\n                 </div>\n \n                 <div id=\"tabs-2\">\n-                    <table id=\"derivedAttributes\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n-                        <th><wicket:message key=\"derivedAttributeName\"/></th>\n-                        <th><wicket:message key=\"derivedAttributeValue\"/></th>\n-                        </tr>\n-                        </thead>\n-\n-                        <tfoot>\n-                            <tr>\n-                                <td>\n-                                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                           wicket:id=\"addDerivedAttributeBtn\" />\n-                                </td>\n+                    <form wicket:id=\"derAttributesForm\">\n+                        <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                               style=\"font-size: 1em;margin-top:2px;\"\n+                               width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                            <thead>\n+                                <tr class=\"ui-widget-header\">\n+                                    <th><wicket:message key=\"derivedAttributeToBeRemoved\"/></th>\n+                            <th><wicket:message key=\"derivedAttributeName\"/></th>\n+                            <th><wicket:message key=\"derivedAttributeValue\"/></th>\n                             </tr>\n-                        </tfoot>\n+                            </thead>\n \n-                        <tbody wicket:id=\"derivedAttributesContainer\">\n-                            <tr wicket:id=\"derivedAttributes\">\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                </td>\n+                            <tfoot>\n+                                <tr>\n+                                    <td>\n+                                        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                               wicket:id=\"addAttributeBtn\" />\n+                                    </td>\n+                                </tr>\n+                            </tfoot>\n \n-                                <td>\n-                                    <select class=\"text ui-widget-content ui-corner-all\"\n-                                            style=\"width:100%\" wicket:id=\"schema\"/>\n-                                </td>\n+                            <tbody wicket:id=\"derAttrContainer\">\n+                                <tr wicket:id=\"attributes\">\n+                                    <td align=\"center\" valign=\"middle\">\n+                                        <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                                    </td>\n \n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"derivedAttributeValue\"/>\n-                                </td>\n-                            </tr>\n-                        </tbody>\n-                    </table>\n+                                    <td>\n+                                        <select class=\"text ui-widget-content ui-corner-all\"\n+                                                style=\"width:100%\" wicket:id=\"schema\"/>\n+                                    </td>\n+\n+                                    <td align=\"center\" valign=\"middle\">\n+                                        <input type=\"text\"\n+                                               style=\"width:100%\" wicket:id=\"value\"/>\n+                                    </td>\n+                                </tr>\n+                            </tbody>\n+                        </table>\n+                    </form>\n                 </div>\n \n                 <div id=\"tabs-3\">\n-                    <table id=\"virtualAttributes\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n-                        <th><wicket:message key=\"virtualAttributeName\"/></th>\n-                        <th><wicket:message key=\"virtualAttributeValue\"/></th>\n-                        </tr>\n-                        </thead>\n-\n-                        <tfoot>\n-                            <tr>\n-                                <td>\n-                                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                           wicket:id=\"addVirtualAttributeBtn\" />\n-                                </td>\n+                    <form wicket:id=\"virAttributesForm\">\n+                        <table class=\"ui-widget ui-widget-content ui-corner-all\"\n+                               style=\"font-size: 1em;margin-top:2px;\"\n+                               width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n+                            <thead>\n+                                <tr class=\"ui-widget-header\">\n+                                    <th><wicket:message key=\"virtualAttributeToBeRemoved\"/></th>\n+                            <th><wicket:message key=\"virtualAttributeName\"/></th>\n+                            <th><wicket:message key=\"virtualAttributeValue\"/></th>\n                             </tr>\n-                        </tfoot>\n+                            </thead>\n \n-                        <tbody wicket:id=\"virtualAttributesContainer\">\n-                            <tr wicket:id=\"virtualAttributes\">\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                </td>\n+                            <tfoot>\n+                                <tr>\n+                                    <td>\n+                                        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                               wicket:id=\"addAttributeBtn\" />\n+                                    </td>\n+                                </tr>\n+                            </tfoot>\n \n-                                <td>\n-                                    <select class=\"text ui-widget-content ui-corner-all\"\n-                                            style=\"width:100%\" wicket:id=\"schema\"/>\n-                                </td>\n+                            <tbody wicket:id=\"virAttrContainer\">\n+                                <tr wicket:id=\"attributes\">\n+                                    <td align=\"center\" valign=\"top\">\n+                                        <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                                    </td>\n \n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"virtualAttributeValue\"/>\n-                                </td>\n-                            </tr>\n-                        </tbody>\n-                    </table>\n+                                    <td align=\"center\" valign=\"top\">\n+                                        <select class=\"text ui-widget-content ui-corner-all\"\n+                                                style=\"width:100%\" wicket:id=\"schema\"/>\n+                                    </td>\n+\n+                                    <td align=\"center \" valign=\"top\">\n+                                        <span wicket:id=\"values\" style=\"width:100%\">\n+\n+                                            <input type=\"text\" style=\"width:80%\" wicket:id=\"value\"/>\n+\n+                                            <input type=\"button\" wicket:id=\"drop\"/>\n+\n+                                            <input align=\"right\" type=\"button\" wicket:id=\"add\"/>\n+\n+                                            <br />\n+                                        </span>\n+\n+                                    </td>\n+\n+                                </tr>\n+                            </tbody>\n+                        </table>\n+                    </form>\n                 </div>\n \n                 <div id=\"tabs-4\">"},{"sha":"ee978be94aff8fb9e320730ab68593b8511f4058","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -26,10 +26,10 @@ derivedAttributes=Derived Attributes\n derivedAttributeToBeRemoved=Delete\n derivedAttributeName=Name\n derivedAttributeValue=Derived value\n-addDerivedAttributeBtn=Add\n \n virtualAttributes=Virtual Attributes\n virtualAttributeToBeRemoved=Delete\n virtualAttributeName=Name\n virtualAttributeValue=Virtual value\n-addVirtualAttributeBtn=Add\n+\n+addAttributeBtn=Add"},{"sha":"22cd652365a182ac8ab8c7eac6dfdc68705fa83a","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage_it.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -26,11 +26,11 @@ derivedAttributes=Attributi derivati\n derivedAttributeToBeRemoved=Elimina\n derivedAttributeName=Nome\n derivedAttributeValue=Valore derivato\n-addDerivedAttributeBtn=Aggiungi\n \n virtualAttributes=Attributi virtual\n virtualAttributeToBeRemoved=Elimina\n virtualAttributeName=Nome\n virtualAttributeValue=Valore virtuale\n-addVirtualAttributeBtn=Aggiungi\n+\n+addAttributeBtn=Aggiungi\n "},{"sha":"ca83fddd6b31f9786f0e609db82734c5ea5e776e","filename":"console/src/test/resources/content.xml","status":"modified","additions":73,"deletions":30,"changes":103,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/console%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -49,14 +49,14 @@\n     <SyncopeUser id=\"3\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n     <SyncopeUser id=\"4\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n \n-    <SyncopeRole id=\"1\" name=\"root\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n-    <SyncopeRole id=\"2\" name=\"child\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n-    <SyncopeRole id=\"3\" name=\"citizen\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n-    <SyncopeRole id=\"4\" name=\"employee\" parent_id=\"3\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n-    <SyncopeRole id=\"5\" name=\"secretary\" parent_id=\"4\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n-    <SyncopeRole id=\"6\" name=\"director\" parent_id=\"4\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\"/>\n-    <SyncopeRole id=\"7\" name=\"managingDirector\" parent_id=\"6\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\"/>\n-    <SyncopeRole id=\"8\" name=\"otherchild\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\"/>\n+    <SyncopeRole id=\"1\" name=\"root\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n+    <SyncopeRole id=\"2\" name=\"child\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n+    <SyncopeRole id=\"3\" name=\"citizen\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n+    <SyncopeRole id=\"4\" name=\"employee\" parent_id=\"3\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n+    <SyncopeRole id=\"5\" name=\"secretary\" parent_id=\"4\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n+    <SyncopeRole id=\"6\" name=\"director\" parent_id=\"4\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\" inheritVirtualAttributes=\"1\"/>\n+    <SyncopeRole id=\"7\" name=\"managingDirector\" parent_id=\"6\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\" inheritVirtualAttributes=\"1\"/>\n+    <SyncopeRole id=\"8\" name=\"otherchild\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"1\"/>\n \n     <Membership id=\"1\" syncopeUser_id=\"1\" syncopeRole_id=\"1\"/>\n     <Membership id=\"2\" syncopeUser_id=\"2\" syncopeRole_id=\"1\"/>\n@@ -91,54 +91,92 @@\n \n     <RSchema name=\"icon\" type=\"String\"\n                 mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+                \n     <RSchema name=\"show\" type=\"Boolean\"\n                 mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n+    <RSchema name=\"derived_sx\" type=\"String\"\n+                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+    <RSchema name=\"derived_dx\" type=\"String\"\n+                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n     <MSchema name=\"subscriptionDate\" type=\"Date\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n                       conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n \n+    <MSchema name=\"derived_sx\" type=\"String\"\n+                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n+    <MSchema name=\"derived_dx\" type=\"String\"\n+                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+\n     <UAttr id=\"100\" owner_id=\"1\" schema_name=\"username\"/>\n+    <UAttrUniqueValue id=\"10\" attribute_id=\"100\" schema_name=\"username\" stringValue=\"chicchiricco\"/>\n     <UAttr id=\"200\" owner_id=\"1\" schema_name=\"loginDate\"/>\n+    <UAttrValue attribute_id=\"200\" id=\"20\" dateValue=\"2009-05-26\"/>\n+    <UAttrValue attribute_id=\"200\" id=\"21\" dateValue=\"2010-05-26 15:40:04\"/>\n+\n     <UAttr id=\"300\" owner_id=\"2\" schema_name=\"username\"/>\n+    <UAttrUniqueValue id=\"11\" attribute_id=\"300\" schema_name=\"username\" stringValue=\"fabio.martelli\"/>\n+\n     <UAttr id=\"400\" owner_id=\"3\" schema_name=\"firstname\"/>\n+    <UAttrValue attribute_id=\"400\" id=\"30\" stringValue=\"John\"/>\n     <UAttr id=\"500\" owner_id=\"3\" schema_name=\"surname\"/>\n+    <UAttrValue attribute_id=\"500\" id=\"31\" stringValue=\"Doe\"/>\n+    <UAttr id=\"540\" owner_id=\"3\" schema_name=\"username\"/>\n+    <UAttrUniqueValue id=\"12\" attribute_id=\"540\" schema_name=\"username\" stringValue=\"test1\"/>\n+\n     <UAttr id=\"550\" owner_id=\"4\" schema_name=\"loginDate\"/>\n+    <UAttrValue attribute_id=\"550\" id=\"22\" dateValue=\"2009-06-24\"/>\n     <UAttr id=\"560\" owner_id=\"4\" schema_name=\"cool\"/>\n-    <UAttr id=\"570\" owner_id=\"4\" schema_name=\"username\"/>\n-\n+    <UAttrValue attribute_id=\"560\" id=\"23\" booleanValue=\"1\"/>\n+    \n     <RAttr id=\"600\" owner_id=\"1\" schema_name=\"icon\"/>\n     <RAttr id=\"700\" owner_id=\"2\" schema_name=\"icon\"/>\n     <RAttr id=\"800\" owner_id=\"1\" schema_name=\"show\"/>\n     <RAttr id=\"900\" owner_id=\"6\" schema_name=\"icon\"/>\n     <RAttr id=\"950\" owner_id=\"4\" schema_name=\"icon\"/>\n \n-    <MAttr id=\"1000\" owner_id=\"4\" schema_name=\"subscriptionDate\"/>\n-\n-    <UAttrUniqueValue id=\"10\" attribute_id=\"100\" schema_name=\"username\" stringValue=\"chicchiricco\"/>\n-    <UAttrUniqueValue id=\"11\" attribute_id=\"300\" schema_name=\"username\" stringValue=\"fabio.martelli\"/>\n-    <UAttrUniqueValue id=\"12\" attribute_id=\"570\" schema_name=\"username\" stringValue=\"john.doe\"/>\n-\n-    <UAttrValue attribute_id=\"200\" id=\"20\" dateValue=\"2009-05-26\"/>\n-    <UAttrValue attribute_id=\"200\" id=\"21\" dateValue=\"2010-05-26 15:40:04\"/>\n-    <UAttrValue attribute_id=\"400\" id=\"30\" stringValue=\"John\"/>\n-    <UAttrValue attribute_id=\"500\" id=\"31\" stringValue=\"Doe\"/>\n-    <UAttrValue attribute_id=\"550\" id=\"22\" dateValue=\"2009-06-24\"/>\n-    <UAttrValue attribute_id=\"560\" id=\"23\" booleanValue=\"1\"/>\n-\n     <RAttrValue attribute_id=\"600\" id=\"40\" stringValue=\"niceIcon\"/>\n     <RAttrValue attribute_id=\"700\" id=\"41\" stringValue=\"badIcon\"/>\n     <RAttrValue attribute_id=\"800\" id=\"42\" booleanValue=\"1\"/>\n     <RAttrValue attribute_id=\"900\" id=\"43\" stringValue=\"icon6\"/>\n     <RAttrValue attribute_id=\"950\" id=\"44\" stringValue=\"icon4\"/>\n \n+    <RAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n+    <RAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n+\n+    <RAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n+    <RAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n+\n+    <RDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n+    <RDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n+\n+\n+    <MAttr id=\"1000\" owner_id=\"4\" schema_name=\"subscriptionDate\"/>\n+\n     <MAttrValue attribute_id=\"1000\" id=\"90\" dateValue=\"2009-05-26\"/>\n     <MAttrValue attribute_id=\"1000\" id=\"91\" dateValue=\"2010-05-26 15:40:04\"/>\n \n+    <MAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n+    <MAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n+\n+    <MAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n+    <MAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n+\n+    <MDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n+    <MDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n+\n+    <UVirSchema name=\"virtualdata\"/>\n+    <UVirAttr id=\"1000\" virtualSchema_name=\"virtualdata\" owner_id=\"3\"/>\n+\n     <UDerSchema name=\"cn\" expression=\"surname + ', ' + firstname\"/>\n-    \n     <UDerAttr id=\"1000\" derivedSchema_name=\"cn\" owner_id=\"3\"/>\n \n+    <MVirSchema name=\"mvirtualdata\"/>\n+    <RVirSchema name=\"rvirtualdata\"/>\n+\n     <ConnInstance id=\"100\" displayName=\"ConnInstance100\"\n                        bundleName=\"org.syncope.identityconnectors.bundles.staticws\"\n                        connectorName=\"org.syncope.identityconnectors.bundles.staticwebservice.WebServiceConnector\"\n@@ -208,7 +246,7 @@\n                    sourceAttrName=\"email\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"0\"/>\n \n-    <SchemaMapping id=\"101\" destAttrName=\"username\"\n+    <SchemaMapping id=\"101\" destAttrName=\"userId\"\n                    resource_name=\"ws-target-resource-2\"\n                    sourceAttrName=\"username\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n                    accountid=\"1\" password=\"0\"/>\n@@ -250,7 +288,7 @@\n \n     <SchemaMapping id=\"109\" destAttrName=\"surname\"\n                    resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"surname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n+                   sourceAttrName=\"surname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"type == 'F'\"\n                    accountid=\"0\" password=\"0\"/>\n \n     <SchemaMapping id=\"110\" destAttrName=\"email\"\n@@ -270,21 +308,26 @@\n \n     <SchemaMapping id=\"113\" destAttrName=\"name\"\n                    resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"firstname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"type == 'F'\"\n+                   sourceAttrName=\"virtualdata\" sourceMappingType=\"UserVirtualSchema\" mandatoryCondition=\"type == 'F'\"\n                    accountid=\"0\" password=\"0\"/>\n \n-    <SchemaMapping id=\"114\" destAttrName=\"name\"\n+    <SchemaMapping id=\"114\" destAttrName=\"fullname\"\n+                   resource_name=\"ws-target-resource-2\"\n+                   sourceAttrName=\"cn\" sourceMappingType=\"UserDerivedSchema\" mandatoryCondition=\"true\"\n+                   accountid=\"0\" password=\"0\"/>\n+\n+    <SchemaMapping id=\"115\" destAttrName=\"name\"\n                    resource_name=\"ws-target-resource-nopropagation\"\n                    sourceAttrName=\"firstname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"0\"/>\n \n     <Task id=\"1\" propagationMode=\"ASYNC\" resourceOperationType=\"UPDATE\"\n                  resource_name=\"ws-target-resource-2\"\n-                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E\"/>\n+                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Efullname%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Efullname%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E%0A\"/>\n     <TaskExecution id=\"1\" task_id=\"1\" workflowId=\"0\"/>\n     <Task id=\"2\" propagationMode=\"SYNC\" resourceOperationType=\"CREATE\"\n                  resource_name=\"ws-target-resource-2\"\n-                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E\"/>\n+                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Efullname%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Efullname%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E%0A\"/>\n     <Task id=\"3\" propagationMode=\"ASYNC\" resourceOperationType=\"DELETE\"\n                  resource_name=\"ws-target-resource-2\"\n                  xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E\"/>"},{"sha":"a258d830e2d456b1c331696e37af91ec1c6c042a","filename":"core/src/main/java/org/syncope/core/persistence/propagation/PropagationManager.java","status":"modified","additions":13,"deletions":8,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -829,16 +829,21 @@ public <T extends AbstractAttributable> Set<String> getObjectAttributeValue(\n                 connector = ConnInstanceLoader.getConnector(\n                         connectorInstance.getId().toString());\n \n-                attributes = connector.getObjectAttributes(\n-                        ObjectClass.ACCOUNT,\n-                        new Uid(accountId),\n-                        null,\n-                        attributeNames);\n+                try {\n+                    attributes = connector.getObjectAttributes(\n+                            ObjectClass.ACCOUNT,\n+                            new Uid(accountId),\n+                            null,\n+                            attributeNames);\n \n-                LOG.debug(\"Retrieved {}\", attributes);\n+                    LOG.debug(\"Retrieved {}\", attributes);\n \n-                for (Attribute attribute : attributes) {\n-                    values.addAll(attribute.getValue());\n+                    for (Attribute attribute : attributes) {\n+                        values.addAll(attribute.getValue());\n+                    }\n+                } catch (Exception e) {\n+                    LOG.warn(\"Error connecting to {}\", resource.getName(), e);\n+                    // ignore exception and go ahead\n                 }\n             }\n         }"},{"sha":"00d8980e314c060d7ee5884555c0bee833c22077","filename":"core/src/main/java/org/syncope/core/rest/controller/VirtualSchemaController.java","status":"modified","additions":24,"deletions":0,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FVirtualSchemaController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FVirtualSchemaController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FVirtualSchemaController.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -120,4 +120,28 @@ public VirtualSchemaTO read(@PathVariable(\"kind\") final String kind,\n \n         return virtualSchemaDataBinder.getVirtualSchemaTO(virtualSchema);\n     }\n+\n+    @PreAuthorize(\"hasRole('SCHEMA_UPDATE')\")\n+    @RequestMapping(method = RequestMethod.POST,\n+    value = \"/{kind}/update\")\n+    public VirtualSchemaTO update(\n+            @RequestBody final VirtualSchemaTO virtualSchemaTO,\n+            @PathVariable(\"kind\") final String kind)\n+            throws SyncopeClientCompositeErrorException, NotFoundException {\n+\n+        Class reference = getAttributableUtil(kind).derivedSchemaClass();\n+        AbstractVirSchema virtualSchema =\n+                virtualSchemaDAO.find(virtualSchemaTO.getName(), reference);\n+        if (virtualSchema == null) {\n+            LOG.error(\"Could not find derived schema '\"\n+                    + virtualSchemaTO.getName() + \"'\");\n+            throw new NotFoundException(virtualSchemaTO.getName());\n+        }\n+\n+        virtualSchema = virtualSchemaDataBinder.update(virtualSchemaTO,\n+                virtualSchema, getAttributableUtil(kind).schemaClass());\n+\n+        virtualSchema = virtualSchemaDAO.save(virtualSchema);\n+        return virtualSchemaDataBinder.getVirtualSchemaTO(virtualSchema);\n+    }\n }"},{"sha":"9a570df3df070d9d9d0e3d63a688c921da329951","filename":"core/src/main/java/org/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9bfd36e9cf4190ee1fd8614b337d3fcb39117709/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=9bfd36e9cf4190ee1fd8614b337d3fcb39117709","patch":"@@ -781,7 +781,7 @@ public void fillTO(\n             attributeTO.setSchema(\n                     virtualAttribute.getVirtualSchema().getName());\n             attributeTO.setValues(virtualAttribute.getValues());\n-            attributeTO.setReadonly(true);\n+            attributeTO.setReadonly(false);\n \n             abstractAttributableTO.addVirtualAttribute(attributeTO);\n         }"}]}