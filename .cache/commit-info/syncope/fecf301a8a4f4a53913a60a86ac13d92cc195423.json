{"sha":"fecf301a8a4f4a53913a60a86ac13d92cc195423","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZlY2YzMDFhOGE0ZjRhNTM5MTNhNjBhODZhYzEzZDkyY2MxOTU0MjM=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2015-02-20T10:46:36Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2015-02-20T10:46:36Z"},"message":"[SYNCOPE-646] merge from 1_2_X","tree":{"sha":"022dd688ddd304d41ab2f1baefda09e9cf4c3f90","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/022dd688ddd304d41ab2f1baefda09e9cf4c3f90"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/fecf301a8a4f4a53913a60a86ac13d92cc195423","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fecf301a8a4f4a53913a60a86ac13d92cc195423","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fecf301a8a4f4a53913a60a86ac13d92cc195423","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fecf301a8a4f4a53913a60a86ac13d92cc195423/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"9cbeffd396b76cdd52768145be1cb9a5460211a8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9cbeffd396b76cdd52768145be1cb9a5460211a8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9cbeffd396b76cdd52768145be1cb9a5460211a8"},{"sha":"1012e616598d3ff8e42460d4a2eb8f0eeca6504e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1012e616598d3ff8e42460d4a2eb8f0eeca6504e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1012e616598d3ff8e42460d4a2eb8f0eeca6504e"}],"stats":{"total":40,"additions":39,"deletions":1},"files":[{"sha":"ec4cc0e5424d36884e9164b75ca676aa9452561a","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/propagation/PropagationManagerImpl.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fecf301a8a4f4a53913a60a86ac13d92cc195423/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fecf301a8a4f4a53913a60a86ac13d92cc195423/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpropagation%2FPropagationManagerImpl.java?ref=fecf301a8a4f4a53913a60a86ac13d92cc195423","patch":"@@ -325,7 +325,7 @@ public List<PropagationTask> getUserUpdateTaskIds(final WorkflowResult<Map.Entry\n         List<PropagationTask> tasks = new ArrayList<>();\n         if (userMod.getPwdPropRequest() == null) {\n             // a. no specific password propagation request: generate propagation tasks for any resource associated\n-            tasks = getUserUpdateTaskIds(wfResult, true, null);\n+            tasks = getUserUpdateTaskIds(wfResult, false, null);\n         } else {\n             // b. generate the propagation task list in two phases: first the ones containing password,\n             // the the rest (with no password)"},{"sha":"7b532b4000a96233049800cc5f46f13957efef75","filename":"core/workflow-activiti/src/main/java/org/apache/syncope/core/workflow/activiti/ActivitiUserWorkflowAdapter.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fecf301a8a4f4a53913a60a86ac13d92cc195423/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fecf301a8a4f4a53913a60a86ac13d92cc195423/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java?ref=fecf301a8a4f4a53913a60a86ac13d92cc195423","patch":"@@ -59,6 +59,7 @@\n import org.apache.commons.io.IOUtils;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.mod.StatusMod;\n import org.apache.syncope.common.lib.mod.UserMod;\n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.common.lib.to.WorkflowFormPropertyTO;\n@@ -885,6 +886,15 @@ public WorkflowResult<UserMod> submitForm(final WorkflowFormTO form)\n             userMod = new UserMod();\n             userMod.setKey(updated.getKey());\n             userMod.setPassword(clearPassword);\n+            \n+          if (propByRes != null) {\n+                final StatusMod st = new StatusMod();\n+                userMod.setPwdPropRequest(st);\n+                st.setOnSyncope(true);\n+                for (String res : propByRes.get(ResourceOperation.CREATE)) {\n+                    st.getResourceNames().add(res);\n+                }\n+            }\n         }\n \n         return new WorkflowResult<>(userMod, propByRes, postTasks);"},{"sha":"9271efc4e917ed00eec05826c8261a4322d7443f","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/reference/UserITCase.java","status":"modified","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fecf301a8a4f4a53913a60a86ac13d92cc195423/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FUserITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fecf301a8a4f4a53913a60a86ac13d92cc195423/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FUserITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FUserITCase.java?ref=fecf301a8a4f4a53913a60a86ac13d92cc195423","patch":"@@ -1046,6 +1046,11 @@ public final void issue280() {\n         userMod.setPassword(\"123password\");\n         userMod.getResourcesToAdd().add(RESOURCE_NAME_TESTDB);\n \n+        final StatusMod st = new StatusMod();\n+        st.setOnSyncope(false);\n+        st.getResourceNames().add(RESOURCE_NAME_TESTDB);\n+        userMod.setPwdPropRequest(st);\n+\n         userTO = updateUser(userMod);\n         assertNotNull(userTO);\n \n@@ -1534,6 +1539,11 @@ public void isseSYNCOPE136AES() {\n         UserMod userMod = new UserMod();\n         userMod.setKey(userTO.getKey());\n         userMod.getResourcesToAdd().add(RESOURCE_NAME_WS1);\n+        \n+        final StatusMod st = new StatusMod();\n+        st.setOnSyncope(false);\n+        st.getResourceNames().add(RESOURCE_NAME_WS1);\n+        userMod.setPwdPropRequest(st); \n \n         userTO = updateUser(userMod);\n         assertNotNull(userTO);\n@@ -1564,6 +1574,12 @@ public void isseSYNCOPE136Random() {\n         UserMod userMod = new UserMod();\n         userMod.setKey(userTO.getKey());\n         userMod.getResourcesToAdd().add(RESOURCE_NAME_LDAP);\n+        \n+        final StatusMod st = new StatusMod();\n+        st.setOnSyncope(false);\n+        st.getResourceNames().add(RESOURCE_NAME_LDAP);\n+        userMod.setPwdPropRequest(st);\n+\n         userTO = updateUser(userMod);\n         assertNotNull(userTO);\n \n@@ -2278,6 +2294,12 @@ public void issueSYNCOPE505DB() throws Exception {\n         UserMod userMod = new UserMod();\n         userMod.setKey(user.getKey());\n         userMod.getResourcesToAdd().add(RESOURCE_NAME_TESTDB);\n+        \n+        final StatusMod st = new StatusMod();\n+        st.setOnSyncope(false);\n+        st.getResourceNames().add(RESOURCE_NAME_TESTDB);\n+        userMod.setPwdPropRequest(st);\n+\n         user = updateUser(userMod);\n         assertNotNull(user);\n         assertEquals(1, user.getResources().size());\n@@ -2315,6 +2337,12 @@ public void issueSYNCOPE505LDAP() throws Exception {\n         UserMod userMod = new UserMod();\n         userMod.setKey(user.getKey());\n         userMod.getResourcesToAdd().add(RESOURCE_NAME_LDAP);\n+        \n+        final StatusMod st = new StatusMod();\n+        st.setOnSyncope(false);\n+        st.getResourceNames().add(RESOURCE_NAME_LDAP);\n+        userMod.setPwdPropRequest(st);\n+\n         user = updateUser(userMod);\n         assertNotNull(user);\n         assertEquals(1, user.getResources().size());"}]}