{"sha":"f1e420a5e1191653a2093c8e9508bcaf808043c0","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmYxZTQyMGE1ZTExOTE2NTNhMjA5M2M4ZTk1MDhiY2FmODA4MDQzYzA=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-04-13T10:47:57Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-04-13T10:47:57Z"},"message":"[SYNCOPE-745] Provides notification and integration tests","tree":{"sha":"23df297b6fd9e25578ab682eca99587f7d329bab","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/23df297b6fd9e25578ab682eca99587f7d329bab"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f1e420a5e1191653a2093c8e9508bcaf808043c0","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f1e420a5e1191653a2093c8e9508bcaf808043c0","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f1e420a5e1191653a2093c8e9508bcaf808043c0","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f1e420a5e1191653a2093c8e9508bcaf808043c0/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"1b84ceaa3479f27d0655846df5ab46520271d240","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1b84ceaa3479f27d0655846df5ab46520271d240","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1b84ceaa3479f27d0655846df5ab46520271d240"}],"stats":{"total":457,"additions":394,"deletions":63},"files":[{"sha":"f35f109b643cd9ec2dcd87c2a9f4cfbb42f15179","filename":"client/console/src/main/java/org/apache/syncope/client/console/notifications/NotificationDirectoryPanel.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationDirectoryPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -106,13 +106,13 @@ public ActionLinksPanel<NotificationTO> getActions(\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final NotificationTO ignore) {\n-                        target.add(utilityModal.setContent(new NotificationTasks(\n-                                utilityModal, pageRef, model.getObject())));\n-                        utilityModal.header(new ResourceModel(\"notification.executions\", \"Tasks\"));\n+                        target.add(utilityModal.setContent(\n+                                new NotificationTasks(model.getObject().getKey(), pageRef)));\n+                        utilityModal.header(new StringResourceModel(\"notification.tasks\", model));\n                         utilityModal.show(true);\n                         target.add(utilityModal);\n                     }\n-                }, ActionLink.ActionType.VIEW, StandardEntitlement.TASK_LIST);\n+                }, ActionLink.ActionType.NOTIFICATION_TASKS, StandardEntitlement.TASK_LIST);\n \n                 panel.add(new ActionLink<NotificationTO>() {\n "},{"sha":"28f4f26432693d5a774a24522c6d2b44d2b2b33b","filename":"client/console/src/main/java/org/apache/syncope/client/console/notifications/NotificationHandler.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationHandler.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -24,7 +24,6 @@\n import java.util.List;\n import java.util.Map;\n import org.apache.commons.collections4.CollectionUtils;\n-import org.apache.commons.lang3.StringUtils;\n import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.client.console.panels.search.SearchClause;\n import org.apache.syncope.client.console.panels.search.SearchUtils;\n@@ -53,8 +52,9 @@ public final Long getKey() {\n     public List<Pair<String, List<SearchClause>>> getAboutClauses() {\n         if (this.aboutClauses == null) {\n             this.aboutClauses = new ArrayList<>();\n-            for (Map.Entry<String, String> entry : this.notificationTO.getAbouts().entrySet()) {\n-                this.aboutClauses.add(Pair.of(entry.getKey(), SearchUtils.getSearchClauses(entry.getValue())));\n+            for (Map.Entry<String, List<SearchClause>> entry\n+                    : SearchUtils.getSearchClauses(this.notificationTO.getAbouts()).entrySet()) {\n+                this.aboutClauses.add(Pair.of(entry.getKey(), (entry.getValue())));\n             }\n         }\n \n@@ -104,7 +104,7 @@ public Map<String, String> getAboutFIQLs() {\n \n     private String getRecipientsFIQL() {\n         if (CollectionUtils.isEmpty(this.recipientClauses)) {\n-            return StringUtils.EMPTY;\n+            return null;\n         } else {\n             return getFIQLString(this.recipientClauses, SyncopeClient.getUserSearchConditionBuilder());\n         }"},{"sha":"b0f21f5ed33ff50aaca0d7b1540be33383e7a319","filename":"client/console/src/main/java/org/apache/syncope/client/console/notifications/NotificationTasks.java","status":"modified","additions":25,"deletions":3,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationTasks.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -26,29 +26,51 @@\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.common.lib.to.NotificationTO;\n import org.apache.syncope.common.lib.to.NotificationTaskTO;\n+import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.StringResourceModel;\n \n public class NotificationTasks extends Panel implements ModalPanel<Serializable> {\n \n     private static final long serialVersionUID = 1066124171682570083L;\n \n     public NotificationTasks(\n-            final BaseModal<?> baseModal, final PageReference pageReference, final NotificationTO notificationTO) {\n+            final AnyTypeKind anyTypeKind,\n+            final Long anyTypeKey,\n+            final PageReference pageReference) {\n+        this(null, anyTypeKind, anyTypeKey, pageReference);\n+    }\n+\n+    public NotificationTasks(\n+            final Long notification,\n+            final PageReference pageReference) {\n+        this(notification, null, null, pageReference);\n+    }\n+\n+    private NotificationTasks(\n+            final Long notification,\n+            final AnyTypeKind anyTypeKind,\n+            final Long anyTypeKey,\n+            final PageReference pageReference) {\n         super(BaseModal.CONTENT_ID);\n \n         final MultilevelPanel mlp = new MultilevelPanel(\"tasks\");\n         add(mlp);\n \n-        mlp.setFirstLevel(new NotificationTaskDirectoryPanel(null, mlp, pageReference) {\n+        mlp.setFirstLevel(\n+                new NotificationTaskDirectoryPanel(notification, anyTypeKind, anyTypeKey, mlp, pageReference) {\n \n             private static final long serialVersionUID = -2195387360323687302L;\n \n             @Override\n             protected void viewTask(final NotificationTaskTO taskTO, final AjaxRequestTarget target) {\n-                mlp.next(\"task.view\", new TaskExecutionDetails<>(null, taskTO, pageReference), target);\n+                mlp.next(\n+                        new StringResourceModel(\"task.view\", this, new Model<>(taskTO)).getObject(),\n+                        new TaskExecutionDetails<>(null, taskTO, pageReference), target);\n             }\n         });\n     }"},{"sha":"8d786ab8a18b0978c04846846d70d2932ad32403","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/AnyObjectDirectoryPanel.java","status":"modified","additions":16,"deletions":4,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAnyObjectDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAnyObjectDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAnyObjectDirectoryPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -28,6 +28,7 @@\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.notifications.NotificationTasks;\n import org.apache.syncope.client.console.rest.AnyObjectRestClient;\n import org.apache.syncope.client.console.status.StatusModal;\n import org.apache.syncope.client.console.tasks.AnyPropagationTasks;\n@@ -130,8 +131,8 @@ public ActionLinksPanel<AnyObjectTO> getActions(final String componentId, final\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final AnyObjectTO ignore) {\n-                        final IModel<AnyHandler<AnyObjectTO>> formModel =\n-                                new CompoundPropertyModel<>(new AnyHandler<>(model.getObject()));\n+                        final IModel<AnyHandler<AnyObjectTO>> formModel = new CompoundPropertyModel<>(new AnyHandler<>(\n+                                model.getObject()));\n                         altDefaultModal.setFormModel(formModel);\n \n                         target.add(altDefaultModal.setContent(new StatusModal<>(\n@@ -150,8 +151,7 @@ public void onClick(final AjaxRequestTarget target, final AnyObjectTO ignore) {\n                     public void onClick(final AjaxRequestTarget target, final AnyObjectTO ignore) {\n                         send(AnyObjectDirectoryPanel.this, Broadcast.EXACT,\n                                 new AjaxWizard.EditItemActionEvent<>(\n-                                        new AnyHandler<>(new AnyObjectRestClient().read(model.getObject().\n-                                                getKey())),\n+                                        new AnyHandler<>(new AnyObjectRestClient().read(model.getObject().getKey())),\n                                         target));\n                     }\n                 }, ActionType.EDIT, AnyEntitlement.READ.getFor(type)).add(new ActionLink<AnyObjectTO>() {\n@@ -179,6 +179,18 @@ public void onClick(final AjaxRequestTarget target, final AnyObjectTO ignore) {\n                     }\n                 }, ActionType.PROPAGATION_TASKS, StandardEntitlement.TASK_LIST).add(new ActionLink<AnyObjectTO>() {\n \n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target, final AnyObjectTO ignore) {\n+                        target.add(utilityModal.setContent(\n+                                new NotificationTasks(AnyTypeKind.ANY_OBJECT, model.getObject().getKey(), pageRef)));\n+                        utilityModal.header(new StringResourceModel(\"any.notification.tasks\", model));\n+                        utilityModal.show(true);\n+                        target.add(utilityModal);\n+                    }\n+                }, ActionType.NOTIFICATION_TASKS, StandardEntitlement.TASK_LIST).add(new ActionLink<AnyObjectTO>() {\n+\n                     private static final long serialVersionUID = -7978723352517770646L;\n \n                     @Override"},{"sha":"3e0e171c4ab6c4ef53d05222a82678b66460f924","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/GroupDirectoryPanel.java","status":"modified","additions":15,"deletions":2,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupDirectoryPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -28,6 +28,7 @@\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.notifications.NotificationTasks;\n import org.apache.syncope.client.console.rest.GroupRestClient;\n import org.apache.syncope.client.console.status.StatusModal;\n import org.apache.syncope.client.console.tasks.AnyPropagationTasks;\n@@ -124,8 +125,8 @@ public ActionLinksPanel<GroupTO> getActions(final String componentId, final IMod\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final GroupTO ignore) {\n-                        final IModel<AnyHandler<GroupTO>> formModel =\n-                                new CompoundPropertyModel<>(new AnyHandler<>(model.getObject()));\n+                        final IModel<AnyHandler<GroupTO>> formModel = new CompoundPropertyModel<>(new AnyHandler<>(\n+                                model.getObject()));\n                         altDefaultModal.setFormModel(formModel);\n \n                         target.add(altDefaultModal.setContent(new StatusModal<>(\n@@ -174,6 +175,18 @@ public void onClick(final AjaxRequestTarget target, final GroupTO ignore) {\n \n                     private static final long serialVersionUID = -7978723352517770644L;\n \n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target, final GroupTO ignore) {\n+                        target.add(utilityModal.setContent(\n+                                new NotificationTasks(AnyTypeKind.GROUP, model.getObject().getKey(), pageRef)));\n+                        utilityModal.header(new StringResourceModel(\"any.notification.tasks\", model));\n+                        utilityModal.show(true);\n+                        target.add(utilityModal);\n+                    }\n+                }, ActionType.NOTIFICATION_TASKS, StandardEntitlement.TASK_LIST).add(new ActionLink<GroupTO>() {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final GroupTO ignore) {\n                         try {"},{"sha":"f2416ea6e1126bbabc1af6fa4373f365a81d85de","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/UserDirectoryPanel.java","status":"modified","additions":15,"deletions":2,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -29,6 +29,7 @@\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.notifications.NotificationTasks;\n import org.apache.syncope.client.console.rest.UserRestClient;\n import org.apache.syncope.client.console.status.StatusModal;\n import org.apache.syncope.client.console.tasks.AnyPropagationTasks;\n@@ -164,8 +165,8 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n \n-                        final IModel<AnyHandler<UserTO>> formModel =\n-                                new CompoundPropertyModel<>(new AnyHandler<>(model.getObject()));\n+                        final IModel<AnyHandler<UserTO>> formModel = new CompoundPropertyModel<>(new AnyHandler<>(model.\n+                                getObject()));\n                         altDefaultModal.setFormModel(formModel);\n \n                         target.add(altDefaultModal.setContent(new StatusModal<>(\n@@ -234,6 +235,18 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n \n                     private static final long serialVersionUID = -7978723352517770644L;\n \n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n+                        target.add(utilityModal.setContent(\n+                                new NotificationTasks(AnyTypeKind.USER, model.getObject().getKey(), pageRef)));\n+                        utilityModal.header(new StringResourceModel(\"any.notification.tasks\", model));\n+                        utilityModal.show(true);\n+                        target.add(utilityModal);\n+                    }\n+                }, ActionType.NOTIFICATION_TASKS, StandardEntitlement.TASK_LIST).add(new ActionLink<UserTO>() {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n                         try {"},{"sha":"afe2bcb1f8df1e3ccae9516a8d4e3a0ac2095cd0","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/search/SearchClausePanel.java","status":"modified","additions":10,"deletions":8,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FSearchClausePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FSearchClausePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fsearch%2FSearchClausePanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -376,8 +376,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         || type.getModelObject() == SearchClause.Type.RELATIONSHIP) {\n                     if (comparator.getModelObject() == SearchClause.Comparator.IS_NULL\n                             || comparator.getModelObject() == SearchClause.Comparator.IS_NOT_NULL) {\n-\n-                        value.setModelObject(null);\n+                        value.setModelObject(StringUtils.EMPTY);\n                         value.setEnabled(false);\n                     } else {\n                         value.setEnabled(true);\n@@ -426,35 +425,38 @@ private void setFieldAccess(\n                         comparator.setRequired(true);\n                     }\n \n-                    value.setEnabled(comparator.getModelObject() != SearchClause.Comparator.IS_NULL\n-                            && comparator.getModelObject() != SearchClause.Comparator.IS_NOT_NULL);\n+                    if (comparator.getModelObject() == SearchClause.Comparator.IS_NULL\n+                            || comparator.getModelObject() == SearchClause.Comparator.IS_NOT_NULL) {\n+                        value.setEnabled(false);\n+                        value.setModelObject(StringUtils.EMPTY);\n+                    }\n                     property.setChoiceRenderer(new DefaultChoiceRender());\n                     break;\n \n                 case ROLE_MEMBERSHIP:\n                     property.setChoiceRenderer(new DefaultChoiceRender());\n                     value.setEnabled(false);\n-                    value.setModelObject(\"\");\n+                    value.setModelObject(StringUtils.EMPTY);\n                     break;\n \n                 case GROUP_MEMBERSHIP:\n                     property.setChoiceRenderer(new GroupChoiceRender());\n                     value.setEnabled(false);\n-                    value.setModelObject(\"\");\n+                    value.setModelObject(StringUtils.EMPTY);\n                     break;\n \n                 case RESOURCE:\n                     property.setChoiceRenderer(new DefaultChoiceRender());\n                     value.setEnabled(false);\n-                    value.setModelObject(\"\");\n+                    value.setModelObject(StringUtils.EMPTY);\n                     break;\n \n                 case RELATIONSHIP:\n                     property.setChoiceRenderer(new DefaultChoiceRender());\n                     if (comparator.getModelObject() == SearchClause.Comparator.IS_NULL\n                             || comparator.getModelObject() == SearchClause.Comparator.IS_NOT_NULL) {\n                         value.setEnabled(false);\n-                        value.setModelObject(\"\");\n+                        value.setModelObject(StringUtils.EMPTY);\n                         property.setEnabled(true);\n                     } else {\n                         value.setEnabled(true);"},{"sha":"378269eb84f04680304fc0ab927ccdf55ea4362e","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/TaskRestClient.java","status":"modified","additions":26,"deletions":0,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FTaskRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FTaskRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FTaskRestClient.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -89,6 +89,32 @@ public List<PropagationTaskTO> listPropagationTasks(\n                 getResult();\n     }\n \n+    @SuppressWarnings(\"unchecked\")\n+    public <T extends AbstractTaskTO> List<T> listNotificationTasks(\n+            final Long notification,\n+            final AnyTypeKind anyTypeKind,\n+            final Long anyTypeKey,\n+            final int page,\n+            final int size,\n+            final SortParam<String> sort) {\n+\n+        final TaskQuery.Builder builder = new TaskQuery.Builder(TaskType.NOTIFICATION);\n+        if (notification != null) {\n+            builder.notification(notification);\n+        }\n+\n+        if (anyTypeKind != null) {\n+            builder.anyTypeKind(anyTypeKind);\n+        }\n+\n+        if (anyTypeKey != null) {\n+            builder.anyTypeKey(anyTypeKey);\n+        }\n+\n+        return (List<T>) getService(TaskService.class).\n+                list(builder.page(page).size(size).orderBy(toOrderBy(sort)).build()).getResult();\n+    }\n+\n     @SuppressWarnings(\"unchecked\")\n     public <T extends AbstractTaskTO> List<T> list(\n             final Class<T> reference, final int page, final int size, final SortParam<String> sort) {"},{"sha":"d60d5078ce3f590d0846471b4853b28c878e9ef9","filename":"client/console/src/main/java/org/apache/syncope/client/console/tasks/NotificationTaskDirectoryPanel.java","status":"modified","additions":31,"deletions":7,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FNotificationTaskDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FNotificationTaskDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FNotificationTaskDirectoryPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -33,14 +33,14 @@\n import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.ActionColumn;\n import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.CollectionPropertyColumn;\n import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n-import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink.ActionType;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLinksPanel;\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.syncope.common.lib.types.TaskType;\n import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.to.NotificationTaskTO;\n+import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n@@ -57,11 +57,22 @@\n \n     private static final long serialVersionUID = 4984337552918213290L;\n \n+    private final Long notification;\n+\n+    private final AnyTypeKind anyTypeKind;\n+\n+    private final Long anyTypeKey;\n+\n     protected NotificationTaskDirectoryPanel(\n-            final BaseModal<?> baseModal,\n+            final Long notification,\n+            final AnyTypeKind anyTypeKind,\n+            final Long anyTypeKey,\n             final MultilevelPanel multiLevelPanelRef,\n             final PageReference pageRef) {\n-        super(baseModal, multiLevelPanelRef, pageRef);\n+        super(null, multiLevelPanelRef, pageRef);\n+        this.notification = notification;\n+        this.anyTypeKind = anyTypeKind;\n+        this.anyTypeKey = anyTypeKey;\n         initResultTable();\n     }\n \n@@ -178,7 +189,7 @@ protected Collection<ActionType> getBulkActions() {\n \n     @Override\n     protected NotificationTasksProvider dataProvider() {\n-        return new NotificationTasksProvider(rows);\n+        return new NotificationTasksProvider(notification, anyTypeKind, anyTypeKey, rows);\n     }\n \n     @Override\n@@ -190,16 +201,29 @@ public class NotificationTasksProvider extends TaskDataProvider<NotificationTask\n \n         private static final long serialVersionUID = 4725679400450513556L;\n \n-        public NotificationTasksProvider(final int paginatorRows) {\n+        private final Long notification;\n+\n+        private final AnyTypeKind anyTypeKind;\n+\n+        private final Long anyTypeKey;\n+\n+        public NotificationTasksProvider(\n+                final Long notification,\n+                final AnyTypeKind anyTypeKind,\n+                final Long anyTypeKey,\n+                final int paginatorRows) {\n             super(paginatorRows, TaskType.PROPAGATION, restClient);\n+            this.notification = notification;\n+            this.anyTypeKind = anyTypeKind;\n+            this.anyTypeKey = anyTypeKey;\n         }\n \n         @Override\n         public Iterator<NotificationTaskTO> iterator(final long first, final long count) {\n             final int page = ((int) first / paginatorRows);\n \n-            final List<NotificationTaskTO> tasks = restClient.list(\n-                    NotificationTaskTO.class, (page < 0 ? 0 : page) + 1, paginatorRows, getSort());\n+            final List<NotificationTaskTO> tasks = restClient.listNotificationTasks(\n+                    notification, anyTypeKind, anyTypeKey, (page < 0 ? 0 : page) + 1, paginatorRows, getSort());\n \n             Collections.sort(tasks, getComparator());\n             return tasks.iterator();"},{"sha":"dc4d596065a01f3689d3dd63197a7f088f1969f0","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLink.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -74,6 +74,7 @@ public enum ActionType {\n         MANAGE_USERS(\"update\"),\n         MANAGE_GROUPS(\"update\"),\n         PROPAGATION_TASKS(\"read\"),\n+        NOTIFICATION_TASKS(\"read\"),\n         ZOOM_IN(\"zoomin\"),\n         ZOOM_OUT(\"zoomout\");\n "},{"sha":"075fc6d790fe561872f45cba3594ba0e4c0b7e50","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksPanel.java","status":"modified","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -85,6 +85,7 @@ private ActionLinksPanel(final String componentId, final IModel<T> model) {\n         super.add(new Fragment(\"panelDeprovision\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelProvision\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelPropagationTasks\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelNotificationTasks\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelZoomIn\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelZoomOut\", \"emptyFragment\", this));\n     }\n@@ -733,6 +734,25 @@ public String getAjaxIndicatorMarkupId() {\n                 }.setVisible(link.isEnabled(model.getObject())));\n                 break;\n \n+            case NOTIFICATION_TASKS:\n+                fragment = new Fragment(\"panelNotificationTasks\", \"fragmentNotificationTasks\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"notificationTasksLink\") {\n+\n+                    private static final long serialVersionUID = -1876519166660008562L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n             case ZOOM_IN:\n                 fragment = new Fragment(\"panelZoomIn\", \"fragmentZoomIn\", this);\n \n@@ -908,6 +928,14 @@ public void remove(final ActionLink.ActionType type) {\n                 super.addOrReplace(new Fragment(\"panelProvision\", \"emptyFragment\", this));\n                 break;\n \n+            case PROPAGATION_TASKS:\n+                super.addOrReplace(new Fragment(\"panelPropagationTasks\", \"emptyFragment\", this));\n+                break;\n+\n+            case NOTIFICATION_TASKS:\n+                super.addOrReplace(new Fragment(\"panelNotificationTasks\", \"emptyFragment\", this));\n+                break;\n+\n             case ZOOM_IN:\n                 super.addOrReplace(new Fragment(\"panelZoomIn\", \"emptyFragment\", this));\n                 break;"},{"sha":"8baffa94867924e2adf9804f9d4ac1085e5eafbb","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/EventSelectionPanel.html","status":"modified","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FEventSelectionPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FEventSelectionPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FEventSelectionPanel.html?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -24,7 +24,7 @@\n         width: 100%;\n       }\n \n-      .labrut {\n+      .eventLabel {\n         font-size: 12px;\n         vertical-align: middle;\n         font-family: Verdana,Tahoma,sans-serif;\n@@ -33,7 +33,7 @@\n         height: 20px;\n       }\n \n-      .divtableheaderlabrut {\n+      .divtableheadereventLabel {\n         font-weight: bold;\n         float: left;\n         margin-left: 5px;\n@@ -67,13 +67,13 @@\n     <div class=\"eventSelectionWidzard\">\n       <div class=\"container\">\n         <div style=\"display:inline-table;\">\n-          <div class=\"labrut\">\n+          <div class=\"eventLabel\">\n             &nbsp;\n           </div>\n           <div style=\"display: table-cell\">\n             <div class=\"divtableheadercell\">\n-              <div class=\"divtableheaderlabrut\">\n-                <labrut wicket:id=\"successLabel\"/>\n+              <div class=\"divtableheadereventLabel\">\n+                <eventLabel wicket:id=\"successLabel\"/>\n               </div>\n               <div style=\"display: table-cell\">\n                 <input type=\"checkbox\" wicket:id=\"successSelector\" style=\"margin-top: 0px;margin-bottom: 0px;\"/>\n@@ -82,8 +82,8 @@\n           </div>\n           <div style=\"display: table-cell\">\n             <div class=\"divtableheadercell\">\n-              <div class=\"divtableheaderlabrut\">\n-                <labrut wicket:id=\"failureLabel\"/>\n+              <div class=\"divtableheadereventLabel\">\n+                <eventLabel wicket:id=\"failureLabel\"/>\n               </div>\n               <div style=\"display: table-cell\">\n                 <input type=\"checkbox\" wicket:id=\"failureSelector\" style=\"margin-top: 0px;margin-bottom: 0px;\"/>\n@@ -94,9 +94,9 @@\n       </div>\n \n       <div class=\"container\">\n-        <div class=\"labrut\">\n-          <div id=\"divtablerow-labrut\" wicket:id=\"categoryView\">\n-            <div class=\"labrut\">\n+        <div class=\"eventLabel\">\n+          <div id=\"divtablerow-eventLabel\" wicket:id=\"categoryView\">\n+            <div class=\"eventLabel\">\n               <span wicket:id=\"subcategory\">[subcategory]</span>\n             </div>\n           </div>\n@@ -105,7 +105,7 @@\n         <div id=\"divtablerow-success\" class=\"divtablecheckcolumn\">\n           <span wicket:id=\"successGroup\">\n             <div wicket:id=\"successView\" class=\"divtablecheck\">\n-              <div class=\"divtableheaderlabrut\">&nbsp;</div>\n+              <div class=\"divtableheadereventLabel\">&nbsp;</div>\n               <input type=\"checkbox\" wicket:id=\"successCheck\"/>\n             </div>\n           </span>\n@@ -114,7 +114,7 @@\n         <div id=\"divtablerow-failure\" class=\"divtablecheckcolumn\">\n           <span wicket:id=\"failureGroup\">\n             <div wicket:id=\"failureView\" class=\"divtablecheck\">\n-              <div class=\"divtableheaderlabrut\">&nbsp;</div>\n+              <div class=\"divtableheadereventLabel\">&nbsp;</div>\n               <input type=\"checkbox\" wicket:id=\"failureCheck\"/>\n             </div>\n           </span>"},{"sha":"03213b79baa06442d5b7e43deeb4be68c5c5920d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/LoggerCategoryPanel.html","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FLoggerCategoryPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FLoggerCategoryPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FLoggerCategoryPanel.html?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -43,7 +43,7 @@\n         display: table-row;\n         width:100%;\n       }\n-      .eventSelection div#eventElement div#labrut{\n+      .eventSelection div#eventElement div#eventLabel{\n         display: table-cell;\n       }\n \n@@ -72,8 +72,8 @@\n             <span wicket:id=\"subcategory\">[sub-category]</span>\n           </div>\n           <div>\n-            <div id=\"labrut\">\n-              <labrut wicket:id=\"customLabel\"/>\n+            <div id=\"eventLabel\">\n+              <eventLabel wicket:id=\"customLabel\"/>\n             </div>\n             <div id=\"value\">\n               <span wicket:id=\"custom\">[custom]</span>"},{"sha":"3456c874048e9a989d13229f1338b9c0539de90e","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Notifications.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -16,16 +16,13 @@\n # under the License.\n notifications=Notifications\n notification.templates=Templates\n-notification.executions=Executions\n \n-subject=Subject\n sender=Sender\n template=Template\n traceLevel=Trace level\n notification=Notification\n about=About\n events=Events\n-recipients=Recipients\n selfAsRecipient=Include users matching About\n recipientAttrType=Recipients e-mail attribute type\n recipientAttrName=Recipients e-mail attribute schema"},{"sha":"8b8a25725d284390c4693854e8012ba77f2a32fd","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Notifications_it.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_it.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -16,16 +16,13 @@\n # under the License.\n notifications=Notifiche\n notification.templates=Template\n-notification.executions=Execuzioni\n \n-subject=Oggetto\n sender=Mittente\n template=Modello\n traceLevel=Livello di tracciamento\n notification=Notifica\n about=Soggetti\n events=Eventi\n-recipients=Destinatari\n selfAsRecipient=Includi i soggetti\n recipientAttrType=Tipo attributo e-mail destinatari\n recipientAttrName=Schema attributo e-mail destinatari"},{"sha":"97483b83788db0f1e0fa69e856ceb706ec55c66d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Notifications_pt_BR.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FNotifications_pt_BR.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -16,16 +16,13 @@\n # under the License.\n notifications=Notifica\\u00e7\\u00f5es\n notification.templates=Template\n-notification.executions=Execu\\u00e7\\u00f5es\n \n-subject=Assunto\n sender=Remetente\n template=Template\n traceLevel=N\\u00edvel de Trace\n notification=Notifica\\u00e7\\u00e3o\n about=Sobre\n events=Eventos\n-recipients=Destinat\\u00e1rios\n selfAsRecipient=Incluir usu\\u00e1rios relacionados Sobre\n recipientAttrType=Tipo de atributo de destinat\\u00e1rio de email.\n recipientAttrName=Destinat\\u00e1rios de e-mail para atributos de esquema"},{"sha":"76b9809e0b5a8320c80cce307e66bf23256fadd6","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/DirectoryPanel.properties","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -30,10 +30,16 @@ creationDate=Creation Date\n tokenValued=Valued\n tokenNotValued=Not valued\n \n+subject=Subject\n+recipients=Recipients\n+\n any.edit=Edit ${anyTO.type} ${anyTO.key}\n any.new=New ${anyTO.type}\n any.finish=Submit ${anyTO.type}\n any.cancel=Cancel ${anyTO.type}\n any.attr.display=Attributes to be displayed\n bulk.action=Bulk action\n any.propagation.tasks=Propagation tasks for ${type} ${key}\n+any.notification.tasks=Notification tasks for ${type} ${key}\n+notification.tasks=Tasks about notification ${key}\n+"},{"sha":"85961e37c059ed34d374bed39ad59e8be1741b93","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/DirectoryPanel_it.properties","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_it.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -30,10 +30,15 @@ creationDate=Data Creazione\n tokenValued=Valorizzato\n tokenNotValued=Non valorizzato\n \n+subject=Oggetto\n+recipients=Destinatari\n+\n any.edit=Modifica ${anyTO.type} ${key}\n any.new=Nuovo ${anyTO.type}\n any.attr.display=Attributi da mostrare\n any.finish=Invia ${anyTO.type}\n any.cancel=Annulla ${anyTO.type}\n bulk.action=Operazioni di gruppo\n any.propagation.tasks=Task di propagazione per ${type} ${key}\n+any.notification.tasks=Task di notifica per ${type} ${key}\n+notification.tasks=Task relativi alla notifica ${key}"},{"sha":"03119f75a0e981069c0c0788ccc0bda5ec07f456","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/DirectoryPanel_pt_BR.properties","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FDirectoryPanel_pt_BR.properties?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -30,10 +30,15 @@ creationDate=Data de Cria\\u00e7\\u00e3o\n tokenValued=Atribu\\u00eddo\n tokenNotValued=N\\u00e3o Atribu\\u00eddo\n \n+subject=Assunto\n+recipients=Destinat\\u00e1rios\n+\n any.edit=Alterar ${anyTO.type} ${key}\n any.new=Novo ${anyTO.type}\n any.attr.display=Atributos a ser exibido\n any.finish=Apresentar ${anyTO.type}\n any.cancel=Cancelar ${anyTO.type}\n bulk.action=A\\u00e7\\u00e3o Composta\n any.propagation.tasks=Propagation tasks for ${type} ${key}\n+any.notification.tasks=Notification tasks for ${type} ${key}\n+notification.tasks=Tasks about notification ${key}"},{"sha":"28ce9e7638b6044ad2260f9eeb3721c010f844ed","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksPanel.html","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -47,6 +47,7 @@\n     <span wicket:id=\"panelTextEdit\">[plus]</span>\n     <span wicket:id=\"panelExport\">[plus]</span>\n     <span wicket:id=\"panelPropagationTasks\">[plus]</span>\n+    <span wicket:id=\"panelNotificationTasks\">[plus]</span>\n     <span wicket:id=\"panelDelete\">[plus]</span>\n     <span wicket:id=\"panelSelect\">[select]</span>\n     <span wicket:id=\"panelClose\">[close]</span>\n@@ -134,6 +135,10 @@\n     <wicket:fragment wicket:id=\"fragmentPropagationTasks\">\n       <a href=\"#\" wicket:id=\"propagationTasksLink\" class=\"btn\"><i class=\"fa fa-arrow-right\" alt=\"PropagationTasks icon\" title=\"PropagationTasks\"></i></a>\n     </wicket:fragment>\n+    \n+    <wicket:fragment wicket:id=\"fragmentNotificationTasks\">\n+      <a href=\"#\" wicket:id=\"notificationTasksLink\" class=\"btn\"><i class=\"fa fa-envelope-o\" alt=\"NotificationTasks icon\" title=\"NotificationTasks\"></i></a>\n+    </wicket:fragment>\n \n     <wicket:fragment wicket:id=\"fragmentDelete\">\n       <a href=\"#\" wicket:id=\"deleteLink\" class=\"btn\"><i class=\"glyphicon glyphicon-minus\" alt=\"delete icon\" title=\"Delete\"></i></a>"},{"sha":"95c0c5750d0d9613d82f30412523a7d276baed62","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPATaskDAO.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPATaskDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPATaskDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPATaskDAO.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -132,7 +132,7 @@ private StringBuilder buildFindAllQuery(\n             throw new IllegalArgumentException(type + \" is not related to \" + ExternalResource.class.getSimpleName());\n         }\n \n-        if ((anyTypeKind != null || anyKey != null) && type != TaskType.PROPAGATION) {\n+        if ((anyTypeKind != null || anyKey != null) && type != TaskType.PROPAGATION && type != TaskType.NOTIFICATION) {\n             throw new IllegalArgumentException(type + \" is not related to users, groups or any objects\");\n         }\n "},{"sha":"b1ccd342b559fd203f0c776c04e1a74a0de7b23d","filename":"core/persistence-jpa/src/test/resources/domains/MasterContent.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -1194,7 +1194,7 @@ $$ }&#10;\n   <AnyAbout id=\"1\" anyType_name=\"USER\" notification_id=\"1\" filter=\"token!=$null\"/>\n   <Notification_events notification_id=\"1\" event=\"[CUSTOM]:[]:[]:[requestPasswordReset]:[SUCCESS]\"/>\n   <Task DTYPE=\"NotificationTask\" id=\"8\" notification_id=\"1\"\n-        sender=\"admin@prova.org\" subject=\"Notification for PULLOPE-81\" \n+        sender=\"admin@prova.org\" subject=\"Notification for SYNCOPE-81\" \n         textBody=\"NOTIFICATION-81\" htmlBody=\"NOTIFICATION-81\" traceLevel=\"ALL\"/>\n   <NotificationTask_recipients notificationtask_id=\"8\" address=\"recipient@prova.org\"/>  \n   "},{"sha":"a16077e790bc8cd6034164e5f6402fc6bf2b519a","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/notification/NotificationManagerImpl.java","status":"modified","additions":15,"deletions":2,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -65,8 +65,10 @@\n import org.apache.syncope.core.persistence.api.entity.AnyType;\n import org.apache.syncope.core.persistence.api.entity.DerSchema;\n import org.apache.syncope.core.persistence.api.entity.VirSchema;\n+import org.apache.syncope.core.persistence.api.entity.anyobject.AnyObject;\n import org.apache.syncope.core.provisioning.api.DerAttrHandler;\n import org.apache.syncope.core.provisioning.api.VirAttrHandler;\n+import org.apache.syncope.core.provisioning.api.data.AnyObjectDataBinder;\n import org.apache.syncope.core.provisioning.api.notification.NotificationManager;\n import org.apache.syncope.core.provisioning.api.notification.NotificationRecipientsProvider;\n import org.slf4j.Logger;\n@@ -142,6 +144,9 @@ public class NotificationManagerImpl implements NotificationManager {\n     @Autowired\n     private GroupDataBinder groupDataBinder;\n \n+    @Autowired\n+    private AnyObjectDataBinder anyObjectDataBinder;\n+\n     @Autowired\n     private EntityFactory entityFactory;\n \n@@ -201,8 +206,8 @@ private NotificationTask getNotificationTask(\n \n         if (notification.getRecipientsProviderClassName() != null) {\n             try {\n-                NotificationRecipientsProvider recipientsProvider =\n-                        (NotificationRecipientsProvider) ApplicationContextProvider.getBeanFactory().\n+                NotificationRecipientsProvider recipientsProvider\n+                        = (NotificationRecipientsProvider) ApplicationContextProvider.getBeanFactory().\n                         createBean(Class.forName(notification.getRecipientsProviderClassName()),\n                                 AbstractBeanDefinition.AUTOWIRE_BY_NAME, false);\n                 recipientEmails.addAll(recipientsProvider.provideRecipients(notification));\n@@ -259,18 +264,24 @@ public List<NotificationTask> createTasks(\n \n         if (before instanceof UserTO) {\n             any = userDAO.find(((UserTO) before).getKey());\n+        } else if (output instanceof UserTO) {\n+            any = userDAO.find(((UserTO) output).getKey());\n         } else if (output instanceof ProvisioningResult\n                 && ((ProvisioningResult) output).getAny() instanceof UserTO) {\n \n             any = userDAO.find(((ProvisioningResult) output).getAny().getKey());\n         } else if (before instanceof AnyObjectTO) {\n             any = anyObjectDAO.find(((AnyObjectTO) before).getKey());\n+        } else if (output instanceof AnyObjectTO) {\n+            any = anyObjectDAO.find(((AnyObjectTO) output).getKey());\n         } else if (output instanceof ProvisioningResult\n                 && ((ProvisioningResult) output).getAny() instanceof AnyObjectTO) {\n \n             any = anyObjectDAO.find(((ProvisioningResult) output).getAny().getKey());\n         } else if (before instanceof GroupTO) {\n             any = groupDAO.find(((GroupTO) before).getKey());\n+        } else if (output instanceof GroupTO) {\n+            any = groupDAO.find(((GroupTO) output).getKey());\n         } else if (output instanceof ProvisioningResult\n                 && ((ProvisioningResult) output).getAny() instanceof GroupTO) {\n \n@@ -313,6 +324,8 @@ public List<NotificationTask> createTasks(\n                         model.put(\"user\", userDataBinder.getUserTO((User) any, true));\n                     } else if (any instanceof Group) {\n                         model.put(\"group\", groupDataBinder.getGroupTO((Group) any, true));\n+                    } else if (any instanceof AnyObject) {\n+                        model.put(\"group\", anyObjectDataBinder.getAnyObjectTO((AnyObject) any, true));\n                     }\n \n                     NotificationTask notificationTask = getNotificationTask(notification, any, model);"},{"sha":"c22249f99f5e129e275068d2f774c6ac2fe2b1ab","filename":"fit/console-reference/src/test/resources/rebel.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Frebel.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Frebel.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Frebel.xml?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -36,7 +36,7 @@ under the License.\n       </dir>\n     </link>\n     <link target=\"/\">\n-      <dir name=\"${basedir}/../../client/console/target/classes>\n+      <dir name=\"${basedir}/../../client/console/target/classes\">\n       </dir>\n     </link>\n     <link target=\"/\">"},{"sha":"4b079df4016abbfd7ec09bed2192f2b340271bfd","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/NotificationsITCase.java","status":"added","additions":165,"deletions":0,"changes":165,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f1e420a5e1191653a2093c8e9508bcaf808043c0/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FNotificationsITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f1e420a5e1191653a2093c8e9508bcaf808043c0/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FNotificationsITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FNotificationsITCase.java?ref=f1e420a5e1191653a2093c8e9508bcaf808043c0","patch":"@@ -0,0 +1,165 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.console;\n+\n+import static org.junit.Assert.assertNull;\n+\n+import de.agilecoders.wicket.core.markup.html.bootstrap.dialog.Modal;\n+import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.pages.Notifications;\n+import org.apache.wicket.Component;\n+import org.apache.wicket.util.tester.FormTester;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runners.MethodSorters;\n+\n+@FixMethodOrder(MethodSorters.JVM)\n+public class NotificationsITCase extends AbstractConsoleITCase {\n+\n+    private void createNotification(final String sender, final String subject) {\n+        wicketTester.clickLink(\"body:content:tabbedPanel:panel:container:content:add\");\n+\n+        wicketTester.assertComponent(\"body:content:tabbedPanel:panel:modal\", Modal.class);\n+\n+        FormTester formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:modal:form\");\n+\n+        // -------------------------------\n+        // generate event to populate recipientAttrName\n+        // -------------------------------\n+        formTester.setValue(\"content:form:view:recipientAttrType:dropDownChoiceField\", \"3\");\n+        wicketTester.executeAjaxEvent(\n+                \"body:content:tabbedPanel:panel:modal:form:content:form:view:recipientAttrType:dropDownChoiceField\",\n+                Constants.ON_CHANGE);\n+        // -------------------------------\n+\n+        formTester.select(\"content:form:view:recipientAttrType:dropDownChoiceField\", 3);\n+        formTester.setValue(\"content:form:view:recipientAttrType:dropDownChoiceField\", \"3\");\n+        formTester.setValue(\"content:form:view:recipientAttrName:dropDownChoiceField\", \"0\");\n+        formTester.select(\"content:form:view:template:dropDownChoiceField\", 2);\n+        formTester.select(\"content:form:view:traceLevel:dropDownChoiceField\", 0);\n+        formTester.setValue(\"content:form:view:sender:textField\", sender);\n+        formTester.setValue(\"content:form:view:subject:textField\", subject);\n+\n+        wicketTester.cleanupFeedbackMessages();\n+        formTester.submit(\"content:form:buttons:next\");\n+        wicketTester.assertNoErrorMessage();\n+\n+        formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:modal:form\");\n+\n+        // -------------------------------\n+        // generate event to populate eventsPanel\n+        // -------------------------------\n+        formTester.setValue(\"content:form:view:eventSelection:categoryContainer:category:dropDownChoiceField\", \"0\");\n+        wicketTester.executeAjaxEvent(\"body:content:tabbedPanel:panel:modal:form:\"\n+                + \"content:form:view:eventSelection:categoryContainer:category:dropDownChoiceField\",\n+                Constants.ON_CHANGE);\n+        // -------------------------------\n+\n+        // -------------------------------\n+        // select event template\n+        // -------------------------------\n+        formTester.setValue(\"content:form:view:eventSelection:eventsContainer:eventsPanel:successGroup\", \"check0\");\n+        wicketTester.executeAjaxEvent(\"body:content:tabbedPanel:panel:modal:form:content:\"\n+                + \"form:view:eventSelection:eventsContainer:eventsPanel:successGroup\",\n+                Constants.ON_CLICK);\n+        // -------------------------------\n+\n+        formTester.setValue(\"content:form:view:eventSelection:categoryContainer:category:dropDownChoiceField\", \"0\");\n+        formTester.setValue(\"content:form:view:eventSelection:eventsContainer:eventsPanel:successGroup\", \"check0\");\n+\n+        wicketTester.cleanupFeedbackMessages();\n+        formTester.submit(\"content:form:buttons:next\");\n+        wicketTester.assertNoErrorMessage();\n+\n+        formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:modal:form\");\n+        wicketTester.cleanupFeedbackMessages();\n+        formTester.submit(\"content:form:buttons:next\");\n+        wicketTester.assertNoErrorMessage();\n+        wicketTester.assertNoInfoMessage();\n+\n+        formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:modal:form\");\n+        wicketTester.executeAjaxEvent(\"body:content:tabbedPanel:panel:modal:form:content:form:view:staticRecipients:\"\n+                + \"multiValueContainer:innerForm:content:panelPlus:add\", Constants.ON_CLICK);\n+        formTester.setValue(\"content:form:view:staticRecipients:multiValueContainer:innerForm:content:view:0:panel:\"\n+                + \"textField\", \"recipient@syncope.org\");\n+        formTester.setValue(\"content:form:view:selfAsRecipient:checkboxField\", true);\n+\n+        wicketTester.cleanupFeedbackMessages();\n+        formTester.submit(\"content:form:buttons:finish\");\n+        wicketTester.assertInfoMessages(\"Operation executed successfully\");\n+\n+        wicketTester.clickLink(\"body:configurationLI:configurationUL:notificationsLI:notifications\");\n+    }\n+\n+    @Before\n+    public void login() {\n+        doLogin(ADMIN_UNAME, ADMIN_PWD);\n+        wicketTester.clickLink(\"body:configurationLI:configurationUL:notificationsLI:notifications\");\n+        wicketTester.assertRenderedPage(Notifications.class);\n+    }\n+\n+    @Test\n+    public void read() {\n+        assertNull(findComponentByProp(KEY, \"body:content:tabbedPanel:panel:container:content:searchContainer:\"\n+                + \"resultTable:tablePanel:groupForm:checkgroup:dataTable\", 1));\n+    }\n+\n+    @Test\n+    public void create() {\n+        createNotification(\"create@syncope.org\", \"create\");\n+    }\n+\n+    @Test\n+    public void update() {\n+        createNotification(\"update@syncope.org\", \"createToUpdate\");\n+        Component result = findComponentByProp(\"Subject\", \"body:content:tabbedPanel:panel:container:content:\"\n+                + \"searchContainer:resultTable:tablePanel:groupForm:checkgroup:dataTable\", \"createToUpdate\");\n+\n+        wicketTester.clickLink(\n+                result.getPageRelativePath() + \":cells:7:cell:panelEdit:editLink\");\n+\n+        FormTester formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:modal:form\");\n+        formTester.submit(\"content:form:buttons:finish\");\n+\n+        wicketTester.assertInfoMessages(\"Operation executed successfully\");\n+        wicketTester.cleanupFeedbackMessages();\n+    }\n+\n+    @Test\n+    public void delete() {\n+        createNotification(\"delete@syncope.org\", \"createToDelete\");\n+        Component result = findComponentByProp(\"Subject\", \"body:content:tabbedPanel:panel:container:content:\"\n+                + \"searchContainer:resultTable:tablePanel:groupForm:checkgroup:dataTable\", \"createToDelete\");\n+\n+        wicketTester.getRequest().addParameter(\"confirm\", \"true\");\n+        wicketTester.clickLink(\n+                wicketTester.getComponentFromLastRenderedPage(\n+                        result.getPageRelativePath() + \":cells:7:cell:panelDelete:deleteLink\"));\n+\n+        wicketTester.executeAjaxEvent(wicketTester.getComponentFromLastRenderedPage(\n+                result.getPageRelativePath() + \":cells:7:cell:panelDelete:deleteLink\"), \"onclick\");\n+\n+        wicketTester.assertInfoMessages(\"Operation executed successfully\");\n+        wicketTester.cleanupFeedbackMessages();\n+\n+        assertNull(findComponentByProp(\"Subject\", \"body:content:tabbedPanel:panel:container:content:\"\n+                + \"searchContainer:resultTable:tablePanel:groupForm:checkgroup:dataTable\", \"createToDelete\"));\n+    }\n+}"}]}