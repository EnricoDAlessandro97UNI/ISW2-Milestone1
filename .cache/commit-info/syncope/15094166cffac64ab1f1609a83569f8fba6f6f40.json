{"sha":"15094166cffac64ab1f1609a83569f8fba6f6f40","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjE1MDk0MTY2Y2ZmYWM2NGFiMWYxNjA5YTgzNTY5ZjhmYmE2ZjZmNDA=","commit":{"author":{"name":"Marco Di Sabatino Di Diodoro","email":"marco.disabatino@tirasa.net","date":"2020-12-22T15:55:08Z"},"committer":{"name":"Marco Di Sabatino Di Diodoro","email":"mdisabatino@apache.org","date":"2020-12-22T16:05:04Z"},"message":"[SYNCOPE-1606] Fix user toggle panel","tree":{"sha":"d9cd2b2c1a55786e73b7665e6d5a3cfd04a99bb7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d9cd2b2c1a55786e73b7665e6d5a3cfd04a99bb7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/15094166cffac64ab1f1609a83569f8fba6f6f40","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/15094166cffac64ab1f1609a83569f8fba6f6f40","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/15094166cffac64ab1f1609a83569f8fba6f6f40","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/15094166cffac64ab1f1609a83569f8fba6f6f40/comments","author":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"committer":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"parents":[{"sha":"b1613d756a6bf2368525e9460d719cedb2f07914","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b1613d756a6bf2368525e9460d719cedb2f07914","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b1613d756a6bf2368525e9460d719cedb2f07914"}],"stats":{"total":12,"additions":7,"deletions":5},"files":[{"sha":"6b97bce56595638f690ace77e96bbefed253825f","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/UserDirectoryPanel.java","status":"modified","additions":7,"deletions":5,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/15094166cffac64ab1f1609a83569f8fba6f6f40/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/15094166cffac64ab1f1609a83569f8fba6f6f40/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java?ref=15094166cffac64ab1f1609a83569f8fba6f6f40","patch":"@@ -81,7 +81,7 @@ public void onClose(final AjaxRequestTarget target) {\n                 modal.show(false);\n             }\n         });\n-    }\n+            }\n \n     @Override\n     protected String paginatorRowsKey() {\n@@ -155,6 +155,7 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n             @Override\n             public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n                 try {\n+                    model.setObject(restClient.read(model.getObject().getKey()));\n                     restClient.mustChangePassword(\n                             model.getObject().getETagValue(),\n                             !model.getObject().isMustChangePassword(),\n@@ -178,6 +179,7 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n \n                 @Override\n                 public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n+                    model.setObject(restClient.read(model.getObject().getKey()));\n                     IModel<AnyWrapper<UserTO>> formModel = new CompoundPropertyModel<>(\n                             new AnyWrapper<>(model.getObject()));\n                     displayAttributeModal.setFormModel(formModel);\n@@ -223,7 +225,7 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n             SyncopeWebApplication.get().getAnyDirectoryPanelAdditionalActionLinksProvider().get(\n                     model,\n                     realm,\n-                    altDefaultModal,\n+                            altDefaultModal,\n                     getString(\"any.edit\", new Model<>(new AnyWrapper<>(model.getObject()))),\n                     this,\n                     pageRef).forEach(panel::add);\n@@ -255,10 +257,10 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n                     target.add(utilityModal);\n                 }\n             }, ActionType.NOTIFICATION_TASKS, IdRepoEntitlement.TASK_LIST);\n-        }\n+                }\n \n-        if (wizardInModal) {\n-            panel.add(new ActionLink<UserTO>() {\n+            if (wizardInModal) {\n+                panel.add(new ActionLink<UserTO>() {\n \n                 private static final long serialVersionUID = -1978723352517770644L;\n "}]}