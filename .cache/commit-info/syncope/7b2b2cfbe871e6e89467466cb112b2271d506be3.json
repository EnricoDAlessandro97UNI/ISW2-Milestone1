{"sha":"7b2b2cfbe871e6e89467466cb112b2271d506be3","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjdiMmIyY2ZiZTg3MWU2ZTg5NDY3NDY2Y2IxMTJiMjI3MWQ1MDZiZTM=","commit":{"author":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2012-03-30T13:20:41Z"},"committer":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2012-03-30T13:20:41Z"},"message":"SYNCOPE-49 #comment AttributableOperation used to fail tryimg to retrieve UserMod from original and updated UserTOs\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1307401 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0123756f6033a5ccd4fb7ee360c4277b4852fd8c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0123756f6033a5ccd4fb7ee360c4277b4852fd8c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7b2b2cfbe871e6e89467466cb112b2271d506be3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7b2b2cfbe871e6e89467466cb112b2271d506be3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7b2b2cfbe871e6e89467466cb112b2271d506be3","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7b2b2cfbe871e6e89467466cb112b2271d506be3/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"c5e6972cbc312bbb780741185da8483e754512e4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c5e6972cbc312bbb780741185da8483e754512e4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c5e6972cbc312bbb780741185da8483e754512e4"}],"stats":{"total":15,"additions":9,"deletions":6},"files":[{"sha":"b91897b0a0dce568e594e3e36fc1cd1741907c08","filename":"client/src/main/java/org/syncope/client/util/AttributableOperations.java","status":"modified","additions":9,"deletions":6,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7b2b2cfbe871e6e89467466cb112b2271d506be3/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Futil%2FAttributableOperations.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7b2b2cfbe871e6e89467466cb112b2271d506be3/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Futil%2FAttributableOperations.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Futil%2FAttributableOperations.java?ref=7b2b2cfbe871e6e89467466cb112b2271d506be3","patch":"@@ -20,6 +20,7 @@\n \n import java.util.ArrayList;\n import java.util.Collections;\n+import java.util.HashMap;\n import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n@@ -38,8 +39,8 @@\n import org.syncope.client.to.UserTO;\n \n /**\n- * Utility class for manipulating classes extending AbstractAttributableTO \n- * and AbstractAttributableMod.\n+ * Utility class for manipulating classes extending AbstractAttributableTO and AbstractAttributableMod.\n+ *\n  * @see AbstractAttributableTO\n  * @see AbstractAttributableMod\n  */\n@@ -108,8 +109,8 @@ private static void diff(final AbstractAttributableTO updated, final AbstractAtt\n         result.setId(updated.getId());\n \n         // 2. attributes\n-        Map<String, AttributeTO> updatedAttrs = updated.getAttributeMap();\n-        Map<String, AttributeTO> originalAttrs = original.getAttributeMap();\n+        Map<String, AttributeTO> updatedAttrs = new HashMap<String, AttributeTO>(updated.getAttributeMap());\n+        Map<String, AttributeTO> originalAttrs = new HashMap<String, AttributeTO>(original.getAttributeMap());\n \n         Set<String> originalAttrNames = new HashSet<String>(originalAttrs.keySet());\n         originalAttrNames.removeAll(updatedAttrs.keySet());\n@@ -164,6 +165,7 @@ private static void diff(final AbstractAttributableTO updated, final AbstractAtt\n \n     /**\n      * Calculate modifications needed by first in order to be equal to second.\n+     *\n      * @param updated updated UserTO\n      * @param original original UserTO\n      * @return UserMod containing differences\n@@ -241,6 +243,7 @@ public static UserMod diff(final UserTO updated, final UserTO original) {\n \n     /**\n      * Calculate modifications needed by first in order to be equal to second.\n+     *\n      * @param updated updated RoleTO\n      * @param original original RoleTO\n      * @return RoleMod containing differences\n@@ -313,8 +316,8 @@ private static <T extends AbstractAttributableTO, K extends AbstractAttributable\n         }\n \n         // 2. attributes\n-        result.setAttributes(getUpdateValues(to.getAttributeMap(), mod.getAttributesToBeRemoved(), mod\n-                .getAttributesToBeUpdated()));\n+        result.setAttributes(getUpdateValues(to.getAttributeMap(), mod.getAttributesToBeRemoved(), mod.\n+                getAttributesToBeUpdated()));\n \n         // 3. derived attributes\n         Map<String, AttributeTO> attrs = to.getDerivedAttributeMap();"}]}