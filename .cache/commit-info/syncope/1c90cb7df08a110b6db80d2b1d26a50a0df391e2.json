{"sha":"1c90cb7df08a110b6db80d2b1d26a50a0df391e2","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjFjOTBjYjdkZjA4YTExMGI2ZGI4MGQyYjFkMjZhNTBhMGRmMzkxZTI=","commit":{"author":{"name":"Marco Di Sabatino Di Diodoro","email":"mdisabatino@apache.org","date":"2014-11-12T15:22:54Z"},"committer":{"name":"Marco Di Sabatino Di Diodoro","email":"mdisabatino@apache.org","date":"2014-11-12T15:22:54Z"},"message":"Merge branch '1_2_X'","tree":{"sha":"1d88fe00d7a760aa682b30d02448c36d2d1ffb57","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/1d88fe00d7a760aa682b30d02448c36d2d1ffb57"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1c90cb7df08a110b6db80d2b1d26a50a0df391e2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1c90cb7df08a110b6db80d2b1d26a50a0df391e2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1c90cb7df08a110b6db80d2b1d26a50a0df391e2","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/comments","author":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"committer":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"parents":[{"sha":"3458c86f3a2609175797e09ddfb3ef7db5777e12","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3458c86f3a2609175797e09ddfb3ef7db5777e12","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3458c86f3a2609175797e09ddfb3ef7db5777e12"},{"sha":"3fb39a46b7c33aacb2c42c9b79da07b025a718b9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3fb39a46b7c33aacb2c42c9b79da07b025a718b9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3fb39a46b7c33aacb2c42c9b79da07b025a718b9"}],"stats":{"total":74,"additions":70,"deletions":4},"files":[{"sha":"7ec19a9797f9fb800302324ae03a8f7e08a392b1","filename":"console/src/main/java/org/apache/syncope/console/pages/ConnectorModalPage.java","status":"modified","additions":14,"deletions":1,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java?ref=1c90cb7df08a110b6db80d2b1d26a50a0df391e2","patch":"@@ -41,6 +41,8 @@\n import org.apache.syncope.console.wicket.markup.html.form.SpinnerFieldPanel;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.WicketEventJQueryResourceReference;\n+import org.apache.wicket.ajax.form.AjaxFormChoiceComponentUpdatingBehavior;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n@@ -278,7 +280,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n \n         // form - second tab (properties)\n         final ListView<ConnConfProperty> connPropView = new ConnConfPropertyListView(\"connectorProperties\",\n-                new PropertyModel<List<ConnConfProperty>>(this, \"properties\"), \n+                new PropertyModel<List<ConnConfProperty>>(this, \"properties\"),\n                 true, connInstanceTO.getConfiguration());\n         connPropView.setOutputMarkupId(true);\n         connectorPropForm.add(connPropView);\n@@ -321,6 +323,16 @@ protected List<ConnectorCapability> load() {\n         CheckBoxMultipleChoice<ConnectorCapability> capabilitiesPalette =\n                 new CheckBoxMultipleChoice<ConnectorCapability>(\"capabilitiesPalette\",\n                         new PropertyModel<List<ConnectorCapability>>(this, \"selectedCapabilities\"), capabilities);\n+\n+        capabilitiesPalette.add(new AjaxFormChoiceComponentUpdatingBehavior() {\n+\n+            private static final long serialVersionUID = -1107858522700306810L;\n+\n+            @Override\n+            protected void onUpdate(AjaxRequestTarget target) {\n+            }\n+        });\n+\n         connectorForm.add(capabilitiesPalette);\n \n         // form - submit / cancel buttons\n@@ -339,6 +351,7 @@ protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n                 conn.getConfiguration().addAll(connPropView.getModelObject());\n \n                 // Set the model object's capabilities to capabilitiesPalette's converted Set\n+                conn.getCapabilities().clear();\n                 conn.getCapabilities().addAll(selectedCapabilities.isEmpty()\n                         ? EnumSet.noneOf(ConnectorCapability.class)\n                         : EnumSet.copyOf(selectedCapabilities));"},{"sha":"73af181c8457f289ad24ce75d29d48b68c517221","filename":"console/src/test/java/org/apache/syncope/console/AbstractTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FAbstractTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FAbstractTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FAbstractTest.java?ref=1c90cb7df08a110b6db80d2b1d26a50a0df391e2","patch":"@@ -65,7 +65,7 @@ public void setUp() throws Exception {\n         element.sendKeys(ADMIN);\n         element = seleniumDriver.findElement(By.name(\"password\"));\n         element.sendKeys(PASSWORD);\n-        seleniumDriver.findElement(By.name(\":submit\")).click();\n+        seleniumDriver.findElement(By.name(\"p::submit\")).click();\n         \n         (new WebDriverWait(seleniumDriver, 6))\n                 .until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//img[@alt='Logout']\")));"},{"sha":"343d4f8b6561974dc74295c22db84f1ca97993ec","filename":"console/src/test/java/org/apache/syncope/console/ConnInstanceTestITCase.java","status":"modified","additions":39,"deletions":0,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java?ref=1c90cb7df08a110b6db80d2b1d26a50a0df391e2","patch":"@@ -188,4 +188,43 @@ public void issueSyncope506() {\n \n         seleniumDriver.findElement(By.xpath(\"//a[@class='w_close']\")).click();\n     }\n+    \n+    @Test\n+    public void issueSyncope605() {\n+        seleniumDriver.findElement(By.xpath(\"//img[@alt=\\\"Resources\\\"]\")).click();\n+\n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n+\n+        seleniumDriver.findElement(By.xpath(\"//div[3]/ul/li[2]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//tr[8]/td[7]/div/span[13]/a\")).click();\n+\n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n+        seleniumDriver.switchTo().frame(0);\n+        \n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\n+                \"//div[2]/form/div[2]/div/div/div[3]/div[2]/span/select\")));     \n+        \n+        assertEquals(\"H2-testsync\",  \n+                seleniumDriver.findElement(By.xpath(\"//input[@name='displayName:textField']\")).getAttribute(\"value\"));\n+\n+        seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[2]/ul/li[3]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[2]/div[3]/span/input[7]\")).click();\n+\n+        seleniumDriver.findElement(By.name(\"apply\")).click();\n+        \n+        seleniumDriver.switchTo().defaultContent();\n+        \n+        seleniumDriver.findElement(By.xpath(\"//tr[8]/td[7]/div/span[13]/a\")).click();\n+\n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n+        seleniumDriver.switchTo().frame(0);\n+        \n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\n+                \"//div[2]/form/div[2]/div/div/div[3]/div[2]/span/select\")));     \n+        \n+        assertFalse(seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[2]/div[3]/span/input[7]\")).isSelected());\n+\n+        seleniumDriver.switchTo().defaultContent();\n+        seleniumDriver.findElement(By.xpath(\"//a[@class='w_close']\")).click();\n+    }\n }"},{"sha":"484a2a12608e8315d9984aca93ce7eba5241d4e7","filename":"console/src/test/java/org/apache/syncope/console/EditProfileTestITCase.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java?ref=1c90cb7df08a110b6db80d2b1d26a50a0df391e2","patch":"@@ -59,7 +59,7 @@ public void selfRegistration() {\n         element.sendKeys(ADMIN);\n         element = seleniumDriver.findElement(By.name(\"password\"));\n         element.sendKeys(PASSWORD);\n-        seleniumDriver.findElement(By.name(\":submit\")).click();\n+        seleniumDriver.findElement(By.name(\"p::submit\")).click();\n         seleniumDriver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);\n     }\n     \n@@ -69,7 +69,7 @@ public void editUserProfile() {\n         element.sendKeys(\"rossini\");\n         element = seleniumDriver.findElement(By.name(\"password\"));\n         element.sendKeys(\"password\");\n-        seleniumDriver.findElement(By.name(\":submit\")).click();\n+        seleniumDriver.findElement(By.name(\"p::submit\")).click();\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='username']/a\")));\n         seleniumDriver.findElement(By.xpath(\"//div[@id='username']/a\")).click();"},{"sha":"d1063f5723bbee0dd9d8a78912114f0ad63ff96a","filename":"core/src/test/java/org/apache/syncope/core/rest/ConnectorTestITCase.java","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FConnectorTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1c90cb7df08a110b6db80d2b1d26a50a0df391e2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FConnectorTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FConnectorTestITCase.java?ref=1c90cb7df08a110b6db80d2b1d26a50a0df391e2","patch":"@@ -706,4 +706,18 @@ public void bulkAction() {\n             assertNotNull(e);\n         }\n     }\n+\n+    @Test\n+    public void issueSYNCOPE605() {\n+        \n+        ConnInstanceTO connectorInstanceTO = connectorService.read(103L);\n+        assertTrue(connectorInstanceTO.getCapabilities().isEmpty());\n+        \n+        connectorInstanceTO.getCapabilities().add(ConnectorCapability.SEARCH);\n+        connectorService.update(connectorInstanceTO.getId(), connectorInstanceTO);\n+        \n+        ConnInstanceTO updatedCapabilities = connectorService.read(connectorInstanceTO.getId());\n+        assertNotNull(updatedCapabilities.getCapabilities());\n+        assertTrue(updatedCapabilities.getCapabilities().size() == 1);\n+    }\n }"}]}