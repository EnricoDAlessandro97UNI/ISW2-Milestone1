{"sha":"0810d8fdcc24529181ca9b156502f31370e00024","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjA4MTBkOGZkY2MyNDUyOTE4MWNhOWIxNTY1MDJmMzEzNzBlMDAwMjQ=","commit":{"author":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-05-17T22:09:56Z"},"committer":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-05-17T22:09:56Z"},"message":"Merge from 1_1_X branch\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1484014 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"65dadf8df8542e9341b1ce60b51b816085fa0a23","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/65dadf8df8542e9341b1ce60b51b816085fa0a23"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/0810d8fdcc24529181ca9b156502f31370e00024","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0810d8fdcc24529181ca9b156502f31370e00024","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0810d8fdcc24529181ca9b156502f31370e00024","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0810d8fdcc24529181ca9b156502f31370e00024/comments","author":null,"committer":null,"parents":[{"sha":"3675dc52b3a92d25023ff767875813d6c4e6202d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3675dc52b3a92d25023ff767875813d6c4e6202d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3675dc52b3a92d25023ff767875813d6c4e6202d"},{"sha":"c9718485fdf3224ff04870b9a43b547b648294e2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c9718485fdf3224ff04870b9a43b547b648294e2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c9718485fdf3224ff04870b9a43b547b648294e2"}],"stats":{"total":99,"additions":68,"deletions":31},"files":[{"sha":"38861dee2a9be326323c675cb6d7ca88777edc76","filename":"console/src/main/java/org/apache/syncope/console/commons/ConnidAttribute.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConnidAttribute.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConnidAttribute.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConnidAttribute.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -15,10 +15,6 @@\n  */\n package org.apache.syncope.console.commons;\n \n-/**\n- *\n- * @author massi\n- */\n public final class ConnidAttribute {\n     \n     public static final String ENABLE = \"__ENABLE__\";"},{"sha":"15592f2dc05f286c92a08fda89652c70b122f2e2","filename":"console/src/main/java/org/apache/syncope/console/pages/EditUserModalPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -73,7 +73,7 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n \n             form.addOrReplace(new AccountInformationPanel(\"accountinformation\", userTO));\n \n-            form.addOrReplace(new ResourcesPanel.ResourcesPanelBuilder(\"resources\").attributableTO(userTO).statusPanel(\n+            form.addOrReplace(new ResourcesPanel.Builder(\"resources\").attributableTO(userTO).statusPanel(\n                     statusPanel).build());\n \n             form.addOrReplace(new MembershipsPanel(\"memberships\", userTO, false, statusPanel, getPageReference()));"},{"sha":"c20a58f00a39b47360c7447b6fa8de8172b3836e","filename":"console/src/main/java/org/apache/syncope/console/pages/RoleModalPage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -92,7 +92,8 @@ public RoleModalPage(final PageReference pageRef, final ModalWindow window, fina\n \n         form.setModel(new CompoundPropertyModel(roleTO));\n \n-        this.rolePanel = new RolePanel(\"rolePanel\", form, roleTO, mode, getPageReference());\n+        this.rolePanel = new RolePanel.Builder(\"rolePanel\").form(form).roleTO(roleTO).roleModalPageMode(mode)\n+                .pageRef(getPageReference()).build();\n         form.add(rolePanel);\n \n         final AjaxButton submit = new IndicatingAjaxButton(\"submit\", new ResourceModel(\"submit\")) {"},{"sha":"f63bc2c8994c8520d70c710ebbe062ff99983639","filename":"console/src/main/java/org/apache/syncope/console/pages/UserModalPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -134,7 +134,7 @@ protected Form setupEditPanel() {\n         //--------------------------------\n         // Resources panel\n         //--------------------------------\n-        form.add(new ResourcesPanel.ResourcesPanelBuilder(\"resources\")\n+        form.add(new ResourcesPanel.Builder(\"resources\")\n                 .attributableTO(userTO).statusPanel(null).build());\n         //--------------------------------\n "},{"sha":"4c88ea86387d9beb1f7d69151dbcad03b18bd19a","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourcesPanel.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -62,24 +62,24 @@ public class ResourcesPanel extends Panel {\n \n     private final List<String> allResources;\n \n-    public static class ResourcesPanelBuilder {\n+    public static class Builder {\n \n         private String id;\n \n         private Object to;\n \n         private StatusPanel statusPanel;\n \n-        public ResourcesPanelBuilder(String id) {\n+        public Builder(final String id) {\n             this.id = id;\n         }\n \n-        public ResourcesPanelBuilder attributableTO(Object to) {\n+        public Builder attributableTO(final Object to) {\n             this.to = to;\n             return this;\n         }\n \n-        public ResourcesPanelBuilder statusPanel(StatusPanel statusPanel) {\n+        public Builder statusPanel(final StatusPanel statusPanel) {\n             this.statusPanel = statusPanel;\n             return this;\n         }\n@@ -89,7 +89,7 @@ public ResourcesPanel build() {\n         }\n     }\n \n-    private ResourcesPanel(final ResourcesPanelBuilder builder) {\n+    private ResourcesPanel(final Builder builder) {\n         super(builder.id);\n         attributableTO = (AbstractAttributableTO) builder.to;\n         previousResources = new HashSet<String>(attributableTO.getResources());"},{"sha":"5633e9942c2abef21a272171428419b5160b7625","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RolePanel.java","status":"modified","additions":57,"deletions":18,"changes":75,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -53,21 +53,58 @@ public class RolePanel extends Panel {\n \n     private final AjaxPalettePanel<String> entitlementsPalette;\n \n-    public RolePanel(final String id, final Form form, final RoleTO roleTO, final RoleModalPage.Mode mode) {\n-        this(id, form, roleTO, mode, null);\n-    }\n+    public static class Builder {\n+\n+        private String id;\n+\n+        private Form form;\n+\n+        private RoleTO roleTO;\n+\n+        private RoleModalPage.Mode mode;\n+\n+        private PageReference pageReference;\n+\n+        public Builder(String id) {\n+            this.id = id;\n+        }\n+\n+        public RolePanel.Builder form(final Form form) {\n+            this.form = form;\n+            return this;\n+        }\n+\n+        public RolePanel.Builder roleTO(final RoleTO roleTO) {\n+            this.roleTO = roleTO;\n+            return this;\n+        }\n+\n+        public RolePanel.Builder roleModalPageMode(final RoleModalPage.Mode mode) {\n+            this.mode = mode;\n+            return this;\n+        }\n \n-    public RolePanel(final String id, final Form form, final RoleTO roleTO, final RoleModalPage.Mode mode,\n-            final PageReference pageref) {\n+        public RolePanel.Builder pageRef(final PageReference pageReference) {\n+            this.pageReference = pageReference;\n+            return this;\n+        }\n+\n+        public RolePanel build() {\n+            return new RolePanel(this);\n+        }\n+    }\n \n-        super(id);\n+    private RolePanel(final Builder builder) {\n+        super(builder.id);\n \n-        this.add(new RoleDetailsPanel(\"details\", roleTO, form, mode == RoleModalPage.Mode.TEMPLATE));\n+        this.add(new RoleDetailsPanel(\n+                \"details\", builder.roleTO, builder.form, builder.mode == RoleModalPage.Mode.TEMPLATE));\n \n-        if (pageref == null || roleTO.getId() == 0) {\n+        if (builder.pageReference == null || builder.roleTO.getId() == 0) {\n             this.add(new Label(\"statuspanel\", \"\"));\n         } else {\n-            StatusPanel statusPanel = new StatusPanel(\"statuspanel\", roleTO, new ArrayList<StatusBean>(), pageref);\n+            StatusPanel statusPanel = new StatusPanel(\n+                    \"statuspanel\", builder.roleTO, new ArrayList<StatusBean>(), builder.pageReference);\n             statusPanel.setOutputMarkupId(true);\n             MetaDataRoleAuthorizationStrategy.authorize(\n                     statusPanel, RENDER, xmlRolesReader.getAllAllowedRoles(\"Resources\", \"getConnectorObject\"));\n@@ -76,21 +113,22 @@ public RolePanel(final String id, final Form form, final RoleTO roleTO, final Ro\n \n         //--------------------------------\n         // Attributes panel\n-        this.add(new AttributesPanel(\"attributes\", roleTO, form, mode == RoleModalPage.Mode.TEMPLATE));\n+        this.add(new AttributesPanel(\n+                \"attributes\", builder.roleTO, builder.form, builder.mode == RoleModalPage.Mode.TEMPLATE));\n \n         final AjaxCheckBoxPanel inhAttributes = new AjaxCheckBoxPanel(\"inheritAttributes\", \"inheritAttributes\",\n-                new PropertyModel<Boolean>(roleTO, \"inheritAttributes\"));\n+                new PropertyModel<Boolean>(builder.roleTO, \"inheritAttributes\"));\n         inhAttributes.setOutputMarkupId(true);\n         this.add(inhAttributes);\n         //--------------------------------\n \n         //--------------------------------\n         // Derived attributes container\n         //--------------------------------\n-        this.add(new DerivedAttributesPanel(\"derivedAttributes\", roleTO));\n+        this.add(new DerivedAttributesPanel(\"derivedAttributes\", builder.roleTO));\n \n         final AjaxCheckBoxPanel inhDerivedAttributes = new AjaxCheckBoxPanel(\"inheritDerivedAttributes\",\n-                \"inheritDerivedAttributes\", new PropertyModel<Boolean>(roleTO, \"inheritDerivedAttributes\"));\n+                \"inheritDerivedAttributes\", new PropertyModel<Boolean>(builder.roleTO, \"inheritDerivedAttributes\"));\n         inhDerivedAttributes.setOutputMarkupId(true);\n         inhDerivedAttributes.setOutputMarkupId(true);\n         this.add(inhDerivedAttributes);\n@@ -99,10 +137,11 @@ public RolePanel(final String id, final Form form, final RoleTO roleTO, final Ro\n         //--------------------------------\n         // Virtual attributes container\n         //--------------------------------\n-        this.add(new VirtualAttributesPanel(\"virtualAttributes\", roleTO, mode == RoleModalPage.Mode.TEMPLATE));\n+        this.add(new VirtualAttributesPanel(\n+                \"virtualAttributes\", builder.roleTO, builder.mode == RoleModalPage.Mode.TEMPLATE));\n \n         final AjaxCheckBoxPanel inhVirtualAttributes = new AjaxCheckBoxPanel(\"inheritVirtualAttributes\",\n-                \"inheritVirtualAttributes\", new PropertyModel<Boolean>(roleTO, \"inheritVirtualAttributes\"));\n+                \"inheritVirtualAttributes\", new PropertyModel<Boolean>(builder.roleTO, \"inheritVirtualAttributes\"));\n         inhVirtualAttributes.setOutputMarkupId(true);\n         inhVirtualAttributes.setOutputMarkupId(true);\n         this.add(inhVirtualAttributes);\n@@ -112,18 +151,18 @@ public RolePanel(final String id, final Form form, final RoleTO roleTO, final Ro\n         // Security container\n         //--------------------------------\n \n-        this.add(new RoleSecurityPanel(\"security\", roleTO).setOutputMarkupId(true));\n+        this.add(new RoleSecurityPanel(\"security\", builder.roleTO).setOutputMarkupId(true));\n         //--------------------------------\n \n         //--------------------------------\n         // Resources container\n         //--------------------------------\n \n-        this.add(new ResourcesPanel.ResourcesPanelBuilder(\"resources\").attributableTO(roleTO).build()\n+        this.add(new ResourcesPanel.Builder(\"resources\").attributableTO(builder.roleTO).build()\n                 .setOutputMarkupId(true));\n         //--------------------------------\n \n-        ListModel<String> selectedEntitlements = new ListModel<String>(roleTO.getEntitlements());\n+        ListModel<String> selectedEntitlements = new ListModel<String>(builder.roleTO.getEntitlements());\n \n         List<String> allEntitlements = entitlementRestClient.getAllEntitlements();\n         if (allEntitlements != null && !allEntitlements.isEmpty()) {"},{"sha":"0085ae43860ac0cb9794aefd2b145f223130bbd4","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleTabPanel.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0810d8fdcc24529181ca9b156502f31370e00024/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java?ref=0810d8fdcc24529181ca9b156502f31370e00024","patch":"@@ -59,7 +59,8 @@ public RoleTabPanel(final String id, final RoleTO roleTO, final ModalWindow wind\n         form.setModel(new CompoundPropertyModel(roleTO));\n         form.setOutputMarkupId(true);\n \n-        final RolePanel rolePanel = new RolePanel(\"rolePanel\", form, roleTO, RoleModalPage.Mode.ADMIN);\n+        final RolePanel rolePanel = new RolePanel.Builder(\"rolePanel\").form(form).roleTO(roleTO)\n+                .roleModalPageMode(RoleModalPage.Mode.ADMIN).build();\n         rolePanel.setEnabled(false);\n         form.add(rolePanel);\n "}]}