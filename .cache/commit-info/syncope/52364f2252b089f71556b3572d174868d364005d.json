{"sha":"52364f2252b089f71556b3572d174868d364005d","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjUyMzY0ZjIyNTJiMDg5ZjcxNTU2YjM1NzJkMTc0ODY4ZDM2NDAwNWQ=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-19T13:07:16Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-19T13:07:16Z"},"message":"Fixes issue 193\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247153 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d98fd321dea852a07bb09bfb2a6ec682f37d6c9d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d98fd321dea852a07bb09bfb2a6ec682f37d6c9d"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/52364f2252b089f71556b3572d174868d364005d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/52364f2252b089f71556b3572d174868d364005d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/52364f2252b089f71556b3572d174868d364005d","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/52364f2252b089f71556b3572d174868d364005d/comments","author":null,"committer":null,"parents":[{"sha":"abacb883e17dcd5ec825c04307dfdf3be0717acd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/abacb883e17dcd5ec825c04307dfdf3be0717acd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/abacb883e17dcd5ec825c04307dfdf3be0717acd"}],"stats":{"total":34,"additions":22,"deletions":12},"files":[{"sha":"609160323352f6ca7a2c58f459ecc044d543bfb1","filename":"console/src/main/java/org/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":18,"deletions":7,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/52364f2252b089f71556b3572d174868d364005d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/52364f2252b089f71556b3572d174868d364005d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=52364f2252b089f71556b3572d174868d364005d","patch":"@@ -17,10 +17,10 @@\n package org.syncope.console.pages;\n \n import java.util.ArrayList;\n-import java.util.Arrays;\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import java.util.Arrays;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n@@ -34,6 +34,9 @@\n import org.syncope.client.to.SchemaTO;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.markup.html.form.DropDownChoice;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.model.ResourceModel;\n import org.syncope.client.AbstractBaseBean;\n import org.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n@@ -77,17 +80,25 @@ public void setSchemaModalPage(\n                 \"conversionPattern\", getString(\"conversionPattern\"),\n                 new PropertyModel<String>(schema, \"conversionPattern\"), true);\n \n-        final ArrayList<String> validatorsList = new ArrayList<String>();\n-        validatorsList.add(\"org.syncope.core.persistence.validation\"\n-                + \".AlwaysTrueValidator\");\n-        validatorsList.add(\"org.syncope.core.persistence.validation\"\n-                + \".EmailAddressValidator\");\n+        final IModel<List<String>> validatorsList =\n+                new LoadableDetachableModel<List<String>>() {\n+\n+                    private static final long serialVersionUID =\n+                            5275935387613157437L;\n+\n+                    @Override\n+                    protected List<String> load() {\n+                        return restClient.getAllValidatorClasses();\n+                    }\n+                };\n \n         final AjaxDropDownChoicePanel<String> validatorClass =\n                 new AjaxDropDownChoicePanel<String>(\n                 \"validatorClass\", getString(\"validatorClass\"),\n                 new PropertyModel(schema, \"validatorClass\"), true);\n-        validatorClass.setChoices(validatorsList);\n+\n+        ((DropDownChoice) validatorClass.getField()).setNullValid(true);\n+        validatorClass.setChoices(validatorsList.getObject());\n \n         final AjaxDropDownChoicePanel<SchemaType> type =\n                 new AjaxDropDownChoicePanel<SchemaType>("},{"sha":"0433316d3646b81c5cfc59a9937eb4791d2d480a","filename":"console/src/main/java/org/syncope/console/rest/SchemaRestClient.java","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/52364f2252b089f71556b3572d174868d364005d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FSchemaRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/52364f2252b089f71556b3572d174868d364005d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FSchemaRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FSchemaRestClient.java?ref=52364f2252b089f71556b3572d174868d364005d","patch":"@@ -17,7 +17,6 @@\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.List;\n-import java.util.Set;\n import org.springframework.stereotype.Component;\n import org.syncope.client.to.DerivedSchemaTO;\n import org.syncope.client.to.SchemaTO;\n@@ -327,13 +326,13 @@ public void deleteVirtualSchema(String kind, String name) {\n     /**\n      * Populator for Validator Schema DropDown components.\n      */\n-    public Set<String> getAllValidatorClasses() {\n-        Set<String> validators = null;\n+    public List<String> getAllValidatorClasses() {\n+        List<String> validators = null;\n \n         try {\n-            validators = restTemplate.getForObject(\n+            validators = Arrays.asList(restTemplate.getForObject(\n                     baseURL + \"configuration/validators.json\",\n-                    Set.class);\n+                    String[].class));\n         } catch (SyncopeClientCompositeErrorException e) {\n             LOG.error(\"While getting all validators\", e);\n         }"}]}