{"sha":"208a28ad13a998d718dbcc1f84ebbcb224f80121","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjIwOGEyOGFkMTNhOTk4ZDcxOGRiY2MxZjg0ZWJiY2IyMjRmODAxMjE=","commit":{"author":{"name":"Colm O Heigeartaigh","email":"coheigea@apache.org","date":"2012-10-30T11:38:17Z"},"committer":{"name":"Colm O Heigeartaigh","email":"coheigea@apache.org","date":"2012-10-30T11:38:17Z"},"message":"[SYNCOPE-221] - Let user explicitly choose to give value for AccountLink\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1403669 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"696df7d867f6345924d7356a9fc14b6ff15728fa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/696df7d867f6345924d7356a9fc14b6ff15728fa"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/208a28ad13a998d718dbcc1f84ebbcb224f80121","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/208a28ad13a998d718dbcc1f84ebbcb224f80121","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/208a28ad13a998d718dbcc1f84ebbcb224f80121","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/208a28ad13a998d718dbcc1f84ebbcb224f80121/comments","author":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"committer":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"parents":[{"sha":"febddcd83250765c8d6a43b15396e238f43cde09","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/febddcd83250765c8d6a43b15396e238f43cde09","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/febddcd83250765c8d6a43b15396e238f43cde09"}],"stats":{"total":85,"additions":75,"deletions":10},"files":[{"sha":"07a8a3c3515161c72743df7a1136c298299aeb91","filename":"console/src/main/java/org/apache/syncope/console/markup/html/CrontabContainer.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fmarkup%2Fhtml%2FCrontabContainer.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fmarkup%2Fhtml%2FCrontabContainer.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fmarkup%2Fhtml%2FCrontabContainer.java?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -67,7 +67,7 @@ public CrontabContainer(final String id, final PropertyModel<String> cronExpress\n         super(id);\n         setOutputMarkupId(true);\n \n-        final DropDownChoice<SelectOption> cronTemplateChooser = new DropDownChoice(\"cronTemplateChooser\") {\n+        final DropDownChoice<SelectOption> cronTemplateChooser = new DropDownChoice<SelectOption>(\"cronTemplateChooser\") {\n \n             private static final long serialVersionUID = -5843424545478691442L;\n "},{"sha":"9bfbcb7b477e39578297730c559d48985433b721","filename":"console/src/main/java/org/apache/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -109,7 +109,7 @@ protected List<String> load() {\n         type.addRequiredLabel();\n \n         final AjaxTextFieldPanel enumerationValuesPanel = \n-            new AjaxTextFieldPanel(\"panel\", \"enumerationValues\", new Model(null));\n+            new AjaxTextFieldPanel(\"panel\", \"enumerationValues\", new Model<String>(null));\n         final MultiValueSelectorPanel<String> enumerationValues =\n                 new MultiValueSelectorPanel<String>(\"enumerationValues\",\n                 new Model(),\n@@ -121,7 +121,7 @@ protected List<String> load() {\n         final MultiValueSelectorPanel<String> enumerationKeys =\n                 new MultiValueSelectorPanel<String>(\"enumerationKeys\",\n                 new Model(),\n-                new AjaxTextFieldPanel(\"panel\", \"enumerationKeys\", new Model(null)));\n+                new AjaxTextFieldPanel(\"panel\", \"enumerationKeys\", new Model<String>(null)));\n         schemaForm.add(enumerationKeys);\n \n         enumerationKeys.setModelObject((Serializable) getEnumValuesAsList(schema.getEnumerationKeys()));"},{"sha":"5a67c5e1e8c59c2b3f59ab1d2742b7330c472b41","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourceMappingPanel.java","status":"modified","additions":43,"deletions":1,"changes":44,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages.panels;\n \n+import java.io.Serializable;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collections;\n@@ -113,6 +114,11 @@ public class ResourceMappingPanel extends Panel {\n      * Mapping container.\n      */\n     private final transient WebMarkupContainer mappingContainer;\n+    \n+    /**\n+     * AccountLink container.\n+     */\n+    private final transient WebMarkupContainer accountLinkContainer;\n \n     /**\n      * OnChange event name.\n@@ -148,10 +154,46 @@ public ResourceMappingPanel(final String panelid, final ResourceTO resourceTO) {\n         this.resourceTO = resourceTO;\n \n         initResourceSchemaNames();\n+        \n+        accountLinkContainer = new WebMarkupContainer(\"accountLinkContainer\");\n+        accountLinkContainer.setOutputMarkupId(true);\n+        add(accountLinkContainer);\n+\n+        boolean accountLinkEnabled = false;\n+        if (resourceTO.getAccountLink() != null) {\n+            accountLinkEnabled = true;\n+        }\n+        final AjaxCheckBoxPanel accountLinkCheckbox = new AjaxCheckBoxPanel(\"accountLinkCheckbox\", \n+                        new ResourceModel(\"accountLinkCheckbox\", \"accountLinkCheckbox\").getObject(),\n+                        new Model<Boolean>(Boolean.valueOf(accountLinkEnabled)));\n+        accountLinkCheckbox.setEnabled(true);\n+        \n+        accountLinkContainer.add(accountLinkCheckbox);\n \n         final AjaxTextFieldPanel accountLink = new AjaxTextFieldPanel(\"accountLink\", new ResourceModel(\"accountLink\",\n                 \"accountLink\").getObject(), new PropertyModel<String>(resourceTO, \"accountLink\"));\n-        add(accountLink);\n+        accountLink.setEnabled(accountLinkEnabled);\n+        \n+        accountLinkContainer.add(accountLink);\n+        \n+        accountLinkCheckbox.getField().add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n+            private static final long serialVersionUID = -1107858522700306810L;\n+\n+            @Override\n+            protected void onUpdate(final AjaxRequestTarget target) {\n+                if (accountLinkCheckbox.getModelObject()) {\n+                    accountLink.setEnabled(Boolean.TRUE);\n+                    accountLink.setModelObject(\"\");\n+                } else {\n+                    accountLink.setEnabled(Boolean.FALSE);\n+                    accountLink.setModelObject(\"\");\n+                }\n+                \n+                target.add(accountLink);\n+            }\n+        });\n+        \n \n         mappingContainer = new WebMarkupContainer(\"mappingContainer\");\n         mappingContainer.setOutputMarkupId(true);"},{"sha":"f6861fdc1ff35c6270ae4d6ead0ab1784bb47a3a","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/form/AjaxCheckBoxPanel.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -52,7 +52,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n     }\n \n     @Override\n-    public FieldPanel addRequiredLabel() {\n+    public FieldPanel<Boolean> addRequiredLabel() {\n         if (!isRequired()) {\n             setRequired(true);\n         }\n@@ -63,7 +63,7 @@ public FieldPanel addRequiredLabel() {\n     }\n \n     @Override\n-    public FieldPanel setNewModel(final List<Serializable> list) {\n+    public FieldPanel<Boolean> setNewModel(final List<Serializable> list) {\n         setNewModel(new Model() {\n \n             private static final long serialVersionUID = 527651414610325237L;"},{"sha":"a141eaece8a92f1e57f4d998a70a9d05f6d0b33e","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -42,6 +42,7 @@ fieldName=Field name\n accountIdValidation=There must be exactly one AccountId\n propagationMode=Propagation mode\n accountLink=Account link\n+enable=Enable\n \n createTraceLevel=Create trace level\n updateTraceLevel=Update trace level"},{"sha":"18fbab19e794859888864ab151d57a51a4d2d65d","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -43,6 +43,7 @@ fieldName=Nome campo\n accountIdValidation=Deve essere definito esattamente un AccountId\n propagationMode=Modalit\\u00e0 di propagazione\n accountLink=Account link\n+enable=Abilita\n \n createTraceLevel=Livello di tracciamento delle creazioni\n updateTraceLevel=Livello di tracciamento degli aggiornamenti"},{"sha":"90540273c4216ee4f3a6ab47e1311c8d363181f1","filename":"console/src/main/resources/org/apache/syncope/console/pages/panels/ResourceMappingPanel.html","status":"modified","additions":25,"deletions":4,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/208a28ad13a998d718dbcc1f84ebbcb224f80121/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html?ref=208a28ad13a998d718dbcc1f84ebbcb224f80121","patch":"@@ -74,10 +74,31 @@\n                 </div>\n             </div>\n \n-            <div class=\"tablerow\" style=\"margin-top: 10px\">\n-                <div class=\"tablecolumn_label long_fixedsize\">\n-                    <label for=\"accountLink\"><wicket:message key=\"accountLink\"/></label>\n-                    <span wicket:id=\"accountLink\">[accountLink]</span>\n+            <div class=\"tablerow\">\n+                <div class=\"tablecolumn_field all_dynamicsize\">\n+                    <table id=\"accountLinkTable\"\n+                           class=\"ui-widget ui-widget-content ui-corner-all\"\n+                           style=\"font-size: 1em;margin-top:2px;\"\n+                           border-width=\"1px;\" border-color=\"#cccccc;\" border-style=\"solid;\"\n+                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n+                           wicket:id=\"accountLinkContainer\">\n+                        <thead>\n+                            <tr class=\"ui-widget-header\">\n+                                <th width=\"10%\" align=\"left\"><wicket:message key=\"enable\"/></th>\n+                                <th align=\"left\"><wicket:message key=\"accountLink\"/></th>\n+                            </tr>\n+                        </thead>\n+                        <tbody>\n+                            <tr>\n+                                <td width=\"10%\" align=\"left\" valign=\"middle\">\n+                                    <span wicket:id=\"accountLinkCheckbox\">[accountLinkCheckbox]</span>\n+                                </td>\n+                                <td align=\"left\" valign=\"middle\">\n+                                    <span wicket:id=\"accountLink\">[accountLink]</span>\n+                                </td>\n+                            </tr>\n+                        </tbody>\n+                    </table>\n                 </div>\n             </div>\n         </div>"}]}