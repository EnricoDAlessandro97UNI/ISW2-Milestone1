{"sha":"43cdad3b52ff54f146b75a29be0d2421b4caa33f","node_id":"C_kwDOJfYA1toAKDQzY2RhZDNiNTJmZjU0ZjE0NmI3NWEyOWJlMGQyNDIxYjRjYWEzM2Y","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-11-22T14:44:02Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-11-22T14:44:02Z"},"message":"[SYNCOPE-1714] Now projects from archetype feature a docker profile","tree":{"sha":"0be3ded4102f5bd503e814ba65c1e80c0f5191d7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0be3ded4102f5bd503e814ba65c1e80c0f5191d7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/43cdad3b52ff54f146b75a29be0d2421b4caa33f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/43cdad3b52ff54f146b75a29be0d2421b4caa33f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/43cdad3b52ff54f146b75a29be0d2421b4caa33f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/43cdad3b52ff54f146b75a29be0d2421b4caa33f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"7c1bff67425ac457d7c8c98d5ab62535762ade7c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7c1bff67425ac457d7c8c98d5ab62535762ade7c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7c1bff67425ac457d7c8c98d5ab62535762ade7c"}],"stats":{"total":401,"additions":396,"deletions":5},"files":[{"sha":"b1bca655473587a743149828098db3d3c7e48e9c","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -150,5 +150,21 @@ under the License.\n         </plugins>\n       </build>\n     </profile>\n+\n+    <profile>\n+      <id>docker</id>\n+\n+      <build>\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-war-plugin</artifactId>\n+            <configuration>\n+              <attachClasses>true</attachClasses>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n   </profiles>\n </project>"},{"sha":"602e5280b2e5ef98fea694d8ab3944c144c7b2e2","filename":"archetype/src/main/resources/archetype-resources/core/pom.xml","status":"modified","additions":16,"deletions":1,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -210,6 +210,21 @@ under the License.\n         </plugins>\n       </build>\n     </profile>\n-  </profiles>\n \n+    <profile>\n+      <id>docker</id>\n+\n+      <build>\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-war-plugin</artifactId>\n+            <configuration>\n+              <attachClasses>true</attachClasses>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n+  </profiles>\n </project>"},{"sha":"04dbfa86d3da68b7d79736b6f1093be744cd3bca","filename":"archetype/src/main/resources/archetype-resources/enduser/pom.xml","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fenduser%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -177,5 +177,21 @@ under the License.\n         </plugins>\n       </build>\n     </profile>\n+\n+    <profile>\n+      <id>docker</id>\n+\n+      <build>\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-war-plugin</artifactId>\n+            <configuration>\n+              <attachClasses>true</attachClasses>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n   </profiles>\n </project>"},{"sha":"c86708ab69b70b78fb932a0643e70e6e48e72bf1","filename":"archetype/src/main/resources/archetype-resources/fit/pom.xml","status":"modified","additions":250,"deletions":1,"changes":251,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -195,7 +195,7 @@ under the License.\n                 <argument>-Djavax.net.ssl.trustStore=${basedir}/src/test/resources/keystore.jks</argument>\n                 <argument>-Djavax.net.ssl.trustStorePassword=password</argument>\n                 <argument>-jar</argument>\n-                <argument>${basedir}/../sra/target/syncope-sra.jar</argument>\n+                <argument>${basedir}/../sra/target/syncope-sra-exec.jar</argument>\n                 <argument>-Dreactor.netty.http.server.accessLogEnabled=true</argument>\n               </arguments>\n               <environmentVariables>\n@@ -246,6 +246,7 @@ under the License.\n             <properties>\n               <cargo.jvmargs>\n                 -Dspring.profiles.active=${spring.profiles.active}\n+                -Dwicket.ioc.useByteBuddy=true\n                 -Xmx1024m -Xms512m</cargo.jvmargs>\n \n               <cargo.servlet.port>9443</cargo.servlet.port>\n@@ -324,5 +325,253 @@ under the License.\n         <defaultGoal>clean verify cargo:run</defaultGoal>  \n       </build>\n     </profile>\n+\n+    <profile>\n+      <id>docker</id>\n+\n+      <properties>\n+        <exec.skip>true</exec.skip>\n+        <docker.autoCreateCustomNetworks>true</docker.autoCreateCustomNetworks>\n+      </properties>\n+\n+      <dependencies>\n+        <dependency>\n+          <groupId>${groupId}</groupId>\n+          <artifactId>syncope-core</artifactId>\n+          <version>${project.version}</version>\n+          <classifier>classes</classifier>\n+        </dependency>\n+        <dependency>\n+          <groupId>${groupId}</groupId>\n+          <artifactId>syncope-console</artifactId>\n+          <version>${project.version}</version>\n+          <classifier>classes</classifier>\n+        </dependency>\n+        <dependency>\n+          <groupId>${groupId}</groupId>\n+          <artifactId>syncope-enduser</artifactId>\n+          <version>${project.version}</version>\n+          <classifier>classes</classifier>\n+        </dependency>\n+        <dependency>\n+          <groupId>${groupId}</groupId>\n+          <artifactId>syncope-wa</artifactId>\n+          <version>${project.version}</version>\n+          <classifier>classes</classifier>\n+        </dependency>\n+        <dependency>\n+          <groupId>${groupId}</groupId>\n+          <artifactId>syncope-sra</artifactId>\n+          <version>${project.version}</version>\n+        </dependency>\n+      </dependencies>\n+\n+      <build>\n+        <defaultGoal>clean package io.fabric8:docker-maven-plugin:start</defaultGoal>\n+\n+        <plugins>\n+          <plugin>\n+            <groupId>io.fabric8</groupId>\n+            <artifactId>docker-maven-plugin</artifactId>\n+            <configuration>\n+              <verbose>true</verbose>\n+              <images>\n+                <image>\n+                  <alias>postgres</alias>\n+                  <name>postgres:${docker.postgresql.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <env>\n+                      <POSTGRES_DB>syncope</POSTGRES_DB>\n+                      <POSTGRES_USER>syncope</POSTGRES_USER>\n+                      <POSTGRES_PASSWORD>syncope</POSTGRES_PASSWORD>\n+                    </env>\n+                    <wait>\n+                      <log>database system is ready to accept connections</log>\n+                      <time>30000</time>\n+                    </wait>\n+                    <tmpfs>\n+                      <mount>/var/lib/postgresql/data:rw</mount>\n+                    </tmpfs>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                  </run>\n+                </image>\n+\n+                <image>\n+                  <alias>syncope</alias>\n+                  <name>apache/syncope:${syncope.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <dependsOn>\n+                      <container>postgres</container>\n+                    </dependsOn>\n+                    <env>\n+                      <SPRING_PROFILES_ACTIVE>docker,postgresql,all</SPRING_PROFILES_ACTIVE>\n+                      <DB_URL>jdbc:postgresql://postgres:5432/syncope?stringtype=unspecified</DB_URL>\n+                      <DB_USER>syncope</DB_USER>\n+                      <DB_PASSWORD>syncope</DB_PASSWORD>\n+                      <DB_POOL_MAX>10</DB_POOL_MAX>\n+                      <DB_POOL_MIN>2</DB_POOL_MIN>\n+                      <OPENJPA_REMOTE_COMMIT>sjvm</OPENJPA_REMOTE_COMMIT>\n+                      <SERVICE_DISCOVERY_ADDRESS>http://syncope:8080/syncope/rest/</SERVICE_DISCOVERY_ADDRESS>\n+                      <KEYMASTER_ADDRESS>http://syncope:8080/syncope/rest/keymaster</KEYMASTER_ADDRESS>\n+                      <KEYMASTER_USERNAME>${anonymousUser}</KEYMASTER_USERNAME>\n+                      <KEYMASTER_PASSWORD>${anonymousKey}</KEYMASTER_PASSWORD>\n+                      <ANONYMOUS_USER>${anonymousUser}</ANONYMOUS_USER>\n+                      <ANONYMOUS_KEY>${anonymousKey}</ANONYMOUS_KEY>\n+                    </env>\n+                    <volumes>\n+                      <bind>\n+                        <volume>${basedir}/../core/target/classes/domains/MasterContent.xml:/opt/syncope/conf/domains/MasterContent.xml:ro</volume>\n+                        <volume>${settings.localRepository}/${groupId}/syncope-core/${project.version}/syncope-core-${project.version}-classes.jar:/opt/syncope/lib/${groupId}-syncope-core-classes.jar:ro</volume>\n+                      </bind>\n+                    </volumes>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                  </run>\n+                </image>\n+\n+                <image>\n+                  <alias>syncope-console</alias>\n+                  <name>apache/syncope-console:${syncope.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <dependsOn>\n+                      <container>syncope</container>\n+                    </dependsOn>\n+                    <env>\n+                      <JAVA_OPTS>-Dfile.encoding=UTF-8 -Dwicket.ioc.useByteBuddy=true -server -Xms1536m -Xmx1536m \n+                        -XX:NewSize=256m -XX:MaxNewSize=256m -XX:+DisableExplicitGC \n+                        -Djava.security.egd=file:/dev/./urandom \n+                        -Djavax.net.ssl.trustStore=/opt/syncope/conf/keystore.p12 \n+                        -Djavax.net.ssl.trustStorePassword=password</JAVA_OPTS>\n+                      <SPRING_PROFILES_ACTIVE>docker,all</SPRING_PROFILES_ACTIVE>\n+                      <SERVICE_DISCOVERY_ADDRESS>http://syncope-console:8080/syncope-console/</SERVICE_DISCOVERY_ADDRESS>\n+                      <KEYMASTER_ADDRESS>http://syncope:8080/syncope/rest/keymaster</KEYMASTER_ADDRESS>\n+                      <KEYMASTER_USERNAME>${anonymousUser}</KEYMASTER_USERNAME>\n+                      <KEYMASTER_PASSWORD>${anonymousKey}</KEYMASTER_PASSWORD>\n+                      <ANONYMOUS_USER>${anonymousUser}</ANONYMOUS_USER>\n+                      <ANONYMOUS_KEY>${anonymousKey}</ANONYMOUS_KEY>\n+                    </env>\n+                    <volumes>\n+                      <bind>\n+                        <volume>${basedir}/src/test/resources/keystore.p12:/opt/syncope/conf/keystore.p12:ro</volume>\n+                        <volume>${settings.localRepository}/${groupId}/syncope-console/${project.version}/syncope-console-${project.version}-classes.jar:/opt/syncope/lib/${groupId}-syncope-console-classes.jar:ro</volume>\n+                      </bind>\n+                    </volumes>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                    <cmd>wait-for-it syncope:8080 -t 60 -- /opt/syncope/bin/startup.sh</cmd>\n+                  </run>\n+                </image>\n+\n+                <image>\n+                  <alias>syncope-enduser</alias>\n+                  <name>apache/syncope-enduser:${syncope.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <dependsOn>\n+                      <container>syncope</container>\n+                    </dependsOn>\n+                    <env>\n+                      <SPRING_PROFILES_ACTIVE>docker,all</SPRING_PROFILES_ACTIVE>\n+                      <SERVICE_DISCOVERY_ADDRESS>http://syncope-enduser:8080/syncope-console/</SERVICE_DISCOVERY_ADDRESS>\n+                      <KEYMASTER_ADDRESS>http://syncope:8080/syncope/rest/keymaster</KEYMASTER_ADDRESS>\n+                      <KEYMASTER_USERNAME>${anonymousUser}</KEYMASTER_USERNAME>\n+                      <KEYMASTER_PASSWORD>${anonymousKey}</KEYMASTER_PASSWORD>\n+                      <ANONYMOUS_USER>${anonymousUser}</ANONYMOUS_USER>\n+                      <ANONYMOUS_KEY>${anonymousKey}</ANONYMOUS_KEY>\n+                    </env>\n+                    <volumes>\n+                      <bind>\n+                        <volume>${settings.localRepository}/${groupId}/syncope-enduser/${project.version}/syncope-enduser-${project.version}-classes.jar:/opt/syncope/lib/${groupId}-syncope-enduser-classes.jar:ro</volume>\n+                      </bind>\n+                    </volumes>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                    <cmd>wait-for-it syncope:8080 -t 60 -- /opt/syncope/bin/startup.sh</cmd>\n+                  </run>\n+                </image>\n+\n+                <image>\n+                  <alias>syncope-wa</alias>\n+                  <name>apache/syncope-wa:${syncope.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <dependsOn>\n+                      <container>syncope</container>\n+                    </dependsOn>\n+                    <env>\n+                      <SPRING_PROFILES_ACTIVE>docker,docker-https,all</SPRING_PROFILES_ACTIVE>\n+                      <CAS_SERVER_NAME>https://localhost:9443</CAS_SERVER_NAME>\n+                      <SERVICE_DISCOVERY_ADDRESS>https://syncope-wa:9443/syncope-wa/</SERVICE_DISCOVERY_ADDRESS>\n+                      <KEYMASTER_ADDRESS>http://syncope:8080/syncope/rest/keymaster</KEYMASTER_ADDRESS>\n+                      <KEYMASTER_USERNAME>${anonymousUser}</KEYMASTER_USERNAME>\n+                      <KEYMASTER_PASSWORD>${anonymousKey}</KEYMASTER_PASSWORD>\n+                      <ANONYMOUS_USER>${anonymousUser}</ANONYMOUS_USER>\n+                      <ANONYMOUS_KEY>${anonymousKey}</ANONYMOUS_KEY>\n+                    </env>\n+                    <volumes>\n+                      <bind>\n+                        <volume>${basedir}/../wa/src/test/resources/wa-docker-https.properties:/opt/syncope/conf/wa-docker-https.properties:ro</volume>\n+                        <volume>${basedir}/src/test/resources/keystore.p12:/opt/syncope/conf/keystore.p12:ro</volume>\n+                        <volume>${settings.localRepository}/${groupId}/syncope-wa/${project.version}/syncope-wa-${project.version}-classes.jar:/opt/syncope/lib/${groupId}-syncope-wa-classes.jar:ro</volume>\n+                      </bind>\n+                    </volumes>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                    <ports>\n+                      <port>9443:9443</port>\n+                    </ports>\n+                    <cmd>wait-for-it syncope:8080 -t 60 -- /opt/syncope/bin/startup.sh</cmd>\n+                  </run>\n+                </image>\n+\n+                <image>\n+                  <alias>syncope-sra</alias>\n+                  <name>apache/syncope-sra:${syncope.version}</name>\n+                  <run>\n+                    <containerNamePattern>%a</containerNamePattern>\n+                    <dependsOn>\n+                      <container>syncope</container>\n+                    </dependsOn>\n+                    <env>\n+                      <SPRING_PROFILES_ACTIVE>docker,all</SPRING_PROFILES_ACTIVE>\n+                      <SERVICE_DISCOVERY_ADDRESS>http://syncope-sra:8080/</SERVICE_DISCOVERY_ADDRESS>\n+                      <KEYMASTER_ADDRESS>http://syncope:8080/syncope/rest/keymaster</KEYMASTER_ADDRESS>\n+                      <KEYMASTER_USERNAME>${anonymousUser}</KEYMASTER_USERNAME>\n+                      <KEYMASTER_PASSWORD>${anonymousKey}</KEYMASTER_PASSWORD>\n+                      <ANONYMOUS_USER>${anonymousUser}</ANONYMOUS_USER>\n+                      <ANONYMOUS_KEY>${anonymousKey}</ANONYMOUS_KEY>\n+                    </env>\n+                    <volumes>\n+                      <bind>\n+                        <volume>${settings.localRepository}/${groupId}/syncope-sra/${project.version}/syncope-sra-${project.version}.jar:/opt/syncope/lib/${groupId}-syncope-sra.jar:ro</volume>\n+                      </bind>\n+                    </volumes>\n+                    <network>\n+                      <name>archetype</name>\n+                      <mode>custom</mode>\n+                    </network>\n+                    <cmd>wait-for-it syncope:8080 -t 60 -- /opt/syncope/bin/startup.sh</cmd>\n+                  </run>\n+                </image>\n+              </images>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n   </profiles>\n </project>"},{"sha":"e00adc1f14db2dfb294807a1e7581e63a1970b46","filename":"archetype/src/main/resources/archetype-resources/fit/src/test/resources/keystore.p12","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fsrc%2Ftest%2Fresources%2Fkeystore.p12","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fsrc%2Ftest%2Fresources%2Fkeystore.p12","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Ffit%2Fsrc%2Ftest%2Fresources%2Fkeystore.p12?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f"},{"sha":"eecb56d6cdc8aaf0b600ce0c01bde995cdd77c13","filename":"archetype/src/main/resources/archetype-resources/sra/pom.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fsra%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fsra%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fsra%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -64,6 +64,7 @@ under the License.\n         <configuration>\n           <mainClass>org.apache.syncope.sra.SyncopeSRAApplication</mainClass>\n           <layout>ZIP</layout>\n+          <classifier>exec</classifier>\n         </configuration>\n         <executions>\n           <execution>"},{"sha":"cab9c2420c1de411a6fa6d7bc749b0076eadd110","filename":"archetype/src/main/resources/archetype-resources/wa/pom.xml","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fpom.xml?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -135,5 +135,21 @@ under the License.\n         </plugins>\n       </build>\n     </profile>\n+\n+    <profile>\n+      <id>docker</id>\n+\n+      <build>\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-war-plugin</artifactId>\n+            <configuration>\n+              <attachClasses>true</attachClasses>\n+            </configuration>\n+          </plugin>\n+        </plugins>\n+      </build>\n+    </profile>\n   </profiles>\n </project>"},{"sha":"965bee76062c052d1bcae82b15c2323eedda90d9","filename":"archetype/src/main/resources/archetype-resources/wa/src/test/resources/wa-docker-https.properties","status":"added","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fsrc%2Ftest%2Fresources%2Fwa-docker-https.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fsrc%2Ftest%2Fresources%2Fwa-docker-https.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fwa%2Fsrc%2Ftest%2Fresources%2Fwa-docker-https.properties?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -0,0 +1,6 @@\n+server.port=9443\n+server.ssl.key-store=/opt/syncope/conf/keystore.p12\n+server.ssl.key-store-type=PKCS12\n+server.ssl.key-store-password=password\n+server.ssl.key-alias=tomcat\n+server.ssl.key-password=password"},{"sha":"566a6c9ca2463a30aa13e7ef1f0525d0285d1755","filename":"docker/sra/src/main/resources/Dockerfile","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -39,6 +39,6 @@ COPY startup.sh /opt/syncope/bin\n RUN chmod 755 /opt/syncope/bin/startup.sh\n CMD [\"/opt/syncope/bin/startup.sh\"]\n \n-RUN curl -o /usr/local/bin/wait-for-it https://github.com/vishnubob/wait-for-it/blob/master/wait-for-it.sh && chmod 755 /usr/local/bin/wait-for-it\n+RUN curl -o /usr/local/bin/wait-for-it https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh && chmod 755 /usr/local/bin/wait-for-it\n \n EXPOSE 8080"},{"sha":"457ffd117af40ea3daf446992472abfa867f62b2","filename":"src/main/asciidoc/getting-started/obtain.adoc","status":"modified","additions":73,"deletions":2,"changes":75,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/src%2Fmain%2Fasciidoc%2Fgetting-started%2Fobtain.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/src%2Fmain%2Fasciidoc%2Fgetting-started%2Fobtain.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Fgetting-started%2Fobtain.adoc?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -642,8 +642,8 @@ $ mvn -P embedded,all\n ===== Paths and Components\n \n [WARNING]\n-While accessing the URLs below, your browser will warn that the presented TLS certificate is invalid: it is safe to\n-just ignore the message, take the risk and discover how deep does the rabbit hole go. Not for production, of course.\n+While accessing some of the URLs below, your browser will warn that the presented TLS certificate is invalid: it is safe\n+to just ignore the message, take the risk and discover how deep does the rabbit hole go. Not for production, of course.\n \n [cols=\"1,2\"]\n |===\n@@ -701,3 +701,74 @@ You can configure any LDAP client (such as http://jxplorer.org/[JXplorer^], for\n  Click 'Connect' button\n \n |===\n+\n+==== Docker Mode\n+\n+It is possible to build and run projects generated from Maven archetype by configuring and extending the published\n+<<docker-images>>.\n+\n+From the top-level directory of your project, execute:\n+\n+[source,bash]\n+$ mvn -P docker,all clean install\n+\n+then, from the `fit` subdirectory, execute:\n+\n+[source,bash]\n+$ mvn -P docker\n+\n+[TIP]\n+The settings shown in `fit/pom.xml` under the `docker` profile can be taken as reference to orchestrate actual\n+deployments.\n+\n+===== Paths and Components\n+\n+[WARNING]\n+While accessing some of the URLs below, your browser will warn that the presented TLS certificate is invalid: it is safe\n+to just ignore the message, take the risk and discover how deep does the rabbit hole go. Not for production, of course.\n+\n+[NOTE]\n+====\n+The hostnames below, e.g.\n+\n+. `syncope`\n+. `syncope-console`\n+. `syncope-enduser`\n+. `syncope-sra`\n+\n+are to be manually resolved to their respective local IP addresses in use by your current deployment.\n+\n+For example:\n+\n+[source,bash]\n+----\n+ $ docker inspect -f \\\n+  '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' \\\n+  syncope\n+----\n+\n+will return the actual IP address assigned to the `syncope` container.\n+====\n+\n+The following services will be available:\n+\n+[cols=\"1,2\"]\n+|===\n+\n+| REST API reference\n+| http://syncope:8080/syncope/\n+\n+| Admin UI\n+| http://syncope-console:8080/syncope-console/ +\n+Credentials: `admin` / `password`\n+\n+| End-user UI\n+| http://syncope-enduser:8080/syncope-enduser/\n+\n+| WA\n+| https://localhost:9443/syncope-wa/\n+\n+| SRA\n+| http://syncope-sra:8080/\n+\n+|==="},{"sha":"fc7b0f2713b9073114c40f7369390f61d2716304","filename":"src/main/asciidoc/reference-guide/usage/customization.adoc","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43cdad3b52ff54f146b75a29be0d2421b4caa33f/src%2Fmain%2Fasciidoc%2Freference-guide%2Fusage%2Fcustomization.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43cdad3b52ff54f146b75a29be0d2421b4caa33f/src%2Fmain%2Fasciidoc%2Freference-guide%2Fusage%2Fcustomization.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fusage%2Fcustomization.adoc?ref=43cdad3b52ff54f146b75a29be0d2421b4caa33f","patch":"@@ -95,6 +95,7 @@ straightforward: just add the `<profile>` below to `fit/pom.xml`:\n               <cargo.jvmargs>\n                 -Xdebug\n                 -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n\n+                -Dwicket.ioc.useByteBuddy=true\n                 -Dspring.profiles.active=embedded\n                 -Xmx1024m -Xms512m\n               </cargo.jvmargs>"}]}