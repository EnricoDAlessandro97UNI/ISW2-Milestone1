{"sha":"65f506efd5e86908663228760b30a97fca51e522","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjY1ZjUwNmVmZDVlODY5MDg2NjMyMjg3NjBiMzBhOTdmY2E1MWU1MjI=","commit":{"author":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2014-06-25T08:57:51Z"},"committer":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2014-06-25T08:57:51Z"},"message":"[SYNCOPE-473] changed default Unmatching rule for sync task to PROVISION\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1605296 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"eee34b8abe9efd579051886c181c102ba64cc922","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/eee34b8abe9efd579051886c181c102ba64cc922"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/65f506efd5e86908663228760b30a97fca51e522","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/65f506efd5e86908663228760b30a97fca51e522","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/65f506efd5e86908663228760b30a97fca51e522","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/65f506efd5e86908663228760b30a97fca51e522/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"088f5646df41b85523a2a7b8e5ccd0ec85222298","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/088f5646df41b85523a2a7b8e5ccd0ec85222298","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/088f5646df41b85523a2a7b8e5ccd0ec85222298"}],"stats":{"total":59,"additions":44,"deletions":15},"files":[{"sha":"41218945ae14d190b465d1e4427a724f4abad165","filename":"console/src/main/java/org/apache/syncope/console/pages/AbstractSyncTaskModalPage.java","status":"modified","additions":7,"deletions":11,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java?ref=65f506efd5e86908663228760b30a97fca51e522","patch":"@@ -53,6 +53,10 @@ public abstract class AbstractSyncTaskModalPage extends AbstractSchedTaskModalPa\n \n     private static final long serialVersionUID = 2148403203517274669L;\n \n+    protected AjaxDropDownChoicePanel<MatchingRule> matchingRule;\n+\n+    protected AjaxDropDownChoicePanel<UnmatchingRule> unmatchingRule;\n+\n     public AbstractSyncTaskModalPage(final ModalWindow window, final AbstractSyncTaskTO taskTO,\n             final PageReference pageRef) {\n \n@@ -77,7 +81,7 @@ protected List<String> load() {\n         final AjaxDropDownChoicePanel<String> resource = new AjaxDropDownChoicePanel<String>(\"resource\",\n                 getString(\"resourceName\"), new PropertyModel<String>(taskTO, \"resource\"));\n         resource.setChoices(allResources.getObject());\n-        resource.setChoiceRenderer(new SelectChoiceRenderer());\n+        resource.setChoiceRenderer(new SelectChoiceRenderer<String>());\n         resource.addRequiredLabel();\n         resource.setEnabled(taskTO.getId() == 0);\n         resource.setStyleSheet(\"ui-widget-content ui-corner-all long_dynamicsize\");\n@@ -180,22 +184,14 @@ public void onClick(final AjaxRequestTarget target) {\n                 new PropertyModel<Boolean>(taskTO, \"syncStatus\"));\n         profile.add(syncStatus);\n \n-        final AjaxDropDownChoicePanel<MatchingRule> matchingRule = new AjaxDropDownChoicePanel<MatchingRule>(\n+        matchingRule = new AjaxDropDownChoicePanel<MatchingRule>(\n                 \"matchingRule\", \"matchingRule\", new PropertyModel<MatchingRule>(taskTO, \"matchigRule\"));\n         matchingRule.setChoices(Arrays.asList(MatchingRule.values()));\n         ((DropDownChoice) matchingRule.getField()).setNullValid(false);\n-        ((DropDownChoice) matchingRule.getField()).setDefaultModelObject(taskTO.getMatchigRule() == null\n-                ? MatchingRule.UPDATE\n-                : taskTO.getMatchigRule());\n-        profile.add(matchingRule);\n \n-        final AjaxDropDownChoicePanel<UnmatchingRule> unmatchingRule = new AjaxDropDownChoicePanel<UnmatchingRule>(\n+        unmatchingRule = new AjaxDropDownChoicePanel<UnmatchingRule>(\n                 \"unmatchingRule\", \"unmatchingRule\", new PropertyModel<UnmatchingRule>(taskTO, \"unmatchigRule\"));\n         unmatchingRule.setChoices(Arrays.asList(UnmatchingRule.values()));\n         ((DropDownChoice) unmatchingRule.getField()).setNullValid(false);\n-        ((DropDownChoice) unmatchingRule.getField()).setDefaultModelObject(taskTO.getUnmatchigRule() == null\n-                ? UnmatchingRule.ASSIGN\n-                : taskTO.getUnmatchigRule());\n-        profile.add(unmatchingRule);\n     }\n }"},{"sha":"a9141a2a407d76a3144d5fe46d51788094b1384b","filename":"console/src/main/java/org/apache/syncope/console/pages/PushTaskModalPage.java","status":"modified","additions":22,"deletions":4,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java?ref=65f506efd5e86908663228760b30a97fca51e522","patch":"@@ -18,18 +18,24 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import java.util.Arrays;\n import org.apache.syncope.common.to.PushTaskTO;\n import org.apache.syncope.common.to.SchedTaskTO;\n+import org.apache.syncope.common.types.MatchingRule;\n+import org.apache.syncope.common.types.UnmatchingRule;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.pages.panels.RoleSearchPanel;\n import org.apache.syncope.console.pages.panels.UserSearchPanel;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n+import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.PropertyModel;\n \n /**\n  * Modal window with Push Task form.\n@@ -38,18 +44,30 @@ public class PushTaskModalPage extends AbstractSyncTaskModalPage {\n \n     private static final long serialVersionUID = 2148403203517274669L;\n \n-    final UserSearchPanel userFilter;\n+    private final UserSearchPanel userFilter;\n \n-    final RoleSearchPanel roleFilter;\n+    private final RoleSearchPanel roleFilter;\n \n-    final AjaxCheckBoxPanel checkUserFilter;\n+    private final AjaxCheckBoxPanel checkUserFilter;\n \n-    final AjaxCheckBoxPanel checkRoleFilter;\n+    private final AjaxCheckBoxPanel checkRoleFilter;\n \n     public PushTaskModalPage(final ModalWindow window, final PushTaskTO taskTO, final PageReference pageRef) {\n \n         super(window, taskTO, pageRef);\n \n+        // set default Matching rule\n+        ((DropDownChoice) matchingRule.getField()).setDefaultModelObject(taskTO.getMatchigRule() == null\n+                ? MatchingRule.UPDATE\n+                : taskTO.getMatchigRule());\n+        profile.add(matchingRule);\n+\n+        // set default Unmatching rule\n+        ((DropDownChoice) unmatchingRule.getField()).setDefaultModelObject(taskTO.getUnmatchigRule() == null\n+                ? UnmatchingRule.ASSIGN\n+                : taskTO.getUnmatchigRule());\n+        profile.add(unmatchingRule);\n+\n         final WebMarkupContainer filterContainer = new WebMarkupContainer(\"filterContainer\");\n         filterContainer.setOutputMarkupId(true);\n "},{"sha":"3c10f8da2a37ef2f5d2c845e1c2b7292c82b7b85","filename":"console/src/main/java/org/apache/syncope/console/pages/SyncTaskModalPage.java","status":"modified","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/65f506efd5e86908663228760b30a97fca51e522/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java?ref=65f506efd5e86908663228760b30a97fca51e522","patch":"@@ -20,9 +20,12 @@\n \n import org.apache.syncope.common.to.SchedTaskTO;\n import org.apache.syncope.common.to.SyncTaskTO;\n+import org.apache.syncope.common.types.MatchingRule;\n+import org.apache.syncope.common.types.UnmatchingRule;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.model.PropertyModel;\n \n /**\n@@ -36,6 +39,18 @@ public SyncTaskModalPage(final ModalWindow window, final SyncTaskTO taskTO, fina\n \n         super(window, taskTO, pageRef);\n \n+        // set default Matching rule\n+        ((DropDownChoice) matchingRule.getField()).setDefaultModelObject(taskTO.getMatchigRule() == null\n+                ? MatchingRule.UPDATE\n+                : taskTO.getMatchigRule());\n+        profile.add(matchingRule);\n+\n+        // set default Unmatching rule\n+        ((DropDownChoice) unmatchingRule.getField()).setDefaultModelObject(taskTO.getUnmatchigRule() == null\n+                ? UnmatchingRule.PROVISION\n+                : taskTO.getUnmatchigRule());\n+        profile.add(unmatchingRule);\n+\n         final AjaxCheckBoxPanel fullReconciliation = new AjaxCheckBoxPanel(\"fullReconciliation\",\n                 getString(\"fullReconciliation\"), new PropertyModel<Boolean>(taskTO, \"fullReconciliation\"));\n         profile.add(fullReconciliation);"}]}