{"sha":"265b2a7d7b72634716c58be8d9890a0244888367","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjI2NWIyYTdkN2I3MjYzNDcxNmM1OGJlOGQ5ODkwYTAyNDQ4ODgzNjc=","commit":{"author":{"name":"Marco Di Sabatino Di Diodoro","email":"marco.disabatino@tirasa.net","date":"2017-12-14T13:06:50Z"},"committer":{"name":"Marco Di Sabatino Di Diodoro","email":"marco.disabatino@tirasa.net","date":"2017-12-14T13:08:23Z"},"message":"[SYNCOPE-1251] Fix Update Activiti service task","tree":{"sha":"b3cf49244f312a0b48097ed8e299ed0eb007bd07","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b3cf49244f312a0b48097ed8e299ed0eb007bd07"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/265b2a7d7b72634716c58be8d9890a0244888367","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/265b2a7d7b72634716c58be8d9890a0244888367","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/265b2a7d7b72634716c58be8d9890a0244888367","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/265b2a7d7b72634716c58be8d9890a0244888367/comments","author":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"committer":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"parents":[{"sha":"e2f36939957970ef39b822c611b65d17bfcec1ec","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e2f36939957970ef39b822c611b65d17bfcec1ec","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e2f36939957970ef39b822c611b65d17bfcec1ec"}],"stats":{"total":8,"additions":6,"deletions":2},"files":[{"sha":"b694ee1b0be93e31ca6b49eac34abd13ec35a3e5","filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDirectoryPanel.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/265b2a7d7b72634716c58be8d9890a0244888367/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/265b2a7d7b72634716c58be8d9890a0244888367/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java?ref=265b2a7d7b72634716c58be8d9890a0244888367","patch":"@@ -214,7 +214,7 @@ public void onClick(final AjaxRequestTarget target, final WorkflowFormTO ignore)\n                     previousUserTO = formTO.getUserTO();\n                     formTO.getUserTO().setKey(formTO.getUserPatch().getKey());\n                     formTO.getUserTO().setPassword(null);\n-                    newUserTO = AnyOperations.patch(formTO.getUserTO(), formTO.getUserPatch()); \n+                    newUserTO = AnyOperations.patch(formTO.getUserTO(), formTO.getUserPatch());\n                 }\n \n                 AjaxWizard.EditItemActionEvent<UserTO> editItemActionEvent =\n@@ -352,7 +352,10 @@ protected Serializable onApplyInternal(final AnyWrapper<UserTO> modelObject) {\n                     actual.setEntity(inner);\n                 } else {\n                     actual = userRestClient.update(getOriginalItem().getInnerObject().getETagValue(), patch);\n-                    claimForm(restClient.getFormForUser(actual.getEntity().getKey()).getTaskId());\n+                    WorkflowFormTO workFlowTO = restClient.getFormForUser(actual.getEntity().getKey());\n+                    if (workFlowTO != null) {\n+                        claimForm(workFlowTO.getTaskId());\n+                    }\n                 }\n \n             }"},{"sha":"c619211c4ba61ce4f09a1270eed00abc5ffad17f","filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Update.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/265b2a7d7b72634716c58be8d9890a0244888367/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FUpdate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/265b2a7d7b72634716c58be8d9890a0244888367/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FUpdate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FUpdate.java?ref=265b2a7d7b72634716c58be8d9890a0244888367","patch":"@@ -63,6 +63,7 @@ protected void doExecute(final String executionId) {\n \n         // report updated user and propagation by resource as result\n         engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n+        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER_TO, updated);\n         engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER_PATCH, userPatch);\n         engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.PROP_BY_RESOURCE, propByRes);\n     }"}]}