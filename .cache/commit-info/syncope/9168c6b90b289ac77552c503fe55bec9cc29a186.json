{"sha":"9168c6b90b289ac77552c503fe55bec9cc29a186","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjkxNjhjNmI5MGIyODlhYzc3NTUyYzUwM2ZlNTViZWM5Y2MyOWExODY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-16T11:49:12Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-16T11:49:12Z"},"message":"Trying to be compliant with Glassfish 2.1.1\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246090 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d6c4ebd01e126462921c329e2897566ca376847b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d6c4ebd01e126462921c329e2897566ca376847b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9168c6b90b289ac77552c503fe55bec9cc29a186","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9168c6b90b289ac77552c503fe55bec9cc29a186","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9168c6b90b289ac77552c503fe55bec9cc29a186","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9168c6b90b289ac77552c503fe55bec9cc29a186/comments","author":null,"committer":null,"parents":[{"sha":"503882dc8760ee2fe1b58402170b394123fea4fe","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/503882dc8760ee2fe1b58402170b394123fea4fe","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/503882dc8760ee2fe1b58402170b394123fea4fe"}],"stats":{"total":89,"additions":58,"deletions":31},"files":[{"sha":"91933c64cf2831cbee777e5b9e240f9e85377137","filename":"core/pom.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -115,6 +115,11 @@\n             <groupId>org.hibernate</groupId>\n             <artifactId>hibernate-entitymanager</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.hibernate.javax.persistence</groupId>\n+            <artifactId>hibernate-jpa-2.0-api</artifactId>\n+            <scope>provided</scope>\n+        </dependency>\n         <dependency>\n             <groupId>org.jasypt</groupId>\n             <artifactId>jasypt</artifactId>"},{"sha":"ae55065bdedcb379dd2e805a22242709bc09066a","filename":"core/src/main/java/org/syncope/core/persistence/beans/Attribute.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttribute.java?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -34,7 +34,8 @@ public class Attribute extends AbstractBaseBean {\n     private Long id;\n     @ManyToOne(fetch = FetchType.EAGER, optional = false)\n     private AttributeSchema schema;\n-    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n+    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER,\n+    mappedBy = \"attribute\", orphanRemoval = true)\n     private Set<AttributeValue> values;\n \n     protected Attribute() {"},{"sha":"e7105d1e595b0568a20bb0806b0d9e7bf9185a6a","filename":"core/src/main/java/org/syncope/core/persistence/beans/AttributeSchema.java","status":"modified","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeSchema.java?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -20,10 +20,12 @@\n import java.text.DecimalFormat;\n import java.text.Format;\n import java.text.SimpleDateFormat;\n+import java.util.Set;\n import javax.persistence.Column;\n import javax.persistence.Entity;\n import javax.persistence.Enumerated;\n import javax.persistence.Id;\n+import javax.persistence.OneToMany;\n import javax.persistence.Transient;\n import org.syncope.core.persistence.AttributeType;\n import org.syncope.core.persistence.validation.AttributeBasicValidator;\n@@ -42,6 +44,8 @@ public class AttributeSchema extends AbstractBaseBean {\n     private Boolean multivalue;\n     private String conversionPattern;\n     private String validatorClass;\n+    @OneToMany(orphanRemoval = true, mappedBy = \"schema\")\n+    private Set<Attribute> attributes;\n     @Transient\n     private AttributeValidator validator;\n \n@@ -141,6 +145,24 @@ public void setConversionPattern(String conversionPattern) {\n         this.conversionPattern = conversionPattern;\n     }\n \n+    public boolean addAttribute(Attribute attribute) {\n+        attribute.setSchema(this);\n+        return attributes.add(attribute);\n+    }\n+\n+    public boolean removeAttribute(Attribute attribute) {\n+        attribute.setSchema(null);\n+        return attributes.remove(attribute);\n+    }\n+\n+    public Set<Attribute> getAttributes() {\n+        return attributes;\n+    }\n+\n+    public void setAttributes(Set<Attribute> attributes) {\n+        this.attributes = attributes;\n+    }\n+\n     public <T extends Format> T getFormatter(Class<T> reference) {\n         T result = null;\n "},{"sha":"95130e2e56319a9f2247e48f93599f679cb35f96","filename":"core/src/main/java/org/syncope/core/persistence/beans/AttributeValue.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeValue.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeValue.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAttributeValue.java?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -20,6 +20,7 @@\n import javax.persistence.Id;\n import javax.persistence.Inheritance;\n import javax.persistence.InheritanceType;\n+import javax.persistence.ManyToOne;\n \n @Entity\n @Inheritance(strategy = InheritanceType.JOINED)\n@@ -28,11 +29,21 @@ public abstract class AttributeValue extends AbstractBaseBean {\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     protected Long id;\n+    @ManyToOne\n+    private Attribute attribute;\n \n     public Long getId() {\n         return id;\n     }\n \n+    public Attribute getAttribute() {\n+        return attribute;\n+    }\n+\n+    public void setAttribute(Attribute Attribute) {\n+        this.attribute = Attribute;\n+    }\n+\n     @Override\n     public boolean equals(Object obj) {\n         if (obj == null) {"},{"sha":"c3ac75c0f732112a5f2c6374f1d9cb4075174f6b","filename":"core/src/test/resources/dbunitTestData.xml","status":"modified","additions":10,"deletions":29,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -45,16 +45,16 @@\n     <Attribute id=\"700\" schema_name=\"icon\"/>\n     <Attribute id=\"800\" schema_name=\"show\"/>\n \n-    <AttributeValue id=\"10\"/>\n-    <AttributeValue id=\"11\"/>\n-    <AttributeValue id=\"20\"/>\n-    <AttributeValue id=\"21\"/>\n-    <AttributeValue id=\"30\"/>\n-    <AttributeValue id=\"31\"/>\n-    <AttributeValue id=\"40\"/>\n-    <AttributeValue id=\"41\"/>\n-    <AttributeValue id=\"42\"/>\n-\n+    <AttributeValue attribute_id=\"100\" id=\"10\"/>\n+    <AttributeValue attribute_id=\"200\" id=\"20\"/>\n+    <AttributeValue attribute_id=\"200\" id=\"21\"/>\n+    <AttributeValue attribute_id=\"300\" id=\"11\"/>\n+    <AttributeValue attribute_id=\"400\" id=\"30\"/>\n+    <AttributeValue attribute_id=\"500\" id=\"31\"/>\n+    <AttributeValue attribute_id=\"600\" id=\"40\"/>\n+    <AttributeValue attribute_id=\"700\" id=\"41\"/>\n+    <AttributeValue attribute_id=\"800\" id=\"42\"/>\n+        \n     <AttributeValueAsString id=\"10\" actualValue=\"chicchiricco\"/>\n     <AttributeValueAsString id=\"11\" actualValue=\"fabio.martelli\"/>\n \n@@ -69,25 +69,6 @@\n \n     <AttributeValueAsBoolean id=\"42\" actualValue=\"TRUE\"/>\n \n-    <Attribute_AttributeValue\n-        Attribute_id=\"100\" values_id=\"10\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"200\" values_id=\"20\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"200\" values_id=\"21\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"300\" values_id=\"11\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"400\" values_id=\"30\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"500\" values_id=\"31\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"600\" values_id=\"40\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"700\" values_id=\"41\"/>\n-    <Attribute_AttributeValue\n-        Attribute_id=\"800\" values_id=\"42\"/>\n-\n     <SyncopeUser_Attribute SyncopeUser_id='1'\n                            attributes_id='100'/>\n     <SyncopeUser_Attribute SyncopeUser_id='1'"},{"sha":"eb1e9d59a88691070d79ffc50a8151eb43171bce","filename":"pom.xml","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9168c6b90b289ac77552c503fe55bec9cc29a186/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9168c6b90b289ac77552c503fe55bec9cc29a186/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=9168c6b90b289ac77552c503fe55bec9cc29a186","patch":"@@ -110,6 +110,7 @@\n         <xstream.version>1.3.1</xstream.version>\n \n         <hibernate.version>3.5.2-Final</hibernate.version>\n+        <jpa-2.0-api.version>1.0.0.Final</jpa-2.0-api.version>\n         <jasypt.version>1.6</jasypt.version>\n \n         <postgresql.jdbc-driver.version>8.1-408.jdbc3</postgresql.jdbc-driver.version>\n@@ -124,7 +125,7 @@\n \n         <dbunit.version>2.4.7</dbunit.version>\n \n-        <hsqldb.version>1.8.0.7</hsqldb.version>\n+        <hsqldb.version>1.8.0.10</hsqldb.version>\n \n         <jetty.version>6.1.24</jetty.version>\n \n@@ -174,6 +175,12 @@\n                 <artifactId>hibernate-entitymanager</artifactId>\n                 <version>${hibernate.version}</version>\n             </dependency>\n+            <dependency>\n+                <groupId>org.hibernate.javax.persistence</groupId>\n+                <artifactId>hibernate-jpa-2.0-api</artifactId>\n+                <version>${jpa-2.0-api.version}</version>\n+                <scope>provided</scope>\n+            </dependency>\n \n             <dependency>\n                 <groupId>org.jasypt</groupId>"}]}