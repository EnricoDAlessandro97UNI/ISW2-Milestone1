{"sha":"303f75dde3ea9f0c831801984576104ba6c8f599","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjMwM2Y3NWRkZTNlYTlmMGM4MzE4MDE5ODQ1NzYxMDRiYTZjOGY1OTk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-06-07T10:20:45Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-06-07T10:20:45Z"},"message":"[SYNCOPE-390] Merge from 1_1_X\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1490566 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0b334357e0af7b5360937ae6ee2126c099dc0b7f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0b334357e0af7b5360937ae6ee2126c099dc0b7f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/303f75dde3ea9f0c831801984576104ba6c8f599","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/303f75dde3ea9f0c831801984576104ba6c8f599","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/303f75dde3ea9f0c831801984576104ba6c8f599","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/303f75dde3ea9f0c831801984576104ba6c8f599/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"5033441ebf282fb17ae59fcd2fa0a5802b88574e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5033441ebf282fb17ae59fcd2fa0a5802b88574e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5033441ebf282fb17ae59fcd2fa0a5802b88574e"},{"sha":"4c61e952f9da7b60256a5f63179b26b96ce30ff3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4c61e952f9da7b60256a5f63179b26b96ce30ff3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4c61e952f9da7b60256a5f63179b26b96ce30ff3"}],"stats":{"total":601,"additions":351,"deletions":250},"files":[{"sha":"0c3dd02eabad83cbfd6a4275df063503365e162c","filename":"core/src/main/java/org/apache/syncope/core/report/StaticReportlet.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Freport%2FStaticReportlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Freport%2FStaticReportlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Freport%2FStaticReportlet.java?ref=303f75dde3ea9f0c831801984576104ba6c8f599","patch":"@@ -32,7 +32,7 @@ public void doExtract(final ContentHandler handler) throws SAXException, ReportE\n \n         if (StringUtils.hasText(conf.getStringField())) {\n             handler.startElement(\"\", \"\", \"string\", null);\n-            handler.characters(conf.getStringField().toCharArray(), 0, conf.getStringField().length() - 1);\n+            handler.characters(conf.getStringField().toCharArray(), 0, conf.getStringField().length());\n             handler.endElement(\"\", \"\", \"string\");\n         }\n "},{"sha":"419fd42c202c1d3a1473869762bd9e1ce9c9c0b9","filename":"core/src/main/resources/report/userReportlet2fo.xsl","status":"modified","additions":199,"deletions":166,"changes":365,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl?ref=303f75dde3ea9f0c831801984576104ba6c8f599","patch":"@@ -24,192 +24,225 @@ under the License.\n                 version=\"1.0\">\n \n   <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n-\n-    <fo:block font-size=\"14pt\" font-weight=\"bold\" space-after=\"0.5cm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n-\n+   \n+    <fo:block font-size=\"16pt\" font-weight=\"bold\" space-after=\"0.5cm\" space-before=\"5mm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n+        \n     <xsl:for-each select=\"user\">\n-      <fo:block font-size=\"12pt\" font-weight=\"bold\">User <xsl:value-of select=\"@username\"/></fo:block>\n-\n-      <fo:table table-layout=\"fixed\">\n-\t<fo:table-column/>\n-\t<fo:table-column/>\n-\t<fo:table-body>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Status:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@status\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Creation Date:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@creationDate\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Last Login Date:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@lastLoginDate\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Change Password Date:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@changePwdDate\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Password History Size:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@passwordHistorySize\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t  <fo:table-row>\n-\t    <fo:table-cell>\n-\t      <fo:block>Number of Failed Login Attempts:</fo:block>\n-\t    </fo:table-cell>\n-\t    <fo:table-cell>\n-\t      <fo:block><xsl:value-of select=\"@failedLoginCount\"/></fo:block>\n-\t    </fo:table-cell>\n-\t  </fo:table-row>\n-\t</fo:table-body>\n+      <fo:block font-size=\"14pt\" font-weight=\"bold\" space-before=\"15mm\" space-after=\"5mm\" background-color=\"(#8888ff)\">User <xsl:value-of select=\"@username\"/></fo:block>\n+      <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n+        <fo:table-column/>\n+        <fo:table-column/>\n+        <fo:table-body>\n+          <fo:table-row background-color=\"(#ccccff)\">\n+            <fo:table-cell>\n+              <fo:block>Status:</fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block font-style=\"italic\">\n+                <xsl:value-of select=\"@status\"/>\n+              </fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+          <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Creation Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@creationDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Last Login Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@lastLoginDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Change Password Date:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@changePwdDate\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Password History Size:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@passwordHistorySize\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n+            <fo:table-row background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>Number of Failed Login Attempts:</fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <fo:block font-style=\"italic\">\n+                  <xsl:value-of select=\"@failedLoginCount\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+        </fo:table-body>\n       </fo:table>\n-\n-      <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-      </xsl:call-template>\n-\n-      <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-      </xsl:call-template>\n-\n       <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n       </xsl:call-template>\n-\n-      <fo:block font-size=\"11pt\" font-weight=\"bold\">Memberships</fo:block>\n-      <xsl:for-each select=\"memberships/membership\">\n-\t<fo:block font-size=\"10pt\" font-weight=\"bold\">Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</fo:block>\n-      </xsl:for-each>\n-      <fo:block start-indent=\"1cm\" space-after=\"0.5cm\">\n-\t<xsl:call-template name=\"attributes\">\n-\t  <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-\t  <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-\t</xsl:call-template>\n-\t\n-\t<xsl:call-template name=\"attributes\">\n-\t  <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-\t  <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-\t</xsl:call-template>\n-\t\n-\t<xsl:call-template name=\"attributes\">\n-\t  <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-\t  <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-\t</xsl:call-template>\n-\t\n-\t<xsl:call-template name=\"resources\">\n-\t  <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-\t</xsl:call-template>\n-      </fo:block>\n-      \n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n+          <fo:block font-size=\"11pt\" font-weight=\"bold\">Memberships</fo:block>\n+          <xsl:for-each select=\"memberships/membership\">\n+            <fo:block font-size=\"10pt\" font-weight=\"bold\" space-before=\"2mm\">Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</fo:block>\n+            <fo:block start-indent=\"1cm\" space-before=\"3mm\" space-after=\"0.5cm\">\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS ROLE HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:call-template name=\"resources\">\n+                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+              </xsl:call-template>\n+            </fo:block>\n+          </xsl:for-each>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T BEEN ASSIGNED TO ANY ROLE</fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n       <xsl:call-template name=\"resources\">\n-\t<xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n       </xsl:call-template>\n-      \n-      <fo:block width=\"100%\">\n-\t<fo:leader leader-pattern=\"rule\" rule-style=\"solid\" leader-length=\"100%\"/>\n-      </fo:block>\n     </xsl:for-each>\n   </xsl:template>\n-\n   <xsl:template name=\"attributes\">\n     <xsl:param name=\"label\"/>\n     <xsl:param name=\"node\"/>\n-\n-    <fo:block font-size=\"11pt\" font-weight=\"bold\"><xsl:value-of select=\"$label\"/></fo:block>\n-    \n-    <fo:table table-layout=\"fixed\" space-after=\"0.5cm\">\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\">\n+      <xsl:value-of select=\"$label\"/>\n+    </fo:block>\n+    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n       <fo:table-column/>\n       <fo:table-column/>\n-\n       <fo:table-header>\n-\t<fo:table-row>\n-\t  <fo:table-cell>\n-\t    <fo:block font-weight=\"bold\">Schema name</fo:block>\n-\t  </fo:table-cell>\n-\t  <fo:table-cell>\n-\t    <fo:block font-weight=\"bold\">Value(s)</fo:block>\n-\t  </fo:table-cell>\n-\t</fo:table-row>\n+        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Schema name</fo:block>\n+          </fo:table-cell>\n+          <fo:table-cell>\n+            <fo:block font-weight=\"bold\">Value(s)</fo:block>\n+          </fo:table-cell>\n+        </fo:table-row>\n       </fo:table-header>\n-\n       <fo:table-body>\n-\t<xsl:for-each select=\"$node\">\n-\t  <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-\t    <fo:table-row>\n-\t      <fo:table-cell>\n-\t\t<fo:block><xsl:value-of select=\"@name\"/></fo:block>\n-\t      </fo:table-cell>\n-\t      <fo:table-cell>\n-\t\t<fo:list-block provisional-label-separation=\"4mm\" provisional-distance-between-starts=\"2mm\">\n-\t\t  <xsl:for-each select=\"value\">\n-\t\t    <fo:list-item>\n-\t\t      <fo:list-item-label end-indent=\"label-end()\">\n-\t\t\t<fo:block>&#x2022;</fo:block>\n-\t\t      </fo:list-item-label>\n-\t\t      <fo:list-item-body start-indent=\"body-start()\">\n-\t\t\t<fo:block><xsl:value-of select=\"text()\"/></fo:block>\n-\t\t      </fo:list-item-body>\n-\t\t    </fo:list-item>\n-\t\t  </xsl:for-each>\n-\t\t</fo:list-block>\n-\t      </fo:table-cell>\n-\t    </fo:table-row>\n-\t  </xsl:if>\n-\t  <fo:table-row>\n-\t    <fo:table-cell><fo:block></fo:block></fo:table-cell>\n-\t    <fo:table-cell><fo:block></fo:block></fo:table-cell>\n-\t  </fo:table-row>\n-\t</xsl:for-each>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n+              <fo:table-cell>\n+                <fo:block>\n+                  <xsl:value-of select=\"@name\"/>\n+                </fo:block>\n+              </fo:table-cell>\n+              <fo:table-cell>\n+                <xsl:for-each select=\"value\">\n+                  <fo:block></fo:block><!--                        <fo:block>&#x2022;</fo:block>-->\n+                  <fo:block font-style=\"italic\">\n+                    <xsl:value-of select=\"text()\"/>\n+                  </fo:block>\n+                </xsl:for-each>\n+              </fo:table-cell>\n+            </fo:table-row>\n+          </xsl:if>\n+          <fo:table-row>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+            <fo:table-cell>\n+              <fo:block></fo:block>\n+            </fo:table-cell>\n+          </fo:table-row>\n+        </xsl:for-each>\n       </fo:table-body>\n     </fo:table>\n   </xsl:template>\n-\n   <xsl:template name=\"resources\">\n     <xsl:param name=\"node\"/>\n-    \n-    <fo:block font-size=\"11pt\" font-weight=\"bold\">Resources</fo:block>\n-\n-    <fo:list-block provisional-label-separation=\"4mm\" provisional-distance-between-starts=\"2mm\">\n-      <xsl:for-each select=\"$node\">\n-\t<fo:list-item>\n-\t  <fo:list-item-label end-indent=\"label-end()\">\n-\t    <fo:block>&#x2022;</fo:block>\n-\t  </fo:list-item-label>\n-\t  <fo:list-item-body start-indent=\"body-start()\">\n-\t    <fo:block><xsl:value-of select=\"@name\"/></fo:block>\n-\t  </fo:list-item-body>\n-\t</fo:list-item>\n-      </xsl:for-each>\n-\n-      <fo:list-item>\n-\t<fo:list-item-label><fo:block></fo:block></fo:list-item-label>\n-\t<fo:list-item-body><fo:block></fo:block></fo:list-item-body>\n-      </fo:list-item>\n-    </fo:list-block>\n-\n+    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"3mm\">Resources</fo:block>\n+    <xsl:for-each select=\"$node\">\n+      <fo:block></fo:block> <!--            <fo:block>&#x2022;</fo:block>-->\n+      <fo:block background-color=\"(#ccccff)\">\n+        <xsl:value-of select=\"@name\"/>\n+      </fo:block>\n+    </xsl:for-each>\n   </xsl:template>\n </xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"6906672363dd4d63502ebcf24f5acb8532e88980","filename":"core/src/main/resources/report/userReportlet2html.xsl","status":"modified","additions":151,"deletions":83,"changes":234,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/303f75dde3ea9f0c831801984576104ba6c8f599/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl?ref=303f75dde3ea9f0c831801984576104ba6c8f599","patch":"@@ -28,76 +28,136 @@ under the License.\n       <h3>User <xsl:value-of select=\"@username\"/></h3>\n       \n       <table style=\"border: 1px solid black;\">\n-\t<tr>\n-\t  <td>Status:</td>\n-\t  <td><xsl:value-of select=\"@status\"/></td>\n-\t</tr>\n-\t<tr>\n-\t  <td>Creation Date:</td>\n-\t  <td><xsl:value-of select=\"@creationDate\"/></td>\n-\t</tr>\n-\t<tr>\n-\t  <td>Last Login Date:</td>\n-\t  <td><xsl:value-of select=\"@lastLoginDate\"/></td>\n-\t</tr>\n-\t<tr>\n-\t  <td>Change Password Date:</td>\n-\t  <td><xsl:value-of select=\"@changePwdDate\"/></td>\n-\t</tr>\n-\t<tr>\n-\t  <td>Password History Size:</td>\n-\t  <td><xsl:value-of select=\"@passwordHistorySize\"/></td>\n-\t</tr>\n-\t<tr>\n-\t  <td>Number of Failed Login Attempts:</td>\n-\t  <td><xsl:value-of select=\"@failedLoginCount\"/></td>\n-\t</tr>\n+        <tr>\n+          <td>Status:</td>\n+          <td>\n+            <xsl:value-of select=\"@status\"/>\n+          </td>\n+        </tr>\n+        <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n+          <tr>\n+            <td>Creation Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@creationDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n+          <tr>\n+            <td>Last Login Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@lastLoginDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n+          <tr>\n+            <td>Change Password Date:</td>\n+            <td>\n+              <xsl:value-of select=\"@changePwdDate\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n+          <tr>\n+            <td>Password History Size:</td>\n+            <td>\n+              <xsl:value-of select=\"@passwordHistorySize\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n+        <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n+          <tr>\n+            <td>Number of Failed Login Attempts:</td>\n+            <td>\n+              <xsl:value-of select=\"@failedLoginCount\"/>\n+            </td>\n+          </tr>\n+        </xsl:if>\n       </table>\n \n       <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n       </xsl:call-template>\n \n-      <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-      </xsl:call-template>\n-\n-      <xsl:call-template name=\"attributes\">\n-\t<xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-\t<xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-      </xsl:call-template>\n-\n-      <h4>Memberships</h4>\n-      <xsl:for-each select=\"memberships/membership\">\n-\t<h5>Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</h5>\n-\t<blockquote>\n-\t  <xsl:call-template name=\"attributes\">\n-\t    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-\t    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-\t  </xsl:call-template>\n-\t  \n-\t  <xsl:call-template name=\"attributes\">\n-\t    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-\t    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-\t  </xsl:call-template>\n-\t  \n-\t  <xsl:call-template name=\"attributes\">\n-\t    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-\t    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-\t  </xsl:call-template>\n-\n-\t  <xsl:call-template name=\"resources\">\n-\t    <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-\t  </xsl:call-template>\n-\t</blockquote>\n-      </xsl:for-each>\n-\n+      <!--<xsl:if test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">-->\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER HASN'T ANY DERIVED ATTRIBUTE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      <!--</xsl:if>-->\n+      <xsl:choose>\n+        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+          <xsl:call-template name=\"attributes\">\n+            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+          </xsl:call-template>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER HASN'T ANY VIRTUAL ATTRIBUTE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+      \n+      <xsl:choose>\n+        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n+          <h4>Memberships</h4>\n+          <xsl:for-each select=\"memberships/membership\">\n+            <h5>Role: <xsl:value-of select=\"@roleName\"/>(<xsl:value-of select=\"@roleId\"/>)</h5>\n+            <blockquote>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T ANY ATTRIBUTE</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T ANY DERIVED ATTRIBUTE</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:choose>\n+                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n+                  <xsl:call-template name=\"attributes\">\n+                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n+                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n+                  </xsl:call-template>\n+                </xsl:when>\n+                <xsl:otherwise>\n+                  <h5>THIS ROLE HASN'T ANY VIRTUAL ATTRIBUTE</h5>\n+                </xsl:otherwise>\n+              </xsl:choose>\n+              <xsl:call-template name=\"resources\">\n+                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+              </xsl:call-template>\n+            </blockquote>\n+          </xsl:for-each>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <h5>THIS USER ISN'T ASSIGNED TO ANY ROLE</h5>\n+        </xsl:otherwise>\n+      </xsl:choose>\n       <xsl:call-template name=\"resources\">\n-\t<xsl:with-param name=\"node\" select=\"resources/resource\"/>\n+        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n       </xsl:call-template>\n-\n       <hr/>\n     </xsl:for-each>\n   </xsl:template>\n@@ -106,30 +166,36 @@ under the License.\n     <xsl:param name=\"label\"/>\n     <xsl:param name=\"node\"/>\n \n-    <h4><xsl:value-of select=\"$label\"/></h4>\n+    <h4>\n+      <xsl:value-of select=\"$label\"/>\n+    </h4>\n     \n     <table>\n       <thead>\n-\t<tr>\n-\t  <th>Schema name</th>\n-\t  <th>Value(s)</th>\n-\t</tr>\n+        <tr>\n+          <th>Schema name</th>\n+          <th>Value(s)</th>\n+        </tr>\n       </thead>\n       <tbody>\n-\t<xsl:for-each select=\"$node\">\n-\t  <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-\t    <tr>\n-\t      <td><xsl:value-of select=\"@name\"/></td>\n-\t      <td>\n-\t\t<ul>\n-\t\t  <xsl:for-each select=\"value\">\n-\t\t    <li><xsl:value-of select=\"text()\"/></li>\n-\t\t  </xsl:for-each>\n-\t\t</ul>\n-\t      </td>\n-\t    </tr>\n-\t  </xsl:if>\n-\t</xsl:for-each>\n+        <xsl:for-each select=\"$node\">\n+          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n+            <tr>\n+              <td>\n+                <xsl:value-of select=\"@name\"/>\n+              </td>\n+              <td>\n+                <ul>\n+                  <xsl:for-each select=\"value\">\n+                    <li>\n+                      <xsl:value-of select=\"text()\"/>\n+                    </li>\n+                  </xsl:for-each>\n+                </ul>\n+              </td>\n+            </tr>\n+          </xsl:if>\n+        </xsl:for-each>\n       </tbody>\n     </table>\n   </xsl:template>\n@@ -140,7 +206,9 @@ under the License.\n     <h4>Resources</h4>\n     <ul>\n       <xsl:for-each select=\"$node\">\n-\t<li><xsl:value-of select=\"@name\"/></li>\n+        <li>\n+          <xsl:value-of select=\"@name\"/>\n+        </li>\n       </xsl:for-each>\n     </ul>\n   </xsl:template>"}]}