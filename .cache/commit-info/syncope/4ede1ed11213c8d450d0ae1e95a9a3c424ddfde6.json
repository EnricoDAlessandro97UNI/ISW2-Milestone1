{"sha":"4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjRlZGUxZWQxMTIxM2M4ZDQ1MGQwYWUxZTk1YTlhM2M0MjRkZGZkZTY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-03-21T12:55:39Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-03-21T12:55:39Z"},"message":"Upgrading PDFBox and GreenMail","tree":{"sha":"5711ce5941efc263304add8fc58aac3fa47b18a3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5711ce5941efc263304add8fc58aac3fa47b18a3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"f9af4eb39c111a154b8b2a644dd0f119bb9059f7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f9af4eb39c111a154b8b2a644dd0f119bb9059f7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f9af4eb39c111a154b8b2a644dd0f119bb9059f7"}],"stats":{"total":16,"additions":7,"deletions":9},"files":[{"sha":"8b478a9fc29770148653504d6c7dba6bfeba03fd","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/preview/BinaryPDFPreviewer.java","status":"modified","additions":5,"deletions":7,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2Fpreview%2FBinaryPDFPreviewer.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2Fpreview%2FBinaryPDFPreviewer.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2Fpreview%2FBinaryPDFPreviewer.java?ref=4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","patch":"@@ -24,9 +24,9 @@\n import java.io.ByteArrayInputStream;\n import java.io.IOException;\n import java.io.Serializable;\n-import java.util.List;\n import org.apache.pdfbox.pdmodel.PDDocument;\n-import org.apache.pdfbox.pdmodel.PDPage;\n+import org.apache.pdfbox.rendering.ImageType;\n+import org.apache.pdfbox.rendering.PDFRenderer;\n import org.apache.syncope.client.console.annotations.BinaryPreview;\n import org.apache.wicket.Component;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n@@ -44,9 +44,9 @@ public class BinaryPDFPreviewer extends AbstractBinaryPreviewer {\n \n     private static final int IMG_SIZE = 300;\n \n-    private static final int RESOLUTION = 96;\n+    private static final float RESOLUTION = 96;\n \n-    private static final int IMAGE_TYPE = BufferedImage.TYPE_INT_RGB;\n+    private static final ImageType IMAGE_TYPE = ImageType.RGB;\n \n     private transient BufferedImage firstPage;\n \n@@ -64,9 +64,7 @@ public Component preview(final byte[] uploadedBytes) {\n             if (document.isEncrypted()) {\n                 LOG.info(\"Document is encrypted, no preview is possible\");\n             } else {\n-                @SuppressWarnings(\"unchecked\")\n-                List<PDPage> pages = document.getDocumentCatalog().getAllPages();\n-                firstPage = pages.get(0).convertToImage(IMAGE_TYPE, RESOLUTION);\n+                firstPage = new PDFRenderer(document).renderImage(0, RESOLUTION, IMAGE_TYPE);\n             }\n         } catch (IOException e) {\n             LOG.error(\"While generating thumbnail from first page\", e);"},{"sha":"de99fcb111ed7a44192a04ef0306dff62f80d767","filename":"pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=4ede1ed11213c8d450d0ae1e95a9a3c424ddfde6","patch":"@@ -1038,7 +1038,7 @@ under the License.\n       <dependency>\n         <groupId>org.apache.pdfbox</groupId>\n         <artifactId>pdfbox</artifactId>\n-        <version>1.8.11</version>\n+        <version>2.0.0</version>\n       </dependency>\n       \n       <dependency>\n@@ -1257,7 +1257,7 @@ under the License.\n       <dependency>\n         <groupId>com.icegreen</groupId>\n         <artifactId>greenmail</artifactId>\n-        <version>1.4.1</version>\n+        <version>1.5.0</version>\n         <scope>test</scope>\n       </dependency>\n       <dependency>"}]}