{"sha":"704682321e39ac000bd918566ad4e5d60517158d","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjcwNDY4MjMyMWUzOWFjMDAwYmQ5MTg1NjZhZDRlNWQ2MDUxNzE1OGQ=","commit":{"author":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2015-01-26T16:28:59Z"},"committer":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2015-01-26T16:28:59Z"},"message":"Fixed #SYNCOPE-583","tree":{"sha":"67c72aa4e33b1871c076728eed2d8f98fbc28901","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/67c72aa4e33b1871c076728eed2d8f98fbc28901"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/704682321e39ac000bd918566ad4e5d60517158d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/704682321e39ac000bd918566ad4e5d60517158d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/704682321e39ac000bd918566ad4e5d60517158d","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/704682321e39ac000bd918566ad4e5d60517158d/comments","author":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"committer":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"parents":[{"sha":"87140e648829c76cbb2283da603e766d5fab6960","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/87140e648829c76cbb2283da603e766d5fab6960","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/87140e648829c76cbb2283da603e766d5fab6960"}],"stats":{"total":84,"additions":83,"deletions":1},"files":[{"sha":"bcfa7485babcf5e9fbbea325a7ff1460a069442c","filename":"cli/src/main/java/org/apache/syncope/cli/SyncopeAdm.java","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/704682321e39ac000bd918566ad4e5d60517158d/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2FSyncopeAdm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/704682321e39ac000bd918566ad4e5d60517158d/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2FSyncopeAdm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2FSyncopeAdm.java?ref=704682321e39ac000bd918566ad4e5d60517158d","patch":"@@ -21,6 +21,7 @@\n import com.beust.jcommander.JCommander;\n import com.beust.jcommander.ParameterException;\n import org.apache.syncope.cli.commands.ConfigurationCommand;\n+import org.apache.syncope.cli.commands.EntitlementCommand;\n import org.apache.syncope.cli.commands.LoggerCommand;\n import org.apache.syncope.cli.commands.NotificationCommand;\n import org.apache.syncope.cli.commands.PolicyCommand;\n@@ -38,7 +39,8 @@ public class SyncopeAdm {\n             + \"    config --help \\n\"\n             + \"    notification --help \\n\"\n             + \"    report --help \\n\"\n-            + \"    policy --help \\n\";\n+            + \"    policy --help \\n\"\n+            + \"    entitlement --help \\n\";\n \n     private static final JCommander jcommander = new JCommander();\n \n@@ -51,6 +53,8 @@ public class SyncopeAdm {\n     private static ReportCommand reportCommand;\n \n     private static PolicyCommand policyCommand;\n+    \n+    private static EntitlementCommand entitlementCommand;\n \n     public static void main(final String[] args) {\n         LOG.debug(\"Starting with args \\n\");\n@@ -92,6 +96,9 @@ private static void instantiateCommands() {\n         policyCommand = new PolicyCommand();\n         jcommander.addCommand(policyCommand);\n         LOG.debug(\"Added PolicyCommand\");\n+        entitlementCommand = new EntitlementCommand();\n+        jcommander.addCommand(entitlementCommand);\n+        LOG.debug(\"Added EntitlementCommand\");\n     }\n \n     private static void executeCommand() {\n@@ -109,6 +116,8 @@ private static void executeCommand() {\n             reportCommand.execute();\n         } else if (\"policy\".equalsIgnoreCase(command)) {\n             policyCommand.execute();\n+        } else if (\"entitlement\".equalsIgnoreCase(command)) {\n+            entitlementCommand.execute();\n         }\n     }\n }"},{"sha":"c63dbcbe27ebbe2c7b5dc1f0e698772f881f8f21","filename":"cli/src/main/java/org/apache/syncope/cli/commands/EntitlementCommand.java","status":"added","additions":73,"deletions":0,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/704682321e39ac000bd918566ad4e5d60517158d/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2Fcommands%2FEntitlementCommand.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/704682321e39ac000bd918566ad4e5d60517158d/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2Fcommands%2FEntitlementCommand.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcli%2Fcommands%2FEntitlementCommand.java?ref=704682321e39ac000bd918566ad4e5d60517158d","patch":"@@ -0,0 +1,73 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.cli.commands;\n+\n+import com.beust.jcommander.Parameter;\n+import com.beust.jcommander.Parameters;\n+import org.apache.syncope.cli.SyncopeServices;\n+import org.apache.syncope.common.services.EntitlementService;\n+import org.apache.syncope.common.wrap.EntitlementTO;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@Parameters(\n+        commandNames = \"entitlement\",\n+        optionPrefixes = \"-\",\n+        separators = \"=\",\n+        commandDescription = \"Apache Syncope entitlement service\")\n+public class EntitlementCommand extends AbstractCommand {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(EntitlementCommand.class);\n+\n+    private static final Class SYNCOPE_ENTITLEMENT_CLASS = EntitlementService.class;\n+\n+    private final String helpMessage = \"Usage: entitlement [options]\\n\"\n+            + \"  Options:\\n\"\n+            + \"    -h, --help \\n\"\n+            + \"    -l, --list \\n\"\n+            + \"    -lo, --list-own \\n\";\n+\n+    @Parameter(names = {\"-lo\", \"--list-own\"})\n+    public boolean listOwn = false;\n+\n+    @Override\n+    public void execute() {\n+        final EntitlementService entitlementService = (EntitlementService) SyncopeServices.\n+                get(SYNCOPE_ENTITLEMENT_CLASS);\n+        LOG.debug(\"Entitlement service successfully created\");\n+\n+        if (help) {\n+            LOG.debug(\"- entitlement help command\");\n+            System.out.println(helpMessage);\n+        } else if (list) {\n+            System.out.println(\"All entitlement:\");\n+            for (final EntitlementTO entitlementTO : entitlementService.getAllEntitlements()) {\n+                System.out.println(\"  *** \" + entitlementTO.getElement());\n+            }\n+        } else if (listOwn) {\n+            System.out.println(\"All own entitlement:\");\n+            for (final EntitlementTO entitlementTO : entitlementService.getOwnEntitlements()) {\n+                System.out.println(\"  *** \" + entitlementTO.getElement());\n+            }\n+        } else {\n+            System.out.println(helpMessage);\n+        }\n+    }\n+\n+}"}]}