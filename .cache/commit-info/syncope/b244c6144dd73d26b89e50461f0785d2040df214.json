{"sha":"b244c6144dd73d26b89e50461f0785d2040df214","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmIyNDRjNjE0NGRkNzNkMjZiODllNTA0NjFmMDc4NWQyMDQwZGYyMTQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-10-03T10:49:55Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-10-03T10:51:51Z"},"message":"[SYNCOPE-946] Same fix for enduser","tree":{"sha":"cd8f1dec849f9b0415e0901e3985d9230c542883","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/cd8f1dec849f9b0415e0901e3985d9230c542883"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b244c6144dd73d26b89e50461f0785d2040df214","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b244c6144dd73d26b89e50461f0785d2040df214","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b244c6144dd73d26b89e50461f0785d2040df214","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b244c6144dd73d26b89e50461f0785d2040df214/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"cca8951728520dfbcf6d3992f12443a939eda9c5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cca8951728520dfbcf6d3992f12443a939eda9c5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/cca8951728520dfbcf6d3992f12443a939eda9c5"}],"stats":{"total":66,"additions":59,"deletions":7},"files":[{"sha":"e60a0a7132f03a8500d22aac136c2c1ee581d026","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/SchemaResource.java","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java?ref=b244c6144dd73d26b89e50461f0785d2040df214","patch":"@@ -23,10 +23,12 @@\n import java.util.List;\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n+import org.apache.commons.collections4.ComparatorUtils;\n import org.apache.commons.collections4.IterableUtils;\n import org.apache.commons.collections4.Predicate;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.model.SchemaResponse;\n+import org.apache.syncope.common.lib.EntityTOUtils;\n import org.apache.syncope.common.lib.to.AbstractSchemaTO;\n import org.apache.syncope.common.lib.to.AnyTypeTO;\n import org.apache.syncope.common.lib.to.GroupTO;\n@@ -125,6 +127,16 @@ public boolean evaluate(final GroupTO item) {\n                 }\n             }\n \n+            Collections.sort(plainSchemas, ComparatorUtils.transformedComparator(\n+                    ComparatorUtils.<String>naturalComparator(),\n+                    EntityTOUtils.keyTransformer()));\n+            Collections.sort(derSchemas, ComparatorUtils.transformedComparator(\n+                    ComparatorUtils.<String>naturalComparator(),\n+                    EntityTOUtils.keyTransformer()));\n+            Collections.sort(virSchemas, ComparatorUtils.transformedComparator(\n+                    ComparatorUtils.<String>naturalComparator(),\n+                    EntityTOUtils.keyTransformer()));\n+\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"ebf5c81ff353ac5233af1b54e6c2759dc7f8062c","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/controllers/UserController.js","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js?ref=b244c6144dd73d26b89e50461f0785d2040df214","patch":"@@ -276,7 +276,6 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n       };\n \n       var removeUserSchemas = function (anyTypeClass, group) {\n-\n         //removing plain groupSchemas\n         for (var i = 0; i < $scope.dynamicForm.groupSchemas.length; i++) {\n           if ($scope.dynamicForm.groupSchemas[i] === group) {"},{"sha":"fbdf0a284e6dff7ade54594fc387cc829469a138","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicPlainAttribute.html","status":"modified","additions":47,"deletions":6,"changes":53,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b244c6144dd73d26b89e50461f0785d2040df214/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html?ref=b244c6144dd73d26b89e50461f0785d2040df214","patch":"@@ -22,18 +22,59 @@\n          ng-model=\"user.plainAttrs[schema.key].values[index]\"\n          ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n          ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n-  <input ng-switch-when=\"Encrypted\" class=\"form-control\" type=\"text\"\n-         ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-         ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n-         ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"\n-         ame=\"{{schema.key}}\"/>\n+\n+  <div ng-switch-when=\"Encrypted\" class=\"input-group input-group-sm\">\n+    <span class=\"input-group-btn\">  \n+      <button type=\"button\" class=\"btn btn-default btn-flat\"\n+              onclick=\"var pwd = $(this).parent().next('input');\n+                  if (pwd.is('[readonly]')) {\n+                    if (pwd.val() === '') {\n+                      pwd.removeAttr('readonly');\n+                      $(this).children().attr('class', 'fa fa-unlock');\n+                    } else {\n+                      var response = confirm('This will remove the current value. Continue?');\n+                      if (response == true) {\n+                        pwd.removeAttr('readonly');\n+                        pwd.val('');\n+                        $(this).children().attr('class', 'fa fa-unlock');\n+                      }\n+                    }\n+                  }\n+              \">\n+        <i class=\"fa fa-lock\"></i>\n+      </button>\n+    </span>\n+    <input class=\"form-control\" type=\"password\" readonly=\"true\"\n+           ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+           ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n+           ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+    <span class=\"input-group-btn\">  \n+      <button type=\"button\" class=\"btn btn-default btn-flat\"\n+              onmousedown=\"var pwd = $(this).parent().prev('input');\n+                  if (!pwd.is('[readonly]')) {\n+                    pwd.attr('type', 'text');\n+                    $(this).children().attr('class', 'fa fa-eye-slash');\n+                  }\"\n+              onmouseup=\"var pwd = $(this).parent().prev('input');\n+                  if (!pwd.is('[readonly]')) {\n+                    pwd.attr('type', 'password');\n+                    $(this).children().attr('class', 'fa fa-eye');\n+                  }\"\n+              >\n+        <i class=\"fa fa-eye\"></i>\n+      </button>\n+    </span>\n+  </div>\n+\n   <div ng-switch-when=\"Boolean\">\n     <input type=\"checkbox\" ng-model=\"user.plainAttrs[schema.key].values[index]\" ng-required=\"{{schema.mandatoryCondition}}\" \n            ng-init=\"initAttribute(schema, index)\" />\n   </div>\n+\n   <input ng-switch-when=\"Long\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" \n          ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n          ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+\n   <input ng-switch-when=\"Double\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\"\n          ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n          ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n@@ -72,7 +113,7 @@\n   </div>\n \n   <div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n-    <input file-input type=\"file\" id=\"fileInput\" name=\"fileInput\">\n+    <input file-input type=\"file\" id=\"fileInput\" name=\"fileInput\"/>\n     <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n       <i class=\"glyphicon glyphicon-download\" ></i>\n     </button>"}]}