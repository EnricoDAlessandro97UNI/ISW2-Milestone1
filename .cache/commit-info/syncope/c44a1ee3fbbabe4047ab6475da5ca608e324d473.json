{"sha":"c44a1ee3fbbabe4047ab6475da5ca608e324d473","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM0NGExZWUzZmJiYWJlNDA0N2FiNjQ3NWRhNWNhNjA4ZTMyNGQ0NzM=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-08-04T15:12:49Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-08-04T15:12:49Z"},"message":"console refactoring and bug-fix\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247074 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b282d7c16d85fe321ffca84fa3605dee1c0e0b28","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b282d7c16d85fe321ffca84fa3605dee1c0e0b28"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c44a1ee3fbbabe4047ab6475da5ca608e324d473","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c44a1ee3fbbabe4047ab6475da5ca608e324d473","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c44a1ee3fbbabe4047ab6475da5ca608e324d473","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c44a1ee3fbbabe4047ab6475da5ca608e324d473/comments","author":null,"committer":null,"parents":[{"sha":"9a6b45c0cacca0e26b555340b95c08f5a5cd3a8f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9a6b45c0cacca0e26b555340b95c08f5a5cd3a8f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9a6b45c0cacca0e26b555340b95c08f5a5cd3a8f"}],"stats":{"total":1334,"additions":607,"deletions":727},"files":[{"sha":"62366b473ee336dacf8718a61bb4bda7544c1937","filename":"archetype/src/main/resources/archetype-resources/core/src/test/resources/content.xml","status":"modified","additions":6,"deletions":327,"changes":333,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -34,7 +34,7 @@\n     <hibernate_sequences sequence_name=\"SEQ_JPAHistoryStep\" sequence_next_hi_value=\"10\"/>\n     <hibernate_sequences sequence_name=\"SEQ_JPAPropertySetItem\" sequence_next_hi_value=\"10\"/>\n     <hibernate_sequences sequence_name=\"SEQ_JPAWorkflowEntry\" sequence_next_hi_value=\"10\"/>\n-    \n+\n     <SyncopeConf key=\"token.length\" value=\"256\"/>\n     <SyncopeConf key=\"token.expireTime\" value=\"60\"/>\n     <SyncopeConf key=\"token.encryption.key\" value=\"1abcdefghil3mnopqrstuvz2\"/>\n@@ -43,326 +43,24 @@\n     <SyncopeConf key=\"optin.email.subject\" value=\"Welcome to Syncope!\"/>\n     <SyncopeConf key=\"connid.bundles.directory\" value=\"${bundles.directory}\"/>\n     <SyncopeConf key=\"password.cipher.algorithm\" value=\"MD5\"/>\n-                          \n-    <SyncopeUser id=\"1\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n-    <SyncopeUser id=\"2\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n-    <SyncopeUser id=\"3\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n-    <SyncopeUser id=\"4\" workflowId=\"0\" password=\"5f4dcc3b5aa765d61d8327deb882cf99\" cipherAlgorithm=\"MD5\"/>\n-\n-    <SyncopeRole id=\"1\" name=\"root\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n-    <SyncopeRole id=\"2\" name=\"child\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n-    <SyncopeRole id=\"3\" name=\"citizen\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n-    <SyncopeRole id=\"4\" name=\"employee\" parent_id=\"3\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n-    <SyncopeRole id=\"5\" name=\"secretary\" parent_id=\"4\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n-    <SyncopeRole id=\"6\" name=\"director\" parent_id=\"4\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\" inheritVirtualAttributes=\"1\"/>\n-    <SyncopeRole id=\"7\" name=\"managingDirector\" parent_id=\"6\" inheritAttributes=\"1\" inheritDerivedAttributes=\"1\" inheritVirtualAttributes=\"1\"/>\n-    <SyncopeRole id=\"8\" name=\"otherchild\" parent_id=\"1\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"1\"/>\n \n-    <Membership id=\"1\" syncopeUser_id=\"1\" syncopeRole_id=\"1\"/>\n-    <Membership id=\"2\" syncopeUser_id=\"2\" syncopeRole_id=\"1\"/>\n-    <Membership id=\"3\" syncopeUser_id=\"2\" syncopeRole_id=\"2\"/>\n-    <Membership id=\"4\" syncopeUser_id=\"4\" syncopeRole_id=\"7\"/>\n-    <Membership id=\"5\" syncopeUser_id=\"1\" syncopeRole_id=\"8\"/>\n-    <Membership id=\"6\" syncopeUser_id=\"2\" syncopeRole_id=\"3\"/>\n-\n-    <USchema name=\"username\" type=\"String\"\n-                mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"1\" readonly=\"0\"/>\n-    <USchema name=\"userId\" type=\"String\"\n-                mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"1\" readonly=\"0\"\n-                validatorClass=\"org.syncope.core.persistence.validation.attrvalue.EmailAddressValidator\"/>\n-    <USchema name=\"loginDate\" type=\"Date\"\n-                mandatoryCondition=\"false\" multivalue=\"1\" uniqueConstraint=\"0\" readonly=\"0\"\n-                conversionPattern=\"yyyy-MM-dd\"/>\n-    <USchema name=\"firstname\" type=\"String\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n     <USchema name=\"surname\" type=\"String\"\n                 mandatoryCondition=\"true\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-    <USchema name=\"type\" type=\"String\"\n+    <USchema name=\"firstname\" type=\"String\"\n                 mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n     <USchema name=\"email\" type=\"String\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n+                mandatoryCondition=\"false\" multivalue=\"1\" uniqueConstraint=\"0\" readonly=\"0\"\n                 validatorClass=\"org.syncope.core.persistence.validation.attrvalue.EmailAddressValidator\"/>\n-    <USchema name=\"activationDate\" type=\"Date\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n-                conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n-    <USchema name=\"uselessReadonly\" type=\"String\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"1\"/>\n-    <USchema name=\"cool\" type=\"Boolean\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-    <USchema name=\"gender\" type=\"Enum\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n-                enumerationValues=\"M;F\"/>\n+               \n+    <UDerSchema name=\"username\" expression=\"firstname + '.' + surname\"/>\n \n-    <RSchema name=\"icon\" type=\"String\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-                \n-    <RSchema name=\"show\" type=\"Boolean\"\n-                mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-\n-    <RSchema name=\"derived_sx\" type=\"String\"\n-                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-\n-    <RSchema name=\"derived_dx\" type=\"String\"\n-                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n+    <SyncopeRole id=\"0\" name=\"/\" inheritAttributes=\"0\" inheritDerivedAttributes=\"0\" inheritVirtualAttributes=\"0\"/>\n \n     <MSchema name=\"subscriptionDate\" type=\"Date\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n                       conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n \n-    <MSchema name=\"derived_sx\" type=\"String\"\n-                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-\n-    <MSchema name=\"derived_dx\" type=\"String\"\n-                      mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-\n-    <UAttr id=\"100\" owner_id=\"1\" schema_name=\"username\"/>\n-    <UAttrUniqueValue id=\"10\" attribute_id=\"100\" schema_name=\"username\" stringValue=\"chicchiricco\"/>\n-    <UAttr id=\"200\" owner_id=\"1\" schema_name=\"loginDate\"/>\n-    <UAttrValue attribute_id=\"200\" id=\"20\" dateValue=\"2009-05-26\"/>\n-    <UAttrValue attribute_id=\"200\" id=\"21\" dateValue=\"2010-05-26 15:40:04\"/>\n-\n-    <UAttr id=\"300\" owner_id=\"2\" schema_name=\"username\"/>\n-    <UAttrUniqueValue id=\"11\" attribute_id=\"300\" schema_name=\"username\" stringValue=\"fabio.martelli\"/>\n-\n-    <UAttr id=\"400\" owner_id=\"3\" schema_name=\"firstname\"/>\n-    <UAttrValue attribute_id=\"400\" id=\"30\" stringValue=\"John\"/>\n-    <UAttr id=\"500\" owner_id=\"3\" schema_name=\"surname\"/>\n-    <UAttrValue attribute_id=\"500\" id=\"31\" stringValue=\"Doe\"/>\n-    <UAttr id=\"540\" owner_id=\"3\" schema_name=\"username\"/>\n-    <UAttrUniqueValue id=\"12\" attribute_id=\"540\" schema_name=\"username\" stringValue=\"test1\"/>\n-\n-    <UAttr id=\"550\" owner_id=\"4\" schema_name=\"loginDate\"/>\n-    <UAttrValue attribute_id=\"550\" id=\"22\" dateValue=\"2009-06-24\"/>\n-    <UAttr id=\"560\" owner_id=\"4\" schema_name=\"cool\"/>\n-    <UAttrValue attribute_id=\"560\" id=\"23\" booleanValue=\"1\"/>\n-    <UAttr id=\"561\" owner_id=\"4\" schema_name=\"gender\"/>\n-    <UAttrValue attribute_id=\"561\" id=\"24\" stringValue=\"M\"/>\n-    \n-    <RAttr id=\"600\" owner_id=\"1\" schema_name=\"icon\"/>\n-    <RAttr id=\"700\" owner_id=\"2\" schema_name=\"icon\"/>\n-    <RAttr id=\"800\" owner_id=\"1\" schema_name=\"show\"/>\n-    <RAttr id=\"900\" owner_id=\"6\" schema_name=\"icon\"/>\n-    <RAttr id=\"950\" owner_id=\"4\" schema_name=\"icon\"/>\n-\n-    <RAttrValue attribute_id=\"600\" id=\"40\" stringValue=\"niceIcon\"/>\n-    <RAttrValue attribute_id=\"700\" id=\"41\" stringValue=\"badIcon\"/>\n-    <RAttrValue attribute_id=\"800\" id=\"42\" booleanValue=\"1\"/>\n-    <RAttrValue attribute_id=\"900\" id=\"43\" stringValue=\"icon6\"/>\n-    <RAttrValue attribute_id=\"950\" id=\"44\" stringValue=\"icon4\"/>\n-\n-    <RAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n-    <RAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n-\n-    <RAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n-    <RAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n-\n-    <RDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n-    <RDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n-\n-\n-    <MAttr id=\"1000\" owner_id=\"4\" schema_name=\"subscriptionDate\"/>\n-\n-    <MAttrValue attribute_id=\"1000\" id=\"90\" dateValue=\"2009-05-26\"/>\n-    <MAttrValue attribute_id=\"1000\" id=\"91\" dateValue=\"2010-05-26 15:40:04\"/>\n-\n-    <MAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n-    <MAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n-\n-    <MAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n-    <MAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n-\n-    <MDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n-    <MDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n-\n-    <UVirSchema name=\"virtualdata\"/>\n-    <UVirAttr id=\"1000\" virtualSchema_name=\"virtualdata\" owner_id=\"3\"/>\n-\n-    <UDerSchema name=\"cn\" expression=\"surname + ', ' + firstname\"/>\n-    <UDerAttr id=\"1000\" derivedSchema_name=\"cn\" owner_id=\"3\"/>\n-\n-    <UDerSchema name=\"noschema\" expression=\"surname + ', ' + notfound\"/>\n-\n-    <MVirSchema name=\"mvirtualdata\"/>\n-    <RVirSchema name=\"rvirtualdata\"/>\n-    <RVirAttr id=\"1000\" virtualSchema_name=\"rvirtualdata\" owner_id=\"4\"/>\n-\n-    <ConnInstance id=\"100\" displayName=\"ConnInstance100\"\n-                       bundleName=\"org.connid.bundles.soap\"\n-                       connectorName=\"org.connid.bundles.soap.WebServiceConnector\"\n-                       version=\"${connid.soap.version}\"\n-\t\t       xmlConfiguration=\"%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E+%0A%3Cjava+version%3D%221.6.0_24%22+class%3D%22java.beans.XMLDecoder%22%3E+%0A+%3Cobject+class%3D%22java.util.HashSet%22%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eendpoint%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Ehttp%3A%2F%2Flocalhost%3A9080%2Fwssample%2Fservices%2Fprovisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eservicename%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Eorg.connid.bundles.soap.provisioning.interfaces.Provisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A+%3C%2Fobject%3E+%0A%3C%2Fjava%3E+%0A\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"SYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"SYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"SYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ASYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ASYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"ASYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"100\" capabilities=\"RESOLVE\"/>\n-\n-    <ConnInstance id=\"101\" displayName=\"ConnInstance101\"\n-                       bundleName=\"org.connid.bundles.db.table\"\n-                       connectorName=\"org.identityconnectors.databasetable.DatabaseTableConnector\"\n-                       version=\"${connid.db.table.version}\"\n-                       xmlConfiguration=\"%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%20%0A%3Cjava%20version%3D%221.6.0_24%22%20class%3D%22java.beans.XMLDecoder%22%3E%20%0A%20%3Cobject%20class%3D%22java.util.HashSet%22%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Epassword%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Eorg.identityconnectors.common.security.GuardedString%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Esa%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3EjdbcDriver%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Eorg.hsqldb.jdbcDriver%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Etable%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22required%22%3E%20%0A%20%20%20%20%20%20%20%3Cboolean%3Etrue%3C%2Fboolean%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Etest%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3EpasswordColumn%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Epassword%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Euser%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Esa%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3EkeyColumn%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22required%22%3E%20%0A%20%20%20%20%20%20%20%3Cboolean%3Etrue%3C%2Fboolean%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Eid%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%20%3Cvoid%20method%3D%22add%22%3E%20%0A%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfProperty%22%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22schema%22%3E%20%0A%20%20%20%20%20%3Cobject%20class%3D%22org.syncope.types.ConnConfPropSchema%22%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22name%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3EjdbcUrlTemplate%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%20%3Cvoid%20property%3D%22type%22%3E%20%0A%20%20%20%20%20%20%20%3Cstring%3Ejava.lang.String%3C%2Fstring%3E%20%0A%20%20%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%20%3C%2Fobject%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%20%3Cvoid%20property%3D%22value%22%3E%20%0A%20%20%20%20%20%3Cstring%3Ejdbc%3Ahsqldb%3Ahsql%3A%2F%2Flocalhost%3A9001%2Ftestdb%3C%2Fstring%3E%20%0A%20%20%20%20%3C%2Fvoid%3E%20%0A%20%20%20%3C%2Fobject%3E%20%0A%20%20%3C%2Fvoid%3E%20%0A%20%3C%2Fobject%3E%20%0A%3C%2Fjava%3E%20%0A\"/>   \n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"SYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"SYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"SYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"ASYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"ASYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"ASYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"101\" capabilities=\"RESOLVE\"/>\n-\n-    <ConnInstance id=\"102\" displayName=\"ConnInstance102\"\n-                       bundleName=\"org.connid.bundles.soap\"\n-                       connectorName=\"org.connid.bundles.soap.WebServiceConnector\"\n-                       version=\"${connid.soap.version}\"\n-\t\t       xmlConfiguration=\"%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E+%0A%3Cjava+version%3D%221.6.0_24%22+class%3D%22java.beans.XMLDecoder%22%3E+%0A+%3Cobject+class%3D%22java.util.HashSet%22%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eendpoint%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Ehttp%3A%2F%2Flocalhost%3A9080%2Fwssample%2Fservices%2Fprovisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eservicename%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Eorg.connid.bundles.soap.provisioning.interfaces.Provisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A+%3C%2Fobject%3E+%0A%3C%2Fjava%3E+%0A\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"SYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"SYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"SYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ASYNC_CREATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ASYNC_UPDATE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"ASYNC_DELETE\"/>\n-    <ConnInstance_capabilities ConnInstance_id=\"102\" capabilities=\"RESOLVE\"/>\n-\n-    <ConnInstance id=\"103\" displayName=\"ConnInstance103\"\n-                       bundleName=\"org.connid.bundles.soap\"\n-                       connectorName=\"org.connid.bundles.soap.WebServiceConnector\"\n-                       version=\"${connid.soap.version}\"\n-\t\t       xmlConfiguration=\"%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E+%0A%3Cjava+version%3D%221.6.0_24%22+class%3D%22java.beans.XMLDecoder%22%3E+%0A+%3Cobject+class%3D%22java.util.HashSet%22%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eendpoint%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Ehttp%3A%2F%2Flocalhost%3A9080%2Fwssample%2Fservices%2Fprovisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A++%3Cvoid+method%3D%22add%22%3E+%0A+++%3Cobject+class%3D%22org.syncope.types.ConnConfProperty%22%3E+%0A++++%3Cvoid+property%3D%22schema%22%3E+%0A+++++%3Cobject+class%3D%22org.syncope.types.ConnConfPropSchema%22%3E+%0A++++++%3Cvoid+property%3D%22name%22%3E+%0A+++++++%3Cstring%3Eservicename%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22required%22%3E+%0A+++++++%3Cboolean%3Etrue%3C%2Fboolean%3E+%0A++++++%3C%2Fvoid%3E+%0A++++++%3Cvoid+property%3D%22type%22%3E+%0A+++++++%3Cstring%3Ejava.lang.String%3C%2Fstring%3E+%0A++++++%3C%2Fvoid%3E+%0A+++++%3C%2Fobject%3E+%0A++++%3C%2Fvoid%3E+%0A++++%3Cvoid+property%3D%22value%22%3E+%0A+++++%3Cstring%3Eorg.connid.bundles.soap.provisioning.interfaces.Provisioning%3C%2Fstring%3E+%0A++++%3C%2Fvoid%3E+%0A+++%3C%2Fobject%3E+%0A++%3C%2Fvoid%3E+%0A+%3C%2Fobject%3E+%0A%3C%2Fjava%3E+%0A\"/>\n-\n-    <TargetResource name=\"ws-target-resource-1\" connector_id=\"100\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-2\" connector_id=\"100\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-list-mappings-1\" connector_id=\"100\" forceMandatoryConstraint=\"0\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-list-mappings-2\" connector_id=\"100\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-delete\" connector_id=\"102\" forceMandatoryConstraint=\"0\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-update\" connector_id=\"100\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-nopropagation\" connector_id=\"103\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"ASYNC\"/>\n-    <TargetResource name=\"ws-target-resource-testdb\" connector_id=\"101\" forceMandatoryConstraint=\"1\" optionalPropagationMode=\"SYNC\"/>\n-\n-    <SyncopeUser_TargetResource users_id=\"3\" targetResources_name=\"ws-target-resource-delete\" />\n-    <SyncopeRole_TargetResource roles_id=\"3\" targetResources_name=\"ws-target-resource-list-mappings-1\" />\n-    <SyncopeUser_TargetResource users_id=\"3\" targetResources_name=\"ws-target-resource-2\" />\n-    <SyncopeRole_TargetResource roles_id=\"8\" targetResources_name=\"ws-target-resource-2\" />\n-    <SyncopeRole_TargetResource roles_id=\"3\" targetResources_name=\"ws-target-resource-list-mappings-2\" />\n-    <SyncopeUser_TargetResource users_id=\"3\" targetResources_name=\"ws-target-resource-1\" />\n-\n-    <SchemaMapping id=\"99\" destAttrName=\"userid\"\n-                   resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"SyncopeUserId\" sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"100\" destAttrName=\"email\"\n-                   resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"email\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"101\" destAttrName=\"userId\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"username\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"102\" destAttrName=\"email\"\n-                   resource_name=\"ws-target-resource-list-mappings-1\"\n-                   sourceAttrName=\"email\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"103\" destAttrName=\"surname\"\n-                   resource_name=\"ws-target-resource-list-mappings-1\"\n-                   sourceAttrName=\"surname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"104\" destAttrName=\"userid\"\n-                   resource_name=\"ws-target-resource-list-mappings-2\"\n-                   sourceAttrName=\"userId\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"105\" destAttrName=\"surname\"\n-                   resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"surname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"106\" destAttrName=\"password\"\n-                   resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"1\"/>\n-\n-    <SchemaMapping id=\"107\" destAttrName=\"password\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"1\"/>\n-\n-    <SchemaMapping id=\"108\" destAttrName=\"type\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"type\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"109\" destAttrName=\"surname\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"surname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"type == 'F'\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"110\" destAttrName=\"email\"\n-                   resource_name=\"ws-target-resource-update\"\n-                   sourceAttrName=\"email\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"111\" destAttrName=\"userId\"\n-                   resource_name=\"ws-target-resource-update\"\n-                   sourceAttrName=\"userId\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                   accountid=\"0\" password=\"0\"/>\n-    \n-    <SchemaMapping id=\"112\" destAttrName=\"test3\"\n-                   resource_name=\"ws-target-resource-update\"\n-                   sourceAttrName=\"username\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"113\" destAttrName=\"name\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"virtualdata\" sourceMappingType=\"UserVirtualSchema\" mandatoryCondition=\"type == 'F'\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"114\" destAttrName=\"fullname\"\n-                   resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"cn\" sourceMappingType=\"UserDerivedSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"0\"/>\n-\n-    <SchemaMapping id=\"115\" destAttrName=\"name\"\n-                   resource_name=\"ws-target-resource-nopropagation\"\n-                   sourceAttrName=\"firstname\" sourceMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-                   \n-    <SchemaMapping id=\"116\" destAttrName=\"id\"\n-                   resource_name=\"ws-target-resource-testdb\"\n-                   sourceAttrName=\"SyncopeUserId\" sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n-                   accountid=\"1\" password=\"0\"/>\n-                   \n-    <SchemaMapping id=\"117\" destAttrName=\"password\"\n-                   resource_name=\"ws-target-resource-testdb\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n-                   accountid=\"0\" password=\"1\"/>\n-\n-    <Task DTYPE=\"PropagationTask\" id=\"1\" propagationMode=\"ASYNC\" resourceOperationType=\"UPDATE\"\n-                 resource_name=\"ws-target-resource-2\"\n-                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Efullname%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Efullname%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E%0A\"/>\n-    <TaskExec id=\"1\" task_id=\"1\" status=\"SUCCESS\"/>\n-    <Task DTYPE=\"PropagationTask\" id=\"2\" propagationMode=\"SYNC\" resourceOperationType=\"CREATE\"\n-                 resource_name=\"ws-target-resource-2\"\n-                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Efullname%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Efullname%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E%0A\"/>\n-    <Task DTYPE=\"PropagationTask\" id=\"3\" propagationMode=\"ASYNC\" resourceOperationType=\"DELETE\"\n-                 resource_name=\"ws-target-resource-2\"\n-                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E\"/>\n-    <Task DTYPE=\"SyncTask\" id=\"4\" resource_name=\"ws-target-resource-2\" updateIdentities=\"1\" jobClassName=\"org.syncope.core.scheduling.SyncJob\" cronExpression=\"0 0 10 * * ?\"/>\n-    <Task DTYPE=\"SchedTask\" id=\"5\" jobClassName=\"org.syncope.core.scheduling.SampleJob\" cronExpression=\"0 0 0 1 * ?\"/>\n-\n-    <RDerSchema name=\"displayProperty\" expression=\"icon + ': ' + show\"/>\n-\n-    <RDerAttr id=\"1001\" derivedSchema_name=\"displayProperty\" owner_id=\"1\"/>\n-    <RDerAttr id=\"1002\" derivedSchema_name=\"displayProperty\" owner_id=\"4\"/>\n-\n     <!-- Authentication and authorization -->\n-    <Entitlement name=\"base\"/>\n-    <Entitlement name=\"advanced\" description=\"Advanced entitlement\"/>\n     <Entitlement name=\"SCHEMA_LIST\"/>\n     <Entitlement name=\"SCHEMA_CREATE\"/>\n     <Entitlement name=\"SCHEMA_READ\"/>\n@@ -403,24 +101,5 @@\n     <Entitlement name=\"TASK_DELETE\"/>\n     <Entitlement name=\"LOG_LIST\"/>\n     <Entitlement name=\"LOG_SET_LEVEL\"/>\n-    <Entitlement name=\"ROLE_1\"/>\n-    <Entitlement name=\"ROLE_2\"/>\n-    <Entitlement name=\"ROLE_3\"/>\n-    <Entitlement name=\"ROLE_4\"/>\n-    <Entitlement name=\"ROLE_5\"/>\n-    <Entitlement name=\"ROLE_6\"/>\n-    <Entitlement name=\"ROLE_7\"/>\n-    <Entitlement name=\"ROLE_8\"/>\n \n-    <SyncopeRole_Entitlement entitlements_name=\"base\" roles_id=\"1\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"advanced\" roles_id=\"1\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"base\" roles_id=\"2\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"SCHEMA_READ\" roles_id=\"8\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"ROLE_LIST\" roles_id=\"8\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"USER_READ\" roles_id=\"2\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"USER_LIST\" roles_id=\"2\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"USER_READ\" roles_id=\"7\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"USER_LIST\" roles_id=\"7\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"ROLE_8\" roles_id=\"7\"/>\n-    <SyncopeRole_Entitlement entitlements_name=\"ROLE_1\" roles_id=\"7\"/>\n </dataset>"},{"sha":"575574639a086e4b917151fe56582b81c771888d","filename":"console/src/main/java/org/syncope/console/pages/MembershipModalPage.java","status":"modified","additions":9,"deletions":14,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -24,6 +24,7 @@\n import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.Model;\n import org.syncope.client.to.MembershipTO;\n+import org.syncope.client.to.UserTO;\n import org.syncope.console.pages.panels.DerivedAttributesPanel;\n import org.syncope.console.pages.panels.VirtualAttributesPanel;\n \n@@ -34,28 +35,22 @@ public class MembershipModalPage extends BaseModalPage {\n \n     private AjaxButton submit;\n \n-    public MembershipModalPage(final Page basePage, final ModalWindow window,\n-            final MembershipTO membershipTO, final boolean createFlag) {\n+    public MembershipModalPage(\n+            final Page basePage,\n+            final ModalWindow window,\n+            final MembershipTO membershipTO,\n+            final UserTO userTO) {\n \n         final Form form = new Form(\"MembershipForm\");\n \n         form.setModel(new CompoundPropertyModel(membershipTO));\n \n-\n         submit = new AjaxButton(\"submit\", new Model(getString(\"submit\"))) {\n \n             @Override\n             protected void onSubmit(AjaxRequestTarget target, Form form) {\n-\n-                if (createFlag) {\n-                    ((UserModalPage) basePage).getMembershipTOs().add(\n-                            membershipTO);\n-                } else {\n-                    ((UserModalPage) basePage).getMembershipTOs().remove(\n-                            membershipTO);\n-                    ((UserModalPage) basePage).getMembershipTOs().add(\n-                            membershipTO);\n-                }\n+                userTO.removeMembership(membershipTO);\n+                userTO.addMembership(membershipTO);\n                 window.close(target);\n             }\n \n@@ -67,7 +62,7 @@ protected void onError(AjaxRequestTarget target, Form form) {\n \n         String allowedRoles = null;\n \n-        if (createFlag) {\n+        if (userTO.getId() == 0) {\n             allowedRoles = xmlRolesReader.getAllAllowedRoles(\"Users\", \"create\");\n         } else {\n             allowedRoles = xmlRolesReader.getAllAllowedRoles(\"Users\", \"update\");"},{"sha":"7afd224c1b5b6a4f1bc8663be7b6ad42ab7b7709","filename":"console/src/main/java/org/syncope/console/pages/RoleModalPage.java","status":"modified","additions":24,"deletions":8,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -207,7 +207,7 @@ private void cloneOldRoleTO(RoleTO roleTO) {\n         oldRole.setName(roleTO.getName());\n         oldRole.setParent(roleTO.getParent());\n \n-        final List<AttributeTO> attributes = new ArrayList<AttributeTO>();\n+        List<AttributeTO> attributes = new ArrayList<AttributeTO>();\n \n         AttributeTO attributeTO;\n \n@@ -225,18 +225,28 @@ private void cloneOldRoleTO(RoleTO roleTO) {\n \n         oldRole.setAttributes(attributes);\n \n+        attributes = new ArrayList<AttributeTO>();\n+\n         for (AttributeTO attribute : roleTO.getDerivedAttributes()) {\n             attributeTO = new AttributeTO();\n             attributeTO.setReadonly(attribute.isReadonly());\n             attributeTO.setSchema(attribute.getSchema());\n+            attributes.add(attributeTO);\n+        }\n \n-            for (String value : attribute.getValues()) {\n-                attributeTO.addValue(value);\n-            }\n+        oldRole.setDerivedAttributes(attributes);\n+\n+        attributes = new ArrayList<AttributeTO>();\n \n-            oldRole.addDerivedAttribute(attributeTO);\n+        for (AttributeTO attribute : roleTO.getVirtualAttributes()) {\n+            attributeTO = new AttributeTO();\n+            attributeTO.setReadonly(attribute.isReadonly());\n+            attributeTO.setSchema(attribute.getSchema());\n+            attributes.add(attributeTO);\n         }\n \n+        oldRole.setVirtualAttributes(attributes);\n+\n         for (String resource : roleTO.getResources()) {\n             oldRole.addResource(resource);\n         }\n@@ -253,12 +263,15 @@ private void cloneOldRoleTO(RoleTO roleTO) {\n     private void setupRoleMod(final RoleTO roleTO) {\n         roleMod = new RoleMod();\n \n+        LOG.error(\"AAAAAAAAA1 {}\", roleTO);\n+        LOG.error(\"AAAAAAAAA2 {}\", oldRole);\n+\n         //1.Check if the role's name has been changed\n         if (!oldRole.getName().equals(roleTO.getName())) {\n             roleMod.setName(roleTO.getName());\n         }\n \n-        //2.Update user's schema derived attributes\n+        //2.Update roles's schema derived attributes\n         final List<AttributeTO> newDerivedAttributes =\n                 roleTO.getDerivedAttributes();\n \n@@ -275,7 +288,7 @@ private void setupRoleMod(final RoleTO roleTO) {\n                     newDerivedAttribute.getSchema());\n         }\n \n-        //4.Update user's schema virtual attributes\n+        //4.Update roles's schema virtual attributes\n         final List<AttributeTO> newVirtualAttributes =\n                 roleTO.getVirtualAttributes();\n \n@@ -292,6 +305,8 @@ private void setupRoleMod(final RoleTO roleTO) {\n                     newVirtualAttribute.getSchema());\n         }\n \n+        LOG.error(\"AAAAAAAAA2 {}\", roleMod);\n+\n         //4.Search and update role's attributes\n         for (AttributeTO attributeTO : roleTO.getAttributes()) {\n             searchAndUpdateAttribute(attributeTO);\n@@ -393,7 +408,8 @@ private void searchAndUpdateAttribute(AttributeTO attributeTO) {\n             if (attributeTO.getSchema().equals(oldAttribute.getSchema())) {\n \n                 if (attributeTO.getSchema().equals(oldAttribute.getSchema())\n-                        && !attributeTO.equals(oldAttribute) && !oldAttribute.isReadonly()) {\n+                        && !attributeTO.equals(oldAttribute)\n+                        && !oldAttribute.isReadonly()) {\n \n                     if (attributeTO.getValues().size() > 1) {\n                         attributeMod.setValuesToBeAdded("},{"sha":"75c209d1c5d94941a3f6b1727fd0dac9d16b5fa0","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":41,"deletions":204,"changes":245,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -16,53 +16,38 @@\n  */\n package org.syncope.console.pages;\n \n-import org.syncope.console.pages.panels.AttributesPanel;\n import java.util.ArrayList;\n+import org.syncope.console.pages.panels.AttributesPanel;\n import java.util.HashSet;\n-import java.util.Iterator;\n import java.util.List;\n import java.util.Set;\n-import javax.swing.tree.DefaultMutableTreeNode;\n import org.apache.wicket.Component;\n-import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.behavior.AbstractBehavior;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.ComponentTag;\n-import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.WebMarkupContainerWithAssociatedMarkup;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.PasswordTextField;\n-import org.apache.wicket.markup.html.list.ListItem;\n-import org.apache.wicket.markup.html.list.ListView;\n-import org.apache.wicket.markup.html.tree.BaseTree;\n-import org.apache.wicket.markup.html.tree.LinkTree;\n import org.apache.wicket.model.CompoundPropertyModel;\n-import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n-import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.mod.AttributeMod;\n import org.syncope.client.mod.MembershipMod;\n import org.syncope.client.mod.UserMod;\n import org.syncope.client.to.AttributeTO;\n import org.syncope.client.to.MembershipTO;\n-import org.syncope.client.to.RoleTO;\n import org.syncope.client.to.UserTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.commons.Constants;\n-import org.syncope.console.commons.RoleTreeBuilder;\n-import org.syncope.console.rest.RoleRestClient;\n import org.syncope.console.rest.UserRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.pages.panels.DerivedAttributesPanel;\n import org.syncope.console.pages.panels.ResourcesPanel;\n+import org.syncope.console.pages.panels.RolesPanel;\n import org.syncope.console.pages.panels.VirtualAttributesPanel;\n \n /**\n@@ -73,20 +58,6 @@ public class UserModalPage extends BaseModalPage {\n     @SpringBean\n     private UserRestClient userRestClient;\n \n-    @SpringBean\n-    private RoleRestClient roleRestClient;\n-\n-    @SpringBean\n-    private RoleTreeBuilder roleTreeBuilder;\n-\n-    private WebMarkupContainer membershipsContainer;\n-\n-    private AjaxButton submit;\n-\n-    private List<MembershipTO> membershipTOs;\n-\n-    private final ModalWindow membershipWin;\n-\n     private UserTO oldUser;\n \n     private UserMod userMod;\n@@ -102,20 +73,12 @@ public UserModalPage(\n             cloneOldUserTO(userTO);\n         }\n \n-        membershipWin = new ModalWindow(\"membershipWin\");\n-        membershipWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        membershipWin.setPageMapName(\"create-membership-modal\");\n-        membershipWin.setCookieName(\"create-membership-modal\");\n-        add(membershipWin);\n-\n         add(new Label(\"id\", String.valueOf(userTO.getId())));\n \n         final Form form = new Form(\"UserForm\");\n \n         form.setModel(new CompoundPropertyModel(userTO));\n \n-        setupMemberships(userTO);\n-\n         //--------------------------------\n         // Attributes panel\n         //--------------------------------\n@@ -161,7 +124,13 @@ public void onComponentTag(final Component component,\n         form.add(new ResourcesPanel(\"resources\", userTO));\n         //--------------------------------\n \n-        submit = new IndicatingAjaxButton(\"submit\", new Model(\n+        //--------------------------------\n+        // Roles panel\n+        //--------------------------------\n+        form.add(new RolesPanel(\"roles\", userTO));\n+        //--------------------------------\n+\n+        final AjaxButton submit = new IndicatingAjaxButton(\"submit\", new Model(\n                 getString(\"submit\"))) {\n \n             @Override\n@@ -171,7 +140,6 @@ protected void onSubmit(final AjaxRequestTarget target,\n                 final UserTO userTO = (UserTO) form.getModelObject();\n \n                 try {\n-                    userTO.setMemberships(getMembershipsSet());\n \n                     if (userTO.getId() == 0) {\n                         userRestClient.create(userTO);\n@@ -213,121 +181,9 @@ protected void onError(AjaxRequestTarget target, Form form) {\n \n         form.add(submit);\n \n-        // Roles Tab\n-        final List<RoleTO> roles = roleRestClient.getAllRoles();\n-        BaseTree tree = new LinkTree(\"treeTable\",\n-                roleTreeBuilder.build(roles)) {\n-\n-            @Override\n-            protected IModel getNodeTextModel(final IModel model) {\n-                return new PropertyModel(model, \"userObject.displayName\");\n-            }\n-\n-            @Override\n-            protected void onNodeLinkClicked(final Object node,\n-                    final BaseTree tree, final AjaxRequestTarget target) {\n-\n-                final RoleTO roleTO = (RoleTO) ((DefaultMutableTreeNode) node).getUserObject();\n-\n-                membershipWin.setPageCreator(new ModalWindow.PageCreator() {\n-\n-                    private MembershipTO membershipTO;\n-\n-                    @Override\n-                    public Page createPage() {\n-                        membershipTO = new MembershipTO();\n-                        membershipTO.setRoleId(roleTO.getId());\n-\n-                        return new MembershipModalPage(getPage(),\n-                                membershipWin, membershipTO, true);\n-                    }\n-                });\n-                membershipWin.show(target);\n-            }\n-        };\n-\n-        tree.getTreeState().expandAll();\n-        tree.updateTree();\n-\n-        form.add(tree);\n-\n-        ListView membershipsView = new ListView(\"memberships\", membershipTOs) {\n-\n-            @Override\n-            protected void populateItem(final ListItem item) {\n-                final MembershipTO membershipTO =\n-                        (MembershipTO) item.getDefaultModelObject();\n-\n-                item.add(new Label(\"roleId\", new Model(\n-                        membershipTO.getRoleId())));\n-                item.add(new Label(\"roleName\", new Model(\n-                        getRoleName(membershipTO.getRoleId(), roles))));\n-\n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n-\n-                    @Override\n-                    public void onClick(AjaxRequestTarget target) {\n-                        membershipWin.setPageCreator(\n-                                new ModalWindow.PageCreator() {\n-\n-                                    @Override\n-                                    public Page createPage() {\n-                                        MembershipModalPage window =\n-                                                new MembershipModalPage(\n-                                                getPage(), membershipWin,\n-                                                membershipTO,\n-                                                false);\n-\n-                                        return window;\n-\n-                                    }\n-                                });\n-                        membershipWin.show(target);\n-                    }\n-                };\n-                item.add(editLink);\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    @Override\n-                    public void onClick(final AjaxRequestTarget target) {\n-                        int componentId = new Integer(getParent().getId());\n-                        membershipTOs.remove(componentId);\n-\n-                        target.addComponent(membershipsContainer);\n-                    }\n-                };\n-                item.add(deleteLink);\n-            }\n-        };\n-\n-        membershipsContainer = new WebMarkupContainer(\"membershipsContainer\");\n-        membershipsContainer.add(membershipsView);\n-        membershipsContainer.setOutputMarkupId(true);\n-\n-        setWindowClosedCallback(membershipWin, membershipsContainer);\n-\n-        form.add(membershipsContainer);\n         add(form);\n     }\n \n-    private String getRoleName(long roleId, List<RoleTO> roles) {\n-        boolean found = false;\n-        RoleTO roleTO;\n-        String result = null;\n-        for (Iterator<RoleTO> itor = roles.iterator();\n-                itor.hasNext() && !found;) {\n-\n-            roleTO = itor.next();\n-            if (roleTO.getId() == roleId) {\n-                result = roleTO.getName();\n-            }\n-        }\n-\n-        return result;\n-    }\n-\n     /**\n      * Create a copy of old userTO object.\n      * @param userTO the original TO\n@@ -338,6 +194,8 @@ private void cloneOldUserTO(final UserTO userTO) {\n         oldUser.setId(userTO.getId());\n         oldUser.setPassword(userTO.getPassword());\n \n+        List<AttributeTO> attributes = new ArrayList<AttributeTO>();\n+\n         AttributeTO attributeTO;\n         for (AttributeTO attribute : userTO.getAttributes()) {\n             attributeTO = new AttributeTO();\n@@ -349,22 +207,33 @@ private void cloneOldUserTO(final UserTO userTO) {\n                 attributeTO.addValue(value);\n             }\n \n-            oldUser.addAttribute(attributeTO);\n+            attributes.add(attributeTO);\n         }\n \n+        oldUser.setAttributes(attributes);\n+\n+        attributes = new ArrayList<AttributeTO>();\n+\n         for (AttributeTO attribute : userTO.getDerivedAttributes()) {\n             attributeTO = new AttributeTO();\n             attributeTO.setReadonly(attribute.isReadonly());\n-\n             attributeTO.setSchema(attribute.getSchema());\n+            attributes.add(attributeTO);\n+        }\n \n-            for (String value : attribute.getValues()) {\n-                attributeTO.addValue(value);\n-            }\n+        oldUser.setDerivedAttributes(attributes);\n+\n+        attributes = new ArrayList<AttributeTO>();\n \n-            oldUser.addDerivedAttribute(attributeTO);\n+        for (AttributeTO attribute : userTO.getVirtualAttributes()) {\n+            attributeTO = new AttributeTO();\n+            attributeTO.setReadonly(attribute.isReadonly());\n+            attributeTO.setSchema(attribute.getSchema());\n+            attributes.add(attributeTO);\n         }\n \n+        oldUser.setVirtualAttributes(attributes);\n+\n         for (String resource : userTO.getResources()) {\n             oldUser.addResource(resource);\n         }\n@@ -376,58 +245,20 @@ private void cloneOldUserTO(final UserTO userTO) {\n             membership.setId(membershipTO.getId());\n             membership.setRoleId(membershipTO.getRoleId());\n             membership.setAttributes(membershipTO.getAttributes());\n+            membership.setVirtualAttributes(\n+                    membershipTO.getVirtualAttributes());\n+            membership.setDerivedAttributes(\n+                    membershipTO.getDerivedAttributes());\n             oldUser.addMembership(membership);\n         }\n     }\n \n-    private void setWindowClosedCallback(final ModalWindow window,\n-            final WebMarkupContainer container) {\n-\n-        window.setWindowClosedCallback(\n-                new ModalWindow.WindowClosedCallback() {\n-\n-                    @Override\n-                    public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n-                    }\n-                });\n-    }\n-\n-    private void setupMemberships(final UserTO userTO) {\n-        membershipTOs = new ArrayList<MembershipTO>();\n-\n-        if (userTO.getId() > 0) {\n-            List<MembershipTO> memberships = userTO.getMemberships();\n-\n-            for (MembershipTO membership : memberships) {\n-                membershipTOs.add(membership);\n-            }\n-        }\n-    }\n-\n-    /**\n-     * Convert a memberships ArrayList in a memberships HashSet list.\n-     * @return Set<MembershipTO> selected for a new user.\n-     */\n-    private List<MembershipTO> getMembershipsSet() {\n-        List<MembershipTO> memberships = new ArrayList<MembershipTO>();\n-\n-        for (MembershipTO membership : membershipTOs) {\n-            memberships.add(membership);\n-        }\n-\n-        return memberships;\n-    }\n-\n-    public List<MembershipTO> getMembershipTOs() {\n-        return membershipTOs;\n-    }\n-\n     /**\n      * Updates the modified user object.\n      * @param userTO\n      */\n     private void setupUserMod(final UserTO userTO) {\n+\n         userMod = new UserMod();\n \n         //1.Check if the password has been changed and update it\n@@ -455,10 +286,10 @@ private void setupUserMod(final UserTO userTO) {\n \n         //3.Update user's schema virtual attributes\n         final List<AttributeTO> newVirtualAttributes =\n-                userTO.getDerivedAttributes();\n+                userTO.getVirtualAttributes();\n \n         final List<AttributeTO> oldVirtualAttributes =\n-                oldUser.getDerivedAttributes();\n+                oldUser.getVirtualAttributes();\n \n         for (AttributeTO oldVirtualAttribute : oldVirtualAttributes) {\n             userMod.addVirtualAttributeToBeRemoved(\n@@ -623,6 +454,12 @@ private void searchAndUpdateMembership(MembershipTO membership) {\n                             newDerivedAttribute.getSchema());\n                 }\n \n+                for (AttributeTO newVirtualAttribute :\n+                        membership.getVirtualAttributes()) {\n+                    membershipMod.addVirtualAttributeToBeAdded(\n+                            newVirtualAttribute.getSchema());\n+                }\n+\n                 for (AttributeTO newAttribute : membership.getAttributes()) {\n                     for (AttributeTO oldAttribute :\n                             oldMembership.getAttributes()) {"},{"sha":"617d8c34831d8a4c5a169370a5c43085718b0348","filename":"console/src/main/java/org/syncope/console/pages/panels/AttributesPanel.java","status":"modified","additions":63,"deletions":64,"changes":127,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -108,85 +108,84 @@ protected Map<String, SchemaTO> load() {\n \n         initEntityData(entityTO, schemas.getObject().values());\n \n-        final ListView<AttributeTO> userAttributesView =\n-                new ListView<AttributeTO>(\n+        final ListView<AttributeTO> attributeView = new ListView<AttributeTO>(\n                 \"schemas\", new PropertyModel<List<? extends AttributeTO>>(\n                 entityTO, \"attributes\")) {\n \n+            @Override\n+            protected void populateItem(ListItem item) {\n+                final AttributeTO attributeTO =\n+                        (AttributeTO) item.getDefaultModelObject();\n+\n+                item.add(new Label(\"name\", attributeTO.getSchema()));\n+\n+                item.add(new ListView(\n+                        \"fields\", attributeTO.getValues()) {\n+\n                     @Override\n-                    protected void populateItem(ListItem item) {\n-                        final AttributeTO attributeTO =\n-                                (AttributeTO) item.getDefaultModelObject();\n+                    protected void populateItem(final ListItem item) {\n+                        item.add(getFieldPanel(schemas.getObject().get(\n+                                attributeTO.getSchema()), form, item));\n+                    }\n+                });\n+\n+                final AjaxButton addButton =\n+                        new IndicatingAjaxButton(\"add\",\n+                        new Model(getString(\"add\"))) {\n \n-                        item.add(new Label(\"name\", attributeTO.getSchema()));\n+                            @Override\n+                            protected void onSubmit(\n+                                    final AjaxRequestTarget target,\n+                                    final Form form) {\n+                                attributeTO.getValues().add(\"\");\n+                                target.addComponent(attributesContainer);\n+                            }\n+                        };\n \n-                        item.add(new ListView(\n-                                \"fields\", attributeTO.getValues()) {\n+                final AjaxButton dropButton =\n+                        new IndicatingAjaxButton(\"drop\",\n+                        new Model(getString(\"drop\"))) {\n \n                             @Override\n-                            protected void populateItem(final ListItem item) {\n-                                item.add(getFieldPanel(schemas.getObject().get(\n-                                        attributeTO.getSchema()), form, item));\n+                            protected void onSubmit(\n+                                    final AjaxRequestTarget target,\n+                                    final Form form) {\n+                                //Drop the last component added\n+                                attributeTO.getValues().remove(\n+                                        attributeTO.getValues().size() - 1);\n+\n+                                target.addComponent(attributesContainer);\n                             }\n-                        });\n-\n-                        final AjaxButton addButton =\n-                                new IndicatingAjaxButton(\"add\",\n-                                new Model(getString(\"add\"))) {\n-\n-                                    @Override\n-                                    protected void onSubmit(\n-                                            final AjaxRequestTarget target,\n-                                            final Form form) {\n-                                        attributeTO.getValues().add(\"\");\n-                                        target.addComponent(attributesContainer);\n-                                    }\n-                                };\n-\n-                        final AjaxButton dropButton =\n-                                new IndicatingAjaxButton(\"drop\",\n-                                new Model(getString(\"drop\"))) {\n-\n-                                    @Override\n-                                    protected void onSubmit(\n-                                            final AjaxRequestTarget target,\n-                                            final Form form) {\n-                                        //Drop the last component added\n-                                        attributeTO.getValues().remove(\n-                                                attributeTO.getValues().size() - 1);\n-\n-                                        target.addComponent(attributesContainer);\n-                                    }\n-                                };\n-\n-                        if (schemas.getObject().get(attributeTO.getSchema()).\n-                                getType() == SchemaType.Boolean) {\n-                            addButton.setVisible(false);\n-                            dropButton.setVisible(false);\n-                        }\n+                        };\n \n-                        addButton.setVisible(\n-                                schemas.getObject().get(\n-                                attributeTO.getSchema()).isMultivalue());\n-                        dropButton.setVisible(\n-                                schemas.getObject().get(\n-                                attributeTO.getSchema()).isMultivalue());\n+                if (schemas.getObject().get(attributeTO.getSchema()).\n+                        getType() == SchemaType.Boolean) {\n+                    addButton.setVisible(false);\n+                    dropButton.setVisible(false);\n+                }\n \n-                        dropButton.setVisible(\n-                                attributeTO.getValues().size() > 1);\n+                addButton.setVisible(\n+                        schemas.getObject().get(\n+                        attributeTO.getSchema()).isMultivalue());\n+                dropButton.setVisible(\n+                        schemas.getObject().get(\n+                        attributeTO.getSchema()).isMultivalue());\n \n-                        addButton.setEnabled(!attributeTO.isReadonly());\n-                        dropButton.setEnabled(!attributeTO.isReadonly());\n+                dropButton.setVisible(\n+                        attributeTO.getValues().size() > 1);\n \n-                        addButton.setDefaultFormProcessing(false);\n-                        dropButton.setDefaultFormProcessing(false);\n+                addButton.setEnabled(!attributeTO.isReadonly());\n+                dropButton.setEnabled(!attributeTO.isReadonly());\n \n-                        item.add(addButton);\n-                        item.add(dropButton);\n-                    }\n-                };\n+                addButton.setDefaultFormProcessing(false);\n+                dropButton.setDefaultFormProcessing(false);\n+\n+                item.add(addButton);\n+                item.add(dropButton);\n+            }\n+        };\n \n-        attributesContainer.add(userAttributesView);\n+        attributesContainer.add(attributeView);\n     }\n \n     private List<AttributeTO> initEntityData("},{"sha":"d4e3b7b3144ddf4cf95a709e5782c10cccc1deb7","filename":"console/src/main/java/org/syncope/console/pages/panels/RolesPanel.java","status":"added","additions":187,"deletions":0,"changes":187,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -0,0 +1,187 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.pages.panels;\n+\n+import java.util.Iterator;\n+import java.util.List;\n+import javax.swing.tree.DefaultMutableTreeNode;\n+import org.apache.wicket.Page;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.AjaxLink;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n+import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.basic.Label;\n+import org.apache.wicket.markup.html.list.ListItem;\n+import org.apache.wicket.markup.html.list.ListView;\n+import org.apache.wicket.markup.html.panel.Panel;\n+import org.apache.wicket.markup.html.tree.BaseTree;\n+import org.apache.wicket.markup.html.tree.LinkTree;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.PropertyModel;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.syncope.client.to.MembershipTO;\n+import org.syncope.client.to.RoleTO;\n+import org.syncope.client.to.UserTO;\n+import org.syncope.console.commons.RoleTreeBuilder;\n+import org.syncope.console.pages.MembershipModalPage;\n+import org.syncope.console.rest.RoleRestClient;\n+import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n+\n+public class RolesPanel extends Panel {\n+\n+    @SpringBean\n+    private RoleRestClient roleRestClient;\n+\n+    @SpringBean\n+    private RoleTreeBuilder roleTreeBuilder;\n+\n+    private WebMarkupContainer membershipsContainer;\n+\n+    public RolesPanel(final String id, final UserTO userTO) {\n+        super(id);\n+\n+        final ModalWindow membershipWin = new ModalWindow(\"membershipWin\");\n+        membershipWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        membershipWin.setPageMapName(\"create-membership-modal\");\n+        membershipWin.setCookieName(\"create-membership-modal\");\n+        add(membershipWin);\n+\n+        final List<RoleTO> roles = roleRestClient.getAllRoles();\n+        BaseTree tree = new LinkTree(\"treeTable\", roleTreeBuilder.build()) {\n+\n+            @Override\n+            protected IModel getNodeTextModel(final IModel model) {\n+                return new PropertyModel(model, \"userObject.displayName\");\n+            }\n+\n+            @Override\n+            protected void onNodeLinkClicked(final Object node,\n+                    final BaseTree tree, final AjaxRequestTarget target) {\n+\n+                final RoleTO roleTO =\n+                        (RoleTO) ((DefaultMutableTreeNode) node).getUserObject();\n+\n+                membershipWin.setPageCreator(new ModalWindow.PageCreator() {\n+\n+                    private MembershipTO membershipTO;\n+\n+                    @Override\n+                    public Page createPage() {\n+                        membershipTO = new MembershipTO();\n+                        membershipTO.setRoleId(roleTO.getId());\n+\n+                        return new MembershipModalPage(getPage(),\n+                                membershipWin, membershipTO, userTO);\n+                    }\n+                });\n+                membershipWin.show(target);\n+            }\n+        };\n+\n+        tree.getTreeState().expandAll();\n+        tree.updateTree();\n+\n+        add(tree);\n+\n+        ListView<MembershipTO> membershipsView = new ListView<MembershipTO>(\n+                \"memberships\", new PropertyModel<List<? extends MembershipTO>>(\n+                userTO, \"memberships\")) {\n+\n+            @Override\n+            protected void populateItem(final ListItem item) {\n+                final MembershipTO membershipTO =\n+                        (MembershipTO) item.getDefaultModelObject();\n+\n+                item.add(new Label(\"roleId\", new Model(\n+                        membershipTO.getRoleId())));\n+                item.add(new Label(\"roleName\", new Model(\n+                        getRoleName(membershipTO.getRoleId(), roles))));\n+\n+                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n+\n+                    @Override\n+                    public void onClick(AjaxRequestTarget target) {\n+                        membershipWin.setPageCreator(\n+                                new ModalWindow.PageCreator() {\n+\n+                                    @Override\n+                                    public Page createPage() {\n+                                        MembershipModalPage window =\n+                                                new MembershipModalPage(\n+                                                getPage(), membershipWin,\n+                                                membershipTO,\n+                                                userTO);\n+\n+                                        return window;\n+\n+                                    }\n+                                });\n+                        membershipWin.show(target);\n+                    }\n+                };\n+                item.add(editLink);\n+\n+                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n+                        \"deleteLink\") {\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        userTO.removeMembership(membershipTO);\n+                        target.addComponent(membershipsContainer);\n+                    }\n+                };\n+                item.add(deleteLink);\n+            }\n+        };\n+\n+        membershipsContainer = new WebMarkupContainer(\"membershipsContainer\");\n+        membershipsContainer.add(membershipsView);\n+        membershipsContainer.setOutputMarkupId(true);\n+        add(membershipsContainer);\n+\n+        setWindowClosedCallback(membershipWin, membershipsContainer);\n+    }\n+\n+    private String getRoleName(long roleId, List<RoleTO> roles) {\n+        boolean found = false;\n+        RoleTO roleTO;\n+        String result = null;\n+        for (Iterator<RoleTO> itor = roles.iterator();\n+                itor.hasNext() && !found;) {\n+\n+            roleTO = itor.next();\n+            if (roleTO.getId() == roleId) {\n+                result = roleTO.getName();\n+            }\n+        }\n+\n+        return result;\n+    }\n+\n+    private void setWindowClosedCallback(final ModalWindow window,\n+            final WebMarkupContainer container) {\n+\n+        window.setWindowClosedCallback(\n+                new ModalWindow.WindowClosedCallback() {\n+\n+                    @Override\n+                    public void onClose(final AjaxRequestTarget target) {\n+                        target.addComponent(container);\n+                    }\n+                });\n+    }\n+}"},{"sha":"1001a4ecfe3d6c2083520639435d766b23888aaa","filename":"console/src/main/java/org/syncope/console/pages/panels/VirtualAttributesPanel.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -87,8 +87,7 @@ protected List<String> load() {\n         add(attributesContainer);\n \n         AjaxButton addAttributeBtn = new IndicatingAjaxButton(\n-                \"addAttributeBtn\",\n-                new Model(getString(\"addAttributeBtn\"))) {\n+                \"addAttributeBtn\", new Model(getString(\"addAttributeBtn\"))) {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n@@ -115,7 +114,7 @@ protected void populateItem(final ListItem<AttributeTO> item) {\n \n                     @Override\n                     protected void onUpdate(final AjaxRequestTarget target) {\n-                        entityTO.getVirtualAttributes().remove(attributeTO);\n+                        entityTO.removeVirtualAttribute(attributeTO);\n                         target.addComponent(attributesContainer);\n                     }\n \n@@ -215,7 +214,8 @@ protected void onSubmit(\n                         item.add(addButton.setDefaultFormProcessing(\n                                 Boolean.FALSE));\n \n-                        if (item.getIndex() == attributeTO.getValues().size() - 1) {\n+                        if (item.getIndex()\n+                                == attributeTO.getValues().size() - 1) {\n                             addButton.setVisible(Boolean.TRUE);\n                             addButton.setEnabled(Boolean.TRUE);\n                         } else {"},{"sha":"c613911cbcff2e74223a029dc9c00267bd3f44f4","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.html","status":"modified","additions":1,"deletions":45,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -90,50 +90,7 @@\n                 </div>\n \n                 <div id=\"tabs-5\">\n-                    <p class=\"ui-widget ui-corner-all ui-widget-header\">\n-                    <wicket:message key=\"membership_availability\"/>\n-                    </p>\n-\n-                    <div wicket:id=\"treeTable\"\n-                         style=\"width: 100%;display:block;margin:auto;\"\n-                         class=\"role-tree\"/>\n-\n-                    <p class=\"ui-widget ui-corner-all ui-widget-header\">\n-                    <wicket:message key=\"membership_text\"/>\n-                    </p>\n-\n-                    <table id=\"users\" class=\"roleTable\"\n-                           style=\"font-size:1.1em\" wicket:id=\"membershipsContainer\"\n-                           cellpadding=\"5px\" cellspacing=\"2px\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"id\"/></th>\n-                        <th><wicket:message key=\"name\"/></th>\n-                        <th><wicket:message key=\"edit\"/></th>\n-                        <th><wicket:message key=\"delete\"/></th>\n-                        </tr>\n-                        </thead>\n-                        <tbody>\n-                            <tr wicket:id=\"memberships\">\n-                                <td>\n-                                    <span wicket:id=\"roleId\"/>\n-                                </td>\n-                                <td>\n-                                    <span wicket:id=\"roleName\"/>\n-                                </td>\n-                                <td>\n-                                    <a href=\"#\" wicket:id=\"editLink\">\n-                                        <wicket:message key=\"edit\"/>\n-                                    </a>\n-                                </td>\n-                                <td>\n-                                    <a href=\"#\" wicket:id=\"deleteLink\">\n-                                        <wicket:message key=\"delete\"/>\n-                                    </a>\n-                                </td>\n-                            </tr>\n-                        </tbody>\n-                    </table>\n+                    <span wicket:id=\"roles\">[roles]</span>\n                 </div>\n             </div>\n             <div>\n@@ -143,6 +100,5 @@\n                 <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"submit\"/>\n             </div>\n         </form>\n-        <div wicket:id=\"membershipWin\"/>\n     </div>\n </wicket:extend>\n\\ No newline at end of file"},{"sha":"58d64a91fb0c815bc044f1b02d58c5119b817010","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.properties","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.properties?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -16,12 +16,9 @@ secondResourcesList=Available resources\n updating_error=Generic error occurred during updating\n column1=Roles\n column2=Action\n-id=Role Id\n-name=Role Name\n+\n edit=Edit\n delete=Delete\n-membership_text=Selected roles\n-membership_availability=Roles available\n derivedAttributes=Derived Attributes\n derivedAttributeToBeRemoved=Delete\n derivedAttributeName=Name"},{"sha":"72e397a91081b794fc62ae848d02e5c19e1cf88c","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage_it.properties","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage_it.properties?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -16,12 +16,9 @@ secondResourcesList=Risorse disponibili\n updating_error=Errore generico durante l'aggiornamento\n column1=Ruoli\n column2=Azioni\n-id=Id Ruolo\n edit=Modifica\n delete=Elimina\n-membership_text=Ruoli selezionati\n-membership_availability=Ruoli disponibili\n-name=Nome Ruolo\n+\n derivedAttributes=Attributi derivati\n derivedAttributeToBeRemoved=Elimina\n derivedAttributeName=Nome"},{"sha":"b8fe28c6331fbf8d1a786a7dd5e738a3ba7eedd5","filename":"console/src/main/resources/org/syncope/console/pages/panels/AttributesPanel.html","status":"modified","additions":4,"deletions":6,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.html?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -18,13 +18,11 @@\n             <tr wicket:id=\"schemas\">\n                 <td><span wicket:id=\"name\"/></td>\n                 <td>\n-<!--                    <span wicket:id=\"cc\">-->\n-                        <span wicket:id=\"fields\">\n-                            <span wicket:id=\"panel\">\n-                                [panel for dynamic input type markup]\n-                            </span>\n+                    <span wicket:id=\"fields\">\n+                        <span wicket:id=\"panel\">\n+                            [panel for dynamic input type markup]\n                         </span>\n-<!--                    </span>-->\n+                    </span>\n                     <input type=\"button\" wicket:id=\"add\"/>\n                     <input type=\"button\" wicket:id=\"drop\"/>\n                 </td>"},{"sha":"2a11a8fb266409dcf6061557185b786617d6f53c","filename":"console/src/main/resources/org/syncope/console/pages/panels/RolesPanel.html","status":"added","additions":62,"deletions":0,"changes":62,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.html?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -0,0 +1,62 @@\n+<!--\n+ Licensed under the Apache License, Version 2.0 (the \"License\");\n+ you may not use this file except in compliance with the License.\n+ You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+ Unless required by applicable law or agreed to in writing, software\n+ distributed under the License is distributed on an \"AS IS\" BASIS,\n+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ See the License for the specific language governing permissions and\n+ limitations under the License.\n+ under the License.\n+-->\n+<html>\n+    <wicket:panel>\n+        <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+            <wicket:message key=\"membership_availability\"/>\n+        </p>\n+\n+        <div wicket:id=\"treeTable\"\n+             style=\"width: 100%;display:block;margin:auto;\" class=\"role-tree\"/>\n+\n+        <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+            <wicket:message key=\"membership_text\"/>\n+        </p>\n+\n+        <table id=\"users\" class=\"roleTable\"\n+               style=\"font-size:1.1em\" wicket:id=\"membershipsContainer\"\n+               cellpadding=\"5px\" cellspacing=\"2px\">\n+            <thead>\n+                <tr class=\"ui-widget-header\">\n+                    <th><wicket:message key=\"id\"/></th>\n+                    <th><wicket:message key=\"name\"/></th>\n+                    <th><wicket:message key=\"edit\"/></th>\n+                    <th><wicket:message key=\"delete\"/></th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr wicket:id=\"memberships\">\n+                    <td>\n+                        <span wicket:id=\"roleId\"/>\n+                    </td>\n+                    <td>\n+                        <span wicket:id=\"roleName\"/>\n+                    </td>\n+                    <td>\n+                        <a href=\"#\" wicket:id=\"editLink\">\n+                            <wicket:message key=\"edit\"/>\n+                        </a>\n+                    </td>\n+                    <td>\n+                        <a href=\"#\" wicket:id=\"deleteLink\">\n+                            <wicket:message key=\"delete\"/>\n+                        </a>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+        <div wicket:id=\"membershipWin\"/>\n+    </wicket:panel>\n+</html>"},{"sha":"530b88e28435050a5ec3b8f2965017ed40a14dc4","filename":"console/src/main/resources/org/syncope/console/pages/panels/RolesPanel.properties","status":"added","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.properties?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -0,0 +1,7 @@\n+id=Role Id\n+name=Role Name\n+edit=Edit\n+delete=Delete\n+\n+membership_availability=Roles available\n+membership_text=Selected roles\n\\ No newline at end of file"},{"sha":"be706c505537287fe92f40d3113a961d82310a5f","filename":"console/src/main/resources/org/syncope/console/pages/panels/RolesPanel_it.properties","status":"added","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel_it.properties?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -0,0 +1,8 @@\n+id=Id Ruolo\n+edit=Modifica\n+delete=Elimina\n+name=Nome Ruolo\n+\n+membership_availability=Ruoli disponibili\n+membership_text=Ruoli selezionati\n+"},{"sha":"004f7202f8e1c2c3bf3303219b6c324c7733933a","filename":"core/pom.xml","status":"modified","additions":5,"deletions":4,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -395,6 +395,7 @@\n                                     <patternset>\n                                         <exclude name=\"**/content.xml\" />\n                                         <exclude name=\"**/ehcache.xml\" />\n+                                        <exclude name=\"**/userWorkflow.xml\" />\n                                         <exclude name=\"**/persistence.properties\" />\n                                         <exclude name=\"**/security.properties\" />\n                                     </patternset>\n@@ -438,13 +439,13 @@\n                                     <groupId>org.connid.bundles.soap</groupId>\n                                     <artifactId>org.connid.bundles.soap</artifactId>\n                                     <version>${connid.soap.version}</version>\n-                                    <outputDirectory>${bundles.directory}</outputDirectory>                                \n+                                    <outputDirectory>${bundles.directory}</outputDirectory>\n                                 </artifactItem>\n                                 <artifactItem>\n                                     <groupId>org.connid.bundles.db</groupId>\n                                     <artifactId>org.connid.bundles.db.table</artifactId>\n                                     <version>${connid.db.table.version}</version>\n-                                    <outputDirectory>${bundles.directory}</outputDirectory>                                \n+                                    <outputDirectory>${bundles.directory}</outputDirectory>\n                                 </artifactItem>\n                             </artifactItems>\n                         </configuration>\n@@ -473,7 +474,7 @@\n                         <id>startTestDb</id>\n                         <phase>package</phase>\n                         <goals>\n-                            <goal>run</goal>    \n+                            <goal>run</goal>\n                         </goals>\n                     </execution>\n                 </executions>\n@@ -504,7 +505,7 @@\n                         <id>loadTestDb</id>\n                         <phase>pre-integration-test</phase>\n                         <goals>\n-                            <goal>execute</goal>    \n+                            <goal>execute</goal>\n                         </goals>\n                     </execution>\n                 </executions>"},{"sha":"4035680d3a1c6c092e0e2cc857d2e938790802de","filename":"core/src/main/java/org/syncope/core/persistence/validation/entity/SchedTaskValidator.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchedTaskValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchedTaskValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchedTaskValidator.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -15,7 +15,6 @@\n package org.syncope.core.persistence.validation.entity;\n \n import java.text.ParseException;\n-import java.util.Arrays;\n import javax.validation.ConstraintValidator;\n import javax.validation.ConstraintValidatorContext;\n import org.quartz.CronExpression;"},{"sha":"c25c93cbea0b3df20b94657ee0e21919ec693594","filename":"core/src/main/resources/userWorkflow.xml","status":"modified","additions":1,"deletions":17,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.xml?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -26,23 +26,7 @@\n             <actions>\n                 <action name=\"create\" id=\"1001\">\n                     <results>\n-                        <unconditional-result old-status=\"creationRequest\" status=\"doubleOptIn\" step=\"2\">\n-                            <post-functions>\n-                                <function type=\"class\">\n-                                    <arg name=\"class.name\">org.syncope.core.workflow.SendVelocityEmail</arg>\n-                                    <arg name=\"kind\">optin</arg>\n-                                </function>\n-                            </post-functions>\n-                        </unconditional-result>\n-                    </results>\n-                </action>\n-            </actions>\n-        </step>\n-        <step name=\"doubleOptIn\" id=\"2\">\n-            <actions>\n-                <action name=\"activate\" id=\"2001\">\n-                    <results>\n-                        <unconditional-result old-status=\"doubleOptIn\" status=\"active\" step=\"3\"/>\n+                        <unconditional-result old-status=\"creationRequest\" status=\"active\" step=\"3\"/>\n                     </results>\n                 </action>\n             </actions>"},{"sha":"cc78cace4c9231835132fd32a0c33a5bd8ac33fb","filename":"core/src/test/java/org/syncope/core/persistence/dao/DerAttrTest.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FDerAttrTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FDerAttrTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FDerAttrTest.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -105,7 +105,7 @@ public final void saveUDerAttribute()\n     public final void saveMDerAttribute()\n             throws ClassNotFoundException {\n         MDerSchema deriveddata =\n-                derSchemaDAO.find(\"deriveddata\", MDerSchema.class);\n+                derSchemaDAO.find(\"mderiveddata\", MDerSchema.class);\n         assertNotNull(deriveddata);\n \n         Membership owner = membershipDAO.find(1L);\n@@ -124,10 +124,10 @@ public final void saveMDerAttribute()\n \n         MAttrValue sx =\n                 (MAttrValue) owner.getAttribute(\n-                \"derived_sx\").getValues().iterator().next();\n+                \"mderived_sx\").getValues().iterator().next();\n         MAttrValue dx =\n                 (MAttrValue) owner.getAttribute(\n-                \"derived_dx\").getValues().iterator().next();\n+                \"mderived_dx\").getValues().iterator().next();\n \n         assertEquals(sx.getValue() + \"-\" + dx.getValue(),\n                 derivedAttribute.getValue(owner.getAttributes()));\n@@ -137,7 +137,7 @@ public final void saveMDerAttribute()\n     public final void saveRDerAttribute()\n             throws ClassNotFoundException {\n         RDerSchema deriveddata =\n-                derSchemaDAO.find(\"deriveddata\", RDerSchema.class);\n+                derSchemaDAO.find(\"rderiveddata\", RDerSchema.class);\n         assertNotNull(deriveddata);\n \n         SyncopeRole owner = roleDAO.find(1L);\n@@ -156,10 +156,10 @@ public final void saveRDerAttribute()\n \n         RAttrValue sx =\n                 (RAttrValue) owner.getAttribute(\n-                \"derived_sx\").getValues().iterator().next();\n+                \"rderived_sx\").getValues().iterator().next();\n         RAttrValue dx =\n                 (RAttrValue) owner.getAttribute(\n-                \"derived_dx\").getValues().iterator().next();\n+                \"rderived_dx\").getValues().iterator().next();\n \n         assertEquals(sx.getValue() + \"-\" + dx.getValue(),\n                 derivedAttribute.getValue(owner.getAttributes()));"},{"sha":"c1076c6930bac3b3510c1f6d10dc6839234660e9","filename":"core/src/test/java/org/syncope/core/rest/DerivedSchemaTestITCase.java","status":"modified","additions":7,"deletions":7,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FDerivedSchemaTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FDerivedSchemaTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FDerivedSchemaTestITCase.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -64,7 +64,7 @@ public void create() {\n     @Test\n     public void delete() {\n         DerivedSchemaTO schema = restTemplate.getForObject(BASE_URL\n-                + \"derivedSchema/role/read/deriveddata.json\",\n+                + \"derivedSchema/role/read/rderiveddata.json\",\n                 DerivedSchemaTO.class);\n         assertNotNull(schema);\n \n@@ -75,7 +75,7 @@ public void delete() {\n         Throwable t = null;\n         try {\n             restTemplate.getForObject(BASE_URL\n-                    + \"derivedSchema/role/read/deriveddata.json\",\n+                    + \"derivedSchema/role/read/rderiveddata.json\",\n                     DerivedSchemaTO.class);\n         } catch (SyncopeClientCompositeErrorException e) {\n             t = e;\n@@ -87,12 +87,12 @@ public void delete() {\n     @Test\n     public void update() {\n         DerivedSchemaTO schema = restTemplate.getForObject(BASE_URL\n-                + \"derivedSchema/membership/read/deriveddata.json\",\n+                + \"derivedSchema/membership/read/mderiveddata.json\",\n                 DerivedSchemaTO.class);\n         assertNotNull(schema);\n-        assertEquals(\"derived_sx + '-' + derived_dx\", schema.getExpression());\n+        assertEquals(\"mderived_sx + '-' + mderived_dx\", schema.getExpression());\n \n-        schema.setExpression(\"derived_sx + '.' + derived_dx\");\n+        schema.setExpression(\"mderived_sx + '.' + mderived_dx\");\n \n         schema = restTemplate.postForObject(BASE_URL\n                 + \"derivedSchema/membership/update.json\",\n@@ -101,9 +101,9 @@ public void update() {\n         assertNotNull(schema);\n \n         schema = restTemplate.getForObject(BASE_URL\n-                + \"derivedSchema/membership/read/deriveddata.json\",\n+                + \"derivedSchema/membership/read/mderiveddata.json\",\n                 DerivedSchemaTO.class);\n         assertNotNull(schema);\n-        assertEquals(\"derived_sx + '.' + derived_dx\", schema.getExpression());\n+        assertEquals(\"mderived_sx + '.' + mderived_dx\", schema.getExpression());\n     }\n }"},{"sha":"e4b5001a97d176004e0de133ef606a81bdec9004","filename":"core/src/test/java/org/syncope/core/rest/RoleTestITCase.java","status":"modified","additions":54,"deletions":0,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FRoleTestITCase.java?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -140,4 +140,58 @@ public void update() {\n         assertEquals(\"finalRole\", roleTO.getName());\n         assertEquals(2, roleTO.getAttributes().size());\n     }\n+\n+    @Test\n+    public void updateRemovingVirAttribute() {\n+        RoleTO roleTO = new RoleTO();\n+        roleTO.setName(\"withvirtual\");\n+        roleTO.setParent(8L);\n+\n+        final AttributeTO rvirtualdata = new AttributeTO();\n+        rvirtualdata.setSchema(\"rvirtualdata\");\n+        roleTO.addVirtualAttribute(rvirtualdata);\n+\n+        roleTO = restTemplate.postForObject(\n+                BASE_URL + \"role/create\", roleTO, RoleTO.class);\n+\n+        assertNotNull(roleTO);\n+        assertEquals(1, roleTO.getVirtualAttributes().size());\n+\n+        final RoleMod roleMod = new RoleMod();\n+        roleMod.setId(roleTO.getId());\n+        roleMod.addVirtualAttributeToBeRemoved(\"rvirtualdata\");\n+\n+        roleTO = restTemplate.postForObject(\n+                BASE_URL + \"role/update\", roleMod, RoleTO.class);\n+\n+        assertNotNull(roleTO);\n+        assertTrue(roleTO.getVirtualAttributes().isEmpty());\n+    }\n+\n+    @Test\n+    public void updateRemovingDerAttribute() {\n+        RoleTO roleTO = new RoleTO();\n+        roleTO.setName(\"withderived\");\n+        roleTO.setParent(8L);\n+\n+        final AttributeTO deriveddata = new AttributeTO();\n+        deriveddata.setSchema(\"rderivedschema\");\n+        roleTO.addDerivedAttribute(deriveddata);\n+\n+        roleTO = restTemplate.postForObject(\n+                BASE_URL + \"role/create\", roleTO, RoleTO.class);\n+\n+        assertNotNull(roleTO);\n+        assertEquals(1, roleTO.getDerivedAttributes().size());\n+\n+        final RoleMod roleMod = new RoleMod();\n+        roleMod.setId(roleTO.getId());\n+        roleMod.addDerivedAttributeToBeRemoved(\"rderivedschema\");\n+\n+        roleTO = restTemplate.postForObject(\n+                BASE_URL + \"role/update\", roleMod, RoleTO.class);\n+\n+        assertNotNull(roleTO);\n+        assertTrue(roleTO.getDerivedAttributes().isEmpty());\n+    }\n }"},{"sha":"547e286c4e7597bc54bdb8101eb8b49ee3a0b1d5","filename":"core/src/test/resources/content.xml","status":"modified","additions":14,"deletions":12,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -99,20 +99,20 @@\n     <RSchema name=\"show\" type=\"Boolean\"\n                 mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n-    <RSchema name=\"derived_sx\" type=\"String\"\n+    <RSchema name=\"rderived_sx\" type=\"String\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n-    <RSchema name=\"derived_dx\" type=\"String\"\n+    <RSchema name=\"rderived_dx\" type=\"String\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n     <MSchema name=\"subscriptionDate\" type=\"Date\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"\n                       conversionPattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"/>\n \n-    <MSchema name=\"derived_sx\" type=\"String\"\n+    <MSchema name=\"mderived_sx\" type=\"String\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n-    <MSchema name=\"derived_dx\" type=\"String\"\n+    <MSchema name=\"mderived_dx\" type=\"String\"\n                       mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n \n     <UAttr id=\"100\" owner_id=\"1\" schema_name=\"username\"/>\n@@ -150,29 +150,31 @@\n     <RAttrValue attribute_id=\"900\" id=\"43\" stringValue=\"icon6\"/>\n     <RAttrValue attribute_id=\"950\" id=\"44\" stringValue=\"icon4\"/>\n \n-    <RAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n+    <RAttr id=\"1002\" owner_id=\"1\" schema_name=\"rderived_sx\"/>\n     <RAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n \n-    <RAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n+    <RAttr id=\"1003\" owner_id=\"1\" schema_name=\"rderived_dx\"/>\n     <RAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n \n-    <RDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n-    <RDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n+    <RDerSchema name=\"rderiveddata\" expression=\"rderived_sx + '-' + rderived_dx\"/>\n+    <RDerAttr id=\"1000\" derivedSchema_name=\"rderiveddata\" owner_id=\"1\"/>\n \n+    <!-- rderiveddata is used th verify der schema deletion -->\n+    <RDerSchema name=\"rderivedschema\" expression=\"rderived_sx + '-' + rderived_dx\"/>\n \n     <MAttr id=\"1000\" owner_id=\"4\" schema_name=\"subscriptionDate\"/>\n \n     <MAttrValue attribute_id=\"1000\" id=\"90\" dateValue=\"2009-05-26\"/>\n     <MAttrValue attribute_id=\"1000\" id=\"91\" dateValue=\"2010-05-26 15:40:04\"/>\n \n-    <MAttr id=\"1002\" owner_id=\"1\" schema_name=\"derived_sx\"/>\n+    <MAttr id=\"1002\" owner_id=\"1\" schema_name=\"mderived_sx\"/>\n     <MAttrValue attribute_id=\"1002\" id=\"92\" stringValue=\"sx\"/>\n \n-    <MAttr id=\"1003\" owner_id=\"1\" schema_name=\"derived_dx\"/>\n+    <MAttr id=\"1003\" owner_id=\"1\" schema_name=\"mderived_dx\"/>\n     <MAttrValue attribute_id=\"1003\" id=\"93\" stringValue=\"dx\"/>\n \n-    <MDerSchema name=\"deriveddata\" expression=\"derived_sx + '-' + derived_dx\"/>\n-    <MDerAttr id=\"1000\" derivedSchema_name=\"deriveddata\" owner_id=\"1\"/>\n+    <MDerSchema name=\"mderiveddata\" expression=\"mderived_sx + '-' + mderived_dx\"/>\n+    <MDerAttr id=\"1000\" derivedSchema_name=\"mderiveddata\" owner_id=\"1\"/>\n \n     <UVirSchema name=\"virtualdata\"/>\n     <UVirAttr id=\"1000\" virtualSchema_name=\"virtualdata\" owner_id=\"3\"/>"},{"sha":"d12871eade44805fe7d2fa3c9a76bac792dd20a8","filename":"core/src/test/resources/userWorkflow.xml","status":"added","additions":102,"deletions":0,"changes":102,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fresources%2FuserWorkflow.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c44a1ee3fbbabe4047ab6475da5ca608e324d473/core%2Fsrc%2Ftest%2Fresources%2FuserWorkflow.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2FuserWorkflow.xml?ref=c44a1ee3fbbabe4047ab6475da5ca608e324d473","patch":"@@ -0,0 +1,102 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE workflow PUBLIC \"-//OpenSymphony Group//DTD OSWorkflow 2.8//EN\" \"http://www.opensymphony.com/osworkflow/workflow_2_8.dtd\">\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<workflow>\n+    <initial-actions>\n+        <action name=\"start\" id=\"0\">\n+            <results>\n+                <unconditional-result old-status=\"n/a\" status=\"creationRequest\" step=\"1\"/>\n+            </results>\n+        </action>\n+    </initial-actions>\n+    <steps>\n+        <step name=\"creationRequest\" id=\"1\">\n+            <actions>\n+                <action name=\"create\" id=\"1001\">\n+                    <results>\n+                        <unconditional-result old-status=\"creationRequest\" status=\"doubleOptIn\" step=\"2\">\n+                            <post-functions>\n+                                <function type=\"class\">\n+                                    <arg name=\"class.name\">org.syncope.core.workflow.SendVelocityEmail</arg>\n+                                    <arg name=\"kind\">optin</arg>\n+                                </function>\n+                            </post-functions>\n+                        </unconditional-result>\n+                    </results>\n+                </action>\n+            </actions>\n+        </step>\n+        <step name=\"doubleOptIn\" id=\"2\">\n+            <actions>\n+                <action name=\"activate\" id=\"2001\">\n+                    <results>\n+                        <unconditional-result old-status=\"doubleOptIn\" status=\"active\" step=\"3\"/>\n+                    </results>\n+                </action>\n+            </actions>\n+        </step>\n+        <step name=\"active\" id=\"3\">\n+            <actions>\n+                <action name=\"update\" id=\"3001\">\n+                    <results>\n+                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n+                    </results>\n+                </action>\n+                <action name=\"generateToken\" id=\"3002\">\n+                    <pre-functions>\n+                        <function type=\"class\">\n+                            <arg name=\"class.name\">org.syncope.core.workflow.GenerateToken</arg>\n+                        </function>\n+                    </pre-functions>\n+                    <results>\n+                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n+                    </results>\n+                </action>\n+                <action name=\"verifyToken\" id=\"3003\">\n+                    <results>\n+                        <result old-status=\"active\" status=\"active\" step=\"3\">\n+                            <conditions>\n+                                <condition type=\"class\">\n+                                    <arg name=\"class.name\">org.syncope.core.workflow.IsValidToken</arg>\n+                                </condition>\n+                            </conditions>\n+                        </result>\n+                        <unconditional-result old-status=\"active\" status=\"active\" step=\"3\"/>\n+                    </results>\n+                </action>\n+                <action name=\"suspend\" id=\"3004\">\n+                    <results>\n+                        <unconditional-result old-status=\"active\" status=\"suspended\" step=\"4\"/>\n+                    </results>\n+                </action>\n+                <action name=\"delete\" id=\"3005\">\n+                    <results>\n+                        <unconditional-result old-status=\"active\" status=\"deleted\" step=\"5\"/>\n+                    </results>\n+                </action>\n+            </actions>\n+        </step>\n+        <step name=\"suspended\" id=\"4\">\n+            <actions>\n+                <action name=\"reactivate\" id=\"4001\">\n+                    <results>\n+                        <unconditional-result old-status=\"suspended\" status=\"active\" step=\"3\"/>\n+                    </results>\n+                </action>\n+            </actions>\n+        </step>\n+        <step name=\"deleted\" id=\"5\"/>\n+    </steps>\n+</workflow>"}]}