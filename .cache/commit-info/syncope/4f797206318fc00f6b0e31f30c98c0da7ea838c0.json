{"sha":"4f797206318fc00f6b0e31f30c98c0da7ea838c0","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjRmNzk3MjA2MzE4ZmMwMGY2YjBlMzFmMzBjOThjMGRhN2VhODM4YzA=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-10-12T07:19:06Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-10-12T07:19:16Z"},"message":"[SYNCOPE-1383] Completely removing ResultsHandler - and fixing unused imports","tree":{"sha":"460136fffaa3cda5c1b93cd5d78e9c97cd9bcc75","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/460136fffaa3cda5c1b93cd5d78e9c97cd9bcc75"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/4f797206318fc00f6b0e31f30c98c0da7ea838c0","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4f797206318fc00f6b0e31f30c98c0da7ea838c0","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4f797206318fc00f6b0e31f30c98c0da7ea838c0","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4f797206318fc00f6b0e31f30c98c0da7ea838c0/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"b043febae3e08bf657ecfb1c23b80d2973bd68a6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b043febae3e08bf657ecfb1c23b80d2973bd68a6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b043febae3e08bf657ecfb1c23b80d2973bd68a6"}],"stats":{"total":80,"additions":54,"deletions":26},"files":[{"sha":"e5a79390d28be29225d3ff3c376c7919ba7a4bcd","filename":"core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/Connector.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2FConnector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2FConnector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2FConnector.java?ref=4f797206318fc00f6b0e31f30c98c0da7ea838c0","patch":"@@ -23,18 +23,18 @@\n import java.util.concurrent.atomic.AtomicReference;\n import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n import org.apache.syncope.core.persistence.api.entity.ConnInstance;\n+import org.apache.syncope.core.provisioning.api.pushpull.ReconFilterBuilder;\n import org.identityconnectors.framework.common.objects.Attribute;\n import org.identityconnectors.framework.common.objects.ConnectorObject;\n import org.identityconnectors.framework.common.objects.ObjectClass;\n import org.identityconnectors.framework.common.objects.ObjectClassInfo;\n import org.identityconnectors.framework.common.objects.OperationOptions;\n-import org.identityconnectors.framework.common.objects.ResultsHandler;\n import org.identityconnectors.framework.common.objects.SyncResultsHandler;\n import org.identityconnectors.framework.common.objects.SyncToken;\n import org.identityconnectors.framework.common.objects.Uid;\n import org.identityconnectors.framework.common.objects.filter.Filter;\n-import org.apache.syncope.core.provisioning.api.pushpull.ReconFilterBuilder;\n import org.identityconnectors.framework.common.objects.SearchResult;\n+import org.identityconnectors.framework.spi.SearchResultsHandler;\n \n /**\n  * Entry point for making requests on underlying connector bundles.\n@@ -165,7 +165,7 @@ ConnectorObject getObject(\n     SearchResult search(\n             ObjectClass objectClass,\n             Filter filter,\n-            ResultsHandler handler,\n+            SearchResultsHandler handler,\n             OperationOptions options);\n \n     /**\n@@ -185,7 +185,7 @@ SearchResult search(\n     SearchResult search(\n             ObjectClass objectClass,\n             Filter filter,\n-            ResultsHandler handler,\n+            SearchResultsHandler handler,\n             int pageSize,\n             String pagedResultsCookie,\n             List<OrderByClause> orderBy,"},{"sha":"1608d83f1e828bd279edc9641adbaf1717987792","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/ConnectorFacadeProxy.java","status":"modified","additions":21,"deletions":13,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FConnectorFacadeProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FConnectorFacadeProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2FConnectorFacadeProxy.java?ref=4f797206318fc00f6b0e31f30c98c0da7ea838c0","patch":"@@ -32,6 +32,7 @@\n import org.apache.syncope.core.provisioning.api.utils.ConnPoolConfUtils;\n import org.apache.syncope.core.provisioning.api.Connector;\n import org.apache.syncope.core.provisioning.api.TimeoutException;\n+import org.apache.syncope.core.provisioning.api.pushpull.ReconFilterBuilder;\n import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n import org.apache.syncope.core.spring.ApplicationContextProvider;\n import org.identityconnectors.common.security.GuardedByteArray;\n@@ -47,7 +48,6 @@\n import org.identityconnectors.framework.common.objects.ObjectClassInfo;\n import org.identityconnectors.framework.common.objects.OperationOptions;\n import org.identityconnectors.framework.common.objects.OperationOptionsBuilder;\n-import org.identityconnectors.framework.common.objects.ResultsHandler;\n import org.identityconnectors.framework.common.objects.SearchResult;\n import org.identityconnectors.framework.common.objects.SortKey;\n import org.identityconnectors.framework.common.objects.SyncDeltaBuilder;\n@@ -62,7 +62,6 @@\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.transaction.annotation.Transactional;\n import org.springframework.util.ClassUtils;\n-import org.apache.syncope.core.provisioning.api.pushpull.ReconFilterBuilder;\n \n public class ConnectorFacadeProxy implements Connector {\n \n@@ -326,12 +325,23 @@ public void filteredReconciliation(\n             actualOptions = filterBuilder.build(actualOptions);\n         }\n \n-        search(objectClass, filter, object -> handler.handle(new SyncDeltaBuilder().\n-                setObject(object).\n-                setUid(object.getUid()).\n-                setDeltaType(SyncDeltaType.CREATE_OR_UPDATE).\n-                setToken(new SyncToken(\"\")).\n-                build()), actualOptions);\n+        search(objectClass, filter, new SearchResultsHandler() {\n+\n+            @Override\n+            public void handleResult(final SearchResult result) {\n+                // nothing to do\n+            }\n+\n+            @Override\n+            public boolean handle(final ConnectorObject object) {\n+                return handler.handle(new SyncDeltaBuilder().\n+                        setObject(object).\n+                        setUid(object.getUid()).\n+                        setDeltaType(SyncDeltaType.CREATE_OR_UPDATE).\n+                        setToken(new SyncToken(\"\")).\n+                        build());\n+            }\n+        }, actualOptions);\n     }\n \n     @Override\n@@ -423,7 +433,7 @@ public ConnectorObject getObject(\n     public SearchResult search(\n             final ObjectClass objectClass,\n             final Filter filter,\n-            final ResultsHandler handler,\n+            final SearchResultsHandler handler,\n             final OperationOptions options) {\n \n         SearchResult result = null;\n@@ -443,9 +453,7 @@ public SearchResult search(\n \n                         @Override\n                         public void handleResult(final SearchResult result) {\n-                            if (handler instanceof SearchResultsHandler) {\n-                                SearchResultsHandler.class.cast(handler).handleResult(result);\n-                            }\n+                            handler.handleResult(result);\n                             cookies[0] = result.getPagedResultsCookie();\n                         }\n \n@@ -470,7 +478,7 @@ public boolean handle(final ConnectorObject connectorObject) {\n     public SearchResult search(\n             final ObjectClass objectClass,\n             final Filter filter,\n-            final ResultsHandler handler,\n+            final SearchResultsHandler handler,\n             final int pageSize,\n             final String pagedResultsCookie,\n             final List<OrderByClause> orderBy,"},{"sha":"34175db4320102ae488f3d8d0e453e34923a5aa5","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/PullUtils.java","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPullUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPullUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPullUtils.java?ref=4f797206318fc00f6b0e31f30c98c0da7ea838c0","patch":"@@ -65,7 +65,9 @@\n import org.identityconnectors.framework.common.objects.ConnectorObject;\n import org.identityconnectors.framework.common.objects.Name;\n import org.identityconnectors.framework.common.objects.OperationalAttributes;\n+import org.identityconnectors.framework.common.objects.SearchResult;\n import org.identityconnectors.framework.common.objects.filter.FilterBuilder;\n+import org.identityconnectors.framework.spi.SearchResultsHandler;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n@@ -137,8 +139,18 @@ public Optional<String> match(\n         Name nameAttr = new Name(name);\n         connector.search(provision.get().getObjectClass(),\n                 ignoreCaseMatch ? FilterBuilder.equalsIgnoreCase(nameAttr) : FilterBuilder.equalTo(nameAttr),\n-                obj -> found.add(obj),\n-                MappingUtils.buildOperationOptions(\n+                new SearchResultsHandler() {\n+\n+            @Override\n+            public void handleResult(final SearchResult result) {\n+                // nothing to do\n+            }\n+\n+            @Override\n+            public boolean handle(final ConnectorObject connectorObject) {\n+                return found.add(connectorObject);\n+            }\n+        }, MappingUtils.buildOperationOptions(\n                         MappingUtils.getPullItems(provision.get().getMapping().getItems()).iterator()));\n \n         if (found.isEmpty()) {"},{"sha":"b260fb51c77f5c2aa61c59322e632173f3ea6aa8","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/PushUtils.java","status":"modified","additions":15,"deletions":7,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPushUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4f797206318fc00f6b0e31f30c98c0da7ea838c0/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPushUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FPushUtils.java?ref=4f797206318fc00f6b0e31f30c98c0da7ea838c0","patch":"@@ -34,6 +34,8 @@\n import org.apache.syncope.core.spring.ImplementationManager;\n import org.identityconnectors.framework.common.objects.AttributeBuilder;\n import org.identityconnectors.framework.common.objects.ConnectorObject;\n+import org.identityconnectors.framework.common.objects.SearchResult;\n+import org.identityconnectors.framework.spi.SearchResultsHandler;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n@@ -86,13 +88,19 @@ private List<ConnectorObject> findByCorrelationRule(\n         List<ConnectorObject> objs = new ArrayList<>();\n \n         try {\n-            connector.search(\n-                    provision.getObjectClass(),\n-                    rule.getFilter(any, provision),\n-                    obj -> {\n-                        objs.add(obj);\n-                        return true;\n-                    }, MappingUtils.buildOperationOptions(provision.getMapping().getItems().iterator()));\n+            connector.search(provision.getObjectClass(), rule.getFilter(any, provision), new SearchResultsHandler() {\n+\n+                @Override\n+                public void handleResult(final SearchResult result) {\n+                    // nothing to do\n+                }\n+\n+                @Override\n+                public boolean handle(final ConnectorObject connectorObject) {\n+                    objs.add(connectorObject);\n+                    return true;\n+                }\n+            }, MappingUtils.buildOperationOptions(provision.getMapping().getItems().iterator()));\n         } catch (TimeoutException toe) {\n             LOG.debug(\"Request timeout\", toe);\n             throw toe;"}]}