{"sha":"df10880b60f7016dd61c2c89f0415a933aa5cc59","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmRmMTA4ODBiNjBmNzAxNmRkNjFjMmM4OWYwNDE1YTkzM2FhNWNjNTk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-10-13T10:03:42Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-10-13T10:31:33Z"},"message":"Upgrading Flowable","tree":{"sha":"31d08a3cd5c33962ea5fd9fe4b50baa18c5cc164","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/31d08a3cd5c33962ea5fd9fe4b50baa18c5cc164"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/df10880b60f7016dd61c2c89f0415a933aa5cc59","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/df10880b60f7016dd61c2c89f0415a933aa5cc59","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/df10880b60f7016dd61c2c89f0415a933aa5cc59","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/df10880b60f7016dd61c2c89f0415a933aa5cc59/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"96ea7ef1eb83b945e9d60b6b3d0d99ae881cc7ae","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/96ea7ef1eb83b945e9d60b6b3d0d99ae881cc7ae","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/96ea7ef1eb83b945e9d60b6b3d0d99ae881cc7ae"}],"stats":{"total":66,"additions":38,"deletions":28},"files":[{"sha":"820b68d04878256ed034e5bad1378f8ac47dec55","filename":"ext/flowable/client-console/pom.xml","status":"modified","additions":12,"deletions":13,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fclient-console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fclient-console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fpom.xml?ref=df10880b60f7016dd61c2c89f0415a933aa5cc59","patch":"@@ -63,8 +63,12 @@ under the License.\n     \n     <dependency>\n       <groupId>org.flowable</groupId>\n-      <artifactId>flowable-ui-modeler-app</artifactId>\n-      <type>war</type>\n+      <artifactId>flowable-ui-modeler-frontend</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.flowable</groupId>\n+      <artifactId>flowable-ui-modeler-logic</artifactId>\n       <scope>test</scope>\n     </dependency>\n   </dependencies>\n@@ -81,26 +85,21 @@ under the License.\n             <phase>process-resources</phase>\n             <configuration>\n               <target>\n-                <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-app/${flowable.version}/flowable-ui-modeler-app-${flowable.version}.war\" dest=\"${flowable-modeler.directory}\">\n-                  <patternset>\n-                    <include name=\"WEB-INF/classes/static/**\"/>\n-                    <include name=\"WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\"/>\n-                  </patternset>\n-                </unzip>\n-                \n-                <unzip src=\"${flowable-modeler.directory}/WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\" dest=\"${flowable-modeler.directory}\">\n+                <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-frontend/${flowable.version}/flowable-ui-modeler-frontend-${flowable.version}.jar\" dest=\"${flowable-modeler.directory}\"/>\n+\n+                <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-logic/${flowable.version}/flowable-ui-modeler-logic-${flowable.version}.jar\" dest=\"${flowable-modeler.directory}\">\n                   <patternset>\n                     <include name=\"stencilset_bpmn.json\"/>\n                   </patternset>\n                 </unzip>\n                 \n                 <move todir=\"${flowable-modeler.directory}\">\n-                  <fileset dir=\"${flowable-modeler.directory}/WEB-INF/classes/static/\">\n+                  <fileset dir=\"${flowable-modeler.directory}/static/modeler\">\n                     <include name=\"**\"/>\n                   </fileset>\n                 </move>\n-                <delete dir=\"${flowable-modeler.directory}/WEB-INF\"/>\n-                \n+                <delete dir=\"${flowable-modeler.directory}/static\"/>\n+\n                 <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;/head&gt;\" value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"/>\n                 <replace file=\"${flowable-modeler.directory}/index.html\" token=\" ng-click=&quot;backToLanding()&quot;\" value=\" disabled=&quot;disabled&quot;\"/>\n                 <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot;\" value=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot; style=&quot;display: none;&quot;\"/>"},{"sha":"91f9055ecfa789f1b90c85c644ea3597b8a930c0","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/WorkflowFlowableContext.java","status":"modified","additions":1,"deletions":7,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java?ref=df10880b60f7016dd61c2c89f0415a933aa5cc59","patch":"@@ -55,17 +55,11 @@ public class WorkflowFlowableContext {\n     @Value(\"${historyLevel:ACTIVITY}\")\n     private HistoryLevel historyLevel;\n \n-    @ConditionalOnMissingBean\n-    @Bean\n-    public SyncopeIdmIdentityService syncopeIdmIdentityService() {\n-        return new SyncopeIdmIdentityService();\n-    }\n-\n     @ConditionalOnMissingBean\n     @Bean\n     public SpringIdmEngineConfiguration syncopeIdmEngineConfiguration() {\n         SpringIdmEngineConfiguration conf = new SpringIdmEngineConfiguration();\n-        conf.setIdmIdentityService(syncopeIdmIdentityService());\n+        conf.setIdmIdentityService(new SyncopeIdmIdentityService(conf));\n         return conf;\n     }\n "},{"sha":"bcc9bbbda2925ff9d0b88e98b1716ae3c3c1a07c","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngineFactoryBean.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java?ref=df10880b60f7016dd61c2c89f0415a933aa5cc59","patch":"@@ -28,7 +28,6 @@\n import org.apache.syncope.core.persistence.api.SyncopeCoreLoader;\n import org.flowable.engine.ProcessEngine;\n import org.flowable.common.engine.impl.cfg.SpringBeanFactoryProxyMap;\n-import org.flowable.common.engine.impl.interceptor.EngineConfigurationConstants;\n import org.flowable.engine.impl.util.EngineServiceUtil;\n import org.flowable.idm.spring.SpringIdmEngineConfiguration;\n import org.flowable.spring.SpringExpressionManager;\n@@ -84,9 +83,8 @@ private ProcessEngine build(final String domain, final DataSource datasource) {\n             conf.setExpressionManager(new SpringExpressionManager(ctx, conf.getBeans()));\n         }\n         if (EngineServiceUtil.getIdmEngineConfiguration(conf) == null) {\n-            conf.addEngineConfiguration(\n-                    EngineConfigurationConstants.KEY_IDM_ENGINE_CONFIG,\n-                    ctx.getBean(SpringIdmEngineConfiguration.class));\n+            SpringIdmEngineConfiguration spiec = ctx.getBean(SpringIdmEngineConfiguration.class);\n+            conf.addEngineConfiguration(spiec.getEngineCfgKey(), spiec.getEngineScopeType(), spiec);\n         }\n         conf.setEnableSafeBpmnXml(true);\n         conf.setCustomFormTypes(List.of(new DropdownFormType(null)));"},{"sha":"c8123e941c995c0a468b1e8c9745caa8f91cb08b","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeIdmIdentityService.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/df10880b60f7016dd61c2c89f0415a933aa5cc59/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java?ref=df10880b60f7016dd61c2c89f0415a933aa5cc59","patch":"@@ -20,6 +20,7 @@\n \n import org.flowable.idm.api.GroupQuery;\n import org.flowable.idm.api.UserQuery;\n+import org.flowable.idm.engine.IdmEngineConfiguration;\n import org.flowable.idm.engine.impl.IdmIdentityServiceImpl;\n import org.springframework.beans.BeansException;\n import org.springframework.beans.factory.support.AbstractBeanDefinition;\n@@ -31,6 +32,10 @@ public class SyncopeIdmIdentityService extends IdmIdentityServiceImpl implements\n \n     private ConfigurableApplicationContext ctx;\n \n+    public SyncopeIdmIdentityService(final IdmEngineConfiguration idmEngineConfiguration) {\n+        super(idmEngineConfiguration);\n+    }\n+\n     @Override\n     public void setApplicationContext(final ApplicationContext ctx) throws BeansException {\n         this.ctx = (ConfigurableApplicationContext) ctx;\n@@ -47,5 +52,4 @@ public GroupQuery createGroupQuery() {\n         return (GroupQuery) ctx.getBeanFactory().\n                 createBean(SyncopeGroupQueryImpl.class, AbstractBeanDefinition.AUTOWIRE_BY_TYPE, false);\n     }\n-\n }"},{"sha":"e8f2b03fa1af1e32691ddc82dc466c3da16cca45","filename":"pom.xml","status":"modified","additions":18,"deletions":3,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/df10880b60f7016dd61c2c89f0415a933aa5cc59/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/df10880b60f7016dd61c2c89f0415a933aa5cc59/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=df10880b60f7016dd61c2c89f0415a933aa5cc59","patch":"@@ -426,7 +426,7 @@ under the License.\n \n     <groovy.version>3.0.6</groovy.version>\n \n-    <flowable.version>6.5.0</flowable.version>\n+    <flowable.version>6.6.0</flowable.version>\n \n     <camel.version>3.5.0</camel.version>\n \n@@ -805,6 +805,12 @@ under the License.\n         <groupId>com.fasterxml.jackson.jaxrs</groupId>\n         <artifactId>jackson-jaxrs-json-provider</artifactId>\n         <version>${jackson.version}</version>\n+        <exclusions>\n+          <exclusion>\n+            <groupId>com.fasterxml.jackson.module</groupId>\n+            <artifactId>jackson-module-jaxb-annotations</artifactId>\n+          </exclusion>\n+        </exclusions>\n       </dependency>\n       <dependency>\n         <groupId>com.fasterxml.jackson.jaxrs</groupId>\n@@ -831,6 +837,11 @@ under the License.\n         <artifactId>jackson-dataformat-cbor</artifactId>\n         <version>${jackson.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.dataformat</groupId>\n+        <artifactId>jackson-dataformat-yaml</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n       <dependency>\n         <groupId>com.fasterxml.jackson.dataformat</groupId>\n         <artifactId>jackson-dataformat-xml</artifactId>\n@@ -1319,9 +1330,13 @@ under the License.\n       </dependency>\n       <dependency>\n         <groupId>org.flowable</groupId>\n-        <artifactId>flowable-ui-modeler-app</artifactId>\n+        <artifactId>flowable-ui-modeler-frontend</artifactId>\n+        <version>${flowable.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.flowable</groupId>\n+        <artifactId>flowable-ui-modeler-logic</artifactId>\n         <version>${flowable.version}</version>\n-        <type>war</type>\n       </dependency>\n       <!-- /Flowable -->\n "}]}