{"sha":"838c6a8fa621d2b6d9b65e6847a9de5a176638df","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjgzOGM2YThmYTYyMWQyYjZkOWI2NWU2ODQ3YTlkZTVhMTc2NjM4ZGY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-13T14:33:50Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-13T14:33:50Z"},"message":"[SYNCOPE-640] Merge from 1_2_X","tree":{"sha":"3efa7c771899f08d062529ce7792e41abd574163","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/3efa7c771899f08d062529ce7792e41abd574163"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/838c6a8fa621d2b6d9b65e6847a9de5a176638df","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/838c6a8fa621d2b6d9b65e6847a9de5a176638df","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/838c6a8fa621d2b6d9b65e6847a9de5a176638df","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/838c6a8fa621d2b6d9b65e6847a9de5a176638df/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"04b053087cec46ce155c855b1e059f2c93166ae3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/04b053087cec46ce155c855b1e059f2c93166ae3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/04b053087cec46ce155c855b1e059f2c93166ae3"},{"sha":"ec58954527675f27e204436248e92bb396e3d104","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ec58954527675f27e204436248e92bb396e3d104","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ec58954527675f27e204436248e92bb396e3d104"}],"stats":{"total":45,"additions":37,"deletions":8},"files":[{"sha":"cd43fedab7df41e3bc1bea55fdf8ca654bdc3b50","filename":"core/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -1184,7 +1184,7 @@ under the License.\n       <properties>\n         <jdbcdriver.groupId>org.mariadb.jdbc</jdbcdriver.groupId>\n         <jdbcdriver.artifactId>mariadb-java-client</jdbcdriver.artifactId>\n-        <jdbcdriver.version>1.1.7</jdbcdriver.version>\n+        <jdbcdriver.version>1.1.8</jdbcdriver.version>\n       </properties>\n \n       <dependencies>"},{"sha":"085b98fbe0f659c4e957e24410365cb4864b316a","filename":"installer/src/main/java/org/apache/syncope/installer/enums/DBs.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -22,6 +22,7 @@ public enum DBs {\n \n     POSTGRES(\"postgres\"),\n     MYSQL(\"mysql\"),\n+    MARIADB(\"mariadb\"),\n     SQLSERVER(\"sqlserver\"),\n     ORACLE(\"oracle\");\n \n@@ -41,6 +42,8 @@ public static DBs fromDbName(final String containerName) {\n             db = POSTGRES;\n         } else if (MYSQL.getName().equalsIgnoreCase(containerName)) {\n             db = MYSQL;\n+        } else if (MARIADB.getName().equalsIgnoreCase(containerName)) {\n+            db = MARIADB;\n         } else if (ORACLE.getName().equalsIgnoreCase(containerName)) {\n             db = ORACLE;\n         } else {"},{"sha":"a5d904f45973a12292d00d9a21af3bfedf4275d6","filename":"installer/src/main/java/org/apache/syncope/installer/files/PersistenceProperties.java","status":"modified","additions":16,"deletions":3,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -57,7 +57,20 @@ public class PersistenceProperties {\n             + \"audit.sql=audit.sql\\n\"\n             + \"database.schema=\\n\";\n \n-    public static final String ORACLE = \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n+    public static final String MARIADB = \"\"\n+            + \"jpa.driverClassName=org.mariadb.jdbc.Driver\\n\"\n+            + \"jpa.url=%s\\n\"\n+            + \"jpa.username=%s\\n\"\n+            + \"jpa.password=%s\\n\"\n+            + \"jpa.dialect=org.apache.openjpa.jdbc.sql.MariaDBDictionary\\n\"\n+            + \"jpa.pool.validationQuery=SELECT 1\\n\"\n+            + \"quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\\n\"\n+            + \"quartz.sql=tables_mariadb.sql\\n\"\n+            + \"audit.sql=audit.sql\\n\"\n+            + \"database.schema=\\n\";\n+    \n+    public static final String ORACLE = \"\"\n+            + \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n             + \"jpa.url=%s\\n\"\n             + \"jpa.username=%s\\n\"\n             + \"jpa.password=%s\\n\"\n@@ -83,8 +96,8 @@ public class PersistenceProperties {\n             + \"audit.sql=audit_sqlserver.sql\\n\" \n             + \"database.schema=\";\n \n-    public static final String QUARTZ_INNO_DB = \"quartz.sql=tables_mysql_innodb.sql\";\n+    public static final String MYSQL_QUARTZ_INNO_DB = \"quartz.sql=tables_mysql_innodb.sql\";\n \n-    public static final String QUARTZ = \"quartz.sql=tables_mysql.sql\";\n+    public static final String MYSQL_QUARTZ = \"quartz.sql=tables_mysql.sql\";\n \n }"},{"sha":"84cf0fa546842b7370c35820665f7edf2f1a9a54","filename":"installer/src/main/java/org/apache/syncope/installer/processes/PersistenceProcess.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -70,11 +70,15 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.MYSQL, persistenceUrl, persistenceUser, persistencePassword));\n                 if (mysqlInnoDB) {\n-                    persistenceProperties.append(PersistenceProperties.QUARTZ_INNO_DB);\n+                    persistenceProperties.append(PersistenceProperties.MYSQL_QUARTZ_INNO_DB);\n                 } else {\n-                    persistenceProperties.append(PersistenceProperties.QUARTZ);\n+                    persistenceProperties.append(PersistenceProperties.MYSQL_QUARTZ);\n                 }\n                 break;\n+            case MARIADB:\n+                persistenceProperties.append(String.format(\n+                        PersistenceProperties.MARIADB, persistenceUrl, persistenceUser, persistencePassword));\n+                break;\n             case ORACLE:\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.ORACLE, persistenceUrl, persistenceUser, persistencePassword,"},{"sha":"936fd910d62881f01f5edbc6a825f6c7e79d85f7","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/DriverLoader.java","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -29,16 +29,21 @@\n \n public final class DriverLoader extends URLClassLoader {\n \n-    private final static String POSTGRES_JAR = \n+    private final static String POSTGRES_JAR =\n             \"http://repo1.maven.org/maven2/postgresql/postgresql/9.1-901.jdbc3/postgresql-9.1-901.jdbc3.jar\";\n \n     private final static String MYSQL_JAR =\n             \"http://central.maven.org/maven2/mysql/mysql-connector-java/5.1.34/mysql-connector-java-5.1.34.jar\";\n \n+    private final static String MARIADB_JAR =\n+            \"http://repo1.maven.org/maven2/org/mariadb/jdbc/mariadb-java-client/1.1.8/mariadb-java-client-1.1.8.jar\";\n+\n     private static final String POSTGRES_CLASS_DRIVER = \"org.postgresql.Driver\";\n \n     private static final String MYSQL_CLASS_DRIVER = \"com.mysql.jdbc.Driver\";\n \n+    private static final String MARIADB_CLASS_DRIVER = \"org.mariadb.jdbc.Driver\";\n+\n     private DriverLoader(final URL[] urls) {\n         super(urls);\n         addURL(urls[0]);\n@@ -58,6 +63,10 @@ public static Driver load(final DBs selectedDB, final boolean isProxyEnabled, fi\n                 driver = downloadDriver(MYSQL_JAR, MYSQL_CLASS_DRIVER, isProxyEnabled, proxyHost, proxyPort,\n                         proxyUser, proxyPwd);\n                 break;\n+            case MARIADB:\n+                driver = downloadDriver(MARIADB_JAR, MARIADB_CLASS_DRIVER, isProxyEnabled, proxyHost, proxyPort,\n+                        proxyUser, proxyPwd);\n+                break;\n             case SQLSERVER:\n                 break;\n             case ORACLE:"},{"sha":"de25fb569b1c584e5cc3fe9bfe5c81cf02329a8c","filename":"installer/src/main/java/org/apache/syncope/installer/validators/PersistenceValidator.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/838c6a8fa621d2b6d9b65e6847a9de5a176638df/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java?ref=838c6a8fa621d2b6d9b65e6847a9de5a176638df","patch":"@@ -82,8 +82,8 @@ public Status validateData(final InstallData installData) {\n \n         switch (selectedDB) {\n             case POSTGRES:\n-                return checkConnection(selectedDB);\n             case MYSQL:\n+            case MARIADB:\n                 return checkConnection(selectedDB);\n             case SQLSERVER:\n                 warning = new StringBuilder(\"Remember to check your SqlServer db connection\");"}]}