{"sha":"ddc6a540dcdaaa91867ccafa40cea8271336ed49","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmRkYzZhNTQwZGNkYWFhOTE4NjdjY2FmYTQwY2VhODI3MTMzNmVkNDk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-11-22T11:41:32Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-11-22T11:41:32Z"},"message":"[SYNCOPE-439] Activiti Modeler now available from admin console\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1544498 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"3e536eaa5a3fd84b970fe882c70320923dbfc9c5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/3e536eaa5a3fd84b970fe882c70320923dbfc9c5"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ddc6a540dcdaaa91867ccafa40cea8271336ed49","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ddc6a540dcdaaa91867ccafa40cea8271336ed49","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ddc6a540dcdaaa91867ccafa40cea8271336ed49","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ddc6a540dcdaaa91867ccafa40cea8271336ed49/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"ada6093dbb6d3d616ab98598b1d3aec37d1226f6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ada6093dbb6d3d616ab98598b1d3aec37d1226f6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ada6093dbb6d3d616ab98598b1d3aec37d1226f6"}],"stats":{"total":1341,"additions":1194,"deletions":147},"files":[{"sha":"b0ee9e632a29133b719554fc07f9b897fc8734ee","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":51,"deletions":0,"changes":51,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -51,6 +51,12 @@ under the License.\n     </dependency>\r\n \r\n     <!-- TEST -->\r\n+    <dependency>\r\n+      <groupId>org.activiti</groupId>\r\n+      <artifactId>activiti-webapp-explorer2</artifactId>            \r\n+      <type>war</type>\r\n+      <scope>test</scope>\r\n+    </dependency>\r\n     <dependency>\r\n       <groupId>org.apache.syncope</groupId>\r\n       <artifactId>syncope-build-tools</artifactId>\r\n@@ -111,6 +117,51 @@ under the License.\n         <artifactId>maven-antrun-plugin</artifactId>\r\n         <inherited>true</inherited>\r\n         <executions>\r\n+          <execution>\r\n+            <id>setupActivitiModeler</id>\r\n+            <phase>process-test-resources</phase>\r\n+            <configuration>\r\n+              <target>\r\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\"\r\n+                       dest=\"${project.build.directory}/activiti-webapp-explorer2\"/>\r\n+                \r\n+                <mkdir dir=\"${activiti-modeler.directory}\"/>\r\n+                \r\n+                <mkdir dir=\"${activiti-modeler.directory}/editor\"/>\r\n+                <copy todir=\"${activiti-modeler.directory}/editor\">\r\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\r\n+                    <exclude name=\"oryx.js\"/>\r\n+                  </fileset>\r\n+                </copy>\r\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\"\r\n+                      todir=\"${activiti-modeler.directory}/editor\"/>\r\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\"\r\n+                      todir=\"${activiti-modeler.directory}/editor\"/>\r\n+                \r\n+                <mkdir dir=\"${activiti-modeler.directory}/explorer\"/>\r\n+                <copy todir=\"${activiti-modeler.directory}/explorer\">\r\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\"/>\r\n+                </copy>\r\n+                \r\n+                <mkdir dir=\"${activiti-modeler.directory}/libs\"/>\r\n+                <copy todir=\"${activiti-modeler.directory}/libs\">\r\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\"/>\r\n+                </copy>\r\n+                \r\n+                <fixcrlf srcdir=\"${project.build.directory}/activiti-webapp-explorer2/editor/\" \r\n+                         includes=\"oryx.debug.js\"\r\n+                         eol=\"unix\"/>\r\n+                <patch patchfile=\"${basedir}/src/main/resources/oryx.debug.js.patch\"\r\n+                       originalfile=\"${project.build.directory}/activiti-webapp-explorer2/editor/oryx.debug.js\"\r\n+                       destfile=\"${activiti-modeler.directory}/editor/oryx.debug.js\"/>\r\n+                \r\n+                <delete dir=\"${project.build.directory}/activiti-webapp-explorer2\"/>\r\n+              </target>\r\n+            </configuration>\r\n+            <goals>\r\n+              <goal>run</goal>\r\n+            </goals>\r\n+          </execution>\r\n           <execution>\r\n             <id>explodeSyncopeWAR</id>\r\n             <phase>pre-integration-test</phase>\r"},{"sha":"65b2f3a3254deee2bc1dcb7e47d166f54a15320b","filename":"archetype/src/main/resources/archetype-resources/core/pom.xml","status":"modified","additions":48,"deletions":5,"changes":53,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -111,8 +111,9 @@ under the License.\n         <artifactId>maven-failsafe-plugin</artifactId>\r\n         <inherited>true</inherited>\r\n         <configuration>\r\n-          <redirectTestOutputToFile>true</redirectTestOutputToFile>\r\n-          <encoding>utf-8</encoding>\r\n+          <systemPropertyVariables>\r\n+            <jaxrsContentType>${jaxrs.content.type}</jaxrsContentType>\r\n+          </systemPropertyVariables>\r\n         </configuration>\r\n         <executions>\r\n           <execution>\r\n@@ -136,8 +137,10 @@ under the License.\n               <target>\r\n                 <unzip src=\"${project.build.directory}/${project.build.finalName}.war\" dest=\"${cargo.run.dir}\"/>\r\n                 <copy file=\"${project.build.directory}/test-classes/db.jsp\" todir=\"${cargo.run.dir}\"/>\r\n-                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\r\n-                  <fileset dir=\"${project.build.directory}/test-classes\"/>\r\n+                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\" overwrite=\"true\">\r\n+                  <fileset dir=\"${project.build.directory}/test-classes\">\r\n+                    <exclude name=\"**/*.class\" />\r\n+                  </fileset>\r\n                 </copy>\r\n               </target>\r\n             </configuration>\r\n@@ -177,7 +180,7 @@ under the License.\n             <type>standalone</type>\r\n             <properties>\r\n               <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>\r\n-              <!--<cargo.jvmargs>-Xdebug -Xrunjdwp:transport=dt_socket,address=9009,server=y,suspend=n</cargo.jvmargs>-->\r\n+              <cargo.jvmargs>-noverify -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m</cargo.jvmargs>\r\n             </properties>\r\n           </configuration>\r\n           <deployables>\r\n@@ -275,4 +278,44 @@ under the License.\n       </testResource>\r\n     </testResources>\r\n   </build>\r\n+  \r\n+  <profiles>\r\n+    <profile>\r\n+      <id>debug</id>\r\n+      \r\n+      <properties>\r\n+        <skipTests>true</skipTests>\r\n+      </properties>\r\n+      \r\n+      <build>\r\n+        <defaultGoal>clean verify cargo:run</defaultGoal>\r\n+\r\n+        <plugins>\r\n+          <plugin>\r\n+            <groupId>org.codehaus.cargo</groupId>\r\n+            <artifactId>cargo-maven2-plugin</artifactId>\r\n+            <inherited>true</inherited>\r\n+            <configuration>\r\n+              <configuration>\r\n+                <properties>\r\n+                  <cargo.jvmargs>-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n\r\n+                    -noverify -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m</cargo.jvmargs>\r\n+                </properties>\r\n+              </configuration>\r\n+            </configuration>\r\n+            <executions>\r\n+              <execution>\r\n+                <id>start-container</id>\r\n+                <phase>none</phase>\r\n+              </execution>\r\n+              <execution>\r\n+                <id>stop-container</id>\r\n+                <phase>none</phase>\r\n+              </execution>\r\n+            </executions>\r\n+          </plugin>\r\n+        </plugins>\r\n+      </build>\r\n+    </profile>\r\n+  </profiles>\r\n </project>\r"},{"sha":"5da435039e3ce4962224c76f9876eee3a5c0a68d","filename":"client/src/main/java/org/apache/syncope/client/SyncopeClient.java","status":"modified","additions":25,"deletions":1,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2FSyncopeClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2FSyncopeClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2FSyncopeClient.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -22,9 +22,12 @@\n import java.util.Map;\n import java.util.concurrent.ConcurrentHashMap;\n import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n import org.apache.cxf.jaxrs.client.WebClient;\n import org.apache.syncope.client.rest.RestClientFactoryBean;\n import org.apache.syncope.common.services.UserSelfService;\n+import org.apache.syncope.common.services.WorkflowService;\n+import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.RESTHeaders;\n \n /**\n@@ -72,6 +75,27 @@ public <T> T getObject(final URI location, final Class<?> serviceClass, final Cl\n \n     public boolean isSelfRegistrationAllowed() {\n         return Boolean.valueOf(restClientFactory.createServiceInstance(UserSelfService.class, mediaType, null, null).\n-                getOptions().getHeaderString(RESTHeaders.SELFREGISTRATION_ALLOWED.toString()));\n+                getOptions().getHeaderString(RESTHeaders.SELFREGISTRATION_ALLOWED));\n+    }\n+\n+    public boolean isActivitiEnabledFor(final AttributableType attributableType) {\n+        Response options = getService(WorkflowService.class).getOptions(attributableType);\n+\n+        boolean result;\n+        switch (attributableType) {\n+            case USER:\n+                result = Boolean.valueOf(options.getHeaderString(RESTHeaders.ACTIVITI_USER_ENABLED));\n+                break;\n+\n+            case ROLE:\n+                result = Boolean.valueOf(options.getHeaderString(RESTHeaders.ACTIVITI_ROLE_ENABLED));\n+                break;\n+\n+            case MEMBERSHIP:\n+            default:\n+                result = false;\n+        }\n+\n+        return result;\n     }\n }"},{"sha":"bc7c58a04a5dca8ceb384cee1a96e01e3d8846a7","filename":"common/src/main/java/org/apache/syncope/common/services/WorkflowService.java","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fservices%2FWorkflowService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fservices%2FWorkflowService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fservices%2FWorkflowService.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -20,6 +20,7 @@\n \r\n import javax.ws.rs.Consumes;\r\n import javax.ws.rs.GET;\r\n+import javax.ws.rs.OPTIONS;\r\n import javax.ws.rs.PUT;\r\n import javax.ws.rs.Path;\r\n import javax.ws.rs.PathParam;\r\n@@ -33,6 +34,14 @@\n @Path(\"workflows/{kind}\")\r\n public interface WorkflowService {\r\n \r\n+    /**\r\n+     * @return Response contains special syncope HTTP header indicating if Activiti is enabled for users / roles\r\n+     * @see org.apache.syncope.common.types.RESTHeaders#ACTIVITI_USER_ENABLED\r\n+     * @see org.apache.syncope.common.types.RESTHeaders#ACTIVITI_ROLE_ENABLED\r\n+     */\r\n+    @OPTIONS\r\n+    Response getOptions(@PathParam(\"kind\") AttributableType kind);\r\n+\r\n     /**\r\n      * @param kind Kind can be USER or ROLE only!\r\n      * @return Returns workflow definition for matching kind.\r"},{"sha":"f06ae0b4c020c990b96f7486a00db221cbf4238f","filename":"common/src/main/java/org/apache/syncope/common/types/RESTHeaders.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FRESTHeaders.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FRESTHeaders.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FRESTHeaders.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -38,6 +38,16 @@ public final class RESTHeaders {\n      */\n     public static final String SELFREGISTRATION_ALLOWED = \"Syncope.SelfRegistration.Allowed\";\n \n+    /**\n+     * Option key stating if Activiti workflow adapter is in use for users.\n+     */\n+    public static final String ACTIVITI_USER_ENABLED = \"Syncope.Activiti.User.Enabled\";\n+\n+    /**\n+     * Option key stating if Activiti workflow adapter is in use for roles.\n+     */\n+    public static final String ACTIVITI_ROLE_ENABLED = \"Syncope.Activiti.Role.Enabled\";\n+\n     /**\n      * HTTP header key for object ID assigned to an object after its creation.\n      */"},{"sha":"e6980105d04fdf5233c6e174c6607158af958bd4","filename":"console/pom.xml","status":"modified","additions":51,"deletions":1,"changes":52,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -125,6 +125,12 @@ under the License.\n     </dependency>\n \n     <!-- TEST -->\n+    <dependency>\n+      <groupId>org.activiti</groupId>\n+      <artifactId>activiti-webapp-explorer2</artifactId>            \n+      <type>war</type>\n+      <scope>test</scope>\n+    </dependency>\n     <dependency>\n       <groupId>org.apache.syncope</groupId>\n       <artifactId>syncope-build-tools</artifactId>\n@@ -186,6 +192,51 @@ under the License.\n         <artifactId>maven-antrun-plugin</artifactId>\n         <inherited>true</inherited>\n         <executions>\n+          <execution>\n+            <id>setupActivitiModeler</id>\n+            <phase>process-test-resources</phase>\n+            <configuration>\n+              <target>\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\"\n+                       dest=\"${project.build.directory}/activiti-webapp-explorer2\"/>\n+                \n+                <mkdir dir=\"${activiti-modeler.directory}\"/>\n+                \n+                <mkdir dir=\"${activiti-modeler.directory}/editor\"/>\n+                <copy todir=\"${activiti-modeler.directory}/editor\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\n+                    <exclude name=\"oryx.js\"/>\n+                  </fileset>\n+                </copy>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\"\n+                      todir=\"${activiti-modeler.directory}/editor\"/>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\"\n+                      todir=\"${activiti-modeler.directory}/editor\"/>\n+                \n+                <mkdir dir=\"${activiti-modeler.directory}/explorer\"/>\n+                <copy todir=\"${activiti-modeler.directory}/explorer\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\"/>\n+                </copy>\n+                \n+                <mkdir dir=\"${activiti-modeler.directory}/libs\"/>\n+                <copy todir=\"${activiti-modeler.directory}/libs\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\"/>\n+                </copy>\n+                \n+                <fixcrlf srcdir=\"${project.build.directory}/activiti-webapp-explorer2/editor/\" \n+                         includes=\"oryx.debug.js\"\n+                         eol=\"unix\"/>\n+                <patch patchfile=\"${basedir}/src/main/resources/oryx.debug.js.patch\"\n+                       originalfile=\"${project.build.directory}/activiti-webapp-explorer2/editor/oryx.debug.js\"\n+                       destfile=\"${activiti-modeler.directory}/editor/oryx.debug.js\"/>\n+                \n+                <delete dir=\"${project.build.directory}/activiti-webapp-explorer2\"/>\n+              </target>\n+            </configuration>\n+            <goals>\n+              <goal>run</goal>\n+            </goals>\n+          </execution>\n           <execution>\n             <id>explodeSyncopeWAR</id>\n             <phase>pre-integration-test</phase>\n@@ -320,7 +371,6 @@ under the License.\n                   javax.xml*,\n                   org.w3c.dom,\n                   org.apache.commons.lang3;version=\"[3,4)\",\n-                  org.apache.http*;version=\"[4,5)\",\n                   org.apache.syncope.client*;version=${project.version},\n                   org.apache.syncope.common*;version=${project.version},\n                   org.apache.wicket*;version=\"[6,7)\","},{"sha":"99b4f7b32bbce10ce30e34a2be6462bb845bf5e6","filename":"console/src/main/java/org/apache/syncope/console/SyncopeApplication.java","status":"modified","additions":41,"deletions":2,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeApplication.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -35,6 +35,9 @@\n import org.apache.syncope.console.pages.UserSelfModalPage;\n import org.apache.syncope.console.pages.Users;\n import org.apache.syncope.console.pages.WelcomePage;\n+import org.apache.syncope.console.resources.FilesystemResource;\n+import org.apache.syncope.console.resources.WorkflowDefGETResource;\n+import org.apache.syncope.console.resources.WorkflowDefPUTResource;\n import org.apache.syncope.console.rest.UserSelfRestClient;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n@@ -56,7 +59,10 @@\n import org.apache.wicket.request.Request;\n import org.apache.wicket.request.Response;\n import org.apache.wicket.request.resource.ContextRelativeResource;\n+import org.apache.wicket.request.resource.IResource;\n+import org.apache.wicket.request.resource.ResourceReference;\n import org.apache.wicket.spring.injection.annot.SpringComponentInjector;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n \n /**\n  * SyncopeApplication class.\n@@ -71,9 +77,11 @@\n \n     public static final String IMG_NOTSEL = \"notsel/\";\n \n-    private final static int EDIT_PROFILE_WIN_HEIGHT = 550;\n+    private static final String ACTIVITI_MODELER_CONTEXT = \"activiti-modeler\";\n \n-    private final static int EDIT_PROFILE_WIN_WIDTH = 800;\n+    private static final int EDIT_PROFILE_WIN_HEIGHT = 550;\n+\n+    private static final int EDIT_PROFILE_WIN_WIDTH = 800;\n \n     @Override\n     protected void init() {\n@@ -89,7 +97,38 @@ protected void init() {\n         getMarkupSettings().setStripWicketTags(true);\n         getMarkupSettings().setCompressWhitespace(true);\n \n+        final String activitiModelerDirectory = WebApplicationContextUtils.getWebApplicationContext(\n+                WebApplication.get().getServletContext()).getBean(\"activitiModelerDirectory\", String.class);\n         getRequestCycleListeners().add(new SyncopeRequestCycleListener());\n+\n+        mountResource(\"/\" + ACTIVITI_MODELER_CONTEXT, new ResourceReference(ACTIVITI_MODELER_CONTEXT) {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new FilesystemResource(ACTIVITI_MODELER_CONTEXT, activitiModelerDirectory);\n+            }\n+\n+        });\n+        mountResource(\"/workflowDefGET\", new ResourceReference(\"workflowDefGET\") {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new WorkflowDefGETResource();\n+            }\n+        });\n+        mountResource(\"/workflowDefPUT\", new ResourceReference(\"workflowDefPUT\") {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new WorkflowDefPUTResource();\n+            }\n+        });\n     }\n \n     public void setupNavigationPanel(final WebPage page, final XMLRolesReader xmlRolesReader, final boolean notsel) {"},{"sha":"38b2ecd35c80196b4324472d9ef434e787ab3f58","filename":"console/src/main/java/org/apache/syncope/console/SyncopeSession.java","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -28,6 +28,7 @@\n import org.apache.commons.lang3.builder.HashCodeBuilder;\n import org.apache.syncope.client.SyncopeClient;\n import org.apache.syncope.client.SyncopeClientFactoryBean;\n+import org.apache.syncope.common.types.AttributableType;\n import org.apache.wicket.Session;\n import org.apache.wicket.authroles.authorization.strategies.role.Roles;\n import org.apache.wicket.protocol.http.WebApplication;\n@@ -85,13 +86,20 @@ public boolean isSelfRegistrationAllowed() {\n         return client.isSelfRegistrationAllowed();\n     }\n \n+    public boolean isActivitiEnabledFor(final AttributableType type) {\n+        SyncopeClient client = clients.isEmpty()\n+                ? clientFactory.createAnonymous()\n+                : clients.values().iterator().next();\n+        return client.isActivitiEnabledFor(type);\n+    }\n+\n     public <T> T getService(final Class<T> service) {\n         return getService(service, this.username, this.password);\n     }\n \n     public <T> T getService(final MediaType mediaType, final Class<T> serviceClass) {\n         SyncopeClientFactoryBean.ContentType preType = clientFactory.getContentType();\n-        \n+\n         clientFactory.setContentType(SyncopeClientFactoryBean.ContentType.fromString(mediaType.toString()));\n         T service = clientFactory.create(username, password).getService(serviceClass);\n         clientFactory.setContentType(preType);"},{"sha":"f8bb865e7e050be6760788ede2f7892c81f8c5c6","filename":"console/src/main/java/org/apache/syncope/console/commons/HttpResourceStream.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -39,17 +39,20 @@ public class HttpResourceStream extends AbstractResourceStream implements IFixed\n \n     private String contentType;\n \n+    private String location;\n+\n     private String filename;\n \n     public HttpResourceStream(final Response response) {\n         super();\n-        \n+\n         Object entity = response.getEntity();\n-        if (response.getStatusInfo().getStatusCode() == Response.Status.OK.getStatusCode() \n+        if (response.getStatusInfo().getStatusCode() == Response.Status.OK.getStatusCode()\n                 && (entity instanceof InputStream)) {\n \n             this.inputStream = (InputStream) entity;\n             this.contentType = response.getHeaderString(HttpHeaders.CONTENT_TYPE);\n+            this.location = response.getLocation().toASCIIString();\n             String contentDisposition = response.getHeaderString(RESTHeaders.CONTENT_DISPOSITION);\n             if (StringUtils.isNotBlank(contentDisposition)) {\n                 String[] splitted = contentDisposition.split(\"=\");\n@@ -83,7 +86,7 @@ public void close() throws IOException {\n \n     @Override\n     public String locationAsString() {\n-        return null;\n+        return location;\n     }\n \n     @Override"},{"sha":"1c4f2038eb7cae5152ffca35ddc8ab7013b18266","filename":"console/src/main/java/org/apache/syncope/console/pages/ActivitiModelerPopupPage.java","status":"added","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,27 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.pages;\n+\n+import org.apache.wicket.markup.html.WebPage;\n+\n+public class ActivitiModelerPopupPage extends WebPage {\n+\n+    private static final long serialVersionUID = -7031206743629422898L;\n+\n+}"},{"sha":"c62799a4b4f88188b6918030f6d20109a9bcab39","filename":"console/src/main/java/org/apache/syncope/console/pages/BasePopupPage.java","status":"added","additions":33,"deletions":0,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,33 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.pages;\n+\n+import org.apache.wicket.markup.head.IHeaderResponse;\n+import org.apache.wicket.markup.head.PriorityHeaderItem;\n+\n+public class BasePopupPage extends AbstractBasePage {\n+\n+    private static final long serialVersionUID = -2633667311332659505L;\n+\n+    @Override\n+    public void renderHead(final IHeaderResponse response) {\n+        super.renderHead(response);\n+        response.render(new PriorityHeaderItem(meta));\n+    }\n+}"},{"sha":"c78f3ff7fbb67ef4885a35301877c851935b890b","filename":"console/src/main/java/org/apache/syncope/console/pages/Configuration.java","status":"modified","additions":60,"deletions":33,"changes":93,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -18,13 +18,13 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import java.io.File;\n import java.io.Serializable;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n-import javax.ws.rs.core.MediaType;\n import org.apache.logging.log4j.LogManager;\n import org.apache.logging.log4j.core.LoggerContext;\n import org.apache.logging.log4j.core.config.LoggerConfig;\n@@ -44,15 +44,14 @@\n import org.apache.syncope.console.rest.LoggerRestClient;\n import org.apache.syncope.console.rest.NotificationRestClient;\n import org.apache.syncope.console.rest.WorkflowRestClient;\n-import org.apache.syncope.console.wicket.ajax.markup.html.ClearIndicatingAjaxButton;\n import org.apache.syncope.console.wicket.extensions.markup.html.repeater.data.table.CollectionPropertyColumn;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n+import org.apache.syncope.console.wicket.markup.html.link.VeilPopupSettings;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n@@ -66,7 +65,8 @@\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n-import org.apache.wicket.markup.html.form.TextArea;\n+import org.apache.wicket.markup.html.image.Image;\n+import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n import org.apache.wicket.markup.html.link.Link;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.PropertyListView;\n@@ -76,10 +76,14 @@\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.protocol.http.WebApplication;\n import org.apache.wicket.request.handler.resource.ResourceStreamRequestHandler;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.request.resource.ContentDisposition;\n+import org.apache.wicket.request.resource.DynamicImageResource;\n+import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n \n /**\n  * Configurations WebPage.\n@@ -143,45 +147,68 @@ public Configuration(final PageParameters parameters) {\n         setupNotification();\n \n         // Workflow definition stuff\n+        WebMarkupContainer noActivitiEnabledForUsers = new WebMarkupContainer(\"noActivitiEnabledForUsers\");\n+        noActivitiEnabledForUsers.setOutputMarkupPlaceholderTag(true);\n+        add(noActivitiEnabledForUsers);\n+\n         WebMarkupContainer workflowDefContainer = new WebMarkupContainer(\"workflowDefContainer\");\n+        workflowDefContainer.setOutputMarkupPlaceholderTag(true);\n \n-        Form wfForm = new Form(\"workflowDefForm\");\n+        if (wfRestClient.isActivitiEnabledForUsers()) {\n+            noActivitiEnabledForUsers.setVisible(false);\n+        } else {\n+            workflowDefContainer.setVisible(false);\n+        }\n \n-        final TextArea<String> workflowDefArea = new TextArea<String>(\"workflowDefArea\",\n-                new Model<String>(wfRestClient.getDefinition(MediaType.APPLICATION_XML_TYPE)));\n-        wfForm.add(workflowDefArea);\n+        BookmarkablePageLink<Void> activitiModeler =\n+                new BookmarkablePageLink<Void>(\"activitiModeler\", ActivitiModelerPopupPage.class);\n+        activitiModeler.setPopupSettings(new VeilPopupSettings().setHeight(600).setWidth(800));\n+        MetaDataRoleAuthorizationStrategy.authorize(activitiModeler, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"workflowDefRead\"));\n+        workflowDefContainer.add(activitiModeler);\n+        // Check if Activiti Modeler directory is found\n+        boolean activitiModelerEnabled = false;\n+        try {\n+            String activitiModelerDirectory = WebApplicationContextUtils.getWebApplicationContext(\n+                    WebApplication.get().getServletContext()).getBean(\"activitiModelerDirectory\", String.class);\n+            File baseDir = new File(activitiModelerDirectory);\n+            activitiModelerEnabled = baseDir.exists() && baseDir.canRead() && baseDir.isDirectory();\n+        } catch (Exception e) {\n+            LOG.error(\"Could not check for Activiti Modeler directory\", e);\n+        }\n+        activitiModeler.setEnabled(activitiModelerEnabled);\n \n-        AjaxButton submit =\n-                new ClearIndicatingAjaxButton(APPLY, new Model<String>(getString(SUBMIT)), getPageReference()) {\n+        BookmarkablePageLink<Void> xmlEditor =\n+                new BookmarkablePageLink<Void>(\"xmlEditor\", XMLEditorPopupPage.class);\n+        xmlEditor.setPopupSettings(new VeilPopupSettings().setHeight(350).setWidth(800));\n+        MetaDataRoleAuthorizationStrategy.authorize(xmlEditor, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"workflowDefRead\"));\n+        workflowDefContainer.add(xmlEditor);\n \n-                    private static final long serialVersionUID = -958724007591692537L;\n+        Image workflowDefDiagram = new Image(\"workflowDefDiagram\", new Model()) {\n \n-                    @Override\n-                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n-                        try {\n-                            wfRestClient.updateDefinition(\n-                                    MediaType.APPLICATION_XML_TYPE, workflowDefArea.getModelObject());\n-                            info(getString(Constants.OPERATION_SUCCEEDED));\n-                        } catch (SyncopeClientException scee) {\n-                            error(getString(Constants.ERROR) + \": \" + scee.getMessage());\n-                        }\n-                        target.add(feedbackPanel);\n-                    }\n+            private static final long serialVersionUID = -8457850449086490660L;\n+\n+            @Override\n+            protected IResource getImageResource() {\n+                return new DynamicImageResource() {\n+\n+                    private static final long serialVersionUID = 923201517955737928L;\n \n                     @Override\n-                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n-                        target.add(feedbackPanel);\n+                    protected byte[] getImageData(final IResource.Attributes attributes) {\n+                        return wfRestClient.isActivitiEnabledForUsers()\n+                                ? wfRestClient.getDiagram()\n+                                : new byte[0];\n                     }\n                 };\n+            }\n \n-        MetaDataRoleAuthorizationStrategy.authorize(submit, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Configuration\",\n-                \"workflowDefUpdate\"));\n-        wfForm.add(submit);\n-\n-        workflowDefContainer.add(wfForm);\n+        };\n+        workflowDefContainer.add(workflowDefDiagram);\n \n-        MetaDataRoleAuthorizationStrategy.authorize(workflowDefContainer, ENABLE, xmlRolesReader.getAllAllowedRoles(\n-                \"Configuration\", \"workflowDefRead\"));\n+        MetaDataRoleAuthorizationStrategy.authorize(workflowDefContainer, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"workflowDefRead\"));\n         add(workflowDefContainer);\n \n         // Logger stuff\n@@ -280,7 +307,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n         final AjaxFallbackDefaultDataTable<ConfigurationTO, String> confTable =\n                 new AjaxFallbackDefaultDataTable<ConfigurationTO, String>(\n-                \"syncopeconf\", confColumns, new SyncopeConfProvider(), confPaginatorRows);\n+                        \"syncopeconf\", confColumns, new SyncopeConfProvider(), confPaginatorRows);\n \n         confContainer = new WebMarkupContainer(\"confContainer\");\n         confContainer.add(confTable);\n@@ -455,7 +482,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n         final AjaxFallbackDefaultDataTable<NotificationTO, String> notificationTable =\n                 new AjaxFallbackDefaultDataTable<NotificationTO, String>(\n-                \"notificationTable\", notificationCols, new NotificationProvider(), notificationPaginatorRows);\n+                        \"notificationTable\", notificationCols, new NotificationProvider(), notificationPaginatorRows);\n \n         notificationContainer = new WebMarkupContainer(\"notificationContainer\");\n         notificationContainer.add(notificationTable);"},{"sha":"b79b014d073e23634611cd4c392619b3f95ce911","filename":"console/src/main/java/org/apache/syncope/console/pages/StatusModalPage.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -18,7 +18,6 @@\n  */\n package org.apache.syncope.console.pages;\n \n-import static org.apache.syncope.console.pages.AbstractBasePage.LOG;\n import java.util.ArrayList;\n import java.util.List;\n import org.apache.syncope.common.to.AbstractAttributableTO;"},{"sha":"1668979f6733e11b3eeec38adf0728ee173693de","filename":"console/src/main/java/org/apache/syncope/console/pages/XMLEditorPopupPage.java","status":"added","additions":87,"deletions":0,"changes":87,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,87 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.pages;\n+\n+import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.validation.SyncopeClientException;\n+import org.apache.syncope.console.commons.Constants;\n+import org.apache.syncope.console.rest.WorkflowRestClient;\n+import org.apache.syncope.console.wicket.ajax.markup.html.ClearIndicatingAjaxButton;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.TextArea;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.apache.wicket.util.io.IOUtils;\n+\n+public class XMLEditorPopupPage extends BasePopupPage {\n+\n+    private static final long serialVersionUID = 5816041644635271734L;\n+\n+    @SpringBean\n+    private WorkflowRestClient wfRestClient;\n+\n+    public XMLEditorPopupPage() {\n+        Form wfForm = new Form(\"workflowDefForm\");\n+\n+        String definition;\n+        try {\n+            definition = IOUtils.toString(wfRestClient.getDefinition(MediaType.APPLICATION_XML_TYPE));\n+        } catch (IOException e) {\n+            LOG.error(\"Could not get workflow definition\", e);\n+            definition = StringUtils.EMPTY;\n+        }\n+        final TextArea<String> workflowDefArea = new TextArea<String>(\"workflowDefArea\", new Model<String>(definition));\n+        wfForm.add(workflowDefArea);\n+\n+        AjaxButton submit =\n+                new ClearIndicatingAjaxButton(APPLY, new Model<String>(getString(SUBMIT)), getPageReference()) {\n+\n+                    private static final long serialVersionUID = -958724007591692537L;\n+\n+                    @Override\n+                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n+                        try {\n+                            wfRestClient.updateDefinition(\n+                                    MediaType.APPLICATION_XML_TYPE, workflowDefArea.getModelObject());\n+                            info(getString(Constants.OPERATION_SUCCEEDED));\n+                        } catch (SyncopeClientException scee) {\n+                            error(getString(Constants.ERROR) + \": \" + scee.getMessage());\n+                        }\n+                        target.add(feedbackPanel);\n+                    }\n+\n+                    @Override\n+                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                        target.add(feedbackPanel);\n+                    }\n+                };\n+\n+        MetaDataRoleAuthorizationStrategy.authorize(submit, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"workflowDefUpdate\"));\n+        wfForm.add(submit);\n+\n+        this.add(wfForm);\n+    }\n+\n+}"},{"sha":"4cab9ec1e4601361117e36e54a2c95e9a4856657","filename":"console/src/main/java/org/apache/syncope/console/resources/FilesystemResource.java","status":"added","additions":83,"deletions":0,"changes":83,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FFilesystemResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FFilesystemResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FFilesystemResource.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,83 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.resources;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Mounts directory on local filesystem as subcontext.\n+ */\n+public class FilesystemResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = -4791087117785935198L;\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(FilesystemResource.class);\n+\n+    private final String baseCtx;\n+\n+    private final String basePath;\n+\n+    public FilesystemResource(final String baseCtx, final String basePath) {\n+        this.baseCtx = baseCtx;\n+        this.basePath = basePath;\n+    }\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        ResourceResponse response = new ResourceResponse();\n+\n+        final File baseDir = new File(basePath);\n+        if (baseDir.exists() && baseDir.canRead() && baseDir.isDirectory()) {\n+            String reqPath = attributes.getRequest().getUrl().getPath();\n+            final String subPath = reqPath.substring(reqPath.indexOf(baseCtx) + baseCtx.length()).\n+                    replace('/', File.separatorChar);\n+            LOG.debug(\"Request for {}\", subPath);\n+\n+            response.setWriteCallback(new WriteCallback() {\n+\n+                @Override\n+                public void writeData(final Attributes attributes) throws IOException {\n+                    FileInputStream resourceIS = null;\n+                    try {\n+                        resourceIS = new FileInputStream(new File(baseDir, subPath));\n+                        IOUtils.copy(resourceIS, attributes.getResponse().getOutputStream());\n+                    } catch (IOException e) {\n+                        LOG.error(\"Could not read from {}\", baseDir.getAbsolutePath() + subPath, e);\n+                    } finally {\n+                        IOUtils.closeQuietly(resourceIS);\n+                    }\n+                }\n+            });\n+        } else {\n+            LOG.error(\"{} not found, not readable or not a directory\", basePath);\n+        }\n+\n+        return response;\n+    }\n+\n+}"},{"sha":"cf4d6e129c939803f6affa3b64628cb52f2fa3a2","filename":"console/src/main/java/org/apache/syncope/console/resources/WorkflowDefGETResource.java","status":"added","additions":58,"deletions":0,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefGETResource.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,58 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.resources;\n+\n+import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.syncope.console.rest.WorkflowRestClient;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Mirror REST resource for obtaining user workflow definition in JSON (used by Activiti Modeler).\n+ *\n+ * @see org.apache.syncope.common.services.WorkflowService#exportDefinition(\n+ * org.apache.syncope.common.types.AttributableType)\n+ */\n+public class WorkflowDefGETResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = 4637304868056148970L;\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        ResourceResponse response = new ResourceResponse();\n+        response.setContentType(MediaType.APPLICATION_JSON);\n+\n+        response.setWriteCallback(new WriteCallback() {\n+\n+            @Override\n+            public void writeData(final Attributes attributes) throws IOException {\n+                IOUtils.copy(WebApplicationContextUtils.getWebApplicationContext(\n+                        WebApplication.get().getServletContext()).getBean(WorkflowRestClient.class).\n+                        getDefinition(MediaType.APPLICATION_JSON_TYPE),\n+                        attributes.getResponse().getOutputStream());\n+            }\n+        });\n+\n+        return response;\n+    }\n+\n+}"},{"sha":"b52374ab8bebff523e8e3aaf2387228f0c9ea202","filename":"console/src/main/java/org/apache/syncope/console/resources/WorkflowDefPUTResource.java","status":"added","additions":75,"deletions":0,"changes":75,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,75 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.resources;\n+\n+import java.io.IOException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.cxf.common.util.UrlUtils;\n+import org.apache.syncope.console.rest.WorkflowRestClient;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Mirror REST resource for putting user workflow definition in JSON (used by Activiti Modeler).\n+ *\n+ * @seeorg.apache.syncope.common.services.WorkflowService#importDefinition(\n+ * org.apache.syncope.common.types.AttributableType,\n+ * java.lang.String)\n+ */\n+public class WorkflowDefPUTResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = 2964542005207297944L;\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(WorkflowDefPUTResource.class);\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        String definition = null;\n+        try {\n+            HttpServletRequest request = (HttpServletRequest) attributes.getRequest().getContainerRequest();\n+            String requestBody = IOUtils.toString(request.getInputStream());\n+            String[] split = requestBody.split(\"&\");\n+            for (int i = 0; i < split.length && definition == null; i++) {\n+                String keyValue = split[i];\n+                if (keyValue.startsWith(\"json_xml=\")) {\n+                    definition = UrlUtils.urlDecode(keyValue.split(\"=\")[1]);\n+                }\n+            }\n+        } catch (IOException e) {\n+            LOG.error(\"Could not extract workflow definition from request\", e);\n+        }\n+\n+        WebApplicationContextUtils.getWebApplicationContext(WebApplication.get().getServletContext()).\n+                getBean(WorkflowRestClient.class).\n+                updateDefinition(MediaType.APPLICATION_JSON_TYPE, definition);\n+\n+        ResourceResponse response = new ResourceResponse();\n+        response.setStatusCode(204);\n+        return response;\n+    }\n+\n+}"},{"sha":"1f7d4a53a1ae9d9e76620d03d0b38f8761ebb489","filename":"console/src/main/java/org/apache/syncope/console/rest/WorkflowRestClient.java","status":"modified","additions":30,"deletions":7,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FWorkflowRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FWorkflowRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FWorkflowRestClient.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -21,10 +21,12 @@\n import java.io.InputStream;\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n-import org.apache.commons.lang3.StringUtils;\n import org.apache.cxf.helpers.IOUtils;\n+import org.apache.cxf.jaxrs.client.WebClient;\n import org.apache.syncope.common.services.WorkflowService;\n import org.apache.syncope.common.types.AttributableType;\n+import org.apache.syncope.common.types.RESTHeaders;\n+import org.apache.syncope.common.validation.SyncopeClientException;\n import org.apache.syncope.console.SyncopeSession;\n import org.springframework.stereotype.Component;\n \n@@ -37,17 +39,38 @@ private WorkflowService getService(final MediaType mediaType) {\n         return SyncopeSession.get().getService(mediaType, WorkflowService.class);\n     }\n \n-    public String getDefinition(final MediaType mediaType) {\n+    public InputStream getDefinition(final MediaType mediaType) {\n         Response response = getService(mediaType).exportDefinition(AttributableType.USER);\n \n-        String definition;\n+        return (InputStream) response.getEntity();\n+    }\n+\n+    public byte[] getDiagram() {\n+        WorkflowService service = getService(WorkflowService.class);\n+        WebClient.client(service).accept(RESTHeaders.MEDIATYPE_IMAGE_PNG);\n+        Response response = service.exportDiagram(AttributableType.USER);\n+\n+        byte[] diagram;\n         try {\n-            definition = IOUtils.toString((InputStream) response.getEntity());\n+            diagram = IOUtils.readBytesFromStream((InputStream) response.getEntity());\n         } catch (Exception e) {\n-            LOG.error(\"Could not get workflow definition as {}\", mediaType, e);\n-            definition = StringUtils.EMPTY;\n+            LOG.error(\"Could not get workflow diagram\", e);\n+            diagram = new byte[0];\n+        }\n+        return diagram;\n+    }\n+\n+    public boolean isActivitiEnabledForUsers() {\n+        Boolean result = null;\n+        try {\n+            result = SyncopeSession.get().isActivitiEnabledFor(AttributableType.USER);\n+        } catch (SyncopeClientException e) {\n+            LOG.error(\"While seeking if Activiti is enabled for users\", e);\n         }\n-        return definition;\n+\n+        return result == null\n+                ? false\n+                : result.booleanValue();\n     }\n \n     public void updateDefinition(final MediaType mediaType, final String definition) {"},{"sha":"0898e5a75e08d4cd8f8833293e2406601a072056","filename":"console/src/main/java/org/apache/syncope/console/wicket/markup/html/link/VeilPopupSettings.java","status":"added","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.wicket.markup.html.link;\n+\n+import org.apache.wicket.markup.html.link.PopupSettings;\n+\n+public class VeilPopupSettings extends PopupSettings {\n+\n+    private static final long serialVersionUID = -2727046117490858226L;\n+\n+    @Override\n+    public String getPopupJavaScript() {\n+        return \"document.getElementById('veil').style.display = 'block';\" + super.getPopupJavaScript();\n+    }\n+\n+}"},{"sha":"10aa25d55cf7c98ac6424b6bb51e9c77846f39e5","filename":"console/src/main/resources/applicationContext.xml","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2FapplicationContext.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -63,6 +63,10 @@ under the License.\n     <constructor-arg value=\"${anonymousKey}\"/>\n   </bean>\n \n+  <bean id=\"activitiModelerDirectory\" class=\"java.lang.String\">\n+    <constructor-arg value=\"${activiti-modeler.directory}\"/>\n+  </bean>\n+\n   <bean id=\"syncopeApplication\" class=\"org.apache.syncope.console.SyncopeApplication\"/>\n \n   <bean id=\"preferenceManager\" class=\"org.apache.syncope.console.commons.PreferenceManager\"/>"},{"sha":"789538f8423ec5c5e56bc00052cd07928fc12a4c","filename":"console/src/main/resources/org/apache/syncope/console/pages/ActivitiModelerPopupPage.html","status":"added","additions":65,"deletions":0,"changes":65,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n+<html xmlns=\"http://www.w3.org/1999/xhtml\"\n+      xmlns:b3mn=\"http://b3mn.org/2007/b3mn\"\n+      xmlns:ext=\"http://b3mn.org/2007/ext\"\n+      xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n+      xmlns:atom=\"http://b3mn.org/2007/atom+xhtml\">\n+  <head profile=\"http://purl.org/NET/erdf/profile\">\n+    <title>Apache Syncope / Activiti Modeler</title>\n+    <!-- libraries -->\n+    <script src=\"activiti-modeler/libs/prototype-1.5.1.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/libs/path_parser.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/libs/ext-2.0.2/adapter/ext/ext-base.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/libs/ext-2.0.2/ext-all-debug.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/libs/ext-2.0.2/color-field.js\" type=\"text/javascript\"></script>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/libs/ext-2.0.2/resources/css/ext-all.css\" type=\"text/css\"></link>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/libs/ext-2.0.2/resources/css/xtheme-darkgray.css\" type=\"text/css\"></link>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/editor/css/theme_norm.css\" type=\"text/css\"></link>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/editor/css/theme_norm_signavio.css\" type=\"text/css\"></link>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/explorer/src/css/xtheme-smoky.css\" type=\"text/css\"></link>\n+    <link rel=\"Stylesheet\" media=\"screen\" href=\"activiti-modeler/explorer/src/css/custom-style.css\" type=\"text/css\"></link>\n+    <!-- oryx editor -->\n+    <!-- language files -->\n+    <script src=\"activiti-modeler/editor/i18n/translation_en_us.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/editor/i18n/translation_signavio_en_us.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/libs/utils.js\" type=\"text/javascript\"></script>\n+    <script src=\"activiti-modeler/editor/oryx.debug.js\" type=\"text/javascript\"></script>\n+    <!-- erdf schemas -->\n+    <link rel=\"schema.dc\" href=\"http://purl.org/dc/elements/1.1/\"></link>\n+    <link rel=\"schema.dcTerms\" href=\"http://purl.org/dc/terms/\"></link>\n+    <link rel=\"schema.b3mn\" href=\"http://b3mn.org\"></link>\n+    <link rel=\"schema.oryx\" href=\"http://oryx-editor.org/\"></link>\n+    <link rel=\"schema.raziel\" href=\"http://raziel.org/\"></link>\n+\n+    <script type=\"text/javascript\">\n+      window.onunload = refreshParent;\n+      function refreshParent() {\n+        if (window.opener.location.toString().indexOf('#workflow') === -1) {\n+          window.opener.location = window.opener.location + \"#workflow\";\n+        }\n+        window.opener.location.reload();\n+      }\n+    </script>\n+  </head>\n+  <body style=\"overflow:hidden;\">\n+  </body>\n+</html>"},{"sha":"53e8c2ffeef456a98ed6a118f7c63a463c47999c","filename":"console/src/main/resources/org/apache/syncope/console/pages/BaseModalPage.html","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBaseModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBaseModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBaseModalPage.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -16,8 +16,10 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-<html>\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n   <head>\n+    <title></title>\n+\n     <link rel=\"stylesheet\" type=\"text/css\" href=\"css/jquery-ui.css\" media=\"all\"/>\n     <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\" media=\"all\"/>\n     <link rel=\"stylesheet\" type=\"text/css\" href=\"css/fieldstyle.css\" media=\"all\"/>\n@@ -41,6 +43,6 @@\n   <body onload=\"setTimeout('window.focus();', 0);\">\n     <div wicket:id=\"feedback\"/>\n \n-  <wicket:child />\n-</body>\n+    <wicket:child />\n+  </body>\n </html>"},{"sha":"bd9ef61f4b30e5095fbf8c985024803c06a228bc","filename":"console/src/main/resources/org/apache/syncope/console/pages/BasePage.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -17,7 +17,7 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-<html>\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n   <head>\n     <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n     <meta http-equiv=\"Content-Style-Type\" content=\"text/css\"/>"},{"sha":"7847a215155edb68d22f29e9c7d612a410d46a12","filename":"console/src/main/resources/org/apache/syncope/console/pages/BasePopupPage.html","status":"added","additions":39,"deletions":0,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePopupPage.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,39 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <head>\n+    <title></title>\n+\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/jquery-ui.css\" media=\"all\"/>\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\" media=\"all\"/>\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/fieldstyle.css\" media=\"all\"/>\n+\n+    <style type=\"text/css\">\n+      table.palette td.header {\n+        background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n+          repeat-x scroll 50% 50% #E6E6E6 !important;\n+      }\n+    </style>\n+  </head>\n+  <body onload=\"setTimeout('window.focus();', 0);\">\n+    <div wicket:id=\"feedback\"/>\n+\n+    <wicket:child />\n+  </body>\n+</html>"},{"sha":"ebd6408fe7ec019e992dfd73ca72281643488816","filename":"console/src/main/resources/org/apache/syncope/console/pages/Configuration.html","status":"modified","additions":42,"deletions":49,"changes":91,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -17,42 +17,22 @@\n under the License.\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n-  <wicket:head>\n-    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/codemirror.css\" />\n-    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/codemirror_default_theme.css\" />\n-\n-    <script type=\"text/javascript\" src=\"scripts/codemirror.js\"></script>\n-    <script type=\"text/javascript\" src=\"scripts/xmlpure.js\"></script>\n-    <script type=\"text/javascript\">\n-      function updateTextArea(editor) {\n-        document.getElementById(\"workflowDefArea\").value = editor.getValue();\n-      }\n-    </script>\n-\n-    <style>\n-      td#level {\n-        width: 100px;\n-        text-align: center;\n-      }\n-    </style>\n-  </wicket:head>\n-\n   <wicket:extend>\n \n     <div id=\"tabs\">\n       <ul>\n         <li class=\"tabs-selected\">\n-          <a href=\"#tabs-1\"><span><wicket:message key=\"tab1\"/></span></a>\n+          <a href=\"#parameters\"><span><wicket:message key=\"parameters\"/></span></a>\n         </li>\n-        <li><a href=\"#tabs-2\"><span><wicket:message key=\"tab2\"/></span></a></li>\n-        <li><a href=\"#tabs-3\"><span><wicket:message key=\"tab3\"/></span></a></li>\n-        <li><a href=\"#tabs-4\"><span><wicket:message key=\"tab4\"/></span></a></li>\n-        <li><a href=\"#tabs-5\"><span><wicket:message key=\"tab5\"/></span></a></li>\n-        <li><a href=\"#tabs-6\"><span><wicket:message key=\"tab6\"/></span></a></li>\n-        <li><a href=\"#tabs-7\"><span><wicket:message key=\"tab7\"/></span></a></li>\n-        <li><a href=\"#tabs-8\"><span><wicket:message key=\"tab8\"/></span></a></li>\n+        <li><a href=\"#passwordPolicies\"><span><wicket:message key=\"passwordPolicies\"/></span></a></li>\n+        <li><a href=\"#accountPolicies\"><span><wicket:message key=\"accountPolicies\"/></span></a></li>\n+        <li><a href=\"#syncPolicies\"><span><wicket:message key=\"syncPolicies\"/></span></a></li>\n+        <li><a href=\"#notifications\"><span><wicket:message key=\"notifications\"/></span></a></li>\n+        <li><a href=\"#workflow\"><span><wicket:message key=\"workflow\"/></span></a></li>\n+        <li><a href=\"#coreLog\"><span><wicket:message key=\"coreLog\"/></span></a></li>\n+        <li><a href=\"#consoleLog\"><span><wicket:message key=\"consoleLog\"/></span></a></li>\n       </ul>\n-      <div id=\"tabs-1\">\n+      <div id=\"parameters\">\n \n         <div id=\"users-contain\" class=\"ui-widget\" style=\"width:inherit\">\n           <span wicket:id=\"confContainer\">\n@@ -77,16 +57,16 @@\n           <wicket:message key=\"create_configuration\"/>\n         </a>\n       </div>\n-      <div id=\"tabs-2\">\n+      <div id=\"passwordPolicies\">\n         <span wicket:id=\"passwordPoliciesPanel\">[password policies]</span>\n       </div>\n-      <div id=\"tabs-3\">\n+      <div id=\"accountPolicies\">\n         <span wicket:id=\"accountPoliciesPanel\">[account policies]</span>\n       </div>\n-      <div id=\"tabs-4\">\n+      <div id=\"syncPolicies\">\n         <span wicket:id=\"syncPoliciesPanel\">[sync policies]</span>\n       </div>\n-      <div id=\"tabs-5\">\n+      <div id=\"notifications\">\n         <div id=\"users-contain\" class=\"ui-widget\" style=\"width:inherit\">\n           <span wicket:id=\"notificationContainer\">\n             <table class=\"ui-widget ui-widget-content table-hover\"\n@@ -110,26 +90,39 @@\n           <wicket:message key=\"create_notification\"/>\n         </a>\n       </div>\n-      <div id=\"tabs-6\">\n+      <div id=\"workflow\">\n         <div id=\"users-contain\" class=\"ui-widget\" style=\"width:inherit\">\n+          <span wicket:id=\"noActivitiEnabledForUsers\"><i><wicket:message key=\"noActivitiEnabledForUsers\"/></i></span>\n           <span wicket:id=\"workflowDefContainer\">\n-            <form wicket:id=\"workflowDefForm\">\n-              <textarea wicket:id=\"workflowDefArea\" id=\"workflowDefArea\" style=\"width:100%;height:350px;\">\n-              </textarea>\n-              <div style=\"margin: 10px 0px 0\">\n-                <input type=\"submit\"\n-                       class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                       wicket:id=\"apply\"/>\n-              </div>\n-            </form>\n-            <script>\n-              var editor = CodeMirror.fromTextArea(document.getElementById(\"workflowDefArea\"),\n-                      {mode: {name: \"xmlpure\"}, lineNumbers: true, onChange: updateTextArea});\n-            </script>\n+            <div style=\"float: left;\">\n+              <button wicket:id=\"activitiModeler\">\n+                <div style=\"display: table-row;\">\n+                  <div style=\"display: table-cell\">\n+                    <img src=\"img/modeler.png\" alt=\"Activiti Modeler\" title=\"Activiti Modeler\"/>\n+                  </div>\n+                  <div style=\"display: table-cell;vertical-align:middle;font-size:62.5%;\">\n+                    Activiti Modeler\n+                  </div>\n+                </div>\n+              </button>\n+            </div>\n+            <div>\n+              <button wicket:id=\"xmlEditor\">\n+                <div style=\"display: table-row;\">\n+                  <div style=\"display: table-cell\">\n+                    <img src=\"img/xml.png\" alt=\"XML editor\" title=\"XML editor\"/>\n+                  </div>\n+                  <div style=\"display: table-cell;vertical-align:middle;font-size:62.5%;\">                  \n+                    XML editor\n+                  </div>\n+                </div>\n+              </button>\n+            </div>\n+            <img wicket:id=\"workflowDefDiagram\" style=\"width: 100%;\"/>\n           </span>\n         </div>\n       </div>\n-      <div id=\"tabs-7\">\n+      <div id=\"coreLog\">\n         <div id=\"users-contain\" class=\"ui-widget\" style=\"width:inherit\">\n           <span wicket:id=\"coreLoggerContainer\">\n             <table class=\"ui-widget ui-widget-content table-hover\">\n@@ -149,7 +142,7 @@\n           </span>\n         </div>\n       </div>\n-      <div id=\"tabs-8\">\n+      <div id=\"consoleLog\">\n         <div id=\"users-contain\" class=\"ui-widget\" style=\"width:inherit\">\n           <span wicket:id=\"consoleLoggerContainer\">\n             <table class=\"ui-widget ui-widget-content table-hover\">"},{"sha":"b6ce0d6ec3a8eace25552375f28b9e51daf0f6bf","filename":"console/src/main/resources/org/apache/syncope/console/pages/Configuration.properties","status":"modified","additions":9,"deletions":9,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -16,23 +16,23 @@\n # under the License.\n key=Key\n value=Value\n-tab1=Parameters\n-tab2=Password Policies\n-tab3=Account Policies\n-tab4=Synchronization Policies\n-tab5=Notifications\n-tab6=Workflow\n-tab7=Core Log\n-tab8=Console Log\n+parameters=Parameters\n+passwordPolicies=Password Policies\n+accountPolicies=Account Policies\n+syncPolicies=Synchronization Policies\n+notifications=Notifications\n+workflow=Workflow\n+coreLog=Core Log\n+consoleLog=Console Log\n edit=Edit\n delete=Delete\n create_configuration=Create new configuration\n db_export=DB export\n logger=Logger\n level=Level\n-submit=Save\n events=Events\n template=Template\n traceLevel=Trace level\n create_notification=Create new notification\n subject=Subject\n+noActivitiEnabledForUsers=Activiti not enabled for users"},{"sha":"647e96f2b0f83fe8d59bda45ce20b64289035695","filename":"console/src/main/resources/org/apache/syncope/console/pages/Configuration_it.properties","status":"modified","additions":9,"deletions":9,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -16,23 +16,23 @@\n # under the License.\n key=Chiave\n value=Valore\n-tab1=Parametri\n-tab2=Policy di password\n-tab3=Policy di account\n-tab4=Policy di sincronizzazione\n-tab5=Notifiche\n-tab6=Workflow\n-tab7=Log Core\n-tab8=Log Console\n+parameters=Parametri\n+passwordPolicies=Policy di password\n+accountPolicies=Policy di account\n+syncPolicies=Policy di sincronizzazione\n+notifications=Notifiche\n+workflow=Workflow\n+coreLog=Log Core\n+consoleLog=Log Console\n edit=Modifica\n delete=Rimuovi\n create_configuration=Crea nuova configurazione\n db_export=Esportazione DB\n logger=Logger\n level=Livello\n-submit=Salva\n events=Eventi\n template=Modello\n traceLevel=Tracciamento\n create_notification=Crea nuova notifica\n subject=Oggetto\n+noActivitiEnabledForUsers=Activiti non configurato per gli utenti"},{"sha":"e08b990d3c74aa9b98db9111ebdb69b7294bc4fc","filename":"console/src/main/resources/org/apache/syncope/console/pages/Configuration_pt_BR.properties","status":"modified","additions":13,"deletions":13,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_pt_BR.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -16,23 +16,23 @@\n # under the License.\n key=Chave\n value=Valor\n-tab1=Par\\u00E2metros\n-tab2=Pol\\u00EDticas de Senha\n-tab3=Pol\\u00EDticas de Conta\n-tab4=Pol\\u00EDticas de Sincroniza\\u00E7\\u00E3o\n-tab5=Notifica\\u00E7\\u00F5es\n-tab6=Fluxo de Trabalho\n-tab7=Log Central\n-tab8=Log do Console\n+parameters=Par\\u00e2metros\n+passwordPolicies=Pol\\u00edticas de Senha\n+accountPolicies=Pol\\u00edticas de Conta\n+syncPolicies=Pol\\u00edticas de Sincroniza\\u00e7\\u00e3o\n+notifications=Notifica\\u00e7\\u00f5es\n+workflow=Fluxo de Trabalho\n+coreLog=Log Central\n+consoleLog=Log do Console\n edit=Editar\n delete=Excluir\n-create_configuration=Criar Nova configura\\u00E7\\u00E3o\n+create_configuration=Criar Nova configura\\u00e7\\u00e3o\n db_export=Exportar Banco de Dados\n logger=Logger\n-level=N\\u00EDvel\n-submit=Salvar\n+level=N\\u00edvel\n events=Eventos\n template=Template\n-traceLevel=N\\u00EDvel de Trace\n-create_notification=Criar nova notifica\\u00E7\\u00E3o\n+traceLevel=N\\u00edvel de Trace\n+create_notification=Criar nova notifica\\u00e7\\u00e3o\n subject=Assunto\n+noActivitiEnabledForUsers=Activiti n\\u00e3o habilitado para usu\\u00e1rios"},{"sha":"08a1d95bbbdf791144648bce30cc051e647a7c74","filename":"console/src/main/resources/org/apache/syncope/console/pages/XMLEditorPopupPage.html","status":"added","additions":57,"deletions":0,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.html?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,57 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:head>\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/codemirror.css\" />\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/codemirror_default_theme.css\" />\n+\n+    <script type=\"text/javascript\" src=\"scripts/codemirror.js\"></script>\n+    <script type=\"text/javascript\" src=\"scripts/xmlpure.js\"></script>\n+    <script type=\"text/javascript\">\n+      function updateTextArea(editor) {\n+        document.getElementById(\"workflowDefArea\").value = editor.getValue();\n+      }\n+    </script>\n+    <script>\n+      window.onunload = refreshParent;\n+      function refreshParent() {\n+        if (window.opener.location.toString().indexOf('#workflow') === -1) {\n+          window.opener.location = window.opener.location + \"#workflow\";\n+        }\n+        window.opener.location.reload();\n+      }\n+    </script>\n+  </wicket:head>\n+  <wicket:extend>\n+    <form wicket:id=\"workflowDefForm\">\n+      <textarea wicket:id=\"workflowDefArea\" id=\"workflowDefArea\" style=\"width: 100%; height: 350px;\">\n+      </textarea>\n+      <div style=\"margin: 10px\">\n+        <input type=\"submit\"\n+               class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+               wicket:id=\"apply\"\n+               onclick=\"window.close();\"/>\n+      </div>\n+    </form>\n+    <script>\n+      var editor = CodeMirror.fromTextArea(document.getElementById(\"workflowDefArea\"),\n+              {mode: {name: \"xmlpure\"}, lineNumbers: true, onChange: updateTextArea});\n+    </script>\n+  </wicket:extend>\n+</html>"},{"sha":"cfbd3643d60d9bd80f3f9a4c3f62461699322e90","filename":"console/src/main/resources/org/apache/syncope/console/pages/XMLEditorPopupPage.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Save"},{"sha":"451df18bdf114a1690925102851ac580d4088692","filename":"console/src/main/resources/org/apache/syncope/console/pages/XMLEditorPopupPage_it.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Salva"},{"sha":"a46e26722e37960c8669bf107028404bca11b865","filename":"console/src/main/resources/org/apache/syncope/console/pages/XMLEditorPopupPage_pt_BR.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Salvar"},{"sha":"e482d85280df81d9c19670e565037e39d23dffa4","filename":"console/src/main/resources/oryx.debug.js.patch","status":"added","additions":101,"deletions":0,"changes":101,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js.patch","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js.patch","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js.patch?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -0,0 +1,101 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+1866c1866,1867\n+< ORYX.CONFIG.ROOT_PATH =\t\t\t\t\t\"../editor/\"; //TODO: Remove last slash!!\n+---\n+> /*\n+> ORYX.CONFIG.ROOT_PATH =\t\t\t\t\t\"../editor/\";\n+1868a1870,1875\n+> */                  \n+> BASE_PATH =                                     window.location.toString().substr(0, window.location.toString().indexOf('/wicket'));\n+> \n+> ORYX.CONFIG.ROOT_PATH =\t\t\t\tBASE_PATH + \"/activiti-modeler/editor/\"\n+> ORYX.CONFIG.EXPLORER_PATH =\t\t\tBASE_PATH + \"/activiti-modeler/explorer\"\n+> ORYX.CONFIG.LIBS_PATH =\t\t\t\tBASE_PATH + \"/activiti-modeler/libs\"\n+1879c1886\n+< ORYX.CONFIG.PLUGINS_CONFIG =\t\t\tORYX.CONFIG.SERVER_HANDLER_ROOT + \"/editor/plugins\";\n+---\n+> ORYX.CONFIG.PLUGINS_CONFIG =\t\t\tORYX.CONFIG.ROOT_PATH + \"plugins.xml\";\n+2417c2424\n+< \t\t\t\t\t\tORYX.Log.error(\"A plugin is not providing a name. Ingnoring this plugin.\");\n+---\n+> \t\t\t\t\t\tORYX.Log.error(\"A plugin is not providing a name. Ignoring this plugin.\");\n+8472,8474c8479,8481\n+< \t\t\tthis._baseUrl = \"../editor/stencilsets/bpmn2.0/\";\n+< \t\t\tthis._source = \"../stencilsets/bpmn2.0/bpmn2.0.json\";\n+< \t\t\tnew Ajax.Request(\"../service/editor/stencilset\", {\n+---\n+> \t\t\tthis._baseUrl = ORYX.CONFIG.ROOT_PATH + \"stencilsets/bpmn2.0/\";\n+> \t\t\tthis._source = ORYX.CONFIG.ROOT_PATH + \"stencilsets/bpmn2.0/bpmn2.0.json\";\n+> \t\t\tnew Ajax.Request(ORYX.CONFIG.ROOT_PATH + \"stencilset.json\", {\n+11200a11208\n+>         modelUrl = BASE_PATH + \"/workflowDefGET\";\n+11568c11576\n+<                     \"<img src='../explorer/src/img/signavio/smoky/logo2.png' border=\\\"0\\\" usemap=\\\"#kisbpmmap\\\"/>\" + \n+---\n+>                     \"<img src='\"+ORYX.CONFIG.EXPLORER_PATH+\"/src/img/signavio/smoky/logo2.png' border=\\\"0\\\" usemap=\\\"#kisbpmmap\\\"/>\" + \n+11576,11577c11584,11585\n+<                   \"<a href=\\\"\"+ORYX.CONFIG.WEB_URL+\"\\\" target=\\\"_self\\\" title=\\\"close modeler\\\">\" +\n+<                     \"<img src='../editor/images/close_button.png' border=\\\"0\\\" />\" + \n+---\n+>                   \"<a href=\\\"#\\\" title=\\\"close modeler\\\" onclick=\\\"window.close();\\\">\" +\n+>                     \"<img src='\"+ORYX.CONFIG.ROOT_PATH+\"images/close_button.png' border=\\\"0\\\" />\" + \n+18332c18339\n+< \t\tvar sloading \t= \"height:16px;width:16px;margin-bottom:-4px;background: transparent url(../libs/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;\"\n+---\n+> \t\tvar sloading \t= \"height:16px;width:16px;margin-bottom:-4px;background: transparent url(\"+ORYX.CONFIG.LIBS_PATH+\"/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;\"\n+21911c21918\n+< \t\t\t\ticon: '../editor/images/add.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/add.png',\n+21924c21931\n+< \t\t\t\ticon: '../editor/images/delete.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/delete.png',\n+22451c22458\n+< \t\t\t\ticon: '../editor/images/add.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/add.png',\n+22464c22471\n+< \t\t\t\ticon: '../editor/images/delete.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/delete.png',\n+22524c22531\n+< \t\t\t\ticon: '../editor/images/add.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/add.png',\n+22537c22544\n+< \t\t\t\ticon: '../editor/images/delete.png',\n+---\n+> \t\t\t\ticon: ORYX.CONFIG.ROOT_PATH + 'images/delete.png',\n+24531,24532c24537,24538\n+< \t\t\t\t\t\t\t'<p><label for=\"edit_model_title\">' + ORYX.I18N.Save.dialogLabelTitle + '</label><input type=\"text\" class=\"text\" name=\"title\" value=\"{title}\" id=\"edit_model_title\" onfocus=\"this.className = \\'text activated\\'\" onblur=\"this.className = \\'text\\'\"/></p>',\n+< \t\t\t\t\t\t\t'<p><label for=\"edit_model_summary\">' + ORYX.I18N.Save.dialogLabelDesc + '</label><textarea rows=\"5\" name=\"summary\" id=\"edit_model_summary\" onfocus=\"this.className = \\'activated\\'\" onblur=\"this.className = \\'\\'\">{summary}</textarea></p>',\n+---\n+> \t\t\t\t\t\t\t'<p><label for=\"edit_model_title\">' + ORYX.I18N.Save.dialogLabelTitle + '</label><input type=\"text\" class=\"text\" name=\"title\" value=\"{title}\" id=\"edit_model_title\" onfocus=\"this.className = \\'text activated\\'\" onblur=\"this.className = \\'text\\'\" readonly=\\\"readonly\\\"/></p>',\n+> \t\t\t\t\t\t\t'<p><label for=\"edit_model_summary\">' + ORYX.I18N.Save.dialogLabelDesc + '</label><textarea rows=\"5\" name=\"summary\" id=\"edit_model_summary\" onfocus=\"this.className = \\'activated\\'\" onblur=\"this.className = \\'\\'\" readonly=\\\"readonly\\\">{summary}</textarea></p>',\n+24813,24814c24819\n+< \t\t\n+< \t\tnew Ajax.Request(\"../service/model/\" + modelMeta.modelId + \"/json\", {\n+---\n+> \t\tnew Ajax.Request(BASE_PATH + \"/workflowDefGET\", {\n+24876a24882\n+> \t        saveUri = BASE_PATH + \"/workflowDefPUT\";\n+24884c24890\n+< \t\t\theaders\t\t\t: {'Accept':\"application/json\", 'Content-Type':'charset=UTF-8'},\n+---\n+> \t\t\theaders\t\t\t: {'Accept':\"application/json\", 'Content-Type':'application/json'},"},{"sha":"d33c4efc37c1680c4396c2d00c65f16f182b28ff","filename":"console/src/main/webapp/img/modeler.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fmodeler.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fmodeler.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fmodeler.png?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49"},{"sha":"110fdc4c9b6a975d11de75b83c77510926117b37","filename":"console/src/main/webapp/img/xml.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fxml.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fxml.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fxml.png?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49"},{"sha":"3807183b0de69ebce6cc1997476d28fb624838b6","filename":"core/pom.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -424,7 +424,6 @@ under the License.\n                 <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\n                   <fileset dir=\"${project.build.directory}/test-classes\">\n                     <exclude name=\"**/*.class\" />\n-                    <exclude name=\"restClientContext.xml\" />\n                   </fileset>\n                 </copy>\n               </target>"},{"sha":"f7111780ed6f5bf3308b17e2987333ebc172d910","filename":"core/src/main/java/org/apache/syncope/core/services/UserSelfServiceImpl.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserSelfServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserSelfServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserSelfServiceImpl.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -19,6 +19,7 @@\n package org.apache.syncope.core.services;\n \n import java.net.URI;\n+import javax.ws.rs.core.HttpHeaders;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.common.mod.UserMod;\n import org.apache.syncope.common.services.UserSelfService;\n@@ -36,7 +37,7 @@ public class UserSelfServiceImpl extends AbstractServiceImpl implements UserSelf\n \n     @Override\n     public Response getOptions() {\n-        return Response.ok().header(\"Allow\", \"GET,POST,OPTIONS,HEAD\").\n+        return Response.ok().header(HttpHeaders.ALLOW, \"GET,POST,OPTIONS,HEAD\").\n                 header(RESTHeaders.SELFREGISTRATION_ALLOWED, controller.isSelfRegistrationAllowed()).\n                 build();\n     }"},{"sha":"54efa9e4202edaed61392b7a34afd442d49d9ed2","filename":"core/src/main/java/org/apache/syncope/core/services/UserServiceImpl.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FUserServiceImpl.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -20,6 +20,7 @@\n \n import java.net.URI;\n import java.util.List;\n+import javax.ws.rs.core.HttpHeaders;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.common.mod.StatusMod;\n import org.apache.syncope.common.mod.UserMod;\n@@ -45,14 +46,14 @@ public class UserServiceImpl extends AbstractServiceImpl implements UserService,\n \n     @Override\n     public Response getUsername(final Long userId) {\n-        return Response.ok().header(\"Allow\", \"GET,POST,OPTIONS,HEAD\").\n+        return Response.ok().header(HttpHeaders.ALLOW, \"GET,POST,OPTIONS,HEAD\").\n                 header(RESTHeaders.USERNAME, controller.getUsername(userId)).\n                 build();\n     }\n \n     @Override\n     public Response getUserId(final String username) {\n-        return Response.ok().header(\"Allow\", \"GET,POST,OPTIONS,HEAD\").\n+        return Response.ok().header(HttpHeaders.ALLOW, \"GET,POST,OPTIONS,HEAD\").\n                 header(RESTHeaders.USER_ID, controller.getUserId(username)).\n                 build();\n     }\n@@ -93,7 +94,7 @@ public List<UserTO> list(final int page, final int size) {\n     public UserTO read(final Long userId) {\n         return controller.read(userId);\n     }\n-    \n+\n     @Override\n     public List<UserTO> search(final NodeCond searchCondition) throws InvalidSearchConditionException {\n         return controller.search(searchCondition);"},{"sha":"4287931e0de6086e9fc26783d647cd4ca395a9fd","filename":"core/src/main/java/org/apache/syncope/core/services/WorkflowServiceImpl.java","status":"modified","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -25,13 +25,18 @@\n import org.apache.syncope.core.rest.controller.WorkflowController;\r\n import org.springframework.beans.factory.annotation.Autowired;\r\n import javax.ws.rs.core.Context;\r\n+import javax.ws.rs.core.HttpHeaders;\r\n import javax.ws.rs.core.MediaType;\r\n import javax.ws.rs.core.Response;\r\n import javax.ws.rs.core.StreamingOutput;\r\n \r\n import org.apache.cxf.jaxrs.ext.MessageContext;\r\n import org.apache.syncope.common.services.WorkflowService;\r\n import org.apache.syncope.common.types.AttributableType;\r\n+import org.apache.syncope.common.types.RESTHeaders;\r\n+import org.apache.syncope.core.rest.controller.WorkflowController;\r\n+import org.apache.syncope.core.workflow.ActivitiDetector;\r\n+import org.springframework.beans.factory.annotation.Autowired;\r\n import org.springframework.stereotype.Service;\r\n \r\n @Service\r\n@@ -43,6 +48,32 @@ public class WorkflowServiceImpl extends AbstractServiceImpl implements Workflow\n     @Autowired\r\n     private WorkflowController controller;\r\n \r\n+    @Override\r\n+    public Response getOptions(final AttributableType kind) {\r\n+        String key = null;\r\n+        String value = null;\r\n+        switch (kind) {\r\n+            case USER:\r\n+                key = RESTHeaders.ACTIVITI_USER_ENABLED;\r\n+                value = Boolean.toString(ActivitiDetector.isActivitiEnabledForUsers());\r\n+                break;\r\n+\r\n+            case ROLE:\r\n+                key = RESTHeaders.ACTIVITI_ROLE_ENABLED;\r\n+                value = Boolean.toString(ActivitiDetector.isActivitiEnabledForRoles());\r\n+                break;\r\n+\r\n+            case MEMBERSHIP:\r\n+            default:\r\n+        }\r\n+\r\n+        Response.ResponseBuilder builder = Response.ok().header(HttpHeaders.ALLOW, \"GET,POST,OPTIONS,HEAD\");\r\n+        if (key != null && value != null) {\r\n+            builder.header(key, value);\r\n+        }\r\n+        return builder.build();\r\n+    }\r\n+\r\n     @Override\r\n     public Response exportDefinition(final AttributableType kind) {\r\n         final MediaType accept =\r"},{"sha":"2255d64402fc4acdf8e5b87d35addeddc16f9e6d","filename":"core/src/main/java/org/apache/syncope/core/util/MappingUtil.java","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FMappingUtil.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -32,8 +32,6 @@\n import org.apache.syncope.common.mod.AttributeMod;\n import org.apache.syncope.common.types.IntMappingType;\n import org.apache.syncope.common.types.AttributeSchemaType;\n-import static org.apache.syncope.common.types.IntMappingType.RoleVirtualSchema;\n-import static org.apache.syncope.common.types.IntMappingType.UserVirtualSchema;\n import org.apache.syncope.core.connid.PasswordGenerator;\n import org.apache.syncope.core.persistence.beans.AbstractAttr;\n import org.apache.syncope.core.persistence.beans.AbstractAttrValue;"},{"sha":"39ce72295f3bc1d305c60fe5bbdee609c32e85ab","filename":"core/src/main/java/org/apache/syncope/core/workflow/WorkflowAdapter.java","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2FWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2FWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2FWorkflowAdapter.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -74,8 +74,6 @@ public interface WorkflowAdapter {\n      * @param workflowId workflow id.\n      * @param name form name.\n      * @return forms (if present), otherwise an empty list.\n-     * @throws NotFoundException definition not found exception\n-     * @throws WorkflowException workflow exception\n      */\n     List<WorkflowFormTO> getForms(String workflowId, String name);\n "},{"sha":"5f67dd4859cb130659ed579c2207611efc12dedd","filename":"core/src/test/java/org/apache/syncope/core/rest/WorkflowTestITCase.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FWorkflowTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FWorkflowTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FWorkflowTestITCase.java?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -18,6 +18,7 @@\n  */\r\n package org.apache.syncope.core.rest;\r\n \r\n+import static org.junit.Assert.assertEquals;\r\n import static org.junit.Assert.assertNotNull;\r\n import static org.junit.Assert.assertTrue;\r\n import static org.junit.Assert.assertFalse;\r\n@@ -33,6 +34,16 @@\n \r\n public class WorkflowTestITCase extends AbstractTest {\r\n \r\n+    @Test\r\n+    public void isActivitiEnabled() {\r\n+        assertEquals(ActivitiDetector.isActivitiEnabledForUsers(),\r\n+                adminClient.isActivitiEnabledFor(AttributableType.USER));\r\n+        assertEquals(ActivitiDetector.isActivitiEnabledForRoles(),\r\n+                adminClient.isActivitiEnabledFor(AttributableType.ROLE));\r\n+        assertEquals(false,\r\n+                adminClient.isActivitiEnabledFor(AttributableType.MEMBERSHIP));\r\n+    }\r\n+\r\n     private void exportDefinition(final AttributableType type) throws IOException {\r\n         Response response = workflowService.exportDefinition(type);\r\n         assertTrue(response.getMediaType().toString().\r"},{"sha":"743457a57115909080b7e18fcd6099e66f83fe91","filename":"core/src/test/resources/noopworkflow/stripActivitiFromContent.xsl","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Ftest%2Fresources%2Fnoopworkflow%2FstripActivitiFromContent.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/core%2Fsrc%2Ftest%2Fresources%2Fnoopworkflow%2FstripActivitiFromContent.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fnoopworkflow%2FstripActivitiFromContent.xsl?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -20,6 +20,14 @@\n <xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n                 version=\"1.0\">\n   \n+  <xsl:template match=\"entry\">\n+    <xsl:if test=\"not(starts-with(@key, 'ACT_'))\">\n+      <entry>\n+        <xsl:apply-templates select=\"node()|@*|comment()\"/>\n+      </entry>\n+    </xsl:if>\n+  </xsl:template>\n+  \n   <xsl:template match=\"node()|@*|comment()\">\n     <xsl:if test=\"not(starts-with(local-name(), 'ACT_'))\">\n       <xsl:copy>"},{"sha":"7a0d5508f9e1358235f6ff2b855ebe6d456aca31","filename":"pom.xml","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ddc6a540dcdaaa91867ccafa40cea8271336ed49/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ddc6a540dcdaaa91867ccafa40cea8271336ed49/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=ddc6a540dcdaaa91867ccafa40cea8271336ed49","patch":"@@ -346,6 +346,7 @@ under the License.\n     <bundles.directory>${project.build.directory}/bundles</bundles.directory>\n     <connid.location>file:${bundles.directory}/</connid.location>\n     <log.directory>${project.build.directory}/log</log.directory>\n+    <activiti-modeler.directory>${project.build.directory}/activiti-modeler</activiti-modeler.directory>\n                 \n     <cargo.servlet.port>9080</cargo.servlet.port>\n     <cargo.tomcat.ajp.port>9889</cargo.tomcat.ajp.port>\n@@ -469,6 +470,12 @@ under the License.\n         <artifactId>activiti-json-converter</artifactId>            \n         <version>${activiti.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.activiti</groupId>\n+        <artifactId>activiti-webapp-explorer2</artifactId>            \n+        <version>${activiti.version}</version>\n+        <type>war</type>\n+      </dependency>\n \n       <dependency>\n         <groupId>org.apache.geronimo.specs</groupId> "}]}