{"sha":"4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ1NDVlM2YyNmM4ZThjMmYwY2I1ODFkZTdkNTk4ZjdlYTY2MDhhM2I=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-08-12T14:15:47Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-08-12T14:15:47Z"},"message":"[SYNCOPE-920] provides recipient provider extension class name selection feature","tree":{"sha":"4e3efaff540fd174299b9672035ffb8d86aef86b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/4e3efaff540fd174299b9672035ffb8d86aef86b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"660aa70adee1154ac7da46dcfa92274a0a4c3073","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/660aa70adee1154ac7da46dcfa92274a0a4c3073","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/660aa70adee1154ac7da46dcfa92274a0a4c3073"}],"stats":{"total":66,"additions":46,"deletions":20},"files":[{"sha":"ac69b7c708d664bea932c93262f8fe447d603bfb","filename":"client/console/src/main/java/org/apache/syncope/client/console/notifications/NotificationWizardBuilder.java","status":"modified","additions":35,"deletions":16,"changes":51,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder.java?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -27,6 +27,7 @@\n import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.Transformer;\n import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.panels.search.AbstractSearchPanel;\n import org.apache.syncope.client.console.panels.search.AnyObjectSearchPanel;\n@@ -62,6 +63,7 @@\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n@@ -214,22 +216,22 @@ public About(final String id, final IModel<Pair<String, List<SearchClause>>> mod\n                     new AnyTypeRestClient().list(),\n                     EntityTOUtils.<AnyTypeTO>keyTransformer(), new ArrayList<String>());\n \n-            final AjaxDropDownChoicePanel<String> type =\n-                    new AjaxDropDownChoicePanel<>(\"about\", \"about\", new Model<String>() {\n+            final AjaxDropDownChoicePanel<String> type = new AjaxDropDownChoicePanel<>(\"about\", \"about\",\n+                    new Model<String>() {\n \n-                        private static final long serialVersionUID = -2350296434572623272L;\n+                private static final long serialVersionUID = -2350296434572623272L;\n \n-                        @Override\n-                        public String getObject() {\n-                            return model.getObject().getLeft();\n-                        }\n+                @Override\n+                public String getObject() {\n+                    return model.getObject().getLeft();\n+                }\n \n-                        @Override\n-                        public void setObject(final String object) {\n-                            model.setObject(Pair.of(object, model.getObject().getRight()));\n-                        }\n+                @Override\n+                public void setObject(final String object) {\n+                    model.setObject(Pair.of(object, model.getObject().getRight()));\n+                }\n \n-                    });\n+            });\n             type.setChoices(anyTypeTOs);\n             type.addRequiredLabel();\n             add(type);\n@@ -300,8 +302,8 @@ public Abouts(final NotificationWrapper modelObject) {\n             aboutContainer.setOutputMarkupId(true);\n             add(aboutContainer);\n \n-            final IModel<List<Pair<String, List<SearchClause>>>> model =\n-                    new PropertyModel<>(modelObject, \"aboutClauses\");\n+            final IModel<List<Pair<String, List<SearchClause>>>> model\n+                    = new PropertyModel<>(modelObject, \"aboutClauses\");\n \n             aboutContainer.add(new MultiPanel<Pair<String, List<SearchClause>>>(\"abouts\", \"abouts\", model, false) {\n \n@@ -343,12 +345,23 @@ public class Recipients extends WizardStep {\n \n         private static final long serialVersionUID = -7709805590497687958L;\n \n+        private final IModel<List<String>> recipientProviders = new LoadableDetachableModel<List<String>>() {\n+\n+            private static final long serialVersionUID = 5275935387613157447L;\n+\n+            @Override\n+            protected List<String> load() {\n+                return new ArrayList<>(\n+                        SyncopeConsoleSession.get().getPlatformInfo().getNotificationRecipientsProviders());\n+            }\n+        };\n+\n         public Recipients(final NotificationWrapper modelObject) {\n             final NotificationTO notificationTO = modelObject.getInnerObject();\n             final boolean createFlag = notificationTO.getKey() == null;\n \n-            final AjaxTextFieldPanel staticRecipientsFieldPanel =\n-                    new AjaxTextFieldPanel(\"panel\", \"staticRecipients\", new Model<String>());\n+            final AjaxTextFieldPanel staticRecipientsFieldPanel = new AjaxTextFieldPanel(\"panel\", \"staticRecipients\",\n+                    new Model<String>());\n             staticRecipientsFieldPanel.addValidator(EmailAddressValidator.getInstance());\n \n             final MultiFieldPanel<String> staticRecipients = new MultiFieldPanel.Builder<>(\n@@ -362,6 +375,12 @@ public Recipients(final NotificationWrapper modelObject) {\n                     required(false).build(\"recipients\");\n             add(recipients);\n \n+            AjaxDropDownChoicePanel<String> recipientsProviderClassName = new AjaxDropDownChoicePanel<>(\n+                    \"recipientsProviderClassName\", \"recipientsProviderClassName\",\n+                    new PropertyModel<String>(notificationTO, \"recipientsProviderClassName\"), false);\n+            recipientsProviderClassName.setChoices(recipientProviders.getObject());\n+            add(recipientsProviderClassName);\n+\n             final AjaxCheckBoxPanel selfAsRecipient = new AjaxCheckBoxPanel(\"selfAsRecipient\",\n                     getString(\"selfAsRecipient\"), new PropertyModel<Boolean>(notificationTO, \"selfAsRecipient\"));\n             add(selfAsRecipient);"},{"sha":"1910ce649283da6503573d89a361ba3112f3cc9b","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/NotificationWizardBuilder$Recipients.html","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.html?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -26,6 +26,9 @@\n       <div class=\"form-group form-group-inline\">\n         <span wicket:id=\"recipients\">[recipients]</span>\n       </div>\n+      <div class=\"form-group\">\n+        <span wicket:id=\"recipientsProviderClassName\">[recipientsProviderClassName]</span>\n+      </div>\n       <div id=\"userFilter\" class=\"form-group box\">\n         <div id=\"title\">\n           <span for=\"userNotifications\"><wicket:message key=\"userNotifications\"/></span>"},{"sha":"b94947e86d339a232e23dc0246d8cf1a9d760827","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/NotificationWizardBuilder$Recipients.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients.properties?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -15,7 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n recipients=Recipients\n-staticRecipients=Recipients\n+recipientsProviderClassName=Notification recipient provider\n+staticRecipients=Static recipients\n selfAsRecipient=Include users matching About\n userNotifications=User notifications\n userNotificationsWarning=Do not select this checkbox unless events are not targeted at users"},{"sha":"bc98ce50401cc5e8d9dcdb80f4ec40b4106c4537","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/NotificationWizardBuilder$Recipients_it.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_it.properties?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -15,8 +15,9 @@\n # specific language governing permissions and limitations\n # under the License.\n recipients=Destinatari\n-staticRecipients=Destinatari\n+staticRecipients=Destinatari fissi\n selfAsRecipient=Includi i soggetti\n userNotifications=Notifiche utente\n userNotificationsWarning=Non selezionare questa checkbox se gli eventi catturati non riguardano espressamente utenti\n search=Cerca destinatari\n+recipientsProviderClassName=Provider destinatari notifica"},{"sha":"43f0cfc5d5b83ee813e9e44ddc494ca6d498fe77","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/NotificationWizardBuilder$Recipients_pt_BR.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_pt_BR.properties?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -15,8 +15,9 @@\n # specific language governing permissions and limitations\n # under the License.\n recipients=Destinat\\u00e1rios\n-staticRecipients=Destinat\\u00e1rios\n+staticRecipients=Static recipients\n selfAsRecipient=Incluir usu\\u00e1rios relacionados Sobre\n userNotifications=Notifica\\u00e7\\u00f5es do usu\\u00e1rio\n userNotificationsWarning=N\\u00e3o selecione esta op\\u00e7\\u00e3o a menos que os eventos n\\u00e3o s\\u00e3o direcionados a usu\\u00e1rios\n search=Pesquisa para os destinat\\u00e1rios\n+recipientsProviderClassName=Notification recipient provider"},{"sha":"bf94d767ccb3b1f53c06cf763a2cee58ba7e2bc9","filename":"client/console/src/main/resources/org/apache/syncope/client/console/notifications/NotificationWizardBuilder$Recipients_ru.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fnotifications%2FNotificationWizardBuilder%24Recipients_ru.properties?ref=4545e3f26c8e8c2f0cb581de7d598f7ea6608a3b","patch":"@@ -16,8 +16,9 @@\n # under the License.\n #\n recipients=\\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0442\\u0435\\u043b\\u0438\n-staticRecipients=\\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0442\\u0435\\u043b\\u0438\n+staticRecipients=Static recipients\n selfAsRecipient=\\u0412\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u0432 \\u0443\\u0432\\u0435\\u0434\\u043e\\u043c\\u043b\\u0435\\u043d\\u0438\\u0435 \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439, \\u043e \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0445 \\u043e\\u0442\\u043f\\u0440\\u0430\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u0443\\u0432\\u0435\\u0434\\u043e\\u043c\\u043b\\u0435\\u043d\\u0438\\u0435\n userNotifications=\\u0423\\u0432\\u0435\\u0434\\u043e\\u043c\\u043b\\u0435\\u043d\\u0438\\u044f \\u0434\\u043b\\u044f \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439\n userNotificationsWarning=\\u041d\\u0435 \\u0443\\u0441\\u0442\\u0430\\u043d\\u0430\\u0432\\u043b\\u0438\\u0432\\u0430\\u0439\\u0442\\u0435 \\u044d\\u0442\\u043e\\u0442 \\u0444\\u043b\\u0430\\u0433, \\u0435\\u0441\\u043b\\u0438 \\u0441\\u043e\\u0431\\u044b\\u0442\\u0438\\u0435 \\u043d\\u0435 \\u043f\\u0440\\u0435\\u0434\\u043d\\u0430\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u043e \\u0434\\u043b\\u044f \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439\n search=\\u041f\\u043e\\u0438\\u0441\\u043a \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439\n+recipientsProviderClassName=Notification recipient provider"}]}