{"sha":"503882dc8760ee2fe1b58402170b394123fea4fe","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjUwMzg4MmRjODc2MGVlMmZlMWI1ODQwMjE3MGIzOTQxMjNmZWE0ZmU=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-16T11:06:58Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-06-16T11:06:58Z"},"message":"Back to JPA 1.0, thanks to Glassfish 2.1.1 :(\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246089 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d1a8e70b185d383a4e63ba20c890778993a3d2b5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d1a8e70b185d383a4e63ba20c890778993a3d2b5"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/503882dc8760ee2fe1b58402170b394123fea4fe","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/503882dc8760ee2fe1b58402170b394123fea4fe","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/503882dc8760ee2fe1b58402170b394123fea4fe","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/503882dc8760ee2fe1b58402170b394123fea4fe/comments","author":null,"committer":null,"parents":[{"sha":"c856cedf20d146459535890094114244748b1d7f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c856cedf20d146459535890094114244748b1d7f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c856cedf20d146459535890094114244748b1d7f"}],"stats":{"total":49,"additions":42,"deletions":7},"files":[{"sha":"51c45ae87009b21453011ff73b240e730270549f","filename":"core/pom.xml","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -115,6 +115,10 @@\n             <groupId>org.hibernate</groupId>\n             <artifactId>hibernate-entitymanager</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.jasypt</groupId>\n+            <artifactId>jasypt</artifactId>\n+        </dependency>\n \n         <dependency>\n             <groupId>postgresql</groupId>"},{"sha":"99bf38078286887274ce8fded2427e8aeec39848","filename":"core/src/main/java/org/syncope/core/persistence/beans/SyncopeUser.java","status":"modified","additions":23,"deletions":0,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSyncopeUser.java?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -22,13 +22,20 @@\n import javax.persistence.GenerationType;\n import javax.persistence.Id;\n import javax.persistence.ManyToMany;\n+import javax.persistence.Transient;\n+import org.jasypt.util.password.PasswordEncryptor;\n+import org.jasypt.util.password.StrongPasswordEncryptor;\n \n @Entity\n public class SyncopeUser extends AbstractAttributableBean {\n \n+    @Transient\n+    final private static PasswordEncryptor passwordEncryptor =\n+            new StrongPasswordEncryptor();\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     private Long id;\n+    private String password;\n     @ManyToMany(fetch = FetchType.EAGER)\n     private Set<SyncopeRole> roles;\n \n@@ -49,6 +56,22 @@ public void setRoles(Set<SyncopeRole> roles) {\n         this.roles = roles;\n     }\n \n+    public boolean checkPassword(String cleanPassword) {\n+        return passwordEncryptor.checkPassword(cleanPassword, password);\n+    }\n+\n+    public String getPassword() {\n+        return password;\n+    }\n+\n+    /**\n+     * TODO: password policies\n+     * @param password\n+     */\n+    public void setPassword(String password) {\n+        this.password = passwordEncryptor.encryptPassword(password);\n+    }\n+\n     @Override\n     public boolean equals(Object obj) {\n         if (obj == null) {"},{"sha":"cef453c09bdb753a63af7ed360750b1db45c8037","filename":"core/src/main/resources/META-INF/persistence.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -1,8 +1,8 @@\n <persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n              xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence\n-             http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n-             version=\"2.0\">\n+             http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\"\n+             version=\"1.0\">\n     <persistence-unit name=\"syncopePersistenceUnit\" transaction-type=\"RESOURCE_LOCAL\">\n         <properties>\n         </properties>"},{"sha":"25222f7edd2d5bf237a58e15c4433639e26c90e4","filename":"core/src/test/java/org/syncope/core/persistence/test/SyncopeUserDAOTest.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeUserDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeUserDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Ftest%2FSyncopeUserDAOTest.java?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -59,6 +59,7 @@ public final void findById() {\n     @Test\n     public final void save() {\n         SyncopeUser user = new SyncopeUser();\n+        user.setPassword(\"password\");\n \n         user = syncopeUserDAO.save(user);\n "},{"sha":"040f1fc1a506fcd9acb4498bcdf99028f4018341","filename":"core/src/test/resources/dbunitTestData.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2FdbunitTestData.xml?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -1,8 +1,8 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <dataset>\n-    <SyncopeUser id=\"1\"/>\n-    <SyncopeUser id=\"2\"/>\n-    <SyncopeUser id=\"3\"/>\n+    <SyncopeUser id=\"1\" password=\"XXX\"/>\n+    <SyncopeUser id=\"2\" password=\"YYY\"/>\n+    <SyncopeUser id=\"3\" password=\"ZZZ\"/>\n \n     <SyncopeRole name=\"root\" parent=\"/\"/>\n     <SyncopeRole name=\"child\" parent=\"root\"/>"},{"sha":"8fc82812e26c874b7ec2aa4c3fcfe1739b713aa0","filename":"pom.xml","status":"modified","additions":9,"deletions":2,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/503882dc8760ee2fe1b58402170b394123fea4fe/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/503882dc8760ee2fe1b58402170b394123fea4fe/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=503882dc8760ee2fe1b58402170b394123fea4fe","patch":"@@ -109,7 +109,8 @@\n         <jackson.version>1.5.2</jackson.version>\n         <xstream.version>1.3.1</xstream.version>\n \n-        <hibernate.version>3.5.1-Final</hibernate.version>\n+        <hibernate.version>3.5.2-Final</hibernate.version>\n+        <jasypt.version>1.6</jasypt.version>\n \n         <postgresql.jdbc-driver.version>8.1-408.jdbc3</postgresql.jdbc-driver.version>\n \n@@ -174,6 +175,12 @@\n                 <version>${hibernate.version}</version>\n             </dependency>\n \n+            <dependency>\n+                <groupId>org.jasypt</groupId>\n+                <artifactId>jasypt</artifactId>\n+                <version>${jasypt.version}</version>\n+            </dependency>\n+\n             <dependency>\n                 <groupId>postgresql</groupId>\n                 <artifactId>postgresql</artifactId>\n@@ -303,7 +310,7 @@\n \n         <repository>\n             <id>jboss</id>\n-            <url>http://repository.jboss.com/maven2/</url>\n+            <url>https://repository.jboss.org/nexus/content/groups/public</url>\n             <releases>\n                 <enabled>true</enabled>\n             </releases>"}]}