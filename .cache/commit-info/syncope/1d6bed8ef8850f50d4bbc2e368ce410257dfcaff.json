{"sha":"1d6bed8ef8850f50d4bbc2e368ce410257dfcaff","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjFkNmJlZDhlZjg4NTBmNTBkNGJiYzJlMzY4Y2U0MTAyNTdkZmNhZmY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2012-02-03T11:45:24Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2012-02-03T11:45:24Z"},"message":"Improving file download from Spring REST controller\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247392 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"295114bbdd8ba791e172f2d3971f576f95e8a2e8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/295114bbdd8ba791e172f2d3971f576f95e8a2e8"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff/comments","author":null,"committer":null,"parents":[{"sha":"8789a9a9240ef71ebf88a3b5635da8d1fb0270f6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8789a9a9240ef71ebf88a3b5635da8d1fb0270f6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8789a9a9240ef71ebf88a3b5635da8d1fb0270f6"}],"stats":{"total":12,"additions":6,"deletions":6},"files":[{"sha":"6feb8309fa3e9636d293e6a3d56fee8603214a9f","filename":"core/src/main/java/org/syncope/core/rest/controller/ConfigurationController.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConfigurationController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1d6bed8ef8850f50d4bbc2e368ce410257dfcaff/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConfigurationController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConfigurationController.java?ref=1d6bed8ef8850f50d4bbc2e368ce410257dfcaff","patch":"@@ -14,7 +14,6 @@\n  */\n package org.syncope.core.rest.controller;\n \n-import java.io.ByteArrayOutputStream;\n import java.io.IOException;\n import java.lang.reflect.Modifier;\n import java.util.ArrayList;\n@@ -226,17 +225,18 @@ public ModelAndView getMailTemplates() {\n     @RequestMapping(method = RequestMethod.GET,\n     value = \"/dbexport\")\n     @Transactional(readOnly = true)\n-    public ModelAndView dbExport() {\n-        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+    public void dbExport(final HttpServletResponse response) {\n         try {\n-            importExport.export(baos);\n+            importExport.export(response.getOutputStream());\n+            response.flushBuffer();\n \n             LOG.debug(\"Default content successfully exported\");\n         } catch (Throwable t) {\n             LOG.error(\"While exporting content\", t);\n         }\n \n-        return new ModelAndView(\"dbExport\").addObject(\n-                \"export\", new String(baos.toByteArray()));\n+        response.setContentType(\"application/xml;charset=UTF-8\");\n+        response.setHeader(\"Content-Disposition\",\n+                \"attachment; filename=content.xml\");\n     }\n }"}]}