{"sha":"d8d2c0fb67dd77383010e22cc2980377f764bfc3","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ4ZDJjMGZiNjdkZDc3MzgzMDEwZTIyY2MyOTgwMzc3Zjc2NGJmYzM=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-04-20T14:19:27Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-04-20T14:19:27Z"},"message":"Fixes 109\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246874 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5c1e41c8b3d7a77e652d2a9e39242b6da308a705","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5c1e41c8b3d7a77e652d2a9e39242b6da308a705"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d8d2c0fb67dd77383010e22cc2980377f764bfc3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d8d2c0fb67dd77383010e22cc2980377f764bfc3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d8d2c0fb67dd77383010e22cc2980377f764bfc3","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d8d2c0fb67dd77383010e22cc2980377f764bfc3/comments","author":null,"committer":null,"parents":[{"sha":"d71273c463fba10b9962e87c6c3da36e0b50ee43","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d71273c463fba10b9962e87c6c3da36e0b50ee43","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d71273c463fba10b9962e87c6c3da36e0b50ee43"}],"stats":{"total":52,"additions":30,"deletions":22},"files":[{"sha":"1475f2cbad80265530447c8282f6595b90f5e5e2","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage.html","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html?ref=d8d2c0fb67dd77383010e22cc2980377f764bfc3","patch":"@@ -58,8 +58,8 @@\n                         <tr class=\"ui-widget-header\">\n                             <th><wicket:message key=\"delete\"/></th>\n                     <th><wicket:message key=\"sourceMappingTypes\"/></th>\n-                    <th><wicket:message key=\"schemaAttributes\"/></th>\n-                    <th><wicket:message key=\"field\"/></th>\n+                    <th><wicket:message key=\"sourceAttrNames\"/></th>\n+                    <th><wicket:message key=\"destAttrNames\"/></th>\n                     <th><wicket:message key=\"mandatoryCondition\"/></th>\n                     <th><wicket:message key=\"accountId\"/></th>\n                     <th><wicket:message key=\"password\"/></th>"},{"sha":"4f2690c592d6d6b1da3c28be681e6f83877b6b27","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=d8d2c0fb67dd77383010e22cc2980377f764bfc3","patch":"@@ -1,13 +1,13 @@\n tab1=Resources\n create_attribute=Create new resource\n-required_alert=All form fields are required.\n+required_alert=All form fields are required\n name=Name\n connector=Connector\n-existing_resources=Existing resources:\n+existing_resources=Existing resources\n action=Action\n edit_attribute=Edit resource\n title=Resource\n-field=Field\n+destAttrNames=Destination Attributes\n sourceMappingTypes=Source mapping types\n roleSchema=Role Schema\n accountId=Account Id\n@@ -16,7 +16,7 @@ password=Password\n mappingUserSchema=Mapping User Schema\n mappingRoleSchema=Mapping Role Schema\n delete=Delete\n-schemaAttributes=Schema attribute\n+sourceAttrNames=Source Attributes\n forceMandatoryConstraint=Force mandatory constraint\n fieldName=Field name\n accountIdValidation=There must be exactly one AccountId"},{"sha":"bb481459a0e0ef6653970563dc8a35313885b825","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d8d2c0fb67dd77383010e22cc2980377f764bfc3/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=d8d2c0fb67dd77383010e22cc2980377f764bfc3","patch":"@@ -7,7 +7,7 @@ existing_resources=Risorse esistenti\n action=Azione\n edit_attribute=Modifica risorsa\n title=Risorsa\n-field=Campo\n+destAttrNames=Attributi destinazione\n sourceMappingTypes=Tipo mapping sorgente\n roleSchema=Schema Ruolo\n accountId=Id Account\n@@ -16,7 +16,7 @@ password=Password\n mappingUserSchema=Mapping User Schema\n mappingRoleSchema=Mapping Role Schema\n delete=Elimina\n-schemaAttributes=Attributi Schema\n+sourceAttrNames=Attributi sorgente\n forceMandatoryConstraint=Forza mandatory constraint\n fieldName=Nome campo\n "},{"sha":"5cbbd9380ea877ced436b1916d944350e0a12eb6","filename":"core/src/main/java/org/syncope/core/rest/data/ResourceDataBinder.java","status":"modified","additions":22,"deletions":14,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d8d2c0fb67dd77383010e22cc2980377f764bfc3/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d8d2c0fb67dd77383010e22cc2980377f764bfc3/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java?ref=d8d2c0fb67dd77383010e22cc2980377f764bfc3","patch":"@@ -32,6 +32,7 @@\n import org.syncope.core.persistence.beans.SchemaMapping;\n import org.syncope.core.persistence.dao.ConnInstanceDAO;\n import org.syncope.core.util.JexlUtil;\n+import org.syncope.types.SourceMappingType;\n import org.syncope.types.SyncopeClientExceptionType;\n \n @Component\n@@ -62,10 +63,6 @@ public TargetResource getResource(TargetResource resource,\n             ResourceTO resourceTO)\n             throws SyncopeClientCompositeErrorException {\n \n-        SyncopeClientCompositeErrorException compositeErrorException =\n-                new SyncopeClientCompositeErrorException(\n-                HttpStatus.BAD_REQUEST);\n-\n         SyncopeClientException requiredValuesMissing =\n                 new SyncopeClientException(\n                 SyncopeClientExceptionType.RequiredValuesMissing);\n@@ -91,11 +88,11 @@ public TargetResource getResource(TargetResource resource,\n         // Throw composite exception if there is at least one element set\n         // in the composing exceptions\n         if (!requiredValuesMissing.getElements().isEmpty()) {\n-            compositeErrorException.addException(requiredValuesMissing);\n-        }\n-\n-        if (compositeErrorException.hasExceptions()) {\n-            throw compositeErrorException;\n+            SyncopeClientCompositeErrorException scce =\n+                    new SyncopeClientCompositeErrorException(\n+                    HttpStatus.BAD_REQUEST);\n+            scce.addException(requiredValuesMissing);\n+            throw scce;\n         }\n \n         resource.setName(resourceTO.getName());\n@@ -164,8 +161,7 @@ public ResourceTO getResourceTO(TargetResource resource) {\n     }\n \n     private List<SchemaMapping> getSchemaMappings(\n-            TargetResource resource,\n-            List<SchemaMappingTO> mappings) {\n+            TargetResource resource, List<SchemaMappingTO> mappings) {\n \n         if (mappings == null) {\n             return null;\n@@ -179,8 +175,7 @@ private List<SchemaMapping> getSchemaMappings(\n         return schemaMappings;\n     }\n \n-    private SchemaMapping getSchemaMapping(\n-            TargetResource resource,\n+    private SchemaMapping getSchemaMapping(TargetResource resource,\n             SchemaMappingTO mappingTO)\n             throws SyncopeClientCompositeErrorException {\n \n@@ -199,7 +194,20 @@ private SchemaMapping getSchemaMapping(\n         }\n \n         if (mappingTO.getSourceAttrName() == null) {\n-            requiredValuesMissing.addElement(\"sourceAttrName\");\n+            switch (mappingTO.getSourceMappingType()) {\n+                case SyncopeUserId:\n+                    mappingTO.setSourceAttrName(\n+                            SourceMappingType.SyncopeUserId.toString());\n+                    break;\n+\n+                case Password:\n+                    mappingTO.setSourceAttrName(\n+                            SourceMappingType.Password.toString());\n+                    break;\n+\n+                default:\n+                    requiredValuesMissing.addElement(\"sourceAttrName\");\n+            }\n         }\n         if (mappingTO.getDestAttrName() == null) {\n             requiredValuesMissing.addElement(\"destAttrName\");"}]}