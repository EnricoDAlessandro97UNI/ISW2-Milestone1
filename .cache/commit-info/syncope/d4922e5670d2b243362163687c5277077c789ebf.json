{"sha":"d4922e5670d2b243362163687c5277077c789ebf","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ0OTIyZTU2NzBkMmIyNDMzNjIxNjM2ODdjNTI3NzA3N2M3ODllYmY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-20T16:41:17Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-20T16:41:17Z"},"message":"rolename on membership information\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246518 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"df65fc8f563d3d59808d8668214c6c22cb3017fd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/df65fc8f563d3d59808d8668214c6c22cb3017fd"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d4922e5670d2b243362163687c5277077c789ebf","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d4922e5670d2b243362163687c5277077c789ebf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d4922e5670d2b243362163687c5277077c789ebf","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d4922e5670d2b243362163687c5277077c789ebf/comments","author":null,"committer":null,"parents":[{"sha":"4c285a7b57b1fe6b910a68886c33a3246108247d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/4c285a7b57b1fe6b910a68886c33a3246108247d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/4c285a7b57b1fe6b910a68886c33a3246108247d"}],"stats":{"total":45,"additions":28,"deletions":17},"files":[{"sha":"19894fcbaba3106dc4176130393bfe65d493054b","filename":"client/src/main/java/org/syncope/client/to/MembershipTO.java","status":"modified","additions":15,"deletions":5,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d4922e5670d2b243362163687c5277077c789ebf/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FMembershipTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d4922e5670d2b243362163687c5277077c789ebf/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FMembershipTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FMembershipTO.java?ref=d4922e5670d2b243362163687c5277077c789ebf","patch":"@@ -19,14 +19,24 @@\n \n public class MembershipTO extends AbstractAttributableTO {\n \n-    private long role;\n+    private Long roleId;\n \n-    public long getRole() {\n-        return role;\n+    private String roleName;\n+\n+    public long getRoleId() {\n+        return roleId;\n+    }\n+\n+    public void setRoleId(long roleId) {\n+        this.roleId = roleId;\n+    }\n+\n+    public String getRoleName() {\n+        return roleName;\n     }\n \n-    public void setRole(long role) {\n-        this.role = role;\n+    public void setRoleName(String roleName) {\n+        this.roleName = roleName;\n     }\n \n     @Override"},{"sha":"7f5f0fbe214eb289bb565a75b8fb6180d36ca805","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d4922e5670d2b243362163687c5277077c789ebf/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d4922e5670d2b243362163687c5277077c789ebf/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=d4922e5670d2b243362163687c5277077c789ebf","patch":"@@ -364,7 +364,7 @@ protected void onNodeLinkClicked(final Object node, final BaseTree tree,\n                         public Page createPage() {\n \n                             membershipTO = new MembershipTO();\n-                            membershipTO.setRole(treeModel.getTreeNode().getId());\n+                            membershipTO.setRoleId(treeModel.getTreeNode().getId());\n                             String title = treeModel.getTreeNode().getName();\n \n                             MembershipModalPage form =\n@@ -392,8 +392,8 @@ protected void populateItem(final ListItem item) {\n                 final MembershipTO membershipTO =\n                         (MembershipTO) item.getDefaultModelObject();\n \n-                item.add(new Label(\"roleId\", new Model(membershipTO.getRole())));\n-                item.add(new Label(\"roleName\", new Model((String) rolesMap.get(membershipTO.getRole()))));\n+                item.add(new Label(\"roleId\", new Model(membershipTO.getRoleId())));\n+                item.add(new Label(\"roleName\", new Model((String) rolesMap.get(membershipTO.getRoleId()))));\n \n                 AjaxLink editLink = new AjaxLink(\"editLink\") {\n \n@@ -500,7 +500,7 @@ public void cloneOldUserTO(UserTO userTO) {\n \n         for (MembershipTO membershipTO : userTO.getMemberships()) {\n             membership = new MembershipTO();\n-            membership.setRole(membershipTO.getRole());\n+            membership.setRoleId(membershipTO.getRoleId());\n             membership.setAttributes(membershipTO.getAttributes());\n             oldUser.getMemberships().add(membership);\n         }\n@@ -781,13 +781,13 @@ public void searchAndDropResource(String resource, UserTO userTO) {\n     public void searchAndUpdateMembership(MembershipTO membershipTO) {\n         boolean found = false;\n         MembershipMod membershipMod = new MembershipMod();\n-        membershipMod.setRole(membershipTO.getRole());\n+        membershipMod.setRole(membershipTO.getRoleId());\n \n         AttributeMod attributeMod;\n \n         //1. If the membership exists and it's changed, update it\n         for (MembershipTO oldMembership : oldUser.getMemberships()) {\n-            if (membershipTO.getRole() == oldMembership.getRole()) {\n+            if (membershipTO.getRoleId() == oldMembership.getRoleId()) {\n \n                 for (AttributeTO oldAttribute : oldMembership.getAttributes()) {\n                     for (AttributeTO newAttribute : membershipTO.getAttributes()) {"},{"sha":"17e2da92607310da0a46cc352c874a0aee22929f","filename":"core/src/main/java/org/syncope/core/rest/data/UserDataBinder.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d4922e5670d2b243362163687c5277077c789ebf/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d4922e5670d2b243362163687c5277077c789ebf/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java?ref=d4922e5670d2b243362163687c5277077c789ebf","patch":"@@ -92,12 +92,12 @@ public SyncopeUser create(UserTO userTO)\n         // memberships\n         SyncopeRole role = null;\n         for (MembershipTO membershipTO : userTO.getMemberships()) {\n-            role = syncopeRoleDAO.find(membershipTO.getRole());\n+            role = syncopeRoleDAO.find(membershipTO.getRoleId());\n \n             if (role == null) {\n                 if (LOG.isDebugEnabled()) {\n                     LOG.debug(\"Ignoring invalid role \" +\n-                            membershipTO.getRole());\n+                            membershipTO.getRoleName());\n                 }\n             } else {\n                 Membership membership = null;\n@@ -251,7 +251,8 @@ public UserTO getUserTO(SyncopeUser user, Workflow userWorkflow) {\n         for (Membership membership : user.getMemberships()) {\n             membershipTO = new MembershipTO();\n             membershipTO.setId(membership.getId());\n-            membershipTO.setRole(membership.getSyncopeRole().getId());\n+            membershipTO.setRoleId(membership.getSyncopeRole().getId());\n+            membershipTO.setRoleName(membership.getSyncopeRole().getName());\n \n             membershipTO = (MembershipTO) fillTO(membershipTO,\n                     membership.getAttributes(),"},{"sha":"842168195353130f2eb3807d1a16e0ef92d6116d","filename":"core/src/test/java/org/syncope/core/test/rest/UserTestITCase.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d4922e5670d2b243362163687c5277077c789ebf/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FUserTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d4922e5670d2b243362163687c5277077c789ebf/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FUserTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FUserTestITCase.java?ref=d4922e5670d2b243362163687c5277077c789ebf","patch":"@@ -99,7 +99,7 @@ public final void create() {\n \n         // add a membership\n         MembershipTO membershipTO = new MembershipTO();\n-        membershipTO.setRole(8L);\n+        membershipTO.setRoleId(8L);\n         userTO.addMembership(membershipTO);\n \n         // add an attribute with no values: must be ignored\n@@ -179,7 +179,7 @@ public final void createWithRequiredValueMissing() {\n         userTO.removeAttribute(type);\n \n         MembershipTO membershipTO = new MembershipTO();\n-        membershipTO.setRole(8L);\n+        membershipTO.setRoleId(8L);\n         userTO.addMembership(membershipTO);\n \n         SyncopeClientCompositeErrorException ex = null;\n@@ -285,7 +285,7 @@ public final void search() {\n     public final void update() {\n         UserTO userTO = getSampleTO(\"g.h@t.com\");\n         MembershipTO membershipTO = new MembershipTO();\n-        membershipTO.setRole(8L);\n+        membershipTO.setRoleId(8L);\n         userTO.addMembership(membershipTO);\n \n         userTO = restTemplate.postForObject(BASE_URL + \"user/create\","}]}