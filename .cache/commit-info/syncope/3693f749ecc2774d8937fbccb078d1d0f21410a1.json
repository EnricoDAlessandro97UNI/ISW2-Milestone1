{"sha":"3693f749ecc2774d8937fbccb078d1d0f21410a1","node_id":"C_kwDOJfYA1toAKDM2OTNmNzQ5ZWNjMjc3NGQ4OTM3ZmJjY2IwNzhkMWQwZjIxNDEwYTE","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@users.noreply.github.com","date":"2023-03-13T14:06:42Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2023-03-13T14:07:31Z"},"message":"WA: better scope management for OIDC RP client application (completion) (#424)","tree":{"sha":"034d0db3027aa31ee23634113eb90b4ab74be5ee","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/034d0db3027aa31ee23634113eb90b4ab74be5ee"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3693f749ecc2774d8937fbccb078d1d0f21410a1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3693f749ecc2774d8937fbccb078d1d0f21410a1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3693f749ecc2774d8937fbccb078d1d0f21410a1","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3693f749ecc2774d8937fbccb078d1d0f21410a1/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"58889e095d646416fc6750cddcbbc69c5871f04e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/58889e095d646416fc6750cddcbbc69c5871f04e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/58889e095d646416fc6750cddcbbc69c5871f04e"}],"stats":{"total":103,"additions":81,"deletions":22},"files":[{"sha":"89c7303a4a32658922a1425821c68fc6e614eb9e","filename":"client/am/console/src/main/java/org/apache/syncope/client/console/clientapps/ClientAppModalPanelBuilder.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppModalPanelBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppModalPanelBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppModalPanelBuilder.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -56,6 +56,7 @@\n import org.apache.syncope.common.lib.types.ClientAppType;\n import org.apache.syncope.common.lib.types.OIDCGrantType;\n import org.apache.syncope.common.lib.types.OIDCResponseType;\n+import org.apache.syncope.common.lib.types.OIDCScope;\n import org.apache.syncope.common.lib.types.OIDCSubjectType;\n import org.apache.syncope.common.lib.types.PolicyType;\n import org.apache.syncope.common.lib.types.SAML2SPNameId;\n@@ -268,6 +269,11 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                             new PropertyModel<>(clientAppTO, \"supportedResponseTypes\"),\n                             new ListModel<>(List.of(OIDCResponseType.values()))));\n \n+                    fields.add(new AjaxPalettePanel.Builder<OIDCScope>().setName(\"scopes\").build(\n+                            \"field\",\n+                            new PropertyModel<>(clientAppTO, \"scopes\"),\n+                            new ListModel<>(List.of(OIDCScope.values()))));\n+\n                     AjaxTextFieldPanel logoutUri = new AjaxTextFieldPanel(\n                             \"field\", \"logoutUri\", new PropertyModel<>(clientAppTO, \"logoutUri\"), false);\n                     logoutUri.addValidator(new UrlValidator());"},{"sha":"52da59613d7bebb7f938a2f2feb7a8986dfbc359","filename":"client/am/console/src/main/java/org/apache/syncope/client/console/clientapps/ClientAppPropertyWizardBuilder.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppPropertyWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppPropertyWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppPropertyWizardBuilder.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -28,7 +28,7 @@\n \n public class ClientAppPropertyWizardBuilder extends AttrWizardBuilder {\n \n-    private static final long serialVersionUID = 1L;\n+    private static final long serialVersionUID = -91564005263775261L;\n \n     private final ClientAppType type;\n "},{"sha":"a51a303773529648eebbc046918f4c0c4f074705","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -58,3 +58,4 @@ attrReleasePolicy=Attribute Release Policy\n properties.title=Properties for ${name}\n type_extensions.title=properties\n bypassApprovalPrompt=Bypass Approval Prompt\n+scopes=Scopes"},{"sha":"6ab6528c251e3d07c91b0149fcce5a0673aedff5","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel_fr_CA.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_fr_CA.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_fr_CA.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_fr_CA.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -58,3 +58,4 @@ attrReleasePolicy=Attribute Release Policy\n properties.title=Properties for ${name}\n type_extensions.title=properties\n bypassApprovalPrompt=Bypass Approval Prompt\n+scopes=Scopes"},{"sha":"1e4aa4611bfdd1d91cdf0d6d3dade96f2276ef4c","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_it.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -58,3 +58,4 @@ attrReleasePolicy=Politica Rilascio Attributi\n properties.title=Propriet\\u00e0 di ${name}\n type_extensions.title=propriet\\u00e0\n bypassApprovalPrompt=Salta richiesta approvazione\n+scopes=Scope"},{"sha":"ce61864b46d6a94fc64e81969420e068e9c69ab6","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel_ja.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ja.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -58,3 +58,4 @@ attrReleasePolicy=Attribute Release Policy\n properties.title=Properties for ${name}\n type_extensions.title=properties\n bypassApprovalPrompt=Bypass Approval Prompt\n+scopes=Scopes"},{"sha":"a51a303773529648eebbc046918f4c0c4f074705","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel_pt_BR.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_pt_BR.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -58,3 +58,4 @@ attrReleasePolicy=Attribute Release Policy\n properties.title=Properties for ${name}\n type_extensions.title=properties\n bypassApprovalPrompt=Bypass Approval Prompt\n+scopes=Scopes"},{"sha":"b9af8ebe0f4735f73b1d0f8ae6129acf23582716","filename":"client/am/console/src/main/resources/org/apache/syncope/client/console/clientapps/ClientAppDirectoryPanel_ru.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fam%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fclientapps%2FClientAppDirectoryPanel_ru.properties?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -59,3 +59,4 @@ attrReleasePolicy=Attribute Release Policy\n properties.title=Properties for ${name}\n type_extensions.title=properties\n bypassApprovalPrompt=Bypass Approval Prompt\n+scopes=Scopes"},{"sha":"7e0019494a969eb926190ad5524e33c333447c43","filename":"common/am/lib/src/main/java/org/apache/syncope/common/lib/to/OIDCRPClientAppTO.java","status":"modified","additions":4,"deletions":12,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FOIDCRPClientAppTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FOIDCRPClientAppTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FOIDCRPClientAppTO.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -28,22 +28,14 @@\n import org.apache.commons.lang3.builder.HashCodeBuilder;\n import org.apache.syncope.common.lib.types.OIDCGrantType;\n import org.apache.syncope.common.lib.types.OIDCResponseType;\n+import org.apache.syncope.common.lib.types.OIDCScope;\n import org.apache.syncope.common.lib.types.OIDCSubjectType;\n \n @Schema(allOf = { ClientAppTO.class })\n public class OIDCRPClientAppTO extends ClientAppTO {\n \n     private static final long serialVersionUID = -6370888503924521351L;\n \n-    public enum SCOPE {\n-        OPENID,\n-        PROFILE,\n-        EMAIL,\n-        ADDRESS,\n-        PHONE\n-\n-    }\n-\n     private String clientId;\n \n     private String clientSecret;\n@@ -60,9 +52,9 @@ public enum SCOPE {\n \n     private final List<OIDCResponseType> supportedResponseTypes = new ArrayList<>();\n \n-    private String logoutUri;\n+    private final List<OIDCScope> scopes = new ArrayList<>();\n \n-    private final List<SCOPE> scopes = new ArrayList<>();\n+    private String logoutUri;\n \n     private boolean bypassApprovalPrompt = true;\n \n@@ -143,7 +135,7 @@ public void setJwtAccessToken(final boolean jwtAccessToken) {\n \n     @JacksonXmlElementWrapper(localName = \"scopes\")\n     @JacksonXmlProperty(localName = \"scope\")\n-    public List<SCOPE> getScopes() {\n+    public List<OIDCScope> getScopes() {\n         return scopes;\n     }\n "},{"sha":"a3771db4f90aba8834343a4bb2390713d78082c8","filename":"common/am/lib/src/main/java/org/apache/syncope/common/lib/types/OIDCScope.java","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FOIDCScope.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FOIDCScope.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FOIDCScope.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -0,0 +1,28 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.types;\n+\n+public enum OIDCScope {\n+    OPENID,\n+    PROFILE,\n+    EMAIL,\n+    ADDRESS,\n+    PHONE\n+\n+}"},{"sha":"357a7d0d597545c7159b5dbfc7d05039d9a41826","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/entity/am/OIDCRPClientApp.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fam%2FOIDCRPClientApp.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fam%2FOIDCRPClientApp.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fam%2FOIDCRPClientApp.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -21,6 +21,7 @@\n import java.util.Set;\n import org.apache.syncope.common.lib.types.OIDCGrantType;\n import org.apache.syncope.common.lib.types.OIDCResponseType;\n+import org.apache.syncope.common.lib.types.OIDCScope;\n import org.apache.syncope.common.lib.types.OIDCSubjectType;\n \n public interface OIDCRPClientApp extends ClientApp {\n@@ -39,6 +40,8 @@ public interface OIDCRPClientApp extends ClientApp {\n \n     Set<OIDCResponseType> getSupportedResponseTypes();\n \n+    Set<OIDCScope> getScopes();\n+\n     boolean isSignIdToken();\n \n     void setSignIdToken(boolean signIdToken);"},{"sha":"14d016f686831b63408588e49e34e20b5b5e027b","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/am/JPAOIDCRPClientApp.java","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fam%2FJPAOIDCRPClientApp.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fam%2FJPAOIDCRPClientApp.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fam%2FJPAOIDCRPClientApp.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -35,6 +35,7 @@\n import java.util.Set;\n import org.apache.syncope.common.lib.types.OIDCGrantType;\n import org.apache.syncope.common.lib.types.OIDCResponseType;\n+import org.apache.syncope.common.lib.types.OIDCScope;\n import org.apache.syncope.common.lib.types.OIDCSubjectType;\n import org.apache.syncope.core.persistence.api.entity.am.OIDCRPClientApp;\n import org.apache.syncope.core.provisioning.api.serialization.POJOHelper;\n@@ -58,6 +59,10 @@ public class JPAOIDCRPClientApp extends AbstractClientApp implements OIDCRPClien\n             new TypeReference<Set<OIDCResponseType>>() {\n     };\n \n+    protected static final TypeReference<Set<OIDCScope>> SCOPE_TYPEREF =\n+            new TypeReference<Set<OIDCScope>>() {\n+    };\n+\n     @Column(unique = true, nullable = false)\n     private String clientId;\n \n@@ -90,6 +95,12 @@ public class JPAOIDCRPClientApp extends AbstractClientApp implements OIDCRPClien\n     @Transient\n     private Set<OIDCResponseType> supportedResponseTypesSet = new HashSet<>();\n \n+    @Lob\n+    private String scopes;\n+\n+    @Transient\n+    private Set<OIDCScope> scopesSet = new HashSet<>();\n+\n     private String logoutUri;\n \n     @Override\n@@ -167,6 +178,11 @@ public Set<OIDCResponseType> getSupportedResponseTypes() {\n         return supportedResponseTypesSet;\n     }\n \n+    @Override\n+    public Set<OIDCScope> getScopes() {\n+        return scopesSet;\n+    }\n+\n     @Override\n     public String getLogoutUri() {\n         return logoutUri;\n@@ -192,6 +208,9 @@ protected void json2list(final boolean clearFirst) {\n         if (supportedResponseTypes != null) {\n             getSupportedResponseTypes().addAll(POJOHelper.deserialize(supportedResponseTypes, RESPONSE_TYPE_TYPEREF));\n         }\n+        if (scopes != null) {\n+            getScopes().addAll(POJOHelper.deserialize(scopes, SCOPE_TYPEREF));\n+        }\n     }\n \n     @PostLoad\n@@ -211,5 +230,6 @@ public void list2json() {\n         redirectUris = POJOHelper.serialize(getRedirectUris());\n         supportedGrantTypes = POJOHelper.serialize(getSupportedGrantTypes());\n         supportedResponseTypes = POJOHelper.serialize(getSupportedResponseTypes());\n+        scopes = POJOHelper.serialize(getScopes());\n     }\n }"},{"sha":"13b858d72899861b9d60f57ecdd4ffbca3761220","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/ClientAppDataBinderImpl.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FClientAppDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FClientAppDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FClientAppDataBinderImpl.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -225,6 +225,8 @@ protected void doUpdate(final OIDCRPClientApp clientApp, final OIDCRPClientAppTO\n         clientApp.getSupportedGrantTypes().addAll(clientAppTO.getSupportedGrantTypes());\n         clientApp.getSupportedResponseTypes().clear();\n         clientApp.getSupportedResponseTypes().addAll(clientAppTO.getSupportedResponseTypes());\n+        clientApp.getScopes().clear();\n+        clientApp.getScopes().addAll(clientAppTO.getScopes());\n         clientApp.setLogoutUri(clientAppTO.getLogoutUri());\n     }\n \n@@ -239,6 +241,7 @@ protected OIDCRPClientAppTO getOIDCClientAppTO(final OIDCRPClientApp clientApp)\n         clientAppTO.getRedirectUris().addAll(clientApp.getRedirectUris());\n         clientAppTO.getSupportedGrantTypes().addAll(clientApp.getSupportedGrantTypes());\n         clientAppTO.getSupportedResponseTypes().addAll(clientApp.getSupportedResponseTypes());\n+        clientAppTO.getScopes().addAll(clientApp.getScopes());\n         clientAppTO.setLogoutUri(clientApp.getLogoutUri());\n         clientAppTO.setJwtAccessToken(clientApp.isJwtAccessToken());\n         clientAppTO.setBypassApprovalPrompt(clientApp.isBypassApprovalPrompt());"},{"sha":"6c8d73fb83adcc4e4721d8fe75065391c5657086","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/mapping/OIDCRPClientAppTOMapper.java","status":"modified","additions":10,"deletions":9,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3693f749ecc2774d8937fbccb078d1d0f21410a1/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3693f749ecc2774d8937fbccb078d1d0f21410a1/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java?ref=3693f749ecc2774d8937fbccb078d1d0f21410a1","patch":"@@ -27,6 +27,7 @@\n import org.apache.syncope.common.lib.to.OIDCRPClientAppTO;\n import org.apache.syncope.common.lib.types.OIDCGrantType;\n import org.apache.syncope.common.lib.types.OIDCResponseType;\n+import org.apache.syncope.common.lib.types.OIDCScope;\n import org.apache.syncope.common.lib.wa.WAClientApp;\n import org.apereo.cas.configuration.CasConfigurationProperties;\n import org.apereo.cas.oidc.claims.OidcAddressScopeAttributeReleasePolicy;\n@@ -94,19 +95,19 @@ public RegisteredService map(\n             }\n         }\n \n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.OPENID)) {\n+        if (rp.getScopes().contains(OIDCScope.OPENID)) {\n             chain.addPolicies(new OidcOpenIdScopeAttributeReleasePolicy());\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.PROFILE)) {\n+        if (rp.getScopes().contains(OIDCScope.PROFILE)) {\n             chain.addPolicies(new OidcProfileScopeAttributeReleasePolicy());\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.ADDRESS)) {\n+        if (rp.getScopes().contains(OIDCScope.ADDRESS)) {\n             chain.addPolicies(new OidcAddressScopeAttributeReleasePolicy());\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.EMAIL)) {\n+        if (rp.getScopes().contains(OIDCScope.EMAIL)) {\n             chain.addPolicies(new OidcEmailScopeAttributeReleasePolicy());\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.PHONE)) {\n+        if (rp.getScopes().contains(OIDCScope.PHONE)) {\n             chain.addPolicies(new OidcPhoneScopeAttributeReleasePolicy());\n         }\n \n@@ -125,16 +126,16 @@ public RegisteredService map(\n                     map(p -> p.getAllowedAttributes().stream().collect(Collectors.toSet())).\n                     ifPresent(customClaims::addAll);\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.PROFILE)) {\n+        if (rp.getScopes().contains(OIDCScope.PROFILE)) {\n             customClaims.removeAll(OidcProfileScopeAttributeReleasePolicy.ALLOWED_CLAIMS);\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.ADDRESS)) {\n+        if (rp.getScopes().contains(OIDCScope.ADDRESS)) {\n             customClaims.removeAll(OidcAddressScopeAttributeReleasePolicy.ALLOWED_CLAIMS);\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.EMAIL)) {\n+        if (rp.getScopes().contains(OIDCScope.EMAIL)) {\n             customClaims.removeAll(OidcEmailScopeAttributeReleasePolicy.ALLOWED_CLAIMS);\n         }\n-        if (rp.getScopes().contains(OIDCRPClientAppTO.SCOPE.PHONE)) {\n+        if (rp.getScopes().contains(OIDCScope.PHONE)) {\n             customClaims.removeAll(OidcPhoneScopeAttributeReleasePolicy.ALLOWED_CLAIMS);\n         }\n         if (!customClaims.isEmpty()) {"}]}