{"sha":"9738f6822a323f009a9fc24793cf084e1c5756fc","node_id":"C_kwDOJfYA1toAKDk3MzhmNjgyMmEzMjNmMDA5YTlmYzI0NzkzY2YwODRlMWM1NzU2ZmM","commit":{"author":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2022-02-15T08:00:03Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2022-02-15T08:00:03Z"},"message":"SYNCOPE-1661 added sidebar layout JSON configuration (#314)","tree":{"sha":"708e306d3a101a38a4e50667a2a86833dadafefa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/708e306d3a101a38a4e50667a2a86833dadafefa"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9738f6822a323f009a9fc24793cf084e1c5756fc","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiC12DCRBK7hj4Ov3rIwAA7PIIADMpeQy6qFzcHGwGaDWWqN6B\nsg5ypCpsLQdDvUFETH1qdqLMVRr6+/7pNu4oyrF6mLcR3vlbcRd6gzaFlLCoBvrK\nGoLiAt5JSV/TEDIkcp1kb2MRFICQVx83bS7L5Jcfjzx/rEYXToUlnVDKRL40NG29\nuIl9Wx6fFz1qdOtNmPSj5IAwYznWCprJfs8ua0WbafN7hEuYoLluzOoA9IymCCgl\nugRy5XC8JVz9++T9NkEO1u1lmKJT6BLipHoXjpuuDwsINTSaKp/rOVdlNtMH7tUZ\n6soFsmhV0+eSGLfpwx/GuAuvFySNW9ti89aavsTV6O9inokb0u15yHR9DJi0S4I=\n=4cCO\n-----END PGP SIGNATURE-----\n","payload":"tree 708e306d3a101a38a4e50667a2a86833dadafefa\nparent a0e62e57617d1324a154bcc803f891b9afa81efa\nauthor Andrea Patricelli <andreapatricelli@apache.org> 1644912003 +0100\ncommitter GitHub <noreply@github.com> 1644912003 +0100\n\nSYNCOPE-1661 added sidebar layout JSON configuration (#314)\n\n"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9738f6822a323f009a9fc24793cf084e1c5756fc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9738f6822a323f009a9fc24793cf084e1c5756fc","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9738f6822a323f009a9fc24793cf084e1c5756fc/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"a0e62e57617d1324a154bcc803f891b9afa81efa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a0e62e57617d1324a154bcc803f891b9afa81efa","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a0e62e57617d1324a154bcc803f891b9afa81efa"}],"stats":{"total":106,"additions":94,"deletions":12},"files":[{"sha":"030d9940a128cb8b4b3a2469f6f77bd986225887","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/layout/SidebarLayout.java","status":"added","additions":57,"deletions":0,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FSidebarLayout.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FSidebarLayout.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FSidebarLayout.java?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -0,0 +1,57 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.enduser.layout;\n+\n+import java.io.Serializable;\n+\n+public class SidebarLayout implements Serializable {\n+\n+    private static final long serialVersionUID = 192032086034617378L;\n+\n+    private boolean editUserEnabled = true;\n+\n+    private boolean passwordManagementEnabled = true;\n+\n+    private boolean securityQuestionManagementEnabled = true;\n+\n+    public boolean isEditUserEnabled() {\n+        return editUserEnabled;\n+    }\n+\n+    public void setEditUserEnabled(final boolean editUserEnabled) {\n+        this.editUserEnabled = editUserEnabled;\n+    }\n+\n+    public boolean isPasswordManagementEnabled() {\n+        return passwordManagementEnabled;\n+    }\n+\n+    public void setPasswordManagementEnabled(final boolean passwordManagementEnabled) {\n+        this.passwordManagementEnabled = passwordManagementEnabled;\n+    }\n+\n+    public boolean isSecurityQuestionManagementEnabled() {\n+        return securityQuestionManagementEnabled;\n+    }\n+\n+    public void setSecurityQuestionManagementEnabled(final boolean securityQuestionManagementEnabled) {\n+        this.securityQuestionManagementEnabled = securityQuestionManagementEnabled;\n+    }\n+\n+}"},{"sha":"9a24ac2ba8c04fb2e28c747da9901c3b78a1d380","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/layout/UserFormLayoutInfo.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FUserFormLayoutInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FUserFormLayoutInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Flayout%2FUserFormLayoutInfo.java?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -39,6 +39,12 @@ public class UserFormLayoutInfo extends AbstractAnyFormBaseLayout<UserTO, UserFo\n \n     private boolean detailsManagement = true;\n \n+    private final SidebarLayout sidebarLayout;\n+\n+    public UserFormLayoutInfo() {\n+        sidebarLayout = new SidebarLayout();\n+    }\n+\n     public Map<String, CustomizationOption> getWhichPlainAttrs() {\n         return whichPlainAttrs;\n     }\n@@ -71,4 +77,9 @@ public boolean isDetailsManagement() {\n     public void setDetailsManagement(final boolean detailsManagement) {\n         this.detailsManagement = detailsManagement;\n     }\n+\n+    public SidebarLayout getSidebarLayout() {\n+        return sidebarLayout;\n+    }\n+\n }"},{"sha":"291645e50265344677e56d7df619cc7e96a171d3","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/pages/SelfPasswordReset.java","status":"modified","additions":1,"deletions":5,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfPasswordReset.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfPasswordReset.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfPasswordReset.java?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -90,11 +90,7 @@ public SelfPasswordReset(final PageParameters parameters) {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target) {\n-                boolean checked = true;\n-                if (SyncopeWebApplication.get().isCaptchaEnabled()) {\n-                    checked = captcha.check();\n-                }\n-                if (!checked) {\n+                if (SyncopeWebApplication.get().isCaptchaEnabled() && !captcha.check()) {\n                     SyncopeEnduserSession.get().error(getString(Constants.CAPTCHA_ERROR));\n                     SelfPasswordReset.this.getNotificationPanel().refresh(target);\n                 } else {"},{"sha":"aed77507864f983e09d23ab46b10037438192979","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/panels/Sidebar.java","status":"modified","additions":17,"deletions":3,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpanels%2FSidebar.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpanels%2FSidebar.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpanels%2FSidebar.java?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -174,20 +174,34 @@ protected void buildBaseSidebar() {\n         add(profileLIContainer);\n         profileULContainer = new WebMarkupContainer(getULContainerId(\"profile\"));\n         profileLIContainer.add(profileULContainer);\n+        profileLIContainer.setVisible(SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout().\n+                isEditUserEnabled()\n+                || SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout().\n+                isPasswordManagementEnabled()\n+                || (SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout().\n+                isSecurityQuestionManagementEnabled()\n+                && SyncopeEnduserSession.get().getPlatformInfo().isPwdResetRequiringSecurityQuestions()));\n \n         WebMarkupContainer liContainer = new WebMarkupContainer(getLIContainerId(\"edituser\"));\n         profileULContainer.add(liContainer);\n-        liContainer.add(BookmarkablePageLinkBuilder.build(\"edituser\", EditUser.class));\n \n+        liContainer.add(BookmarkablePageLinkBuilder.build(\"edituser\", EditUser.class))\n+                .setVisible(SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout()\n+                        .isEditUserEnabled());\n         liContainer = new WebMarkupContainer(getLIContainerId(\"editchangepassword\"));\n         profileULContainer.add(liContainer);\n-        liContainer.add(BookmarkablePageLinkBuilder.build(\"editchangepassword\", EditChangePassword.class));\n+\n+        liContainer.add(BookmarkablePageLinkBuilder.build(\"editchangepassword\", EditChangePassword.class))\n+                .setVisible(SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout().\n+                        isPasswordManagementEnabled());\n \n         liContainer = new WebMarkupContainer(getLIContainerId(\"editsecurityquestion\"));\n         profileULContainer.add(liContainer);\n         liContainer.add(BookmarkablePageLinkBuilder.build(\"editsecurityquestion\", EditSecurityQuestion.class));\n         liContainer.setOutputMarkupPlaceholderTag(true);\n-        liContainer.setVisible(SyncopeEnduserSession.get().getPlatformInfo().isPwdResetRequiringSecurityQuestions());\n+        liContainer.setVisible(SyncopeWebApplication.get().getCustomFormLayout().getSidebarLayout().\n+                isSecurityQuestionManagementEnabled()\n+                && SyncopeEnduserSession.get().getPlatformInfo().isPwdResetRequiringSecurityQuestions());\n     }\n \n     protected String getLIContainerId(final String linkId) {"},{"sha":"f32bfb0ce7db36d97614c6a9891b2fd85eb6f265","filename":"client/idrepo/enduser/src/main/resources/customFormLayout.json","status":"modified","additions":7,"deletions":2,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2FcustomFormLayout.json","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2FcustomFormLayout.json","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2FcustomFormLayout.json?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -1,4 +1,4 @@\n-{ \n+{\n   \"formClass\": \"org.apache.syncope.client.enduser.panels.UserFormPanel\",\n   \"auxClasses\": true,\n   \"groups\": true,\n@@ -10,5 +10,10 @@\n   \"whichDerAttrs\": {},\n   \"whichVirAttrs\": {},\n   \"passwordManagement\": true,\n-  \"detailsManagement\": true\n+  \"detailsManagement\": true,\n+  \"sidebarLayout\": {\n+    \"editUserEnabled\": true,\n+    \"passwordManagementEnabled\": true,\n+    \"securityQuestionManagementEnabled\": true\n+  }\n }"},{"sha":"d621ebdce66d53696a5c5fac0435182f5b67e9d1","filename":"client/idrepo/enduser/src/main/resources/org/apache/syncope/client/enduser/pages/SelfConfirmPasswordReset_it.properties","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfConfirmPasswordReset_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9738f6822a323f009a9fc24793cf084e1c5756fc/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfConfirmPasswordReset_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fpages%2FSelfConfirmPasswordReset_it.properties?ref=9738f6822a323f009a9fc24793cf084e1c5756fc","patch":"@@ -22,7 +22,6 @@ cancel=Annulla\n submit=Invia\n self.confirm.pwd.reset.success=Password \\u00e8 stata modificata\n self.confirm.pwd.reset.success.msg=Cambio password eseguito con successo\n-self.confirm.pwd.reset.error.empty=Nessun token \\u00e8 specifico nell'url, non \\u00e8 possibile accedere alla pagina richiesta\n-\n+self.confirm.pwd.reset.error.empty=Nessun token \\u00e8 specificato nell'url, non \\u00e8 possibile accedere alla pagina richiesta\n self.confirm.pwd.reset.error=Errore durante il processo di reset password\n self.confirm.pwd.reset.error.msg=Si prega di contattare "}]}