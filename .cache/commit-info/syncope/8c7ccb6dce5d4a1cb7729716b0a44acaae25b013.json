{"sha":"8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjhjN2NjYjZkY2U1ZDRhMWNiNzcyOTcxNmIwYTQ0YWNhYWUyNWIwMTM=","commit":{"author":{"name":"Marco Di Sabatino Di Diodoro","email":"mdisabatino@apache.org","date":"2014-09-29T14:19:38Z"},"committer":{"name":"Marco Di Sabatino Di Diodoro","email":"mdisabatino@apache.org","date":"2014-09-29T14:19:38Z"},"message":"[SYNCOPE-553]\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/1_2_X@1628189 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c707bf5a71cbd7c3d808598ad646e936a349a251","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c707bf5a71cbd7c3d808598ad646e936a349a251"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013/comments","author":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"committer":{"login":"mdisabatino","id":1792527,"node_id":"MDQ6VXNlcjE3OTI1Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1792527?v=4","gravatar_id":"","url":"https://api.github.com/users/mdisabatino","html_url":"https://github.com/mdisabatino","followers_url":"https://api.github.com/users/mdisabatino/followers","following_url":"https://api.github.com/users/mdisabatino/following{/other_user}","gists_url":"https://api.github.com/users/mdisabatino/gists{/gist_id}","starred_url":"https://api.github.com/users/mdisabatino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdisabatino/subscriptions","organizations_url":"https://api.github.com/users/mdisabatino/orgs","repos_url":"https://api.github.com/users/mdisabatino/repos","events_url":"https://api.github.com/users/mdisabatino/events{/privacy}","received_events_url":"https://api.github.com/users/mdisabatino/received_events","type":"User","site_admin":false},"parents":[{"sha":"d731d4b8f5aa7c79aae7921c60c16e42e3d9ed0d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d731d4b8f5aa7c79aae7921c60c16e42e3d9ed0d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d731d4b8f5aa7c79aae7921c60c16e42e3d9ed0d"}],"stats":{"total":20,"additions":19,"deletions":1},"files":[{"sha":"f3c297a7f312b5e1ca88bd01393436aebbcdee88","filename":"core/src/main/java/org/apache/syncope/core/rest/data/PolicyDataBinder.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FPolicyDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FPolicyDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FPolicyDataBinder.java?ref=8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","patch":"@@ -170,7 +170,10 @@ public <T extends Policy> T getPolicy(T policy, final AbstractPolicyTO policyTO)\n                 }\n                 policy.setSpecification(((AccountPolicyTO) policyTO).getSpecification());\n \n-                ((AccountPolicy) policy).getResources().clear();\n+                if (((AccountPolicy) policy).getResources() != null\n+                        && !((AccountPolicy) policy).getResources().isEmpty()) {\n+                    ((AccountPolicy) policy).getResources().clear();\n+                }\n                 for (String resourceName : ((AccountPolicyTO) policyTO).getResources()) {\n                     ExternalResource resource = getResource(resourceName);\n "},{"sha":"18b1e3f8ff668bd0937c96ccafb178ccf34ecf42","filename":"core/src/test/java/org/apache/syncope/core/rest/PolicyTestITCase.java","status":"modified","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FPolicyTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8c7ccb6dce5d4a1cb7729716b0a44acaae25b013/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FPolicyTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FPolicyTestITCase.java?ref=8c7ccb6dce5d4a1cb7729716b0a44acaae25b013","patch":"@@ -29,6 +29,7 @@\n import org.apache.syncope.common.to.AccountPolicyTO;\n import org.apache.syncope.common.to.PasswordPolicyTO;\n import org.apache.syncope.common.to.SyncPolicyTO;\n+import org.apache.syncope.common.types.AccountPolicySpec;\n import org.apache.syncope.common.types.PasswordPolicySpec;\n import org.apache.syncope.common.types.PolicyType;\n import org.apache.syncope.common.types.SyncPolicySpec;\n@@ -221,4 +222,18 @@ public void issueSYNCOPE466() {\n             assertEquals(ClientExceptionType.InvalidPolicy, e.getType());\n         }\n     }\n+\n+    @Test\n+    public void issueSYNCOPE553() {\n+        AccountPolicyTO policy = new AccountPolicyTO(false);\n+        policy.setDescription(\"SYNCOPE553\");\n+        \n+        final AccountPolicySpec accountPolicySpec = new AccountPolicySpec();\n+        accountPolicySpec.setMinLength(3);\n+        accountPolicySpec.setMaxLength(8);\n+        policy.setSpecification(accountPolicySpec);\n+        \n+        policy = createPolicy(policy);\n+        assertNotNull(policy);\n+    }\n }"}]}