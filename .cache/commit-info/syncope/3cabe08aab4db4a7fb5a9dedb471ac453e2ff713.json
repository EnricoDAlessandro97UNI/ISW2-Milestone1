{"sha":"3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjNjYWJlMDhhYWI0ZGI0YTdmYjVhOWRlZGI0NzFhYzQ1M2UyZmY3MTM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-09-25T12:16:59Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-09-25T12:27:41Z"},"message":"[SYNCOPE-1369] Flowable support refactored as extension + code review (now with variable cleanup)","tree":{"sha":"4ce87c48bd7c4f088ad7a3d6c5cb2ee15eab893e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/4ce87c48bd7c4f088ad7a3d6c5cb2ee15eab893e"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"11612399a31d6cee09abfd199772989291b4dd0a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/11612399a31d6cee09abfd199772989291b4dd0a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/11612399a31d6cee09abfd199772989291b4dd0a"}],"stats":{"total":11134,"additions":6498,"deletions":4636},"files":[{"sha":"69abfae784435d84fc557db47d1e6e15fe8b1c55","filename":"archetype/pom.xml","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -244,10 +244,6 @@ under the License.\n         <targetPath>${project.build.outputDirectory}/archetype-resources/console/src/main/resources</targetPath>\n         <includes>\n           <include>log4j2.xml</include>\n-          <include>save-model.html</include>\n-          <include>app-cfg.js</include>\n-          <include>url-config.js</include>\n-          <include>toolbar.js</include>\n         </includes>\n       </resource>\n       <resource>"},{"sha":"fb5724cedf2938ce955cfcbc883c0a4368f1ff6f","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":6,"deletions":81,"changes":87,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -121,6 +121,12 @@ under the License.\n       <id>all</id>\n       \n       <dependencies>\n+        <dependency>\n+          <groupId>org.apache.syncope.ext.flowable</groupId>\n+          <artifactId>syncope-ext-flowable-client-console</artifactId>\n+          <version>${syncope.version}</version>\n+        </dependency>\n+\n         <dependency>\n           <groupId>org.apache.syncope.ext.camel</groupId>\n           <artifactId>syncope-ext-camel-client-console</artifactId>\n@@ -144,90 +150,9 @@ under the License.\n           <artifactId>syncope-ext-scimv2-client-console</artifactId>\n           <version>${syncope.version}</version>\n         </dependency>\n-\n-        <dependency>\n-          <groupId>org.flowable</groupId>\n-          <artifactId>flowable-ui-modeler-app</artifactId>            \n-          <type>war</type>\n-          <scope>test</scope>\n-        </dependency>\n       </dependencies>\n \n       <build>\n-        <plugins>\n-          <plugin>\n-            <groupId>org.apache.maven.plugins</groupId>\n-            <artifactId>maven-antrun-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <executions>\n-              <execution>\n-                <id>setupFlowableModeler</id>\n-                <phase>process-resources</phase>\n-                <configuration>\n-                  <target>\n-                    <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-app/${flowable.version}/flowable-ui-modeler-app-${flowable.version}.war\" \n-                           dest=\"${flowable-modeler.directory}\">\n-                      <patternset>\n-                        <include name=\"WEB-INF/classes/static/**\"/>\n-                        <include name=\"WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\"/>\n-                      </patternset>\n-                    </unzip>\n-                \n-                    <unzip src=\"${flowable-modeler.directory}/WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\"\n-                           dest=\"${flowable-modeler.directory}\">\n-                      <patternset>\n-                        <include name=\"stencilset_bpmn.json\"/>\n-                      </patternset>\n-                    </unzip>\n-                \n-                    <move todir=\"${flowable-modeler.directory}\">\n-                      <fileset dir=\"${flowable-modeler.directory}/WEB-INF/classes/static/\">\n-                        <include name=\"**\"/>\n-                      </fileset>\n-                    </move>\n-                    <delete dir=\"${flowable-modeler.directory}/WEB-INF\"/>\n-                \n-                    <replace file=\"${flowable-modeler.directory}/index.html\"\n-                             token=\"&lt;/head&gt;\"\n-                             value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"/>\n-                    <replace file=\"${flowable-modeler.directory}/index.html\"\n-                             token=\" ng-click=&quot;backToLanding()&quot;\"\n-                             value=\" disabled=&quot;disabled&quot;\"/>\n-                    <replace file=\"${flowable-modeler.directory}/index.html\"\n-                             token=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot;\"\n-                             value=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot; style=&quot;display: none;&quot;\"/>\n-                    <replace file=\"${flowable-modeler.directory}/index.html\"\n-                             token=\"&lt;div class=&quot;pull-right\"\n-                             value=\"&lt;div style=&quot;display: none;&quot; class=&quot;pull-right\"/>\n-                    <replace file=\"${flowable-modeler.directory}/editor-app/editor.html\"\n-                             token=\"&lt;div class=&quot;btn-group pull-right&quot;\"\n-                             value=\"&lt;div style=&quot;display: none;&quot; class=&quot;btn-group pull-right&quot;\"/>\n-                    <replace file=\"${flowable-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\"\n-                             token=\"$location.path('/processes');\"\n-                             value=\"window.close();\"/>\n- \n-                    <copy file=\"${basedir}/src/main/resources/app-cfg.js\" \n-                          todir=\"${flowable-modeler.directory}/scripts\"\n-                          overwrite=\"true\"/>\n-                    <copy file=\"${basedir}/src/main/resources/url-config.js\" \n-                          todir=\"${flowable-modeler.directory}/editor-app/configuration\"\n-                          overwrite=\"true\"/>\n-                    <copy file=\"${basedir}/src/main/resources/toolbar.js\" \n-                          todir=\"${flowable-modeler.directory}/editor-app/configuration\"\n-                          overwrite=\"true\"/>\n-                    <copy file=\"${basedir}/src/main/resources/save-model.html\" \n-                          todir=\"${flowable-modeler.directory}/editor-app/popups\"\n-                          overwrite=\"true\"/>\n-                  </target>\n-                </configuration>\n-                <goals>\n-                  <goal>run</goal>\n-                </goals>\n-              </execution>\n-            </executions>\n-          </plugin>\n-        </plugins>\n-\n         <resources>\n           <resource>\n             <directory>src/main/resources</directory>"},{"sha":"f951894aeb6f4a2f0f9b7a69e9246115a8e12566","filename":"archetype/src/main/resources/archetype-resources/core/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -160,8 +160,8 @@ under the License.\n       \n       <dependencies>\n         <dependency>\n-          <groupId>org.apache.syncope.core</groupId>\n-          <artifactId>syncope-core-workflow-flowable</artifactId>\n+\t  <groupId>org.apache.syncope.ext.flowable</groupId>\n+          <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n           <version>${syncope.version}</version>\n         </dependency>\n "},{"sha":"d68a0d06e6f7656be4c7c24851e06f24c438cfe1","filename":"archetype/src/main/resources/meta-pom.xml","status":"modified","additions":0,"deletions":6,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Fmeta-pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/archetype%2Fsrc%2Fmain%2Fresources%2Fmeta-pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Fmeta-pom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -69,12 +69,6 @@ under the License.\n         <artifactId>syncope-core-persistence-jpa</artifactId>\n         <version>${syncope.version}</version>\n       </dependency>\n-    \n-      <dependency>\n-        <groupId>org.apache.syncope.core</groupId>\n-        <artifactId>syncope-core-workflow-flowable</artifactId>\n-        <version>${syncope.version}</version>\n-      </dependency>\n         \n       <dependency>\n         <groupId>org.apache.syncope.client</groupId>"},{"sha":"91cb8791b2fb301f1bfaad3ee7fb0c9a6f1fa47f","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/info/Info.java","status":"modified","additions":0,"deletions":12,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfo.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -82,18 +82,6 @@ public void provisioningManager() {\n         }\n     }\n \n-    public void workflowAdapter() {\n-        try {\n-            infoResultManager.printWorkflowAdapter(\n-                    platformInfo.getAnyObjectWorkflowAdapter(),\n-                    platformInfo.getUserWorkflowAdapter(),\n-                    platformInfo.getGroupWorkflowAdapter());\n-        } catch (final Exception ex) {\n-            LOG.error(\"Information error\", ex);\n-            infoResultManager.genericError(ex.getMessage());\n-        }\n-    }\n-\n     public void accountRules() {\n         platformInfo.getJavaImplInfo(ImplementationType.ACCOUNT_RULE).ifPresent(info -> {\n             try {"},{"sha":"460d54a3990a7dcd636c5f2a4ecb5aeebc9259c2","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/info/InfoCommand.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoCommand.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoCommand.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoCommand.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -52,9 +52,6 @@ public void execute(final Input input) {\n             case PROVISIONING_MANAGER:\n                 info.provisioningManager();\n                 break;\n-            case WORKFLOW_ADAPTER:\n-                info.workflowAdapter();\n-                break;\n             case ACCOUNT_RULES:\n                 info.accountRules();\n                 break;\n@@ -122,7 +119,6 @@ private enum Options {\n         PWD_RESET_WITH_SECURITY_QUESTION(\"--pwd-reset-with-question\"),\n         SELF_REG_ALLOWED(\"--self-reg-allowed\"),\n         PROVISIONING_MANAGER(\"--provisioning-manager-classes\"),\n-        WORKFLOW_ADAPTER(\"--workflow-adapter-classes\"),\n         ACCOUNT_RULES(\"--account-rules-classes\"),\n         CONNID_LOCATION(\"--connid-locations\"),\n         RECON_FILTER_BUILDERS(\"--reconciliation-filter-builders\"),"},{"sha":"65ba20633606290028c7463f8ef22e52452f2605","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/info/InfoResultManager.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoResultManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoResultManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Finfo%2FInfoResultManager.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -48,15 +48,6 @@ public void printProvisioningManager(final String anyObjectProvisioningManager,\n                 \"Group provisioning manager class: \" + getGroupProvisioningManager);\n     }\n \n-    public void printWorkflowAdapter(final String anyObjectWorkflowAdapter,\n-            final String userWorkflowAdapter,\n-            final String groupWorkflowAdapter) {\n-        genericMessage(\n-                \"Any object workflow adapter class: \" + anyObjectWorkflowAdapter,\n-                \"User       workflow adapter class: \" + userWorkflowAdapter,\n-                \"Group      workflow adapter class: \" + groupWorkflowAdapter);\n-    }\n-\n     public void printAccountRules(final Collection<String> rules) {\n         rules.forEach(accountRule -> {\n             genericMessage(\"Account rule: \" + accountRule);"},{"sha":"215c8659132e80bf830e43d5c63a7da377b3c245","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowCommand.java","status":"removed","additions":0,"deletions":97,"changes":97,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowCommand.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowCommand.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowCommand.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,97 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.cli.commands.self;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-import org.apache.commons.lang3.StringUtils;\n-import org.apache.syncope.client.cli.Command;\n-import org.apache.syncope.client.cli.Input;\n-import org.apache.syncope.client.cli.commands.AbstractCommand;\n-\n-@Command(name = \"workflow\")\n-public class WorkflowCommand extends AbstractCommand {\n-\n-    private final WorkflowResultManager workflowResultManager = new WorkflowResultManager();\n-\n-    @Override\n-    public void execute(final Input input) {\n-        if (StringUtils.isBlank(input.getOption())) {\n-            input.setOption(UserWorkflowOptions.HELP.getOptionName());\n-        }\n-\n-        switch (UserWorkflowOptions.fromName(input.getOption())) {\n-            case EXPORT_DIAGRAM:\n-                new WorkflowExportDiagram(input).export();\n-                break;\n-            case EXPORT_DEFINITION:\n-                new WorkflowExportDefinition(input).export();\n-                break;\n-            case HELP:\n-                System.out.println(getHelpMessage());\n-                break;\n-            default:\n-                workflowResultManager.defaultOptionMessage(input.getOption(), getHelpMessage());\n-        }\n-    }\n-\n-    @Override\n-    public String getHelpMessage() {\n-        return workflowResultManager.commandHelpMessage(getClass());\n-    }\n-\n-    private enum UserWorkflowOptions {\n-\n-        HELP(\"--help\"),\n-        EXPORT_DIAGRAM(\"--export-diagram\"),\n-        EXPORT_DEFINITION(\"--export-definition\");\n-\n-        private final String optionName;\n-\n-        UserWorkflowOptions(final String optionName) {\n-            this.optionName = optionName;\n-        }\n-\n-        public String getOptionName() {\n-            return optionName;\n-        }\n-\n-        public boolean equalsOptionName(final String otherName) {\n-            return (otherName == null) ? false : optionName.equals(otherName);\n-        }\n-\n-        public static UserWorkflowOptions fromName(final String name) {\n-            UserWorkflowOptions optionToReturn = HELP;\n-            for (final UserWorkflowOptions option : UserWorkflowOptions.values()) {\n-                if (option.equalsOptionName(name)) {\n-                    optionToReturn = option;\n-                }\n-            }\n-            return optionToReturn;\n-        }\n-\n-        public static List<String> toList() {\n-            final List<String> options = new ArrayList<>();\n-            for (final UserWorkflowOptions value : values()) {\n-                options.add(value.getOptionName());\n-            }\n-            return options;\n-        }\n-    }\n-}"},{"sha":"b855ae0c8614e1b593388425695d08b9dd6d1149","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowExportDefinition.java","status":"removed","additions":0,"deletions":61,"changes":61,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDefinition.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDefinition.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDefinition.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,61 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.cli.commands.self;\n-\n-import javax.xml.ws.WebServiceException;\n-import org.apache.syncope.client.cli.Input;\n-import org.apache.syncope.client.cli.util.CommandUtils;\n-import org.apache.syncope.common.lib.SyncopeClientException;\n-import org.apache.syncope.common.lib.types.AnyTypeKind;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class WorkflowExportDefinition extends AbstractWorkflowCommand {\n-\n-    private static final Logger LOG = LoggerFactory.getLogger(WorkflowExportDefinition.class);\n-\n-    private static final String EXPORT_HELP_MESSAGE = \"workflow --export-definition {ANY-TYPE-KIND}\\n\";\n-\n-    private final Input input;\n-\n-    public WorkflowExportDefinition(final Input input) {\n-        this.input = input;\n-    }\n-\n-    public void export() {\n-        if (input.parameterNumber() == 1) {\n-            try {\n-                workflowSyncopeOperations.exportDefinition(input.firstParameter());\n-            } catch (final SyncopeClientException | WebServiceException ex) {\n-                LOG.error(\"Error\", ex);\n-                if (ex.getMessage().startsWith(\"NotFound\")) {\n-                    workflowResultManager.notFoundError(\"Workflow\", input.firstParameter());\n-                } else {\n-                    workflowResultManager.genericError(ex.getMessage());\n-                }\n-            } catch (final IllegalArgumentException ex) {\n-                LOG.error(\"Error\", ex);\n-                workflowResultManager.typeNotValidError(\n-                        \"workflow\", input.firstParameter(), CommandUtils.fromEnumToArray(AnyTypeKind.class));\n-            }\n-        } else {\n-            workflowResultManager.commandOptionError(EXPORT_HELP_MESSAGE);\n-        }\n-    }\n-}"},{"sha":"80b6e4178750e8f2d6dd4e5a7787f9f912e6d464","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowExportDiagram.java","status":"removed","additions":0,"deletions":70,"changes":70,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,70 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.cli.commands.self;\n-\n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.io.OutputStream;\n-import java.nio.file.Files;\n-import java.nio.file.Paths;\n-import javax.ws.rs.core.Response;\n-import javax.xml.ws.WebServiceException;\n-import org.apache.cxf.helpers.IOUtils;\n-import org.apache.syncope.client.cli.Input;\n-import org.apache.syncope.client.cli.util.CommandUtils;\n-import org.apache.syncope.common.lib.SyncopeClientException;\n-import org.apache.syncope.common.lib.types.AnyTypeKind;\n-\n-public class WorkflowExportDiagram extends AbstractWorkflowCommand {\n-\n-    private static final String EXPORT_HELP_MESSAGE = \"workflow --export-diagram {ANY-TYPE-KIND}\\n\";\n-\n-    private final Input input;\n-\n-    public WorkflowExportDiagram(final Input input) {\n-        this.input = input;\n-    }\n-\n-    public void export() {\n-        if (input.parameterNumber() == 1) {\n-            try {\n-                final Response response = workflowSyncopeOperations.exportDiagram(input.firstParameter());\n-                final byte[] diagram = IOUtils.readBytesFromStream((InputStream) response.getEntity());\n-                try (final OutputStream os = Files.newOutputStream(Paths.get(\"/tmp/diagram.png\"))) {\n-                    os.write(diagram);\n-                    os.close();\n-                }\n-                workflowResultManager.genericMessage(\"Diagram created: /tmp/diagram.png\");\n-            } catch (final SyncopeClientException | WebServiceException ex) {\n-                if (ex.getMessage().startsWith(\"NotFound\")) {\n-                    workflowResultManager.notFoundError(\"Workflow\", input.firstParameter());\n-                } else {\n-                    workflowResultManager.genericError(ex.getMessage());\n-                }\n-            } catch (final IllegalArgumentException ex) {\n-                workflowResultManager.typeNotValidError(\n-                        \"workflow\", input.firstParameter(), CommandUtils.fromEnumToArray(AnyTypeKind.class));\n-            } catch (final IOException ex) {\n-                workflowResultManager.genericError(ex.getMessage());\n-            }\n-        } else {\n-            workflowResultManager.commandOptionError(EXPORT_HELP_MESSAGE);\n-        }\n-    }\n-}"},{"sha":"f46be0786c9f6b2b2520b147b5eef03a4686edd2","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowResultManager.java","status":"removed","additions":0,"deletions":25,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowResultManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowResultManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowResultManager.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,25 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.cli.commands.self;\n-\n-import org.apache.syncope.client.cli.commands.CommonsResultManager;\n-\n-public class WorkflowResultManager extends CommonsResultManager {\n-\n-}"},{"sha":"7bd62fa2766f6055a6c84f8ca5468a3246d77f2e","filename":"client/cli/src/main/resources/messages.properties","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fresources%2Fmessages.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Fmain%2Fresources%2Fmessages.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fresources%2Fmessages.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -31,5 +31,4 @@ role.help.message=\\nUsage: role [options]\\n  Options:\\n    --help \\n    --detail\n schema.help.message=\\nUsage: schema [options]\\n  Options:\\n    --help \\n    --details \\n    --list-all\\n    --list-plain\\n    --list-derived\\n    --list-virtual\\n    --read {SCHEMA-TYPE} {SCHEMA-KEY}\\n        Schema type: PLAIN / DERIVED / VIRTUAL\\n    --delete {SCHEMA-TYPE} {SCHEMA-KEY}\\n        Schema type: PLAIN / DERIVED / VIRTUAL\\n\n task.help.message=\\nUsage: task [options]\\n  Options:\\n    --help \\n    --details\\n    --list\\n       Syntax: --list {TASK-TYPE} \\n          Task type: NOTIFICATION / PROPAGATION / PUSH / SCHEDULED / PULL\\n    --list-running-jobs \\n    --list-scheduled-jobs \\n    --read \\n       Syntax: --read {TASK-TYPE} {TASK-KEY}\\n   Task type:  PROPAGATION / NOTIFICATION / SCHEDULED / PULL / PUSH\\n    --delete \\n       Syntax: --delete {TASK-KEY} {TASK-KEY} [...]\\n    --delete-all-prop\\n    --delete-execution \\n       Syntax: --delete-execution {TASK-EXEC-KEY} {TASK-EXEC-KEY} [...]\\n    --execute \\n       Syntax: --execute {TASK-KEY} {DRY-RUN}\\n          Dry run: true / false\\n\n user.help.message=\\nUsage: user [options]\\n  Options:\\n    --help \\n    --details \\n    --list \\n    --get-user-key\\n       Syntax: --get-user-key {USERNAME}\\n    --get-username\\n       Syntax: --get-username {USER-KEY}\\n    --read-by-userkey \\n       Syntax: --read-by-userkey {USER-KEY} {USER-KEY} [...]\\n    --read-by-username\\n       Syntax: --read-by-username {USERNAME} {USERNAME} [...]\\n    --search-by-attribute \\n       Syntax: --search-by-attribute {REALM} {ATTR-NAME}={ATTR-VALUE}\\n    --search-by-role \\n       Syntax: --search-by-role {REALM} {ROLE-KEY}\\n    --search-by-resource \\n       Syntax: --search-by-resource {REALM} {RESOURCE-KEY}\\n    --delete \\n       Syntax: --delete {USER-KEY} {USER-KEY} [...]\\n    --delete-all \\n       Syntax: --delete-all {REALM}\\n    --delete-by-attribute \\n       Syntax: --delete-by-attribute {REALM} {ATTR-NAME}={ATTR-VALUE}\\n\n-workflow.help.message=\\nUsage: workflow [options]\\n  Options:\\n    --help \\n    --export-diagram {ANY-TYPE-KIND}\\n        Any type kind: ANY_OBJECT / USER / GROUP\\n    --export-definition {ANY-TYPE-KIND}\\n        Any type kind: ANY_OBJECT / USER / GROUP\\n\n migrate.help.message=\\nUsage: migrate [options]\\n  Options:\\n    --help \\n    --conf {SRC} {DST}\\n        Syncope 1.2.X content.xml SRC absolute path\\n        Syncope 2.0.X *Content.xml DST absolute path\\n"},{"sha":"c75273875b0ec28e24ee9e134d79af8b3e3ade10","filename":"client/cli/src/test/java/org/apache/syncope/client/cli/util/CommandUtilsTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Futil%2FCommandUtilsTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fcli%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Futil%2FCommandUtilsTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Futil%2FCommandUtilsTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -49,6 +49,6 @@ public void fromArgs() throws Exception {\n     public void commands() throws Exception {\n         List<AbstractCommand> commands = CommandUtils.commands();\n         assertFalse(commands.isEmpty());\n-        assertEquals(21, commands.size());\n+        assertEquals(20, commands.size());\n     }\n }"},{"sha":"cb866c03ef301c4eca4e2bbd9e8dbc25bdbf1f04","filename":"client/console/src/main/java/org/apache/syncope/client/console/SyncopeConsoleApplication.java","status":"modified","additions":16,"deletions":38,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -35,16 +35,14 @@\n import org.apache.commons.lang3.BooleanUtils;\n import org.apache.commons.lang3.ClassUtils;\n import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.client.console.annotations.Resource;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.init.ClassPathScanImplementationLookup;\n import org.apache.syncope.client.console.init.ConsoleInitializer;\n import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.pages.Dashboard;\n import org.apache.syncope.client.console.pages.MustChangePassword;\n import org.apache.syncope.client.console.pages.Login;\n-import org.apache.syncope.client.console.resources.FilesystemResource;\n-import org.apache.syncope.client.console.resources.WorkflowDefGETResource;\n-import org.apache.syncope.client.console.resources.WorkflowDefPUTResource;\n import org.apache.syncope.client.console.themes.AdminLTE;\n import org.apache.syncope.client.lib.AnonymousAuthenticationHandler;\n import org.apache.syncope.client.lib.SyncopeClientFactoryBean;\n@@ -61,6 +59,7 @@\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.protocol.http.CsrfPreventionRequestCycleListener;\n import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.request.resource.ResourceReference;\n import org.apache.wicket.resource.DynamicJQueryResourceReference;\n@@ -79,8 +78,6 @@ public class SyncopeConsoleApplication extends AuthenticatedWebApplication {\n                 Locale.ENGLISH, Locale.ITALIAN, new Locale(\"pt\", \"BR\"), new Locale(\"ru\"), Locale.JAPANESE\n             }));\n \n-    private static final String FLOWABLE_MODELER_CONTEXT = \"flowable-modeler\";\n-\n     public static SyncopeConsoleApplication get() {\n         return (SyncopeConsoleApplication) WebApplication.get();\n     }\n@@ -91,8 +88,6 @@ public static SyncopeConsoleApplication get() {\n \n     private String anonymousKey;\n \n-    private String flowableModelerDirectory;\n-\n     private String reconciliationReportKey;\n \n     private String scheme;\n@@ -203,44 +198,31 @@ protected void init() {\n \n         mountPage(\"/login\", getSignInPageClass());\n \n-        flowableModelerDirectory = props.getProperty(\"flowableModelerDirectory\");\n-        Args.notNull(flowableModelerDirectory, \"<flowableModelerDirectory>\");\n-\n         try {\n             reconciliationReportKey = props.getProperty(\"reconciliationReportKey\");\n         } catch (NumberFormatException e) {\n             LOG.error(\"While parsing reconciliationReportKey\", e);\n         }\n         Args.notNull(reconciliationReportKey, \"<reconciliationReportKey>\");\n \n-        mountResource(\"/\" + FLOWABLE_MODELER_CONTEXT, new ResourceReference(FLOWABLE_MODELER_CONTEXT) {\n+        for (Class<? extends AbstractResource> resource : lookup.getResources()) {\n+            Resource annotation = resource.getAnnotation(Resource.class);\n+            try {\n+                AbstractResource instance = resource.getDeclaredConstructor().newInstance();\n \n-            private static final long serialVersionUID = -128426276529456602L;\n+                mountResource(annotation.path(), new ResourceReference(annotation.key()) {\n \n-            @Override\n-            public IResource getResource() {\n-                return new FilesystemResource(FLOWABLE_MODELER_CONTEXT, flowableModelerDirectory);\n-            }\n+                    private static final long serialVersionUID = -128426276529456602L;\n \n-        });\n-        mountResource(\"/workflowDefGET\", new ResourceReference(\"workflowDefGET\") {\n-\n-            private static final long serialVersionUID = -128426276529456602L;\n-\n-            @Override\n-            public IResource getResource() {\n-                return new WorkflowDefGETResource();\n-            }\n-        });\n-        mountResource(\"/workflowDefPUT\", new ResourceReference(\"workflowDefPUT\") {\n-\n-            private static final long serialVersionUID = -128426276529456602L;\n-\n-            @Override\n-            public IResource getResource() {\n-                return new WorkflowDefPUTResource();\n+                    @Override\n+                    public IResource getResource() {\n+                        return instance;\n+                    }\n+                });\n+            } catch (Exception e) {\n+                LOG.error(\"Could not instantiate {}\", resource.getName(), e);\n             }\n-        });\n+        }\n \n         // enable component path\n         if (getDebugSettings().isAjaxDebugModeEnabled()) {\n@@ -282,10 +264,6 @@ public String getAnonymousKey() {\n         return anonymousKey;\n     }\n \n-    public String getFlowableModelerDirectory() {\n-        return flowableModelerDirectory;\n-    }\n-\n     public String getReconciliationReportKey() {\n         return reconciliationReportKey;\n     }"},{"sha":"ebdba5939e1b9b8348f7a67aa364a739b5212990","filename":"client/console/src/main/java/org/apache/syncope/client/console/annotations/Resource.java","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fannotations%2FResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fannotations%2FResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fannotations%2FResource.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,41 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.annotations;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+@Target({ ElementType.TYPE })\n+@Retention(RetentionPolicy.RUNTIME)\n+@Documented\n+public @interface Resource {\n+\n+    /**\n+     * @return string for {@link org.apache.wicket.request.resource.ResourceReference#ResourceReference}\n+     */\n+    String key();\n+\n+    /**\n+     * @return path for{@link org.apache.wicket.protocol.http.WebApplication#mountResource}\n+     */\n+    String path();\n+}"},{"sha":"48b581377688b167d86c8fb5dfddcc3de1286ef0","filename":"client/console/src/main/java/org/apache/syncope/client/console/commons/Constants.java","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FConstants.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FConstants.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FConstants.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -37,8 +37,6 @@ public final class Constants {\n \n     public static final String VEIL_INDICATOR_MARKUP_ID = \"veil\";\n \n-    public static final String FLOWABLE_MODELER_CONTEXT = \"flowable-modeler\";\n-\n     public static final String MODELER_CONTEXT = \"modelerContext\";\n \n     public static final String MODEL_ID_PARAM = \"modelId\";"},{"sha":"edb7b61173980b80c1fa04e7d5fdf94443ff4693","filename":"client/console/src/main/java/org/apache/syncope/client/console/init/ClassPathScanImplementationLookup.java","status":"modified","additions":48,"deletions":8,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FClassPathScanImplementationLookup.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FClassPathScanImplementationLookup.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FClassPathScanImplementationLookup.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -34,10 +34,12 @@\n import org.apache.syncope.client.console.annotations.BinaryPreview;\n import org.apache.syncope.client.console.annotations.ExtPage;\n import org.apache.syncope.client.console.annotations.ExtWidget;\n+import org.apache.syncope.client.console.annotations.Resource;\n import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.panels.SSOLoginFormPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.preview.AbstractBinaryPreviewer;\n import org.apache.syncope.client.console.widgets.BaseExtWidget;\n+import org.apache.syncope.client.console.widgets.ExtAlertWidget;\n import org.apache.syncope.common.lib.policy.AccountRuleConf;\n import org.apache.syncope.common.lib.policy.PasswordRuleConf;\n import org.apache.syncope.common.lib.policy.PullCorrelationRuleConf;\n@@ -46,6 +48,7 @@\n import org.apache.syncope.common.lib.to.AnyObjectTO;\n import org.apache.syncope.common.lib.to.GroupTO;\n import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.wicket.request.resource.AbstractResource;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n@@ -93,6 +96,8 @@ private static void initFieldNames(final Class<?> entityClass, final Set<String>\n \n     private List<Class<? extends BaseExtWidget>> extWidgets;\n \n+    private List<Class<? extends ExtAlertWidget<?>>> extAlertWidgets;\n+\n     private List<Class<? extends SSOLoginFormPanel>> ssoLoginFormPanels;\n \n     private Map<String, Class<? extends ReportletConf>> reportletConfs;\n@@ -105,6 +110,8 @@ private static void initFieldNames(final Class<?> entityClass, final Set<String>\n \n     private Map<String, Class<? extends PushCorrelationRuleConf>> pushCorrelationRuleConfs;\n \n+    private List<Class<? extends AbstractResource>> resources;\n+\n     /**\n      * This method can be overridden by subclasses to customize classpath scan.\n      *\n@@ -120,24 +127,28 @@ public void load() {\n         previewers = new ArrayList<>();\n         extPages = new ArrayList<>();\n         extWidgets = new ArrayList<>();\n+        extAlertWidgets = new ArrayList<>();\n         ssoLoginFormPanels = new ArrayList<>();\n         reportletConfs = new HashMap<>();\n         accountRuleConfs = new HashMap<>();\n         passwordRuleConfs = new HashMap<>();\n         pullCorrelationRuleConfs = new HashMap<>();\n         pushCorrelationRuleConfs = new HashMap<>();\n+        resources = new ArrayList<>();\n \n         ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);\n         scanner.addIncludeFilter(new AssignableTypeFilter(BasePage.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(AbstractBinaryPreviewer.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(BaseExtPage.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(BaseExtWidget.class));\n+        scanner.addIncludeFilter(new AssignableTypeFilter(ExtAlertWidget.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(SSOLoginFormPanel.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(ReportletConf.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(AccountRuleConf.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(PasswordRuleConf.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(PullCorrelationRuleConf.class));\n         scanner.addIncludeFilter(new AssignableTypeFilter(PushCorrelationRuleConf.class));\n+        scanner.addIncludeFilter(new AssignableTypeFilter(AbstractResource.class));\n \n         scanner.findCandidateComponents(getBasePackage()).forEach(bd -> {\n             try {\n@@ -160,6 +171,13 @@ public void load() {\n                             LOG.error(\"Could not find annotation {} in {}, ignoring\",\n                                     ExtWidget.class.getName(), clazz.getName());\n                         }\n+                    } else if (ExtAlertWidget.class.isAssignableFrom(clazz)) {\n+                        if (clazz.isAnnotationPresent(ExtWidget.class)) {\n+                            extAlertWidgets.add((Class<? extends ExtAlertWidget<?>>) clazz);\n+                        } else {\n+                            LOG.error(\"Could not find annotation {} in {}, ignoring\",\n+                                    ExtWidget.class.getName(), clazz.getName());\n+                        }\n                     } else if (BasePage.class.isAssignableFrom(clazz)) {\n                         pages.add((Class<? extends BasePage>) clazz);\n                     } else if (AbstractBinaryPreviewer.class.isAssignableFrom(clazz)) {\n@@ -176,6 +194,13 @@ public void load() {\n                         pullCorrelationRuleConfs.put(clazz.getName(), (Class<? extends PullCorrelationRuleConf>) clazz);\n                     } else if (PushCorrelationRuleConf.class.isAssignableFrom(clazz)) {\n                         pushCorrelationRuleConfs.put(clazz.getName(), (Class<? extends PushCorrelationRuleConf>) clazz);\n+                    } else if (AbstractResource.class.isAssignableFrom(clazz)) {\n+                        if (clazz.isAnnotationPresent(Resource.class)) {\n+                            resources.add((Class<? extends AbstractResource>) clazz);\n+                        } else {\n+                            LOG.error(\"Could not find annotation {} in {}, ignoring\",\n+                                    Resource.class.getName(), clazz.getName());\n+                        }\n                     }\n                 }\n             } catch (Throwable t) {\n@@ -185,18 +210,21 @@ public void load() {\n         pages = Collections.unmodifiableList(pages);\n         previewers = Collections.unmodifiableList(previewers);\n \n-        Collections.sort(extPages, (o1, o2)\n-                -> ObjectUtils.compare(\n-                        o1.getAnnotation(ExtPage.class).priority(),\n-                        o2.getAnnotation(ExtPage.class).priority()));\n+        extPages.sort((o1, o2) -> ObjectUtils.compare(\n+                o1.getAnnotation(ExtPage.class).priority(),\n+                o2.getAnnotation(ExtPage.class).priority()));\n         extPages = Collections.unmodifiableList(extPages);\n \n-        Collections.sort(extWidgets, (o1, o2)\n-                -> ObjectUtils.compare(\n-                        o1.getAnnotation(ExtWidget.class).priority(),\n-                        o2.getAnnotation(ExtWidget.class).priority()));\n+        extWidgets.sort((o1, o2) -> ObjectUtils.compare(\n+                o1.getAnnotation(ExtWidget.class).priority(),\n+                o2.getAnnotation(ExtWidget.class).priority()));\n         extWidgets = Collections.unmodifiableList(extWidgets);\n \n+        extAlertWidgets.sort((o1, o2) -> ObjectUtils.compare(\n+                o1.getAnnotation(ExtWidget.class).priority(),\n+                o2.getAnnotation(ExtWidget.class).priority()));\n+        extAlertWidgets = Collections.unmodifiableList(extAlertWidgets);\n+\n         ssoLoginFormPanels = Collections.unmodifiableList(ssoLoginFormPanels);\n \n         reportletConfs = Collections.unmodifiableMap(reportletConfs);\n@@ -205,15 +233,19 @@ public void load() {\n         pullCorrelationRuleConfs = Collections.unmodifiableMap(pullCorrelationRuleConfs);\n         pushCorrelationRuleConfs = Collections.unmodifiableMap(pushCorrelationRuleConfs);\n \n+        resources = Collections.unmodifiableList(resources);\n+\n         LOG.debug(\"Binary previewers found: {}\", previewers);\n         LOG.debug(\"Extension pages found: {}\", extPages);\n         LOG.debug(\"Extension widgets found: {}\", extWidgets);\n+        LOG.debug(\"Extension alert widgets found: {}\", extAlertWidgets);\n         LOG.debug(\"SSO Login pages found: {}\", ssoLoginFormPanels);\n         LOG.debug(\"Reportlet configurations found: {}\", reportletConfs);\n         LOG.debug(\"Account Rule configurations found: {}\", accountRuleConfs);\n         LOG.debug(\"Password Rule configurations found: {}\", passwordRuleConfs);\n         LOG.debug(\"Pull Correlation Rule configurations found: {}\", pullCorrelationRuleConfs);\n         LOG.debug(\"Push Correlation Rule configurations found: {}\", pushCorrelationRuleConfs);\n+        LOG.debug(\"Resources found: {}\", resources);\n     }\n \n     public Class<? extends AbstractBinaryPreviewer> getPreviewerClass(final String mimeType) {\n@@ -242,6 +274,10 @@ public List<Class<? extends BaseExtWidget>> getExtWidgetClasses() {\n         return extWidgets;\n     }\n \n+    public List<Class<? extends ExtAlertWidget<?>>> getExtAlertWidgetClasses() {\n+        return extAlertWidgets;\n+    }\n+\n     public List<Class<? extends SSOLoginFormPanel>> getSSOLoginFormPanels() {\n         return ssoLoginFormPanels;\n     }\n@@ -265,4 +301,8 @@ public Map<String, Class<? extends PullCorrelationRuleConf>> getPullCorrelationR\n     public Map<String, Class<? extends PushCorrelationRuleConf>> getPushCorrelationRuleConfs() {\n         return pushCorrelationRuleConfs;\n     }\n+\n+    public List<Class<? extends AbstractResource>> getResources() {\n+        return resources;\n+    }\n }"},{"sha":"a4ef3f08b71d39d2bbcc324686f6f61d04e3a323","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/BasePage.java","status":"modified","additions":30,"deletions":22,"changes":52,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -19,6 +19,7 @@\n package org.apache.syncope.client.console.pages;\n \n import java.io.Serializable;\n+import java.lang.reflect.Constructor;\n import java.util.List;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.BookmarkablePageLinkBuilder;\n@@ -34,14 +35,15 @@\n import org.apache.syncope.client.console.topology.Topology;\n import org.apache.syncope.client.console.wicket.markup.head.MetaHeaderItem;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n-import org.apache.syncope.client.console.widgets.ApprovalsWidget;\n+import org.apache.syncope.client.console.widgets.ExtAlertWidget;\n import org.apache.syncope.client.console.widgets.RemediationsWidget;\n import org.apache.syncope.common.lib.info.PlatformInfo;\n import org.apache.syncope.common.lib.info.SystemInfo;\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.wicket.AttributeModifier;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.IAjaxIndicatorAware;\n import org.apache.wicket.ajax.attributes.AjaxCallListener;\n@@ -81,8 +83,6 @@ public class BasePage extends WebPage implements IAjaxIndicatorAware {\n \n     protected NotificationPanel notificationPanel;\n \n-    protected ApprovalsWidget approvalsWidget;\n-\n     protected RemediationsWidget remediationWidget;\n \n     public BasePage() {\n@@ -108,9 +108,6 @@ public BasePage(final PageParameters parameters) {\n         remediationWidget = new RemediationsWidget(\"remediationWidget\", getPageReference());\n         body.add(remediationWidget.setRenderBodyOnly(true));\n \n-        approvalsWidget = new ApprovalsWidget(\"approvalsWidget\", getPageReference());\n-        body.add(approvalsWidget.setRenderBodyOnly(true));\n-\n         // right sidebar\n         PlatformInfo platformInfo = SyncopeConsoleSession.get().getPlatformInfo();\n         Label version = new Label(\"version\", platformInfo.getVersion());\n@@ -187,14 +184,6 @@ public void onClick() {\n         WebMarkupContainer confULContainer = new WebMarkupContainer(getULContainerId(\"configuration\"));\n         confLIContainer.add(confULContainer);\n \n-        liContainer = new WebMarkupContainer(getLIContainerId(\"workflow\"));\n-        liContainer.setOutputMarkupPlaceholderTag(true);\n-        liContainer.setVisible(platformInfo.getUserWorkflowAdapter().contains(\"Flowable\"));\n-        confULContainer.add(liContainer);\n-        link = BookmarkablePageLinkBuilder.build(\"workflow\", Workflow.class);\n-        MetaDataRoleAuthorizationStrategy.authorize(link, WebPage.RENDER, StandardEntitlement.WORKFLOW_DEF_GET);\n-        liContainer.add(link);\n-\n         liContainer = new WebMarkupContainer(getLIContainerId(\"audit\"));\n         confULContainer.add(liContainer);\n         link = BookmarkablePageLinkBuilder.build(\"audit\", Audit.class);\n@@ -331,10 +320,33 @@ public void onComponentTag(final Component component, final ComponentTag tag) {\n         }\n \n         // Extensions\n-        ClassPathScanImplementationLookup classPathScanImplementationLookup =\n-                (ClassPathScanImplementationLookup) SyncopeConsoleApplication.get().\n-                        getServletContext().getAttribute(ConsoleInitializer.CLASSPATH_LOOKUP);\n-        List<Class<? extends BaseExtPage>> extPageClasses = classPathScanImplementationLookup.getExtPageClasses();\n+        ClassPathScanImplementationLookup lookup = (ClassPathScanImplementationLookup) SyncopeConsoleApplication.get().\n+                getServletContext().getAttribute(ConsoleInitializer.CLASSPATH_LOOKUP);\n+\n+        List<Class<? extends ExtAlertWidget<?>>> extAlertWidgetClasses = lookup.getExtAlertWidgetClasses();\n+        ListView<Class<? extends ExtAlertWidget<?>>> extAlertWidgets = new ListView<Class<? extends ExtAlertWidget<?>>>(\n+                \"extAlertWidgets\", extAlertWidgetClasses) {\n+\n+            private static final long serialVersionUID = -9112553137618363167L;\n+\n+            @Override\n+            protected void populateItem(final ListItem<Class<? extends ExtAlertWidget<?>>> item) {\n+                try {\n+                    Constructor<? extends ExtAlertWidget<?>> constructor =\n+                            item.getModelObject().getDeclaredConstructor(String.class, PageReference.class);\n+                    ExtAlertWidget<?> widget = constructor.newInstance(\"extAlertWidget\", getPageReference());\n+\n+                    SyncopeConsoleSession.get().setAttribute(widget.getClass().getName(), widget);\n+\n+                    item.add(widget.setRenderBodyOnly(true));\n+                } catch (Exception e) {\n+                    LOG.error(\"Could not instantiate {}\", item.getModelObject().getName(), e);\n+                }\n+            }\n+        };\n+        body.add(extAlertWidgets);\n+\n+        List<Class<? extends BaseExtPage>> extPageClasses = lookup.getExtPageClasses();\n \n         WebMarkupContainer extensionsLI = new WebMarkupContainer(getLIContainerId(\"extensions\"));\n         extensionsLI.setOutputMarkupPlaceholderTag(true);\n@@ -431,10 +443,6 @@ public RemediationsWidget getRemediationWidget() {\n         return remediationWidget;\n     }\n \n-    public ApprovalsWidget getApprovalsWidget() {\n-        return approvalsWidget;\n-    }\n-\n     /**\n      * Set a WindowClosedCallback for a Modal instance.\n      *"},{"sha":"8cd3fb83c5a5b655cfafb09ddd381ce4fce421de","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/ParametersDirectoryPanel.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FParametersDirectoryPanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -166,7 +166,6 @@ public void populateItem(\n                     super.populateItem(item, componentId, rowModel);\n                 }\n             }\n-\n         });\n         return columns;\n     }"},{"sha":"fb8047c4215c81131fbdd73a07f5d1dbe1789288","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/TogglePanel.java","status":"modified","additions":0,"deletions":6,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FTogglePanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -42,8 +42,6 @@\n import org.apache.syncope.common.lib.to.ProvisioningTaskTO;\n import org.apache.syncope.common.lib.to.SecurityQuestionTO;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n import org.apache.wicket.AttributeModifier;\n import org.apache.wicket.Component;\n import org.apache.wicket.PageReference;\n@@ -202,12 +200,8 @@ private String getTargetKey(final Serializable modelObject) {\n             key = ((AccessTokenTO) modelObject).getKey();\n         } else if (modelObject instanceof ExecTO) {\n             key = ((ExecTO) modelObject).getKey();\n-        } else if (modelObject instanceof WorkflowDefinitionTO) {\n-            key = ((WorkflowDefinitionTO) modelObject).getKey();\n         } else if (modelObject instanceof ProvisioningTaskTO) {\n             key = ((ProvisioningTaskTO) modelObject).getKey();\n-        } else if (modelObject instanceof WorkflowFormTO) {\n-            key = ((WorkflowFormTO) modelObject).getKey();\n         } else if (modelObject instanceof EntityTO) {\n             key = ((EntityTO) modelObject).getKey();\n         } else if (modelObject instanceof StatusBean) {"},{"sha":"f8dc13df20eccea862c71c1403f58d1f3838f2d1","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/FilesystemResource.java","status":"removed","additions":0,"deletions":79,"changes":79,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,79 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.console.resources;\n-\n-import java.io.File;\n-import java.io.InputStream;\n-import java.io.IOException;\n-import java.nio.charset.StandardCharsets;\n-import java.nio.file.Files;\n-import org.apache.wicket.request.resource.AbstractResource;\n-import org.apache.wicket.util.io.IOUtils;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-/**\n- * Mounts directory on local filesystem as subcontext.\n- */\n-public class FilesystemResource extends AbstractResource {\n-\n-    private static final long serialVersionUID = -4791087117785935198L;\n-\n-    private static final Logger LOG = LoggerFactory.getLogger(FilesystemResource.class);\n-\n-    private final String baseCtx;\n-\n-    private final String basePath;\n-\n-    public FilesystemResource(final String baseCtx, final String basePath) {\n-        this.baseCtx = baseCtx;\n-        this.basePath = basePath;\n-    }\n-\n-    @Override\n-    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n-        ResourceResponse response = new ResourceResponse();\n-\n-        final File baseDir = new File(basePath);\n-        if (baseDir.exists() && baseDir.canRead() && baseDir.isDirectory()) {\n-            String reqPath = attributes.getRequest().getUrl().getPath();\n-            final String subPath = reqPath.substring(reqPath.indexOf(baseCtx) + baseCtx.length()).\n-                    replace('/', File.separatorChar);\n-            LOG.debug(\"Request for {}\", subPath);\n-\n-            response.setTextEncoding(StandardCharsets.UTF_8.name());\n-            response.setWriteCallback(new WriteCallback() {\n-\n-                @Override\n-                public void writeData(final Attributes attributes) throws IOException {\n-                    try (InputStream resourceIS = Files.newInputStream(new File(baseDir, subPath).toPath())) {\n-                        IOUtils.copy(resourceIS, attributes.getResponse().getOutputStream());\n-                    } catch (IOException e) {\n-                        LOG.error(\"Could not read from {}\", baseDir.getAbsolutePath() + subPath, e);\n-                    }\n-                }\n-            });\n-        } else {\n-            LOG.error(\"{} not found, not readable or not a directory\", basePath);\n-        }\n-\n-        return response;\n-    }\n-\n-}"},{"sha":"8ccf057f7583730e0edb3d3b323cb66094581d1a","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/UserWorkflowRestClient.java","status":"removed","additions":0,"deletions":59,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,59 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.console.rest;\n-\n-import java.util.List;\n-import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.rest.api.beans.WorkflowFormQuery;\n-import org.apache.syncope.common.rest.api.service.UserWorkflowService;\n-import org.apache.wicket.extensions.markup.html.repeater.util.SortParam;\n-\n-public class UserWorkflowRestClient extends BaseRestClient {\n-\n-    private static final long serialVersionUID = -4785231164900813921L;\n-\n-    public int countForms() {\n-        return getService(UserWorkflowService.class).\n-                getForms(new WorkflowFormQuery.Builder().page(1).size(1).build()).\n-                getTotalCount();\n-    }\n-\n-    public List<WorkflowFormTO> getForms(final int page, final int size, final SortParam<String> sort) {\n-        return getService(UserWorkflowService.class).\n-                getForms(new WorkflowFormQuery.Builder().page(page).size(size).orderBy(toOrderBy(sort)).build()).\n-                getResult();\n-    }\n-\n-    public WorkflowFormTO getFormForUser(final String userKey) {\n-        return getService(UserWorkflowService.class).getFormForUser(userKey);\n-    }\n-\n-    public WorkflowFormTO claimForm(final String taskKey) {\n-        return getService(UserWorkflowService.class).claimForm(taskKey);\n-    }\n-\n-    public void submitForm(final WorkflowFormTO form) {\n-        getService(UserWorkflowService.class).submitForm(form);\n-    }\n-\n-    public UserTO executeTask(final String taskId, final UserTO form) {\n-        return getService(UserWorkflowService.class).executeTask(taskId, form);\n-    }\n-}"},{"sha":"7f8ade0221a63efa05448e939691ee97783065bb","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLink.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -98,11 +98,11 @@ public enum ActionType {\n         NOTIFICATION_TASKS(\"read\"),\n         ZOOM_IN(\"zoomin\"),\n         ZOOM_OUT(\"zoomout\"),\n-        WORKFLOW_MODELER(\"workflowModeler\"),\n         VIEW_EXECUTIONS(\"read\"),\n         VIEW_DETAILS(\"read\"),\n         MANAGE_APPROVAL(\"edit\"),\n-        EDIT_APPROVAL(\"edit\");\n+        EDIT_APPROVAL(\"edit\"),\n+        EXTERNAL_EDITOR(\"externalEditor\");\n \n         private final String actionId;\n "},{"sha":"ac3a2565a72786752fae990b26df52aac7856256","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksTogglePanel.java","status":"modified","additions":2,"deletions":6,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksTogglePanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -42,8 +42,6 @@\n import org.apache.syncope.common.lib.to.ExecTO;\n import org.apache.syncope.common.lib.to.JobTO;\n import org.apache.syncope.common.lib.to.ProvisioningTaskTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.event.IEvent;\n@@ -100,12 +98,8 @@ public void updateHeader(final AjaxRequestTarget target, final Serializable mode\n             header = ((AccessTokenTO) modelObject).getOwner();\n         } else if (modelObject instanceof ExecTO) {\n             header = ((ExecTO) modelObject).getKey();\n-        } else if (modelObject instanceof WorkflowDefinitionTO) {\n-            header = ((WorkflowDefinitionTO) modelObject).getName();\n         } else if (modelObject instanceof ProvisioningTaskTO) {\n             header = ((ProvisioningTaskTO) modelObject).getName();\n-        } else if (modelObject instanceof WorkflowFormTO) {\n-            header = ((WorkflowFormTO) modelObject).getKey();\n         } else if (modelObject instanceof EntityTO) {\n             header = ((EntityTO) modelObject).getKey();\n         } else if (modelObject instanceof StatusBean) {\n@@ -121,6 +115,8 @@ public void updateHeader(final AjaxRequestTarget target, final Serializable mode\n                     ? ((JobTO) modelObject).getRefDesc() : ((JobTO) modelObject).getRefKey();\n         } else if (modelObject instanceof ResourceProvision) {\n             header = ((ResourceProvision) modelObject).getAnyType();\n+        } else if (modelObject instanceof EntityTO) {\n+            header = ((EntityTO) modelObject).getKey();\n         } else {\n             header = new ResourceModel(\"actions\", StringUtils.EMPTY).getObject();\n         }"},{"sha":"a4d8775410f56291dfecbb3beb51ef49ddb826db","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -87,7 +87,7 @@ public boolean isEnabled() {\n                 public void onClick(final AjaxRequestTarget target) {\n                 }\n             };\n-        } else if (action.getType() == ActionType.WORKFLOW_MODELER) {\n+        } else if (action.getType() == ActionType.EXTERNAL_EDITOR) {\n             enabled = action.getLink().isEnabled(obj);\n             actionLink = new BookmarkablePageLink<>(\n                     \"action\", action.getLink().getPageClass(), action.getLink().getPageParameters())."},{"sha":"1453fa9896a7a23d90918d05e0dbc17c73ac6c38","filename":"client/console/src/main/java/org/apache/syncope/client/console/widgets/ExtAlertWidget.java","status":"renamed","additions":7,"deletions":4,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FExtAlertWidget.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FExtAlertWidget.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FExtAlertWidget.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,12 +16,15 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.client.cli.commands.self;\n+package org.apache.syncope.client.console.widgets;\n \n-public abstract class AbstractWorkflowCommand {\n+import java.io.Serializable;\n \n-    protected final WorkflowResultManager workflowResultManager = new WorkflowResultManager();\n+public abstract class ExtAlertWidget<T extends Serializable> extends AlertWidget<T> {\n \n-    protected final WorkflowSyncopeOperations workflowSyncopeOperations = new WorkflowSyncopeOperations();\n+    private static final long serialVersionUID = -5622060468533516192L;\n \n+    public ExtAlertWidget(final String id) {\n+        super(id);\n+    }\n }","previous_filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/AbstractWorkflowCommand.java"},{"sha":"f8a6467be96cec1626dbbc746023d41055157243","filename":"client/console/src/main/resources/console.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,15 +33,12 @@ maxWaitTimeOnApplyChanges=30\n \n csrf=true\n \n-flowableModelerDirectory=${flowable-modeler.directory}\n-\n reconciliationReportKey=c3520ad9-179f-49e7-b315-d684d216dd97\n \n page.dashboard=org.apache.syncope.client.console.pages.Dashboard\n page.realms=org.apache.syncope.client.console.pages.Realms\n page.topology=org.apache.syncope.client.console.topology.Topology\n page.reports=org.apache.syncope.client.console.pages.Reports\n-page.workflow=org.apache.syncope.client.console.pages.Workflow\n page.audit=org.apache.syncope.client.console.pages.Audit\n page.implementations=org.apache.syncope.client.console.pages.Implementations\n page.logs=org.apache.syncope.client.console.pages.Logs"},{"sha":"6f01bd9e84b6eff3c173dc777116abda6611e0bb","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/BasePage.html","status":"modified","additions":2,"deletions":3,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -65,8 +65,8 @@\n                 <span wicket:id=\"remediationWidget\"/>\n               </li>\n \n-              <li class=\"dropdown tasks-menu\">\n-                <span wicket:id=\"approvalsWidget\"/>\n+              <li class=\"dropdown tasks-menu\" wicket:id=\"extAlertWidgets\">\n+                <span wicket:id=\"extAlertWidget\"/>\n               </li>\n \n               <li class=\"dropdown user user-menu\">\n@@ -122,7 +122,6 @@\n                 <li wicket:id=\"policiesLI\"><a href=\"#\" wicket:id=\"policies\"><i class=\"fa fa-list\"></i><wicket:message key=\"policies\"/></a></li>\n                 <li wicket:id=\"securityLI\"><a href=\"#\" wicket:id=\"security\"><i class=\"fa fa-lock\"></i><wicket:message key=\"security\"/></a></li>\n                 <li wicket:id=\"typesLI\"><a href=\"#\" wicket:id=\"types\"><i class=\"fa fa-wrench\"></i><wicket:message key=\"types\"/></a></li>\n-                <li wicket:id=\"workflowLI\"><a href=\"#\" wicket:id=\"workflow\"><i class=\"fa fa-briefcase\"></i><wicket:message key=\"workflow\"/></a></li>\n               </ul>\n             </li>\n             <li wicket:id=\"extensionsLI\" class=\"treeview\">"},{"sha":"af1d58007160d25b7a6c5d5da8b925a23961a798","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel.properties","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -262,6 +262,6 @@ zoom_out.class=fa fa-search-minus\n zoom_out.title=zoom-out\n zoom_out.alt=zoom-out icon\n \n-workflow_modeler.class=fa fa-picture-o\n-workflow_modeler.title=workflow modeler\n-workflow_modeler.alt=workflow modeler icon\n+external_editor.class=fa fa-picture-o\n+external_editor.title=external editor\n+external_editor.alt=external modeler icon"},{"sha":"4bfa68635beee8d1e458ca8f4d6cbb905c6cb2d3","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel_it.properties","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -253,9 +253,9 @@ zoom_in.alt=zoom-in icon\n zoom_out.class=fa fa-search-minus\n zoom_out.title=zoom-out\n zoom_out.alt=zoom-out icon\n-workflow_modeler.class=fa fa-picture-o\n-workflow_modeler.title=workflow modeler\n-workflow_modeler.alt=workflow modeler icon\n+external_editor.class=fa fa-picture-o\n+external_editor.title=external editor\n+external_editor.alt=external modeler icon\n reconciliation_push.class=fa fa-chevron-circle-right\n reconciliation_push.title=push\n reconciliation_push.alt=reconciliation push icon"},{"sha":"6b011c7f358b46f8cdac2e463f1c286c5fa0d59d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel_ja.properties","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -254,9 +254,9 @@ zoom_out.class=fa fa-search-minus\n zoom_out.title=\\u30ba\\u30fc\\u30e0\\u30a2\\u30a6\\u30c8\n zoom_out.alt=\\u30ba\\u30fc\\u30e0\\u30a2\\u30a6\\u30c8\n \n-workflow_modeler.class=fa fa-picture-o\n-workflow_modeler.title=\\u30ef\\u30fc\\u30af\\u30d5\\u30ed\\u30fc\\u30e2\\u30c7\\u30e9\\u2015\n-workflow_modeler.alt=\\u30ef\\u30fc\\u30af\\u30d5\\u30ed\\u30fc\\u30e2\\u30c7\\u30e9\\u2015\n+external_editor.class=fa fa-picture-o\n+external_editor.title=external editor\n+external_editor.alt=external modeler icon\n reconciliation_push.class=fa fa-chevron-circle-right\n reconciliation_push.title=push\n reconciliation_push.alt=reconciliation push icon"},{"sha":"b362779e6a661408dd2e5cd4edab7209a985e4bd","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel_pt_BR.properties","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -253,9 +253,9 @@ zoom_in.alt=zoom-in icon\n zoom_out.class=fa fa-search-minus\n zoom_out.title=zoom-out\n zoom_out.alt=zoom-out icon\n-workflow_modeler.class=fa fa-picture-o\n-workflow_modeler.title=workflow modeler\n-workflow_modeler.alt=workflow modeler icon\n+external_editor.class=fa fa-picture-o\n+external_editor.title=external editor\n+external_editor.alt=external modeler icon\n reconciliation_push.class=fa fa-chevron-circle-right\n reconciliation_push.title=push\n reconciliation_push.alt=reconciliation push icon"},{"sha":"dfea5ea906406df4a4866c6ed4169dae10b0984e","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionPanel_ru.properties","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionPanel_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -253,9 +253,9 @@ zoom_in.alt=zoom-in icon\n zoom_out.class=fa fa-search-minus\n zoom_out.title=rimpicciolisci\n zoom_out.alt=zoom-out icon\n-workflow_modeler.class=fa fa-picture-o\n-workflow_modeler.title=workflow modeler\n-workflow_modeler.alt=workflow modeler icon\n+external_editor.class=fa fa-picture-o\n+external_editor.title=external editor\n+external_editor.alt=external modeler icon\n reconciliation_push.class=fa fa-chevron-circle-right\n reconciliation_push.title=push\n reconciliation_push.alt=reconciliation push icon"},{"sha":"207c789a78be39fcab194453eaa030d7e1ae5be8","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/SyncopeEnduserApplication.java","status":"modified","additions":4,"deletions":6,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -268,16 +268,15 @@ public void onFileDelete(final File file) {\n         }\n \n         // mount resources\n-        ClassPathScanImplementationLookup classPathScanImplementationLookup =\n-                (ClassPathScanImplementationLookup) getServletContext().\n-                        getAttribute(EnduserInitializer.CLASSPATH_LOOKUP);\n-        for (final Class<? extends AbstractResource> resource : classPathScanImplementationLookup.getResources()) {\n+        ClassPathScanImplementationLookup lookup = (ClassPathScanImplementationLookup) getServletContext().\n+                getAttribute(EnduserInitializer.CLASSPATH_LOOKUP);\n+        for (Class<? extends AbstractResource> resource : lookup.getResources()) {\n             Resource annotation = resource.getAnnotation(Resource.class);\n             if (annotation == null) {\n                 LOG.debug(\"No @Resource annotation found on {}, ignoring\", resource.getName());\n             } else {\n                 try {\n-                    final AbstractResource instance = resource.getDeclaredConstructor().newInstance();\n+                    AbstractResource instance = resource.getDeclaredConstructor().newInstance();\n \n                     mountResource(annotation.path(), new ResourceReference(annotation.key()) {\n \n@@ -365,5 +364,4 @@ public void setCustomTemplate(final CustomTemplateInfo customTemplate) {\n     public CustomTemplateInfo getCustomTemplate() {\n         return customTemplate;\n     }\n-\n }"},{"sha":"7e2f3238e7ebe1d10f1ee90001b4d4e6d0a7f2f6","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/PropertyUtils.java","status":"modified","additions":12,"deletions":5,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -23,37 +23,44 @@\n import java.io.InputStream;\n import java.util.Properties;\n import org.apache.commons.lang3.tuple.Pair;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n /**\n  * Utility class for manipulating properties files.\n  */\n public final class PropertyUtils {\n \n-    public static Pair<Properties, String> read(\n+    private static final Logger LOG = LoggerFactory.getLogger(PropertyUtils.class);\n+\n+    public static Pair<Properties, File> read(\n             final Class<?> clazz, final String propertiesFileName, final String confDirProp) {\n \n         Properties props = new Properties();\n-        String confDirName = null;\n+        File confDir = null;\n \n         try (InputStream is = clazz.getResourceAsStream(\"/\" + propertiesFileName)) {\n             props.load(is);\n \n-            confDirName = props.getProperty(confDirProp);\n+            String confDirName = props.getProperty(confDirProp);\n             if (confDirName != null) {\n-                File confDir = new File(confDirName);\n+                confDir = new File(confDirName);\n                 if (confDir.exists() && confDir.canRead() && confDir.isDirectory()) {\n                     File confDirProps = new File(confDir, propertiesFileName);\n                     if (confDirProps.exists() && confDirProps.canRead() && confDirProps.isFile()) {\n                         props.clear();\n                         props.load(new FileInputStream(confDirProps));\n                     }\n+                } else {\n+                    confDir = null;\n+                    LOG.warn(\"{} not existing, unreadable or not a directory, ignoring\", confDirName);\n                 }\n             }\n         } catch (Exception e) {\n             throw new RuntimeException(\"Could not read \" + propertiesFileName, e);\n         }\n \n-        return Pair.of(props, confDirName);\n+        return Pair.of(props, confDir);\n     }\n \n     /**"},{"sha":"6d43e1f29842c145b308b2d9900cf2a4e0b77e44","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/report/ReconciliationReportletConf.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FReconciliationReportletConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FReconciliationReportletConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FReconciliationReportletConf.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -40,7 +40,6 @@ public enum Feature {\n         key,\n         username,\n         groupName,\n-        workflowId,\n         status,\n         creationDate,\n         lastLoginDate,"},{"sha":"8f364ecc32a8902a2acdcdfaf170bfc1c340a99c","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/report/UserReportletConf.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FUserReportletConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FUserReportletConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Freport%2FUserReportletConf.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -51,7 +51,6 @@ public enum Feature {\n \n         key,\n         username,\n-        workflowId,\n         status,\n         creator,\n         creationDate,"},{"sha":"69f417ad02289d148326ccf4e3cdb88b1650aad2","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/types/StandardEntitlement.java","status":"modified","additions":0,"deletions":18,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -202,24 +202,6 @@ public final class StandardEntitlement {\n \n     public static final String POLICY_DELETE = \"POLICY_DELETE\";\n \n-    public static final String WORKFLOW_DEF_LIST = \"WORKFLOW_DEF_LIST\";\n-\n-    public static final String WORKFLOW_DEF_GET = \"WORKFLOW_DEF_GET\";\n-\n-    public static final String WORKFLOW_DEF_SET = \"WORKFLOW_DEF_SET\";\n-\n-    public static final String WORKFLOW_DEF_DELETE = \"WORKFLOW_DEF_DELETE\";\n-\n-    public static final String WORKFLOW_TASK_LIST = \"WORKFLOW_TASK_LIST\";\n-\n-    public static final String WORKFLOW_FORM_LIST = \"WORKFLOW_FORM_LIST\";\n-\n-    public static final String WORKFLOW_FORM_READ = \"WORKFLOW_FORM_READ\";\n-\n-    public static final String WORKFLOW_FORM_CLAIM = \"WORKFLOW_FORM_CLAIM\";\n-\n-    public static final String WORKFLOW_FORM_SUBMIT = \"WORKFLOW_FORM_SUBMIT\";\n-\n     public static final String MAIL_TEMPLATE_LIST = \"MAIL_TEMPLATE_LIST\";\n \n     public static final String MAIL_TEMPLATE_CREATE = \"MAIL_TEMPLATE_CREATE\";"},{"sha":"375faf7460c8359bec947d12a178ad7151505569","filename":"common/lib/src/test/java/org/apache/syncope/common/lib/JSONTest.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FJSONTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Flib%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FJSONTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FJSONTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,6 +26,7 @@\n import java.io.IOException;\n import java.io.StringWriter;\n import java.util.UUID;\n+import org.apache.syncope.common.lib.patch.GroupPatch;\n import org.apache.syncope.common.lib.patch.PasswordPatch;\n import org.apache.syncope.common.lib.patch.StringPatchItem;\n import org.apache.syncope.common.lib.patch.StringReplacePatchItem;\n@@ -35,24 +36,23 @@\n import org.apache.syncope.common.lib.to.GroupTO;\n import org.apache.syncope.common.lib.to.PropagationStatus;\n import org.apache.syncope.common.lib.to.ProvisioningResult;\n-import org.apache.syncope.common.lib.to.WorkflowFormPropertyTO;\n import org.apache.syncope.common.lib.types.PatchOperation;\n import org.junit.jupiter.api.Test;\n \n public class JSONTest {\n \n     @Test\n     public void map() throws IOException {\n-        WorkflowFormPropertyTO prop = new WorkflowFormPropertyTO();\n-        prop.getEnumValues().put(\"key1\", \"value1\");\n-        prop.getEnumValues().put(\"key2\", \"value2\");\n+        GroupPatch prop = new GroupPatch();\n+        prop.getADynMembershipConds().put(\"key1\", \"value1\");\n+        prop.getADynMembershipConds().put(\"key2\", \"value2\");\n \n         ObjectMapper mapper = new ObjectMapper();\n \n         StringWriter writer = new StringWriter();\n         mapper.writeValue(writer, prop);\n \n-        WorkflowFormPropertyTO unserializedProp = mapper.readValue(writer.toString(), WorkflowFormPropertyTO.class);\n+        GroupPatch unserializedProp = mapper.readValue(writer.toString(), GroupPatch.class);\n         assertEquals(prop, unserializedProp);\n     }\n "},{"sha":"a7300d79f203ffd36115368bc2d9ec99807963aa","filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/AnyService.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FAnyService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FAnyService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FAnyService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.common.rest.api.service;\n \n+import io.swagger.v3.oas.annotations.Operation;\n import io.swagger.v3.oas.annotations.Parameter;\n import io.swagger.v3.oas.annotations.enums.ParameterIn;\n import io.swagger.v3.oas.annotations.headers.Header;\n@@ -134,6 +135,7 @@ Response update(\n      * @param schemaType schema type\n      * @param schema schema\n      */\n+    @Operation(operationId = \"deleteAttr\")\n     @ApiResponses(\n             @ApiResponse(responseCode = \"204\", description = \"Operation was successful\"))\n     @DELETE\n@@ -150,6 +152,7 @@ void delete(\n      * @param key any object key or name\n      * @return Response object featuring the deleted any object enriched with propagation status information\n      */\n+    @Operation(operationId = \"deleteAny\")\n     @Parameter(name = RESTHeaders.PREFER, in = ParameterIn.HEADER,\n             description = \"Allows client to specify a preference for the result to be returned from the server\",\n             allowEmptyValue = true, schema ="},{"sha":"fc0829a95c9920a1983467d22879f2acb4fb9cdd","filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/SecurityQuestionService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSecurityQuestionService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSecurityQuestionService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSecurityQuestionService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -44,7 +44,7 @@\n import org.apache.syncope.common.rest.api.RESTHeaders;\n \n /**\n- * REST operations for configuration.\n+ * REST operations for security questions.\n  */\n @Tag(name = \"SecurityQuestions\")\n @SecurityRequirements({"},{"sha":"9377628dd706e8134c1b968203a7c5a8d8550ff9","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/SecurityQuestionLogic.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSecurityQuestionLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSecurityQuestionLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSecurityQuestionLogic.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -60,7 +60,7 @@ public SecurityQuestionTO read(final String key) {\n         if (securityQuestion == null) {\n             LOG.error(\"Could not find security question '\" + key + \"'\");\n \n-            throw new NotFoundException(String.valueOf(key));\n+            throw new NotFoundException(key);\n         }\n \n         return binder.getSecurityQuestionTO(securityQuestion);\n@@ -77,7 +77,7 @@ public SecurityQuestionTO update(final SecurityQuestionTO securityQuestionTO) {\n         if (securityQuestion == null) {\n             LOG.error(\"Could not find security question '\" + securityQuestionTO.getKey() + \"'\");\n \n-            throw new NotFoundException(String.valueOf(securityQuestionTO.getKey()));\n+            throw new NotFoundException(securityQuestionTO.getKey());\n         }\n \n         binder.update(securityQuestion, securityQuestionTO);\n@@ -92,7 +92,7 @@ public SecurityQuestionTO delete(final String key) {\n         if (securityQuestion == null) {\n             LOG.error(\"Could not find security question '\" + key + \"'\");\n \n-            throw new NotFoundException(String.valueOf(key));\n+            throw new NotFoundException(key);\n         }\n \n         SecurityQuestionTO deleted = binder.getSecurityQuestionTO(securityQuestion);"},{"sha":"8023c25e56a76bf7484669fe3df158e379acc7db","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/UserWorkflowLogic.java","status":"removed","additions":0,"deletions":137,"changes":137,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,137 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.logic;\n-\n-import java.lang.reflect.Method;\n-import java.util.List;\n-import org.apache.commons.lang3.tuple.Pair;\n-import org.apache.syncope.common.lib.patch.AnyPatch;\n-import org.apache.syncope.common.lib.patch.UserPatch;\n-import org.apache.syncope.common.lib.to.PropagationTaskTO;\n-import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n-import org.apache.syncope.core.persistence.api.dao.UserDAO;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n-import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.provisioning.api.propagation.PropagationManager;\n-import org.apache.syncope.core.provisioning.api.propagation.PropagationTaskExecutor;\n-import org.apache.syncope.core.workflow.api.UserWorkflowAdapter;\n-import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.security.access.prepost.PreAuthorize;\n-import org.springframework.stereotype.Component;\n-import org.springframework.transaction.annotation.Transactional;\n-\n-@Component\n-public class UserWorkflowLogic extends AbstractTransactionalLogic<WorkflowFormTO> {\n-\n-    @Autowired\n-    private UserWorkflowAdapter uwfAdapter;\n-\n-    @Autowired\n-    private PropagationManager propagationManager;\n-\n-    @Autowired\n-    private PropagationTaskExecutor taskExecutor;\n-\n-    @Autowired\n-    private UserDataBinder binder;\n-\n-    @Autowired\n-    private UserDAO userDAO;\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_CLAIM + \"')\")\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        return uwfAdapter.claimForm(taskId);\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.USER_UPDATE + \"')\")\n-    public UserTO executeWorkflowTask(final UserTO userTO, final String taskId) {\n-        WorkflowResult<String> updated = uwfAdapter.execute(userTO, taskId);\n-\n-        UserPatch userPatch = new UserPatch();\n-        userPatch.setKey(userTO.getKey());\n-\n-        List<PropagationTaskTO> tasks = propagationManager.getUserUpdateTasks(\n-                new WorkflowResult<>(\n-                        Pair.<UserPatch, Boolean>of(userPatch, null),\n-                        updated.getPropByRes(), updated.getPerformedTasks()));\n-\n-        taskExecutor.execute(tasks, false);\n-\n-        return binder.getUserTO(updated.getResult());\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_READ + \"') \"\n-            + \"and hasRole('\" + StandardEntitlement.USER_READ + \"')\")\n-    @Transactional(readOnly = true)\n-    public WorkflowFormTO getFormForUser(final String key) {\n-        User user = userDAO.authFind(key);\n-        return uwfAdapter.getForm(user.getWorkflowId());\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_LIST + \"')\")\n-    @Transactional(readOnly = true)\n-    public Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final int page,\n-            final int size,\n-            final List<OrderByClause> orderByClauses) {\n-\n-        return uwfAdapter.getForms(page, size, orderByClauses);\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_TASK_LIST + \"') \"\n-            + \"and hasRole('\" + StandardEntitlement.USER_READ + \"')\")\n-    public List<WorkflowTaskTO> getAvailableTasks(final String key) {\n-        User user = userDAO.authFind(key);\n-        return uwfAdapter.getAvailableTasks(user.getWorkflowId());\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_SUBMIT + \"')\")\n-    public UserTO submitForm(final WorkflowFormTO form) {\n-        WorkflowResult<? extends AnyPatch> updated = uwfAdapter.submitForm(form);\n-\n-        // propByRes can be made empty by the workflow definition if no propagation should occur \n-        // (for example, with rejected users)\n-        if (updated.getResult() instanceof UserPatch\n-                && updated.getPropByRes() != null && !updated.getPropByRes().isEmpty()) {\n-\n-            List<PropagationTaskTO> tasks = propagationManager.getUserUpdateTasks(\n-                    new WorkflowResult<>(\n-                            Pair.of((UserPatch) updated.getResult(), Boolean.TRUE),\n-                            updated.getPropByRes(),\n-                            updated.getPerformedTasks()));\n-\n-            taskExecutor.execute(tasks, false);\n-        }\n-\n-        return binder.getUserTO(updated.getResult().getKey());\n-    }\n-\n-    @Override\n-    protected WorkflowFormTO resolveReference(final Method method, final Object... args)\n-            throws UnresolvedReferenceException {\n-\n-        throw new UnresolvedReferenceException();\n-    }\n-\n-}"},{"sha":"4f3e5126cce4b158c95c903b336aa58f7879712e","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/WorkflowLogic.java","status":"removed","additions":0,"deletions":113,"changes":113,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FWorkflowLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FWorkflowLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FWorkflowLogic.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,113 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.logic;\n-\n-import java.io.OutputStream;\n-import java.lang.reflect.Method;\n-import java.util.List;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n-import org.apache.syncope.core.persistence.api.dao.AnyTypeDAO;\n-import org.apache.syncope.core.persistence.api.dao.NotFoundException;\n-import org.apache.syncope.core.persistence.api.entity.AnyType;\n-import org.apache.syncope.core.workflow.api.AnyObjectWorkflowDefinitionAdapter;\n-import org.apache.syncope.core.workflow.api.GroupWorkflowDefinitionAdapter;\n-import org.apache.syncope.core.workflow.api.UserWorkflowDefinitionAdapter;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionAdapter;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.security.access.prepost.PreAuthorize;\n-import org.springframework.stereotype.Component;\n-import org.springframework.transaction.annotation.Transactional;\n-\n-@Component\n-public class WorkflowLogic extends AbstractTransactionalLogic<WorkflowDefinitionTO> {\n-\n-    @Autowired\n-    private AnyTypeDAO anyTypeDAO;\n-\n-    @Autowired\n-    private AnyObjectWorkflowDefinitionAdapter awfAdapter;\n-\n-    @Autowired\n-    private UserWorkflowDefinitionAdapter uwfAdapter;\n-\n-    @Autowired\n-    private GroupWorkflowDefinitionAdapter gwfAdapter;\n-\n-    private WorkflowDefinitionAdapter getAdapter(final String anyTypeKey) {\n-        AnyType anyType = anyTypeDAO.find(anyTypeKey);\n-        if (anyType == null) {\n-            LOG.error(\"Could not find anyType '\" + anyTypeKey + \"'\");\n-            throw new NotFoundException(anyTypeKey);\n-        }\n-\n-        switch (anyType.getKind()) {\n-            case ANY_OBJECT:\n-                return awfAdapter;\n-\n-            case GROUP:\n-                return gwfAdapter;\n-\n-            case USER:\n-            default:\n-                return uwfAdapter;\n-        }\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_DEF_LIST + \"')\")\n-    @Transactional(readOnly = true)\n-    public List<WorkflowDefinitionTO> list(final String anyType) {\n-        return getAdapter(anyType).getDefinitions();\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_DEF_GET + \"')\")\n-    @Transactional(readOnly = true)\n-    public void exportDefinition(\n-            final String anyType, final String key, final WorkflowDefinitionFormat format, final OutputStream os) {\n-\n-        getAdapter(anyType).exportDefinition(key, format, os);\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_DEF_GET + \"')\")\n-    @Transactional(readOnly = true)\n-    public void exportDiagram(final String anyType, final String key, final OutputStream os) {\n-        getAdapter(anyType).exportDiagram(key, os);\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_DEF_GET + \"')\")\n-    public void importDefinition(\n-            final String anyType, final String key, final WorkflowDefinitionFormat format, final String definition) {\n-\n-        getAdapter(anyType).importDefinition(key, format, definition);\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_DEF_DELETE + \"')\")\n-    public void delete(final String anyType, final String key) {\n-        getAdapter(anyType).deleteDefinition(key);\n-    }\n-\n-    @Override\n-    protected WorkflowDefinitionTO resolveReference(final Method method, final Object... args)\n-            throws UnresolvedReferenceException {\n-\n-        throw new UnresolvedReferenceException();\n-    }\n-\n-}"},{"sha":"1408585eabaa662c7443439d7421fa3733fb315a","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/dao/AnyDAO.java","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FAnyDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FAnyDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FAnyDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -39,8 +39,6 @@\n \n     A find(String key);\n \n-    A findByWorkflowId(String workflowId);\n-\n     List<A> findByPlainAttrValue(String schemaName, PlainAttrValue attrValue, boolean ignoreCaseMatch);\n \n     A findByPlainAttrUniqueValue(String schemaName, PlainAttrValue attrUniqueValue, boolean ignoreCaseMatch);"},{"sha":"a9ec46a9c2068eba8827d499b94a773cf4fa8520","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/entity/Any.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FAny.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FAny.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FAny.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -36,10 +36,6 @@\n \n     void setStatus(String status);\n \n-    String getWorkflowId();\n-\n-    void setWorkflowId(String workflowId);\n-\n     boolean add(P attr);\n \n     boolean remove(P attr);"},{"sha":"30601d9bf70fd81d778d2c1b77b36eddea5a7155","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/entity/user/User.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fuser%2FUser.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fuser%2FUser.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2Fuser%2FUser.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -91,13 +91,4 @@ public interface User extends\n     boolean add(Role role);\n \n     List<? extends Role> getRoles();\n-\n-    String getLastRecertificator();\n-\n-    void setLastRecertificator(String lastRecertificator);\n-\n-    Date getLastRecertification();\n-\n-    void setLastRecertification(Date lastRecertificion);\n-\n }"},{"sha":"567a6fc0704e201c22620b63e8afa014bd04ced6","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/AbstractAnyDAO.java","status":"modified","additions":0,"deletions":18,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FAbstractAnyDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FAbstractAnyDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FAbstractAnyDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -29,7 +29,6 @@\n import java.util.Map;\n import java.util.Set;\n import java.util.regex.Pattern;\n-import javax.persistence.NoResultException;\n import javax.persistence.Query;\n import javax.persistence.TemporalType;\n import org.apache.commons.jexl3.parser.Parser;\n@@ -177,23 +176,6 @@ public A find(final String key) {\n         return (A) entityManager().find(anyUtils().anyClass(), key);\n     }\n \n-    @SuppressWarnings(\"unchecked\")\n-    @Override\n-    public A findByWorkflowId(final String workflowId) {\n-        Query query = entityManager().createQuery(\"SELECT e FROM \" + anyUtils().anyClass().getSimpleName()\n-                + \" e WHERE e.workflowId = :workflowId\", User.class);\n-        query.setParameter(\"workflowId\", workflowId);\n-\n-        A result = null;\n-        try {\n-            result = (A) query.getSingleResult();\n-        } catch (NoResultException e) {\n-            LOG.debug(\"No user found with workflow id {}\", workflowId, e);\n-        }\n-\n-        return result;\n-    }\n-\n     private Query findByPlainAttrValueQuery(final String entityName, final boolean ignoreCaseMatch) {\n         String query = \"SELECT e FROM \" + entityName + \" e\"\n                 + \" WHERE e.attribute.schema.id = :schemaKey AND (e.stringValue IS NOT NULL\""},{"sha":"4d8aaea9318b763478d3bdb10aae11fc8020cd3f","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAAnyObjectDAO.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnyObjectDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -264,8 +264,8 @@ public void delete(final AnyObject anyObject) {\n         });\n \n         entityManager().remove(anyObject);\n-        publisher.publishEvent(\n-                new AnyDeletedEvent(this, AnyTypeKind.ANY_OBJECT, anyObject.getKey(), AuthContextUtils.getDomain()));\n+        publisher.publishEvent(new AnyDeletedEvent(\n+                this, AnyTypeKind.ANY_OBJECT, anyObject.getKey(), anyObject.getName(), AuthContextUtils.getDomain()));\n     }\n \n     @Transactional(propagation = Propagation.REQUIRES_NEW, readOnly = true)"},{"sha":"cdb25918785867da15f673c853796ee5e526a23c","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAGroupDAO.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAGroupDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAGroupDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAGroupDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -380,8 +380,8 @@ public void delete(final Group group) {\n         clearADynMembers(group);\n \n         entityManager().remove(group);\n-        publisher.publishEvent(\n-                new AnyDeletedEvent(this, AnyTypeKind.GROUP, group.getKey(), AuthContextUtils.getDomain()));\n+        publisher.publishEvent(new AnyDeletedEvent(\n+                this, AnyTypeKind.GROUP, group.getKey(), group.getName(), AuthContextUtils.getDomain()));\n     }\n \n     @Override"},{"sha":"f105da5b2dbe8399bb8510f7bea80880dbc9d08c","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPASecurityQuestionDAO.java","status":"modified","additions":4,"deletions":6,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPASecurityQuestionDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPASecurityQuestionDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPASecurityQuestionDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -23,8 +23,7 @@\n import org.apache.syncope.core.persistence.api.dao.SecurityQuestionDAO;\n import org.apache.syncope.core.persistence.api.dao.UserDAO;\n import org.apache.syncope.core.persistence.api.entity.user.SecurityQuestion;\n-import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.persistence.jpa.entity.JPASecurityQuestion;\n+import org.apache.syncope.core.persistence.jpa.entity.user.JPASecurityQuestion;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Repository;\n \n@@ -41,7 +40,7 @@ public SecurityQuestion find(final String key) {\n \n     @Override\n     public List<SecurityQuestion> findAll() {\n-        final TypedQuery<SecurityQuestion> query = entityManager().createQuery(\n+        TypedQuery<SecurityQuestion> query = entityManager().createQuery(\n                 \"SELECT e FROM \" + JPASecurityQuestion.class.getSimpleName() + \" e \", SecurityQuestion.class);\n         return query.getResultList();\n     }\n@@ -58,13 +57,12 @@ public void delete(final String key) {\n             return;\n         }\n \n-        for (User user : userDAO.findBySecurityQuestion(securityQuestion)) {\n+        userDAO.findBySecurityQuestion(securityQuestion).forEach(user -> {\n             user.setSecurityQuestion(null);\n             user.setSecurityAnswer(null);\n             userDAO.save(user);\n-        }\n+        });\n \n         entityManager().remove(securityQuestion);\n     }\n-\n }"},{"sha":"adc36f5b04e072e5adf0dcb124ecc042c78adfaa","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAUserDAO.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -429,8 +429,8 @@ public void delete(final User user) {\n         }\n \n         entityManager().remove(user);\n-        publisher.publishEvent(\n-                new AnyDeletedEvent(this, AnyTypeKind.USER, user.getKey(), AuthContextUtils.getDomain()));\n+        publisher.publishEvent(new AnyDeletedEvent(\n+                this, AnyTypeKind.USER, user.getKey(), user.getUsername(), AuthContextUtils.getDomain()));\n     }\n \n     @Transactional(propagation = Propagation.REQUIRES_NEW, readOnly = true)"},{"sha":"86e2dd54745d1d934ee7ee822dcc00611ff3f826","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/AbstractAny.java","status":"modified","additions":0,"deletions":12,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractAny.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractAny.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractAny.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -36,8 +36,6 @@\n     @ManyToOne(fetch = FetchType.EAGER, optional = false)\n     private JPARealm realm;\n \n-    private String workflowId;\n-\n     @Column(nullable = true)\n     private String status;\n \n@@ -52,16 +50,6 @@ public void setRealm(final Realm realm) {\n         this.realm = (JPARealm) realm;\n     }\n \n-    @Override\n-    public String getWorkflowId() {\n-        return workflowId;\n-    }\n-\n-    @Override\n-    public void setWorkflowId(final String workflowId) {\n-        this.workflowId = workflowId;\n-    }\n-\n     @Override\n     public String getStatus() {\n         return status;"},{"sha":"96a333a74cf8ec9e202df0ac72e17e475002c47d","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPAEntityFactory.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.core.persistence.jpa.entity;\n \n+import org.apache.syncope.core.persistence.jpa.entity.user.JPASecurityQuestion;\n import org.apache.syncope.core.persistence.api.entity.AccessToken;\n import org.apache.syncope.core.persistence.jpa.entity.policy.JPAPasswordPolicy;\n import org.apache.syncope.core.persistence.jpa.entity.policy.JPAPullPolicy;"},{"sha":"b4be3601b9b6555f1a72f3dcd32a8a3bdf017eb0","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/conf/JPAConf.java","status":"modified","additions":0,"deletions":10,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fconf%2FJPAConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fconf%2FJPAConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fconf%2FJPAConf.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -94,16 +94,6 @@ public List<? extends AnyTypeClass> getAuxClasses() {\n         return Collections.emptyList();\n     }\n \n-    @Override\n-    public String getWorkflowId() {\n-        return null;\n-    }\n-\n-    @Override\n-    public void setWorkflowId(final String workflowId) {\n-        // nothing to do\n-    }\n-\n     @Override\n     public String getStatus() {\n         return null;"},{"sha":"d82f7ed6cfafb604f959e4b1d509313baa30a7ae","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/user/JPASecurityQuestion.java","status":"renamed","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPASecurityQuestion.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPASecurityQuestion.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPASecurityQuestion.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,12 +16,13 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.persistence.jpa.entity;\n+package org.apache.syncope.core.persistence.jpa.entity.user;\n \n import javax.persistence.Column;\n import javax.persistence.Entity;\n import javax.persistence.Table;\n import org.apache.syncope.core.persistence.api.entity.user.SecurityQuestion;\n+import org.apache.syncope.core.persistence.jpa.entity.AbstractGeneratedKeyEntity;\n \n @Entity\n @Table(name = JPASecurityQuestion.TABLE)","previous_filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPASecurityQuestion.java"},{"sha":"4ede8b730da2be644120346e326a9b5605c84337","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/user/JPAUser.java","status":"modified","additions":0,"deletions":45,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPAUser.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPAUser.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2Fuser%2FJPAUser.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -49,7 +49,6 @@\n import org.apache.syncope.core.persistence.api.entity.user.UPlainAttr;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.persistence.jpa.entity.resource.JPAExternalResource;\n-import org.apache.syncope.core.persistence.jpa.entity.JPASecurityQuestion;\n import org.apache.syncope.core.spring.security.Encryptor;\n import org.apache.syncope.core.spring.security.SecureRandomUtils;\n import org.apache.syncope.core.spring.ApplicationContextProvider;\n@@ -96,8 +95,6 @@\n     @Valid\n     private List<JPAUPlainAttr> plainAttrs = new ArrayList<>();\n \n-    private String workflowId;\n-\n     @Column(nullable = true)\n     private String status;\n \n@@ -144,13 +141,6 @@\n     @Temporal(TemporalType.TIMESTAMP)\n     private Date changePwdDate;\n \n-    @Column(nullable = true)\n-    private String lastRecertificator;\n-\n-    @Column(nullable = true)\n-    @Temporal(TemporalType.TIMESTAMP)\n-    private Date lastRecertification;\n-\n     private Boolean suspended = false;\n \n     private Boolean mustChangePassword = false;\n@@ -281,16 +271,6 @@ protected List<? extends UPlainAttr> internalGetPlainAttrs() {\n         return plainAttrs;\n     }\n \n-    @Override\n-    public String getWorkflowId() {\n-        return workflowId;\n-    }\n-\n-    @Override\n-    public void setWorkflowId(final String workflowId) {\n-        this.workflowId = workflowId;\n-    }\n-\n     @Override\n     public String getStatus() {\n         return status;\n@@ -385,31 +365,6 @@ public void setLastLoginDate(final Date lastLoginDate) {\n                 : new Date(lastLoginDate.getTime());\n     }\n \n-    @Override\n-    public String getLastRecertificator() {\n-        return lastRecertificator;\n-    }\n-\n-    @Override\n-    public void setLastRecertificator(final String lastRecertificator) {\n-        this.lastRecertificator = lastRecertificator;\n-    }\n-\n-    @Override\n-    public Date getLastRecertification() {\n-        if (lastRecertification != null) {\n-            return new Date(lastRecertification.getTime());\n-        }\n-        return null;\n-    }\n-\n-    @Override\n-    public void setLastRecertification(final Date lastRecertification) {\n-        this.lastRecertification = lastRecertification == null\n-                ? null\n-                : new Date(lastRecertification.getTime());\n-    }\n-\n     @Override\n     public String getUsername() {\n         return username;"},{"sha":"a40aa8ab49cbb46e6f69b0704bfd2ca16a2a1228","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/spring/MultiJarAwarePersistenceUnitPostProcessor.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fspring%2FMultiJarAwarePersistenceUnitPostProcessor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fspring%2FMultiJarAwarePersistenceUnitPostProcessor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fspring%2FMultiJarAwarePersistenceUnitPostProcessor.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,7 +22,6 @@\n import org.apache.syncope.core.persistence.jpa.entity.AbstractEntity;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.springframework.beans.factory.config.BeanDefinition;\n import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n import org.springframework.core.type.filter.AnnotationTypeFilter;\n import org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo;\n@@ -40,10 +39,9 @@ public void postProcessPersistenceUnitInfo(final MutablePersistenceUnitInfo pui)\n         ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);\n         scanner.addIncludeFilter(new AnnotationTypeFilter(Entity.class));\n \n-        for (BeanDefinition bd : scanner.findCandidateComponents(AbstractEntity.class.getPackage().getName())) {\n+        scanner.findCandidateComponents(AbstractEntity.class.getPackage().getName()).forEach(bd -> {\n             LOG.debug(\"Adding JPA entity {}\", bd.getBeanClassName());\n             pui.addManagedClassName(bd.getBeanClassName());\n-        }\n+        });\n     }\n-\n }"},{"sha":"fd66eb6260be1894876716f5c00f244fcdbd47e6","filename":"core/persistence-jpa/src/main/resources/domains/MasterContent.xml","status":"modified","additions":1,"deletions":14,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -126,15 +126,6 @@ under the License.\n   <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f779\"\n                    attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f6493a\" booleanValue=\"0\"/>\n \n-  <!-- Identity Recertification interval in days -->                   \n-  <SyncopeSchema id=\"identity.recertification.day.interval\"/>\n-  <PlainSchema id=\"identity.recertification.day.interval\" type=\"Long\"\n-               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-  <CPlainAttr id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\"\n-              owner_id=\"cd64d66f-6fff-4008-b966-a06b1cc1436d\" schema_id=\"identity.recertification.day.interval\"/>\n-  <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f77b\"\n-                   attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\" longValue=\"-1\"/>\n-\n   <!--  JWT lifetime in minutes -->                   \n   <SyncopeSchema id=\"jwt.lifetime.minutes\"/>\n   <PlainSchema id=\"jwt.lifetime.minutes\" type=\"Long\"\n@@ -185,18 +176,14 @@ under the License.\n   <Implementation id=\"PushJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.pushpull.PushJobDelegate\"/>\n \n-  <Implementation id=\"IdentityRecertification\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n-                  body=\"org.apache.syncope.core.provisioning.java.job.IdentityRecertification\"/>\n-  <Task DTYPE=\"SchedTask\" id=\"e95555d2-1b09-42c8-b25b-f4c4ec598989\" name=\"Identity Recertification Task\"  active=\"1\"\n-        jobDelegate_id=\"IdentityRecertification\"/>\n \n   <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n   <Task DTYPE=\"SchedTask\" id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\"\n         jobDelegate_id=\"ExpiredAccessTokenCleanup\" cronExpression=\"0 0/5 * * * ?\"/>\n   <Implementation id=\"ExpiredBatchCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredBatchCleanup\"/>\n-  <Task DTYPE=\"SchedTask\" id=\"8ea0ea51-ce08-4fe3-a0c8-c281b31b5893\" name=\"Access Token Cleanup Task\"  active=\"1\"\n+  <Task DTYPE=\"SchedTask\" id=\"8ea0ea51-ce08-4fe3-a0c8-c281b31b5893\" name=\"Expired Batch Operations Cleanup Task\"  active=\"1\"\n         jobDelegate_id=\"ExpiredBatchCleanup\" cronExpression=\"0 0/5 * * * ?\"/>\n \n   <!-- Password reset notifications -->"},{"sha":"2f29e1760decc0f400f7832808cedfc70f7b8712","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/ImplementationTest.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FImplementationTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FImplementationTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FImplementationTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -43,7 +43,7 @@ public void findAll() {\n         List<Implementation> implementations = implementationDAO.findAll();\n         assertFalse(implementations.isEmpty());\n \n-        assertEquals(19, implementations.size());\n+        assertEquals(18, implementations.size());\n \n         implementations = implementationDAO.find(ImplementationType.PULL_ACTIONS);\n         assertEquals(1, implementations.size());\n@@ -52,7 +52,7 @@ public void findAll() {\n         assertEquals(1, implementations.size());\n \n         implementations = implementationDAO.find(ImplementationType.TASKJOB_DELEGATE);\n-        assertEquals(6, implementations.size());\n+        assertEquals(5, implementations.size());\n \n         implementations = implementationDAO.find(ImplementationType.REPORTLET);\n         assertEquals(2, implementations.size());"},{"sha":"8197a550431a6f3c2dcc5f9a7d603a75874cc067","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/MultitenancyTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FMultitenancyTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FMultitenancyTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FMultitenancyTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -76,7 +76,7 @@ public static void unsetAuthContext() {\n \n     @Test\n     public void readPlainSchemas() {\n-        assertEquals(13, plainSchemaDAO.findAll().size());\n+        assertEquals(12, plainSchemaDAO.findAll().size());\n     }\n \n     @Test"},{"sha":"ff46d6276427926546db49e52b2da34fd0b1fb25","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/PlainSchemaTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FPlainSchemaTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FPlainSchemaTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FPlainSchemaTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -53,7 +53,7 @@ public class PlainSchemaTest extends AbstractTest {\n     @Test\n     public void findAll() {\n         List<PlainSchema> schemas = plainSchemaDAO.findAll();\n-        assertEquals(42, schemas.size());\n+        assertEquals(41, schemas.size());\n     }\n \n     @Test"},{"sha":"803984efdbd60938abcfd9105e43ad138f9ce736","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/TaskTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FTaskTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FTaskTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FTaskTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -97,7 +97,7 @@ public void findPaginated() {\n     public void findAll() {\n         assertEquals(5, taskDAO.findAll(TaskType.PROPAGATION).size());\n         assertEquals(1, taskDAO.findAll(TaskType.NOTIFICATION).size());\n-        assertEquals(4, taskDAO.findAll(TaskType.SCHEDULED).size());\n+        assertEquals(3, taskDAO.findAll(TaskType.SCHEDULED).size());\n         assertEquals(10, taskDAO.findAll(TaskType.PULL).size());\n         assertEquals(11, taskDAO.findAll(TaskType.PUSH).size());\n     }"},{"sha":"fb05d9466313ed7ba4d897450b0cc868931f284c","filename":"core/persistence-jpa/src/test/resources/domains/MasterContent.xml","status":"modified","additions":7,"deletions":20,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -126,15 +126,6 @@ under the License.\n   <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f779\"\n                    attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f6493a\" booleanValue=\"0\"/>\n   \n-  <!-- Identity Recertification interval in days -->                   \n-  <SyncopeSchema id=\"identity.recertification.day.interval\"/>\n-  <PlainSchema id=\"identity.recertification.day.interval\" type=\"Long\"\n-               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-  <CPlainAttr id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\"\n-              owner_id=\"cd64d66f-6fff-4008-b966-a06b1cc1436d\" schema_id=\"identity.recertification.day.interval\"/>\n-  <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f77b\"\n-                   attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\" longValue=\"365\"/>\n-\n   <!--  JWT lifetime in minutes -->                   \n   <SyncopeSchema id=\"jwt.lifetime.minutes\"/>\n   <PlainSchema id=\"jwt.lifetime.minutes\" type=\"Long\"\n@@ -290,30 +281,30 @@ under the License.\n   <SyncopeRole_Realm role_id=\"Connector and Resource for realm evenTwo\"\n                      realm_id=\"0679e069-7355-4b20-bd11-a5a0a5453c7c\"/>\n \n-  <SyncopeUser mustChangePassword=\"0\" id=\"1417acbe-cbf6-4277-9372-e75e04f97000\" workflowId=\"4\" status=\"active\"\n+  <SyncopeUser mustChangePassword=\"0\" id=\"1417acbe-cbf6-4277-9372-e75e04f97000\" status=\"active\"\n                password=\"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\" cipherAlgorithm=\"SHA1\"\n                realm_id=\"c5b75db1-fce7-470f-b780-3b9934d82a9d\"\n                username=\"rossini\" creator=\"admin\" lastModifier=\"admin\"\n                creationDate=\"2010-10-20 11:00:00\" lastChangeDate=\"2010-10-20 11:00:00\" suspended=\"0\"/>\n   <SyncopeUser_SyncopeRole user_id=\"1417acbe-cbf6-4277-9372-e75e04f97000\" role_id=\"Other\"/>\n-  <SyncopeUser mustChangePassword=\"0\" id=\"74cd8ece-715a-44a4-a736-e17b46c4e7e6\" workflowId=\"6\" status=\"active\"\n+  <SyncopeUser mustChangePassword=\"0\" id=\"74cd8ece-715a-44a4-a736-e17b46c4e7e6\" status=\"active\"\n                password=\"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\" cipherAlgorithm=\"SHA1\"\n                realm_id=\"e4c28e7a-9dbf-4ee7-9441-93812a0d4a28\"\n                username=\"verdi\" creator=\"admin\" lastModifier=\"admin\"\n                creationDate=\"2010-10-20 11:00:00\" lastChangeDate=\"2010-10-20 11:00:00\" suspended=\"0\"/>\n-  <SyncopeUser mustChangePassword=\"0\" id=\"b3cbc78d-32e6-4bd4-92e0-bbe07566a2ee\" workflowId=\"8\" status=\"active\"\n+  <SyncopeUser mustChangePassword=\"0\" id=\"b3cbc78d-32e6-4bd4-92e0-bbe07566a2ee\" status=\"active\"\n                password=\"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\" cipherAlgorithm=\"SHA1\"\n                realm_id=\"e4c28e7a-9dbf-4ee7-9441-93812a0d4a28\"\n                username=\"vivaldi\" creator=\"admin\" lastModifier=\"admin\"\n                creationDate=\"2010-10-20 11:00:00\" lastChangeDate=\"2010-10-20 11:00:00\" suspended=\"0\"/>\n-  <SyncopeUser mustChangePassword=\"0\" id=\"c9b2dec2-00a7-4855-97c0-d854842b4b24\" workflowId=\"10\" status=\"active\"\n+  <SyncopeUser mustChangePassword=\"0\" id=\"c9b2dec2-00a7-4855-97c0-d854842b4b24\" status=\"active\"\n                password=\"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\" cipherAlgorithm=\"SHA1\"\n                realm_id=\"e4c28e7a-9dbf-4ee7-9441-93812a0d4a28\"\n                username=\"bellini\" creator=\"admin\" lastModifier=\"admin\"\n                creationDate=\"2010-10-20 11:00:00\" lastChangeDate=\"2010-10-20 11:00:00\" suspended=\"0\"/>\n   <SyncopeUser_SyncopeRole user_id=\"c9b2dec2-00a7-4855-97c0-d854842b4b24\" role_id=\"User reviewer\"/>\n   <SyncopeUser_SyncopeRole user_id=\"c9b2dec2-00a7-4855-97c0-d854842b4b24\" role_id=\"User manager\"/>\n-  <SyncopeUser mustChangePassword=\"0\" id=\"823074dc-d280-436d-a7dd-07399fae48ec\" workflowId=\"12\" status=\"active\"\n+  <SyncopeUser mustChangePassword=\"0\" id=\"823074dc-d280-436d-a7dd-07399fae48ec\" status=\"active\"\n                password=\"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\" cipherAlgorithm=\"SHA1\"\n                realm_id=\"e4c28e7a-9dbf-4ee7-9441-93812a0d4a28\"\n                username=\"puccini\" creator=\"admin\" lastModifier=\"admin\" \n@@ -1210,10 +1201,6 @@ under the License.\n                   body=\"org.apache.syncope.fit.core.reference.TestSampleJobDelegate\"/>\n   <Task DTYPE=\"SchedTask\" id=\"e95555d2-1b09-42c8-b25b-f4c4ec597979\" name=\"SampleJob Task\" active=\"1\"\n         jobDelegate_id=\"TestSampleJobDelegate\" cronExpression=\"0 0 0 1 * ?\"/>\n-  <Implementation id=\"IdentityRecertification\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n-                  body=\"org.apache.syncope.core.provisioning.java.job.IdentityRecertification\"/>\n-  <Task DTYPE=\"SchedTask\" id=\"e95555d2-1b09-42c8-b25b-f4c4ec598989\" name=\"Identity Recertification Task\"  active=\"1\"\n-        jobDelegate_id=\"IdentityRecertification\"/>\n   <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n   <Task DTYPE=\"SchedTask\" id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\"\n@@ -1335,7 +1322,7 @@ under the License.\n         unmatchingRule=\"PROVISION\" matchingRule=\"UPDATE\" active=\"1\" jobDelegate_id=\"PullJobDelegate\"/>\n   <Implementation id=\"ExpiredBatchCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredBatchCleanup\"/>\n-  <Task DTYPE=\"SchedTask\" id=\"8ea0ea51-ce08-4fe3-a0c8-c281b31b5893\" name=\"Access Token Cleanup Task\"  active=\"1\"\n+  <Task DTYPE=\"SchedTask\" id=\"8ea0ea51-ce08-4fe3-a0c8-c281b31b5893\" name=\"Expired Batch Operations Cleanup Task\"  active=\"1\"\n         jobDelegate_id=\"ExpiredBatchCleanup\" cronExpression=\"0 0/5 * * * ?\"/>\n \n   <MailTemplate id=\"requestPasswordReset\"\n@@ -2557,7 +2544,7 @@ $$ }&#10;\n   \n   <Report id=\"0062ea9c-924d-4ecf-9961-4492a8cc6d1b\" name=\"test\" active=\"1\" template_id=\"sample\"/>\n   <Implementation id=\"UserReportletConf\" type=\"REPORTLET\" engine=\"JAVA\"\n-                  body='{\"@class\":\"org.apache.syncope.common.lib.report.UserReportletConf\",\"name\":\"testUserReportlet\",\"matchingCond\":null,\"plainAttrs\":[\"fullname\",\"gender\"],\"derAttrs\":[\"cn\"],\"virAttrs\":[\"virtualdata\"],\"features\":[\"key\",\"username\",\"workflowId\",\"status\",\"creationDate\",\"lastLoginDate\",\"changePwdDate\",\"passwordHistorySize\",\"failedLoginCount\",\"memberships\",\"resources\"]}'/>\n+                  body='{\"@class\":\"org.apache.syncope.common.lib.report.UserReportletConf\",\"name\":\"testUserReportlet\",\"matchingCond\":null,\"plainAttrs\":[\"fullname\",\"gender\"],\"derAttrs\":[\"cn\"],\"virAttrs\":[\"virtualdata\"],\"features\":[\"key\",\"username\",\"status\",\"creationDate\",\"lastLoginDate\",\"changePwdDate\",\"passwordHistorySize\",\"failedLoginCount\",\"memberships\",\"resources\"]}'/>\n   <ReportReportlet report_id=\"0062ea9c-924d-4ecf-9961-4492a8cc6d1b\" implementation_id=\"UserReportletConf\"/>\n   <ReportExec report_id=\"0062ea9c-924d-4ecf-9961-4492a8cc6d1b\" id=\"c13f39c5-0d35-4bff-ba79-3cd5de940369\"\n               status=\"SUCCESS\" startDate=\"2012-02-26 15:40:04\" endDate=\"2012-02-26 15:41:04\"/>"},{"sha":"23e372d518acb0f7696032ded3bbe8b9d11332ff","filename":"core/persistence-jpa/src/test/resources/domains/TwoContent.xml","status":"modified","additions":0,"deletions":14,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -105,15 +105,6 @@ under the License.\n   <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f779\"\n                    attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f6493a\" booleanValue=\"0\"/>\n   \n-  <!-- Identity Recertification interval in days -->                   \n-  <SyncopeSchema id=\"identity.recertification.day.interval\"/>\n-  <PlainSchema id=\"identity.recertification.day.interval\" type=\"Long\"\n-               mandatoryCondition=\"false\" multivalue=\"0\" uniqueConstraint=\"0\" readonly=\"0\"/>\n-  <CPlainAttr id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\"\n-              owner_id=\"cd64d66f-6fff-4008-b966-a06b1cc1436d\" schema_id=\"identity.recertification.day.interval\"/>\n-  <CPlainAttrValue id=\"e5fa94db-b524-4309-908d-8198d0b3f77b\"\n-                   attribute_id=\"bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb\" longValue=\"-1\"/>\n-\n   <!--  JWT lifetime in minutes -->                   \n   <SyncopeSchema id=\"jwt.lifetime.minutes\"/>\n   <PlainSchema id=\"jwt.lifetime.minutes\" type=\"Long\"\n@@ -142,11 +133,6 @@ under the License.\n   <Implementation id=\"PushJobDelegate\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.pushpull.PushJobDelegate\"/>\n \n-  <Implementation id=\"IdentityRecertification\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n-                  body=\"org.apache.syncope.core.provisioning.java.job.IdentityRecertification\"/>\n-  <Task DTYPE=\"SchedTask\" id=\"e95555d2-1b09-42c8-b25b-f4c4ec598989\" name=\"Identity Recertification Task\"  active=\"1\"\n-        jobDelegate_id=\"IdentityRecertification\"/>\n-\n   <Implementation id=\"ExpiredAccessTokenCleanup\" type=\"TASKJOB_DELEGATE\" engine=\"JAVA\"\n                   body=\"org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup\"/>\n   <Task DTYPE=\"SchedTask\" id=\"89de5014-e3f5-4462-84d8-d97575740baf\" name=\"Access Token Cleanup Task\"  active=\"1\""},{"sha":"11dd2f347d65ddd4f86d47a2c3caa2ffc88eff5f","filename":"core/pom.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -84,7 +84,6 @@ under the License.\n     <module>provisioning-java</module>\n     <module>workflow-api</module>\n     <module>workflow-java</module>\n-    <module>workflow-flowable</module>\n     <module>logic</module>\n     <module>rest-cxf</module>\n     <module>upgrade</module>"},{"sha":"d9f503598ac52088c1276bd3b0dfd467c2f96a57","filename":"core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/event/AnyDeletedEvent.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fevent%2FAnyDeletedEvent.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fevent%2FAnyDeletedEvent.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fevent%2FAnyDeletedEvent.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -29,17 +29,21 @@ public class AnyDeletedEvent extends ApplicationEvent {\n \n     private final String anyKey;\n \n+    private final String anyName;\n+\n     private final String domain;\n \n     public AnyDeletedEvent(\n             final Object source,\n             final AnyTypeKind anyTypeKind,\n             final String anyKey,\n+            final String anyName,\n             final String domain) {\n \n         super(source);\n         this.anyTypeKind = anyTypeKind;\n         this.anyKey = anyKey;\n+        this.anyName = anyName;\n         this.domain = domain;\n     }\n \n@@ -51,6 +55,10 @@ public String getAnyKey() {\n         return anyKey;\n     }\n \n+    public String getAnyName() {\n+        return anyName;\n+    }\n+\n     public String getDomain() {\n         return domain;\n     }"},{"sha":"bd837e4d5ceb97ffa9d1616e7af548ccddd1f6d0","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/IdentityRecertification.java","status":"removed","additions":0,"deletions":126,"changes":126,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FIdentityRecertification.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FIdentityRecertification.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FIdentityRecertification.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,126 +0,0 @@\n-/*\r\n- * Licensed to the Apache Software Foundation (ASF) under one\r\n- * or more contributor license agreements.  See the NOTICE file\r\n- * distributed with this work for additional information\r\n- * regarding copyright ownership.  The ASF licenses this file\r\n- * to you under the Apache License, Version 2.0 (the\r\n- * \"License\"); you may not use this file except in compliance\r\n- * with the License.  You may obtain a copy of the License at\r\n- *\r\n- *   http://www.apache.org/licenses/LICENSE-2.0\r\n- *\r\n- * Unless required by applicable law or agreed to in writing,\r\n- * software distributed under the License is distributed on an\r\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n- * KIND, either express or implied.  See the License for the\r\n- * specific language governing permissions and limitations\r\n- * under the License.\r\n- */\r\n-package org.apache.syncope.core.provisioning.java.job;\r\n-\r\n-import java.util.List;\r\n-import java.util.Optional;\r\n-import org.apache.commons.lang3.StringUtils;\r\n-import org.apache.syncope.core.persistence.api.dao.AnyDAO;\r\n-import org.apache.syncope.core.persistence.api.dao.ConfDAO;\r\n-import org.apache.syncope.core.persistence.api.dao.UserDAO;\r\n-import org.apache.syncope.core.persistence.api.entity.conf.CPlainAttr;\r\n-import org.apache.syncope.core.persistence.api.entity.task.TaskExec;\r\n-import org.apache.syncope.core.persistence.api.entity.user.User;\r\n-import org.apache.syncope.core.workflow.api.UserWorkflowAdapter;\r\n-import org.quartz.JobExecutionException;\r\n-import org.springframework.beans.factory.annotation.Autowired;\r\n-\r\n-public class IdentityRecertification extends AbstractSchedTaskJobDelegate {\r\n-\r\n-    private static final String RECERTIFICATION_TIME = \"identity.recertification.day.interval\";\r\n-\r\n-    @Autowired\r\n-    private ConfDAO confDAO;\r\n-\r\n-    @Autowired\r\n-    private UserDAO userDAO;\r\n-\r\n-    @Autowired\r\n-    private UserWorkflowAdapter uwfAdapter;\r\n-\r\n-    private long recertificationTime = -1;\r\n-\r\n-    protected void init() {\r\n-        synchronized (this) {\r\n-            if (recertificationTime == -1) {\r\n-                Optional<? extends CPlainAttr> recertificationTimeAttr = confDAO.find(RECERTIFICATION_TIME);\r\n-                if (!recertificationTimeAttr.isPresent()\r\n-                        || recertificationTimeAttr.get().getValues().get(0).getLongValue() == null) {\r\n-\r\n-                    recertificationTime = -1;\r\n-                    return;\r\n-                }\r\n-\r\n-                recertificationTime = recertificationTimeAttr.get().getValues().\r\n-                        get(0).getLongValue() * 1000 * 60 * 60 * 24;\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    protected boolean isToBeRecertified(final User user, final long now) {\r\n-        if (!user.isSuspended()\r\n-                && (user.getLastRecertification() == null\r\n-                || user.getLastRecertification().getTime() + recertificationTime < now)) {\r\n-\r\n-            LOG.debug(\"{} is to be recertified\", user);\r\n-            return true;\r\n-        }\r\n-\r\n-        LOG.debug(\"{} does not need to be recertified\", user);\r\n-        return false;\r\n-    }\r\n-\r\n-    @Override\r\n-    protected String doExecute(final boolean dryRun) throws JobExecutionException {\r\n-        LOG.info(\"IdentityRecertification {} running [SchedTask {}]\", dryRun ? \"dry \" : \"\", task.getKey());\r\n-\r\n-        init();\r\n-        if (recertificationTime == -1) {\r\n-            LOG.debug(\"Identity Recertification disabled\");\r\n-            return (\"IDENTITY RECERTIFICATION DISABLED\");\r\n-        }\r\n-\r\n-        if (dryRun) {\r\n-            return \"DRY RUN\";\r\n-        }\r\n-\r\n-        int total = userDAO.count();\r\n-        int pages = (total / AnyDAO.DEFAULT_PAGE_SIZE) + 1;\r\n-\r\n-        status.set(\"Processing \" + total + \" users in \" + pages + \" pages\");\r\n-\r\n-        long now = System.currentTimeMillis();\r\n-        for (int page = 1; page <= pages && !interrupt; page++) {\r\n-            status.set(\"Processing \" + total + \" users: page \" + page + \" of \" + pages);\r\n-\r\n-            List<User> users = userDAO.findAll(page, AnyDAO.DEFAULT_PAGE_SIZE);\r\n-            for (int i = 0; i < users.size() && !interrupt; i++) {\r\n-                LOG.debug(\"Processing user: {}\", users.get(i).getUsername());\r\n-\r\n-                if (StringUtils.isNotBlank(users.get(i).getWorkflowId()) && isToBeRecertified(users.get(i), now)) {\r\n-                    uwfAdapter.requestCertify(users.get(i));\r\n-                } else {\r\n-                    LOG.warn(\"Workflow for {} is null or empty\", users.get(i));\r\n-                }\r\n-            }\r\n-        }\r\n-        if (interrupt) {\r\n-            interrupted = true;\r\n-            return \"Identity recertification interrupted\";\r\n-        }\r\n-\r\n-        return \"SUCCESS\";\r\n-    }\r\n-\r\n-    @Override\r\n-    protected boolean hasToBeRegistered(final TaskExec execution) {\r\n-        return true;\r\n-    }\r\n-\r\n-}\r"},{"sha":"88528706e14c951849b0a265d09a387946a33226","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/report/ReconciliationReportlet.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FReconciliationReportlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FReconciliationReportlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FReconciliationReportlet.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -152,11 +152,6 @@ private void doExtract(\n                     }\n                     break;\n \n-                case workflowId:\n-                    type = ReportXMLConst.XSD_STRING;\n-                    value = any.getWorkflowId();\n-                    break;\n-\n                 case status:\n                     type = ReportXMLConst.XSD_STRING;\n                     value = any.getStatus();"},{"sha":"338ef9a4743301d3e19cc3c01f4080c5ea2e8d02","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/report/UserReportlet.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FUserReportlet.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FUserReportlet.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2Freport%2FUserReportlet.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -197,11 +197,6 @@ private void doExtract(final ContentHandler handler, final List<User> users) thr\n                         value = user.getUsername();\n                         break;\n \n-                    case workflowId:\n-                        type = ReportXMLConst.XSD_STRING;\n-                        value = user.getWorkflowId();\n-                        break;\n-\n                     case status:\n                         type = ReportXMLConst.XSD_STRING;\n                         value = user.getStatus();"},{"sha":"6bc5fdb48556188ce8da7f059bd4609ab9b45fee","filename":"core/spring/src/main/java/org/apache/syncope/core/spring/security/AuthContextUtils.java","status":"modified","additions":10,"deletions":19,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FAuthContextUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FAuthContextUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FAuthContextUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -19,8 +19,6 @@\n package org.apache.syncope.core.spring.security;\n \n import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n import java.util.Set;\n@@ -65,33 +63,26 @@ public static void updateUsername(final String newUsername) {\n     public static Set<SyncopeGrantedAuthority> getAuthorities() {\n         SecurityContext ctx = SecurityContextHolder.getContext();\n         if (ctx != null && ctx.getAuthentication() != null && ctx.getAuthentication().getAuthorities() != null) {\n-            Set<SyncopeGrantedAuthority> result = new HashSet<>();\n-            ctx.getAuthentication().getAuthorities().stream().\n-                    filter(authority -> (authority instanceof SyncopeGrantedAuthority)).\n-                    forEachOrdered(authority -> result.add(SyncopeGrantedAuthority.class.cast(authority)));\n-\n-            return result;\n+            return ctx.getAuthentication().getAuthorities().stream().\n+                    filter(SyncopeGrantedAuthority.class::isInstance).\n+                    map(SyncopeGrantedAuthority.class::cast).\n+                    collect(Collectors.toSet());\n         }\n \n         return Collections.emptySet();\n     }\n \n     public static Map<String, Set<String>> getAuthorizations() {\n-        Map<String, Set<String>> result = null;\n-\n         SecurityContext ctx = SecurityContextHolder.getContext();\n         if (ctx != null && ctx.getAuthentication() != null && ctx.getAuthentication().getAuthorities() != null) {\n-            result = new HashMap<>();\n-            for (GrantedAuthority authority : ctx.getAuthentication().getAuthorities()) {\n-                if (authority instanceof SyncopeGrantedAuthority) {\n-                    result.put(\n-                            SyncopeGrantedAuthority.class.cast(authority).getAuthority(),\n-                            SyncopeGrantedAuthority.class.cast(authority).getRealms());\n-                }\n-            }\n+            return ctx.getAuthentication().getAuthorities().stream().\n+                    filter(SyncopeGrantedAuthority.class::isInstance).\n+                    map(SyncopeGrantedAuthority.class::cast).\n+                    collect(Collectors.toMap(\n+                            SyncopeGrantedAuthority::getAuthority, SyncopeGrantedAuthority::getRealms));\n         }\n \n-        return result == null ? Collections.emptyMap() : result;\n+        return Collections.emptyMap();\n     }\n \n     public static String getDomain() {"},{"sha":"daf093a2f4a8095230eca6e367d4f076793fd3e4","filename":"core/spring/src/main/java/org/apache/syncope/core/spring/security/SecureRandomUtils.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FSecureRandomUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FSecureRandomUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FSecureRandomUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -49,6 +49,10 @@ public static String generateRandomLetter() {\n         return FOR_LETTERS.generate(1);\n     }\n \n+    public static String generateRandomLetters(final int length) {\n+        return FOR_LETTERS.generate(length);\n+    }\n+\n     public static String generateRandomNumber() {\n         return FOR_NUMBERS.generate(1);\n     }"},{"sha":"ad63e207ab0e8680d89b8b7c110c1c8f5261c758","filename":"core/upgrade/src/main/resources/schema.xml","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Fmain%2Fresources%2Fschema.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Fmain%2Fresources%2Fschema.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fupgrade%2Fsrc%2Fmain%2Fresources%2Fschema.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -175,7 +175,6 @@ under the License.\n       <column name=\"lastChangeDate\" type=\"timestamp\"/>\n       <column name=\"lastModifier\" type=\"varchar\" size=\"255\"/>\n       <column name=\"status\" type=\"varchar\" size=\"255\"/>\n-      <column name=\"workflowId\" type=\"varchar\" size=\"255\"/>\n       <column name=\"name\" type=\"varchar\" size=\"255\"/>\n       <column name=\"REALM_ID\" type=\"varchar\" size=\"36\"/>\n       <column name=\"TYPE_ID\" type=\"varchar\" size=\"255\"/>\n@@ -884,7 +883,6 @@ under the License.\n       <column name=\"lastChangeDate\" type=\"timestamp\"/>\n       <column name=\"lastModifier\" type=\"varchar\" size=\"255\"/>\n       <column name=\"status\" type=\"varchar\" size=\"255\"/>\n-      <column name=\"workflowId\" type=\"varchar\" size=\"255\"/>\n       <column name=\"name\" type=\"varchar\" size=\"255\"/>\n       <column name=\"REALM_ID\" type=\"varchar\" size=\"36\"/>\n       <column name=\"GROUPOWNER_ID\" type=\"varchar\" size=\"36\"/>\n@@ -966,13 +964,10 @@ under the License.\n       <column name=\"lastChangeDate\" type=\"timestamp\"/>\n       <column name=\"lastModifier\" type=\"varchar\" size=\"255\"/>\n       <column name=\"status\" type=\"varchar\" size=\"255\"/>\n-      <column name=\"workflowId\" type=\"varchar\" size=\"255\"/>\n       <column name=\"changePwdDate\" type=\"timestamp\"/>\n       <column name=\"cipherAlgorithm\" type=\"varchar\" size=\"20\"/>\n       <column name=\"failedLogins\" type=\"integer\"/>\n       <column name=\"lastLoginDate\" type=\"timestamp\"/>\n-      <column name=\"lastRecertification\" type=\"timestamp\"/>\n-      <column name=\"lastRecertificator\" type=\"varchar\" size=\"255\"/>\n       <column name=\"mustChangePassword\" type=\"integer\"/>\n       <column name=\"password\" type=\"varchar\" size=\"255\"/>\n       <column name=\"securityAnswer\" type=\"varchar\" size=\"255\"/>"},{"sha":"42de0695fc3382457221b2543ae5b7fa4a1f3bc3","filename":"core/upgrade/src/test/java/org/apache/syncope/core/upgrade/GeneratedUpgradeSQLTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fupgrade%2FGeneratedUpgradeSQLTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fupgrade%2FGeneratedUpgradeSQLTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fupgrade%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fupgrade%2FGeneratedUpgradeSQLTest.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -78,7 +78,7 @@ public void upgradefrom20() throws Exception {\n \n         Integer implementations = jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM Implementation\", Integer.class);\n         assertNotNull(implementations);\n-        assertEquals(16, implementations.intValue());\n+        assertEquals(15, implementations.intValue());\n \n         Integer pullTaskActions = jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM PullTaskAction\", Integer.class);\n         assertNotNull(pullTaskActions);"},{"sha":"59a2df0d124fdbe32ad81647399cc6b8cd93a3c5","filename":"core/upgrade/src/test/resources/syncopedb20.sql","status":"modified","additions":31,"deletions":45,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Ftest%2Fresources%2Fsyncopedb20.sql","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fupgrade%2Fsrc%2Ftest%2Fresources%2Fsyncopedb20.sql","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fupgrade%2Fsrc%2Ftest%2Fresources%2Fsyncopedb20.sql?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -261,17 +261,16 @@ CREATE MEMORY TABLE PUBLIC.ANYOBJECT(\n     LASTCHANGEDATE TIMESTAMP,\n     LASTMODIFIER VARCHAR(255),\n     STATUS VARCHAR(255),\n-    WORKFLOWID VARCHAR(255),\n     NAME VARCHAR(255),\n     REALM_ID VARCHAR(36),\n     TYPE_ID VARCHAR(255)\n );       \n ALTER TABLE PUBLIC.ANYOBJECT ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID);               \n -- 3 +/- SELECT COUNT(*) FROM PUBLIC.ANYOBJECT;\n-INSERT INTO PUBLIC.ANYOBJECT(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, NAME, REALM_ID, TYPE_ID) VALUES\n-('fc6dbc3a-6c07-4965-8781-921e7401a4a5', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'HP LJ 1300n', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', 'PRINTER'),\n-('8559d14d-58c2-46eb-a2d4-a7d35161e8f8', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'Canon MF 8030cn', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', 'PRINTER'),\n-('9e1d130c-d6a3-48b1-98b3-182477ed0688', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'Epson Stylus Color', '0679e069-7355-4b20-bd11-a5a0a5453c7c', 'PRINTER');       \n+INSERT INTO PUBLIC.ANYOBJECT(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, NAME, REALM_ID, TYPE_ID) VALUES\n+('fc6dbc3a-6c07-4965-8781-921e7401a4a5', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'HP LJ 1300n', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', 'PRINTER'),\n+('8559d14d-58c2-46eb-a2d4-a7d35161e8f8', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'Canon MF 8030cn', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', 'PRINTER'),\n+('9e1d130c-d6a3-48b1-98b3-182477ed0688', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'Epson Stylus Color', '0679e069-7355-4b20-bd11-a5a0a5453c7c', 'PRINTER');       \n CREATE MEMORY TABLE PUBLIC.ANYOBJECT_ANYTYPECLASS(\n     ANYOBJECT_ID VARCHAR(36),\n     ANYTYPECLASS_ID VARCHAR(255)\n@@ -572,7 +571,6 @@ INSERT INTO PUBLIC.CPLAINATTR(ID, OWNER_ID, SCHEMA_ID) VALUES\n ('888ae8e1-a295-4ee2-a15e-31dbf6dfc3f9', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'authentication.statuses'),\n ('9891c0a7-27ee-4215-9eea-ca32e580b4e4', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'log.lastlogindate'),\n ('bcfd7efc-0605-4b5e-b4bb-85c1d5f6493a', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'return.password.value'),\n-('bcfd7efc-0605-4b5e-b4bb-85c1d5f64bbb', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'identity.recertification.day.interval'),\n ('cfec3140-562d-459c-ac6a-e3e10758661d', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'jwt.lifetime.minutes'),\n ('ae36c6ab-0f39-40d7-b6e6-3b8394547c9c', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'connector.conf.history.size'),\n ('ae7ae53a-74cf-48b0-9a57-6d2c94928e60', 'cd64d66f-6fff-4008-b966-a06b1cc1436d', 'resource.conf.history.size');         \n@@ -1100,7 +1098,6 @@ INSERT INTO PUBLIC.PLAINSCHEMA(ID, CIPHERALGORITHM, CONVERSIONPATTERN, ENUMERATI\n ('authentication.statuses', NULL, NULL, NULL, NULL, NULL, NULL, 1, 0, NULL, 'String', 0, NULL, NULL),\n ('log.lastlogindate', NULL, NULL, NULL, NULL, 'true', NULL, 0, 0, NULL, 'Boolean', 0, NULL, NULL),\n ('return.password.value', NULL, NULL, NULL, NULL, 'false', NULL, 0, 0, NULL, 'Boolean', 0, NULL, NULL),\n-('identity.recertification.day.interval', NULL, NULL, NULL, NULL, 'false', NULL, 0, 0, NULL, 'Long', 0, NULL, NULL),\n ('jwt.lifetime.minutes', NULL, NULL, NULL, NULL, 'true', NULL, 0, 0, NULL, 'Long', 0, NULL, NULL),\n ('connector.conf.history.size', NULL, NULL, NULL, NULL, 'true', NULL, 0, 0, NULL, 'Long', 0, NULL, NULL),\n ('resource.conf.history.size', NULL, NULL, NULL, NULL, 'true', NULL, 0, 0, NULL, 'Long', 0, NULL, NULL),\n@@ -1301,7 +1298,7 @@ CREATE MEMORY TABLE PUBLIC.REPORTLETCONFINSTANCE(\n ALTER TABLE PUBLIC.REPORTLETCONFINSTANCE ADD CONSTRAINT PUBLIC.CONSTRAINT_4F PRIMARY KEY(ID);  \n -- 2 +/- SELECT COUNT(*) FROM PUBLIC.REPORTLETCONFINSTANCE;    \n INSERT INTO PUBLIC.REPORTLETCONFINSTANCE(ID, SERIALIZEDINSTANCE, REPORT_ID) VALUES\n-('5874f3fa-578c-42c6-83b0-c11adafc98b2', '{\"@class\":\"org.apache.syncope.common.lib.report.UserReportletConf\",\"name\":\"testUserReportlet\",\"matchingCond\":null,\"plainAttrs\":[\"fullname\",\"gender\"],\"derAttrs\":[\"cn\"],\"virAttrs\":[\"virtualdata\"],\"features\":[\"key\",\"username\",\"workflowId\",\"status\",\"creationDate\",\"lastLoginDate\",\"changePwdDate\",\"passwordHistorySize\",\"failedLoginCount\",\"memberships\",\"resources\"]}', '0062ea9c-924d-4ecf-9961-4492a8cc6d1b'),\n+('5874f3fa-578c-42c6-83b0-c11adafc98b2', '{\"@class\":\"org.apache.syncope.common.lib.report.UserReportletConf\",\"name\":\"testUserReportlet\",\"matchingCond\":null,\"plainAttrs\":[\"fullname\",\"gender\"],\"derAttrs\":[\"cn\"],\"virAttrs\":[\"virtualdata\"],\"features\":[\"key\",\"username\",\"status\",\"creationDate\",\"lastLoginDate\",\"changePwdDate\",\"passwordHistorySize\",\"failedLoginCount\",\"memberships\",\"resources\"]}', '0062ea9c-924d-4ecf-9961-4492a8cc6d1b'),\n ('d6c2b475-4860-4eb1-8fde-618299c2a97c', '{\"@class\":\"org.apache.syncope.common.lib.report.ReconciliationReportletConf\",\"name\":\"dashboardReconciliationReportlet\",\"userMatchingCond\":null,\"groupMatchingCond\":null,\"anyObjectMatchingCond\":null,\"features\":[\"key\",\"username\",\"groupName\"]}', 'c3520ad9-179f-49e7-b315-d684d216dd97');          \n CREATE MEMORY TABLE PUBLIC.REPORTTEMPLATE(\n     ID VARCHAR(255) NOT NULL,\n@@ -1403,31 +1400,30 @@ CREATE MEMORY TABLE PUBLIC.SYNCOPEGROUP(\n     LASTCHANGEDATE TIMESTAMP,\n     LASTMODIFIER VARCHAR(255),\n     STATUS VARCHAR(255),\n-    WORKFLOWID VARCHAR(255),\n     NAME VARCHAR(255),\n     REALM_ID VARCHAR(36),\n     GROUPOWNER_ID VARCHAR(36),\n     USEROWNER_ID VARCHAR(36)\n ); \n ALTER TABLE PUBLIC.SYNCOPEGROUP ADD CONSTRAINT PUBLIC.CONSTRAINT_8E PRIMARY KEY(ID);           \n -- 16 +/- SELECT COUNT(*) FROM PUBLIC.SYNCOPEGROUP;            \n-INSERT INTO PUBLIC.SYNCOPEGROUP(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, NAME, REALM_ID, GROUPOWNER_ID, USEROWNER_ID) VALUES\n-('37d15e4c-cdc1-460b-a591-8505c8133806', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'root', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('b1f7c12d-ec83-441f-a50e-1691daaedf3b', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'child', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('29f96485-729e-4d31-88a1-6fc60e4677f3', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'citizen', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('8fb2d51e-c605-4e80-a72b-13ffecf1aa9a', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'employee', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('a3c1a693-a6be-483f-a2b3-5cfec146f4bf', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'secretary', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('ebf97068-aa4b-4a85-9f01-680e8c4cf227', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'director', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, '823074dc-d280-436d-a7dd-07399fae48ec'),\n-('bf825fe1-7320-4a54-bd64-143b5c18ab97', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'managingDirector', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('f779c0d4-633b-4be5-8f57-32eb478a3ca5', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'otherchild', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('0cbcabd2-4410-4b6b-8f05-a052b451d18f', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'groupForWorkflowApproval', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('b8d38784-57e7-4595-859a-076222644b55', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'managingConsultant', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('268fed79-f440-4390-9435-b273768eb5d6', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'groupForWorkflowOptIn', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('0626100b-a4ba-4e00-9971-86fad52a6216', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'aGroupForPropagation', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('ba9ed509-b1f5-48ab-a334-c8530a6422dc', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'bGroupForPropagation', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('ece66293-8f31-4a84-8e8d-23da36e70846', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'artDirector', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n-('034740a9-fa10-453b-af37-dc7897e98fb1', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'additional', 'c5b75db1-fce7-470f-b780-3b9934d82a9d', NULL, NULL),\n-('e7ff94e8-19c9-4f0a-b8b7-28327edbf6ed', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, NULL, 'fake', '722f3d84-9c2b-4525-8f6e-e4b82c55a36c', NULL, NULL);          \n+INSERT INTO PUBLIC.SYNCOPEGROUP(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, NAME, REALM_ID, GROUPOWNER_ID, USEROWNER_ID) VALUES\n+('37d15e4c-cdc1-460b-a591-8505c8133806', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'root', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('b1f7c12d-ec83-441f-a50e-1691daaedf3b', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'child', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('29f96485-729e-4d31-88a1-6fc60e4677f3', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'citizen', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('8fb2d51e-c605-4e80-a72b-13ffecf1aa9a', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'employee', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('a3c1a693-a6be-483f-a2b3-5cfec146f4bf', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'secretary', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('ebf97068-aa4b-4a85-9f01-680e8c4cf227', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'director', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, '823074dc-d280-436d-a7dd-07399fae48ec'),\n+('bf825fe1-7320-4a54-bd64-143b5c18ab97', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'managingDirector', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('f779c0d4-633b-4be5-8f57-32eb478a3ca5', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'otherchild', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('0cbcabd2-4410-4b6b-8f05-a052b451d18f', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'groupForWorkflowApproval', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('b8d38784-57e7-4595-859a-076222644b55', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'managingConsultant', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('268fed79-f440-4390-9435-b273768eb5d6', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'groupForWorkflowOptIn', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('0626100b-a4ba-4e00-9971-86fad52a6216', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'aGroupForPropagation', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('ba9ed509-b1f5-48ab-a334-c8530a6422dc', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'bGroupForPropagation', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('ece66293-8f31-4a84-8e8d-23da36e70846', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'artDirector', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL),\n+('034740a9-fa10-453b-af37-dc7897e98fb1', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'additional', 'c5b75db1-fce7-470f-b780-3b9934d82a9d', NULL, NULL),\n+('e7ff94e8-19c9-4f0a-b8b7-28327edbf6ed', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', NULL, 'fake', '722f3d84-9c2b-4525-8f6e-e4b82c55a36c', NULL, NULL);          \n CREATE MEMORY TABLE PUBLIC.SYNCOPEGROUP_ANYTYPECLASS(\n     GROUP_ID VARCHAR(36),\n     ANYTYPECLASS_ID VARCHAR(255)\n@@ -1569,7 +1565,6 @@ INSERT INTO PUBLIC.SYNCOPESCHEMA(ID) VALUES\n ('authentication.statuses'),\n ('log.lastlogindate'),\n ('return.password.value'),\n-('identity.recertification.day.interval'),\n ('jwt.lifetime.minutes'),\n ('connector.conf.history.size'),\n ('resource.conf.history.size'),\n@@ -1619,13 +1614,10 @@ CREATE MEMORY TABLE PUBLIC.SYNCOPEUSER(\n     LASTCHANGEDATE TIMESTAMP,\n     LASTMODIFIER VARCHAR(255),\n     STATUS VARCHAR(255),\n-    WORKFLOWID VARCHAR(255),\n     CHANGEPWDDATE TIMESTAMP,\n     CIPHERALGORITHM VARCHAR(20),\n     FAILEDLOGINS INTEGER,\n     LASTLOGINDATE TIMESTAMP,\n-    LASTRECERTIFICATION TIMESTAMP,\n-    LASTRECERTIFICATOR VARCHAR(255),\n     MUSTCHANGEPASSWORD INTEGER,\n     PASSWORD VARCHAR(255),\n     SECURITYANSWER VARCHAR(255),\n@@ -1638,12 +1630,12 @@ CREATE MEMORY TABLE PUBLIC.SYNCOPEUSER(\n );       \n ALTER TABLE PUBLIC.SYNCOPEUSER ADD CONSTRAINT PUBLIC.CONSTRAINT_6FFB PRIMARY KEY(ID);          \n -- 5 +/- SELECT COUNT(*) FROM PUBLIC.SYNCOPEUSER;              \n-INSERT INTO PUBLIC.SYNCOPEUSER(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, CHANGEPWDDATE, CIPHERALGORITHM, FAILEDLOGINS, LASTLOGINDATE, LASTRECERTIFICATION, LASTRECERTIFICATOR, MUSTCHANGEPASSWORD, PASSWORD, SECURITYANSWER, SUSPENDED, TOKEN, TOKENEXPIRETIME, USERNAME, REALM_ID, SECURITYQUESTION_ID) VALUES\n-('1417acbe-cbf6-4277-9372-e75e04f97000', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', '4', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'rossini', 'c5b75db1-fce7-470f-b780-3b9934d82a9d', NULL),\n-('74cd8ece-715a-44a4-a736-e17b46c4e7e6', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', '6', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'verdi', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n-('b3cbc78d-32e6-4bd4-92e0-bbe07566a2ee', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', '8', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'vivaldi', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n-('c9b2dec2-00a7-4855-97c0-d854842b4b24', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', '10', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'bellini', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n-('823074dc-d280-436d-a7dd-07399fae48ec', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', '12', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'puccini', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL);              \n+INSERT INTO PUBLIC.SYNCOPEUSER(ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, CHANGEPWDDATE, CIPHERALGORITHM, FAILEDLOGINS, LASTLOGINDATE, MUSTCHANGEPASSWORD, PASSWORD, SECURITYANSWER, SUSPENDED, TOKEN, TOKENEXPIRETIME, USERNAME, REALM_ID, SECURITYQUESTION_ID) VALUES\n+('1417acbe-cbf6-4277-9372-e75e04f97000', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'rossini', 'c5b75db1-fce7-470f-b780-3b9934d82a9d', NULL),\n+('74cd8ece-715a-44a4-a736-e17b46c4e7e6', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'verdi', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n+('b3cbc78d-32e6-4bd4-92e0-bbe07566a2ee', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'vivaldi', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n+('c9b2dec2-00a7-4855-97c0-d854842b4b24', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'bellini', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL),\n+('823074dc-d280-436d-a7dd-07399fae48ec', TIMESTAMP '2010-10-20 11:00:00', 'admin', TIMESTAMP '2010-10-20 11:00:00', 'admin', 'active', NULL, 'SHA1', NULL, NULL, NULL, NULL, NULL, '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8', NULL, 0, NULL, NULL, 'puccini', 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL);              \n CREATE MEMORY TABLE PUBLIC.SYNCOPEUSER_ANYTYPECLASS(\n     USER_ID VARCHAR(36),\n     ANYTYPECLASS_ID VARCHAR(255)\n@@ -1720,7 +1712,6 @@ INSERT INTO PUBLIC.TASK(ID, DTYPE, ACTIVE, CRONEXPRESSION, DESCRIPTION, JOBDELEG\n ('316285cc-ae52-4ea2-a33b-7355e189ac3f', 'PropagationTask', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'USER', '[{\"name\":\"__PASSWORD__\",\"value\":[{\"readOnly\":false,\"disposed\":false,\"encryptedBytes\":\"m9nh2US0Sa6m+cXccCq0Xw==\",\"base64SHA1Hash\":\"GFJ69qfjxEOdrmt+9q+0Cw2uz60=\"}]},{\"name\":\"__NAME__\",\"value\":[\"userId\"],\"nameValue\":\"userId\"},{\"name\":\"type\",\"value\":[\"type\"]}]', NULL, '1417acbe-cbf6-4277-9372-e75e04f97000', '__ACCOUNT__', NULL, 'DELETE', 'ws-target-resource-2', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),\n ('c41b9b71-9bfa-4f90-89f2-84787def4c5c', 'PullTask', 1, NULL, NULL, NULL, 'CSV (update matching; assign unmatching)', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'resource-csv', 'UPDATE', 1, 1, 1, 1, 'ASSIGN', 'INCREMENTAL', NULL, 'e4c28e7a-9dbf-4ee7-9441-93812a0d4a28', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),\n ('e95555d2-1b09-42c8-b25b-f4c4ec597979', 'SchedTask', 1, '0 0 0 1 * ?', NULL, 'org.apache.syncope.fit.core.reference.TestSampleJobDelegate', 'SampleJob Task', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),\n-('e95555d2-1b09-42c8-b25b-f4c4ec598989', 'SchedTask', 1, NULL, NULL, 'org.apache.syncope.core.provisioning.java.job.IdentityRecertification', 'Identity Recertification Task', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),\n ('89de5014-e3f5-4462-84d8-d97575740baf', 'SchedTask', 1, '0 0/5 * * * ?', NULL, 'org.apache.syncope.core.provisioning.java.job.ExpiredAccessTokenCleanup', 'Access Token Cleanup Task', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),\n ('d6c2d6d3-6329-44c1-9187-f1469ead1cfa', 'PropagationTask', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'USER', '[{\"name\":\"__PASSWORD__\",\"value\":[{\"readOnly\":false,\"disposed\":false,\"encryptedBytes\":\"m9nh2US0Sa6m+cXccCq0Xw==\",\"base64SHA1Hash\":\"GFJ69qfjxEOdrmt+9q+0Cw2uz60=\"}]},{\"name\":\"__NAME__\",\"value\":[\"userId\"],\"nameValue\":\"userId\"},{\"name\":\"fullname\",\"value\":[\"fullname\"]},{\"name\":\"type\",\"value\":[\"type\"]}]', NULL, '1417acbe-cbf6-4277-9372-e75e04f97000', '__ACCOUNT__', NULL, 'UPDATE', 'ws-target-resource-nopropagation', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);     \n INSERT INTO PUBLIC.TASK(ID, DTYPE, ACTIVE, CRONEXPRESSION, DESCRIPTION, JOBDELEGATECLASSNAME, NAME, STARTAT, ANYTYPE, ANYTYPEKIND, ATTRIBUTES, CONNOBJECTKEY, ENTITYKEY, OBJECTCLASSNAME, OLDCONNOBJECTKEY, OPERATION, RESOURCE_ID, MATCHINGRULE, PERFORMCREATE, PERFORMDELETE, PERFORMUPDATE, SYNCSTATUS, UNMATCHINGRULE, PULLMODE, RECONCILIATIONFILTERBUILDERCLASSNAME, DESTINATIONREALM_ID, EXECUTED, HTMLBODY, SENDER, SUBJECT, TEXTBODY, TRACELEVEL, NOTIFICATION_ID, SOURCEREALM_ID) VALUES\n@@ -2386,7 +2377,7 @@ SELECT\n     SS.USER_ID AS ANY_ID,\n     SS.ROLE_ID AS ROLE_ID\n FROM PUBLIC.SYNCOPEUSER_SYNCOPEROLE SS;               \n-CREATE FORCE VIEW PUBLIC.ANYOBJECT_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, NAME, REALM_ID, TYPE_ID) AS\n+CREATE FORCE VIEW PUBLIC.ANYOBJECT_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, NAME, REALM_ID, TYPE_ID) AS\n SELECT\n     A.ID AS ANY_ID,\n     A.ID,\n@@ -2395,7 +2386,6 @@ SELECT\n     A.LASTCHANGEDATE,\n     A.LASTMODIFIER,\n     A.STATUS,\n-    A.WORKFLOWID,\n     A.NAME,\n     A.REALM_ID,\n     A.TYPE_ID\n@@ -2406,7 +2396,7 @@ SELECT\n     M.ANYOBJECT_ID AS RIGHT_ANY_ID,\n     M.TYPE_ID AS TYPE\n FROM PUBLIC.URELATIONSHIP M;       \n-CREATE FORCE VIEW PUBLIC.USER_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, CHANGEPWDDATE, CIPHERALGORITHM, FAILEDLOGINS, LASTLOGINDATE, LASTRECERTIFICATION, LASTRECERTIFICATOR, MUSTCHANGEPASSWORD, PASSWORD, SECURITYANSWER, SUSPENDED, TOKEN, TOKENEXPIRETIME, USERNAME, REALM_ID, SECURITYQUESTION_ID) AS\n+CREATE FORCE VIEW PUBLIC.USER_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, CHANGEPWDDATE, CIPHERALGORITHM, FAILEDLOGINS, LASTLOGINDATE, MUSTCHANGEPASSWORD, PASSWORD, SECURITYANSWER, SUSPENDED, TOKEN, TOKENEXPIRETIME, USERNAME, REALM_ID, SECURITYQUESTION_ID) AS\n SELECT\n     U.ID AS ANY_ID,\n     U.ID,\n@@ -2415,13 +2405,10 @@ SELECT\n     U.LASTCHANGEDATE,\n     U.LASTMODIFIER,\n     U.STATUS,\n-    U.WORKFLOWID,\n     U.CHANGEPWDDATE,\n     U.CIPHERALGORITHM,\n     U.FAILEDLOGINS,\n     U.LASTLOGINDATE,\n-    U.LASTRECERTIFICATION,\n-    U.LASTRECERTIFICATOR,\n     U.MUSTCHANGEPASSWORD,\n     U.PASSWORD,\n     U.SECURITYANSWER,\n@@ -2527,7 +2514,7 @@ FROM PUBLIC.AMEMBERSHIP M\n INNER JOIN PUBLIC.SYNCOPEGROUP G\n     ON 1=1\n WHERE M.GROUP_ID = G.ID;      \n-CREATE FORCE VIEW PUBLIC.GROUP_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, WORKFLOWID, NAME, REALM_ID, GROUPOWNER_ID, USEROWNER_ID) AS\n+CREATE FORCE VIEW PUBLIC.GROUP_SEARCH(ANY_ID, ID, CREATIONDATE, CREATOR, LASTCHANGEDATE, LASTMODIFIER, STATUS, NAME, REALM_ID, GROUPOWNER_ID, USEROWNER_ID) AS\n SELECT\n     R.ID AS ANY_ID,\n     R.ID,\n@@ -2536,7 +2523,6 @@ SELECT\n     R.LASTCHANGEDATE,\n     R.LASTMODIFIER,\n     R.STATUS,\n-    R.WORKFLOWID,\n     R.NAME,\n     R.REALM_ID,\n     R.GROUPOWNER_ID,"},{"sha":"1f7daca747ca5d296ecc7eeaf3d874d239425978","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/AnyObjectWorkflowAdapter.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -35,15 +35,6 @@ public interface AnyObjectWorkflowAdapter extends WorkflowAdapter {\n      */\n     WorkflowResult<String> create(AnyObjectTO anyObjectTO);\n \n-    /**\n-     * Execute a task on a anyObject.\n-     *\n-     * @param anyObjectTO anyObject to be subject to task\n-     * @param taskId to be executed\n-     * @return anyObject just updated\n-     */\n-    WorkflowResult<String> execute(AnyObjectTO anyObjectTO, String taskId);\n-\n     /**\n      * Update a anyObject.\n      *"},{"sha":"43fb0dda659269a2717023c0aaf88a8b4e409cee","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/AnyObjectWorkflowDefinitionAdapter.java","status":"removed","additions":0,"deletions":22,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowDefinitionAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowDefinitionAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FAnyObjectWorkflowDefinitionAdapter.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,22 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.workflow.api;\n-\n-public interface AnyObjectWorkflowDefinitionAdapter extends WorkflowDefinitionAdapter {\n-}"},{"sha":"e478a26b65bee1c7c3a1aec5a82884b86e758b65","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/GroupWorkflowAdapter.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -35,15 +35,6 @@ public interface GroupWorkflowAdapter extends WorkflowAdapter {\n      */\n     WorkflowResult<String> create(GroupTO groupTO);\n \n-    /**\n-     * Execute a task on a group.\n-     *\n-     * @param groupTO group to be subject to task\n-     * @param taskId to be executed\n-     * @return group just updated\n-     */\n-    WorkflowResult<String> execute(GroupTO groupTO, String taskId);\n-\n     /**\n      * Update a group.\n      *"},{"sha":"6dc2241475aa1240f179346bd85c1d008019dba2","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/GroupWorkflowDefinitionAdapter.java","status":"removed","additions":0,"deletions":22,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowDefinitionAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowDefinitionAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FGroupWorkflowDefinitionAdapter.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,22 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.workflow.api;\n-\n-public interface GroupWorkflowDefinitionAdapter extends WorkflowDefinitionAdapter {\n-}"},{"sha":"a29e584be70e780344a182321a7e441941da0f8a","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/UserWorkflowAdapter.java","status":"modified","additions":0,"deletions":18,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,7 +22,6 @@\n import org.apache.syncope.common.lib.patch.UserPatch;\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.core.persistence.api.entity.user.User;\n \n /**\n  * Interface for calling underlying workflow implementations.\n@@ -50,23 +49,6 @@ public interface UserWorkflowAdapter extends WorkflowAdapter {\n     WorkflowResult<Pair<String, Boolean>> create(\n             UserTO userTO, boolean disablePwdPolicyCheck, final Boolean enabled, boolean storePassword);\n \n-    /**\n-     * Request certification for the given user.\n-     *\n-     * @param user user to be subject to recertification\n-     * @return user just updated\n-     */\n-    WorkflowResult<String> requestCertify(User user);\n-\n-    /**\n-     * Execute a task on an user.\n-     *\n-     * @param userTO user to be subject to task\n-     * @param taskId to be executed\n-     * @return user just updated\n-     */\n-    WorkflowResult<String> execute(UserTO userTO, String taskId);\n-\n     /**\n      * Activate an user.\n      *"},{"sha":"93b3969fea3b04e0d248c2e41061e051fdbcb9f7","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/UserWorkflowDefinitionAdapter.java","status":"removed","additions":0,"deletions":22,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowDefinitionAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowDefinitionAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FUserWorkflowDefinitionAdapter.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,22 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.workflow.api;\n-\n-public interface UserWorkflowDefinitionAdapter extends WorkflowDefinitionAdapter {\n-}"},{"sha":"ba42c53ec890484669a14dfe3e3d233ab835c6ad","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/WorkflowAdapter.java","status":"modified","additions":0,"deletions":50,"changes":50,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,60 +18,10 @@\n  */\n package org.apache.syncope.core.workflow.api;\n \n-import java.util.List;\n-import org.apache.commons.lang3.tuple.Pair;\n-import org.apache.syncope.common.lib.patch.AnyPatch;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n-import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-\n public interface WorkflowAdapter {\n \n     /**\n      * @return any string that might be interpreted as 'prefix' (say table prefix in SQL environments)\n      */\n     String getPrefix();\n-\n-    /**\n-     * Get the forms for current workflow process instances matching the provided parameters.\n-     *\n-     * @param page result page\n-     * @param size items per page\n-     * @param orderByClauses sort conditions\n-     * @return total number of forms, list of forms matching the provided parameters\n-     */\n-    Pair<Integer, List<WorkflowFormTO>> getForms(int page, int size, List<OrderByClause> orderByClauses);\n-\n-    /**\n-     * Get form for given workflowId (if present).\n-     *\n-     * @param workflowId workflow id\n-     * @return form (if present), otherwise null\n-     */\n-    WorkflowFormTO getForm(String workflowId);\n-\n-    /**\n-     * Claim a form for a given object.\n-     *\n-     * @param taskId Workflow task to which the form is associated\n-     * @return updated form\n-     */\n-    WorkflowFormTO claimForm(String taskId);\n-\n-    /**\n-     * Submit a form.\n-     *\n-     * @param form to be submitted\n-     * @return object updated by this form submit\n-     */\n-    WorkflowResult<? extends AnyPatch> submitForm(WorkflowFormTO form);\n-\n-    /**\n-     * Get tasks available for execution, for given workflow id.\n-     *\n-     * @param workflowId workflow id\n-     * @return available tasks\n-     */\n-    List<WorkflowTaskTO> getAvailableTasks(String workflowId);\n }"},{"sha":"d71d8c26eef13741f6ebb3508b4fc19d2dea49ea","filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/FlowableUserWorkflowAdapter.java","status":"removed","additions":0,"deletions":1035,"changes":1035,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2FFlowableUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2FFlowableUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2FFlowableUserWorkflowAdapter.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,1035 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.workflow.flowable;\n-\n-import com.fasterxml.jackson.databind.JsonNode;\n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.node.ObjectNode;\n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.io.OutputStream;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.HashSet;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.stream.Collectors;\n-import javax.annotation.Resource;\n-import org.apache.commons.io.IOUtils;\n-import org.apache.commons.lang3.StringUtils;\n-import org.apache.commons.lang3.tuple.Pair;\n-import org.apache.syncope.common.lib.SyncopeClientException;\n-import org.apache.syncope.common.lib.patch.PasswordPatch;\n-import org.apache.syncope.common.lib.patch.UserPatch;\n-import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormPropertyTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n-import org.apache.syncope.core.provisioning.api.PropagationByResource;\n-import org.apache.syncope.common.lib.types.ResourceOperation;\n-import org.apache.syncope.common.lib.types.WorkflowFormPropertyType;\n-import org.apache.syncope.core.spring.security.AuthContextUtils;\n-import org.apache.syncope.core.spring.BeanUtils;\n-import org.apache.syncope.core.persistence.api.attrvalue.validation.InvalidEntityException;\n-import org.apache.syncope.core.persistence.api.attrvalue.validation.ParsingValidationException;\n-import org.apache.syncope.core.persistence.api.dao.NotFoundException;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n-import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-import org.apache.syncope.core.workflow.flowable.spring.DomainProcessEngine;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n-import org.apache.syncope.core.workflow.api.WorkflowException;\n-import org.apache.syncope.core.workflow.java.AbstractUserWorkflowAdapter;\n-import org.flowable.bpmn.converter.BpmnXMLConverter;\n-import org.flowable.bpmn.model.BpmnModel;\n-import org.flowable.bpmn.model.FlowElement;\n-import org.flowable.bpmn.model.Gateway;\n-import org.flowable.bpmn.model.Process;\n-import org.flowable.bpmn.model.SequenceFlow;\n-import org.flowable.editor.constants.ModelDataJsonConstants;\n-import org.flowable.editor.language.json.converter.BpmnJsonConverter;\n-import org.flowable.common.engine.api.FlowableException;\n-import org.flowable.engine.form.FormProperty;\n-import org.flowable.engine.form.FormType;\n-import org.flowable.engine.form.TaskFormData;\n-import org.flowable.engine.history.HistoricActivityInstance;\n-import org.flowable.engine.impl.persistence.entity.HistoricFormPropertyEntity;\n-import org.flowable.engine.repository.Deployment;\n-import org.flowable.engine.repository.Model;\n-import org.flowable.engine.repository.ProcessDefinition;\n-import org.flowable.engine.runtime.ProcessInstance;\n-import org.flowable.task.api.Task;\n-import org.flowable.task.api.TaskQuery;\n-import org.flowable.task.api.history.HistoricTaskInstance;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.transaction.annotation.Transactional;\n-\n-/**\n- * <a href=\"http://www.flowable.org/\">Flowable</a> based implementation.\n- */\n-public class FlowableUserWorkflowAdapter extends AbstractUserWorkflowAdapter {\n-\n-    protected static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\n-\n-    protected static final String[] PROPERTY_IGNORE_PROPS = { \"type\" };\n-\n-    public static final String WF_PROCESS_ID = \"userWorkflow\";\n-\n-    public static final String USER = \"user\";\n-\n-    public static final String WF_EXECUTOR = \"wfExecutor\";\n-\n-    public static final String FORM_SUBMITTER = \"formSubmitter\";\n-\n-    public static final String USER_TO = \"userTO\";\n-\n-    public static final String ENABLED = \"enabled\";\n-\n-    public static final String USER_PATCH = \"userPatch\";\n-\n-    public static final String EMAIL_KIND = \"emailKind\";\n-\n-    public static final String TASK = \"task\";\n-\n-    public static final String TOKEN = \"token\";\n-\n-    public static final String PASSWORD = \"password\";\n-\n-    public static final String PROP_BY_RESOURCE = \"propByResource\";\n-\n-    public static final String PROPAGATE_ENABLE = \"propagateEnable\";\n-\n-    public static final String ENCRYPTED_PWD = \"encryptedPwd\";\n-\n-    public static final String TASK_IS_FORM = \"taskIsForm\";\n-\n-    public static final String MODEL_DATA_JSON_MODEL = \"model\";\n-\n-    public static final String STORE_PASSWORD = \"storePassword\";\n-\n-    public static final String EVENT = \"event\";\n-\n-    @Resource(name = \"adminUser\")\n-    protected String adminUser;\n-\n-    @Autowired\n-    protected DomainProcessEngine engine;\n-\n-    @Override\n-    public String getPrefix() {\n-        return \"ACT_\";\n-    }\n-\n-    protected void throwException(final FlowableException e, final String defaultMessage) {\n-        if (e.getCause() != null) {\n-            if (e.getCause().getCause() instanceof SyncopeClientException) {\n-                throw (SyncopeClientException) e.getCause().getCause();\n-            } else if (e.getCause().getCause() instanceof ParsingValidationException) {\n-                throw (ParsingValidationException) e.getCause().getCause();\n-            } else if (e.getCause().getCause() instanceof InvalidEntityException) {\n-                throw (InvalidEntityException) e.getCause().getCause();\n-            }\n-        }\n-\n-        throw new WorkflowException(defaultMessage, e);\n-    }\n-\n-    protected void updateStatus(final User user) {\n-        List<Task> tasks = engine.getTaskService().createTaskQuery().processInstanceId(user.getWorkflowId()).list();\n-        if (tasks.isEmpty() || tasks.size() > 1) {\n-            LOG.warn(\"While setting user status: unexpected task number ({})\", tasks.size());\n-        } else {\n-            user.setStatus(tasks.get(0).getTaskDefinitionKey());\n-        }\n-    }\n-\n-    protected String getFormTask(final User user) {\n-        String result = null;\n-\n-        List<Task> tasks = engine.getTaskService().createTaskQuery().processInstanceId(user.getWorkflowId()).list();\n-        if (tasks.isEmpty() || tasks.size() > 1) {\n-            LOG.debug(\"While checking if form task: unexpected task number ({})\", tasks.size());\n-        } else {\n-            try {\n-                TaskFormData formData = engine.getFormService().getTaskFormData(tasks.get(0).getId());\n-                if (formData != null && !formData.getFormProperties().isEmpty()) {\n-                    result = tasks.get(0).getId();\n-                }\n-            } catch (FlowableException e) {\n-                LOG.warn(\"Could not get task form data\", e);\n-            }\n-        }\n-\n-        return result;\n-    }\n-\n-    protected Set<String> getPerformedTasks(final User user) {\n-        final Set<String> result = new HashSet<>();\n-\n-        engine.getHistoryService().createHistoricActivityInstanceQuery().executionId(user.getWorkflowId()).list().\n-                forEach((task) -> {\n-                    result.add(task.getActivityId());\n-                });\n-\n-        return result;\n-    }\n-\n-    /**\n-     * Saves resources to be propagated and password for later - after form submission - propagation.\n-     *\n-     * @param user user\n-     * @param password password\n-     * @param propByRes current propagation actions against resources\n-     */\n-    protected void saveForFormSubmit(final User user, final String password, final PropagationByResource propByRes) {\n-        String formTaskId = getFormTask(user);\n-        if (formTaskId != null) {\n-            UserTO userTO = engine.getRuntimeService().getVariable(user.getWorkflowId(), USER_TO, UserTO.class);\n-            if (userTO != null) {\n-                userTO.setKey(user.getKey());\n-                userTO.setCreationDate(user.getCreationDate());\n-                userTO.setLastChangeDate(user.getLastChangeDate());\n-                if (password == null) {\n-                    String encryptedPwd = engine.getRuntimeService().\n-                            getVariable(user.getWorkflowId(), ENCRYPTED_PWD, String.class);\n-                    if (encryptedPwd != null) {\n-                        userTO.setPassword(decrypt(encryptedPwd));\n-                    }\n-                } else {\n-                    userTO.setPassword(password);\n-                }\n-\n-                engine.getRuntimeService().setVariable(user.getWorkflowId(), USER_TO, userTO);\n-            }\n-\n-            // SYNCOPE-238: This is needed to simplify the task query in this.getForms()\n-            engine.getTaskService().setVariableLocal(formTaskId, TASK_IS_FORM, Boolean.TRUE);\n-\n-            engine.getRuntimeService().setVariable(user.getWorkflowId(), PROP_BY_RESOURCE, propByRes);\n-            if (propByRes != null) {\n-                propByRes.clear();\n-            }\n-\n-            if (password != null) {\n-                engine.getRuntimeService().setVariable(user.getWorkflowId(), ENCRYPTED_PWD, encrypt(password));\n-            }\n-        }\n-    }\n-\n-    public <T> T getVariable(final String executionId, final String variableName, final Class<T> variableClass) {\n-        return engine.getRuntimeService().getVariable(executionId, variableName, variableClass);\n-    }\n-\n-    public void setVariable(final String executionId, final String variableName, final Object value) {\n-        engine.getRuntimeService().setVariable(executionId, variableName, value);\n-    }\n-\n-    @Override\n-    protected WorkflowResult<Pair<String, Boolean>> doCreate(\n-            final UserTO userTO,\n-            final boolean disablePwdPolicyCheck,\n-            final Boolean enabled,\n-            final boolean storePassword) {\n-\n-        Map<String, Object> variables = new HashMap<>();\n-        variables.put(WF_EXECUTOR, AuthContextUtils.getUsername());\n-        variables.put(USER_TO, userTO);\n-        variables.put(ENABLED, enabled);\n-        variables.put(STORE_PASSWORD, storePassword);\n-\n-        ProcessInstance processInstance = null;\n-        try {\n-            processInstance = engine.getRuntimeService().startProcessInstanceByKey(WF_PROCESS_ID, variables);\n-        } catch (FlowableException e) {\n-            throwException(e, \"While starting \" + WF_PROCESS_ID + \" instance\");\n-        }\n-\n-        User user = engine.getRuntimeService().getVariable(processInstance.getProcessInstanceId(), USER, User.class);\n-\n-        Boolean updatedEnabled =\n-                engine.getRuntimeService().getVariable(processInstance.getProcessInstanceId(), ENABLED, Boolean.class);\n-        if (updatedEnabled != null) {\n-            user.setSuspended(!updatedEnabled);\n-        }\n-\n-        // this will make UserValidator not to consider password policies at all\n-        if (disablePwdPolicyCheck) {\n-            user.removeClearPassword();\n-        }\n-\n-        updateStatus(user);\n-        user = userDAO.save(user);\n-\n-        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n-                processInstance.getProcessInstanceId(), PROPAGATE_ENABLE, Boolean.class);\n-        if (propagateEnable == null) {\n-            propagateEnable = enabled;\n-        }\n-\n-        PropagationByResource propByRes = new PropagationByResource();\n-        propByRes.set(ResourceOperation.CREATE, userDAO.findAllResourceKeys(user.getKey()));\n-\n-        saveForFormSubmit(user, userTO.getPassword(), propByRes);\n-\n-        Set<String> tasks = getPerformedTasks(user);\n-\n-        return new WorkflowResult<>(Pair.of(user.getKey(), propagateEnable), propByRes, tasks);\n-    }\n-\n-    protected Set<String> doExecuteTask(final User user, final String task, final Map<String, Object> moreVariables) {\n-        Set<String> preTasks = getPerformedTasks(user);\n-\n-        Map<String, Object> variables = new HashMap<>();\n-        variables.put(WF_EXECUTOR, AuthContextUtils.getUsername());\n-        variables.put(TASK, task);\n-\n-        // using BeanUtils to access all user's properties and trigger lazy loading - we are about to\n-        // serialize a User instance for availability within workflow tasks, and this breaks transactions\n-        BeanUtils.copyProperties(user, entityFactory.newEntity(User.class));\n-        variables.put(USER, user);\n-\n-        if (moreVariables != null && !moreVariables.isEmpty()) {\n-            variables.putAll(moreVariables);\n-        }\n-\n-        if (StringUtils.isBlank(user.getWorkflowId())) {\n-            throw new WorkflowException(new NotFoundException(\"Empty workflow id for \" + user));\n-        }\n-\n-        List<Task> tasks = engine.getTaskService().createTaskQuery().processInstanceId(user.getWorkflowId()).list();\n-        if (tasks.size() == 1) {\n-            try {\n-                engine.getTaskService().complete(tasks.get(0).getId(), variables);\n-            } catch (FlowableException e) {\n-                throwException(e, \"While completing task '\" + tasks.get(0).getName() + \"' for \" + user);\n-            }\n-        } else {\n-            LOG.warn(\"Expected a single task, found {}\", tasks.size());\n-        }\n-\n-        Set<String> postTasks = getPerformedTasks(user);\n-        postTasks.removeAll(preTasks);\n-        postTasks.add(task);\n-\n-        return postTasks;\n-    }\n-\n-    @Override\n-    protected WorkflowResult<String> doActivate(final User user, final String token) {\n-        Set<String> tasks = doExecuteTask(user, \"activate\", Collections.singletonMap(TOKEN, (Object) token));\n-\n-        updateStatus(user);\n-        User updated = userDAO.save(user);\n-\n-        return new WorkflowResult<>(updated.getKey(), null, tasks);\n-    }\n-\n-    @Override\n-    protected WorkflowResult<Pair<UserPatch, Boolean>> doUpdate(final User user, final UserPatch userPatch) {\n-        Set<String> tasks = doExecuteTask(user, \"update\", Collections.singletonMap(USER_PATCH, (Object) userPatch));\n-\n-        updateStatus(user);\n-        User updated = userDAO.save(user);\n-\n-        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROP_BY_RESOURCE, PropagationByResource.class);\n-        saveForFormSubmit(\n-                updated, userPatch.getPassword() == null ? null : userPatch.getPassword().getValue(), propByRes);\n-\n-        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROPAGATE_ENABLE, Boolean.class);\n-\n-        return new WorkflowResult<>(Pair.of(userPatch, propagateEnable), propByRes, tasks);\n-    }\n-\n-    @Override\n-    public WorkflowResult<String> requestCertify(final User user) {\n-        String authUser = AuthContextUtils.getUsername();\n-        engine.getRuntimeService().setVariable(user.getWorkflowId(), FORM_SUBMITTER, authUser);\n-\n-        Set<String> performedTasks = doExecuteTask(user, \"request-certify\", null);\n-\n-        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROP_BY_RESOURCE, PropagationByResource.class);\n-\n-        saveForFormSubmit(user, null, propByRes);\n-\n-        return new WorkflowResult<>(user.getKey(), null, performedTasks);\n-    }\n-\n-    @Override\n-    protected WorkflowResult<String> doSuspend(final User user) {\n-        Set<String> performedTasks = doExecuteTask(user, \"suspend\", null);\n-        updateStatus(user);\n-        User updated = userDAO.save(user);\n-\n-        return new WorkflowResult<>(updated.getKey(), null, performedTasks);\n-    }\n-\n-    @Override\n-    protected WorkflowResult<String> doReactivate(final User user) {\n-        Set<String> performedTasks = doExecuteTask(user, \"reactivate\", null);\n-        updateStatus(user);\n-\n-        User updated = userDAO.save(user);\n-\n-        return new WorkflowResult<>(updated.getKey(), null, performedTasks);\n-    }\n-\n-    @Override\n-    protected void doRequestPasswordReset(final User user) {\n-        Map<String, Object> variables = new HashMap<>(2);\n-        variables.put(USER_TO, dataBinder.getUserTO(user, true));\n-        variables.put(EVENT, \"requestPasswordReset\");\n-\n-        doExecuteTask(user, \"requestPasswordReset\", variables);\n-        userDAO.save(user);\n-    }\n-\n-    @Override\n-    protected WorkflowResult<Pair<UserPatch, Boolean>> doConfirmPasswordReset(\n-            final User user, final String token, final String password) {\n-\n-        Map<String, Object> variables = new HashMap<>(4);\n-        variables.put(TOKEN, token);\n-        variables.put(PASSWORD, password);\n-        variables.put(USER_TO, dataBinder.getUserTO(user, true));\n-        variables.put(EVENT, \"confirmPasswordReset\");\n-\n-        Set<String> tasks = doExecuteTask(user, \"confirmPasswordReset\", variables);\n-\n-        userDAO.save(user);\n-\n-        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROP_BY_RESOURCE, PropagationByResource.class);\n-        UserPatch updatedPatch = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), USER_PATCH, UserPatch.class);\n-        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROPAGATE_ENABLE, Boolean.class);\n-\n-        return new WorkflowResult<>(Pair.of(updatedPatch, propagateEnable), propByRes, tasks);\n-    }\n-\n-    @Override\n-    protected void doDelete(final User user) {\n-        doExecuteTask(user, \"delete\", null);\n-\n-        PropagationByResource propByRes = new PropagationByResource();\n-        propByRes.set(ResourceOperation.DELETE, userDAO.findAllResourceKeys(user.getKey()));\n-\n-        saveForFormSubmit(user, null, propByRes);\n-\n-        if (engine.getRuntimeService().createProcessInstanceQuery().\n-                processInstanceId(user.getWorkflowId()).active().list().isEmpty()) {\n-\n-            userDAO.delete(user.getKey());\n-\n-            if (!engine.getHistoryService().createHistoricProcessInstanceQuery().\n-                    processInstanceId(user.getWorkflowId()).list().isEmpty()) {\n-\n-                engine.getHistoryService().deleteHistoricProcessInstance(user.getWorkflowId());\n-            }\n-        } else {\n-            updateStatus(user);\n-            userDAO.save(user);\n-        }\n-    }\n-\n-    @Override\n-    public WorkflowResult<String> execute(final UserTO userTO, final String taskId) {\n-        User user = userDAO.authFind(userTO.getKey());\n-\n-        Map<String, Object> variables = new HashMap<>();\n-        variables.put(USER_TO, userTO);\n-\n-        Set<String> performedTasks = doExecuteTask(user, taskId, variables);\n-        updateStatus(user);\n-        User updated = userDAO.save(user);\n-\n-        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROP_BY_RESOURCE, PropagationByResource.class);\n-\n-        saveForFormSubmit(updated, userTO.getPassword(), propByRes);\n-\n-        return new WorkflowResult<>(updated.getKey(), null, performedTasks);\n-    }\n-\n-    protected WorkflowFormPropertyType fromFlowableFormType(final FormType flowableFormType) {\n-        WorkflowFormPropertyType result = WorkflowFormPropertyType.String;\n-\n-        if (\"string\".equals(flowableFormType.getName())) {\n-            result = WorkflowFormPropertyType.String;\n-        }\n-        if (\"long\".equals(flowableFormType.getName())) {\n-            result = WorkflowFormPropertyType.Long;\n-        }\n-        if (\"enum\".equals(flowableFormType.getName())) {\n-            result = WorkflowFormPropertyType.Enum;\n-        }\n-        if (\"date\".equals(flowableFormType.getName())) {\n-            result = WorkflowFormPropertyType.Date;\n-        }\n-        if (\"boolean\".equals(flowableFormType.getName())) {\n-            result = WorkflowFormPropertyType.Boolean;\n-        }\n-\n-        return result;\n-    }\n-\n-    protected WorkflowFormTO getFormTO(final Task task) {\n-        return getFormTO(task, engine.getFormService().getTaskFormData(task.getId()));\n-    }\n-\n-    protected WorkflowFormTO getFormTO(final Task task, final TaskFormData fd) {\n-        WorkflowFormTO formTO =\n-                getFormTO(task.getProcessInstanceId(), task.getId(), fd.getFormKey(), fd.getFormProperties());\n-        BeanUtils.copyProperties(task, formTO);\n-\n-        return formTO;\n-    }\n-\n-    protected WorkflowFormTO getFormTO(final HistoricTaskInstance task) {\n-        final List<HistoricFormPropertyEntity> props = new ArrayList<>();\n-\n-        engine.getHistoryService().createHistoricDetailQuery().taskId(task.getId()).list().stream().\n-                filter(historicDetail -> (historicDetail instanceof HistoricFormPropertyEntity)).\n-                forEachOrdered(historicDetail -> {\n-                    props.add((HistoricFormPropertyEntity) historicDetail);\n-                });\n-\n-        WorkflowFormTO formTO = getHistoricFormTO(\n-                task.getProcessInstanceId(), task.getId(), task.getFormKey(), props);\n-        BeanUtils.copyProperties(task, formTO);\n-\n-        HistoricActivityInstance historicActivityInstance = engine.getHistoryService().\n-                createHistoricActivityInstanceQuery().\n-                executionId(task.getExecutionId()).activityType(\"userTask\").activityName(task.getName()).singleResult();\n-\n-        if (historicActivityInstance != null) {\n-            formTO.setCreateTime(historicActivityInstance.getStartTime());\n-            formTO.setDueDate(historicActivityInstance.getEndTime());\n-        }\n-\n-        return formTO;\n-    }\n-\n-    protected WorkflowFormTO getHistoricFormTO(\n-            final String processInstanceId,\n-            final String taskId,\n-            final String formKey,\n-            final List<HistoricFormPropertyEntity> props) {\n-\n-        WorkflowFormTO formTO = new WorkflowFormTO();\n-\n-        User user = userDAO.findByWorkflowId(processInstanceId);\n-        if (user == null) {\n-            throw new NotFoundException(\"User with workflow id \" + processInstanceId);\n-        }\n-        formTO.setUsername(user.getUsername());\n-\n-        formTO.setTaskId(taskId);\n-        formTO.setKey(formKey);\n-\n-        formTO.setUserTO(engine.getRuntimeService().getVariable(processInstanceId, USER_TO, UserTO.class));\n-        formTO.setUserPatch(engine.getRuntimeService().getVariable(processInstanceId, USER_PATCH, UserPatch.class));\n-\n-        props.stream().map(prop -> {\n-            WorkflowFormPropertyTO propertyTO = new WorkflowFormPropertyTO();\n-            propertyTO.setId(prop.getPropertyId());\n-            propertyTO.setName(prop.getPropertyId());\n-            propertyTO.setValue(prop.getPropertyValue());\n-            return propertyTO;\n-        }).forEachOrdered(propertyTO -> {\n-            formTO.getProperties().add(propertyTO);\n-        });\n-\n-        return formTO;\n-    }\n-\n-    @SuppressWarnings(\"unchecked\")\n-    protected WorkflowFormTO getFormTO(\n-            final String processInstanceId,\n-            final String taskId,\n-            final String formKey,\n-            final List<FormProperty> properties) {\n-\n-        WorkflowFormTO formTO = new WorkflowFormTO();\n-\n-        User user = userDAO.findByWorkflowId(processInstanceId);\n-        if (user == null) {\n-            throw new NotFoundException(\"User with workflow id \" + processInstanceId);\n-        }\n-        formTO.setUsername(user.getUsername());\n-\n-        formTO.setTaskId(taskId);\n-        formTO.setKey(formKey);\n-\n-        formTO.setUserTO(engine.getRuntimeService().getVariable(processInstanceId, USER_TO, UserTO.class));\n-        formTO.setUserPatch(engine.getRuntimeService().getVariable(processInstanceId, USER_PATCH, UserPatch.class));\n-\n-        properties.stream().map(fProp -> {\n-            WorkflowFormPropertyTO propertyTO = new WorkflowFormPropertyTO();\n-            BeanUtils.copyProperties(fProp, propertyTO, PROPERTY_IGNORE_PROPS);\n-            propertyTO.setType(fromFlowableFormType(fProp.getType()));\n-            if (propertyTO.getType() == WorkflowFormPropertyType.Date) {\n-                propertyTO.setDatePattern((String) fProp.getType().getInformation(\"datePattern\"));\n-            }\n-            if (propertyTO.getType() == WorkflowFormPropertyType.Enum) {\n-                propertyTO.getEnumValues().putAll((Map<String, String>) fProp.getType().getInformation(\"values\"));\n-            }\n-            return propertyTO;\n-        }).forEachOrdered(propertyTO -> {\n-            formTO.getProperties().add(propertyTO);\n-        });\n-\n-        return formTO;\n-    }\n-\n-    @Transactional(readOnly = true)\n-    @Override\n-    public Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final int page, final int size, final List<OrderByClause> orderByClauses) {\n-\n-        Pair<Integer, List<WorkflowFormTO>> forms = null;\n-\n-        String authUser = AuthContextUtils.getUsername();\n-        if (adminUser.equals(authUser)) {\n-            forms = getForms(engine.getTaskService().createTaskQuery().\n-                    taskVariableValueEquals(TASK_IS_FORM, Boolean.TRUE), page, size, orderByClauses);\n-        } else {\n-            User user = userDAO.findByUsername(authUser);\n-            if (user == null) {\n-                throw new NotFoundException(\"Syncope User \" + authUser);\n-            }\n-\n-            forms = getForms(engine.getTaskService().createTaskQuery().\n-                    taskVariableValueEquals(TASK_IS_FORM, Boolean.TRUE).\n-                    taskCandidateOrAssigned(user.getUsername()), page, size, orderByClauses);\n-\n-            List<String> candidateGroups = new ArrayList<>();\n-            userDAO.findAllGroupNames(user).forEach(group -> {\n-                candidateGroups.add(group);\n-            });\n-            if (!candidateGroups.isEmpty()) {\n-                forms = getForms(engine.getTaskService().createTaskQuery().\n-                        taskVariableValueEquals(TASK_IS_FORM, Boolean.TRUE).\n-                        taskCandidateGroupIn(candidateGroups), page, size, orderByClauses);\n-            }\n-        }\n-\n-        return forms == null\n-                ? Pair.of(0, Collections.<WorkflowFormTO>emptyList())\n-                : forms;\n-    }\n-\n-    protected Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final TaskQuery query, final int page, final int size, final List<OrderByClause> orderByClauses) {\n-\n-        TaskQuery sortedQuery = query;\n-        for (OrderByClause clause : orderByClauses) {\n-            boolean ack = true;\n-            switch (clause.getField().trim()) {\n-                case \"taskId\":\n-                    sortedQuery = sortedQuery.orderByTaskId();\n-                    break;\n-\n-                case \"createTime\":\n-                    sortedQuery = sortedQuery.orderByTaskCreateTime();\n-                    break;\n-\n-                case \"dueDate\":\n-                    sortedQuery = sortedQuery.orderByTaskDueDate();\n-                    break;\n-\n-                case \"owner\":\n-                    sortedQuery = sortedQuery.orderByTaskOwner();\n-                    break;\n-\n-                default:\n-                    LOG.warn(\"Form sort request by {}: unsupported, ignoring\", clause.getField().trim());\n-                    ack = false;\n-            }\n-            if (ack) {\n-                if (clause.getDirection() == OrderByClause.Direction.ASC) {\n-                    sortedQuery = sortedQuery.asc();\n-                } else {\n-                    sortedQuery = sortedQuery.desc();\n-                }\n-            }\n-        }\n-\n-        List<WorkflowFormTO> result = sortedQuery.listPage(size * (page <= 0 ? 0 : page - 1), size).stream().\n-                map(task -> {\n-                    if (task instanceof HistoricTaskInstance) {\n-                        return getFormTO((HistoricTaskInstance) task);\n-                    } else {\n-                        return getFormTO(task);\n-                    }\n-                }).collect(Collectors.toList());\n-\n-        return Pair.of((int) query.count(), result);\n-    }\n-\n-    @Override\n-    public WorkflowFormTO getForm(final String workflowId) {\n-        Task task;\n-        try {\n-            task = engine.getTaskService().createTaskQuery().processInstanceId(workflowId).singleResult();\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While reading form for workflow instance \" + workflowId, e);\n-        }\n-\n-        TaskFormData formData;\n-        try {\n-            formData = engine.getFormService().getTaskFormData(task.getId());\n-        } catch (FlowableException e) {\n-            LOG.debug(\"No form found for task {}\", task.getId(), e);\n-            formData = null;\n-        }\n-\n-        WorkflowFormTO result = null;\n-        if (formData != null && !formData.getFormProperties().isEmpty()) {\n-            result = getFormTO(task);\n-        }\n-\n-        return result;\n-    }\n-\n-    protected Pair<Task, TaskFormData> checkTask(final String taskId, final String authUser) {\n-        Task task;\n-        try {\n-            task = engine.getTaskService().createTaskQuery().taskId(taskId).singleResult();\n-            if (task == null) {\n-                throw new FlowableException(\"NULL result\");\n-            }\n-        } catch (FlowableException e) {\n-            throw new NotFoundException(\"Flowable Task \" + taskId, e);\n-        }\n-\n-        TaskFormData formData;\n-        try {\n-            formData = engine.getFormService().getTaskFormData(task.getId());\n-        } catch (FlowableException e) {\n-            throw new NotFoundException(\"Form for Flowable Task \" + taskId, e);\n-        }\n-\n-        if (!adminUser.equals(authUser)) {\n-            User user = userDAO.findByUsername(authUser);\n-            if (user == null) {\n-                throw new NotFoundException(\"Syncope User \" + authUser);\n-            }\n-        }\n-\n-        return Pair.of(task, formData);\n-    }\n-\n-    @Override\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        String authUser = AuthContextUtils.getUsername();\n-        Pair<Task, TaskFormData> checked = checkTask(taskId, authUser);\n-\n-        if (!adminUser.equals(authUser)) {\n-            List<Task> tasksForUser = engine.getTaskService().createTaskQuery().taskId(taskId).taskCandidateUser(\n-                    authUser).list();\n-            if (tasksForUser.isEmpty()) {\n-                throw new WorkflowException(\n-                        new IllegalArgumentException(authUser + \" is not candidate for task \" + taskId));\n-            }\n-        }\n-\n-        Task task;\n-        try {\n-            engine.getTaskService().setOwner(taskId, authUser);\n-            task = engine.getTaskService().createTaskQuery().taskId(taskId).singleResult();\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While reading task \" + taskId, e);\n-        }\n-\n-        return getFormTO(task, checked.getValue());\n-    }\n-\n-    private Map<String, String> getPropertiesForSubmit(final WorkflowFormTO form) {\n-        Map<String, String> props = new HashMap<>();\n-        form.getProperties().stream().\n-                filter(prop -> (prop.isWritable())).\n-                forEachOrdered(prop -> {\n-                    props.put(prop.getId(), prop.getValue());\n-                });\n-\n-        return Collections.unmodifiableMap(props);\n-    }\n-\n-    @Override\n-    public WorkflowResult<UserPatch> submitForm(final WorkflowFormTO form) {\n-        String authUser = AuthContextUtils.getUsername();\n-        Pair<Task, TaskFormData> checked = checkTask(form.getTaskId(), authUser);\n-\n-        if (!checked.getKey().getOwner().equals(authUser)) {\n-            throw new WorkflowException(new IllegalArgumentException(\"Task \" + form.getTaskId() + \" assigned to \"\n-                    + checked.getKey().getOwner() + \" but submitted by \" + authUser));\n-        }\n-\n-        User user = userDAO.findByWorkflowId(checked.getKey().getProcessInstanceId());\n-        if (user == null) {\n-            throw new NotFoundException(\"User with workflow id \" + checked.getKey().getProcessInstanceId());\n-        }\n-\n-        Set<String> preTasks = getPerformedTasks(user);\n-        try {\n-            engine.getFormService().submitTaskFormData(form.getTaskId(), getPropertiesForSubmit(form));\n-            engine.getRuntimeService().setVariable(user.getWorkflowId(), FORM_SUBMITTER, authUser);\n-        } catch (FlowableException e) {\n-            throwException(e, \"While submitting form for task \" + form.getTaskId());\n-        }\n-\n-        Set<String> postTasks = getPerformedTasks(user);\n-        postTasks.removeAll(preTasks);\n-        postTasks.add(form.getTaskId());\n-\n-        updateStatus(user);\n-        User updated = userDAO.save(user);\n-\n-        // see if there is any propagation to be done\n-        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n-                user.getWorkflowId(), PROP_BY_RESOURCE, PropagationByResource.class);\n-\n-        // fetch - if available - the encrypted password\n-        String clearPassword = null;\n-        String encryptedPwd = engine.getRuntimeService().getVariable(user.getWorkflowId(), ENCRYPTED_PWD, String.class);\n-        if (StringUtils.isNotBlank(encryptedPwd)) {\n-            clearPassword = decrypt(encryptedPwd);\n-        }\n-\n-        // supports approval chains\n-        saveForFormSubmit(user, clearPassword, propByRes);\n-\n-        UserPatch userPatch = engine.getRuntimeService().getVariable(user.getWorkflowId(), USER_PATCH, UserPatch.class);\n-        if (userPatch == null) {\n-            userPatch = new UserPatch();\n-            userPatch.setKey(updated.getKey());\n-            userPatch.setPassword(new PasswordPatch.Builder().onSyncope(true).value(clearPassword).build());\n-\n-            if (propByRes != null) {\n-                userPatch.getPassword().getResources().addAll(propByRes.get(ResourceOperation.CREATE));\n-            }\n-        }\n-\n-        return new WorkflowResult<>(userPatch, propByRes, postTasks);\n-    }\n-\n-    protected void navigateAvailableTasks(final FlowElement flow, final List<String> availableTasks) {\n-        if (flow instanceof Gateway) {\n-            ((Gateway) flow).getOutgoingFlows().forEach(subflow -> navigateAvailableTasks(subflow, availableTasks));\n-        } else if (flow instanceof SequenceFlow) {\n-            availableTasks.add(((SequenceFlow) flow).getTargetRef());\n-        } else {\n-            LOG.debug(\"Unexpected flow found: {}\", flow);\n-        }\n-    }\n-\n-    @Override\n-    public List<WorkflowTaskTO> getAvailableTasks(final String workflowId) {\n-        List<String> availableTasks = new ArrayList<>();\n-        try {\n-            Task currentTask = engine.getTaskService().createTaskQuery().processInstanceId(workflowId).singleResult();\n-\n-            Process process = engine.getRepositoryService().\n-                    getBpmnModel(getProcessDefinitionByKey(WF_PROCESS_ID).getId()).getProcesses().get(0);\n-            process.getFlowElements().stream().\n-                    filter(SequenceFlow.class::isInstance).\n-                    map(SequenceFlow.class::cast).\n-                    filter(sequenceFlow -> sequenceFlow.getSourceRef().equals(currentTask.getTaskDefinitionKey())).\n-                    forEach(sequenceFlow -> {\n-                        FlowElement target = process.getFlowElement(sequenceFlow.getTargetRef(), true);\n-                        navigateAvailableTasks(target, availableTasks);\n-                    });\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While reading available tasks for workflow instance \" + workflowId, e);\n-        }\n-\n-        return availableTasks.stream().map(input -> {\n-            WorkflowTaskTO workflowTaskTO = new WorkflowTaskTO();\n-            workflowTaskTO.setName(input);\n-            return workflowTaskTO;\n-        }).collect(Collectors.toList());\n-    }\n-\n-    protected Model getModel(final ProcessDefinition procDef) {\n-        try {\n-            Model model = engine.getRepositoryService().createModelQuery().\n-                    deploymentId(procDef.getDeploymentId()).singleResult();\n-            if (model == null) {\n-                throw new NotFoundException(\"Could not find Model for deployment \" + procDef.getDeploymentId());\n-            }\n-            return model;\n-        } catch (Exception e) {\n-            throw new WorkflowException(\"While accessing process \" + procDef.getKey(), e);\n-        }\n-    }\n-\n-    @Override\n-    public List<WorkflowDefinitionTO> getDefinitions() {\n-        try {\n-            return engine.getRepositoryService().createProcessDefinitionQuery().latestVersion().list().stream().\n-                    map(procDef -> {\n-                        WorkflowDefinitionTO defTO = new WorkflowDefinitionTO();\n-                        defTO.setKey(procDef.getKey());\n-                        defTO.setName(procDef.getName());\n-\n-                        try {\n-                            defTO.setModelId(getModel(procDef).getId());\n-                        } catch (NotFoundException e) {\n-                            LOG.warn(\"No model found for definition {}, ignoring\", procDef.getDeploymentId(), e);\n-                        }\n-\n-                        defTO.setMain(WF_PROCESS_ID.equals(procDef.getKey()));\n-\n-                        return defTO;\n-                    }).collect(Collectors.toList());\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While listing available process definitions\", e);\n-        }\n-    }\n-\n-    protected ProcessDefinition getProcessDefinitionByKey(final String key) {\n-        try {\n-            return engine.getRepositoryService().createProcessDefinitionQuery().\n-                    processDefinitionKey(key).latestVersion().singleResult();\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While accessing process \" + key, e);\n-        }\n-\n-    }\n-\n-    protected ProcessDefinition getProcessDefinitionByDeploymentId(final String deploymentId) {\n-        try {\n-            return engine.getRepositoryService().createProcessDefinitionQuery().\n-                    deploymentId(deploymentId).latestVersion().singleResult();\n-        } catch (FlowableException e) {\n-            throw new WorkflowException(\"While accessing deployment \" + deploymentId, e);\n-        }\n-\n-    }\n-\n-    protected void exportProcessModel(final String key, final OutputStream os) {\n-        Model model = getModel(getProcessDefinitionByKey(key));\n-\n-        try {\n-            ObjectNode modelNode = (ObjectNode) OBJECT_MAPPER.readTree(model.getMetaInfo());\n-            modelNode.put(ModelDataJsonConstants.MODEL_ID, model.getId());\n-            modelNode.replace(MODEL_DATA_JSON_MODEL,\n-                    OBJECT_MAPPER.readTree(engine.getRepositoryService().getModelEditorSource(model.getId())));\n-\n-            os.write(modelNode.toString().getBytes());\n-        } catch (IOException e) {\n-            LOG.error(\"While exporting workflow definition {}\", model.getId(), e);\n-        }\n-    }\n-\n-    protected void exportProcessResource(final String deploymentId, final String resourceName, final OutputStream os) {\n-        try (InputStream procDefIS = engine.getRepositoryService().getResourceAsStream(deploymentId, resourceName)) {\n-            IOUtils.copy(procDefIS, os);\n-        } catch (IOException e) {\n-            LOG.error(\"While exporting {}\", resourceName, e);\n-        }\n-    }\n-\n-    @Override\n-    public void exportDefinition(final String key, final WorkflowDefinitionFormat format, final OutputStream os) {\n-        switch (format) {\n-            case JSON:\n-                exportProcessModel(key, os);\n-                break;\n-\n-            case XML:\n-            default:\n-                ProcessDefinition procDef = getProcessDefinitionByKey(key);\n-                exportProcessResource(procDef.getDeploymentId(), procDef.getResourceName(), os);\n-        }\n-    }\n-\n-    @Override\n-    public void exportDiagram(final String key, final OutputStream os) {\n-        ProcessDefinition procDef = getProcessDefinitionByKey(key);\n-        if (procDef == null) {\n-            throw new NotFoundException(\"Workflow process definition for \" + key);\n-        }\n-        exportProcessResource(procDef.getDeploymentId(), procDef.getDiagramResourceName(), os);\n-    }\n-\n-    @Override\n-    public void importDefinition(final String key, final WorkflowDefinitionFormat format, final String definition) {\n-        ProcessDefinition procDef = getProcessDefinitionByKey(key);\n-        String resourceName = procDef == null ? key + \".bpmn20.xml\" : procDef.getResourceName();\n-        Deployment deployment;\n-        switch (format) {\n-            case JSON:\n-                JsonNode definitionNode;\n-                try {\n-                    definitionNode = OBJECT_MAPPER.readTree(definition);\n-                    if (definitionNode.has(MODEL_DATA_JSON_MODEL)) {\n-                        definitionNode = definitionNode.get(MODEL_DATA_JSON_MODEL);\n-                    }\n-                    if (!definitionNode.has(BpmnJsonConverter.EDITOR_CHILD_SHAPES)) {\n-                        throw new IllegalArgumentException(\n-                                \"Could not find JSON node \" + BpmnJsonConverter.EDITOR_CHILD_SHAPES);\n-                    }\n-\n-                    BpmnModel bpmnModel = new BpmnJsonConverter().convertToBpmnModel(definitionNode);\n-                    deployment = FlowableDeployUtils.deployDefinition(\n-                            engine,\n-                            resourceName,\n-                            new BpmnXMLConverter().convertToXML(bpmnModel));\n-                } catch (Exception e) {\n-                    throw new WorkflowException(\"While creating or updating process \" + key, e);\n-                }\n-                break;\n-\n-            case XML:\n-            default:\n-                deployment = FlowableDeployUtils.deployDefinition(\n-                        engine,\n-                        resourceName,\n-                        definition.getBytes());\n-        }\n-\n-        procDef = getProcessDefinitionByDeploymentId(deployment.getId());\n-        if (!key.equals(procDef.getKey())) {\n-            throw new WorkflowException(\"Mismatching key: expected \" + key + \", found \" + procDef.getKey());\n-        }\n-        FlowableDeployUtils.deployModel(engine, procDef);\n-    }\n-\n-    @Override\n-    public void deleteDefinition(final String key) {\n-        ProcessDefinition procDef = getProcessDefinitionByKey(key);\n-        if (WF_PROCESS_ID.equals(procDef.getKey())) {\n-            throw new WorkflowException(\"Cannot delete the main process \" + WF_PROCESS_ID);\n-        }\n-\n-        try {\n-            engine.getRepositoryService().deleteDeployment(procDef.getDeploymentId());\n-        } catch (Exception e) {\n-            throw new WorkflowException(\"While deleting \" + key, e);\n-        }\n-    }\n-}"},{"sha":"6099e0c38cd441a39e0083c4182375891e5e923b","filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Recertify.java","status":"removed","additions":0,"deletions":58,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FRecertify.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FRecertify.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-flowable%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fflowable%2Ftask%2FRecertify.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,58 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.workflow.flowable.task;\n-\n-import java.util.Date;\n-import org.apache.syncope.core.persistence.api.dao.UserDAO;\n-import org.apache.syncope.core.persistence.api.entity.AnyUtilsFactory;\n-import org.apache.syncope.core.persistence.api.entity.EntityFactory;\n-import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.stereotype.Component;\n-\n-@Component\n-public class Recertify extends AbstractFlowableServiceTask {\n-\n-    @Autowired\n-    protected UserDAO userDAO;\n-\n-    @Autowired\n-    protected EntityFactory entityFactory;\n-\n-    @Autowired\n-    protected AnyUtilsFactory anyUtilsFactory;\n-\n-    @Override\n-    protected void doExecute(final String executionId) {\n-        LOG.debug(\"Processing Recertification {}\", executionId);\n-        User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n-        String submitter = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.FORM_SUBMITTER, String.class);\n-\n-        LOG.debug(\"Saving Recertification information for user {}\", user.getUsername());\n-\n-        user.setLastRecertificator(submitter);\n-        user.setLastRecertification(new Date(System.currentTimeMillis()));\n-\n-        userDAO.save(user);\n-    }\n-\n-}"},{"sha":"c647b6f0e347bd2fdc2c8fa61344a183d2b270ee","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractAnyObjectWorkflowAdapter.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractAnyObjectWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,14 +26,12 @@\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n import org.apache.syncope.core.provisioning.api.data.AnyObjectDataBinder;\n import org.apache.syncope.core.workflow.api.AnyObjectWorkflowAdapter;\n-import org.apache.syncope.core.workflow.api.AnyObjectWorkflowDefinitionAdapter;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.transaction.annotation.Propagation;\n import org.springframework.transaction.annotation.Transactional;\n \n @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { Throwable.class })\n-public abstract class AbstractAnyObjectWorkflowAdapter\n-        implements AnyObjectWorkflowAdapter, AnyObjectWorkflowDefinitionAdapter {\n+public abstract class AbstractAnyObjectWorkflowAdapter implements AnyObjectWorkflowAdapter {\n \n     @Autowired\n     protected AnyObjectDataBinder dataBinder;"},{"sha":"f48749d661e78f285324ea9da903e5e13b2f9e0b","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractGroupWorkflowAdapter.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractGroupWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,13 +26,12 @@\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n import org.apache.syncope.core.provisioning.api.data.GroupDataBinder;\n import org.apache.syncope.core.workflow.api.GroupWorkflowAdapter;\n-import org.apache.syncope.core.workflow.api.GroupWorkflowDefinitionAdapter;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.transaction.annotation.Propagation;\n import org.springframework.transaction.annotation.Transactional;\n \n @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { Throwable.class })\n-public abstract class AbstractGroupWorkflowAdapter implements GroupWorkflowAdapter, GroupWorkflowDefinitionAdapter {\n+public abstract class AbstractGroupWorkflowAdapter implements GroupWorkflowAdapter {\n \n     @Autowired\n     protected GroupDataBinder dataBinder;"},{"sha":"45fc4f17649bdbca401013870154d6196c8a2757","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/AbstractUserWorkflowAdapter.java","status":"modified","additions":1,"deletions":15,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FAbstractUserWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,7 +18,6 @@\n  */\n package org.apache.syncope.core.workflow.java;\n \n-import java.util.Base64;\n import org.apache.commons.lang3.tuple.ImmutablePair;\n import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.patch.UserPatch;\n@@ -29,16 +28,14 @@\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n import org.apache.syncope.core.workflow.api.UserWorkflowAdapter;\n-import org.apache.syncope.core.workflow.api.UserWorkflowDefinitionAdapter;\n-import org.identityconnectors.common.security.EncryptorFactory;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.transaction.annotation.Propagation;\n import org.springframework.transaction.annotation.Transactional;\n \n @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { Throwable.class })\n-public abstract class AbstractUserWorkflowAdapter implements UserWorkflowAdapter, UserWorkflowDefinitionAdapter {\n+public abstract class AbstractUserWorkflowAdapter implements UserWorkflowAdapter {\n \n     protected static final Logger LOG = LoggerFactory.getLogger(UserWorkflowAdapter.class);\n \n@@ -51,17 +48,6 @@ public abstract class AbstractUserWorkflowAdapter implements UserWorkflowAdapter\n     @Autowired\n     protected EntityFactory entityFactory;\n \n-    protected String encrypt(final String clear) {\n-        byte[] encrypted = EncryptorFactory.getInstance().getDefaultEncryptor().encrypt(clear.getBytes());\n-        return Base64.getEncoder().encodeToString(encrypted);\n-    }\n-\n-    protected String decrypt(final String crypted) {\n-        byte[] decrypted = EncryptorFactory.getInstance().getDefaultEncryptor().\n-                decrypt(Base64.getDecoder().decode(crypted));\n-        return new String(decrypted);\n-    }\n-\n     @Override\n     public String getPrefix() {\n         return null;"},{"sha":"b6c8d6734fd8284320449dcbd2719ff447295189","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultAnyObjectWorkflowAdapter.java","status":"modified","additions":0,"deletions":68,"changes":68,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,22 +18,12 @@\n  */\n package org.apache.syncope.core.workflow.java;\n \n-import java.io.OutputStream;\n-import java.util.Collections;\n-import java.util.List;\n-import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.patch.AnyObjectPatch;\n import org.apache.syncope.common.lib.to.AnyObjectTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n import org.apache.syncope.core.provisioning.api.PropagationByResource;\n import org.apache.syncope.common.lib.types.ResourceOperation;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n import org.apache.syncope.core.persistence.api.entity.anyobject.AnyObject;\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n-import org.apache.syncope.core.workflow.api.WorkflowException;\n \n /**\n  * Simple implementation basically not involving any workflow engine.\n@@ -62,62 +52,4 @@ protected WorkflowResult<AnyObjectPatch> doUpdate(final AnyObject anyObject, fin\n     protected void doDelete(final AnyObject anyObject) {\n         anyObjectDAO.delete(anyObject);\n     }\n-\n-    @Override\n-    public WorkflowResult<String> execute(final AnyObjectTO anyObject, final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final int page, final int size, final List<OrderByClause> orderByClauses) {\n-\n-        return Pair.of(0, Collections.<WorkflowFormTO>emptyList());\n-    }\n-\n-    @Override\n-    public WorkflowFormTO getForm(final String workflowId) {\n-        return null;\n-    }\n-\n-    @Override\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public WorkflowResult<AnyObjectPatch> submitForm(final WorkflowFormTO form) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public List<WorkflowTaskTO> getAvailableTasks(final String workflowId) {\n-        return Collections.emptyList();\n-    }\n-\n-    @Override\n-    public List<WorkflowDefinitionTO> getDefinitions() {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDefinition(final String key, final WorkflowDefinitionFormat format, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDiagram(final String key, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void importDefinition(final String key, final WorkflowDefinitionFormat format, final String definition) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void deleteDefinition(final String key) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n }"},{"sha":"f4a97224e386ea07ebc71a196cad6c5f07f02eec","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultGroupWorkflowAdapter.java","status":"modified","additions":0,"deletions":67,"changes":67,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,22 +18,12 @@\n  */\n package org.apache.syncope.core.workflow.java;\n \n-import java.io.OutputStream;\n-import java.util.Collections;\n-import java.util.List;\n-import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.patch.GroupPatch;\n import org.apache.syncope.common.lib.to.GroupTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n import org.apache.syncope.core.provisioning.api.PropagationByResource;\n import org.apache.syncope.common.lib.types.ResourceOperation;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n import org.apache.syncope.core.persistence.api.entity.group.Group;\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n-import org.apache.syncope.core.workflow.api.WorkflowException;\n \n /**\n  * Simple implementation basically not involving any workflow engine.\n@@ -62,61 +52,4 @@ protected WorkflowResult<GroupPatch> doUpdate(final Group group, final GroupPatc\n     protected void doDelete(final Group group) {\n         groupDAO.delete(group);\n     }\n-\n-    @Override\n-    public WorkflowResult<String> execute(final GroupTO group, final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final int page, final int size, final List<OrderByClause> orderByClauses) {\n-\n-        return Pair.of(0, Collections.<WorkflowFormTO>emptyList());\n-    }\n-\n-    @Override\n-    public WorkflowFormTO getForm(final String workflowId) {\n-        return null;\n-    }\n-\n-    @Override\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public WorkflowResult<GroupPatch> submitForm(final WorkflowFormTO form) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public List<WorkflowTaskTO> getAvailableTasks(final String workflowId) {\n-        return Collections.emptyList();\n-    }\n-\n-    @Override\n-    public List<WorkflowDefinitionTO> getDefinitions() {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDefinition(final String key, final WorkflowDefinitionFormat format, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDiagram(final String key, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void importDefinition(final String key, final WorkflowDefinitionFormat format, final String definition) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void deleteDefinition(final String key) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n }"},{"sha":"acbe8592be68c55e3355696e2ba6006213dd31bb","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultUserWorkflowAdapter.java","status":"modified","additions":0,"deletions":70,"changes":70,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,23 +18,15 @@\n  */\n package org.apache.syncope.core.workflow.java;\n \n-import java.io.OutputStream;\n-import java.util.Collections;\n-import java.util.List;\n import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.patch.PasswordPatch;\n import org.apache.syncope.common.lib.patch.UserPatch;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n import org.apache.syncope.core.provisioning.api.PropagationByResource;\n import org.apache.syncope.common.lib.types.ResourceOperation;\n import org.apache.syncope.core.persistence.api.dao.ConfDAO;\n-import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.WorkflowResult;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n import org.apache.syncope.core.workflow.api.WorkflowException;\n import org.springframework.beans.factory.annotation.Autowired;\n \n@@ -150,66 +142,4 @@ protected WorkflowResult<Pair<UserPatch, Boolean>> doConfirmPasswordReset(\n     protected void doDelete(final User user) {\n         userDAO.delete(user);\n     }\n-\n-    @Override\n-    public WorkflowResult<String> execute(final UserTO userTO, final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public Pair<Integer, List<WorkflowFormTO>> getForms(\n-            final int page, final int size, final List<OrderByClause> orderByClauses) {\n-\n-        return Pair.of(0, Collections.<WorkflowFormTO>emptyList());\n-    }\n-\n-    @Override\n-    public WorkflowFormTO getForm(final String workflowId) {\n-        return null;\n-    }\n-\n-    @Override\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public WorkflowResult<UserPatch> submitForm(final WorkflowFormTO form) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public List<WorkflowTaskTO> getAvailableTasks(final String workflowId) {\n-        return Collections.emptyList();\n-    }\n-\n-    @Override\n-    public WorkflowResult<String> requestCertify(final User user) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public List<WorkflowDefinitionTO> getDefinitions() {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDefinition(final String key, final WorkflowDefinitionFormat format, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void exportDiagram(final String key, final OutputStream os) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void importDefinition(final String key, final WorkflowDefinitionFormat format, final String definition) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n-\n-    @Override\n-    public void deleteDefinition(final String key) {\n-        throw new WorkflowException(new UnsupportedOperationException(\"Not supported.\"));\n-    }\n }"},{"sha":"adef93c27b29f08e4ad7b104fa176bf23e763de1","filename":"deb/console/pom.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/deb%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/deb%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/deb%2Fconsole%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -44,6 +44,11 @@ under the License.\n       <version>${project.version}</version>\n     </dependency>\n \n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-client-console</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>    \n     <dependency>\n       <groupId>org.apache.syncope.ext.camel</groupId>\n       <artifactId>syncope-ext-camel-client-console</artifactId>"},{"sha":"910cc309c0820de92e10793996de8f43b99ac7ea","filename":"deb/core/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/deb%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/deb%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/deb%2Fcore%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -55,8 +55,8 @@ under the License.\n     </dependency>\n     \n     <dependency>\n-      <groupId>org.apache.syncope.core</groupId>\n-      <artifactId>syncope-core-workflow-flowable</artifactId>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n "},{"sha":"211e5af03b1cc45a19061de41be5ea42d8152960","filename":"docker/console/pom.xml","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fconsole%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -67,10 +67,6 @@ under the License.\n             <configuration>\n               <target>\n                 <copy file=\"${basedir}/../../deb/console/target/apache-syncope-console-${project.version}.deb\" todir=\"${project.build.directory}/classes\" overwrite=\"true\" />\n-\n-                <copy todir=\"${project.build.directory}/classes/flowable-modeler\">\n-                  <fileset dir=\"${basedir}/../../fit/console-reference/target/flowable-modeler\" />\n-                </copy>\n               </target>\n             </configuration>\n             <goals>"},{"sha":"88752180cd1290d12c371eb04053b7390165b365","filename":"docker/console/src/main/resources/Dockerfile","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -23,7 +23,6 @@ RUN set -x\n COPY *.deb /tmp/\n \n COPY *.properties.template /etc/apache-syncope/\n-COPY flowable-modeler/ /etc/apache-syncope/flowable-modeler/\n \n COPY build.sh /tmp\n RUN chmod 755 /tmp/build.sh && sync && /tmp/build.sh && rm /tmp/build.sh"},{"sha":"8789cb5dd4d840e4570f158f080ea0978c0b874f","filename":"docker/console/src/main/resources/console.properties.template","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties.template","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties.template","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties.template?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,8 +33,6 @@ maxWaitTimeOnApplyChanges=30\n \n csrf=true\n \n-flowableModelerDirectory=/etc/apache-syncope/flowable-modeler\n-\n reconciliationReportKey=c3520ad9-179f-49e7-b315-d684d216dd97\n \n page.dashboard=org.apache.syncope.client.console.pages.Dashboard"},{"sha":"33a1efc0976371a3d7defeabd41760d3ac9843a1","filename":"ext/camel/persistence-jpa/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fcamel%2Fpersistence-jpa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fcamel%2Fpersistence-jpa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fcamel%2Fpersistence-jpa%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -117,7 +117,7 @@ under the License.\n             <inherited>true</inherited>\n             <executions>\n               <execution>\n-                <id>sqlgenr</id>\n+                <id>sqlgen</id>\n                 <phase>process-classes</phase>\n                 <goals>\n                   <goal>sql</goal>"},{"sha":"8010544aa57f6198d0ce5365e982d643454ccf89","filename":"ext/camel/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/CamelRouteService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fcamel%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FCamelRouteService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fcamel%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FCamelRouteService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fcamel%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FCamelRouteService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -44,7 +44,7 @@\n /**\n  * REST operations for Camel routes.\n  */\n-@Tag(name = \"CamelRoutes\")\n+@Tag(name = \"Camel\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"a66f1d2024fa249a19d39cda24fa04a1ff98d8d5","filename":"ext/elasticsearch/client-elasticsearch/src/main/java/org/apache/syncope/ext/elasticsearch/client/ElasticsearchUtils.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -140,9 +140,7 @@ public XContentBuilder builder(final Any<?> any) throws IOException {\n             User user = ((User) any);\n             builder = builder.\n                     field(\"username\", user.getUsername()).\n-                    field(\"lastLoginDate\", user.getLastLoginDate()).\n-                    field(\"lastRecertification\", user.getLastRecertification()).\n-                    field(\"lastRecertificator\", user.getLastRecertificator());\n+                    field(\"lastLoginDate\", user.getLastLoginDate());\n \n             List<Object> roles = userDAO.findAllRoles(user).stream().\n                     map(r -> r.getKey()).collect(Collectors.toList());"},{"sha":"ef2e98923423fc32d747db7d83322e7505d0d450","filename":"ext/flowable/client-console/pom.xml","status":"added","additions":137,"deletions":0,"changes":137,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,137 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable Client Console</name>\n+  <description>Apache Syncope Ext: Flowable Client Console</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-client-console</artifactId>\n+  <packaging>jar</packaging>\n+  \n+  <properties>\n+    <flowable-modeler.directory>${project.build.directory}/classes/META-INF/resources/flowable-modeler</flowable-modeler.directory>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency> \n+      <groupId>javax.servlet</groupId> \n+      <artifactId>javax.servlet-api</artifactId> \n+      <scope>provided</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-common-lib</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-rest-api</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.client</groupId>\n+      <artifactId>syncope-client-console</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    \n+    <dependency>\n+      <groupId>org.flowable</groupId>\n+      <artifactId>flowable-ui-modeler-app</artifactId>\n+      <type>war</type>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-antrun-plugin</artifactId>\n+        <inherited>true</inherited>\n+        <executions>\n+          <execution>\n+            <id>setupFlowableModeler</id>\n+            <phase>process-resources</phase>\n+            <configuration>\n+              <target>\n+                <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-app/${flowable.version}/flowable-ui-modeler-app-${flowable.version}.war\" dest=\"${flowable-modeler.directory}\">\n+                  <patternset>\n+                    <include name=\"WEB-INF/classes/static/**\" />\n+                    <include name=\"WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\" />\n+                  </patternset>\n+                </unzip>\n+                \n+                <unzip src=\"${flowable-modeler.directory}/WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\" dest=\"${flowable-modeler.directory}\">\n+                  <patternset>\n+                    <include name=\"stencilset_bpmn.json\" />\n+                  </patternset>\n+                </unzip>\n+                \n+                <move todir=\"${flowable-modeler.directory}\">\n+                  <fileset dir=\"${flowable-modeler.directory}/WEB-INF/classes/static/\">\n+                    <include name=\"**\" />\n+                  </fileset>\n+                </move>\n+                <delete dir=\"${flowable-modeler.directory}/WEB-INF\" />\n+                \n+                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;/head&gt;\" value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\" />\n+                <replace file=\"${flowable-modeler.directory}/index.html\" token=\" ng-click=&quot;backToLanding()&quot;\" value=\" disabled=&quot;disabled&quot;\" />\n+                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot;\" value=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot; style=&quot;display: none;&quot;\" />\n+                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;div class=&quot;pull-right\" value=\"&lt;div style=&quot;display: none;&quot; class=&quot;pull-right\" />\n+                <replace file=\"${flowable-modeler.directory}/editor-app/editor.html\" token=\"&lt;div class=&quot;btn-group pull-right&quot;\" value=\"&lt;div style=&quot;display: none;&quot; class=&quot;btn-group pull-right&quot;\" />\n+                <replace file=\"${flowable-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\" token=\"$location.path('/processes');\" value=\"window.close();\" />\n+ \n+                <copy file=\"${basedir}/src/main/resources/app-cfg.js\" todir=\"${flowable-modeler.directory}/scripts\" overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/url-config.js\" todir=\"${flowable-modeler.directory}/editor-app/configuration\" overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/toolbar.js\" todir=\"${flowable-modeler.directory}/editor-app/configuration\" overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/save-model.html\" todir=\"${flowable-modeler.directory}/editor-app/popups\" overwrite=\"true\" />\n+              </target>\n+            </configuration>\n+            <goals>\n+              <goal>run</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+    \n+    <resources>\n+      <resource>\n+        <directory>src/main/resources</directory>\n+        <filtering>true</filtering>\n+      </resource>\n+    </resources>\n+  </build>\n+</project>"},{"sha":"3bea1a90e4cbc1bdf9860c8f1d1991bc57142b63","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/approvals/Approval.java","status":"renamed","additions":8,"deletions":8,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,8 +33,8 @@\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDateTimeFieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.FieldPanel;\n-import org.apache.syncope.common.lib.to.WorkflowFormPropertyTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestFormProperty;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -56,27 +56,27 @@ public abstract class Approval extends Panel {\n \n     protected static final Logger LOG = LoggerFactory.getLogger(Approval.class);\n \n-    public Approval(final PageReference pageRef, final WorkflowFormTO formTO) {\n+    public Approval(final PageReference pageRef, final UserRequestForm formTO) {\n         super(MultilevelPanel.FIRST_LEVEL_ID);\n \n-        IModel<List<WorkflowFormPropertyTO>> formProps = new LoadableDetachableModel<List<WorkflowFormPropertyTO>>() {\n+        IModel<List<UserRequestFormProperty>> formProps = new LoadableDetachableModel<List<UserRequestFormProperty>>() {\n \n             private static final long serialVersionUID = 3169142472626817508L;\n \n             @Override\n-            protected List<WorkflowFormPropertyTO> load() {\n+            protected List<UserRequestFormProperty> load() {\n                 return formTO.getProperties();\n             }\n         };\n \n-        final ListView<WorkflowFormPropertyTO> propView = new ListView<WorkflowFormPropertyTO>(\"propView\", formProps) {\n+        ListView<UserRequestFormProperty> propView = new ListView<UserRequestFormProperty>(\"propView\", formProps) {\n \n             private static final long serialVersionUID = 9101744072914090143L;\n \n             @Override\n             @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n-            protected void populateItem(final ListItem<WorkflowFormPropertyTO> item) {\n-                final WorkflowFormPropertyTO prop = item.getModelObject();\n+            protected void populateItem(final ListItem<UserRequestFormProperty> item) {\n+                final UserRequestFormProperty prop = item.getModelObject();\n \n                 String label = StringUtils.isBlank(prop.getName()) ? prop.getId() : prop.getName();\n ","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/Approval.java"},{"sha":"9606824cc1dd8903f973b0f96946d4e662e9a9f6","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDetails.java","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -25,15 +25,15 @@\n import org.apache.syncope.client.console.wizards.any.UserWizardBuilder;\n import org.apache.syncope.common.lib.AnyOperations;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.wicket.PageReference;\n \n public class ApprovalDetails extends MultilevelPanel.SecondLevel {\n \n     private static final long serialVersionUID = -8847854414429745216L;\n \n-    public ApprovalDetails(final PageReference pageRef, final WorkflowFormTO formTO) {\n+    public ApprovalDetails(final PageReference pageRef, final UserRequestForm formTO) {\n         super(MultilevelPanel.SECOND_LEVEL_ID);\n \n         final UserTO newUserTO;","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDetails.java"},{"sha":"e16f5c2cdc6fc7661094bd256e5cdf5296c99849","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDirectoryPanel.java","status":"renamed","additions":55,"deletions":58,"changes":113,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDirectoryPanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -30,7 +30,7 @@\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.commons.DirectoryDataProvider;\n import org.apache.syncope.client.console.panels.DirectoryPanel;\n-import org.apache.syncope.client.console.rest.UserWorkflowRestClient;\n+import org.apache.syncope.client.console.rest.UserRequestRestClient;\n import org.apache.syncope.client.console.approvals.ApprovalDirectoryPanel.ApprovalProvider;\n import org.apache.syncope.client.console.layout.FormLayoutInfoUtils;\n import org.apache.syncope.client.console.layout.UserFormLayoutInfo;\n@@ -40,6 +40,7 @@\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionsPanel;\n+import org.apache.syncope.client.console.widgets.ApprovalsWidget;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n import org.apache.syncope.client.console.wizards.any.AnyWrapper;\n import org.apache.syncope.client.console.wizards.any.UserWizardBuilder;\n@@ -49,9 +50,9 @@\n import org.apache.syncope.common.lib.patch.UserPatch;\n import org.apache.syncope.common.lib.to.ProvisioningResult;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n@@ -66,11 +67,11 @@\n import org.apache.wicket.model.ResourceModel;\n \n public class ApprovalDirectoryPanel\n-        extends DirectoryPanel<WorkflowFormTO, WorkflowFormTO, ApprovalProvider, UserWorkflowRestClient> {\n+        extends DirectoryPanel<UserRequestForm, UserRequestForm, ApprovalProvider, UserRequestRestClient> {\n \n     private static final long serialVersionUID = -7122136682275797903L;\n \n-    protected final BaseModal<WorkflowFormTO> manageApprovalModal = new BaseModal<WorkflowFormTO>(\"outer\") {\n+    protected final BaseModal<UserRequestForm> manageApprovalModal = new BaseModal<UserRequestForm>(\"outer\") {\n \n         private static final long serialVersionUID = 389935548143327858L;\n \n@@ -98,26 +99,31 @@ public ApprovalDirectoryPanel(final String id, final PageReference pageReference\n             @Override\n             public void onClose(final AjaxRequestTarget target) {\n                 updateResultTable(target);\n-                ((BasePage) pageReference.getPage()).getApprovalsWidget().refreshLatestAlerts(target);\n+\n+                Serializable widget = SyncopeConsoleSession.get().getAttribute(ApprovalsWidget.class.getName());\n+                if (widget instanceof ApprovalsWidget) {\n+                    ((ApprovalsWidget) widget).refreshLatestAlerts(target);\n+                }\n+\n                 manageApprovalModal.show(false);\n             }\n         });\n \n-        restClient = new UserWorkflowRestClient();\n+        restClient = new UserRequestRestClient();\n \n         initResultTable();\n \n-        MetaDataRoleAuthorizationStrategy.authorize(addAjaxLink, RENDER, StandardEntitlement.WORKFLOW_FORM_SUBMIT);\n+        MetaDataRoleAuthorizationStrategy.authorize(addAjaxLink, RENDER, FlowableEntitlement.WORKFLOW_FORM_SUBMIT);\n     }\n \n     @Override\n-    protected List<IColumn<WorkflowFormTO, String>> getColumns() {\n-        List<IColumn<WorkflowFormTO, String>> columns = new ArrayList<>();\n+    protected List<IColumn<UserRequestForm, String>> getColumns() {\n+        List<IColumn<UserRequestForm, String>> columns = new ArrayList<>();\n \n         columns.add(new PropertyColumn<>(\n                 new ResourceModel(\"taskId\"), \"taskId\", \"taskId\"));\n         columns.add(new PropertyColumn<>(\n-                new ResourceModel(\"key\"), \"key\"));\n+                new ResourceModel(\"key\"), \"formKey\", \"formKey\"));\n         columns.add(new PropertyColumn<>(\n                 new ResourceModel(\"username\"), \"username\"));\n         columns.add(new DatePropertyColumn<>(\n@@ -131,28 +137,28 @@ protected List<IColumn<WorkflowFormTO, String>> getColumns() {\n     }\n \n     @Override\n-    public ActionsPanel<WorkflowFormTO> getActions(final IModel<WorkflowFormTO> model) {\n-        final ActionsPanel<WorkflowFormTO> panel = super.getActions(model);\n+    public ActionsPanel<UserRequestForm> getActions(final IModel<UserRequestForm> model) {\n+        final ActionsPanel<UserRequestForm> panel = super.getActions(model);\n \n-        panel.add(new ActionLink<WorkflowFormTO>() {\n+        panel.add(new ActionLink<UserRequestForm>() {\n \n             private static final long serialVersionUID = -3722207913631435501L;\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowFormTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore) {\n                 claimForm(model.getObject().getTaskId());\n                 SyncopeConsoleSession.get().info(getString(Constants.OPERATION_SUCCEEDED));\n                 ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n                 target.add(container);\n             }\n-        }, ActionLink.ActionType.CLAIM, StandardEntitlement.WORKFLOW_FORM_CLAIM);\n+        }, ActionLink.ActionType.CLAIM, FlowableEntitlement.WORKFLOW_FORM_CLAIM);\n \n-        panel.add(new ActionLink<WorkflowFormTO>() {\n+        panel.add(new ActionLink<UserRequestForm>() {\n \n             private static final long serialVersionUID = -3722207913631435501L;\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowFormTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore) {\n                 manageApprovalModal.setFormModel(new CompoundPropertyModel<>(model.getObject()));\n \n                 target.add(manageApprovalModal.setContent(\n@@ -179,23 +185,23 @@ public void onSubmit(final AjaxRequestTarget target) {\n             }\n \n             @Override\n-            protected boolean statusCondition(final WorkflowFormTO modelObject) {\n+            protected boolean statusCondition(final UserRequestForm modelObject) {\n                 return SyncopeConsoleSession.get().getSelfTO().getUsername().\n                         equals(model.getObject().getOwner());\n             }\n \n-        }, ActionLink.ActionType.MANAGE_APPROVAL, StandardEntitlement.WORKFLOW_FORM_READ);\n+        }, ActionLink.ActionType.MANAGE_APPROVAL, FlowableEntitlement.WORKFLOW_FORM_READ);\n \n         // SYNCOPE-1200 edit user while in approval state\n-        panel.add(new ActionLink<WorkflowFormTO>() {\n+        panel.add(new ActionLink<UserRequestForm>() {\n \n             private static final long serialVersionUID = -3722207913631435501L;\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowFormTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final UserRequestForm ignore) {\n                 modal.setFormModel(new CompoundPropertyModel<>(model.getObject()));\n \n-                WorkflowFormTO formTO = model.getObject();\n+                UserRequestForm formTO = model.getObject();\n                 UserTO newUserTO;\n                 UserTO previousUserTO;\n                 if (formTO.getUserPatch() == null) {\n@@ -228,12 +234,12 @@ public void onClick(final AjaxRequestTarget target, final WorkflowFormTO ignore)\n             }\n \n             @Override\n-            protected boolean statusCondition(final WorkflowFormTO modelObject) {\n+            protected boolean statusCondition(final UserRequestForm modelObject) {\n                 return SyncopeConsoleSession.get().getSelfTO().getUsername().\n                         equals(model.getObject().getOwner());\n             }\n \n-        }, ActionLink.ActionType.EDIT_APPROVAL, StandardEntitlement.WORKFLOW_FORM_SUBMIT);\n+        }, ActionLink.ActionType.EDIT_APPROVAL, FlowableEntitlement.WORKFLOW_FORM_SUBMIT);\n \n         return panel;\n     }\n@@ -248,11 +254,11 @@ protected String paginatorRowsKey() {\n         return Constants.PREF_WORKFLOW_FORM_PAGINATOR_ROWS;\n     }\n \n-    public static class ApprovalProvider extends DirectoryDataProvider<WorkflowFormTO> {\n+    public static class ApprovalProvider extends DirectoryDataProvider<UserRequestForm> {\n \n         private static final long serialVersionUID = -2311716167583335852L;\n \n-        private final UserWorkflowRestClient restClient = new UserWorkflowRestClient();\n+        private final UserRequestRestClient restClient = new UserRequestRestClient();\n \n         public ApprovalProvider(final int paginatorRows) {\n             super(paginatorRows);\n@@ -261,7 +267,7 @@ public ApprovalProvider(final int paginatorRows) {\n         }\n \n         @Override\n-        public Iterator<WorkflowFormTO> iterator(final long first, final long count) {\n+        public Iterator<UserRequestForm> iterator(final long first, final long count) {\n             int page = ((int) first / paginatorRows);\n             return restClient.getForms((page < 0 ? 0 : page) + 1, paginatorRows, getSort()).iterator();\n         }\n@@ -272,13 +278,13 @@ public long size() {\n         }\n \n         @Override\n-        public IModel<WorkflowFormTO> model(final WorkflowFormTO form) {\n-            return new IModel<WorkflowFormTO>() {\n+        public IModel<UserRequestForm> model(final UserRequestForm form) {\n+            return new IModel<UserRequestForm>() {\n \n                 private static final long serialVersionUID = -2566070996511906708L;\n \n                 @Override\n-                public WorkflowFormTO getObject() {\n+                public UserRequestForm getObject() {\n                     return form;\n                 }\n             };\n@@ -302,10 +308,10 @@ private class ApprovalUserWizardBuilder extends UserWizardBuilder {\n \n         private static final long serialVersionUID = 1854981134836384069L;\n \n-        private final WorkflowFormTO formTO;\n+        private final UserRequestForm formTO;\n \n         ApprovalUserWizardBuilder(\n-                final WorkflowFormTO formTO,\n+                final UserRequestForm formTO,\n                 final UserTO previousUserTO,\n                 final UserTO userTO,\n                 final List<String> anyTypeClasses,\n@@ -322,37 +328,28 @@ protected Serializable onApplyInternal(final AnyWrapper<UserTO> modelObject) {\n \n             ProvisioningResult<UserTO> result;\n \n-            if (formTO.getUserPatch() == null) {\n+            UserPatch patch = AnyOperations.diff(inner, formTO.getUserTO(), false);\n+\n+            if (StringUtils.isNotBlank(inner.getPassword())) {\n+                PasswordPatch passwordPatch = new PasswordPatch.Builder().\n+                        value(inner.getPassword()).onSyncope(true).resources(inner.\n+                        getResources()).\n+                        build();\n+                patch.setPassword(passwordPatch);\n+            }\n+            // update just if it is changed\n+            if (patch.isEmpty()) {\n                 result = new ProvisioningResult<>();\n-                UserTO user = new UserWorkflowRestClient().executeTask(\"default\", inner);\n-                result.setEntity(user);\n-                claimForm(restClient.getFormForUser(result.getEntity().getKey()).getTaskId());\n+                result.setEntity(inner);\n             } else {\n-                UserPatch patch = AnyOperations.diff(inner, formTO.getUserTO(), false);\n-\n-                if (StringUtils.isNotBlank(inner.getPassword())) {\n-                    PasswordPatch passwordPatch = new PasswordPatch.Builder().\n-                            value(inner.getPassword()).onSyncope(true).resources(inner.\n-                            getResources()).\n-                            build();\n-                    patch.setPassword(passwordPatch);\n+                result = userRestClient.update(getOriginalItem().getInnerObject().getETagValue(), patch);\n+                UserRequestForm workFlowTO = restClient.getForms(result.getEntity().getKey()).get(0);\n+                if (workFlowTO != null) {\n+                    claimForm(workFlowTO.getTaskId());\n                 }\n-                // update just if it is changed\n-                if (patch.isEmpty()) {\n-                    result = new ProvisioningResult<>();\n-                    result.setEntity(inner);\n-                } else {\n-                    result = userRestClient.update(getOriginalItem().getInnerObject().getETagValue(), patch);\n-                    WorkflowFormTO workFlowTO = restClient.getFormForUser(result.getEntity().getKey());\n-                    if (workFlowTO != null) {\n-                        claimForm(workFlowTO.getTaskId());\n-                    }\n-                }\n-\n             }\n \n             return result;\n         }\n     }\n-\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalDirectoryPanel.java"},{"sha":"0cae1c84ddd33c22532d87210b686fd6ae32986f","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalModal.java","status":"renamed","additions":7,"deletions":7,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,28 +22,28 @@\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.panels.MultilevelPanel;\n-import org.apache.syncope.client.console.rest.UserWorkflowRestClient;\n+import org.apache.syncope.client.console.rest.UserRequestRestClient;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.syncope.client.console.panels.SubmitableModalPanel;\n import org.apache.syncope.client.console.panels.WizardModalPanel;\n \n-public class ApprovalModal extends Panel implements SubmitableModalPanel, WizardModalPanel<WorkflowFormTO> {\n+public class ApprovalModal extends Panel implements SubmitableModalPanel, WizardModalPanel<UserRequestForm> {\n \n     private static final long serialVersionUID = -8847854414429745216L;\n \n-    private final UserWorkflowRestClient restClient = new UserWorkflowRestClient();\n+    private final UserRequestRestClient restClient = new UserRequestRestClient();\n \n     private final BaseModal<?> modal;\n \n-    private final WorkflowFormTO formTO;\n+    private final UserRequestForm formTO;\n \n     private final PageReference pageRef;\n \n-    public ApprovalModal(final BaseModal<?> modal, final PageReference pageRef, final WorkflowFormTO formTO) {\n+    public ApprovalModal(final BaseModal<?> modal, final PageReference pageRef, final UserRequestForm formTO) {\n         super(BaseModal.CONTENT_ID);\n         this.modal = modal;\n         this.formTO = formTO;\n@@ -76,7 +76,7 @@ public void onError(final AjaxRequestTarget target) {\n     }\n \n     @Override\n-    public WorkflowFormTO getItem() {\n+    public UserRequestForm getItem() {\n         return this.formTO;\n     }\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/approvals/ApprovalModal.java"},{"sha":"0dbc4dbb05e1b6e529634ec44ae15b98e407c511","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/pages/Approvals.java","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Approvals.java"},{"sha":"562aad127712ebef18ebc5da6937c7451a66011a","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/pages/Flowable.java","status":"renamed","additions":14,"deletions":11,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -20,19 +20,22 @@\n \n import org.apache.syncope.client.console.BookmarkablePageLinkBuilder;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n-import org.apache.syncope.client.console.panels.WorkflowDirectoryPanel;\n+import org.apache.syncope.client.console.annotations.ExtPage;\n+import org.apache.syncope.client.console.panels.BpmnProcessDirectoryPanel;\n import org.apache.syncope.client.console.wizards.WizardMgtPanel;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n-public class Workflow extends BasePage {\n+@ExtPage(label = \"Flowable\", icon = \"fa-briefcase\",\n+        listEntitlement = FlowableEntitlement.BPMN_PROCESS_LIST, priority = 200)\n+public class Flowable extends BaseExtPage {\n \n     private static final long serialVersionUID = -8781434495150074529L;\n \n-    public Workflow(final PageParameters parameters) {\n+    public Flowable(final PageParameters parameters) {\n         super(parameters);\n \n         body.add(BookmarkablePageLinkBuilder.build(\"dashboard\", \"dashboardBr\", Dashboard.class));\n@@ -45,20 +48,20 @@ public Workflow(final PageParameters parameters) {\n         disabled.setOutputMarkupPlaceholderTag(true);\n         content.add(disabled);\n \n-        WizardMgtPanel<WorkflowDefinitionTO> workflowsPanel = new WorkflowDirectoryPanel.Builder(getPageReference()) {\n+        WizardMgtPanel<BpmnProcessTO> bpmnProcessesPanel = new BpmnProcessDirectoryPanel.Builder(getPageReference()) {\n \n             private static final long serialVersionUID = -5960765294082359003L;\n \n-        }.disableCheckBoxes().build(\"workflowsPanel\");\n-        workflowsPanel.setOutputMarkupPlaceholderTag(true);\n-        MetaDataRoleAuthorizationStrategy.authorize(workflowsPanel, ENABLE, StandardEntitlement.WORKFLOW_DEF_LIST);\n+        }.disableCheckBoxes().build(\"bpmnProcessesPanel\");\n+        bpmnProcessesPanel.setOutputMarkupPlaceholderTag(true);\n+        MetaDataRoleAuthorizationStrategy.authorize(bpmnProcessesPanel, ENABLE, FlowableEntitlement.BPMN_PROCESS_LIST);\n \n-        content.add(workflowsPanel);\n+        content.add(bpmnProcessesPanel);\n \n         if (SyncopeConsoleSession.get().getPlatformInfo().getUserWorkflowAdapter().contains(\"Flowable\")) {\n             disabled.setVisible(false);\n         } else {\n-            workflowsPanel.setVisible(false);\n+            bpmnProcessesPanel.setVisible(false);\n         }\n     }\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Workflow.java"},{"sha":"b55d2b50e334952270bbb1fcfa3cb67dc9a299ad","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/pages/FlowableModelerPopupPage.java","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/FlowableModelerPopupPage.java"},{"sha":"b7914bbe54138ce4aa88e4727ef856cc8f555316","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/panels/BpmnProcessDirectoryPanel.java","status":"renamed","additions":52,"deletions":77,"changes":129,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -19,7 +19,6 @@\n package org.apache.syncope.client.console.panels;\n \n import de.agilecoders.wicket.core.markup.html.bootstrap.dialog.Modal;\n-import java.io.File;\n import java.io.IOException;\n import java.util.ArrayList;\n import java.util.Collection;\n@@ -28,17 +27,14 @@\n import java.util.List;\n import javax.ws.rs.core.MediaType;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.syncope.client.console.SyncopeConsoleApplication;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.commons.DirectoryDataProvider;\n import org.apache.syncope.client.console.commons.SortableDataProviderComparator;\n import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.pages.ModelerPopupPage;\n-import org.apache.syncope.client.console.panels.WorkflowDirectoryPanel.WorkflowDefinitionDataProvider;\n-import org.apache.syncope.client.console.rest.WorkflowRestClient;\n-import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.BooleanPropertyColumn;\n-import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.KeyPropertyColumn;\n+import org.apache.syncope.client.console.panels.BpmnProcessDirectoryPanel.BpmProcessDataProvider;\n+import org.apache.syncope.client.console.rest.BpmnProcessRestClient;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.client.console.wicket.markup.html.form.ActionsPanel;\n@@ -47,8 +43,8 @@\n import org.apache.syncope.client.console.wizards.AjaxWizardBuilder;\n import org.apache.syncope.client.console.wizards.WizardMgtPanel;\n import org.apache.syncope.common.lib.SyncopeClientException;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n import org.apache.wicket.Page;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -68,41 +64,41 @@\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.util.io.IOUtils;\n \n-public class WorkflowDirectoryPanel extends DirectoryPanel<\n-        WorkflowDefinitionTO, WorkflowDefinitionTO, WorkflowDefinitionDataProvider, WorkflowRestClient> {\n+public class BpmnProcessDirectoryPanel extends DirectoryPanel<\n+        BpmnProcessTO, BpmnProcessTO, BpmProcessDataProvider, BpmnProcessRestClient> {\n \n     private static final long serialVersionUID = 2705668831139984998L;\n \n-    private final BaseModal<String> utility;\n+    private static final String FLOWABLE_MODELER_CTX = \"flowable-modeler\";\n \n-    private String modelerCtx;\n+    private final BaseModal<String> utility;\n \n-    protected WorkflowDirectoryPanel(final String id, final Builder builder) {\n+    protected BpmnProcessDirectoryPanel(final String id, final Builder builder) {\n         super(id, builder);\n \n-        this.addNewItemPanelBuilder(new AjaxWizardBuilder<WorkflowDefinitionTO>(new WorkflowDefinitionTO(), pageRef) {\n+        this.addNewItemPanelBuilder(new AjaxWizardBuilder<BpmnProcessTO>(new BpmnProcessTO(), pageRef) {\n \n             private static final long serialVersionUID = 1633859795677053912L;\n \n             @Override\n             protected WizardModel buildModelSteps(\n-                    final WorkflowDefinitionTO modelObject, final WizardModel wizardModel) {\n+                    final BpmnProcessTO modelObject, final WizardModel wizardModel) {\n \n                 return wizardModel;\n             }\n         }, false);\n-        final NewWorkflowProcess newWorkflowProcess = new NewWorkflowProcess(\"newWorkflowProcess\", container, pageRef);\n-        addInnerObject(newWorkflowProcess);\n-        AjaxLink<Void> newWorkflowProcessLink = new AjaxLink<Void>(\"add\") {\n+        NewBpmnProcess newBpmnProcess = new NewBpmnProcess(\"newBpmnProcess\", container, pageRef);\n+        addInnerObject(newBpmnProcess);\n+        AjaxLink<Void> newBpmnProcessLink = new AjaxLink<Void>(\"add\") {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n-                newWorkflowProcess.toggle(target, true);\n+                newBpmnProcess.toggle(target, true);\n             }\n         };\n-        ((WebMarkupContainer) get(\"container:content\")).addOrReplace(newWorkflowProcessLink);\n+        ((WebMarkupContainer) get(\"container:content\")).addOrReplace(newBpmnProcessLink);\n \n         setShowResultPage(true);\n \n@@ -112,7 +108,7 @@ public void onClick(final AjaxRequestTarget target) {\n         addOuterObject(utility);\n         utility.size(Modal.Size.Large);\n         AjaxSubmitLink xmlEditorSubmit = utility.addSubmitButton();\n-        MetaDataRoleAuthorizationStrategy.authorize(xmlEditorSubmit, RENDER, StandardEntitlement.WORKFLOW_DEF_SET);\n+        MetaDataRoleAuthorizationStrategy.authorize(xmlEditorSubmit, RENDER, FlowableEntitlement.BPMN_PROCESS_SET);\n         utility.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n \n             private static final long serialVersionUID = 8804221891699487139L;\n@@ -124,24 +120,11 @@ public void onClose(final AjaxRequestTarget target) {\n             }\n         });\n         initResultTable();\n-\n-        // Check if Flowable Modeler directory is found\n-        modelerCtx = null;\n-        try {\n-            if (SyncopeConsoleApplication.get().getFlowableModelerDirectory() != null) {\n-                File baseDir = new File(SyncopeConsoleApplication.get().getFlowableModelerDirectory());\n-                if (baseDir.exists() && baseDir.canRead() && baseDir.isDirectory()) {\n-                    modelerCtx = Constants.FLOWABLE_MODELER_CONTEXT;\n-                }\n-            }\n-        } catch (Exception e) {\n-            LOG.error(\"Could not check for Modeler directory\", e);\n-        }\n     }\n \n     @Override\n-    protected WorkflowDefinitionDataProvider dataProvider() {\n-        return new WorkflowDefinitionDataProvider(rows);\n+    protected BpmProcessDataProvider dataProvider() {\n+        return new BpmProcessDataProvider(rows);\n     }\n \n     @Override\n@@ -150,26 +133,25 @@ protected String paginatorRowsKey() {\n     }\n \n     @Override\n-    protected List<IColumn<WorkflowDefinitionTO, String>> getColumns() {\n-        List<IColumn<WorkflowDefinitionTO, String>> columns = new ArrayList<>();\n+    protected List<IColumn<BpmnProcessTO, String>> getColumns() {\n+        List<IColumn<BpmnProcessTO, String>> columns = new ArrayList<>();\n \n-        columns.add(new KeyPropertyColumn<>(new ResourceModel(\"key\"), \"key\"));\n+        columns.add(new PropertyColumn<>(new ResourceModel(\"key\"), \"key\"));\n         columns.add(new PropertyColumn<>(new ResourceModel(\"name\"), \"name\", \"name\"));\n-        columns.add(new BooleanPropertyColumn<>(new ResourceModel(\"main\"), null, \"main\"));\n \n         return columns;\n     }\n \n     @Override\n-    public ActionsPanel<WorkflowDefinitionTO> getActions(final IModel<WorkflowDefinitionTO> model) {\n-        final ActionsPanel<WorkflowDefinitionTO> panel = super.getActions(model);\n+    public ActionsPanel<BpmnProcessTO> getActions(final IModel<BpmnProcessTO> model) {\n+        final ActionsPanel<BpmnProcessTO> panel = super.getActions(model);\n \n-        panel.add(new ActionLink<WorkflowDefinitionTO>() {\n+        panel.add(new ActionLink<BpmnProcessTO>() {\n \n             private static final long serialVersionUID = -184018732772021627L;\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowDefinitionTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final BpmnProcessTO ignore) {\n                 final IModel<String> wfDefinition = new Model<>();\n                 try {\n                     wfDefinition.setObject(IOUtils.toString(restClient.getDefinition(\n@@ -205,23 +187,23 @@ public void onSubmit(final AjaxRequestTarget target) {\n                 utility.show(target);\n                 target.add(utility);\n             }\n-        }, ActionLink.ActionType.EDIT, StandardEntitlement.WORKFLOW_DEF_SET);\n+        }, ActionLink.ActionType.EDIT, FlowableEntitlement.BPMN_PROCESS_SET);\n \n-        panel.add(new ActionLink<WorkflowDefinitionTO>() {\n+        panel.add(new ActionLink<BpmnProcessTO>() {\n \n             private static final long serialVersionUID = 3109256773218160485L;\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowDefinitionTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final BpmnProcessTO ignore) {\n                 modal.header(Model.of(model.getObject().getKey()));\n                 modal.setContent(new ImageModalPanel<>(\n                         modal, restClient.getDiagram(model.getObject().getKey()), pageRef));\n                 modal.show(target);\n                 target.add(modal);\n             }\n-        }, ActionLink.ActionType.VIEW, StandardEntitlement.WORKFLOW_DEF_GET);\n+        }, ActionLink.ActionType.VIEW, FlowableEntitlement.BPMN_PROCESS_GET);\n \n-        panel.add(new ActionLink<WorkflowDefinitionTO>() {\n+        panel.add(new ActionLink<BpmnProcessTO>() {\n \n             private static final long serialVersionUID = -184018732772021627L;\n \n@@ -233,48 +215,41 @@ public Class<? extends Page> getPageClass() {\n             @Override\n             public PageParameters getPageParameters() {\n                 PageParameters parameters = new PageParameters();\n-                if (modelerCtx != null) {\n-                    parameters.add(Constants.MODELER_CONTEXT, modelerCtx);\n-                }\n+                parameters.add(Constants.MODELER_CONTEXT, FLOWABLE_MODELER_CTX);\n                 parameters.add(Constants.MODEL_ID_PARAM, model.getObject().getModelId());\n \n                 return parameters;\n             }\n \n             @Override\n-            protected boolean statusCondition(final WorkflowDefinitionTO modelObject) {\n-                return modelerCtx != null;\n-            }\n-\n-            @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowDefinitionTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final BpmnProcessTO ignore) {\n                 // do nothing\n             }\n-        }, ActionLink.ActionType.WORKFLOW_MODELER, StandardEntitlement.WORKFLOW_DEF_SET);\n+        }, ActionLink.ActionType.EXTERNAL_EDITOR, FlowableEntitlement.BPMN_PROCESS_SET);\n \n-        panel.add(new ActionLink<WorkflowDefinitionTO>() {\n+        panel.add(new ActionLink<BpmnProcessTO>() {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n-            protected boolean statusCondition(final WorkflowDefinitionTO modelObject) {\n-                return !modelObject.isMain();\n+            protected boolean statusCondition(final BpmnProcessTO modelObject) {\n+                return !modelObject.isUserWorkflow();\n             }\n \n             @Override\n-            public void onClick(final AjaxRequestTarget target, final WorkflowDefinitionTO ignore) {\n+            public void onClick(final AjaxRequestTarget target, final BpmnProcessTO ignore) {\n                 try {\n                     restClient.deleteDefinition(model.getObject().getKey());\n                     SyncopeConsoleSession.get().info(getString(Constants.OPERATION_SUCCEEDED));\n                     target.add(container);\n                 } catch (SyncopeClientException e) {\n-                    LOG.error(\"While deleting workflow definition {}\", model.getObject().getName(), e);\n+                    LOG.error(\"While deleting BPMN definition {}\", model.getObject().getName(), e);\n                     SyncopeConsoleSession.get().error(\n                             StringUtils.isBlank(e.getMessage()) ? e.getClass().getName() : e.getMessage());\n                 }\n                 ((BasePage) pageRef.getPage()).getNotificationPanel().refresh(target);\n             }\n-        }, ActionLink.ActionType.DELETE, StandardEntitlement.WORKFLOW_DEF_DELETE, true);\n+        }, ActionLink.ActionType.DELETE, FlowableEntitlement.BPMN_PROCESS_DELETE, true);\n \n         return panel;\n     }\n@@ -285,37 +260,37 @@ protected Collection<ActionLink.ActionType> getBatches() {\n     }\n \n     public abstract static class Builder\n-            extends DirectoryPanel.Builder<WorkflowDefinitionTO, WorkflowDefinitionTO, WorkflowRestClient> {\n+            extends DirectoryPanel.Builder<BpmnProcessTO, BpmnProcessTO, BpmnProcessRestClient> {\n \n         private static final long serialVersionUID = 5088962796986706805L;\n \n         public Builder(final PageReference pageRef) {\n-            super(new WorkflowRestClient(), pageRef);\n+            super(new BpmnProcessRestClient(), pageRef);\n         }\n \n         @Override\n-        protected WizardMgtPanel<WorkflowDefinitionTO> newInstance(final String id, final boolean wizardInModal) {\n-            return new WorkflowDirectoryPanel(id, this);\n+        protected WizardMgtPanel<BpmnProcessTO> newInstance(final String id, final boolean wizardInModal) {\n+            return new BpmnProcessDirectoryPanel(id, this);\n         }\n     }\n \n-    protected class WorkflowDefinitionDataProvider extends DirectoryDataProvider<WorkflowDefinitionTO> {\n+    protected class BpmProcessDataProvider extends DirectoryDataProvider<BpmnProcessTO> {\n \n         private static final long serialVersionUID = 1764153405387687592L;\n \n-        private final SortableDataProviderComparator<WorkflowDefinitionTO> comparator;\n+        private final SortableDataProviderComparator<BpmnProcessTO> comparator;\n \n-        private final WorkflowRestClient restClient = new WorkflowRestClient();\n+        private final BpmnProcessRestClient restClient = new BpmnProcessRestClient();\n \n-        public WorkflowDefinitionDataProvider(final int paginatorRows) {\n+        public BpmProcessDataProvider(final int paginatorRows) {\n             super(paginatorRows);\n             this.comparator = new SortableDataProviderComparator<>(this);\n-            setSort(\"main\", SortOrder.DESCENDING);\n+            setSort(\"key\", SortOrder.ASCENDING);\n         }\n \n         @Override\n-        public Iterator<WorkflowDefinitionTO> iterator(final long first, final long count) {\n-            List<WorkflowDefinitionTO> result = restClient.getDefinitions();\n+        public Iterator<BpmnProcessTO> iterator(final long first, final long count) {\n+            List<BpmnProcessTO> result = restClient.getDefinitions();\n             Collections.sort(result, comparator);\n             return result.subList((int) first, (int) first + (int) count).iterator();\n         }\n@@ -326,7 +301,7 @@ public long size() {\n         }\n \n         @Override\n-        public IModel<WorkflowDefinitionTO> model(final WorkflowDefinitionTO object) {\n+        public IModel<BpmnProcessTO> model(final BpmnProcessTO object) {\n             return new CompoundPropertyModel<>(object);\n         }\n     }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/WorkflowDirectoryPanel.java"},{"sha":"e28fb627d19158ade3315457de179e3263298665","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/panels/NewBpmnProcess.java","status":"renamed","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,7 +26,7 @@\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.pages.BasePage;\n-import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.syncope.client.console.rest.BpmnProcessRestClient;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxSubmitLink;\n@@ -35,15 +35,15 @@\n import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.model.Model;\n \n-public class NewWorkflowProcess extends TogglePanel<Serializable> {\n+public class NewBpmnProcess extends TogglePanel<Serializable> {\n \n     private static final long serialVersionUID = -4886361549305302161L;\n \n-    private final WorkflowRestClient restClient = new WorkflowRestClient();\n+    private final BpmnProcessRestClient restClient = new BpmnProcessRestClient();\n \n     private final Form<?> form;\n \n-    public NewWorkflowProcess(final String id, final WebMarkupContainer container, final PageReference pageRef) {\n+    public NewBpmnProcess(final String id, final WebMarkupContainer container, final PageReference pageRef) {\n         super(id, pageRef);\n \n         form = new Form<>(\"form\");\n@@ -70,7 +70,7 @@ protected void onSubmit(final AjaxRequestTarget target) {\n                     toggle(target, false);\n                     target.add(container);\n                 } catch (Exception e) {\n-                    LOG.error(\"While creating new workflow process\", e);\n+                    LOG.error(\"While creating new BPMN process\", e);\n                     SyncopeConsoleSession.get().error(\n                             StringUtils.isBlank(e.getMessage())\n                             ? e.getClass().getName() : e.getMessage());","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/NewWorkflowProcess.java"},{"sha":"91a42e3027358b6348da1f408f3627bd4036330d","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/resources/AbstractBpmnProcessResource.java","status":"renamed","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FAbstractBpmnProcessResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FAbstractBpmnProcessResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FAbstractBpmnProcessResource.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -20,32 +20,32 @@\n \n import javax.ws.rs.NotFoundException;\n import org.apache.syncope.client.console.commons.Constants;\n-import org.apache.syncope.client.console.rest.WorkflowRestClient;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.client.console.rest.BpmnProcessRestClient;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.util.string.StringValue;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-abstract class AbstractWorkflowResource extends AbstractResource {\n+abstract class AbstractBpmnProcessResource extends AbstractResource {\n \n     private static final long serialVersionUID = 5163553843196539019L;\n \n-    protected static final Logger LOG = LoggerFactory.getLogger(AbstractWorkflowResource.class);\n+    protected static final Logger LOG = LoggerFactory.getLogger(AbstractBpmnProcessResource.class);\n \n-    protected final WorkflowRestClient restClient = new WorkflowRestClient();\n+    protected final BpmnProcessRestClient restClient = new BpmnProcessRestClient();\n \n-    protected WorkflowDefinitionTO getWorkflowDefinition(final Attributes attributes) {\n-        final StringValue modelId =\n-                attributes.getRequest().getQueryParameters().getParameterValue(Constants.MODEL_ID_PARAM);\n+    protected BpmnProcessTO getBpmnProcess(final Attributes attributes) {\n+        StringValue modelId = attributes.getRequest().getQueryParameters().getParameterValue(Constants.MODEL_ID_PARAM);\n \n-        WorkflowDefinitionTO workflowDefinition = modelId == null || modelId.isNull() ? null\n+        BpmnProcessTO bpmnProcess = modelId == null || modelId.isNull()\n+                ? null\n                 : restClient.getDefinitions().stream().\n                         filter(object -> modelId.toString().equals(object.getModelId())).findAny().orElse(null);\n-        if (workflowDefinition == null) {\n-            throw new NotFoundException(\"Workflow definition with modelId \" + modelId);\n+        if (bpmnProcess == null) {\n+            throw new NotFoundException(\"BPMN process with modelId \" + modelId);\n         }\n \n-        return workflowDefinition;\n+        return bpmnProcess;\n     }\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/AbstractWorkflowResource.java"},{"sha":"ba3450233b98cb6860fcc5e2fdb4823fcee9354b","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/resources/BpmnProcessGETResource.java","status":"renamed","additions":8,"deletions":10,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessGETResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessGETResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessGETResource.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -21,22 +21,22 @@\n import java.io.IOException;\n import java.nio.charset.StandardCharsets;\n import javax.ws.rs.core.MediaType;\n-import org.apache.syncope.client.console.rest.WorkflowRestClient;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.client.console.annotations.Resource;\n+import org.apache.syncope.client.console.rest.BpmnProcessRestClient;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.wicket.util.io.IOUtils;\n \n /**\n- * Mirror REST resource for obtaining user workflow definition in JSON (used by Flowable Modeler).\n- *\n- * @see org.apache.syncope.common.rest.api.service.WorkflowService#get\n+ * Mirror REST resource for obtaining BPMN process in JSON (used by Flowable Modeler).\n  */\n-public class WorkflowDefGETResource extends AbstractWorkflowResource {\n+@Resource(key = \"bpmnProcessGET\", path = \"/bpmnProcessGET\")\n+public class BpmnProcessGETResource extends AbstractBpmnProcessResource {\n \n     private static final long serialVersionUID = 4637304868056148970L;\n \n     @Override\n     protected ResourceResponse newResourceResponse(final Attributes attributes) {\n-        final WorkflowDefinitionTO toGet = getWorkflowDefinition(attributes);\n+        final BpmnProcessTO toGet = getBpmnProcess(attributes);\n \n         ResourceResponse response = new ResourceResponse();\n         response.disableCaching();\n@@ -46,13 +46,11 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n \n             @Override\n             public void writeData(final Attributes attributes) throws IOException {\n-                IOUtils.copy(\n-                        new WorkflowRestClient().getDefinition(MediaType.APPLICATION_JSON_TYPE, toGet.getKey()),\n+                IOUtils.copy(new BpmnProcessRestClient().getDefinition(MediaType.APPLICATION_JSON_TYPE, toGet.getKey()),\n                         attributes.getResponse().getOutputStream());\n             }\n         });\n \n         return response;\n     }\n-\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/WorkflowDefGETResource.java"},{"sha":"d58339655749b485fa687f597a2fc8bd7b45c044","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/resources/BpmnProcessPUTResource.java","status":"renamed","additions":10,"deletions":11,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessPUTResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessPUTResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FBpmnProcessPUTResource.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -23,15 +23,15 @@\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.cxf.common.util.UrlUtils;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.client.console.annotations.Resource;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.wicket.util.io.IOUtils;\n \n /**\n- * Mirror REST resource for putting user workflow definition in JSON (used by Flowable Modeler).\n- *\n- * @see org.apache.syncope.common.rest.api.service.WorkflowService#set\n+ * Mirror REST resource for setting BPMN process in JSON (used by Flowable Modeler).\n  */\n-public class WorkflowDefPUTResource extends AbstractWorkflowResource {\n+@Resource(key = \"bpmnProcessPUT\", path = \"/bpmnProcessPUT\")\n+public class BpmnProcessPUTResource extends AbstractBpmnProcessResource {\n \n     private static final long serialVersionUID = 2964542005207297944L;\n \n@@ -49,26 +49,25 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n                 }\n             }\n         } catch (IOException e) {\n-            LOG.error(\"Could not extract workflow definition\", e);\n+            LOG.error(\"Could not extract BPMN process\", e);\n         }\n \n-        WorkflowDefinitionTO toSet = getWorkflowDefinition(attributes);\n+        BpmnProcessTO toSet = getBpmnProcess(attributes);\n \n         if (definition == null || toSet == null) {\n             return new ResourceResponse().setStatusCode(Response.Status.BAD_REQUEST.getStatusCode()).\n                     setError(Response.Status.BAD_REQUEST.getStatusCode(),\n-                            \"Could not extract workflow model id and / or definition\");\n+                            \"Could not extract BPMN process' model id and / or definition\");\n         }\n \n         try {\n             restClient.setDefinition(MediaType.APPLICATION_JSON_TYPE, toSet.getKey(), definition);\n             return new ResourceResponse().setStatusCode(Response.Status.NO_CONTENT.getStatusCode());\n         } catch (Exception e) {\n-            LOG.error(\"While updating workflow definition\", e);\n+            LOG.error(\"While updating BPMN process\", e);\n             return new ResourceResponse().setStatusCode(Response.Status.BAD_REQUEST.getStatusCode()).\n                     setError(Response.Status.BAD_REQUEST.getStatusCode(),\n-                            \"While updating workflow definition: \" + e.getMessage());\n+                            \"While updating BPMN process: \" + e.getMessage());\n         }\n     }\n-\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/WorkflowDefPUTResource.java"},{"sha":"2b7c36810ab62b8d66f6d4fdfbd92f3e2ff1aee1","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/rest/BpmnProcessRestClient.java","status":"renamed","additions":12,"deletions":13,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FBpmnProcessRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FBpmnProcessRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FBpmnProcessRestClient.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -25,33 +25,32 @@\n import org.apache.cxf.helpers.IOUtils;\n import org.apache.cxf.jaxrs.client.WebClient;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.types.AnyTypeKind;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.syncope.common.rest.api.RESTHeaders;\n-import org.apache.syncope.common.rest.api.service.WorkflowService;\n+import org.apache.syncope.common.rest.api.service.BpmnProcessService;\n \n-public class WorkflowRestClient extends BaseRestClient {\n+public class BpmnProcessRestClient extends BaseRestClient {\n \n     private static final long serialVersionUID = 5049285686167071017L;\n \n-    private WorkflowService getService(final MediaType mediaType) {\n-        return SyncopeConsoleSession.get().getService(mediaType, WorkflowService.class);\n+    private BpmnProcessService getService(final MediaType mediaType) {\n+        return SyncopeConsoleSession.get().getService(mediaType, BpmnProcessService.class);\n     }\n \n-    public List<WorkflowDefinitionTO> getDefinitions() {\n-        return getService(WorkflowService.class).list(AnyTypeKind.USER.name());\n+    public List<BpmnProcessTO> getDefinitions() {\n+        return getService(BpmnProcessService.class).list();\n     }\n \n     public InputStream getDefinition(final MediaType mediaType, final String key) {\n-        Response response = getService(mediaType).get(AnyTypeKind.USER.name(), key);\n+        Response response = getService(mediaType).get(key);\n \n         return (InputStream) response.getEntity();\n     }\n \n     public byte[] getDiagram(final String key) {\n-        WorkflowService service = getService(WorkflowService.class);\n+        BpmnProcessService service = getService(BpmnProcessService.class);\n         WebClient.client(service).accept(RESTHeaders.MEDIATYPE_IMAGE_PNG);\n-        Response response = service.exportDiagram(AnyTypeKind.USER.name(), key);\n+        Response response = service.exportDiagram(key);\n \n         byte[] diagram;\n         try {\n@@ -64,10 +63,10 @@ public byte[] getDiagram(final String key) {\n     }\n \n     public void setDefinition(final MediaType mediaType, final String key, final String definition) {\n-        getService(mediaType).set(AnyTypeKind.USER.name(), key, definition);\n+        getService(mediaType).set(key, definition);\n     }\n \n     public void deleteDefinition(final String key) {\n-        getService(WorkflowService.class).delete(AnyTypeKind.USER.name(), key);\n+        getService(BpmnProcessService.class).delete(key);\n     }\n }","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/WorkflowRestClient.java"},{"sha":"555555b90de976d39ef2cac8797740f82b375755","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/rest/UserRequestRestClient.java","status":"added","additions":54,"deletions":0,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserRequestRestClient.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,54 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.rest;\n+\n+import java.util.List;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.rest.api.beans.UserRequestFormQuery;\n+import org.apache.wicket.extensions.markup.html.repeater.util.SortParam;\n+import org.apache.syncope.common.rest.api.service.UserRequestService;\n+\n+public class UserRequestRestClient extends BaseRestClient {\n+\n+    private static final long serialVersionUID = -4785231164900813921L;\n+\n+    public int countForms() {\n+        return getService(UserRequestService.class).\n+                getForms(new UserRequestFormQuery.Builder().page(1).size(1).build()).\n+                getTotalCount();\n+    }\n+\n+    public List<UserRequestForm> getForms(final int page, final int size, final SortParam<String> sort) {\n+        return getService(UserRequestService.class).\n+                getForms(new UserRequestFormQuery.Builder().page(page).size(size).orderBy(toOrderBy(sort)).build()).\n+                getResult();\n+    }\n+\n+    public List<UserRequestForm> getForms(final String userKey) {\n+        return getService(UserRequestService.class).getForms(userKey);\n+    }\n+\n+    public UserRequestForm claimForm(final String taskKey) {\n+        return getService(UserRequestService.class).claimForm(taskKey);\n+    }\n+\n+    public void submitForm(final UserRequestForm form) {\n+        getService(UserRequestService.class).submitForm(form);\n+    }\n+}"},{"sha":"68d5856989ff68323a8ad8d0ab97fe91cff2f9c1","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/rest/UserWorkflowTaskRestClient.java","status":"added","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowTaskRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowTaskRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowTaskRestClient.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.rest;\n+\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.common.rest.api.service.UserWorkflowTaskService;\n+\n+public class UserWorkflowTaskRestClient extends BaseRestClient {\n+\n+    private static final long serialVersionUID = 5765024947677482995L;\n+\n+    public UserTO executeNextTask(final UserTO userTO) {\n+        WorkflowTaskExecInput input = new WorkflowTaskExecInput();\n+        input.setUserKey(userTO.getKey());\n+        return getService(UserWorkflowTaskService.class).executeNextTask(input);\n+    }\n+}"},{"sha":"8f8329e872406b5361ffc7bdd0dae53135ad7533","filename":"ext/flowable/client-console/src/main/java/org/apache/syncope/client/console/widgets/ApprovalsWidget.java","status":"renamed","additions":18,"deletions":16,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -25,11 +25,12 @@\n import java.util.List;\n import org.apache.syncope.client.console.BookmarkablePageLinkBuilder;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n+import org.apache.syncope.client.console.annotations.ExtWidget;\n import org.apache.syncope.client.console.pages.Approvals;\n-import org.apache.syncope.client.console.rest.UserWorkflowRestClient;\n+import org.apache.syncope.client.console.rest.UserRequestRestClient;\n import org.apache.syncope.client.console.wicket.ajax.IndicatorAjaxTimerBehavior;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n@@ -41,13 +42,14 @@\n import org.apache.wicket.model.util.ListModel;\n import org.apache.wicket.util.time.Duration;\n \n-public class ApprovalsWidget extends AlertWidget<WorkflowFormTO> {\n+@ExtWidget(priority = 10)\n+public class ApprovalsWidget extends ExtAlertWidget<UserRequestForm> {\n \n     private static final long serialVersionUID = 7667120094526529934L;\n \n-    private final UserWorkflowRestClient restClient = new UserWorkflowRestClient();\n+    private final UserRequestRestClient restClient = new UserRequestRestClient();\n \n-    private final List<WorkflowFormTO> lastApprovals = new ArrayList<>();\n+    private final List<UserRequestForm> lastApprovals = new ArrayList<>();\n \n     public ApprovalsWidget(final String id, final PageReference pageRef) {\n         super(id);\n@@ -85,27 +87,27 @@ public final void refreshLatestAlerts(final AjaxRequestTarget target) {\n \n     @Override\n     protected int getLatestAlertsSize() {\n-        return SyncopeConsoleSession.get().owns(StandardEntitlement.WORKFLOW_FORM_LIST)\n-                && SyncopeConsoleSession.get().owns(StandardEntitlement.WORKFLOW_FORM_READ)\n+        return SyncopeConsoleSession.get().owns(FlowableEntitlement.WORKFLOW_FORM_LIST)\n+                && SyncopeConsoleSession.get().owns(FlowableEntitlement.WORKFLOW_FORM_READ)\n                 ? restClient.countForms()\n                 : 0;\n     }\n \n     @Override\n-    protected IModel<List<WorkflowFormTO>> getLatestAlerts() {\n-        return new ListModel<WorkflowFormTO>() {\n+    protected IModel<List<UserRequestForm>> getLatestAlerts() {\n+        return new ListModel<UserRequestForm>() {\n \n             private static final long serialVersionUID = -2583290457773357445L;\n \n             @Override\n-            public List<WorkflowFormTO> getObject() {\n-                List<WorkflowFormTO> updatedApprovals;\n-                if (SyncopeConsoleSession.get().owns(StandardEntitlement.WORKFLOW_FORM_LIST)\n-                        && SyncopeConsoleSession.get().owns(StandardEntitlement.WORKFLOW_FORM_READ)) {\n+            public List<UserRequestForm> getObject() {\n+                List<UserRequestForm> updatedApprovals;\n+                if (SyncopeConsoleSession.get().owns(FlowableEntitlement.WORKFLOW_FORM_LIST)\n+                        && SyncopeConsoleSession.get().owns(FlowableEntitlement.WORKFLOW_FORM_READ)) {\n \n                     updatedApprovals = restClient.getForms(1, MAX_SIZE, new SortParam<>(\"createTime\", true));\n                 } else {\n-                    updatedApprovals = Collections.<WorkflowFormTO>emptyList();\n+                    updatedApprovals = Collections.<UserRequestForm>emptyList();\n                 }\n \n                 return updatedApprovals;\n@@ -116,7 +118,7 @@ public List<WorkflowFormTO> getObject() {\n     @Override\n     protected AbstractLink getEventsLink(final String linkid) {\n         BookmarkablePageLink<Approvals> approvals = BookmarkablePageLinkBuilder.build(linkid, Approvals.class);\n-        MetaDataRoleAuthorizationStrategy.authorize(approvals, WebPage.ENABLE, StandardEntitlement.WORKFLOW_FORM_LIST);\n+        MetaDataRoleAuthorizationStrategy.authorize(approvals, WebPage.ENABLE, FlowableEntitlement.WORKFLOW_FORM_LIST);\n         return approvals;\n     }\n ","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/widgets/ApprovalsWidget.java"},{"sha":"15ec23aad017a0a462995ea55b52474be96a823e","filename":"ext/flowable/client-console/src/main/resources/app-cfg.js","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fapp-cfg.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fapp-cfg.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fapp-cfg.js?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"fit/console-reference/src/main/resources/app-cfg.js"},{"sha":"64805b9d59b53099aee3b427118266e75b89a140","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval.html"},{"sha":"450ff508db4955139864fbf072dcbc182ffe8cdf","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval.properties"},{"sha":"1de2361f09c328e10e314416e78ff788a618a8b1","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalDetails.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalDetails.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalDetails.html"},{"sha":"5d5d1294ef2edaa3b40366b436286c1a8c24a4a4","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal.html"},{"sha":"941c89687fc9439125a5a0c5d34c6d65f81a0865","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal.properties"},{"sha":"941c89687fc9439125a5a0c5d34c6d65f81a0865","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_it.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_it.properties"},{"sha":"84106b96c454efa38b6f6f95e8807fab9fc5c402","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_ja.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_ja.properties"},{"sha":"941c89687fc9439125a5a0c5d34c6d65f81a0865","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_pt_BR.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_pt_BR.properties"},{"sha":"941c89687fc9439125a5a0c5d34c6d65f81a0865","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_ru.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApprovalModal_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/ApprovalModal_ru.properties"},{"sha":"92c475d20e9f23baa636ca3228169e5c214b91e9","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_it.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_it.properties"},{"sha":"5a9cc2d8aa55217aab45c5721cfbc4cc46338aa8","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_ja.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_ja.properties"},{"sha":"00a897153924921a6f6a49158f1f100c7483b772","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_pt_BR.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_pt_BR.properties"},{"sha":"02c159a166b9e2f0cd2988c60327502735bff290","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_ru.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fapprovals%2FApproval_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/approvals/Approval_ru.properties"},{"sha":"5bf62344e4d21a7a2e1e4eca083213ab11a1449f","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals.html"},{"sha":"1ea806333afbf9525964ff0167709d43a08d1d79","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals.properties"},{"sha":"7e12ce5ff7b3f4f3f0e29dc423cb5d245098db8f","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_it.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_it.properties"},{"sha":"b2ff626122775f28f49b009e0642eec4f4ff0630","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_ja.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_ja.properties"},{"sha":"e5ff74cffb275661c13b084e0a57a9bfe1b155f9","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_pt_BR.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_pt_BR.properties"},{"sha":"6f4fb58b75d4877a5ecc7dbd30ff36bf45a2c654","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_ru.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FApprovals_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Approvals_ru.properties"},{"sha":"b23fab0c3cd58bc78e0e399b656a3da9bdb763de","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable.html","status":"renamed","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,15 +22,15 @@\n       <h1>&nbsp;</h1>\n       <ol class=\"breadcrumb\">\n         <li><a wicket:id=\"dashboardBr\"><i class=\"fa fa-dashboard\"></i> <wicket:message key=\"dashboard\"/></a></li>\n-        <li class=\"active\"><wicket:message key=\"configuration\"/></li>\n-        <li class=\"active\"><wicket:message key=\"workflow\"/></li>\n+        <li class=\"active\"><wicket:message key=\"extensions\"/></li>\n+        <li class=\"active\">Flowable</li>\n       </ol>\n     </section>\n \n     <section class=\"content\" wicket:id=\"content\">\n       <span wicket:id=\"disabled\"><i><wicket:message key=\"disabled\"/></i></span>\n       <div class=\"box\">\n-        <div class=\"box-body\" wicket:id=\"workflowsPanel\"/>\n+        <div class=\"box-body\" wicket:id=\"bpmnProcessesPanel\"/>\n       </div>\n     </section>\n   </wicket:extend>","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow.html"},{"sha":"5b088d6d6c3b0d5ebdf1cd2308c325fc99038358","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable.properties","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -14,6 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-noFlowableEnabledForUsers=Flowable not enabled for users\n xmlEditorTitle=Workflow XML Editor\n-main=Main\n+userWorkflow=User workflow\n+external_editor.title=Flowable Modeler","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow.properties"},{"sha":"e1afe7239ab119cb2198b964c0accb5077aaaddc","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/FlowableModelerPopupPage.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowableModelerPopupPage.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/FlowableModelerPopupPage.html"},{"sha":"37fd8593b36eb4deff24db23ec74a07d3eb68441","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable_it.properties","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -14,6 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-noFlowableEnabledForUsers=Flowable non configurato per gli utenti\n xmlEditorTitle=Workflow XML Editor\n-main=Principale\n+userWorkflow=Workflow utenti\n+external_editor.title=Flowable Modeler","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_it.properties"},{"sha":"e811544166e92ac7d505653f086d78a3c71c8f1a","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable_ja.properties","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -14,6 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-noFlowableEnabledForUsers=\\u30d5\\u30ed\\u30fc\\u53ef\\u80fd\\u306f\\u30e6\\u30fc\\u30b6\\u30fc\\u306b\\u5bfe\\u3057\\u3066\\u6709\\u52b9\\u3067\\u306f\\u3042\\u308a\\u307e\\u305b\\u3093\n xmlEditorTitle=\\u30ef\\u30fc\\u30af\\u30d5\\u30ed\\u30fc XML \\u30a8\\u30c7\\u30a3\\u30bf\\u30fc\n-main=Main\n+userWorkflow=User workflow\n+external_editor.title=Flowable Modeler","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_ja.properties"},{"sha":"5b088d6d6c3b0d5ebdf1cd2308c325fc99038358","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable_pt_BR.properties","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -14,6 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-noFlowableEnabledForUsers=Flowable n\\u00e3o habilitado para usu\\u00e1rios\n xmlEditorTitle=Workflow XML Editor\n-main=Main\n+userWorkflow=User workflow\n+external_editor.title=Flowable Modeler","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_pt_BR.properties"},{"sha":"515fa3ae7257bf186d5e2aaf13d41c5d5f7fae00","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/pages/Flowable_ru.properties","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FFlowable_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -14,6 +14,6 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-noFlowableEnabledForUsers=Flowable \\u043e\\u0442\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d \\u0434\\u043b\\u044f \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439\n xmlEditorTitle=XML \\u0440\\u0435\\u0434\\u0430\\u043a\\u0442\\u043e\\u0440 \\u043f\\u0440\\u043e\\u0446\\u0435\\u0441\\u0441\\u0430 \\u0441\\u043e\\u0433\\u043b\\u0430\\u0441\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f\n-main=Main\n+userWorkflow=User workflow\n+external_editor.title=Flowable Modeler","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_ru.properties"},{"sha":"a755298036694bae1a61a6e5b40ccde0b58a65ae","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/panels/BpmnProcessDirectoryPanel.html","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FBpmnProcessDirectoryPanel.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,6 +18,6 @@\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n   <wicket:extend>\n-    <span wicket:id=\"newWorkflowProcess\"/>\n+    <span wicket:id=\"newBpmnProcess\"/>\n   </wicket:extend>\n </html>","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/WorkflowDirectoryPanel.html"},{"sha":"6197d5ae8cb50d5d434b53789e91e8c31d67b185","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/panels/NewBpmnProcess.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FNewBpmnProcess.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/NewWorkflowProcess.html"},{"sha":"594319741a6ea456c94b30e4b14a04d3bcf77374","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/panels/empty.bpmn20.xml","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fempty.bpmn20.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fempty.bpmn20.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2Fempty.bpmn20.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/empty.bpmn20.xml"},{"sha":"dd5b98f97a40518c243bdbc11b0a73b5d168ad9a","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget.properties"},{"sha":"7b2287e45a7aad3ea386381d7dac3581602d0d33","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_it.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_it.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_it.properties"},{"sha":"a6089eb857fffa43fee3debb349df0d7bd195be2","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_ja.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ja.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_ja.properties"},{"sha":"c24f3d8f7465bcd50e0a60564a7ce00f350a3a41","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_pt_BR.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_pt_BR.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_pt_BR.properties"},{"sha":"10281ff5872ab887fb00c079f0ca951192495360","filename":"ext/flowable/client-console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_ru.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwidgets%2FApprovalsWidget_ru.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/widgets/ApprovalsWidget_ru.properties"},{"sha":"abd5ecf86203f14b37a4c4b39ae39a79205394e7","filename":"ext/flowable/client-console/src/main/resources/save-model.html","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fsave-model.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fsave-model.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Fsave-model.html?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"fit/console-reference/src/main/resources/save-model.html"},{"sha":"920718cc75bc976e826a5540092b0964ec58b066","filename":"ext/flowable/client-console/src/main/resources/toolbar.js","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Ftoolbar.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Ftoolbar.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Ftoolbar.js?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"fit/console-reference/src/main/resources/toolbar.js"},{"sha":"392d4705397cb44089e0513bfc80aaa0707b74af","filename":"ext/flowable/client-console/src/main/resources/url-config.js","status":"renamed","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Furl-config.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Furl-config.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fclient-console%2Fsrc%2Fmain%2Fresources%2Furl-config.js?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@ FLOWABLE.URL = {\n \n     getModel: function(modelId) {\n     return window.location.toString().substr(0, window.location.toString().indexOf('/flowable-modeler'))\n-            + \"/workflowDefGET?modelId=\" + modelId;\n+            + \"/bpmnProcessGET?modelId=\" + modelId;\n     },\n \n     getStencilSet: function() {\n@@ -30,10 +30,10 @@ FLOWABLE.URL = {\n \n     putModel: function(modelId) {\n     return window.location.toString().substr(0, window.location.toString().indexOf('/flowable-modeler'))\n-            + \"/workflowDefPUT?modelId=\" + modelId;\n+            + \"/bpmnProcessPUT?modelId=\" + modelId;\n     },\n     \n     validateModel: function(){\n \t\treturn FLOWABLE.CONFIG.contextRoot + '/app/rest/model/validate';\n     }\n-};\n\\ No newline at end of file\n+};","previous_filename":"fit/console-reference/src/main/resources/url-config.js"},{"sha":"04ffeb79115bf43e0a0b0b583d2540611637390d","filename":"ext/flowable/common-lib/pom.xml","status":"added","additions":56,"deletions":0,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,56 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable Common Lib</name>\n+  <description>Apache Syncope Ext: Flowable Common Lib</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-common-lib</artifactId>\n+  <packaging>jar</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.syncope.common</groupId>\n+      <artifactId>syncope-common-lib</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>"},{"sha":"bb67e3e0740606f11736e62d685a52bf746959a6","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/BpmnProcessTO.java","status":"renamed","additions":9,"deletions":8,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FBpmnProcessTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FBpmnProcessTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FBpmnProcessTO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,9 +22,9 @@\n import javax.xml.bind.annotation.XmlType;\n import org.apache.syncope.common.lib.AbstractBaseBean;\n \n-@XmlRootElement(name = \"workflowDefinition\")\n+@XmlRootElement(name = \"bpmnProcess\")\n @XmlType\n-public class WorkflowDefinitionTO extends AbstractBaseBean {\n+public class BpmnProcessTO extends AbstractBaseBean implements EntityTO {\n \n     private static final long serialVersionUID = -7044543391316529128L;\n \n@@ -34,12 +34,14 @@ public class WorkflowDefinitionTO extends AbstractBaseBean {\n \n     private String name;\n \n-    private boolean main;\n+    private boolean userWorkflow;\n \n+    @Override\n     public String getKey() {\n         return key;\n     }\n \n+    @Override\n     public void setKey(final String key) {\n         this.key = key;\n     }\n@@ -60,12 +62,11 @@ public void setName(final String name) {\n         this.name = name;\n     }\n \n-    public boolean isMain() {\n-        return main;\n+    public boolean isUserWorkflow() {\n+        return userWorkflow;\n     }\n \n-    public void setMain(final boolean main) {\n-        this.main = main;\n+    public void setUserWorkflow(final boolean userWorkflow) {\n+        this.userWorkflow = userWorkflow;\n     }\n-\n }","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowDefinitionTO.java"},{"sha":"897cfc060afeb0301ec9d2da6cc8699d5ad154e9","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/UserRequestForm.java","status":"renamed","additions":10,"deletions":10,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestForm.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -31,17 +31,17 @@\n import org.apache.syncope.common.lib.AbstractBaseBean;\n import org.apache.syncope.common.lib.patch.UserPatch;\n \n-@XmlRootElement(name = \"workflowForm\")\n+@XmlRootElement(name = \"userRequestForm\")\n @XmlType\n-public class WorkflowFormTO extends AbstractBaseBean {\n+public class UserRequestForm extends AbstractBaseBean {\n \n     private static final long serialVersionUID = -7044543391316529128L;\n \n     private String username;\n \n     private String taskId;\n \n-    private String key;\n+    private String formKey;\n \n     private Date createTime;\n \n@@ -53,7 +53,7 @@ public class WorkflowFormTO extends AbstractBaseBean {\n \n     private UserPatch userPatch;\n \n-    private final List<WorkflowFormPropertyTO> properties = new ArrayList<>();\n+    private final List<UserRequestFormProperty> properties = new ArrayList<>();\n \n     public String getUsername() {\n         return username;\n@@ -71,12 +71,12 @@ public void setTaskId(final String taskId) {\n         this.taskId = taskId;\n     }\n \n-    public String getKey() {\n-        return key;\n+    public String getFormKey() {\n+        return formKey;\n     }\n \n-    public void setKey(final String key) {\n-        this.key = key;\n+    public void setFormKey(final String formKey) {\n+        this.formKey = formKey;\n     }\n \n     public Date getCreateTime() {\n@@ -134,14 +134,14 @@ public void setUserPatch(final UserPatch userPatch) {\n     }\n \n     @JsonIgnore\n-    public Optional<WorkflowFormPropertyTO> getProperty(final String id) {\n+    public Optional<UserRequestFormProperty> getProperty(final String id) {\n         return properties.stream().filter(property -> id.equals(property.getId())).findFirst();\n     }\n \n     @XmlElementWrapper(name = \"workflowFormProperties\")\n     @XmlElement(name = \"workflowFormProperty\")\n     @JsonProperty(\"workflowFormProperties\")\n-    public List<WorkflowFormPropertyTO> getProperties() {\n+    public List<UserRequestFormProperty> getProperties() {\n         return properties;\n     }\n }","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowFormTO.java"},{"sha":"0a431c627734cf50ec9980119279b9e6ccad363a","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/UserRequestFormProperty.java","status":"renamed","additions":16,"deletions":16,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestFormProperty.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestFormProperty.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestFormProperty.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,21 +26,19 @@\n import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n import org.apache.syncope.common.lib.AbstractBaseBean;\n import org.apache.syncope.common.lib.jaxb.XmlGenericMapAdapter;\n-import org.apache.syncope.common.lib.types.WorkflowFormPropertyType;\n+import org.apache.syncope.common.lib.types.UserRequestFormPropertyType;\n \n-@XmlRootElement(name = \"workflowFormProperty\")\n+@XmlRootElement(name = \"userRequestFormProperty\")\n @XmlType\n-public class WorkflowFormPropertyTO extends AbstractBaseBean {\n+public class UserRequestFormProperty extends AbstractBaseBean {\n \n     private static final long serialVersionUID = 9139969592634304261L;\n \n     private String id;\n \n     private String name;\n \n-    private WorkflowFormPropertyType type;\n-\n-    private String value;\n+    private UserRequestFormPropertyType type;\n \n     private boolean readable;\n \n@@ -53,6 +51,8 @@ public class WorkflowFormPropertyTO extends AbstractBaseBean {\n     @XmlJavaTypeAdapter(XmlGenericMapAdapter.class)\n     private final Map<String, String> enumValues = new HashMap<>();\n \n+    private String value;\n+\n     public String getId() {\n         return id;\n     }\n@@ -85,22 +85,14 @@ public void setRequired(final boolean required) {\n         this.required = required;\n     }\n \n-    public WorkflowFormPropertyType getType() {\n+    public UserRequestFormPropertyType getType() {\n         return type;\n     }\n \n-    public void setType(final WorkflowFormPropertyType type) {\n+    public void setType(final UserRequestFormPropertyType type) {\n         this.type = type;\n     }\n \n-    public String getValue() {\n-        return value;\n-    }\n-\n-    public void setValue(final String value) {\n-        this.value = value;\n-    }\n-\n     public boolean isWritable() {\n         return writable;\n     }\n@@ -121,4 +113,12 @@ public void setDatePattern(final String datePattern) {\n     public Map<String, String> getEnumValues() {\n         return enumValues;\n     }\n+\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    public void setValue(final String value) {\n+        this.value = value;\n+    }\n }","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowFormPropertyTO.java"},{"sha":"d5fad6cb15006bc1e3687e2ce62be9131c212f65","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/UserRequestTO.java","status":"added","additions":70,"deletions":0,"changes":70,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FUserRequestTO.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,70 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.to;\n+\n+import javax.xml.bind.annotation.XmlRootElement;\n+import javax.xml.bind.annotation.XmlType;\n+import org.apache.syncope.common.lib.AbstractBaseBean;\n+\n+@XmlRootElement(name = \"userRequest\")\n+@XmlType\n+public class UserRequestTO extends AbstractBaseBean {\n+\n+    private static final long serialVersionUID = -8430826310789942133L;\n+\n+    private String processInstanceId;\n+\n+    private String executionId;\n+\n+    private String bpmnProcess;\n+\n+    private String user;\n+\n+    public String getProcessInstanceId() {\n+        return processInstanceId;\n+    }\n+\n+    public void setProcessInstanceId(final String processInstanceId) {\n+        this.processInstanceId = processInstanceId;\n+    }\n+\n+    public String getExecutionId() {\n+        return executionId;\n+    }\n+\n+    public void setExecutionId(final String executionId) {\n+        this.executionId = executionId;\n+    }\n+\n+    public String getBpmnProcess() {\n+        return bpmnProcess;\n+    }\n+\n+    public void setBpmnProcess(final String bpmnProcess) {\n+        this.bpmnProcess = bpmnProcess;\n+    }\n+\n+    public String getUser() {\n+        return user;\n+    }\n+\n+    public void setUser(final String user) {\n+        this.user = user;\n+    }\n+}"},{"sha":"6b712abc2f737d2d1165eada865b535d5907500a","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowTask.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTask.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTask.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTask.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -24,7 +24,7 @@\n \n @XmlRootElement(name = \"workflowTask\")\n @XmlType\n-public class WorkflowTaskTO extends AbstractBaseBean {\n+public class WorkflowTask extends AbstractBaseBean {\n \n     private static final long serialVersionUID = -3095016727396210808L;\n ","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowTaskTO.java"},{"sha":"0a7e2bec496de684650171d4fe4db434332d5b19","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/to/WorkflowTaskExecInput.java","status":"added","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTaskExecInput.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTaskExecInput.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FWorkflowTaskExecInput.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,55 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.to;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import java.util.HashMap;\n+import java.util.Map;\n+import javax.ws.rs.PathParam;\n+import javax.xml.bind.annotation.XmlRootElement;\n+import javax.xml.bind.annotation.XmlType;\n+import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n+import org.apache.syncope.common.lib.AbstractBaseBean;\n+import org.apache.syncope.common.lib.jaxb.XmlGenericMapAdapter;\n+\n+@XmlRootElement(name = \"workflowTaskExecInput\")\n+@XmlType\n+public class WorkflowTaskExecInput extends AbstractBaseBean {\n+\n+    private static final long serialVersionUID = 8060283119070901756L;\n+\n+    private String userKey;\n+\n+    @XmlJavaTypeAdapter(XmlGenericMapAdapter.class)\n+    private final Map<String, String> variables = new HashMap<>();\n+\n+    public String getUserKey() {\n+        return userKey;\n+    }\n+\n+    @PathParam(\"userKey\")\n+    public void setUserKey(final String userKey) {\n+        this.userKey = userKey;\n+    }\n+\n+    @JsonProperty\n+    public Map<String, String> getVariables() {\n+        return variables;\n+    }\n+}"},{"sha":"549eb9ab4cb96d18fee2f8467055186f7d94bc34","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/types/BpmnProcessFormat.java","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FBpmnProcessFormat.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FBpmnProcessFormat.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FBpmnProcessFormat.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,12 +16,12 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.api;\n+package org.apache.syncope.common.lib.types;\n \n /**\n  * Format for import / export of workflow definition.\n  */\n-public enum WorkflowDefinitionFormat {\n+public enum BpmnProcessFormat {\n \n     XML,\n     JSON","previous_filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/WorkflowDefinitionFormat.java"},{"sha":"43825a4a9f673afb352e9f3c9c6826adb35a07c7","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/types/FlowableEntitlement.java","status":"added","additions":76,"deletions":0,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FFlowableEntitlement.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.types;\n+\n+import java.lang.reflect.Field;\n+import java.lang.reflect.Modifier;\n+import java.util.Collections;\n+import java.util.Set;\n+import java.util.TreeSet;\n+\n+public final class FlowableEntitlement {\n+\n+    public static final String BPMN_PROCESS_LIST = \"BPMN_PROCESS_LIST\";\n+\n+    public static final String BPMN_PROCESS_GET = \"BPMN_PROCESS_GET\";\n+\n+    public static final String BPMN_PROCESS_SET = \"BPMN_PROCESS_SET\";\n+\n+    public static final String BPMN_PROCESS_DELETE = \"BPMN_PROCESS_DELETE\";\n+\n+    public static final String WORKFLOW_TASK_LIST = \"WORKFLOW_TASK_LIST\";\n+\n+    public static final String WORKFLOW_FORM_LIST = \"WORKFLOW_FORM_LIST\";\n+\n+    public static final String WORKFLOW_FORM_READ = \"WORKFLOW_FORM_READ\";\n+\n+    public static final String WORKFLOW_FORM_CLAIM = \"WORKFLOW_FORM_CLAIM\";\n+\n+    public static final String WORKFLOW_FORM_SUBMIT = \"WORKFLOW_FORM_SUBMIT\";\n+\n+    public static final String USER_REQUEST_DEF_CREATE = \"USER_REQUEST_DEF_CREATE\";\n+\n+    public static final String USER_REQUEST_DEF_UPDATE = \"USER_REQUEST_DEF_UPDATE\";\n+\n+    public static final String USER_REQUEST_DEF_DELETE = \"USER_REQUEST_DEF_DELETE\";\n+\n+    public static final String USER_REQUEST_START = \"USER_REQUEST_START\";\n+\n+    public static final String USER_REQUEST_CANCEL = \"USER_REQUEST_CANCEL\";\n+\n+    private static final Set<String> VALUES;\n+\n+    static {\n+        Set<String> values = new TreeSet<>();\n+        for (Field field : FlowableEntitlement.class.getDeclaredFields()) {\n+            if (Modifier.isStatic(field.getModifiers()) && String.class.equals(field.getType())) {\n+                values.add(field.getName());\n+            }\n+        }\n+        VALUES = Collections.unmodifiableSet(values);\n+    }\n+\n+    public static Set<String> values() {\n+        return VALUES;\n+    }\n+\n+    private FlowableEntitlement() {\n+        // private constructor for static utility class\n+    }\n+}"},{"sha":"9565f99836a476eb3224129700b37d2fadcf5050","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/types/UserRequestFormPropertyType.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FUserRequestFormPropertyType.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FUserRequestFormPropertyType.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FUserRequestFormPropertyType.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -21,7 +21,7 @@\n import javax.xml.bind.annotation.XmlEnum;\n \n @XmlEnum\n-public enum WorkflowFormPropertyType {\n+public enum UserRequestFormPropertyType {\n \n     String,\n     Long,","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/types/WorkflowFormPropertyType.java"},{"sha":"d23b1bc70d9e1420cfb545cecba960d59f6c220a","filename":"ext/flowable/common-lib/src/main/java/org/apache/syncope/common/lib/types/WorkflowTasks.java","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FWorkflowTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FWorkflowTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fcommon-lib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FWorkflowTasks.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","previous_filename":"common/lib/src/main/java/org/apache/syncope/common/lib/types/WorkflowTasks.java"},{"sha":"9d1306698c5ccd2a23e31f5f8c60d027a1d54814","filename":"ext/flowable/flowable-bpmn/pom.xml","status":"renamed","additions":12,"deletions":7,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,19 +22,19 @@ under the License.\n   <modelVersion>4.0.0</modelVersion>\n \n   <parent>\n-    <groupId>org.apache.syncope</groupId>\n-    <artifactId>syncope-core</artifactId>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n     <version>3.0.0-SNAPSHOT</version>\n   </parent>\n \n-  <name>Apache Syncope Core Workflow Flowable</name>\n-  <description>Apache Syncope Core Workflow Flowable</description>\n-  <groupId>org.apache.syncope.core</groupId>\n-  <artifactId>syncope-core-workflow-flowable</artifactId>\n+  <name>Apache Syncope Ext: Flowable BPMN</name>\n+  <description>Apache Syncope Ext: Flowable BPMN</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-bpmn</artifactId>\n   <packaging>jar</packaging>\n   \n   <properties>\n-    <rootpom.basedir>${basedir}/../..</rootpom.basedir>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n   </properties>\n \n   <dependencies>\n@@ -64,6 +64,11 @@ under the License.\n       <artifactId>flowable-json-converter</artifactId>\n     </dependency>\n \n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-common-lib</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.core</groupId>\n       <artifactId>syncope-core-workflow-java</artifactId>","previous_filename":"core/workflow-flowable/pom.xml"},{"sha":"9247fd4032fb9f1344b4933662597002c2afb424","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/api/BpmnProcessManager.java","status":"renamed","additions":18,"deletions":17,"changes":35,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FBpmnProcessManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FBpmnProcessManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FBpmnProcessManager.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,49 +16,50 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.api;\n+package org.apache.syncope.core.flowable.api;\n \n import java.io.OutputStream;\n import java.util.List;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.BpmnProcessFormat;\n \n-public interface WorkflowDefinitionAdapter {\n+public interface BpmnProcessManager {\n \n     /**\n-     * @return all available workflow definitions.\n+     * @return all available workflow processes.\n      */\n-    List<WorkflowDefinitionTO> getDefinitions();\n+    List<BpmnProcessTO> getProcesses();\n \n     /**\n-     * Export the workflow definition for the given key, in the requested format.\n+     * Export the process for the given key, in the requested format.\n      *\n-     * @param key definition key\n+     * @param key process key\n      * @param format export format\n      * @param os export stream\n      */\n-    void exportDefinition(String key, WorkflowDefinitionFormat format, OutputStream os);\n+    void exportProcess(String key, BpmnProcessFormat format, OutputStream os);\n \n     /**\n-     * Export the workflow graphical representation for the given key (if available).\n+     * Export the process graphical representation for the given key (if available).\n      *\n-     * @param key definition key\n+     * @param key process key\n      * @param os export stream\n      */\n     void exportDiagram(String key, OutputStream os);\n \n     /**\n-     * Import the workflow definition for the given key.\n+     * Import the process for the given key.\n      *\n-     * @param key definition key\n+     * @param key process key\n      * @param format import format\n-     * @param definition definition\n+     * @param process process\n      */\n-    void importDefinition(String key, WorkflowDefinitionFormat format, String definition);\n+    void importProcess(String key, BpmnProcessFormat format, String process);\n \n     /**\n-     * Remove the workflow definition for the given key.\n+     * Remove the process for the given key.\n      *\n-     * @param key definition key\n+     * @param key process key\n      */\n-    void deleteDefinition(String key);\n+    void deleteProcess(String key);\n }","previous_filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/WorkflowDefinitionAdapter.java"},{"sha":"b11b97c0a31e0dc87a289290b01a6eb02d6d8f9c","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/api/UserRequestHandler.java","status":"added","additions":108,"deletions":0,"changes":108,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FUserRequestHandler.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,108 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.api;\n+\n+import java.util.List;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+import org.apache.syncope.core.provisioning.api.event.AnyDeletedEvent;\n+import org.flowable.engine.runtime.ProcessInstance;\n+import org.springframework.transaction.event.TransactionalEventListener;\n+\n+public interface UserRequestHandler {\n+\n+    /**\n+     * Starts a new user request, for the given BPMN process and user.\n+     *\n+     * @param bpmnProcess BPMN process\n+     * @param user user\n+     * @return data about the started request service, including execution id\n+     */\n+    UserRequestTO start(String bpmnProcess, User user);\n+\n+    /**\n+     * Parses the given execution id to find matching user request and owner.\n+     *\n+     * @param executionId execution id\n+     * @return matching user request and owner\n+     */\n+    Pair<ProcessInstance, String> parse(String executionId);\n+\n+    /**\n+     * Cancel a running user request.\n+     *\n+     * @param procInst process instance for user request\n+     * @param reason reason to cancel the user request\n+     */\n+    void cancel(ProcessInstance procInst, String reason);\n+\n+    /**\n+     * Cancel all running user requests for the given process definition id.\n+     *\n+     * @param processDefinitionId process definition id\n+     */\n+    void cancelByProcessDefinition(String processDefinitionId);\n+\n+    /**\n+     * Cancel all running user requests for the user in the given delete event.\n+     *\n+     * @param event delete event\n+     */\n+    @TransactionalEventListener\n+    void cancelByUser(AnyDeletedEvent event);\n+\n+    /**\n+     * Get the forms for current workflow process instances matching the provided parameters.\n+     *\n+     * @param page result page\n+     * @param size items per page\n+     * @param orderByClauses sort conditions\n+     * @return total number of forms, list of forms matching the provided parameters\n+     */\n+    Pair<Integer, List<UserRequestForm>> getForms(int page, int size, List<OrderByClause> orderByClauses);\n+\n+    /**\n+     * Get forms for given user (if present).\n+     *\n+     * @param userKey user key\n+     * @return form (if present), otherwise null\n+     */\n+    List<UserRequestForm> getForms(String userKey);\n+\n+    /**\n+     * Claim a form for a given object.\n+     *\n+     * @param taskId Workflow task to which the form is associated\n+     * @return updated form\n+     */\n+    UserRequestForm claimForm(String taskId);\n+\n+    /**\n+     * Submit a form.\n+     *\n+     * @param form to be submitted\n+     * @return user updated by this form submit\n+     */\n+    WorkflowResult<UserPatch> submitForm(UserRequestForm form);\n+}"},{"sha":"6c9ef50bca79756158d27717c919d857f6abc7ff","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/api/WorkflowTaskManager.java","status":"added","additions":70,"deletions":0,"changes":70,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FWorkflowTaskManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FWorkflowTaskManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fapi%2FWorkflowTaskManager.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,70 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.api;\n+\n+import java.util.List;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+\n+public interface WorkflowTaskManager {\n+\n+    /**\n+     * Gets variable value.\n+     * Returns null when no variable value is found with the given name or when the value is set to null.\n+     *\n+     * @param <T> variable type\n+     * @param executionId id of execution, cannot be null.\n+     * @param variableName name of variable, cannot be null.\n+     * @param variableClass class of variable, cannot be null.\n+     * @return the variable value or null if the variable is undefined or the value of the variable is null.\n+     * @throws org.flowable.common.engine.api.FlowableObjectNotFoundException\n+     * when no execution is found for the given executionId.\n+     * @throws ClassCastException\n+     * when cannot cast variable to given class\n+     */\n+    <T> T getVariable(String executionId, String variableName, Class<T> variableClass);\n+\n+    /**\n+     * Updates or create sa variable for an execution.\n+     *\n+     * @param executionId id of execution to set variable in, cannot be null.\n+     * @param variableName name of variable to set, cannot be null.\n+     * @param value value to set; when null is passed, the variable is not removed, only it's value will be set to null\n+     * @throws org.flowable.common.engine.api.FlowableObjectNotFoundException\n+     * when no execution is found for the given executionId.\n+     */\n+    void setVariable(String executionId, String variableName, Object value);\n+\n+    /**\n+     * Get tasks available for execution, for given user.\n+     *\n+     * @param userKey user key\n+     * @return available tasks\n+     */\n+    List<WorkflowTask> getAvailableTasks(String userKey);\n+\n+    /**\n+     * Execute a task on an user.\n+     *\n+     * @param workflowTaskExecInput input for task execution\n+     * @return user after task execution\n+     */\n+    WorkflowResult<String> executeNextTask(WorkflowTaskExecInput workflowTaskExecInput);\n+}"},{"sha":"bca8b25047b5a8e31ad5e618a384b14954739012","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableBpmnProcessManager.java","status":"added","additions":212,"deletions":0,"changes":212,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableBpmnProcessManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableBpmnProcessManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableBpmnProcessManager.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,212 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.impl;\n+\n+import org.apache.syncope.core.flowable.api.BpmnProcessManager;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.BpmnProcessFormat;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n+import org.apache.syncope.core.persistence.api.dao.NotFoundException;\n+import org.apache.syncope.core.workflow.api.WorkflowException;\n+import org.flowable.bpmn.converter.BpmnXMLConverter;\n+import org.flowable.bpmn.model.BpmnModel;\n+import org.flowable.common.engine.api.FlowableException;\n+import org.flowable.editor.constants.ModelDataJsonConstants;\n+import org.flowable.editor.language.json.converter.BpmnJsonConverter;\n+import org.flowable.engine.repository.Deployment;\n+import org.flowable.engine.repository.Model;\n+import org.flowable.engine.repository.ProcessDefinition;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.transaction.annotation.Propagation;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { Throwable.class })\n+public class FlowableBpmnProcessManager implements BpmnProcessManager {\n+\n+    protected static final Logger LOG = LoggerFactory.getLogger(BpmnProcessManager.class);\n+\n+    protected static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\n+\n+    protected static final String MODEL_DATA_JSON_MODEL = \"model\";\n+\n+    @Autowired\n+    protected DomainProcessEngine engine;\n+\n+    protected Model getModel(final ProcessDefinition procDef) {\n+        try {\n+            Model model = engine.getRepositoryService().createModelQuery().\n+                    deploymentId(procDef.getDeploymentId()).singleResult();\n+            if (model == null) {\n+                throw new NotFoundException(\"Could not find Model for deployment \" + procDef.getDeploymentId());\n+            }\n+            return model;\n+        } catch (Exception e) {\n+            throw new WorkflowException(\"While accessing process \" + procDef.getKey(), e);\n+        }\n+    }\n+\n+    @Override\n+    public List<BpmnProcessTO> getProcesses() {\n+        try {\n+            return engine.getRepositoryService().createProcessDefinitionQuery().latestVersion().list().stream().\n+                    map(procDef -> {\n+                        BpmnProcessTO defTO = new BpmnProcessTO();\n+                        defTO.setKey(procDef.getKey());\n+                        defTO.setName(procDef.getName());\n+\n+                        try {\n+                            defTO.setModelId(getModel(procDef).getId());\n+                        } catch (NotFoundException e) {\n+                            LOG.warn(\"No model found for definition {}, ignoring\", procDef.getDeploymentId(), e);\n+                        }\n+\n+                        defTO.setUserWorkflow(FlowableRuntimeUtils.WF_PROCESS_ID.equals(procDef.getKey()));\n+\n+                        return defTO;\n+                    }).collect(Collectors.toList());\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\"While listing available process definitions\", e);\n+        }\n+    }\n+\n+    protected void exportProcessModel(final String key, final OutputStream os) {\n+        Model model = getModel(FlowableRuntimeUtils.getLatestProcDefByKey(engine, key));\n+\n+        try {\n+            ObjectNode modelNode = (ObjectNode) OBJECT_MAPPER.readTree(model.getMetaInfo());\n+            modelNode.put(ModelDataJsonConstants.MODEL_ID, model.getId());\n+            modelNode.replace(MODEL_DATA_JSON_MODEL,\n+                    OBJECT_MAPPER.readTree(engine.getRepositoryService().getModelEditorSource(model.getId())));\n+\n+            os.write(modelNode.toString().getBytes());\n+        } catch (IOException e) {\n+            LOG.error(\"While exporting workflow definition {}\", model.getId(), e);\n+        }\n+    }\n+\n+    protected void exportProcessResource(final String deploymentId, final String resourceName, final OutputStream os) {\n+        try (InputStream procDefIS = engine.getRepositoryService().getResourceAsStream(deploymentId, resourceName)) {\n+            IOUtils.copy(procDefIS, os);\n+        } catch (IOException e) {\n+            LOG.error(\"While exporting {}\", resourceName, e);\n+        }\n+    }\n+\n+    @Override\n+    public void exportProcess(final String key, final BpmnProcessFormat format, final OutputStream os) {\n+        switch (format) {\n+            case JSON:\n+                exportProcessModel(key, os);\n+                break;\n+\n+            case XML:\n+            default:\n+                ProcessDefinition procDef = FlowableRuntimeUtils.getLatestProcDefByKey(engine, key);\n+                if (procDef == null) {\n+                    throw new NotFoundException(\"Process Definition \" + key);\n+                }\n+                exportProcessResource(procDef.getDeploymentId(), procDef.getResourceName(), os);\n+        }\n+    }\n+\n+    @Override\n+    public void exportDiagram(final String key, final OutputStream os) {\n+        ProcessDefinition procDef = FlowableRuntimeUtils.getLatestProcDefByKey(engine, key);\n+        if (procDef == null) {\n+            throw new NotFoundException(\"Workflow process definition for \" + key);\n+        }\n+        exportProcessResource(procDef.getDeploymentId(), procDef.getDiagramResourceName(), os);\n+    }\n+\n+    @Override\n+    public void importProcess(final String key, final BpmnProcessFormat format, final String definition) {\n+        ProcessDefinition procDef = FlowableRuntimeUtils.getLatestProcDefByKey(engine, key);\n+        String resourceName = procDef == null ? key + \".bpmn20.xml\" : procDef.getResourceName();\n+        Deployment deployment;\n+        switch (format) {\n+            case JSON:\n+                JsonNode definitionNode;\n+                try {\n+                    definitionNode = OBJECT_MAPPER.readTree(definition);\n+                    if (definitionNode.has(MODEL_DATA_JSON_MODEL)) {\n+                        definitionNode = definitionNode.get(MODEL_DATA_JSON_MODEL);\n+                    }\n+                    if (!definitionNode.has(BpmnJsonConverter.EDITOR_CHILD_SHAPES)) {\n+                        throw new IllegalArgumentException(\n+                                \"Could not find JSON node \" + BpmnJsonConverter.EDITOR_CHILD_SHAPES);\n+                    }\n+\n+                    BpmnModel bpmnModel = new BpmnJsonConverter().convertToBpmnModel(definitionNode);\n+                    deployment = FlowableDeployUtils.deployDefinition(\n+                            engine,\n+                            resourceName,\n+                            new BpmnXMLConverter().convertToXML(bpmnModel));\n+                } catch (Exception e) {\n+                    throw new WorkflowException(\"While creating or updating process \" + key, e);\n+                }\n+                break;\n+\n+            case XML:\n+            default:\n+                deployment = FlowableDeployUtils.deployDefinition(\n+                        engine,\n+                        resourceName,\n+                        definition.getBytes());\n+        }\n+\n+        try {\n+            procDef = engine.getRepositoryService().createProcessDefinitionQuery().\n+                    deploymentId(deployment.getId()).latestVersion().singleResult();\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\"While accessing deployment \" + deployment.getId(), e);\n+        }\n+        if (!key.equals(procDef.getKey())) {\n+            throw new WorkflowException(\"Mismatching key: expected \" + key + \", found \" + procDef.getKey());\n+        }\n+        FlowableDeployUtils.deployModel(engine, procDef);\n+    }\n+\n+    @Override\n+    public void deleteProcess(final String key) {\n+        if (FlowableRuntimeUtils.WF_PROCESS_ID.equals(key)) {\n+            throw new WorkflowException(\"Cannot delete the main process \" + FlowableRuntimeUtils.WF_PROCESS_ID);\n+        }\n+\n+        try {\n+            engine.getRepositoryService().createProcessDefinitionQuery().processDefinitionKey(key).list().\n+                    forEach(procDef -> {\n+                        engine.getRepositoryService().deleteModel(getModel(procDef).getId());\n+                        engine.getRepositoryService().deleteDeployment(procDef.getDeploymentId(), true);\n+                    });\n+        } catch (Exception e) {\n+            throw new WorkflowException(\"While deleting process \" + key, e);\n+        }\n+    }\n+}"},{"sha":"5af0188e3b2c56a72ae7a5f22a3fa43c071e0a0a","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableDeployUtils.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableDeployUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableDeployUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableDeployUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.impl;\n \n import com.fasterxml.jackson.databind.ObjectMapper;\n import com.fasterxml.jackson.databind.node.ObjectNode;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/FlowableDeployUtils.java"},{"sha":"12d8faada28b3eefa4aa723472071d4fe6d193b4","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableRuntimeUtils.java","status":"added","additions":225,"deletions":0,"changes":225,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableRuntimeUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableRuntimeUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableRuntimeUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,225 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.impl;\n+\n+import java.util.Base64;\n+import java.util.List;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n+import org.apache.syncope.core.persistence.api.attrvalue.validation.InvalidEntityException;\n+import org.apache.syncope.core.persistence.api.attrvalue.validation.ParsingValidationException;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.PropagationByResource;\n+import org.apache.syncope.core.workflow.api.WorkflowException;\n+import org.flowable.common.engine.api.FlowableException;\n+import org.flowable.engine.history.HistoricActivityInstance;\n+import org.flowable.engine.impl.RuntimeServiceImpl;\n+import org.flowable.engine.impl.persistence.entity.ExecutionEntity;\n+import org.flowable.engine.repository.ProcessDefinition;\n+import org.flowable.engine.runtime.ProcessInstance;\n+import org.flowable.task.api.Task;\n+import org.flowable.task.api.TaskQuery;\n+import org.identityconnectors.common.security.EncryptorFactory;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public final class FlowableRuntimeUtils {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(FlowableRuntimeUtils.class);\n+\n+    public static final String WF_PROCESS_ID = \"userWorkflow\";\n+\n+    public static final String USER = \"user\";\n+\n+    public static final String WF_EXECUTOR = \"wfExecutor\";\n+\n+    public static final String FORM_SUBMITTER = \"formSubmitter\";\n+\n+    public static final String USER_TO = \"userTO\";\n+\n+    public static final String ENABLED = \"enabled\";\n+\n+    public static final String USER_PATCH = \"userPatch\";\n+\n+    public static final String TASK = \"task\";\n+\n+    public static final String TOKEN = \"token\";\n+\n+    public static final String PASSWORD = \"password\";\n+\n+    public static final String PROP_BY_RESOURCE = \"propByResource\";\n+\n+    public static final String PROPAGATE_ENABLE = \"propagateEnable\";\n+\n+    public static final String ENCRYPTED_PWD = \"encryptedPwd\";\n+\n+    public static final String STORE_PASSWORD = \"storePassword\";\n+\n+    public static final String EVENT = \"event\";\n+\n+    public static String encrypt(final String clear) {\n+        byte[] encrypted = EncryptorFactory.getInstance().getDefaultEncryptor().encrypt(clear.getBytes());\n+        return Base64.getEncoder().encodeToString(encrypted);\n+    }\n+\n+    public static String decrypt(final String crypted) {\n+        byte[] decrypted = EncryptorFactory.getInstance().getDefaultEncryptor().\n+                decrypt(Base64.getDecoder().decode(crypted));\n+        return new String(decrypted);\n+    }\n+\n+    public static String getWFProcBusinessKey(final String userKey) {\n+        return FlowableRuntimeUtils.getProcBusinessKey(WF_PROCESS_ID, userKey);\n+    }\n+\n+    public static String getWFProcInstID(final DomainProcessEngine engine, final String userKey) {\n+        ProcessInstance procInst = engine.getRuntimeService().createProcessInstanceQuery().\n+                processInstanceBusinessKey(getWFProcBusinessKey(userKey)).singleResult();\n+        return procInst == null ? null : procInst.getId();\n+    }\n+\n+    public static String getProcBusinessKey(final String processDefinitionId, final String userKey) {\n+        return processDefinitionId + \":\" + userKey;\n+    }\n+\n+    public static ProcessDefinition getLatestProcDefByKey(final DomainProcessEngine engine, final String key) {\n+        try {\n+            return engine.getRepositoryService().createProcessDefinitionQuery().\n+                    processDefinitionKey(key).latestVersion().singleResult();\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\"While accessing process \" + key, e);\n+        }\n+    }\n+\n+    public static Set<String> getPerformedTasks(\n+            final DomainProcessEngine engine, final String procInstID, final User user) {\n+\n+        return engine.getHistoryService().createHistoricActivityInstanceQuery().\n+                executionId(procInstID).\n+                list().stream().\n+                map(HistoricActivityInstance::getActivityId).\n+                collect(Collectors.toSet());\n+    }\n+\n+    public static void updateStatus(final DomainProcessEngine engine, final String procInstID, final User user) {\n+        List<Task> tasks = createTaskQuery(engine, false).processInstanceId(procInstID).list();\n+        if (tasks.isEmpty() || tasks.size() > 1) {\n+            LOG.warn(\"While setting user status: unexpected task number ({})\", tasks.size());\n+        } else {\n+            user.setStatus(tasks.get(0).getTaskDefinitionKey());\n+        }\n+    }\n+\n+    public static List<ProcessInstance> getProcessInstances(final DomainProcessEngine engine, final String userKey) {\n+        return engine.getRuntimeService().createNativeProcessInstanceQuery().\n+                sql(\"SELECT ID_,PROC_INST_ID_ FROM \" + engine.getManagementService().getTableName(ExecutionEntity.class)\n+                        + \" WHERE BUSINESS_KEY_ LIKE '\" + getProcBusinessKey(\"%\", userKey) + \"'\"\n+                        + \" AND PARENT_ID_ IS NULL\").list();\n+    }\n+\n+    public static TaskQuery createTaskQuery(final DomainProcessEngine engine, final boolean onlyFormTasks) {\n+        SyncopeTaskQueryImpl taskQuery = new SyncopeTaskQueryImpl(\n+                ((RuntimeServiceImpl) engine.getRuntimeService()).getCommandExecutor());\n+        if (onlyFormTasks) {\n+            taskQuery.taskWithFormKey();\n+        }\n+        return taskQuery;\n+    }\n+\n+    public static String getFormTask(final DomainProcessEngine engine, final String procInstID) {\n+        String result = null;\n+\n+        List<Task> tasks = createTaskQuery(engine, true).processInstanceId(procInstID).list();\n+        if (tasks.isEmpty() || tasks.size() > 1) {\n+            LOG.debug(\"While checking if form task: unexpected task number ({})\", tasks.size());\n+        } else {\n+            result = tasks.get(0).getFormKey();\n+        }\n+\n+        return result;\n+    }\n+\n+    /**\n+     * Saves resources to be propagated and password for later - after form submission - propagation.\n+     *\n+     * @param engine Flowable engine\n+     * @param procInstID process instance id\n+     * @param user user JPA entity\n+     * @param userTO user transfer object\n+     * @param password password\n+     * @param enabled is user to be enabled or not?\n+     * @param propByRes current propagation actions against resources\n+     */\n+    public static void saveForFormSubmit(\n+            final DomainProcessEngine engine,\n+            final String procInstID,\n+            final User user,\n+            final UserTO userTO,\n+            final String password,\n+            final Boolean enabled,\n+            final PropagationByResource propByRes) {\n+\n+        String formTaskId = getFormTask(engine, procInstID);\n+        if (formTaskId == null) {\n+            return;\n+        }\n+\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.USER_TO, userTO);\n+\n+        if (password == null) {\n+            String encryptedPwd = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.ENCRYPTED_PWD, String.class);\n+            if (encryptedPwd != null) {\n+                userTO.setPassword(decrypt(encryptedPwd));\n+            }\n+        } else {\n+            userTO.setPassword(password);\n+            engine.getRuntimeService().\n+                    setVariable(procInstID, FlowableRuntimeUtils.ENCRYPTED_PWD, encrypt(password));\n+        }\n+\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.ENABLED, enabled);\n+\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, propByRes);\n+        if (propByRes != null) {\n+            propByRes.clear();\n+        }\n+    }\n+\n+    public static void throwException(final FlowableException e, final String defaultMessage) {\n+        if (e.getCause() != null) {\n+            if (e.getCause().getCause() instanceof SyncopeClientException) {\n+                throw (SyncopeClientException) e.getCause().getCause();\n+            } else if (e.getCause().getCause() instanceof ParsingValidationException) {\n+                throw (ParsingValidationException) e.getCause().getCause();\n+            } else if (e.getCause().getCause() instanceof InvalidEntityException) {\n+                throw (InvalidEntityException) e.getCause().getCause();\n+            }\n+        }\n+\n+        throw new WorkflowException(defaultMessage, e);\n+    }\n+\n+    private FlowableRuntimeUtils() {\n+        // private constructor for static utility class\n+    }\n+}"},{"sha":"1c198a8519556dad120de1f28e35e72937901de1","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableUserRequestHandler.java","status":"added","additions":574,"deletions":0,"changes":574,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserRequestHandler.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,574 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.impl;\n+\n+import org.apache.syncope.core.flowable.api.UserRequestHandler;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import javax.annotation.Resource;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.common.lib.patch.PasswordPatch;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.UserRequestFormProperty;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.types.AnyTypeKind;\n+import org.apache.syncope.common.lib.types.ResourceOperation;\n+import org.apache.syncope.common.lib.types.UserRequestFormPropertyType;\n+import org.apache.syncope.core.flowable.api.WorkflowTaskManager;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n+import org.apache.syncope.core.persistence.api.dao.NotFoundException;\n+import org.apache.syncope.core.persistence.api.dao.UserDAO;\n+import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n+import org.apache.syncope.core.persistence.api.entity.EntityFactory;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.PropagationByResource;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n+import org.apache.syncope.core.provisioning.api.event.AnyDeletedEvent;\n+import org.apache.syncope.core.spring.BeanUtils;\n+import org.apache.syncope.core.spring.security.AuthContextUtils;\n+import org.apache.syncope.core.workflow.api.WorkflowException;\n+import org.flowable.common.engine.api.FlowableException;\n+import org.flowable.engine.form.FormProperty;\n+import org.flowable.engine.form.FormType;\n+import org.flowable.engine.form.TaskFormData;\n+import org.flowable.engine.history.HistoricActivityInstance;\n+import org.flowable.engine.impl.persistence.entity.HistoricFormPropertyEntity;\n+import org.flowable.engine.runtime.ProcessInstance;\n+import org.flowable.task.api.Task;\n+import org.flowable.task.api.TaskQuery;\n+import org.flowable.task.api.history.HistoricTaskInstance;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.transaction.annotation.Propagation;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { Throwable.class })\n+public class FlowableUserRequestHandler implements UserRequestHandler {\n+\n+    protected static final Logger LOG = LoggerFactory.getLogger(UserRequestHandler.class);\n+\n+    protected static final String[] PROPERTY_IGNORE_PROPS = { \"type\" };\n+\n+    @Autowired\n+    protected WorkflowTaskManager wfTaskManager;\n+\n+    @Autowired\n+    protected UserDataBinder dataBinder;\n+\n+    @Resource(name = \"adminUser\")\n+    protected String adminUser;\n+\n+    @Autowired\n+    protected DomainProcessEngine engine;\n+\n+    @Autowired\n+    protected UserDAO userDAO;\n+\n+    @Autowired\n+    protected EntityFactory entityFactory;\n+\n+    protected User lazyLoad(final User user) {\n+        // using BeanUtils to access all user's properties and trigger lazy loading - we are about to\n+        // serialize a User instance for availability within workflow tasks, and this breaks transactions\n+        BeanUtils.copyProperties(user, entityFactory.newEntity(User.class));\n+        return user;\n+    }\n+\n+    @Override\n+    public UserRequestTO start(final String bpmnProcess, final User user) {\n+        Map<String, Object> variables = new HashMap<>(2);\n+        variables.put(FlowableRuntimeUtils.WF_EXECUTOR, AuthContextUtils.getUsername());\n+        variables.put(FlowableRuntimeUtils.USER, lazyLoad(user));\n+        variables.put(FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n+\n+        ProcessInstance procInst = null;\n+        try {\n+            procInst = engine.getRuntimeService().startProcessInstanceByKey(bpmnProcess, variables);\n+        } catch (FlowableException e) {\n+            FlowableRuntimeUtils.throwException(e, \"While starting \" + bpmnProcess + \" instance\");\n+        }\n+\n+        engine.getRuntimeService().updateBusinessKey(\n+                procInst.getProcessInstanceId(),\n+                FlowableRuntimeUtils.getProcBusinessKey(bpmnProcess, user.getKey()));\n+\n+        UserRequestTO userRequestTO = new UserRequestTO();\n+        userRequestTO.setProcessInstanceId(procInst.getProcessInstanceId());\n+        userRequestTO.setExecutionId(procInst.getId());\n+        userRequestTO.setBpmnProcess(bpmnProcess);\n+        userRequestTO.setUser(user.getKey());\n+        return userRequestTO;\n+    }\n+\n+    @Override\n+    public Pair<ProcessInstance, String> parse(final String executionId) {\n+        ProcessInstance procInst = null;\n+        try {\n+            procInst = engine.getRuntimeService().\n+                    createProcessInstanceQuery().processInstanceId(executionId).singleResult();\n+        } catch (FlowableException e) {\n+            throw new NotFoundException(\"User request execution with id \" + executionId);\n+        }\n+\n+        return Pair.of(procInst, getUserKey(procInst.getProcessInstanceId()));\n+    }\n+\n+    @Override\n+    public void cancel(final ProcessInstance procInst, final String reason) {\n+        if (FlowableRuntimeUtils.WF_PROCESS_ID.equals(procInst.getProcessDefinitionKey())) {\n+            throw new WorkflowException(new IllegalArgumentException(\n+                    \"Cannot cancel a \" + FlowableRuntimeUtils.WF_PROCESS_ID + \" execution\"));\n+        }\n+\n+        engine.getRuntimeService().deleteProcessInstance(procInst.getId(), reason);\n+    }\n+\n+    @Override\n+    public void cancelByProcessDefinition(final String processDefinitionId) {\n+        engine.getRuntimeService().\n+                createProcessInstanceQuery().processDefinitionId(processDefinitionId).list().\n+                forEach(procInst -> {\n+                    engine.getRuntimeService().deleteProcessInstance(\n+                            procInst.getId(), \"Cascade Delete process definition \" + processDefinitionId);\n+                });\n+    }\n+\n+    @Override\n+    public void cancelByUser(final AnyDeletedEvent event) {\n+        if (AuthContextUtils.getDomain().equals(event.getDomain()) && event.getAnyTypeKind() == AnyTypeKind.USER) {\n+            String username = event.getAnyName();\n+            FlowableRuntimeUtils.getProcessInstances(engine, event.getAnyKey()).\n+                    forEach(procInst -> {\n+                        engine.getRuntimeService().deleteProcessInstance(\n+                                procInst.getId(), \"Cascade Delete user \" + username);\n+                    });\n+        }\n+    }\n+\n+    protected UserRequestFormPropertyType fromFlowableFormType(final FormType flowableFormType) {\n+        UserRequestFormPropertyType result = UserRequestFormPropertyType.String;\n+\n+        if (null != flowableFormType.getName()) {\n+            switch (flowableFormType.getName()) {\n+                case \"long\":\n+                    result = UserRequestFormPropertyType.Long;\n+                    break;\n+\n+                case \"enum\":\n+                    result = UserRequestFormPropertyType.Enum;\n+                    break;\n+\n+                case \"date\":\n+                    result = UserRequestFormPropertyType.Date;\n+                    break;\n+\n+                case \"boolean\":\n+                    result = UserRequestFormPropertyType.Boolean;\n+                    break;\n+\n+                case \"string\":\n+                default:\n+                    break;\n+            }\n+        }\n+\n+        return result;\n+    }\n+\n+    protected UserRequestForm getFormTO(final Task task) {\n+        return getFormTO(task, engine.getFormService().getTaskFormData(task.getId()));\n+    }\n+\n+    protected UserRequestForm getFormTO(final Task task, final TaskFormData fd) {\n+        UserRequestForm formTO =\n+                getFormTO(task.getProcessInstanceId(), task.getId(), fd.getFormKey(), fd.getFormProperties());\n+        BeanUtils.copyProperties(task, formTO);\n+\n+        return formTO;\n+    }\n+\n+    protected UserRequestForm getFormTO(final HistoricTaskInstance task) {\n+        List<HistoricFormPropertyEntity> props = engine.getHistoryService().\n+                createHistoricDetailQuery().taskId(task.getId()).list().stream().\n+                filter(HistoricFormPropertyEntity.class::isInstance).\n+                map(HistoricFormPropertyEntity.class::cast).\n+                collect(Collectors.toList());\n+\n+        UserRequestForm formTO = getHistoricFormTO(\n+                task.getProcessInstanceId(), task.getId(), task.getFormKey(), props);\n+        BeanUtils.copyProperties(task, formTO);\n+\n+        HistoricActivityInstance historicActivityInstance = engine.getHistoryService().\n+                createHistoricActivityInstanceQuery().\n+                executionId(task.getExecutionId()).activityType(\"userTask\").activityName(task.getName()).singleResult();\n+\n+        if (historicActivityInstance != null) {\n+            formTO.setCreateTime(historicActivityInstance.getStartTime());\n+            formTO.setDueDate(historicActivityInstance.getEndTime());\n+        }\n+\n+        return formTO;\n+    }\n+\n+    protected String getUserKey(final String procInstId) {\n+        String procBusinessKey = engine.getRuntimeService().createProcessInstanceQuery().\n+                processInstanceId(procInstId).singleResult().getBusinessKey();\n+\n+        return StringUtils.substringAfter(procBusinessKey, \":\");\n+    }\n+\n+    protected UserRequestForm getHistoricFormTO(\n+            final String procInstID,\n+            final String taskId,\n+            final String formKey,\n+            final List<HistoricFormPropertyEntity> props) {\n+\n+        UserRequestForm formTO = new UserRequestForm();\n+\n+        User user = userDAO.find(getUserKey(procInstID));\n+        if (user == null) {\n+            throw new NotFoundException(\"User for process instance id \" + procInstID);\n+        }\n+        formTO.setUsername(user.getUsername());\n+\n+        formTO.setTaskId(taskId);\n+        formTO.setFormKey(formKey);\n+\n+        formTO.setUserTO(engine.getRuntimeService().\n+                getVariable(procInstID, FlowableRuntimeUtils.USER_TO, UserTO.class));\n+        formTO.setUserPatch(engine.getRuntimeService().\n+                getVariable(procInstID, FlowableRuntimeUtils.USER_PATCH, UserPatch.class));\n+\n+        formTO.getProperties().addAll(props.stream().map(prop -> {\n+            UserRequestFormProperty propertyTO = new UserRequestFormProperty();\n+            propertyTO.setId(prop.getPropertyId());\n+            propertyTO.setName(prop.getPropertyId());\n+            propertyTO.setValue(prop.getPropertyValue());\n+            return propertyTO;\n+        }).collect(Collectors.toList()));\n+\n+        return formTO;\n+    }\n+\n+    @SuppressWarnings(\"unchecked\")\n+    protected UserRequestForm getFormTO(\n+            final String procInstID,\n+            final String taskId,\n+            final String formKey,\n+            final List<FormProperty> props) {\n+\n+        UserRequestForm formTO = new UserRequestForm();\n+\n+        User user = userDAO.find(getUserKey(procInstID));\n+        if (user == null) {\n+            throw new NotFoundException(\"User for process instance id \" + procInstID);\n+        }\n+        formTO.setUsername(user.getUsername());\n+\n+        formTO.setTaskId(taskId);\n+        formTO.setFormKey(formKey);\n+\n+        formTO.setUserTO(engine.getRuntimeService().\n+                getVariable(procInstID, FlowableRuntimeUtils.USER_TO, UserTO.class));\n+        formTO.setUserPatch(engine.getRuntimeService().\n+                getVariable(procInstID, FlowableRuntimeUtils.USER_PATCH, UserPatch.class));\n+\n+        formTO.getProperties().addAll(props.stream().map(fProp -> {\n+            UserRequestFormProperty propertyTO = new UserRequestFormProperty();\n+            BeanUtils.copyProperties(fProp, propertyTO, PROPERTY_IGNORE_PROPS);\n+            propertyTO.setType(fromFlowableFormType(fProp.getType()));\n+            if (propertyTO.getType() == UserRequestFormPropertyType.Date) {\n+                propertyTO.setDatePattern((String) fProp.getType().getInformation(\"datePattern\"));\n+            }\n+            if (propertyTO.getType() == UserRequestFormPropertyType.Enum) {\n+                propertyTO.getEnumValues().putAll((Map<String, String>) fProp.getType().getInformation(\"values\"));\n+            }\n+            return propertyTO;\n+        }).collect(Collectors.toList()));\n+\n+        return formTO;\n+    }\n+\n+    @Transactional(readOnly = true)\n+    @Override\n+    public Pair<Integer, List<UserRequestForm>> getForms(\n+            final int page, final int size, final List<OrderByClause> orderByClauses) {\n+\n+        Pair<Integer, List<UserRequestForm>> forms = null;\n+\n+        TaskQuery formTaskQuery = FlowableRuntimeUtils.createTaskQuery(engine, true);\n+\n+        String authUser = AuthContextUtils.getUsername();\n+        if (adminUser.equals(authUser)) {\n+            forms = getForms(formTaskQuery, page, size, orderByClauses);\n+        } else {\n+            User user = userDAO.findByUsername(authUser);\n+            if (user == null) {\n+                throw new NotFoundException(\"Syncope User \" + authUser);\n+            }\n+\n+            forms = getForms(formTaskQuery.taskCandidateOrAssigned(user.getUsername()), page, size, orderByClauses);\n+\n+            List<String> candidateGroups = new ArrayList<>(userDAO.findAllGroupNames(user));\n+            if (!candidateGroups.isEmpty()) {\n+                forms = getForms(formTaskQuery.taskCandidateGroupIn(candidateGroups), page, size, orderByClauses);\n+            }\n+        }\n+\n+        return forms == null\n+                ? Pair.of(0, Collections.<UserRequestForm>emptyList())\n+                : forms;\n+    }\n+\n+    protected Pair<Integer, List<UserRequestForm>> getForms(\n+            final TaskQuery query, final int page, final int size, final List<OrderByClause> orderByClauses) {\n+\n+        TaskQuery sortedQuery = query;\n+        for (OrderByClause clause : orderByClauses) {\n+            boolean ack = true;\n+            switch (clause.getField().trim()) {\n+                case \"taskId\":\n+                    sortedQuery = sortedQuery.orderByTaskId();\n+                    break;\n+\n+                case \"createTime\":\n+                    sortedQuery = sortedQuery.orderByTaskCreateTime();\n+                    break;\n+\n+                case \"dueDate\":\n+                    sortedQuery = sortedQuery.orderByTaskDueDate();\n+                    break;\n+\n+                case \"owner\":\n+                    sortedQuery = sortedQuery.orderByTaskOwner();\n+                    break;\n+\n+                default:\n+                    LOG.warn(\"Form sort request by {}: unsupported, ignoring\", clause.getField().trim());\n+                    ack = false;\n+            }\n+            if (ack) {\n+                sortedQuery = clause.getDirection() == OrderByClause.Direction.ASC\n+                        ? sortedQuery.asc()\n+                        : sortedQuery.desc();\n+            }\n+        }\n+\n+        List<UserRequestForm> result = sortedQuery.listPage(size * (page <= 0 ? 0 : page - 1), size).stream().\n+                map(task -> task instanceof HistoricTaskInstance\n+                ? getFormTO((HistoricTaskInstance) task) : getFormTO(task)).\n+                collect(Collectors.toList());\n+\n+        return Pair.of((int) query.count(), result);\n+    }\n+\n+    @Override\n+    public List<UserRequestForm> getForms(final String userKey) {\n+        List<UserRequestForm> result = new ArrayList<>();\n+        FlowableRuntimeUtils.getProcessInstances(engine, userKey).forEach(procInst -> {\n+            Task task;\n+            try {\n+                task = FlowableRuntimeUtils.createTaskQuery(engine, true).\n+                        processInstanceId(procInst.getProcessInstanceId()).singleResult();\n+            } catch (FlowableException e) {\n+                throw new WorkflowException(\"While reading form for process instance \"\n+                        + procInst.getProcessInstanceId(), e);\n+            }\n+\n+            if (task != null) {\n+                TaskFormData formData;\n+                try {\n+                    formData = engine.getFormService().getTaskFormData(task.getId());\n+                } catch (FlowableException e) {\n+                    throw new WorkflowException(\"Error while getting form data for task \" + task.getId(), e);\n+                }\n+                if (formData != null && !formData.getFormProperties().isEmpty()) {\n+                    result.add(getFormTO(task, formData));\n+                }\n+            }\n+        });\n+\n+        return result;\n+    }\n+\n+    protected Pair<Task, TaskFormData> checkTask(final String taskId, final String authUser) {\n+        Task task;\n+        try {\n+            task = FlowableRuntimeUtils.createTaskQuery(engine, true).taskId(taskId).singleResult();\n+            if (task == null) {\n+                throw new FlowableException(\"NULL result\");\n+            }\n+        } catch (FlowableException e) {\n+            throw new NotFoundException(\"Flowable Task \" + taskId, e);\n+        }\n+\n+        TaskFormData formData;\n+        try {\n+            formData = engine.getFormService().getTaskFormData(task.getId());\n+        } catch (FlowableException e) {\n+            throw new NotFoundException(\"Form for Flowable Task \" + taskId, e);\n+        }\n+\n+        if (!adminUser.equals(authUser)) {\n+            User user = userDAO.findByUsername(authUser);\n+            if (user == null) {\n+                throw new NotFoundException(\"Syncope User \" + authUser);\n+            }\n+        }\n+\n+        return Pair.of(task, formData);\n+    }\n+\n+    @Override\n+    public UserRequestForm claimForm(final String taskId) {\n+        String authUser = AuthContextUtils.getUsername();\n+        Pair<Task, TaskFormData> checked = checkTask(taskId, authUser);\n+\n+        if (!adminUser.equals(authUser)) {\n+            List<Task> tasksForUser = FlowableRuntimeUtils.createTaskQuery(engine, true).\n+                    taskId(taskId).taskCandidateUser(authUser).list();\n+            if (tasksForUser.isEmpty()) {\n+                throw new WorkflowException(\n+                        new IllegalArgumentException(authUser + \" is not candidate for task \" + taskId));\n+            }\n+        }\n+\n+        Task task;\n+        try {\n+            engine.getTaskService().setOwner(taskId, authUser);\n+            task = FlowableRuntimeUtils.createTaskQuery(engine, true).taskId(taskId).singleResult();\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\"While reading task \" + taskId, e);\n+        }\n+\n+        return getFormTO(task, checked.getRight());\n+    }\n+\n+    private Map<String, String> getPropertiesForSubmit(final UserRequestForm form) {\n+        Map<String, String> props = new HashMap<>();\n+        form.getProperties().stream().\n+                filter(UserRequestFormProperty::isWritable).\n+                forEach(prop -> {\n+                    props.put(prop.getId(), prop.getValue());\n+                });\n+        return Collections.unmodifiableMap(props);\n+    }\n+\n+    @Override\n+    public WorkflowResult<UserPatch> submitForm(final UserRequestForm form) {\n+        String authUser = AuthContextUtils.getUsername();\n+        Pair<Task, TaskFormData> checked = checkTask(form.getTaskId(), authUser);\n+\n+        if (!checked.getLeft().getOwner().equals(authUser)) {\n+            throw new WorkflowException(new IllegalArgumentException(\"Task \" + form.getTaskId() + \" assigned to \"\n+                    + checked.getLeft().getOwner() + \" but submitted by \" + authUser));\n+        }\n+\n+        String procInstID = checked.getLeft().getProcessInstanceId();\n+\n+        User user = userDAO.find(getUserKey(procInstID));\n+        if (user == null) {\n+            throw new NotFoundException(\"User with key \" + getUserKey(procInstID));\n+        }\n+\n+        Set<String> preTasks = FlowableRuntimeUtils.getPerformedTasks(engine, procInstID, user);\n+\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.TASK, \"submit\");\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.FORM_SUBMITTER, authUser);\n+        engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.USER, lazyLoad(user));\n+        try {\n+            engine.getFormService().submitTaskFormData(form.getTaskId(), getPropertiesForSubmit(form));\n+        } catch (FlowableException e) {\n+            FlowableRuntimeUtils.throwException(e, \"While submitting form for task \" + form.getTaskId());\n+        }\n+        Set<String> postTasks = FlowableRuntimeUtils.getPerformedTasks(engine, procInstID, user);\n+        postTasks.removeAll(preTasks);\n+        postTasks.add(form.getTaskId());\n+        if (procInstID.equals(FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey()))) {\n+            FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+        }\n+\n+        user = userDAO.save(user);\n+\n+        UserPatch userPatch = null;\n+        String clearPassword = null;\n+        PropagationByResource propByRes = null;\n+\n+        ProcessInstance afterSubmitPI = engine.getRuntimeService().\n+                createProcessInstanceQuery().processInstanceId(procInstID).singleResult();\n+        if (afterSubmitPI != null) {\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.FORM_SUBMITTER);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER_TO);\n+\n+            // see if there is any propagation to be done\n+            propByRes = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, PropagationByResource.class);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE);\n+\n+            // fetch - if available - the encrypted password\n+            String encryptedPwd = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.ENCRYPTED_PWD, String.class);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.ENCRYPTED_PWD);\n+            if (StringUtils.isNotBlank(encryptedPwd)) {\n+                clearPassword = FlowableRuntimeUtils.decrypt(encryptedPwd);\n+            }\n+\n+            Boolean enabled = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.ENABLED, Boolean.class);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.ENABLED);\n+\n+            // supports approval chains\n+            FlowableRuntimeUtils.saveForFormSubmit(\n+                    engine,\n+                    procInstID,\n+                    user,\n+                    dataBinder.getUserTO(user, true),\n+                    clearPassword,\n+                    enabled,\n+                    propByRes);\n+\n+            userPatch = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.USER_PATCH, UserPatch.class);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER_PATCH);\n+        }\n+        if (userPatch == null) {\n+            userPatch = new UserPatch();\n+            userPatch.setKey(user.getKey());\n+            userPatch.setPassword(new PasswordPatch.Builder().onSyncope(true).value(clearPassword).build());\n+\n+            if (propByRes != null) {\n+                userPatch.getPassword().getResources().addAll(propByRes.get(ResourceOperation.CREATE));\n+            }\n+        }\n+\n+        return new WorkflowResult<>(userPatch, propByRes, postTasks);\n+    }\n+}"},{"sha":"f3f188024e5b35444e4f64e687cb824bc7fb4a6a","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableUserWorkflowAdapter.java","status":"added","additions":488,"deletions":0,"changes":488,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableUserWorkflowAdapter.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,488 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.impl;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.core.provisioning.api.PropagationByResource;\n+import org.apache.syncope.common.lib.types.ResourceOperation;\n+import org.apache.syncope.core.flowable.api.UserRequestHandler;\n+import org.apache.syncope.core.flowable.api.WorkflowTaskManager;\n+import org.apache.syncope.core.spring.security.AuthContextUtils;\n+import org.apache.syncope.core.spring.BeanUtils;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n+import org.apache.syncope.core.workflow.api.WorkflowException;\n+import org.apache.syncope.core.workflow.java.AbstractUserWorkflowAdapter;\n+import org.flowable.bpmn.model.FlowElement;\n+import org.flowable.bpmn.model.Gateway;\n+import org.flowable.bpmn.model.SequenceFlow;\n+import org.flowable.bpmn.model.Process;\n+import org.flowable.common.engine.api.FlowableException;\n+import org.flowable.engine.runtime.ProcessInstance;\n+import org.flowable.task.api.Task;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+public class FlowableUserWorkflowAdapter extends AbstractUserWorkflowAdapter implements WorkflowTaskManager {\n+\n+    @Autowired\n+    protected DomainProcessEngine engine;\n+\n+    @Autowired\n+    protected UserRequestHandler userRequestHandler;\n+\n+    @Override\n+    public String getPrefix() {\n+        return \"ACT_\";\n+    }\n+\n+    @Override\n+    public <T> T getVariable(final String executionId, final String variableName, final Class<T> variableClass) {\n+        return engine.getRuntimeService().getVariable(executionId, variableName, variableClass);\n+    }\n+\n+    @Override\n+    public void setVariable(final String executionId, final String variableName, final Object value) {\n+        engine.getRuntimeService().setVariable(executionId, variableName, value);\n+    }\n+\n+    protected User lazyLoad(final User user) {\n+        // using BeanUtils to access all user's properties and trigger lazy loading - we are about to\n+        // serialize a User instance for availability within workflow tasks, and this breaks transactions\n+        BeanUtils.copyProperties(user, entityFactory.newEntity(User.class));\n+        return user;\n+    }\n+\n+    @Override\n+    protected WorkflowResult<Pair<String, Boolean>> doCreate(\n+            final UserTO userTO,\n+            final boolean disablePwdPolicyCheck,\n+            final Boolean enabled,\n+            final boolean storePassword) {\n+\n+        Map<String, Object> variables = new HashMap<>();\n+        variables.put(FlowableRuntimeUtils.WF_EXECUTOR, AuthContextUtils.getUsername());\n+        variables.put(FlowableRuntimeUtils.USER_TO, userTO);\n+        variables.put(FlowableRuntimeUtils.ENABLED, enabled);\n+        variables.put(FlowableRuntimeUtils.STORE_PASSWORD, storePassword);\n+\n+        ProcessInstance procInst = null;\n+        try {\n+            procInst = engine.getRuntimeService().\n+                    startProcessInstanceByKey(FlowableRuntimeUtils.WF_PROCESS_ID, variables);\n+        } catch (FlowableException e) {\n+            FlowableRuntimeUtils.throwException(\n+                    e, \"While starting \" + FlowableRuntimeUtils.WF_PROCESS_ID + \" instance\");\n+        }\n+\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.WF_EXECUTOR);\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.USER_TO);\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.STORE_PASSWORD);\n+\n+        User user = engine.getRuntimeService().\n+                getVariable(procInst.getProcessInstanceId(), FlowableRuntimeUtils.USER, User.class);\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.USER);\n+\n+        Boolean updatedEnabled = engine.getRuntimeService().\n+                getVariable(procInst.getProcessInstanceId(), FlowableRuntimeUtils.ENABLED, Boolean.class);\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.ENABLED);\n+        if (updatedEnabled != null) {\n+            user.setSuspended(!updatedEnabled);\n+        }\n+\n+        // this will make UserValidator not to consider password policies at all\n+        if (disablePwdPolicyCheck) {\n+            user.removeClearPassword();\n+        }\n+\n+        FlowableRuntimeUtils.updateStatus(engine, procInst.getProcessInstanceId(), user);\n+        User created = userDAO.save(user);\n+\n+        engine.getRuntimeService().updateBusinessKey(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.getWFProcBusinessKey(created.getKey()));\n+\n+        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.PROPAGATE_ENABLE, Boolean.class);\n+        engine.getRuntimeService().removeVariable(\n+                procInst.getProcessInstanceId(), FlowableRuntimeUtils.PROPAGATE_ENABLE);\n+        if (propagateEnable == null) {\n+            propagateEnable = enabled;\n+        }\n+\n+        PropagationByResource propByRes = new PropagationByResource();\n+        propByRes.set(ResourceOperation.CREATE, userDAO.findAllResourceKeys(created.getKey()));\n+\n+        FlowableRuntimeUtils.saveForFormSubmit(\n+                engine,\n+                procInst.getProcessInstanceId(),\n+                created,\n+                dataBinder.getUserTO(created, true),\n+                userTO.getPassword(),\n+                enabled,\n+                propByRes);\n+\n+        Set<String> tasks = FlowableRuntimeUtils.getPerformedTasks(engine, procInst.getProcessInstanceId(), user);\n+\n+        return new WorkflowResult<>(Pair.of(created.getKey(), propagateEnable), propByRes, tasks);\n+    }\n+\n+    protected Set<String> doExecuteNextTask(\n+            final String procInstID,\n+            final User user,\n+            final Map<String, Object> moreVariables) {\n+\n+        Set<String> preTasks = FlowableRuntimeUtils.getPerformedTasks(engine, procInstID, user);\n+\n+        Map<String, Object> variables = new HashMap<>();\n+        variables.put(FlowableRuntimeUtils.WF_EXECUTOR, AuthContextUtils.getUsername());\n+        variables.put(FlowableRuntimeUtils.USER, lazyLoad(user));\n+\n+        if (moreVariables != null && !moreVariables.isEmpty()) {\n+            variables.putAll(moreVariables);\n+        }\n+\n+        List<Task> tasks = FlowableRuntimeUtils.createTaskQuery(engine, false).processInstanceId(procInstID).list();\n+        String task = null;\n+        if (tasks.size() == 1) {\n+            try {\n+                engine.getTaskService().complete(tasks.get(0).getId(), variables);\n+                task = tasks.get(0).getTaskDefinitionKey();\n+            } catch (FlowableException e) {\n+                FlowableRuntimeUtils.throwException(\n+                        e, \"While completing task '\" + tasks.get(0).getName() + \"' for \" + user);\n+            }\n+        } else {\n+            LOG.warn(\"Expected a single task, found {}\", tasks.size());\n+        }\n+\n+        Set<String> postTasks = FlowableRuntimeUtils.getPerformedTasks(engine, procInstID, user);\n+        postTasks.removeAll(preTasks);\n+        if (task != null) {\n+            postTasks.add(task);\n+        }\n+\n+        return postTasks;\n+    }\n+\n+    @Override\n+    protected WorkflowResult<String> doActivate(final User user, final String token) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        Map<String, Object> variables = new HashMap<>(2);\n+        variables.put(FlowableRuntimeUtils.TOKEN, token);\n+        variables.put(FlowableRuntimeUtils.TASK, \"activate\");\n+\n+        Set<String> tasks = doExecuteNextTask(procInstID, user, variables);\n+\n+        FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+        User updated = userDAO.save(user);\n+\n+        variables.keySet().forEach(key -> engine.getRuntimeService().removeVariable(procInstID, key));\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+\n+        return new WorkflowResult<>(updated.getKey(), null, tasks);\n+    }\n+\n+    @Override\n+    protected WorkflowResult<Pair<UserPatch, Boolean>> doUpdate(final User user, final UserPatch userPatch) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        // save some existing variable values for later processing, after actual update is made \n+        UserPatch patchBeforeUpdate = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.USER_PATCH, UserPatch.class);\n+        PropagationByResource propByResBeforeUpdate = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, PropagationByResource.class);\n+\n+        // whether the initial status is a form task\n+        boolean inFormTask = FlowableRuntimeUtils.getFormTask(engine, procInstID) != null;\n+\n+        Map<String, Object> variables = new HashMap<>(2);\n+        variables.put(FlowableRuntimeUtils.USER_PATCH, userPatch);\n+        variables.put(FlowableRuntimeUtils.TASK, \"update\");\n+\n+        Set<String> tasks = doExecuteNextTask(procInstID, user, variables);\n+\n+        FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+        User updated = userDAO.save(user);\n+\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);\n+\n+        // if the original status was a form task, restore the patch as before the process started\n+        if (inFormTask) {\n+            if (patchBeforeUpdate == null) {\n+                engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER_PATCH);\n+            } else {\n+                engine.getRuntimeService().setVariable(procInstID, FlowableRuntimeUtils.USER_PATCH, patchBeforeUpdate);\n+            }\n+        }\n+\n+        // whether the after status is a form task\n+        inFormTask = FlowableRuntimeUtils.getFormTask(engine, procInstID) != null;\n+        if (!inFormTask) {\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER_PATCH);\n+        }\n+\n+        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, PropagationByResource.class);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE);\n+\n+        FlowableRuntimeUtils.saveForFormSubmit(\n+                engine,\n+                procInstID,\n+                updated,\n+                dataBinder.getUserTO(updated, true),\n+                userPatch.getPassword() == null ? null : userPatch.getPassword().getValue(),\n+                null,\n+                propByResBeforeUpdate == null ? propByRes : propByResBeforeUpdate);\n+\n+        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.PROPAGATE_ENABLE, Boolean.class);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.PROPAGATE_ENABLE);\n+\n+        return new WorkflowResult<>(Pair.of(userPatch, propagateEnable), propByRes, tasks);\n+    }\n+\n+    @Override\n+    protected WorkflowResult<String> doSuspend(final User user) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        Set<String> performedTasks =\n+                doExecuteNextTask(procInstID, user, Collections.singletonMap(FlowableRuntimeUtils.TASK, \"suspend\"));\n+        FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+        User updated = userDAO.save(user);\n+\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+\n+        return new WorkflowResult<>(updated.getKey(), null, performedTasks);\n+    }\n+\n+    @Override\n+    protected WorkflowResult<String> doReactivate(final User user) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        Set<String> performedTasks =\n+                doExecuteNextTask(procInstID, user, Collections.singletonMap(FlowableRuntimeUtils.TASK, \"reactivate\"));\n+        FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+\n+        User updated = userDAO.save(user);\n+\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+\n+        return new WorkflowResult<>(updated.getKey(), null, performedTasks);\n+    }\n+\n+    @Override\n+    protected void doRequestPasswordReset(final User user) {\n+        Map<String, Object> variables = new HashMap<>(3);\n+        variables.put(FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n+        variables.put(FlowableRuntimeUtils.TASK, \"requestPasswordReset\");\n+        variables.put(FlowableRuntimeUtils.EVENT, \"requestPasswordReset\");\n+\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        doExecuteNextTask(procInstID, user, variables);\n+        userDAO.save(user);\n+\n+        variables.keySet().forEach(key -> engine.getRuntimeService().removeVariable(procInstID, key));\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+    }\n+\n+    @Override\n+    protected WorkflowResult<Pair<UserPatch, Boolean>> doConfirmPasswordReset(\n+            final User user, final String token, final String password) {\n+\n+        Map<String, Object> variables = new HashMap<>(5);\n+        variables.put(FlowableRuntimeUtils.TOKEN, token);\n+        variables.put(FlowableRuntimeUtils.PASSWORD, password);\n+        variables.put(FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n+        variables.put(FlowableRuntimeUtils.TASK, \"confirmPasswordReset\");\n+        variables.put(FlowableRuntimeUtils.EVENT, \"confirmPasswordReset\");\n+\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        Set<String> tasks = doExecuteNextTask(procInstID, user, variables);\n+\n+        userDAO.save(user);\n+\n+        variables.keySet().forEach(key -> engine.getRuntimeService().removeVariable(procInstID, key));\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+\n+        PropagationByResource propByRes = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, PropagationByResource.class);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE);\n+        UserPatch updatedPatch = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.USER_PATCH, UserPatch.class);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER_PATCH);\n+        Boolean propagateEnable = engine.getRuntimeService().getVariable(\n+                procInstID, FlowableRuntimeUtils.PROPAGATE_ENABLE, Boolean.class);\n+        engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.PROPAGATE_ENABLE);\n+\n+        return new WorkflowResult<>(Pair.of(updatedPatch, propagateEnable), propByRes, tasks);\n+    }\n+\n+    @Override\n+    protected void doDelete(final User user) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        doExecuteNextTask(procInstID, user, Collections.singletonMap(FlowableRuntimeUtils.TASK, \"delete\"));\n+\n+        PropagationByResource propByRes = new PropagationByResource();\n+        propByRes.set(ResourceOperation.DELETE, userDAO.findAllResourceKeys(user.getKey()));\n+\n+        if (engine.getRuntimeService().createProcessInstanceQuery().\n+                processInstanceId(procInstID).active().list().isEmpty()) {\n+\n+            userDAO.delete(user.getKey());\n+\n+            if (!engine.getHistoryService().createHistoricProcessInstanceQuery().\n+                    processInstanceId(procInstID).list().isEmpty()) {\n+\n+                engine.getHistoryService().deleteHistoricProcessInstance(procInstID);\n+            }\n+        } else {\n+            FlowableRuntimeUtils.saveForFormSubmit(\n+                    engine,\n+                    procInstID,\n+                    user,\n+                    dataBinder.getUserTO(user, true),\n+                    null,\n+                    null,\n+                    propByRes);\n+\n+            FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+            userDAO.save(user);\n+\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.TASK);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.USER);\n+            engine.getRuntimeService().removeVariable(procInstID, FlowableRuntimeUtils.WF_EXECUTOR);\n+        }\n+    }\n+\n+    @Override\n+    public WorkflowResult<String> executeNextTask(final WorkflowTaskExecInput workflowTaskExecInput) {\n+        User user = userDAO.authFind(workflowTaskExecInput.getUserKey());\n+\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey());\n+\n+        Map<String, Object> variables = new HashMap<>();\n+        variables.put(FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n+        variables.putAll(workflowTaskExecInput.getVariables());\n+\n+        Set<String> performedTasks = doExecuteNextTask(procInstID, user, variables);\n+        FlowableRuntimeUtils.updateStatus(engine, procInstID, user);\n+        user = userDAO.save(user);\n+\n+        engine.getRuntimeService().setVariable(\n+                procInstID, FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n+\n+        if (engine.getRuntimeService().createProcessInstanceQuery().\n+                processInstanceId(procInstID).active().list().isEmpty()) {\n+\n+            userDAO.delete(user.getKey());\n+\n+            if (!engine.getHistoryService().createHistoricProcessInstanceQuery().\n+                    processInstanceId(procInstID).list().isEmpty()) {\n+\n+                engine.getHistoryService().deleteHistoricProcessInstance(procInstID);\n+            }\n+        } else {\n+            PropagationByResource propByRes = engine.getRuntimeService().\n+                    getVariable(procInstID, FlowableRuntimeUtils.PROP_BY_RESOURCE, PropagationByResource.class);\n+\n+            FlowableRuntimeUtils.saveForFormSubmit(\n+                    engine,\n+                    procInstID,\n+                    user,\n+                    dataBinder.getUserTO(user, true),\n+                    null,\n+                    null,\n+                    propByRes);\n+        }\n+\n+        return new WorkflowResult<>(user.getKey(), null, performedTasks);\n+    }\n+\n+    protected void navigateAvailableTasks(final FlowElement flow, final List<String> availableTasks) {\n+        if (flow instanceof Gateway) {\n+            ((Gateway) flow).getOutgoingFlows().forEach(subflow -> navigateAvailableTasks(subflow, availableTasks));\n+        } else if (flow instanceof SequenceFlow) {\n+            navigateAvailableTasks(((SequenceFlow) flow).getTargetFlowElement(), availableTasks);\n+        } else if (flow instanceof org.flowable.bpmn.model.Task) {\n+            availableTasks.add(flow.getId());\n+        } else {\n+            LOG.debug(\"Unexpected flow found: {}\", flow);\n+        }\n+    }\n+\n+    @Override\n+    public List<WorkflowTask> getAvailableTasks(final String userKey) {\n+        String procInstID = FlowableRuntimeUtils.getWFProcInstID(engine, userKey);\n+\n+        List<String> availableTasks = new ArrayList<>();\n+        try {\n+            Task currentTask = FlowableRuntimeUtils.createTaskQuery(engine, false).\n+                    processInstanceId(procInstID).singleResult();\n+\n+            Process process = engine.getRepositoryService().\n+                    getBpmnModel(FlowableRuntimeUtils.getLatestProcDefByKey(\n+                            engine, FlowableRuntimeUtils.WF_PROCESS_ID).getId()).getProcesses().get(0);\n+            process.getFlowElements().stream().\n+                    filter(SequenceFlow.class::isInstance).\n+                    map(SequenceFlow.class::cast).\n+                    filter(sequenceFlow -> sequenceFlow.getSourceRef().equals(currentTask.getTaskDefinitionKey())).\n+                    forEach(sequenceFlow -> {\n+                        navigateAvailableTasks(sequenceFlow.getTargetFlowElement(), availableTasks);\n+                    });\n+        } catch (FlowableException e) {\n+            throw new WorkflowException(\n+                    \"While reading available tasks for workflow instance \" + procInstID, e);\n+        }\n+\n+        return availableTasks.stream().map(input -> {\n+            WorkflowTask workflowTaskTO = new WorkflowTask();\n+            workflowTaskTO.setName(input);\n+            return workflowTaskTO;\n+        }).collect(Collectors.toList());\n+    }\n+}"},{"sha":"d5fcd416813a717a1e3aae55543d97b6e00175a7","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/FlowableWorkflowUtils.java","status":"added","additions":47,"deletions":0,"changes":47,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableWorkflowUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableWorkflowUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FFlowableWorkflowUtils.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,47 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.flowable.impl;\n+\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+public class FlowableWorkflowUtils {\n+\n+    @Autowired\n+    protected DomainProcessEngine engine;\n+\n+    @Transactional(readOnly = true)\n+    public boolean isUserIngroup(final UserTO user, final String groupName) {\n+        return user.getMemberships().stream().\n+                anyMatch(membership -> groupName != null && groupName.equals(membership.getGroupName()));\n+    }\n+\n+    public void setUserWorkflowVariable(final String variableName, final Object value, final User user) {\n+        engine.getRuntimeService().\n+                setVariable(FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey()), variableName, value);\n+    }\n+\n+    public Object getUserWorkflowVariable(final String variableName, final User user) {\n+        return engine.getRuntimeService().\n+                getVariable(FlowableRuntimeUtils.getWFProcInstID(engine, user.getKey()), variableName);\n+    }\n+}"},{"sha":"eb368383f54c0d89fe0b7b6f7ffba8aa9af098a2","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/impl/SyncopeTaskQueryImpl.java","status":"renamed","additions":22,"deletions":14,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FSyncopeTaskQueryImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FSyncopeTaskQueryImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fimpl%2FSyncopeTaskQueryImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,26 +16,34 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.client.cli.commands.self;\n+package org.apache.syncope.core.flowable.impl;\n \n-import javax.ws.rs.core.Response;\n-import org.apache.cxf.jaxrs.client.WebClient;\n-import org.apache.syncope.client.cli.SyncopeServices;\n-import org.apache.syncope.common.rest.api.RESTHeaders;\n-import org.apache.syncope.common.rest.api.service.WorkflowService;\n+import org.flowable.common.engine.impl.interceptor.CommandExecutor;\n+import org.flowable.task.api.TaskQuery;\n+import org.flowable.task.service.impl.TaskQueryImpl;\n \n-public class WorkflowSyncopeOperations {\n+public class SyncopeTaskQueryImpl extends TaskQueryImpl {\n \n-    private static final String DEFAULT = \"userWorkflow\";\n+    private static final long serialVersionUID = 734215641378485689L;\n \n-    private final WorkflowService workflowService = SyncopeServices.get(WorkflowService.class);\n+    protected boolean withFormKey;\n \n-    public Response exportDiagram(final String anyType) {\n-        WebClient.client(workflowService).accept(RESTHeaders.MEDIATYPE_IMAGE_PNG);\n-        return workflowService.exportDiagram(anyType, DEFAULT);\n+    protected SyncopeTaskQueryImpl currentOrQueryObject;\n+\n+    public SyncopeTaskQueryImpl(final CommandExecutor commandExecutor) {\n+        super(commandExecutor);\n+    }\n+\n+    public TaskQuery taskWithFormKey() {\n+        if (orActive) {\n+            currentOrQueryObject.withFormKey = true;\n+        } else {\n+            this.withFormKey = true;\n+        }\n+        return this;\n     }\n \n-    public Response exportDefinition(final String anyType) {\n-        return workflowService.get(anyType, DEFAULT);\n+    public boolean isWithFormKey() {\n+        return withFormKey;\n     }\n }","previous_filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowSyncopeOperations.java"},{"sha":"1b056c1eb89d9b599c0fbc0355fecc5bd4490ff1","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngine.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngine.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngine.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngine.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.spring;\n+package org.apache.syncope.core.flowable.support;\n \n import java.util.Collections;\n import java.util.Map;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/spring/DomainProcessEngine.java"},{"sha":"d1c3299b60ad3cd57f67a116e47a86d03afbb1ba","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngineConfiguration.java","status":"renamed","additions":9,"deletions":8,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,16 +16,17 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n-import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.springframework.transaction.annotation.Transactional;\n+import java.io.InputStream;\n+import org.flowable.spring.SpringProcessEngineConfiguration;\n \n-public class FlowableUtils {\n+public class DomainProcessEngineConfiguration extends SpringProcessEngineConfiguration {\n \n-    @Transactional(readOnly = true)\n-    public boolean isUserIngroup(final User user, final String groupName) {\n-        return user.getMemberships().stream().\n-                anyMatch(membership -> groupName != null && groupName.equals(membership.getRightEnd().getName()));\n+    private static final String SYNCOPE_MYBATIS_MAPPING_FILE = \"org/apache/syncope/ext/flowable/mappings.xml\";\n+\n+    @Override\n+    public InputStream getMyBatisXmlConfigurationStream() {\n+        return getResourceAsStream(SYNCOPE_MYBATIS_MAPPING_FILE);\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/FlowableUtils.java"},{"sha":"162b1133839fe6eb5c170441203cd3d54ddce73c","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngineFactoryBean.java","status":"renamed","additions":5,"deletions":4,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.spring;\n+package org.apache.syncope.core.flowable.support;\n \n import java.util.HashMap;\n import java.util.Map;\n@@ -28,18 +28,19 @@\n import org.flowable.engine.impl.util.EngineServiceUtil;\n import org.flowable.idm.spring.SpringIdmEngineConfiguration;\n import org.flowable.spring.SpringExpressionManager;\n-import org.flowable.spring.SpringProcessEngineConfiguration;\n import org.springframework.beans.BeansException;\n import org.springframework.beans.factory.DisposableBean;\n import org.springframework.beans.factory.FactoryBean;\n import org.springframework.context.ApplicationContext;\n import org.springframework.context.ApplicationContextAware;\n+import org.springframework.stereotype.Component;\n import org.springframework.transaction.PlatformTransactionManager;\n \n /**\n- * Spring factory for {@link DomainProcessEngine} which takes the provided {@link SpringProcessEngineConfiguration} as\n+ * Spring factory for {@link DomainProcessEngine} which takes the provided {@link DomainProcessEngineConfiguration} as\n  * template for each of the configured Syncope domains.\n  */\n+@Component\n public class DomainProcessEngineFactoryBean\n         implements FactoryBean<DomainProcessEngine>, DisposableBean, ApplicationContextAware {\n \n@@ -64,7 +65,7 @@ public DomainProcessEngine getObject() throws Exception {\n                             domain + \"TransactionManager\", PlatformTransactionManager.class);\n                     Object entityManagerFactory = ctx.getBean(domain + \"EntityManagerFactory\");\n \n-                    SpringProcessEngineConfiguration conf = ctx.getBean(SpringProcessEngineConfiguration.class);\n+                    DomainProcessEngineConfiguration conf = ctx.getBean(DomainProcessEngineConfiguration.class);\n                     conf.setDataSource(dataSource);\n                     conf.setTransactionManager(transactionManager);\n                     conf.setTransactionsExternallyManaged(true);","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/spring/DomainProcessEngineFactoryBean.java"},{"sha":"9009abbc7d3cb6fecf0af575c30427aeb8e1796a","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeEntitiesVariableType.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeEntitiesVariableType.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeEntitiesVariableType.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeEntitiesVariableType.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import org.apache.syncope.core.persistence.api.entity.Entity;\n import org.flowable.variable.service.impl.types.SerializableType;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeEntitiesVariableType.java"},{"sha":"e7437dd5f1ae2a1407d11d39a9cdc0f4a6aa2e51","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeGroupQueryImpl.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeGroupQueryImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeGroupQueryImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeGroupQueryImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import java.util.Collections;\n import java.util.List;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeGroupQueryImpl.java"},{"sha":"6b9c4f61652fe14157cc97fe9fe1f41d462465b4","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeIdmIdentityService.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeIdmIdentityService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import org.flowable.idm.api.GroupQuery;\n import org.flowable.idm.api.UserQuery;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeIdmIdentityService.java"},{"sha":"56e6c88878dc1668e207b080062d236bb6969f89","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeSession.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSession.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import org.flowable.common.engine.impl.interceptor.Session;\n ","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeSession.java"},{"sha":"0c1789bdd58af114517bc96e19c27041096948ce","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeSessionFactory.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSessionFactory.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSessionFactory.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeSessionFactory.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import org.flowable.common.engine.impl.interceptor.CommandContext;\n import org.flowable.common.engine.impl.interceptor.Session;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeSessionFactory.java"},{"sha":"25d9ab5e44702afcacaa603ea9130c07269a3d71","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/SyncopeUserQueryImpl.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeUserQueryImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeUserQueryImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FSyncopeUserQueryImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.flowable.support;\n \n import java.util.ArrayList;\n import java.util.Collections;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/SyncopeUserQueryImpl.java"},{"sha":"692a161f5570d43a5bf0cac9704bd2e241c95299","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/AbstractFlowableServiceTask.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAbstractFlowableServiceTask.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAbstractFlowableServiceTask.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAbstractFlowableServiceTask.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.flowable.engine.ProcessEngine;\n import org.slf4j.Logger;","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/AbstractFlowableServiceTask.java"},{"sha":"3febfa0732006b204af79c58a1e8ab0b4a2e71b6","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/AutoActivate.java","status":"renamed","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAutoActivate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAutoActivate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FAutoActivate.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,15 +16,15 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.common.lib.AnyOperations;\n import org.apache.syncope.common.lib.patch.UserPatch;\n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.core.persistence.api.dao.UserDAO;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -40,9 +40,9 @@ public class AutoActivate extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n         UserTO userTO = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER_TO, UserTO.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER_TO, UserTO.class);\n         if (userTO != null && userTO.getKey() != null && user.getKey() != null) {\n             user = userDAO.save(user);\n \n@@ -52,9 +52,9 @@ protected void doExecute(final String executionId) {\n \n             dataBinder.update(user, userPatch);\n \n-            engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n+            engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER, user);\n         }\n \n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.PROPAGATE_ENABLE, Boolean.TRUE);\n+        engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.PROPAGATE_ENABLE, Boolean.TRUE);\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/AutoActivate.java"},{"sha":"75bf0acfae51fdcf9bd3795f7b192d1ca50659d9","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Create.java","status":"renamed","additions":10,"deletions":7,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FCreate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FCreate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FCreate.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,13 +16,13 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.core.persistence.api.entity.EntityFactory;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -38,15 +38,18 @@ public class Create extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         UserTO userTO = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER_TO, UserTO.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER_TO, UserTO.class);\n         Boolean storePassword = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.STORE_PASSWORD, Boolean.class);\n-        // create and set workflow id\n+                getVariable(executionId, FlowableRuntimeUtils.STORE_PASSWORD, Boolean.class);\n+\n+        // create user\n         User user = entityFactory.newEntity(User.class);\n         dataBinder.create(user, userTO, storePassword == null ? true : storePassword);\n-        user.setWorkflowId(executionId);\n \n         // report user as result\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n+        engine.getRuntimeService().\n+                setVariable(executionId, FlowableRuntimeUtils.USER, user);\n+        engine.getRuntimeService().\n+                setVariable(executionId, FlowableRuntimeUtils.USER_TO, dataBinder.getUserTO(user, true));\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Create.java"},{"sha":"7f3acf6a2d7fec5bb06100846d79f02de8edcc28","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Delete.java","status":"renamed","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FDelete.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FDelete.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FDelete.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,10 +16,10 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.stereotype.Component;\n \n @Component\n@@ -28,14 +28,14 @@ public class Delete extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n \n         // Do something with user...\n         if (user != null) {\n             user.checkToken(\"\");\n         }\n \n         // remove user variable\n-        engine.getRuntimeService().removeVariable(executionId, FlowableUserWorkflowAdapter.USER);\n+        engine.getRuntimeService().removeVariable(executionId, FlowableRuntimeUtils.USER);\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Delete.java"},{"sha":"aee2b7397ba6787a28dff28cc9229f0b2ff0b1a7","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/GenerateToken.java","status":"renamed","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FGenerateToken.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FGenerateToken.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FGenerateToken.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,11 +16,11 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.core.persistence.api.dao.ConfDAO;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -33,12 +33,12 @@ public class GenerateToken extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n \n         user.generateToken(\n                 confDAO.find(\"token.length\", 256L).intValue(),\n                 confDAO.find(\"token.expireTime\", 60L).intValue());\n \n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n+        engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER, user);\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/GenerateToken.java"},{"sha":"d64032f947d60896159979e46e0005acba92a5e0","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Notify.java","status":"renamed","additions":7,"deletions":8,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FNotify.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FNotify.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FNotify.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,21 +16,21 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.common.lib.types.AuditElements;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.notification.NotificationManager;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n /**\n  * General-purpose notification task for usage within workflow.\n- * It requires a pre-existing <tt>Notification</tt> with category <tt>CUSTOM</tt> and result <tt>SUCCESS</tt>.\n- * An <tt>event</tt> workflow variable needs to be provided as well.\n+ * It requires a pre-existing Notification with category {@code CUSTOM} and result {@code SUCCESS}.\n+ * An {@code event} workflow variable needs to be provided as well.\n  */\n @Component\n public class Notify extends AbstractFlowableServiceTask {\n@@ -41,11 +41,11 @@ public class Notify extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n         UserTO userTO = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER_TO, UserTO.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER_TO, UserTO.class);\n         String event = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.EVENT, String.class);\n+                getVariable(executionId, FlowableRuntimeUtils.EVENT, String.class);\n \n         if (StringUtils.isNotBlank(event)) {\n             notificationManager.createTasks(\n@@ -61,5 +61,4 @@ protected void doExecute(final String executionId) {\n             LOG.debug(\"Not sending any notification since no event was found\");\n         }\n     }\n-\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Notify.java"},{"sha":"1c36202a384dfd99310e5908cbb50d7a72c776e5","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/PasswordReset.java","status":"renamed","additions":8,"deletions":9,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FPasswordReset.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FPasswordReset.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FPasswordReset.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.common.lib.patch.PasswordPatch;\n import org.apache.syncope.common.lib.patch.UserPatch;\n@@ -25,7 +25,7 @@\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n import org.apache.syncope.core.workflow.api.WorkflowException;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -41,11 +41,11 @@ public class PasswordReset extends AbstractFlowableServiceTask {\n     @Override\n     protected void doExecute(final String executionId) {\n         User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n         String token = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.TOKEN, String.class);\n+                getVariable(executionId, FlowableRuntimeUtils.TOKEN, String.class);\n         String password = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.PASSWORD, String.class);\n+                getVariable(executionId, FlowableRuntimeUtils.PASSWORD, String.class);\n \n         if (!user.checkToken(token)) {\n             throw new WorkflowException(new IllegalArgumentException(\"Wrong token: \" + token + \" for \" + user));\n@@ -63,9 +63,8 @@ protected void doExecute(final String executionId) {\n         PropagationByResource propByRes = dataBinder.update(user, userPatch);\n \n         // report updated user and propagation by resource as result\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER_PATCH, userPatch);\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.PROP_BY_RESOURCE, propByRes);\n+        engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER, user);\n+        engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER_PATCH, userPatch);\n+        engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.PROP_BY_RESOURCE, propByRes);\n     }\n-\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/PasswordReset.java"},{"sha":"d6b2c2762ee43fa8a6f319bb3d3e3fc321eb4aed","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Reactivate.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FReactivate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FReactivate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FReactivate.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.springframework.stereotype.Component;\n ","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Reactivate.java"},{"sha":"8e9439bf4f5f12da4f47450bd06a14b6d9ae1973","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Suspend.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FSuspend.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FSuspend.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FSuspend.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.springframework.stereotype.Component;\n ","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Suspend.java"},{"sha":"c7007ad0568ef21e350e8694ec5bed41e562dd9c","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/task/Update.java","status":"renamed","additions":14,"deletions":10,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FUpdate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FUpdate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Ftask%2FUpdate.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,14 +16,14 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable.task;\n+package org.apache.syncope.core.flowable.task;\n \n import org.apache.syncope.common.lib.patch.UserPatch;\n import org.apache.syncope.core.persistence.api.dao.UserDAO;\n import org.apache.syncope.core.provisioning.api.PropagationByResource;\n import org.apache.syncope.core.persistence.api.entity.user.User;\n import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n-import org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -38,17 +38,21 @@ public class Update extends AbstractFlowableServiceTask {\n \n     @Override\n     protected void doExecute(final String executionId) {\n-        User user = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER, User.class);\n         UserPatch userPatch = engine.getRuntimeService().\n-                getVariable(executionId, FlowableUserWorkflowAdapter.USER_PATCH, UserPatch.class);\n+                getVariable(executionId, FlowableRuntimeUtils.USER_PATCH, UserPatch.class);\n+        if (userPatch == null || userPatch.isEmpty()) {\n+            LOG.warn(\"No actual update is to be performed: null patch\");\n+        } else {\n+            User user = engine.getRuntimeService().\n+                    getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n \n-        user = userDAO.save(user);\n+            user = userDAO.save(user);\n \n-        PropagationByResource propByRes = dataBinder.update(user, userPatch);\n+            PropagationByResource propByRes = dataBinder.update(user, userPatch);\n \n-        // report updated user and propagation by resource as result\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.USER, user);\n-        engine.getRuntimeService().setVariable(executionId, FlowableUserWorkflowAdapter.PROP_BY_RESOURCE, propByRes);\n+            // report updated user and propagation by resource as result\n+            engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER, user);\n+            engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.PROP_BY_RESOURCE, propByRes);\n+        }\n     }\n }","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/task/Update.java"},{"sha":"cc905a3e97685ec3c6287302e4befcf11923a6f7","filename":"ext/flowable/flowable-bpmn/src/main/resources/org/apache/syncope/ext/flowable/Task.xml","status":"added","additions":1418,"deletions":0,"changes":1418,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2FTask.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2FTask.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2FTask.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,1418 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"> \n+\n+<mapper namespace=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+\n+  <!-- TASK INSERT -->\n+  \n+  <insert id=\"insertTask\" parameterType=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+    insert into ${prefix}ACT_RU_TASK (ID_, REV_, NAME_, PARENT_TASK_ID_, DESCRIPTION_, PRIORITY_, CREATE_TIME_, OWNER_, ASSIGNEE_, DELEGATION_, \n+    EXECUTION_ID_, PROC_INST_ID_, PROC_DEF_ID_, TASK_DEF_ID_, SCOPE_ID_, SUB_SCOPE_ID_, SCOPE_TYPE_, SCOPE_DEFINITION_ID_,\n+    TASK_DEF_KEY_, DUE_DATE_, CATEGORY_, SUSPENSION_STATE_, TENANT_ID_, FORM_KEY_, CLAIM_TIME_, \n+    IS_COUNT_ENABLED_, VAR_COUNT_, ID_LINK_COUNT_, SUB_TASK_COUNT_)\n+    values (#{id, jdbcType=VARCHAR},\n+    1,\n+    #{name, jdbcType=VARCHAR},\n+    #{parentTaskId, jdbcType=VARCHAR},\n+    #{description, jdbcType=VARCHAR},\n+    #{priority, jdbcType=INTEGER},\n+    #{createTime, jdbcType=TIMESTAMP},\n+    #{owner, jdbcType=VARCHAR},\n+    #{assignee, jdbcType=VARCHAR},\n+    #{delegationStateString, jdbcType=VARCHAR},\n+    #{executionId, jdbcType=VARCHAR},\n+    #{processInstanceId, jdbcType=VARCHAR},\n+    #{processDefinitionId, jdbcType=VARCHAR},\n+    #{taskDefinitionId, jdbcType=VARCHAR},\n+    #{scopeId, jdbcType=VARCHAR},\n+    #{subScopeId, jdbcType=VARCHAR},\n+    #{scopeType, jdbcType=VARCHAR},\n+    #{scopeDefinitionId, jdbcType=VARCHAR},\n+    #{taskDefinitionKey, jdbcType=VARCHAR},\n+    #{dueDate, jdbcType=TIMESTAMP},\n+    #{category, jdbcType=VARCHAR},\n+    #{suspensionState, jdbcType=INTEGER},\n+    #{tenantId, jdbcType=VARCHAR},\n+    #{formKey, jdbcType=VARCHAR},\n+    #{claimTime, jdbcType=TIMESTAMP},\n+    #{isCountEnabled, jdbcType=BOOLEAN},\n+    #{variableCount, jdbcType=INTEGER},\n+    #{identityLinkCount, jdbcType=INTEGER},\n+    #{subTaskCount, jdbcType=INTEGER}\n+    )\n+  </insert>\n+\n+  <insert id=\"bulkInsertTask\" parameterType=\"java.util.List\">\n+    INSERT INTO ${prefix}ACT_RU_TASK (ID_, REV_, NAME_, PARENT_TASK_ID_, DESCRIPTION_, PRIORITY_, CREATE_TIME_, OWNER_, ASSIGNEE_, DELEGATION_, \n+    EXECUTION_ID_, PROC_INST_ID_, PROC_DEF_ID_, TASK_DEF_ID_, SCOPE_ID_, SUB_SCOPE_ID_, SCOPE_TYPE_, SCOPE_DEFINITION_ID_, \n+    TASK_DEF_KEY_, DUE_DATE_, CATEGORY_, SUSPENSION_STATE_, TENANT_ID_, FORM_KEY_, CLAIM_TIME_, \n+    IS_COUNT_ENABLED_, VAR_COUNT_, ID_LINK_COUNT_, SUB_TASK_COUNT_)\n+    VALUES \n+    <foreach collection=\"list\" item=\"task\" index=\"index\" separator=\",\"> \n+      (#{task.id, jdbcType=VARCHAR},\n+      1,\n+      #{task.name, jdbcType=VARCHAR},\n+      #{task.parentTaskId, jdbcType=VARCHAR},\n+      #{task.description, jdbcType=VARCHAR},\n+      #{task.priority, jdbcType=INTEGER},\n+      #{task.createTime, jdbcType=TIMESTAMP},\n+      #{task.owner, jdbcType=VARCHAR},\n+      #{task.assignee, jdbcType=VARCHAR},\n+      #{task.delegationStateString, jdbcType=VARCHAR},\n+      #{task.executionId, jdbcType=VARCHAR},\n+      #{task.processInstanceId, jdbcType=VARCHAR},\n+      #{task.processDefinitionId, jdbcType=VARCHAR},\n+      #{task.taskDefinitionId, jdbcType=VARCHAR},\n+      #{task.scopeId, jdbcType=VARCHAR},\n+      #{task.subScopeId, jdbcType=VARCHAR},\n+      #{task.scopeType, jdbcType=VARCHAR},\n+      #{task.scopeDefinitionId, jdbcType=VARCHAR},\n+      #{task.taskDefinitionKey, jdbcType=VARCHAR},\n+      #{task.dueDate, jdbcType=TIMESTAMP},\n+      #{task.category, jdbcType=VARCHAR},\n+      #{task.suspensionState, jdbcType=INTEGER},\n+      #{task.tenantId, jdbcType=VARCHAR},\n+      #{task.formKey, jdbcType=VARCHAR},\n+      #{task.claimTime, jdbcType=TIMESTAMP},\n+      #{task.isCountEnabled, jdbcType=BOOLEAN},\n+      #{task.variableCount, jdbcType=INTEGER},\n+      #{task.identityLinkCount, jdbcType=INTEGER},\n+      #{task.subTaskCount, jdbcType=INTEGER}\n+      )\n+    </foreach>\n+  </insert>\n+\n+  <insert id=\"bulkInsertTask\" databaseId=\"oracle\" parameterType=\"java.util.List\">\n+    INSERT ALL \n+    <foreach collection=\"list\" item=\"task\" index=\"index\">\n+      INTO ${prefix}ACT_RU_TASK (ID_, REV_, NAME_, PARENT_TASK_ID_, DESCRIPTION_, PRIORITY_, CREATE_TIME_, OWNER_, ASSIGNEE_, DELEGATION_, \n+      EXECUTION_ID_, PROC_INST_ID_, PROC_DEF_ID_, TASK_DEF_ID_, SCOPE_ID_, SUB_SCOPE_ID_, SCOPE_TYPE_, SCOPE_DEFINITION_ID_, TASK_DEF_KEY_, \n+      DUE_DATE_, CATEGORY_, SUSPENSION_STATE_, TENANT_ID_, FORM_KEY_, CLAIM_TIME_, \n+      IS_COUNT_ENABLED_, VAR_COUNT_, ID_LINK_COUNT_, SUB_TASK_COUNT_) VALUES\n+      (#{task.id, jdbcType=VARCHAR},\n+      1,\n+      #{task.name, jdbcType=VARCHAR},\n+      #{task.parentTaskId, jdbcType=VARCHAR},\n+      #{task.description, jdbcType=VARCHAR},\n+      #{task.priority, jdbcType=INTEGER},\n+      #{task.createTime, jdbcType=TIMESTAMP},\n+      #{task.owner, jdbcType=VARCHAR},\n+      #{task.assignee, jdbcType=VARCHAR},\n+      #{task.delegationStateString, jdbcType=VARCHAR},\n+      #{task.executionId, jdbcType=VARCHAR},\n+      #{task.processInstanceId, jdbcType=VARCHAR},\n+      #{task.processDefinitionId, jdbcType=VARCHAR},\n+      #{task.taskDefinitionId, jdbcType=VARCHAR},\n+      #{task.scopeId, jdbcType=VARCHAR},\n+      #{task.subScopeId, jdbcType=VARCHAR},\n+      #{task.scopeType, jdbcType=VARCHAR},\n+      #{task.scopeDefinitionId, jdbcType=VARCHAR},\n+      #{task.taskDefinitionKey, jdbcType=VARCHAR},\n+      #{task.dueDate, jdbcType=TIMESTAMP},\n+      #{task.category, jdbcType=VARCHAR},\n+      #{task.suspensionState, jdbcType=INTEGER},\n+      #{task.tenantId, jdbcType=VARCHAR},\n+      #{task.formKey, jdbcType=VARCHAR},\n+      #{task.claimTime, jdbcType=TIMESTAMP},\n+      #{task.isCountEnabled, jdbcType=BOOLEAN},\n+      #{task.variableCount, jdbcType=INTEGER},\n+      #{task.identityLinkCount, jdbcType=INTEGER},\n+      #{task.subTaskCount, jdbcType=INTEGER}\n+      )\n+    </foreach>\n+    SELECT * FROM dual\n+  </insert>\n+  \n+  <!-- TASK UPDATE -->\n+  \n+  <update id=\"updateTask\" parameterType=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+    update ${prefix}ACT_RU_TASK\n+    <set>\n+      REV_ = #{revisionNext, jdbcType=INTEGER},\n+      <if test=\"originalPersistentState.name != name\">\n+        NAME_ = #{name, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.parentTaskId != parentTaskId\">\n+        PARENT_TASK_ID_ = #{parentTaskId, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.priority != priority\">\n+        PRIORITY_ = #{priority, jdbcType=INTEGER},\n+      </if>\n+      <if test=\"originalPersistentState.createTime != createTime\">\n+        CREATE_TIME_ = #{createTime, jdbcType=TIMESTAMP},\n+      </if>\n+      <if test=\"originalPersistentState.owner != owner\">\n+        OWNER_ = #{owner, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.assignee != assignee\">\n+        ASSIGNEE_ = #{assignee, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.delegationStateString != delegationStateString\">\n+        DELEGATION_ = #{delegationStateString, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.executionId != executionId\">\n+        EXECUTION_ID_ = #{executionId, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.processDefinitionId != processDefinitionId\">\n+        PROC_DEF_ID_ = #{processDefinitionId, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.taskDefinitionId != taskDefinitionId\">\n+        TASK_DEF_ID_ = #{taskDefinitionId, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.scopeId != scopeId\">\n+        SCOPE_ID_ = #{scopeId, jdbcType=VARCHAR}\n+      </if>\n+      <if test=\"originalPersistentState.subScopeId != subScopeId\">\n+        SUB_SCOPE_ID_ = #{subScopeId, jdbcType=VARCHAR}\n+      </if>\n+      <if test=\"originalPersistentState.scopeType != scopeType\">\n+        SCOPE_TYPE_ = #{scopeType, jdbcType=VARCHAR}\n+      </if>\n+      <if test=\"originalPersistentState.scopeDefinitionId != scopeDefinitionId\">\n+        SCOPE_DEFINITION_ID_ = #{scopeDefinitionId, jdbcType=VARCHAR}\n+      </if>\n+      <if test=\"originalPersistentState.description != description\">\n+        DESCRIPTION_ = #{description, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.dueDate != dueDate\">\n+        DUE_DATE_ = #{dueDate, jdbcType=TIMESTAMP},\n+      </if>\n+      <if test=\"originalPersistentState.category != category\">\n+        CATEGORY_ = #{category, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.suspensionState != suspensionState\">\n+        SUSPENSION_STATE_ = #{suspensionState, jdbcType=INTEGER},\n+      </if>\n+      <if test=\"originalPersistentState.formKey != formKey\">\n+        FORM_KEY_ = #{formKey, jdbcType=VARCHAR},\n+      </if>\n+      <if test=\"originalPersistentState.claimTime != claimTime\">\n+        CLAIM_TIME_ = #{claimTime, jdbcType=TIMESTAMP},\n+      </if>\n+      <if test=\"originalPersistentState.isCountEnabled != isCountEnabled\">\n+        IS_COUNT_ENABLED_ = #{isCountEnabled, jdbcType=BOOLEAN},\n+      </if>\n+      <if test=\"originalPersistentState.variableCount != variableCount\">\n+        VAR_COUNT_ = #{variableCount, jdbcType=INTEGER},\n+      </if>\n+      <if test=\"originalPersistentState.identityLinkCount != identityLinkCount\">\n+        ID_LINK_COUNT_ = #{identityLinkCount, jdbcType=INTEGER},\n+      </if>\n+      <if test=\"originalPersistentState.subTaskCount != subTaskCount\">\n+        SUB_TASK_COUNT_ = #{subTaskCount, jdbcType=INTEGER}\n+      </if>\n+    </set>\n+    where ID_= #{id, jdbcType=VARCHAR}\n+    and REV_ = #{revision, jdbcType=INTEGER}\n+  </update>\n+  \n+  <update id=\"updateTaskTenantIdForDeployment\" parameterType=\"java.util.Map\">\n+    update ${prefix}ACT_RU_TASK set\n+    TENANT_ID_ = #{tenantId, jdbcType=VARCHAR}\n+    where\n+    ID_ in (\n+    SELECT T.ID_ from ${prefix}ACT_RU_TASK T\n+    inner join ${prefix}ACT_RE_PROCDEF P on T.PROC_DEF_ID_  = P.ID_\n+    inner join ${prefix}ACT_RE_DEPLOYMENT D on P.DEPLOYMENT_ID_ = D.ID_ \n+    where D.ID_ = #{deploymentId, jdbcType=VARCHAR}\n+    ) \n+  </update>\n+  \n+  <!-- See http://stackoverflow.com/questions/4429319/you-cant-specify-target-table-for-update-in-from-clause\n+  Tested this on MySQL 5.6: does NOT use a temporary table (so good, performance0 -->\n+  <update id=\"updateTaskTenantIdForDeployment\" databaseId=\"mysql\" parameterType=\"java.util.Map\">\n+    update ${prefix}ACT_RU_TASK set\n+    TENANT_ID_ = #{tenantId, jdbcType=VARCHAR}\n+    where\n+    ID_ in (\n+\n+    SELECT tempTask.tempId\n+    FROM (\n+    SELECT T.ID_ as tempId\n+    FROM  ${prefix}ACT_RU_TASK T\n+    inner join ${prefix}ACT_RE_PROCDEF P on T.PROC_DEF_ID_  = P.ID_\n+    inner join ${prefix}ACT_RE_DEPLOYMENT D on P.DEPLOYMENT_ID_ = D.ID_ \n+    where D.ID_ = #{deploymentId, jdbcType=VARCHAR}\n+                \n+    ) AS tempTask \n+\n+    )\n+  </update>\n+  \n+    \n+  <update id=\"updateTaskRelatedEntityCountEnabled\" parameterType=\"boolean\">\n+    update ${prefix}ACT_RU_TASK \n+    set IS_COUNT_ENABLED_ = #{parameter, jdbcType=BOOLEAN}\n+  </update>\n+  \n+  <!-- TASK DELETE -->\n+  <delete id=\"deleteTask\" parameterType=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+    delete from ${prefix}ACT_RU_TASK where ID_ = #{id} and REV_ = #{revision}\n+  </delete>\n+  \n+  <delete id=\"deleteTasksByExecutionId\" parameterType=\"string\">\n+    delete from ${prefix}ACT_RU_TASK where EXECUTION_ID_ = #{id}\n+  </delete>\n+  \n+  <delete id=\"bulkDeleteTask\" parameterType=\"java.util.Collection\">\n+    delete from ${prefix}ACT_RU_TASK where \n+    <foreach item=\"task\" collection=\"list\" index=\"index\" separator=\" or \">\n+      ID_ = #{task.id, jdbcType=VARCHAR}\n+    </foreach>\n+  </delete>\n+  \n+  <!-- TASK RESULTMAP -->\n+  \n+  <resultMap id=\"taskResultMap\" type=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+    <id property=\"id\" column=\"ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"revision\" column=\"REV_\" jdbcType=\"INTEGER\"/>\n+    <result property=\"name\" column=\"NAME_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"parentTaskId\" column=\"PARENT_TASK_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"description\" column=\"DESCRIPTION_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"priority\" column=\"PRIORITY_\" jdbcType=\"INTEGER\"/>\n+    <result property=\"createTime\" column=\"CREATE_TIME_\" jdbcType=\"TIMESTAMP\" />\n+    <result property=\"owner\" column=\"OWNER_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"assignee\" column=\"ASSIGNEE_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"delegationStateString\" column=\"DELEGATION_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"executionId\" column=\"EXECUTION_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"processInstanceId\" column=\"PROC_INST_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"processDefinitionId\" column=\"PROC_DEF_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"taskDefinitionId\" column=\"TASK_DEF_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeId\" column=\"SCOPE_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"subScopeId\" column=\"SUB_SCOPE_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeType\" column=\"SCOPE_TYPE_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeDefinitionId\" column=\"SCOPE_DEFINITION_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"taskDefinitionKey\" column=\"TASK_DEF_KEY_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"dueDate\" column=\"DUE_DATE_\" jdbcType=\"TIMESTAMP\"/>\n+    <result property=\"category\" column=\"CATEGORY_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"suspensionState\" column=\"SUSPENSION_STATE_\" jdbcType=\"INTEGER\" />\n+    <result property=\"tenantId\" column=\"TENANT_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"formKey\" column=\"FORM_KEY_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"claimTime\" column=\"CLAIM_TIME_\" jdbcType=\"TIMESTAMP\" />\n+    <result property=\"isCountEnabled\" column=\"IS_COUNT_ENABLED_\" jdbcType=\"BOOLEAN\" />\n+    <result property=\"variableCount\" column=\"VAR_COUNT_\" jdbcType=\"INTEGER\" />\n+    <result property=\"identityLinkCount\" column=\"ID_LINK_COUNT_\" jdbcType=\"INTEGER\" />\n+    <result property=\"subTaskCount\" column=\"SUB_TASK_COUNT_\" jdbcType=\"INTEGER\" />\n+  </resultMap>\n+  \n+  <resultMap id=\"taskAndRelatedEntitiesResultMap\" type=\"org.flowable.task.service.impl.persistence.entity.TaskEntityImpl\">\n+    <id property=\"id\" column=\"ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"revision\" column=\"REV_\" jdbcType=\"INTEGER\"/>\n+    <result property=\"name\" column=\"NAME_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"parentTaskId\" column=\"PARENT_TASK_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"description\" column=\"DESCRIPTION_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"priority\" column=\"PRIORITY_\" jdbcType=\"INTEGER\"/>\n+    <result property=\"createTime\" column=\"CREATE_TIME_\" jdbcType=\"TIMESTAMP\" />\n+    <result property=\"owner\" column=\"OWNER_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"assignee\" column=\"ASSIGNEE_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"delegationStateString\" column=\"DELEGATION_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"executionId\" column=\"EXECUTION_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"processInstanceId\" column=\"PROC_INST_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"processDefinitionId\" column=\"PROC_DEF_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"taskDefinitionId\" column=\"TASK_DEF_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeId\" column=\"SCOPE_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"subScopeId\" column=\"SUB_SCOPE_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeType\" column=\"SCOPE_TYPE_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"scopeDefinitionId\" column=\"SCOPE_DEFINITION_ID_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"taskDefinitionKey\" column=\"TASK_DEF_KEY_\" jdbcType=\"VARCHAR\"/>\n+    <result property=\"dueDate\" column=\"DUE_DATE_\" jdbcType=\"TIMESTAMP\"/>\n+    <result property=\"category\" column=\"CATEGORY_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"suspensionState\" column=\"SUSPENSION_STATE_\" jdbcType=\"INTEGER\" />\n+    <result property=\"tenantId\" column=\"TENANT_ID_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"formKey\" column=\"FORM_KEY_\" jdbcType=\"VARCHAR\" />\n+    <result property=\"claimTime\" column=\"CLAIM_TIME_\" jdbcType=\"TIMESTAMP\" />\n+    <result property=\"isCountEnabled\" column=\"IS_COUNT_ENABLED_\" jdbcType=\"BOOLEAN\" />\n+    <result property=\"variableCount\" column=\"VAR_COUNT_\" jdbcType=\"INTEGER\" />\n+    <result property=\"identityLinkCount\" column=\"ID_LINK_COUNT_\" jdbcType=\"INTEGER\" />\n+    <result property=\"subTaskCount\" column=\"SUB_TASK_COUNT_\" jdbcType=\"INTEGER\" />\n+    <collection property=\"queryVariables\" column=\"TASK_ID_\" javaType=\"ArrayList\" ofType=\"org.flowable.variable.service.impl.persistence.entity.VariableInstanceEntityImpl\">\n+      <id property=\"id\" column=\"VAR_ID_\"/>\n+      <result property=\"name\" column=\"VAR_NAME_\" javaType=\"String\" jdbcType=\"VARCHAR\" />\n+      <result property=\"type\" column=\"VAR_TYPE_\" javaType=\"org.flowable.variable.api.types.VariableType\" jdbcType=\"VARCHAR\" />\n+      <result property=\"revision\" column=\"VAR_REV_\" jdbcType=\"INTEGER\" />\n+      <result property=\"processInstanceId\" column=\"VAR_PROC_INST_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"executionId\" column=\"VAR_EXECUTION_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"taskId\" column=\"VAR_TASK_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"byteArrayRef\" column=\"VAR_BYTEARRAY_ID_\" typeHandler=\"VariableByteArrayRefTypeHandler\"/>\n+      <result property=\"doubleValue\" column=\"VAR_DOUBLE_\" jdbcType=\"DOUBLE\" />\n+      <result property=\"textValue\" column=\"VAR_TEXT_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"textValue2\" column=\"VAR_TEXT2_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"longValue\" column=\"VAR_LONG_\" jdbcType=\"BIGINT\" />\n+    </collection>\n+    <collection property=\"queryIdentityLinks\" column=\"TASK_ID_\" javaType=\"ArrayList\" ofType=\"org.flowable.identitylink.service.impl.persistence.entity.IdentityLinkEntityImpl\">\n+      <id property=\"id\" column=\"ILINK_ID_\"/>\n+      <result property=\"type\" column=\"ILINK_TYPE_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"userId\" column=\"ILINK_USER_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"groupId\" column=\"ILINK_GROUP_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"taskId\" column=\"ILINK_TASK_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"processInstanceId\" column=\"ILINK_PROC_INST_ID_\" jdbcType=\"VARCHAR\" />\n+      <result property=\"processDefId\" column=\"ILINK_PROC_DEF_ID_\" jdbcType=\"VARCHAR\" />\n+    </collection>\n+  </resultMap>\n+\n+  <!-- TASK SELECT -->  \n+\n+  <select id=\"selectTask\" parameterType=\"string\" resultMap=\"taskResultMap\">\n+    select * from ${prefix}ACT_RU_TASK where ID_ = #{id, jdbcType=VARCHAR}\n+  </select>\n+  \n+  <select id=\"selectTasksByParentTaskId\" parameterType=\"org.flowable.common.engine.impl.db.ListQueryParameterObject\" resultMap=\"taskResultMap\">\n+    select * from ${prefix}ACT_RU_TASK where PARENT_TASK_ID_ = #{parameter}\n+  </select>\n+\n+  <select id=\"selectTasksByExecutionId\" parameterType=\"org.flowable.common.engine.impl.db.ListQueryParameterObject\" resultMap=\"taskResultMap\">\n+    select distinct T.*\n+    from ${prefix}ACT_RU_TASK T\n+    where T.EXECUTION_ID_ = #{parameter}\n+  </select>\n+  \n+  <select id=\"selectTasksByProcessInstanceId\" parameterType=\"org.flowable.common.engine.impl.db.ListQueryParameterObject\" resultMap=\"taskResultMap\">\n+    select T.*\n+    from ${prefix}ACT_RU_TASK T\n+    where T.PROC_INST_ID_ = #{parameter}\n+  </select>\n+  \n+  <select id=\"selectTasksBySubScopeIdAndScopeType\" parameterType=\"org.flowable.common.engine.impl.db.ListQueryParameterObject\" resultMap=\"taskResultMap\">\n+    select T.*\n+    from ${prefix}ACT_RU_TASK T\n+    where T.SUB_SCOPE_ID_ = #{parameter.subScopeId, jdbcType=VARCHAR} and T.SCOPE_TYPE_ = #{parameter.scopeType, jdbcType=VARCHAR}\n+  </select>\n+  \n+  <select id=\"selectTasksByScopeIdAndScopeType\" parameterType=\"org.flowable.common.engine.impl.db.ListQueryParameterObject\" resultMap=\"taskResultMap\">\n+    select T.*\n+    from ${prefix}ACT_RU_TASK T\n+    where T.SCOPE_ID_ = #{parameter.scopeId, jdbcType=VARCHAR} and T.SCOPE_TYPE_ = #{parameter.scopeType, jdbcType=VARCHAR}\n+  </select>\n+  \n+  <!-- Using distinct here because a task can appear multiple times in a resultset when -->\n+  <select id=\"selectTaskByQueryCriteria\" parameterType=\"org.apache.syncope.core.flowable.impl.SyncopeTaskQueryImpl\" resultMap=\"taskResultMap\">\n+    <if test=\"firstResult != null and firstResult &gt;= 0\">${limitBefore}</if>\n+    select distinct RES.* <if test=\"nullHandlingColumn != null\">, ${nullHandlingColumn}</if> \n+    <if test=\"firstResult != null and firstResult &gt;= 0\">${limitBetween}</if>\n+    <include refid=\"selectTaskByQueryCriteriaSql\"/> \n+    ${orderBy}\n+    <if test=\"firstResult != null and firstResult &gt;= 0\">${limitAfter}</if>\n+  </select>\n+\n+  <select id=\"selectTaskCountByQueryCriteria\" parameterType=\"org.apache.syncope.core.flowable.impl.SyncopeTaskQueryImpl\" resultType=\"long\">\n+    select count(distinct RES.ID_)\n+    <include refid=\"selectTaskByQueryCriteriaSql\"/>\n+  </select>\n+  \n+  <sql id=\"selectTaskByQueryCriteriaSql\">  \n+    from ${prefix}ACT_RU_TASK RES\n+    <include refid=\"commonSelectTaskByQueryCriteriaSql\"/>\n+  </sql>\n+  \n+  <select id=\"selectTasksWithRelatedEntitiesByQueryCriteria\" parameterType=\"org.apache.syncope.core.flowable.impl.SyncopeTaskQueryImpl\" resultMap=\"taskAndRelatedEntitiesResultMap\">\n+    <include refid=\"selectTasksWithRelatedEntitiesByQueryCriteriaColumns\"/>\n+    <include refid=\"selectTasksWithRelatedEntitiesByQueryCriteriaSql\"/>\n+    ${orderBy}\n+    <if test=\"firstResult != null and firstResult &gt;= 0\">${limitAfter}</if>\n+  </select>\n+\n+  <sql id=\"selectTasksWithRelatedEntitiesByQueryCriteriaColumns\">\n+    <if test=\"firstResult != null and firstResult &gt;= 0\">${limitBefore}</if>\n+    <if test=\"_databaseId != 'db2' and _databaseId != 'mssql'\">\n+      select RES.*,\n+      <if test=\"includeTaskLocalVariables or includeProcessVariables\">\n+        VAR.ID_ as VAR_ID_, VAR.NAME_ as VAR_NAME_, VAR.TYPE_ as VAR_TYPE_, VAR.REV_ as VAR_REV_,\n+        VAR.PROC_INST_ID_ as VAR_PROC_INST_ID_, VAR.EXECUTION_ID_ as VAR_EXECUTION_ID_, VAR.TASK_ID_ as VAR_TASK_ID_,\n+        VAR.BYTEARRAY_ID_ as VAR_BYTEARRAY_ID_, VAR.DOUBLE_ as VAR_DOUBLE_,\n+        VAR.TEXT_ as VAR_TEXT_, VAR.TEXT2_ as VAR_TEXT2_, VAR.LONG_ as VAR_LONG_\n+      </if>\n+      <if test=\"(includeTaskLocalVariables or includeProcessVariables) and includeIdentityLinks\">\n+        ,\n+      </if>\n+      <if test=\"includeIdentityLinks\">\n+        ILINK.ID_ as ILINK_ID_, ILINK.TYPE_ as ILINK_TYPE_, ILINK.USER_ID_ as ILINK_USER_ID_,\n+        ILINK.GROUP_ID_ as ILINK_GROUP_ID_, ILINK.TASK_ID_ as ILINK_TASK_ID_,\n+        ILINK.PROC_INST_ID_ as ILINK_PROC_INST_ID_, ILINK.PROC_DEF_ID_ as ILINK_PROC_DEF_ID_\n+      </if>\n+      <if test=\"firstResult != null and firstResult &gt;= 0\">${limitBetween}</if>\n+    </if>\n+    <if test=\"_databaseId == 'db2' || _databaseId == 'mssql'\">\n+      select distinct TEMPRES_ID_ as ID_, TEMPRES_REV_ as REV_, TEMPRES_NAME_ as NAME_,\n+      TEMPRES_PARENT_TASK_ID_ as PARENT_TASK_ID_, TEMPRES_DESCRIPTION_ as DESCRIPTION_,\n+      TEMPRES_PRIORITY_ as PRIORITY_, TEMPRES_CREATE_TIME_ as CREATE_TIME_,\n+      TEMPRES_OWNER_ as OWNER_, TEMPRES_ASSIGNEE_ as ASSIGNEE_, TEMPRES_DELEGATION_ as DELEGATION_,\n+      TEMPRES_FORM_KEY_ as FORM_KEY_, TEMPRES_CLAIM_TIME_ as CLAIM_TIME_, TEMPRES_EXECUTION_ID_ as EXECUTION_ID_,\n+      TEMPRES_PROC_INST_ID_ as PROC_INST_ID_, TEMPRES_PROC_DEF_ID_ as PROC_DEF_ID_,\n+      TEMPRES_TASK_DEF_ID_ as TASK_DEF_ID_, TEMPRES_TASK_DEF_KEY_ as TASK_DEF_KEY_,\n+      TEMPRES_DUE_DATE_ as DUE_DATE_, TEMPRES_SUSPENSION_STATE_ as SUSPENSION_STATE_, TEMPRES_CATEGORY_ as CATEGORY_,\n+      TEMPRES_IS_COUNT_ENABLED_ as IS_COUNT_ENABLED_,\tTEMPRES_VAR_COUNT_ as VAR_COUNT_, TEMPRES_ID_LINK_COUNT_ as ID_LINK_COUNT_, TEMPRES_ID_SUB_TASK_COUNT_ as SUB_TASK_COUNT_\n+      <if test=\"includeTaskLocalVariables or includeProcessVariables\">\n+        ,\n+        TEMPVAR_ID_ as VAR_ID_, TEMPVAR_NAME_ as VAR_NAME_, TEMPVAR_TYPE_ as VAR_TYPE_, TEMPVAR_REV_ as VAR_REV_,\n+        TEMPVAR_PROC_INST_ID_ as VAR_PROC_INST_ID_, TEMPVAR_EXECUTION_ID_ as VAR_EXECUTION_ID_, TEMPVAR_TASK_ID_ as VAR_TASK_ID_,\n+        TEMPVAR_BYTEARRAY_ID_ as VAR_BYTEARRAY_ID_, TEMPVAR_DOUBLE_ as VAR_DOUBLE_,\n+        TEMPVAR_TEXT_ as VAR_TEXT_, TEMPVAR_TEXT2_ as VAR_TEXT2_, TEMPVAR_LONG_ as VAR_LONG_\n+      </if>\n+      <if test=\"includeIdentityLinks\">\n+        ,\n+        TEMPILINK_ID_ as ILINK_ID_, TEMPILINK_TYPE_ as ILINK_TYPE_, TEMPILINK_USER_ID_ as ILINK_USER_ID_,\n+        TEMPILINK_GROUP_ID_ as ILINK_GROUP_ID_, TEMPILINK_TASK_ID_ as ILINK_TASK_ID_,\n+        TEMPILINK_PROC_INST_ID_ as ILINK_PROC_INST_ID_, TEMPILINK_PROC_DEF_ID_ as ILINK_PROC_DEF_ID_\n+      </if>\n+      <if test=\"firstResult != null and firstResult &gt;= 0\">${limitOuterJoinBetween}</if>\n+      RES.ID_ as TEMPRES_ID_, RES.REV_ as TEMPRES_REV_, RES.NAME_ as TEMPRES_NAME_,\n+      RES.PARENT_TASK_ID_ as TEMPRES_PARENT_TASK_ID_, RES.DESCRIPTION_ as TEMPRES_DESCRIPTION_,\n+      RES.PRIORITY_ as TEMPRES_PRIORITY_, RES.CREATE_TIME_ as TEMPRES_CREATE_TIME_,\n+      RES.OWNER_ as TEMPRES_OWNER_, RES.ASSIGNEE_ as TEMPRES_ASSIGNEE_, RES.DELEGATION_ as TEMPRES_DELEGATION_,\n+      RES.FORM_KEY_ as TEMPRES_FORM_KEY_, RES.CLAIM_TIME_ as TEMPRES_CLAIM_TIME_, RES.EXECUTION_ID_ as TEMPRES_EXECUTION_ID_,\n+      RES.PROC_INST_ID_ as TEMPRES_PROC_INST_ID_, RES.PROC_DEF_ID_ as TEMPRES_PROC_DEF_ID_,\n+      RES.TASK_DEF_ID_ as TEMPRES_TASK_DEF_ID_, RES.TASK_DEF_KEY_ as TEMPRES_TASK_DEF_KEY_,\n+      RES.DUE_DATE_ as TEMPRES_DUE_DATE_, RES.SUSPENSION_STATE_ as TEMPRES_SUSPENSION_STATE_, RES.CATEGORY_ as TEMPRES_CATEGORY_,\n+      RES.IS_COUNT_ENABLED_ as TEMPRES_IS_COUNT_ENABLED_, RES.VAR_COUNT_ as TEMPRES_VAR_COUNT_, RES.ID_LINK_COUNT_ as TEMPRES_ID_LINK_COUNT_, RES.SUB_TASK_COUNT_ as TEMPRES_ID_SUB_TASK_COUNT_\n+      <if test=\"includeTaskLocalVariables or includeProcessVariables\">\n+        ,\n+        VAR.ID_ as TEMPVAR_ID_, VAR.NAME_ as TEMPVAR_NAME_, VAR.TYPE_ as TEMPVAR_TYPE_, VAR.REV_ as TEMPVAR_REV_,\n+        VAR.PROC_INST_ID_ as TEMPVAR_PROC_INST_ID_, VAR.EXECUTION_ID_ as TEMPVAR_EXECUTION_ID_, VAR.TASK_ID_ as TEMPVAR_TASK_ID_,\n+        VAR.BYTEARRAY_ID_ as TEMPVAR_BYTEARRAY_ID_, VAR.DOUBLE_ as TEMPVAR_DOUBLE_,\n+        VAR.TEXT_ as TEMPVAR_TEXT_, VAR.TEXT2_ as TEMPVAR_TEXT2_, VAR.LONG_ as TEMPVAR_LONG_\n+      </if>\n+      <if test=\"includeIdentityLinks\">\n+        ,\n+        ILINK.ID_ as TEMPILINK_ID_, ILINK.TYPE_ as TEMPILINK_TYPE_, ILINK.USER_ID_ as TEMPILINK_USER_ID_,\n+        ILINK.GROUP_ID_ as TEMPILINK_GROUP_ID_, ILINK.TASK_ID_ as TEMPILINK_TASK_ID_,\n+        ILINK.PROC_INST_ID_ as TEMPILINK_PROC_INST_ID_, ILINK.PROC_DEF_ID_ as TEMPILINK_PROC_DEF_ID_\n+      </if>\n+    </if>\n+  </sql>\n+  \n+  <sql id=\"selectTasksWithRelatedEntitiesByQueryCriteriaSql\">\n+    from ${prefix}ACT_RU_TASK RES\n+    <choose>\n+      <when test=\"includeTaskLocalVariables &amp;&amp; includeProcessVariables\">\n+        left outer join ${prefix}ACT_RU_VARIABLE VAR ON RES.ID_ = VAR.TASK_ID_ or RES.PROC_INST_ID_ = VAR.EXECUTION_ID_\n+      </when>\n+      <otherwise>\n+        <if test=\"includeTaskLocalVariables\">\n+          left outer join ${prefix}ACT_RU_VARIABLE VAR ON RES.ID_ = VAR.TASK_ID_\n+        </if>\n+        <if test=\"includeProcessVariables\">\n+          left outer join ${prefix}ACT_RU_VARIABLE VAR ON RES.PROC_INST_ID_ = VAR.EXECUTION_ID_ and VAR.TASK_ID_ is null\n+        </if>\n+      </otherwise>\n+    </choose>\n+    <if test=\"includeIdentityLinks\">\n+      left outer join ${prefix}ACT_RU_IDENTITYLINK ILINK on RES.ID_ = ILINK.TASK_ID_\n+    </if>\n+    <include refid=\"commonSelectTaskByQueryCriteriaSql\"/>\n+  </sql>\n+  \n+  <sql id=\"commonSelectTaskByQueryCriteriaSql\">\n+    <if test=\"candidateUser != null || candidateGroups != null || bothCandidateAndAssigned\">\n+      <choose>\n+        <when test=\"bothCandidateAndAssigned\">left</when>\n+        <otherwise>inner</otherwise>\n+      </choose>\n+      join ${prefix}ACT_RU_IDENTITYLINK I on I.TASK_ID_ = RES.ID_\n+    </if>\n+    <foreach collection=\"queryVariableValues\" index=\"index\" item=\"var\">\n+      <if test=\"!var.operator.equals('EXISTS') &amp;&amp; !var.operator.equals('NOT_EXISTS')\">\n+        <choose>\n+          <when test=\"var.local\">\n+            inner join ${prefix}ACT_RU_VARIABLE A${index} on RES.ID_ = A${index}.TASK_ID_ \n+          </when>\n+          <otherwise>\n+            inner join ${prefix}ACT_RU_VARIABLE A${index} on RES.PROC_INST_ID_ = A${index}.PROC_INST_ID_ \n+          </otherwise>\n+        </choose>\n+      </if>       \n+    </foreach>\n+    <foreach collection=\"orQueryObjects\" index=\"orIndex\" item=\"orQueryObject\">\n+      <if test=\"orQueryObject.candidateUser != null || orQueryObject.candidateGroups != null || orQueryObject.bothCandidateAndAssigned\">\n+        <choose>\n+          <when test=\"orQueryObject.bothCandidateAndAssigned\">left</when>\n+          <otherwise>inner</otherwise>\n+        </choose>\n+        join ${prefix}ACT_RU_IDENTITYLINK I_OR${orIndex} on I_OR${orIndex}.TASK_ID_ = RES.ID_\n+      </if>\n+      <if test=\"orQueryObject.queryVariableValues.size() &gt; 0\">\n+        <if test=\"orQueryObject.hasValueComparisonQueryVariables()\">\n+          <if test=\"orQueryObject.hasLocalQueryVariableValue()\">\n+            left outer join ${prefix}ACT_RU_VARIABLE A_L_OR${orIndex} on RES.ID_ = A_L_OR${orIndex}.TASK_ID_\n+          </if>\n+          <if test=\"orQueryObject.hasNonLocalQueryVariableValue()\">\n+            left outer join ${prefix}ACT_RU_VARIABLE A_OR${orIndex} on RES.PROC_INST_ID_ = A_OR${orIndex}.PROC_INST_ID_\n+          </if>\n+        </if>\n+      </if>\n+      \n+      <if test=\"orQueryObject.processDefinitionKey != null || orQueryObject.processDefinitionKeyLike != null || orQueryObject.processDefinitionKeyLikeIgnoreCase != null || orQueryObject.processDefinitionName != null || orQueryObject.processDefinitionNameLike != null || (orQueryObject.processCategoryInList != null &amp;&amp; orQueryObject.processCategoryInList.size() &gt; 0) || (orQueryObject.processCategoryNotInList != null &amp;&amp; orQueryObject.processCategoryNotInList.size() &gt; 0) || (orQueryObject.processDefinitionKeys != null &amp;&amp; orQueryObject.processDefinitionKeys.size() &gt; 0)\">\n+        left outer join ${prefix}ACT_RE_PROCDEF D_OR${orIndex} on RES.PROC_DEF_ID_ = D_OR${orIndex}.ID_\n+      </if>\n+      \n+      <if test=\"orQueryObject.processInstanceBusinessKey != null || orQueryObject.processInstanceBusinessKeyLike != null || orQueryObject.processInstanceBusinessKeyLikeIgnoreCase != null\">\n+        inner join ${prefix}ACT_RU_EXECUTION E_OR${orIndex} on RES.PROC_INST_ID_ = E_OR${orIndex}.ID_\n+      </if>\n+      \n+      <if test=\"orQueryObject.deploymentId != null || (orQueryObject.deploymentIds != null &amp;&amp; orQueryObject.deploymentIds.size() &gt; 0)\">\n+        left outer join ${prefix}ACT_RE_PROCDEF DEPLOY_P_OR${orIndex} ON RES.PROC_DEF_ID_ = DEPLOY_P_OR${orIndex}.ID_\n+      </if>\n+      <if test=\"orQueryObject.cmmnDeploymentId != null || (orQueryObject.cmmnDeploymentIds != null &amp;&amp; orQueryObject.cmmnDeploymentIds.size() &gt; 0)\">\n+        left outer join ${prefix}ACT_CMMN_CASEDEF DEPLOY_C_OR${orIndex} ON RES.SCOPE_DEFINITION_ID_ = DEPLOY_C_OR${orIndex}.ID_\n+      </if>\n+    </foreach>\n+    \n+    <if test=\"processDefinitionKey != null || processDefinitionKeyLike != null ||  processDefinitionKeyLikeIgnoreCase != null || processDefinitionName != null || processDefinitionNameLike != null || (processCategoryInList != null &amp;&amp; processCategoryInList.size() &gt; 0) || (processCategoryNotInList != null &amp;&amp; processCategoryNotInList.size() &gt; 0) || (processDefinitionKeys != null &amp;&amp; processDefinitionKeys.size() &gt; 0)\">\n+      inner join ${prefix}ACT_RE_PROCDEF D on RES.PROC_DEF_ID_ = D.ID_\n+    </if>\n+    <if test=\"processInstanceBusinessKey != null || processInstanceBusinessKeyLike != null  || processInstanceBusinessKeyLikeIgnoreCase != null\">\n+      inner join ${prefix}ACT_RU_EXECUTION E on RES.PROC_INST_ID_ = E.ID_\n+    </if>\n+    <if test=\"deploymentId != null || (deploymentIds != null &amp;&amp; deploymentIds.size() &gt; 0)\">\n+      left outer join ${prefix}ACT_RE_PROCDEF DEPLOY_P ON RES.PROC_DEF_ID_ = DEPLOY_P.ID_\n+    </if>\n+    <if test=\"cmmnDeploymentId != null || (cmmnDeploymentIds != null &amp;&amp; cmmnDeploymentIds.size() &gt; 0)\">\n+      left outer join ${prefix}ACT_CMMN_CASEDEF DEPLOY_C ON RES.SCOPE_DEFINITION_ID_ = DEPLOY_C.ID_\n+    </if>\n+    <where> \n+      <if test=\"taskId != null\">\n+        RES.ID_ = #{taskId}\n+      </if>\n+      <if test=\"name != null\">\n+        and RES.NAME_ = #{name}\n+      </if>\n+      <if test=\"nameLike != null\">\n+        and RES.NAME_ like #{nameLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"nameLikeIgnoreCase != null\">\n+        and lower(RES.NAME_) like #{nameLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"nameList != null &amp;&amp; nameList.size() &gt; 0\">\n+        and RES.NAME_ IN\n+        <foreach item=\"name\" index=\"index\" collection=\"nameList\"\n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{name}\n+        </foreach>\n+      </if>\n+      <if test=\"nameListIgnoreCase != null &amp;&amp; nameListIgnoreCase.size() &gt; 0\">\n+        and lower(RES.NAME_) IN\n+        <foreach item=\"name\" index=\"index\" collection=\"nameListIgnoreCase\"\n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{name}\n+        </foreach>\n+      </if>\n+      <if test=\"description != null\">\n+        and RES.DESCRIPTION_ = #{description}\n+      </if>\n+      <if test=\"descriptionLike != null\">\n+        and RES.DESCRIPTION_ like #{descriptionLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"descriptionLikeIgnoreCase != null\">\n+        and lower(RES.DESCRIPTION_) like #{descriptionLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"priority != null\">\n+        and RES.PRIORITY_ = #{priority}\n+      </if> \n+      <if test=\"minPriority != null\">\n+        and RES.PRIORITY_ &gt;= #{minPriority}\n+      </if> \n+      <if test=\"maxPriority != null\">\n+        and RES.PRIORITY_ &lt;= #{maxPriority}\n+      </if> \n+      <if test=\"assignee != null\">\n+        and RES.ASSIGNEE_ = #{assignee}\n+      </if>\n+      <if test=\"assigneeLike != null\">\n+        and RES.ASSIGNEE_ like #{assigneeLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"assigneeLikeIgnoreCase != null\">\n+        and lower(RES.ASSIGNEE_) like #{assigneeLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"assigneeIds != null &amp;&amp; assigneeIds.size() &gt; 0\">\n+        and RES.ASSIGNEE_ IN\n+        <foreach item=\"assigneeId\" index=\"index\" collection=\"assigneeIds\" \n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{assigneeId}\n+        </foreach>\n+      </if>\n+      <if test=\"owner != null\">\n+        and RES.OWNER_ = #{owner}\n+      </if>\n+      <if test=\"ownerLike != null\">\n+        and RES.OWNER_ like #{ownerLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"ownerLikeIgnoreCase != null\">\n+        and lower(RES.OWNER_) like #{ownerLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"unassigned\">\n+        and RES.ASSIGNEE_ IS NULL\n+      </if>\n+      <if test=\"noDelegationState\">\n+        and RES.DELEGATION_ IS NULL\n+      </if>\n+      <if test=\"delegationState != null\">\n+        and RES.DELEGATION_ = #{delegationStateString}\n+      </if>\n+      <if test=\"processInstanceId != null\">\n+        and RES.PROC_INST_ID_ = #{processInstanceId}\n+      </if>\n+      <if test=\"processInstanceIds != null &amp;&amp; processInstanceIds.size() &gt; 0\">\n+        and RES.PROC_INST_ID_ IN\n+        <foreach item=\"processInstance\" index=\"index\" collection=\"processInstanceIds\" \n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{processInstance}\n+        </foreach>\n+      </if>\n+      <if test=\"processInstanceBusinessKey != null\">\n+        and E.BUSINESS_KEY_ = #{processInstanceBusinessKey}\n+      </if>\n+      <if test=\"processInstanceBusinessKeyLike != null\">\n+        and E.BUSINESS_KEY_ like #{processInstanceBusinessKeyLike}${wildcardEscapeClause}\n+      </if>      \n+      <if test=\"processInstanceBusinessKeyLikeIgnoreCase != null\">\n+        and lower(E.BUSINESS_KEY_) like #{processInstanceBusinessKeyLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>         \n+      <if test=\"executionId != null\">\n+        and RES.EXECUTION_ID_ = #{executionId}\n+      </if>\n+      <if test=\"scopeId != null\">\n+        and RES.SCOPE_ID_ = #{scopeId}\n+      </if>\n+      <if test=\"subScopeId != null\">\n+        and RES.SUB_SCOPE_ID_ = #{subScopeId}\n+      </if>\n+      <if test=\"scopeType != null\">\n+        and RES.SCOPE_TYPE_ = #{scopeType}\n+      </if>\n+      <if test=\"scopeDefinitionId != null\">\n+        and RES.SCOPE_DEFINITION_ID_ = #{scopeDefinitionId}\n+      </if>\n+      <if test=\"createTime != null\">\n+        and RES.CREATE_TIME_ = #{createTime}\n+      </if>\n+      <if test=\"createTimeBefore != null\">\n+        and RES.CREATE_TIME_ &lt; #{createTimeBefore}\n+      </if>\n+      <if test=\"createTimeAfter != null\">\n+        and RES.CREATE_TIME_ &gt; #{createTimeAfter}\n+      </if>\n+      <if test=\"key != null\">\n+        and RES.TASK_DEF_KEY_ = #{key}\n+      </if>\n+      <if test=\"keyLike != null\">\n+        and RES.TASK_DEF_KEY_ like #{keyLike}\n+      </if>\n+      <if test=\"processDefinitionId != null\">\n+        and RES.PROC_DEF_ID_ = #{processDefinitionId}\n+      </if>\n+      <if test=\"taskDefinitionId != null\">\n+        and RES.TASK_DEF_ID_ = #{taskDefinitionId}\n+      </if>\n+      <if test=\"processDefinitionKey != null\">\n+        and D.KEY_ = #{processDefinitionKey}\n+      </if>\n+      <if test=\"processDefinitionKeyLike != null\">\n+        and D.KEY_ like #{processDefinitionKeyLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"processDefinitionKeyLikeIgnoreCase != null\">\n+        and lower(D.KEY_) like #{processDefinitionKeyLikeIgnoreCase}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"processDefinitionKeys != null &amp;&amp; processDefinitionKeys.size() &gt; 0\">\n+        and D.KEY_ in\n+        <foreach item=\"item\" index=\"index\" collection=\"processDefinitionKeys\" open=\"(\" separator=\",\" close=\")\">\n+          #{item}\n+        </foreach>\n+      </if>\n+      <if test=\"processDefinitionName != null\">\n+        and D.NAME_ = #{processDefinitionName}\n+      </if>\n+      <if test=\"processDefinitionNameLike != null\">\n+        and D.NAME_ like #{processDefinitionNameLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"processCategoryInList != null &amp;&amp; processCategoryInList.size() &gt; 0\">\n+        and D.CATEGORY_ IN\n+        <foreach item=\"processCategory\" index=\"index\" collection=\"processCategoryInList\"\n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{processCategory}\n+        </foreach>\n+      </if>\n+      <if test=\"processCategoryNotInList != null &amp;&amp; processCategoryNotInList.size() &gt; 0\">\n+        and D.CATEGORY_ NOT IN\n+        <foreach item=\"processCategory\" index=\"index\" collection=\"processCategoryNotInList\"\n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{processCategory}\n+        </foreach>\n+      </if>\n+      <if test=\"deploymentId != null &amp;&amp; cmmnDeploymentId == null\">\n+        and DEPLOY_P.DEPLOYMENT_ID_ = #{deploymentId}\n+      </if>\n+      <if test=\"deploymentIds != null &amp;&amp; deploymentIds.size() &gt; 0 &amp;&amp; cmmnDeploymentIds == null\">\n+        and DEPLOY_P.DEPLOYMENT_ID_ IN\n+        <foreach item=\"deployment\" index=\"index\" collection=\"deploymentIds\" \n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{deployment}\n+        </foreach>\n+      </if>\n+      <if test=\"cmmnDeploymentId != null &amp;&amp; deploymentId == null\">\n+        and DEPLOY_C.DEPLOYMENT_ID_ = #{cmmnDeploymentId}\n+      </if>\n+      <if test=\"cmmnDeploymentIds != null &amp;&amp; cmmnDeploymentIds.size() &gt; 0 &amp;&amp; deploymentIds == null\">\n+        and DEPLOY_C.DEPLOYMENT_ID_ IN\n+        <foreach item=\"deployment\" index=\"index\" collection=\"cmmnDeploymentIds\" \n+                 open=\"(\" separator=\",\" close=\")\">\n+          #{deployment}\n+        </foreach>\n+      </if>\n+      <if test=\"deploymentId != null &amp;&amp; cmmnDeploymentId != null\">\n+        and (DEPLOY_P.DEPLOYMENT_ID_ = #{deploymentId} or DEPLOY_C.DEPLOYMENT_ID = #{cmmnDeploymentId})\n+      </if>\n+      <if test=\"cmmnDeploymentIds != null &amp;&amp; cmmnDeploymentIds.size() &gt; 0 &amp;&amp; deploymentIds != null &amp;&amp; deploymentIds.size() &gt; 0\">\n+        and (\n+        DEPLOY_P.DEPLOYMENT_ID_ IN\n+        <foreach item=\"deployment\" index=\"index\" collection=\"deploymentIds\" open=\"(\" separator=\",\" close=\")\">\n+          #{deployment}\n+        </foreach>\n+        or\n+        DEPLOY_C.DEPLOYMENT_ID_ IN\n+        <foreach item=\"cmmnDeployment\" index=\"index\" collection=\"cmmnDeploymentIds\" open=\"(\" separator=\",\" close=\")\">\n+          #{cmmnDeployment}\n+        </foreach>\n+        )\n+      </if>\n+      <if test=\"dueDate != null\">\n+        and RES.DUE_DATE_ = #{dueDate}\n+      </if>\n+      <if test=\"dueBefore != null\">\n+        and RES.DUE_DATE_ &lt; #{dueBefore}\n+      </if>\n+      <if test=\"dueAfter != null\">\n+        and RES.DUE_DATE_ &gt; #{dueAfter}\n+      </if>\n+      <if test=\"withoutDueDate\">\n+        and RES.DUE_DATE_ is null\n+      </if>\n+      <if test=\"dueDate != null || dueBefore != null || dueAfter != null\">\n+        and RES.DUE_DATE_ is not null\n+      </if>\n+      <if test=\"category != null\">\n+        and RES.CATEGORY_ = #{category}\n+      </if>\n+      <!-- Syncope -->\n+      <if test=\"withFormKey\">\n+        and RES.FORM_KEY_ IS NOT NULL\n+      </if>\n+      <!-- /Syncope -->\n+      <if test=\"excludeSubtasks\">\n+        and RES.PARENT_TASK_ID_ IS NULL\n+      </if>\n+      <if test=\"!bothCandidateAndAssigned &amp;&amp; (candidateUser != null || candidateGroups != null)\">\n+        <if test=\"!ignoreAssigneeValue\">\n+          and RES.ASSIGNEE_ is null\n+        </if>\n+        and I.TYPE_ = 'candidate'\n+        and \n+        ( \n+        <if test=\"candidateUser != null\">\n+          I.USER_ID_ = #{candidateUser}          \n+        </if>\n+        <if test=\"candidateUser != null &amp;&amp; candidateGroups != null &amp;&amp; candidateGroups.size() &gt; 0\">\n+          or\n+        </if>\n+        <if test=\"candidateGroups != null &amp;&amp; candidateGroups.size() &gt; 0\">\n+          I.GROUP_ID_ IN\n+          <foreach item=\"group\" index=\"index\" collection=\"candidateGroups\" \n+                     open=\"(\" separator=\",\" close=\")\">\n+            #{group}\n+          </foreach>\n+        </if>\n+        )\n+      </if>\n+      <if test=\"involvedUser != null\">\n+        and (\n+        exists(select LINK.USER_ID_ from ${prefix}ACT_RU_IDENTITYLINK LINK where USER_ID_ = #{involvedUser} and LINK.TASK_ID_ = RES.ID_)\n+        or RES.ASSIGNEE_ = #{involvedUser}\n+        or RES.OWNER_ = #{involvedUser}\n+        )\n+      </if>\n+      <foreach item=\"var\" collection=\"queryVariableValues\" index=\"index\">\n+        <choose>\n+          <when test=\"var.operator.equals('EXISTS')\">\n+            and EXISTS (\n+            select ID_ from ${prefix}ACT_RU_VARIABLE where NAME_ = #{var.name}\n+            <if test=\"!var.local\">\n+              and RES.PROC_INST_ID_ = PROC_INST_ID_ and TASK_ID_ is null\n+            </if>\n+            <if test=\"var.local\">\n+              and RES.ID_ = TASK_ID_ \n+            </if>\n+            )\n+          </when>\n+          <when test=\"var.operator.equals('NOT_EXISTS')\">\n+            and NOT EXISTS (\n+            select ID_ from ${prefix}ACT_RU_VARIABLE where NAME_ = #{var.name}\n+            <if test=\"!var.local\">\n+              and RES.PROC_INST_ID_ = PROC_INST_ID_ and TASK_ID_ is null\n+            </if>\n+            <if test=\"var.local\">\n+              and RES.ID_ = TASK_ID_ \n+            </if>\n+            )\n+          </when>\n+          <otherwise>\n+            <if test=\"!var.local\">\n+              <!-- When process instance variable is queried for, taskId should be null -->\n+              and A${index}.TASK_ID_ is null\n+            </if>\n+            <if test=\"var.name != null\">\n+              <!-- Match-all variable-names when name is null -->\n+              and A${index}.NAME_= #{var.name}\n+            </if>\n+            <if test=\"var.name == null\">\n+              and A${index}.NAME_ is not null\n+            </if>\n+            <if test=\"!var.type.equals('null')\">\n+              and A${index}.TYPE_ = #{var.type}\n+            </if>\n+                \n+            <!-- Variable value -->\n+            <if test=\"var.textValue != null &amp;&amp; var.longValue == null &amp;&amp; var.doubleValue == null\">\n+              <choose>\n+                <when test=\"var.operator.equals('EQUALS_IGNORE_CASE') || var.operator.equals('NOT_EQUALS_IGNORE_CASE') || var.operator.equals('LIKE_IGNORE_CASE')\">\n+                  and lower(A${index}.TEXT_)\n+                </when>\n+                <otherwise>\n+                  and A${index}.TEXT_\n+                </otherwise>\n+              </choose> \n+              <choose>\n+                <when test=\"var.operator.equals('LIKE') || var.operator.equals('LIKE_IGNORE_CASE')\">LIKE</when>\n+                <otherwise>\n+                  <include refid=\"executionVariableOperator\" />\n+                </otherwise>\n+              </choose>          \n+              #{var.textValue}\n+              <choose>\n+                <when test=\"var.operator.equals('LIKE') || var.operator.equals('LIKE_IGNORE_CASE')\">${wildcardEscapeClause}</when>\n+              </choose>\n+            </if>\n+            <if test=\"var.textValue2 != null\">\n+              and A${index}.TEXT2_ \n+              <choose>\n+                <when test=\"var.operator.equals('LIKE')\">LIKE</when>\n+                <otherwise>\n+                  <include refid=\"executionVariableOperator\" />\n+                </otherwise>\n+              </choose>          \n+              #{var.textValue2}\n+              <choose>\n+                <when test=\"var.operator.equals('LIKE')\">${wildcardEscapeClause}</when>\n+              </choose>\n+            </if>\n+            <if test=\"var.longValue != null\">\n+              and A${index}.LONG_\n+              <include refid=\"executionVariableOperator\" />\n+              #{var.longValue}\n+            </if>\n+            <if test=\"var.doubleValue != null\">\n+              and A${index}.DOUBLE_ \n+              <include refid=\"executionVariableOperator\" />\n+              #{var.doubleValue}\n+            </if>\n+            <!-- Null variable type -->\n+            <if test=\"var.textValue == null &amp;&amp; var.textValue2 == null &amp;&amp; var.longValue == null &amp;&amp; var.doubleValue == null\">\n+              <choose>\n+                <when test=\"var.operator.equals('NOT_EQUALS')\">\n+                  and (A${index}.TEXT_ is not null or A${index}.TEXT2_ is not null or A${index}.LONG_ is not null or A${index}.DOUBLE_ is not null or A${index}.BYTEARRAY_ID_ is not null)\n+                </when>\n+                <otherwise>\n+                  and A${index}.TEXT_ is null and A${index}.TEXT2_ is null and A${index}.LONG_ is null and A${index}.DOUBLE_ is null and A${index}.BYTEARRAY_ID_ is null\n+                </otherwise>\n+              </choose>          \n+            </if>\n+          </otherwise>\n+        </choose>\n+      </foreach>\n+      <if test=\"suspensionState != null\">\n+        <if test=\"suspensionState.stateCode == 1\">\n+          and RES.SUSPENSION_STATE_ = 1\n+        </if>\n+        <if test=\"suspensionState.stateCode == 2\">\n+          and RES.SUSPENSION_STATE_ = 2\n+        </if>\n+      </if>\n+      <if test=\"tenantId != null\">\n+        and RES.TENANT_ID_ = #{tenantId}\n+      </if>\n+      <if test=\"tenantIdLike != null\">\n+        and RES.TENANT_ID_ like #{tenantIdLike}${wildcardEscapeClause}\n+      </if>\n+      <if test=\"withoutTenantId\">\n+        and (RES.TENANT_ID_ = '' or RES.TENANT_ID_ is null)\n+      </if>\n+      <choose>\n+        <when test=\"bothCandidateAndAssigned\">\n+          <!-- if dbIdentityUsed set true in process engine configuration -->\n+          <if test=\"userIdForCandidateAndAssignee != null\">\n+            <if test=\"candidateGroups == null\">\n+              and (RES.ASSIGNEE_ = #{userIdForCandidateAndAssignee}\n+              or (\n+              <if test=\"!ignoreAssigneeValue\">\n+                RES.ASSIGNEE_ is null\n+              </if>\n+              and (I.USER_ID_ = #{userIdForCandidateAndAssignee}\n+              or I.GROUP_ID_ IN (select g.GROUP_ID_ from ${prefix}ACT_ID_MEMBERSHIP g where g.USER_ID_ = #{userIdForCandidateAndAssignee} ) ) ) )\n+            </if>\n+          </if>\n+          <!-- if dbIdentityUsed set false in process engine configuration of using custom session factory of GroupIdentityManager -->\n+          <if test=\"candidateGroups != null\">\n+            and (RES.ASSIGNEE_ = #{userIdForCandidateAndAssignee}\n+            \n+            or (\n+            <if test=\"!ignoreAssigneeValue\">\n+              RES.ASSIGNEE_ is null and\n+            </if>\n+            I.TYPE_ = 'candidate' and (I.USER_ID_ = #{userIdForCandidateAndAssignee}\n+            <if test=\"candidateGroups.size() &gt; 0\">\n+              or I.GROUP_ID_ IN\n+              <foreach item=\"group\" index=\"index\" collection=\"candidateGroups\" open=\"(\" separator=\",\" close=\")\">\n+                #{group}\n+              </foreach>\n+            </if>\n+            )))\n+          </if>\n+        </when>\n+      </choose>\n+      <foreach item=\"orQueryObject\" index=\"orIndex\" collection=\"orQueryObjects\">\n+        and \n+        <trim prefix=\"(\" prefixOverrides=\"OR\" suffix=\")\">\n+          <if test=\"orQueryObject.taskId != null\">\n+            RES.ID_ = #{orQueryObject.taskId}\n+          </if>\n+          <if test=\"orQueryObject.name != null\">\n+            or RES.NAME_ = #{orQueryObject.name}\n+          </if>\n+          <if test=\"orQueryObject.nameLike != null\">\n+            or RES.NAME_ like #{orQueryObject.nameLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.nameLikeIgnoreCase != null\">\n+            or lower(RES.NAME_) like #{orQueryObject.nameLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.nameList != null &amp;&amp; orQueryObject.nameList.size() &gt; 0\">\n+            or RES.NAME_ IN\n+            <foreach item=\"name\" index=\"index\" collection=\"orQueryObject.nameList\"\n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{name}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.nameListIgnoreCase != null &amp;&amp; orQueryObject.nameListIgnoreCase.size() &gt; 0\">\n+            or lower(RES.NAME_) IN\n+            <foreach item=\"name\" index=\"index\" collection=\"orQueryObject.nameListIgnoreCase\"\n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{name}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.description != null\">\n+            or RES.DESCRIPTION_ = #{orQueryObject.description}\n+          </if>\n+          <if test=\"orQueryObject.descriptionLike != null\">\n+            or RES.DESCRIPTION_ like #{orQueryObject.descriptionLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.descriptionLikeIgnoreCase != null\">\n+            or lower(RES.DESCRIPTION_) like #{orQueryObject.descriptionLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.priority != null\">\n+            or RES.PRIORITY_ = #{orQueryObject.priority}\n+          </if> \n+          <if test=\"orQueryObject.minPriority != null\">\n+            or RES.PRIORITY_ &gt;= #{orQueryObject.minPriority}\n+          </if> \n+          <if test=\"orQueryObject.maxPriority != null\">\n+            or RES.PRIORITY_ &lt;= #{orQueryObject.maxPriority}\n+          </if> \n+          <if test=\"orQueryObject.assignee != null\">\n+            or RES.ASSIGNEE_ = #{orQueryObject.assignee}\n+          </if>\n+          <if test=\"orQueryObject.assigneeLike != null\">\n+            or RES.ASSIGNEE_ like #{orQueryObject.assigneeLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.assigneeLikeIgnoreCase != null\">\n+            or lower(RES.ASSIGNEE_) like #{orQueryObject.assigneeLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.assigneeIds != null &amp;&amp; orQueryObject.assigneeIds.size() &gt; 0\">\n+            or RES.ASSIGNEE_ IN\n+            <foreach item=\"assigneeId\" index=\"index\" collection=\"orQueryObject.assigneeIds\" \n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{assigneeId}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.owner != null\">\n+            or RES.OWNER_ = #{orQueryObject.owner}\n+          </if>\n+          <if test=\"orQueryObject.ownerLike != null\">\n+            or RES.OWNER_ like #{orQueryObject.ownerLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.ownerLikeIgnoreCase != null\">\n+            or RES.OWNER_ like #{orQueryObject.ownerLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.unassigned\">\n+            or RES.ASSIGNEE_ IS NULL\n+          </if>\n+          <if test=\"orQueryObject.noDelegationState\">\n+            or RES.DELEGATION_ IS NULL\n+          </if>\n+          <if test=\"orQueryObject.delegationState != null\">\n+            or RES.DELEGATION_ = #{orQueryObject.delegationStateString}\n+          </if>\n+          <if test=\"orQueryObject.processInstanceId != null\">\n+            or RES.PROC_INST_ID_ = #{orQueryObject.processInstanceId}\n+          </if>\n+          <if test=\"orQueryObject.processInstanceIds != null &amp;&amp; orQueryObject.processInstanceIds.size() &gt; 0\">\n+            or RES.PROC_INST_ID_ IN\n+            <foreach item=\"processInstance\" index=\"index\" collection=\"orQueryObject.processInstanceIds\" \n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{processInstance}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.processInstanceBusinessKey != null\">\n+            or E_OR${orIndex}.BUSINESS_KEY_ = #{orQueryObject.processInstanceBusinessKey}\n+          </if>\n+          <if test=\"orQueryObject.processInstanceBusinessKeyLike != null\">\n+            or E_OR${orIndex}.BUSINESS_KEY_ like #{orQueryObject.processInstanceBusinessKeyLike}${wildcardEscapeClause}\n+          </if>      \n+          <if test=\"orQueryObject.processInstanceBusinessKeyLikeIgnoreCase != null\">\n+            or lower(E.BUSINESS_KEY_) like #{orQueryObject.processInstanceBusinessKeyLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>         \n+          <if test=\"orQueryObject.executionId != null\">\n+            or RES.EXECUTION_ID_ = #{orQueryObject.executionId}\n+          </if>\n+          <if test=\"orQueryObject.scopeId != null\">\n+            and RES.SCOPE_ID_ = #{orQueryObject.scopeId}\n+          </if>\n+          <if test=\"orQueryObject.subScopeId != null\">\n+            and RES.SUB_SCOPE_ID_ = #{orQueryObject.subScopeId}\n+          </if>\n+          <if test=\"orQueryObject.scopeType != null\">\n+            and RES.SCOPE_TYPE_ = #{orQueryObject.scopeType}\n+          </if>\n+          <if test=\"orQueryObject.scopeDefinitionId != null\">\n+            and RES.SCOPE_DEFINITION_ID_ = #{orQueryObject.scopeDefinitionId}\n+          </if>\n+          <if test=\"orQueryObject.createTime != null\">\n+            or RES.CREATE_TIME_ = #{orQueryObject.createTime}\n+          </if>\n+          <if test=\"orQueryObject.createTimeBefore != null\">\n+            or RES.CREATE_TIME_ &lt; #{orQueryObject.createTimeBefore}\n+          </if>\n+          <if test=\"orQueryObject.createTimeAfter != null\">\n+            or RES.CREATE_TIME_ &gt; #{orQueryObject.createTimeAfter}\n+          </if>\n+          <if test=\"orQueryObject.key != null\">\n+            or RES.TASK_DEF_KEY_ = #{orQueryObject.key}\n+          </if>\n+          <if test=\"orQueryObject.keyLike != null\">\n+            or RES.TASK_DEF_KEY_ like #{orQueryObject.keyLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionId != null\">\n+            or RES.PROC_DEF_ID_ = #{orQueryObject.processDefinitionId}\n+          </if>\n+          <if test=\"orQueryObject.taskDefinitionId != null\">\n+            or RES.TASK_DEF_ID_ = #{orQueryObject.taskDefinitionId}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionKey != null\">\n+            or D_OR${orIndex}.KEY_ = #{orQueryObject.processDefinitionKey}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionKeyLike != null\">\n+            or D_OR${orIndex}.KEY_ like #{orQueryObject.processDefinitionKeyLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionKeyLikeIgnoreCase != null\">\n+            or lower(D_OR${orIndex}.KEY_) like #{orQueryObject.processDefinitionKeyLikeIgnoreCase}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionKeys != null &amp;&amp; orQueryObject.processDefinitionKeys.size() &gt; 0\">\n+            or D_OR${orIndex}.KEY_ in\n+            <foreach item=\"item\" index=\"index\" collection=\"orQueryObject.processDefinitionKeys\" open=\"(\" separator=\",\" close=\")\">\n+              #{item}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionName != null\">\n+            or D_OR${orIndex}.NAME_ = #{orQueryObject.processDefinitionName}\n+          </if>\n+          <if test=\"orQueryObject.processDefinitionNameLike != null\">\n+            or D_OR${orIndex}.NAME_ like #{orQueryObject.processDefinitionNameLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.processCategoryInList != null &amp;&amp; orQueryObject.processCategoryInList.size() &gt; 0\">\n+            or D_OR${orIndex}.CATEGORY_ IN\n+            <foreach item=\"processCategory\" index=\"index\" collection=\"orQueryObject.processCategoryInList\"\n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{processCategory}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.processCategoryNotInList != null &amp;&amp; orQueryObject.processCategoryNotInList.size() &gt; 0\">\n+            or D_OR${orIndex}.CATEGORY_ NOT IN\n+            <foreach item=\"processCategory\" index=\"index\" collection=\"orQueryObject.processCategoryNotInList\"\n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{processCategory}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.deploymentId != null\">\n+            or DEPLOY_P_OR${orIndex}.DEPLOYMENT_ID_ = #{orQueryObject.deploymentId}\n+          </if>\n+          <if test=\"orQueryObject.deploymentIds != null &amp;&amp; orQueryObject.deploymentIds.size() &gt; 0\">\n+            or DEPLOY_P_OR${orIndex}.DEPLOYMENT_ID_ IN\n+            <foreach item=\"deployment\" index=\"index\" collection=\"orQueryObject.deploymentIds\" \n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{deployment}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.cmmnDeploymentId != null\">\n+            or DEPLOY_C_OR${orIndex}.DEPLOYMENT_ID_ = #{orQueryObject.cmmnDeploymentId}\n+          </if>\n+          <if test=\"orQueryObject.cmmnDeploymentIds != null &amp;&amp; orQueryObject.cmmnDeploymentIds.size() &gt; 0\">\n+            or DEPLOY_C_OR${orIndex}.DEPLOYMENT_ID_ IN\n+            <foreach item=\"deployment\" index=\"index\" collection=\"orQueryObject.cmmnDeploymentIds\" \n+                       open=\"(\" separator=\",\" close=\")\">\n+              #{deployment}\n+            </foreach>\n+          </if>\n+          <if test=\"orQueryObject.dueDate != null\">\n+            or RES.DUE_DATE_ = #{orQueryObject.dueDate}\n+          </if>\n+          <if test=\"orQueryObject.dueBefore != null\">\n+            or (RES.DUE_DATE_ &lt; #{orQueryObject.dueBefore} and RES.DUE_DATE_ is not null)\n+          </if>\n+          <if test=\"orQueryObject.dueAfter != null\">\n+            or (RES.DUE_DATE_ &gt; #{orQueryObject.dueAfter} and RES.DUE_DATE_ is not null)\n+          </if>\n+          <if test=\"orQueryObject.withoutDueDate\">\n+            or RES.DUE_DATE_ is null\n+          </if>\n+          <if test=\"orQueryObject.category != null\">\n+            or RES.CATEGORY_ = #{orQueryObject.category}\n+          </if>\n+          <if test=\"orQueryObject.excludeSubtasks\">\n+            or RES.PARENT_TASK_ID_ IS NULL\n+          </if>\n+            \n+          <if test=\"!orQueryObject.bothCandidateAndAssigned &amp;&amp; (orQueryObject.candidateUser != null || orQueryObject.candidateGroups != null)\">\n+            or (\n+            <if test=\"!orQueryObject.ignoreAssigneeValue\">\n+              RES.ASSIGNEE_ is null and\n+            </if>\n+            I_OR${orIndex}.TYPE_ = 'candidate'\n+            and \n+            ( \n+            <if test=\"orQueryObject.candidateUser != null\">\n+              I_OR${orIndex}.USER_ID_ = #{orQueryObject.candidateUser}          \n+            </if>\n+            <if test=\"orQueryObject.candidateUser != null &amp;&amp; orQueryObject.candidateGroups != null &amp;&amp; orQueryObject.candidateGroups.size() &gt; 0\">\n+              or\n+            </if>\n+            <if test=\"orQueryObject.candidateGroups != null &amp;&amp; orQueryObject.candidateGroups.size() &gt; 0\">\n+              I_OR${orIndex}.GROUP_ID_ IN\n+              <foreach item=\"group\" index=\"index\" collection=\"orQueryObject.candidateGroups\" \n+                           open=\"(\" separator=\",\" close=\")\">\n+                #{group}\n+              </foreach>\n+            </if>\n+            ))\n+          </if>\n+          <if test=\"orQueryObject.involvedUser != null\">\n+            or (\n+            exists(select LINK.USER_ID_ from ${prefix}ACT_RU_IDENTITYLINK LINK where USER_ID_ = #{orQueryObject.involvedUser} and LINK.TASK_ID_ = RES.ID_)\n+            or RES.ASSIGNEE_ = #{orQueryObject.involvedUser}\n+            or RES.OWNER_ = #{orQueryObject.involvedUser}\n+            )\n+          </if>\n+          <foreach item=\"var\" collection=\"orQueryObject.queryVariableValues\" index=\"index\">\n+            or \n+            <trim prefix=\"(\" prefixOverrides=\"AND\" suffix=\")\">\n+              <choose>\n+                <when test=\"var.operator.equals('EXISTS')\">\n+                  and EXISTS (\n+                  select ID_ from ${prefix}ACT_RU_VARIABLE where NAME_ = #{var.name}\n+                  <if test=\"!var.local\">\n+                    and RES.PROC_INST_ID_ = PROC_INST_ID_ and TASK_ID_ is null\n+                  </if>\n+                  <if test=\"var.local\">\n+                    and RES.ID_ = TASK_ID_ \n+                  </if>\n+                  )\n+                </when>\n+                <when test=\"var.operator.equals('NOT_EXISTS')\">\n+                  and NOT EXISTS (\n+                  select ID_ from ${prefix}ACT_RU_VARIABLE where NAME_ = #{var.name}\n+                  <if test=\"!var.local\">\n+                    and RES.PROC_INST_ID_ = PROC_INST_ID_ and TASK_ID_ is null\n+                  </if>\n+                  <if test=\"var.local\">\n+                    and RES.ID_ = TASK_ID_ \n+                  </if>\n+                  )\n+                </when>\n+                <otherwise>\n+                  <choose>\n+                    <when test=\"!var.local\">\n+                      <bind name=\"orLocal\" value=\"''\" />\n+                      <!-- When process instance variable is queried for, taskId should be null -->\n+                      and A_OR${orIndex}.TASK_ID_ is null\n+                    </when>\n+                    <otherwise>\n+                      <bind name=\"orLocal\" value=\"'L_'\" />\n+                    </otherwise>\n+                  </choose>\n+                  <if test=\"var.name != null\">\n+                    <!-- Match-all variable-names when name is null -->\n+                    and A_${orLocal}OR${orIndex}.NAME_= #{var.name}\n+                  </if>\n+                  <if test=\"var.name == null\">\n+                    and A_${orLocal}OR${orIndex}.NAME_ is not null\n+                  </if>\n+                  <if test=\"!var.type.equals('null')\">\n+                    and A_${orLocal}OR${orIndex}.TYPE_ = #{var.type}\n+                  </if>\n+                  <!-- Variable value -->\n+                  <if test=\"var.textValue != null &amp;&amp; var.longValue == null &amp;&amp; var.doubleValue == null\">\n+                    <choose>\n+                      <when test=\"var.operator.equals('EQUALS_IGNORE_CASE') || var.operator.equals('NOT_EQUALS_IGNORE_CASE') || var.operator.equals('LIKE_IGNORE_CASE')\">\n+                        and lower(A_${orLocal}OR${orIndex}.TEXT_)\n+                      </when>\n+                      <otherwise>\n+                        and A_${orLocal}OR${orIndex}.TEXT_\n+                      </otherwise>\n+                    </choose> \n+                    <choose>\n+                      <when test=\"var.operator.equals('LIKE') || var.operator.equals('LIKE_IGNORE_CASE')\">LIKE</when>\n+                      <otherwise>\n+                        <include refid=\"executionVariableOperator\" />\n+                      </otherwise>\n+                    </choose>          \n+                    #{var.textValue}\n+                    <choose>\n+                      <when test=\"var.operator.equals('LIKE') || var.operator.equals('LIKE_IGNORE_CASE')\">${wildcardEscapeClause}</when>\n+                    </choose>\n+                  </if>\n+                  <if test=\"var.textValue2 != null\">\n+                    and A_${orLocal}OR${orIndex}.TEXT2_\n+                    <choose>\n+                      <when test=\"var.operator.equals('LIKE')\">LIKE</when>\n+                      <otherwise>\n+                        <include refid=\"executionVariableOperator\" />\n+                      </otherwise>\n+                    </choose>          \n+                    #{var.textValue2}\n+                    <choose>\n+                      <when test=\"var.operator.equals('LIKE')\">${wildcardEscapeClause}</when>\n+                    </choose>\n+                  </if>\n+                  <if test=\"var.longValue != null\">\n+                    and A_${orLocal}OR${orIndex}.LONG_\n+                    <include refid=\"executionVariableOperator\" />\n+                    #{var.longValue}\n+                  </if>\n+                  <if test=\"var.doubleValue != null\">\n+                    and A_${orLocal}OR${orIndex}.DOUBLE_\n+                    <include refid=\"executionVariableOperator\" />\n+                    #{var.doubleValue}\n+                  </if>\n+                  <!-- Null variable type -->\n+                  <if test=\"var.textValue == null &amp;&amp; var.textValue2 == null &amp;&amp; var.longValue == null &amp;&amp; var.doubleValue == null\">\n+                    <choose>\n+                      <when test=\"var.operator.equals('NOT_EQUALS')\">\n+                        and (A_${orLocal}OR${orIndex}.TEXT_ is not null or A_${orLocal}OR${orIndex}.TEXT2_ is not null or A_${orLocal}OR${orIndex}.LONG_ is not null or A_${orLocal}OR${orIndex}.DOUBLE_ is not null or A_${orLocal}OR${orIndex}.BYTEARRAY_ID_ is not null)\n+                      </when>\n+                      <otherwise>\n+                        and A_${orLocal}OR${orIndex}.TEXT_ is null and A_${orLocal}OR${orIndex}.TEXT2_ is null and A_${orLocal}OR${orIndex}.LONG_ is null and A_${orLocal}OR${orIndex}.DOUBLE_ is null and A_${orLocal}OR${orIndex}.BYTEARRAY_ID_ is null\n+                      </otherwise>\n+                    </choose>          \n+                  </if>\n+                </otherwise>\n+              </choose>\n+            </trim>\n+          </foreach>\n+          <if test=\"orQueryObject.suspensionState != null\">\n+            <if test=\"orQueryObject.suspensionState.stateCode == 1\">\n+              or RES.SUSPENSION_STATE_ = 1\n+            </if>\n+            <if test=\"orQueryObject.suspensionState.stateCode == 2\">\n+              or RES.SUSPENSION_STATE_ = 2\n+            </if>\n+          </if>\n+          <if test=\"orQueryObject.tenantId != null\">\n+            or RES.TENANT_ID_ = #{orQueryObject.tenantId}\n+          </if>\n+          <if test=\"orQueryObject.tenantIdLike != null\">\n+            or RES.TENANT_ID_ like #{orQueryObject.tenantIdLike}${wildcardEscapeClause}\n+          </if>\n+          <if test=\"orQueryObject.withoutTenantId\">\n+            or (RES.TENANT_ID_ = '' or RES.TENANT_ID_ is null)\n+          </if>\n+          <choose>\n+            <when test=\"orQueryObject.bothCandidateAndAssigned\">\n+              <!-- if dbIdentityUsed set true in process engine configuration -->\n+              <if test=\"orQueryObject.userIdForCandidateAndAssignee != null\">\n+                <if test=\"orQueryObject.candidateGroups == null\">\n+                  or (RES.ASSIGNEE_ = #{orQueryObject.userIdForCandidateAndAssignee}\n+                  or (\n+                  <if test=\"!orQueryObject.ignoreAssigneeValue\">\n+                    RES.ASSIGNEE_ is null and\n+                  </if>\n+                  (I_OR${orIndex}.USER_ID_ = #{orQueryObject.userIdForCandidateAndAssignee}\n+                  or I_OR${orIndex}.GROUP_ID_ IN (select g.GROUP_ID_ from ${prefix}ACT_ID_MEMBERSHIP g where g.USER_ID_ = #{orQueryObject.userIdForCandidateAndAssignee} ) ) ) )\n+                </if>\n+              </if>\n+              <!-- if dbIdentityUsed set false in process engine configuration of using custom session factory of GroupIdentityManager -->\n+              <if test=\"orQueryObject.candidateGroups != null\">\n+                or (RES.ASSIGNEE_ = #{orQueryObject.userIdForCandidateAndAssignee}\n+                or (\n+                <if test=\"!orQueryObject.ignoreAssigneeValue\">\n+                  RES.ASSIGNEE_ is null and\n+                </if>\n+                I_OR${orIndex}.TYPE_ = 'candidate' and (I_OR${orIndex}.USER_ID_ = #{orQueryObject.userIdForCandidateAndAssignee}\n+                <if test=\"orQueryObject.candidateGroups.size() &gt; 0\">\n+                  or I_OR${orIndex}.GROUP_ID_ IN\n+                  <foreach item=\"group\" index=\"index\" collection=\"orQueryObject.candidateGroups\" open=\"(\" separator=\",\" close=\")\">\n+                    #{group}\n+                  </foreach>\n+                </if>\n+                )))\n+              </if>\n+            </when>\n+          </choose>\n+        </trim>\n+      </foreach>\n+    </where>\n+  </sql>\n+  \n+  <sql id=\"executionVariableOperator\">\n+    <choose>\n+      <when test=\"var.operator.equals('EQUALS')\">=</when>\n+      <when test=\"var.operator.equals('EQUALS_IGNORE_CASE')\">=</when>\n+      <when test=\"var.operator.equals('NOT_EQUALS')\">&lt;&gt;</when>\n+      <when test=\"var.operator.equals('NOT_EQUALS_IGNORE_CASE')\">&lt;&gt;</when>\n+      <when test=\"var.operator.equals('GREATER_THAN')\">&gt;</when>\n+      <when test=\"var.operator.equals('GREATER_THAN_OR_EQUAL')\">&gt;=</when>\n+      <when test=\"var.operator.equals('LESS_THAN')\">&lt;</when>\n+      <when test=\"var.operator.equals('LESS_THAN_OR_EQUAL')\">&lt;=</when>\n+    </choose>\n+  </sql>  \n+\n+  <select id=\"selectTaskByNativeQuery\" parameterType=\"java.util.Map\" resultMap=\"taskResultMap\">\n+    <include refid=\"org.flowable.task.service.db.common.selectByNativeQuery\"/>\n+  </select>\n+  \n+  <select id=\"selectTaskCountByNativeQuery\" parameterType=\"java.util.Map\" resultType=\"long\">\n+    ${sql}\n+  </select>\n+\n+</mapper>\n\\ No newline at end of file"},{"sha":"1dd68886a3232838a2df77c6579acc1ab0699f43","filename":"ext/flowable/flowable-bpmn/src/main/resources/org/apache/syncope/ext/flowable/mappings.xml","status":"added","additions":73,"deletions":0,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2Fmappings.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2Fmappings.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fext%2Fflowable%2Fmappings.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,73 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n+\n+<configuration>\n+\n+    <settings>\n+        <setting name=\"lazyLoadingEnabled\" value=\"false\" />\n+    </settings>\n+    <typeAliases>\n+        <typeAlias type=\"org.flowable.engine.impl.persistence.ByteArrayRefTypeHandler\" alias=\"ByteArrayRefTypeHandler\" />\n+        <typeAlias type=\"org.flowable.variable.service.impl.persistence.VariableByteArrayRefTypeHandler\" alias=\"VariableByteArrayRefTypeHandler\" />\n+        <typeAlias type=\"org.flowable.job.service.impl.persistence.JobByteArrayRefTypeHandler\" alias=\"JobByteArrayRefTypeHandler\" />\n+    </typeAliases>\n+    <typeHandlers>\n+        <typeHandler handler=\"ByteArrayRefTypeHandler\" javaType=\"org.flowable.engine.impl.persistence.entity.ByteArrayRef\" jdbcType=\"VARCHAR\" />\n+        <typeHandler handler=\"VariableByteArrayRefTypeHandler\" javaType=\"org.flowable.variable.service.impl.persistence.entity.VariableByteArrayRef\" jdbcType=\"VARCHAR\" />\n+        <typeHandler handler=\"JobByteArrayRefTypeHandler\" javaType=\"org.flowable.job.service.impl.persistence.entity.JobByteArrayRef\" jdbcType=\"VARCHAR\" />\n+    </typeHandlers>\n+\n+    <mappers>\n+        <mapper resource=\"org/flowable/db/mapping/common.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Attachment.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/ByteArray.xml\" />\n+        <mapper resource=\"org/flowable/variable/service/db/mapping/common.xml\" />\n+        <mapper resource=\"org/flowable/variable/service/db/mapping/entity/ByteArray.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/ByteArray.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Comment.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Deployment.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Execution.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/HistoricActivityInstance.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/HistoricDetail.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/HistoricProcessInstance.xml\" />\n+        <mapper resource=\"org/flowable/variable/service/db/mapping/entity/HistoricVariableInstance.xml\" />\n+        <mapper resource=\"org/flowable/task/service/db/mapping/entity/HistoricTaskInstance.xml\" />\n+        <mapper resource=\"org/flowable/identitylink/service/db/mapping/entity/HistoricIdentityLink.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/HistoryJob.xml\" />\n+        <mapper resource=\"org/flowable/identitylink/service/db/mapping/entity/IdentityLink.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/Job.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Model.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/ProcessDefinition.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/ProcessDefinitionInfo.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Property.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/Resource.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/SuspendedJob.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/TableData.xml\" />\n+        <mapper resource=\"org/flowable/task/service/db/mapping/common.xml\" />\n+        <mapper resource=\"org/apache/syncope/ext/flowable/Task.xml\" />\n+        <mapper resource=\"org/flowable/job/service/db/mapping/entity/TimerJob.xml\" />\n+        <mapper resource=\"org/flowable/variable/service/db/mapping/entity/VariableInstance.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/EventSubscription.xml\" />\n+        <mapper resource=\"org/flowable/db/mapping/entity/EventLogEntry.xml\" />\n+    </mappers>\n+\n+</configuration>\n\\ No newline at end of file"},{"sha":"5a9f1bd0901324a91a166d2764e2c35783347c20","filename":"ext/flowable/flowable-bpmn/src/main/resources/userWorkflow.bpmn20.xml","status":"renamed","additions":88,"deletions":147,"changes":235,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,14 +26,14 @@ under the License.\n              typeLanguage=\"http://www.w3.org/2001/XMLSchema\" \n              expressionLanguage=\"http://www.w3.org/1999/XPath\" \n              targetNamespace=\"http://www.flowable.org/processdef\">\n-  \n+\n   <process id=\"userWorkflow\" name=\"User Workflow\" isExecutable=\"true\">\n     <startEvent id=\"theStart\"/>\n     <sequenceFlow id=\"flow1\" sourceRef=\"theStart\" targetRef=\"create\"/>\n     <serviceTask id=\"create\" name=\"Create\" flowable:expression=\"#{create.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow2\" sourceRef=\"create\" targetRef=\"activate\"/>\n     <scriptTask id=\"activate\" name=\"Activate\" scriptFormat=\"groovy\" flowable:autoStoreVariables=\"false\">\n-      <script>execution.setVariable(\"propagateEnable\", Boolean.TRUE);</script>\n+      <script><![CDATA[execution.setVariable(\"propagateEnable\", Boolean.TRUE);]]></script>\n     </scriptTask>\n     <sequenceFlow id=\"flow3\" sourceRef=\"activate\" targetRef=\"active\"/>\n     <userTask id=\"active\" name=\"Active\"/>\n@@ -69,219 +69,160 @@ under the License.\n     </sequenceFlow>\n     <serviceTask id=\"reactivate\" name=\"Reactivate\" flowable:expression=\"#{reactivate.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow12\" sourceRef=\"reactivate\" targetRef=\"active\"/>\n-    \n     <serviceTask id=\"generateToken4PasswordReset\" name=\"Generate Token\" flowable:expression=\"#{generateToken.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"sid-7F78CE07-A7A1-467F-BB4B-40FB234AEFF7\" sourceRef=\"generateToken4PasswordReset\" targetRef=\"notify4RequestPasswordReset\"/>\n     <serviceTask id=\"notify4RequestPasswordReset\" name=\"Notification\" flowable:expression=\"#{notify.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"sid-CF9ACA40-7750-47C3-A508-7250D24D4F1F\" sourceRef=\"notify4RequestPasswordReset\" targetRef=\"active\"/>\n-\n     <serviceTask id=\"checkToken4ConfirmPasswordReset\" name=\"Check token, remove and update password\" flowable:expression=\"#{passwordReset.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"sid-3E9FE01D-CC60-4A95-B356-CA0DC000FAD6\" sourceRef=\"checkToken4ConfirmPasswordReset\" targetRef=\"notify4ConfirmPasswordReset\"/>\n     <serviceTask id=\"notify4ConfirmPasswordReset\" name=\"Notification\" flowable:expression=\"#{notify.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"sid-A37806A7-6B7B-48A2-BB37-DAE640231144\" sourceRef=\"notify4ConfirmPasswordReset\" targetRef=\"active\"/>\n-    \n     <serviceTask id=\"delete\" name=\"Delete\" flowable:expression=\"#{delete.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow99\" sourceRef=\"delete\" targetRef=\"theEnd\"/>\n-    <!-- Recertification tasks -->\n-    <userTask id=\"recertificationRequest\" name=\"Recertification Request\" flowable:formKey=\"recertify\">\n-      <extensionElements>\n-        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${user.username}\" writable=\"false\"/>\n-        <flowable:formProperty id=\"approve\" name=\"Recertify?\" type=\"boolean\" required=\"true\"/>\n-        <flowable:formProperty id=\"rejectReason\" name=\"Reason for not recertifying\" type=\"string\" variable=\"rejectReason\"/>\n-      </extensionElements>\n-    </userTask>\n-    <serviceTask id=\"recertify-task\" name=\"Recertify\" flowable:expression=\"#{recertify.execute(execution.processInstanceId)}\"/>\n-    <sequenceFlow id=\"recert-request-start-flow\" sourceRef=\"activeGw\" targetRef=\"recertificationRequest\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'request-certify'}]]></conditionExpression>\n-    </sequenceFlow>\n-    <exclusiveGateway id=\"recert-condition\"/>\n-    <sequenceFlow id=\"recert-flow1\" sourceRef=\"recertificationRequest\" targetRef=\"recertify-task\"/>\n-    <sequenceFlow id=\"recert-flow2\" sourceRef=\"recertify-task\" targetRef=\"recert-condition\"/>\n-    <sequenceFlow id=\"recert-approved-flow\" sourceRef=\"recert-condition\" targetRef=\"active\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${approve}]]></conditionExpression>\n-    </sequenceFlow>\n-    <sequenceFlow id=\"recert-denied-flow\" sourceRef=\"recert-condition\" targetRef=\"suspend\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${!approve}]]></conditionExpression>\n-    </sequenceFlow>\n-    <!-- End Recertification flow -->\n     <endEvent id=\"theEnd\"/>\n   </process>\n-  \n   <bpmndi:BPMNDiagram id=\"BPMNDiagram_userWorkflow\">\n     <bpmndi:BPMNPlane bpmnElement=\"userWorkflow\" id=\"BPMNPlane_userWorkflow\">\n       <bpmndi:BPMNShape bpmnElement=\"theStart\" id=\"BPMNShape_theStart\">\n-        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"540.0\" y=\"521.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"540.0\" y=\"521.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"create\" id=\"BPMNShape_create\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"620.0\" y=\"509.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"620.0\" y=\"509.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"activate\" id=\"BPMNShape_activate\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"828.0\" y=\"500.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"828.0\" y=\"500.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"active\" id=\"BPMNShape_active\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1030.0\" y=\"511.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1030.0\" y=\"511.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"activeGw\" id=\"BPMNShape_activeGw\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1400.0\" y=\"520.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1400.0\" y=\"520.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"update\" id=\"BPMNShape_update\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1370.0\" y=\"615.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1370.0\" y=\"615.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspend\" id=\"BPMNShape_suspend\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1490.0\" y=\"370.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1490.0\" y=\"370.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspended\" id=\"BPMNShape_suspended\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1640.0\" y=\"370.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1640.0\" y=\"370.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspendedGw\" id=\"BPMNShape_suspendedGw\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1820.0\" y=\"380.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1820.0\" y=\"380.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"reactivate\" id=\"BPMNShape_reactivate\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1940.0\" y=\"290.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1940.0\" y=\"290.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"generateToken4PasswordReset\" id=\"BPMNShape_generateToken4PasswordReset\">\n-        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1515.0\" y=\"604.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1515.0\" y=\"604.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"notify4RequestPasswordReset\" id=\"BPMNShape_notify4RequestPasswordReset\">\n-        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1515.0\" y=\"750.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1515.0\" y=\"750.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"checkToken4ConfirmPasswordReset\" id=\"BPMNShape_checkToken4ConfirmPasswordReset\">\n-        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1725.0\" y=\"664.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1725.0\" y=\"664.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"notify4ConfirmPasswordReset\" id=\"BPMNShape_notify4ConfirmPasswordReset\">\n-        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1725.0\" y=\"810.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"81.0\" width=\"121.0\" x=\"1725.0\" y=\"810.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"delete\" id=\"BPMNShape_delete\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1940.0\" y=\"438.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recertificationRequest\" id=\"BPMNShape_recertificationRequest\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"1370.0\" y=\"375.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recertify-task\" id=\"BPMNShape_recertify-task\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"1230.0\" y=\"375.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recert-condition\" id=\"BPMNShape_recert-condition\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1178.0\" y=\"475.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1940.0\" y=\"438.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"theEnd\" id=\"BPMNShape_theEnd\">\n-        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"2080.0\" y=\"451.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"2080.0\" y=\"451.0\"/>\n       </bpmndi:BPMNShape>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n-        <omgdi:waypoint x=\"575.0\" y=\"538.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"620.0\" y=\"539.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n-        <omgdi:waypoint x=\"720.0\" y=\"539.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"828.0\" y=\"540.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n-        <omgdi:waypoint x=\"928.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1030.0\" y=\"541.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n-        <omgdi:waypoint x=\"1130.0\" y=\"541.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1400.0\" y=\"540.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"active2Update\" id=\"BPMNEdge_active2Update\">\n-        <omgdi:waypoint x=\"1420.0\" y=\"560.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1420.0\" y=\"615.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2Suspend\" id=\"BPMNEdge_active2Suspend\">\n-        <omgdi:waypoint x=\"1440.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1540.0\" y=\"430.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1420.0\" y=\"559.9405090390104\"/>\n+        <omgdi:waypoint x=\"1420.0\" y=\"615.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2Delete\" id=\"BPMNEdge_active2Delete\">\n-        <omgdi:waypoint x=\"1440.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1990.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1990.0\" y=\"498.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2RequestPasswordReset\" id=\"BPMNEdge_active2RequestPasswordReset\">\n-        <omgdi:waypoint x=\"1440.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1575.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1575.0\" y=\"604.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"suspended2Delete\" id=\"BPMNEdge_suspended2Delete\">\n+        <omgdi:waypoint x=\"1859.9433544303797\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1990.0\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1990.0\" y=\"438.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"active2ConfirmPasswordReset\" id=\"BPMNEdge_active2ConfirmPasswordReset\">\n-        <omgdi:waypoint x=\"1440.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1785.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1785.0\" y=\"664.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1439.947267871352\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1785.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1785.3768996960487\" y=\"664.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"sid-EA22026A-25F0-4ED0-AB6E-9CE9CE74623C\" id=\"BPMNEdge_sid-EA22026A-25F0-4ED0-AB6E-9CE9CE74623C\">\n-        <omgdi:waypoint x=\"1370.0\" y=\"645.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"645.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"571.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1370.0\" y=\"645.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"645.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"570.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n-        <omgdi:waypoint x=\"1590.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1640.0\" y=\"400.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"suspended2Reactivate\" id=\"BPMNEdge_suspended2Reactivate\">\n+        <omgdi:waypoint x=\"1859.9339371980675\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1902.0\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1902.0\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1939.9999999999768\" y=\"320.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n-        <omgdi:waypoint x=\"1740.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1820.0\" y=\"400.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2Delete\" id=\"BPMNEdge_active2Delete\">\n+        <omgdi:waypoint x=\"1439.9482503069637\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1990.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1990.0\" y=\"497.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"suspended2Reactivate\" id=\"BPMNEdge_suspended2Reactivate\">\n-        <omgdi:waypoint x=\"1860.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1902.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1902.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1940.0\" y=\"320.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-7F78CE07-A7A1-467F-BB4B-40FB234AEFF7\" id=\"BPMNEdge_sid-7F78CE07-A7A1-467F-BB4B-40FB234AEFF7\">\n+        <omgdi:waypoint x=\"1575.5\" y=\"684.9499999999999\"/>\n+        <omgdi:waypoint x=\"1575.5\" y=\"750.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"suspended2Delete\" id=\"BPMNEdge_suspended2Delete\">\n-        <omgdi:waypoint x=\"1860.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1990.0\" y=\"400.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1990.0\" y=\"438.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n+        <omgdi:waypoint x=\"569.9448521215137\" y=\"536.3898700596537\"/>\n+        <omgdi:waypoint x=\"620.0\" y=\"537.6956521739131\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n-        <omgdi:waypoint x=\"1990.0\" y=\"290.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1990.0\" y=\"261.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"261.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"511.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n+        <omgdi:waypoint x=\"719.9499999999825\" y=\"539.2401442307691\"/>\n+        <omgdi:waypoint x=\"827.9999999999945\" y=\"539.7596153846154\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-7F78CE07-A7A1-467F-BB4B-40FB234AEFF7\" id=\"BPMNEdge_sid-7F78CE07-A7A1-467F-BB4B-40FB234AEFF7\">\n-        <omgdi:waypoint x=\"1575.0\" y=\"685.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1575.0\" y=\"750.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n+        <omgdi:waypoint x=\"927.9499999999819\" y=\"540.2472772277227\"/>\n+        <omgdi:waypoint x=\"1029.9999999999911\" y=\"540.7524752475248\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-CF9ACA40-7750-47C3-A508-7250D24D4F1F\" id=\"BPMNEdge_sid-CF9ACA40-7750-47C3-A508-7250D24D4F1F\">\n-        <omgdi:waypoint x=\"1515.0\" y=\"790.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"790.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"571.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2RequestPasswordReset\" id=\"BPMNEdge_active2RequestPasswordReset\">\n+        <omgdi:waypoint x=\"1439.943568665287\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1575.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1575.3062200956938\" y=\"604.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"sid-3E9FE01D-CC60-4A95-B356-CA0DC000FAD6\" id=\"BPMNEdge_sid-3E9FE01D-CC60-4A95-B356-CA0DC000FAD6\">\n-        <omgdi:waypoint x=\"1785.0\" y=\"745.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1785.0\" y=\"810.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1785.5\" y=\"744.9499999999999\"/>\n+        <omgdi:waypoint x=\"1785.5\" y=\"810.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-A37806A7-6B7B-48A2-BB37-DAE640231144\" id=\"BPMNEdge_sid-A37806A7-6B7B-48A2-BB37-DAE640231144\">\n-        <omgdi:waypoint x=\"1725.0\" y=\"850.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"850.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1080.0\" y=\"571.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n+        <omgdi:waypoint x=\"1589.95\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1640.0\" y=\"400.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow99\" id=\"BPMNEdge_flow99\">\n-        <omgdi:waypoint x=\"2040.0\" y=\"468.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2080.0\" y=\"468.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-CF9ACA40-7750-47C3-A508-7250D24D4F1F\" id=\"BPMNEdge_sid-CF9ACA40-7750-47C3-A508-7250D24D4F1F\">\n+        <omgdi:waypoint x=\"1514.9999999999554\" y=\"790.438950554995\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"790.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"570.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-request-start-flow\" id=\"BPMNEdge_recert-request-start-flow\">\n-        <omgdi:waypoint x=\"1420.0\" y=\"520.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1420.0\" y=\"455.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n+        <omgdi:waypoint x=\"1129.9499999999914\" y=\"540.8529411764707\"/>\n+        <omgdi:waypoint x=\"1400.0586510263724\" y=\"540.058504398827\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-flow1\" id=\"BPMNEdge_recert-flow1\">\n-        <omgdi:waypoint x=\"1370.0\" y=\"415.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1330.0\" y=\"415.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n+        <omgdi:waypoint x=\"1739.95\" y=\"400.0\"/>\n+        <omgdi:waypoint x=\"1820.0\" y=\"400.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-flow2\" id=\"BPMNEdge_recert-flow2\">\n-        <omgdi:waypoint x=\"1280.0\" y=\"455.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1280.0\" y=\"495.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1218.0\" y=\"495.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow99\" id=\"BPMNEdge_flow99\">\n+        <omgdi:waypoint x=\"2039.9499999999982\" y=\"466.5576923076923\"/>\n+        <omgdi:waypoint x=\"2080.005704870052\" y=\"465.4022398573087\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-approved-flow\" id=\"BPMNEdge_recert-approved-flow\">\n-        <omgdi:waypoint x=\"1198.0\" y=\"515.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1194.0\" y=\"541.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1130.0\" y=\"541.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2Suspend\" id=\"BPMNEdge_active2Suspend\">\n+        <omgdi:waypoint x=\"1439.9416944213153\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1540.0\" y=\"429.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-denied-flow\" id=\"BPMNEdge_recert-denied-flow\">\n-        <omgdi:waypoint x=\"1198.0\" y=\"475.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1198.0\" y=\"313.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1540.0\" y=\"313.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1540.0\" y=\"370.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n+        <omgdi:waypoint x=\"1990.0\" y=\"290.0\"/>\n+        <omgdi:waypoint x=\"1990.0\" y=\"261.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"261.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"511.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-A37806A7-6B7B-48A2-BB37-DAE640231144\" id=\"BPMNEdge_sid-A37806A7-6B7B-48A2-BB37-DAE640231144\">\n+        <omgdi:waypoint x=\"1724.9999999998677\" y=\"850.4571226080794\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"850.0\"/>\n+        <omgdi:waypoint x=\"1080.0\" y=\"570.95\"/>\n       </bpmndi:BPMNEdge>\n     </bpmndi:BPMNPlane>\n   </bpmndi:BPMNDiagram>\n-</definitions>\n+</definitions>\n\\ No newline at end of file","previous_filename":"core/workflow-flowable/src/main/resources/userWorkflow.bpmn20.xml"},{"sha":"be8a7bb4e3cae045cb1726bb640f66c57f2ad8f8","filename":"ext/flowable/flowable-bpmn/src/main/resources/workflow.properties","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,6 +16,6 @@\n # under the License.\n wf.directory=${conf.directory}\n historyLevel=activity\n-uwfAdapter=org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter\n+uwfAdapter=org.apache.syncope.core.flowable.impl.FlowableUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter\n awfAdapter=org.apache.syncope.core.workflow.java.DefaultAnyObjectWorkflowAdapter","previous_filename":"core/workflow-flowable/src/main/resources/workflow.properties"},{"sha":"9e27f47d0e6528ce0bfcac3d39d27a73c5786f50","filename":"ext/flowable/flowable-bpmn/src/main/resources/workflowFlowableContext.xml","status":"renamed","additions":7,"deletions":8,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FworkflowFlowableContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FworkflowFlowableContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fresources%2FworkflowFlowableContext.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -30,17 +30,15 @@ under the License.\n     <property name=\"fallback\" value=\"classpath:userWorkflow.bpmn20.xml\"/>\n   </bean>\n \n-  <bean id=\"flowableUtils\" class=\"org.apache.syncope.core.workflow.flowable.FlowableUtils\"/>\n-\n-  <bean id=\"syncopeIdmIdentityService\" class=\"org.apache.syncope.core.workflow.flowable.SyncopeIdmIdentityService\"/>\n+  <bean id=\"syncopeIdmIdentityService\" class=\"org.apache.syncope.core.flowable.support.SyncopeIdmIdentityService\"/>\n   <bean id=\"syncopeIdmEngineConfiguration\" class=\"org.flowable.idm.spring.SpringIdmEngineConfiguration\">\n     <property name=\"idmIdentityService\" ref=\"syncopeIdmIdentityService\"/> \n   </bean>\n   <bean id=\"syncopeIdmEngineConfigurator\" class=\"org.flowable.idm.spring.configurator.SpringIdmEngineConfigurator\">\n     <property name=\"idmEngineConfiguration\" ref=\"syncopeIdmEngineConfiguration\"/> \n   </bean>\n \n-  <bean class=\"org.flowable.spring.SpringProcessEngineConfiguration\" scope=\"prototype\">\n+  <bean class=\"org.apache.syncope.core.flowable.support.DomainProcessEngineConfiguration\" scope=\"prototype\">\n     <property name=\"databaseSchemaUpdate\" value=\"true\"/>\n \n     <property name=\"jpaHandleTransaction\" value=\"true\"/>\n@@ -51,13 +49,14 @@ under the License.\n     <property name=\"idmEngineConfigurator\" ref=\"syncopeIdmEngineConfigurator\"/>\n     <property name=\"customPreVariableTypes\">\n       <list>\n-        <bean class=\"org.apache.syncope.core.workflow.flowable.SyncopeEntitiesVariableType\"/>\n+        <bean class=\"org.apache.syncope.core.flowable.support.SyncopeEntitiesVariableType\"/>\n       </list>\n     </property>\n   </bean>\n \n-  <bean class=\"org.apache.syncope.core.workflow.flowable.spring.DomainProcessEngineFactoryBean\"/>\n+  <bean id=\"bpmnProcessManager\" class=\"org.apache.syncope.core.flowable.impl.FlowableBpmnProcessManager\"/>\n+  <bean id=\"userRequestHandler\" class=\"org.apache.syncope.core.flowable.impl.FlowableUserRequestHandler\"/>\n+  <bean id=\"flowableUtils\" class=\"org.apache.syncope.core.flowable.impl.FlowableWorkflowUtils\"/>\n \n-  <context:component-scan base-package=\"org.apache.syncope.core.workflow.flowable\"/>\n-    \n+  <context:component-scan base-package=\"org.apache.syncope.core.flowable\"/>\n </beans>","previous_filename":"core/workflow-flowable/src/main/resources/workflowFlowableContext.xml"},{"sha":"b5765df6c84298fe5ae007fc16b0e71178d69b01","filename":"ext/flowable/logic/pom.xml","status":"added","additions":61,"deletions":0,"changes":61,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,61 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable Logic</name>\n+  <description>Apache Syncope Ext: Flowable Logic</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-logic</artifactId>\n+  <packaging>jar</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.syncope.core</groupId>\n+      <artifactId>syncope-core-logic</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-bpmn</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>"},{"sha":"8d280ace055ecd269a995bf1a8d72a9a8ac5ad75","filename":"ext/flowable/logic/src/main/java/org/apache/syncope/core/logic/BpmnProcessLogic.java","status":"added","additions":73,"deletions":0,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FBpmnProcessLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FBpmnProcessLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FBpmnProcessLogic.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,73 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.logic;\n+\n+import java.io.OutputStream;\n+import java.lang.reflect.Method;\n+import java.util.List;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n+import org.apache.syncope.common.lib.types.BpmnProcessFormat;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.stereotype.Component;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.apache.syncope.core.flowable.api.BpmnProcessManager;\n+\n+@Component\n+public class BpmnProcessLogic extends AbstractTransactionalLogic<BpmnProcessTO> {\n+\n+    @Autowired\n+    private BpmnProcessManager bpmnProcessManager;\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.BPMN_PROCESS_LIST + \"')\")\n+    @Transactional(readOnly = true)\n+    public List<BpmnProcessTO> list() {\n+        return bpmnProcessManager.getProcesses();\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.BPMN_PROCESS_GET + \"')\")\n+    @Transactional(readOnly = true)\n+    public void exportDefinition(final String key, final BpmnProcessFormat format, final OutputStream os) {\n+        bpmnProcessManager.exportProcess(key, format, os);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.BPMN_PROCESS_GET + \"')\")\n+    @Transactional(readOnly = true)\n+    public void exportDiagram(final String key, final OutputStream os) {\n+        bpmnProcessManager.exportDiagram(key, os);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.BPMN_PROCESS_SET + \"')\")\n+    public void importDefinition(final String key, final BpmnProcessFormat format, final String definition) {\n+        bpmnProcessManager.importProcess(key, format, definition);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.BPMN_PROCESS_DELETE + \"')\")\n+    public void delete(final String key) {\n+        bpmnProcessManager.deleteProcess(key);\n+    }\n+\n+    @Override\n+    protected BpmnProcessTO resolveReference(final Method method, final Object... args)\n+            throws UnresolvedReferenceException {\n+\n+        throw new UnresolvedReferenceException();\n+    }\n+}"},{"sha":"1acc1da148739530c9ba457ce2e3783129d4ca78","filename":"ext/flowable/logic/src/main/java/org/apache/syncope/core/logic/UserRequestLogic.java","status":"added","additions":160,"deletions":0,"changes":160,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserRequestLogic.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,160 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.logic;\n+\n+import java.lang.reflect.Method;\n+import java.util.List;\n+import org.apache.commons.io.output.NullOutputStream;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.common.lib.to.PropagationTaskTO;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.types.BpmnProcessFormat;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n+import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.core.flowable.api.BpmnProcessManager;\n+import org.apache.syncope.core.persistence.api.dao.UserDAO;\n+import org.apache.syncope.core.persistence.api.dao.search.OrderByClause;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.propagation.PropagationManager;\n+import org.apache.syncope.core.provisioning.api.propagation.PropagationTaskExecutor;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n+import org.apache.syncope.core.flowable.api.UserRequestHandler;\n+import org.apache.syncope.core.spring.security.AuthContextUtils;\n+import org.flowable.engine.runtime.ProcessInstance;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.stereotype.Component;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Component\n+public class UserRequestLogic extends AbstractTransactionalLogic<UserRequestForm> {\n+\n+    @Autowired\n+    private BpmnProcessManager bpmnProcessManager;\n+\n+    @Autowired\n+    private UserRequestHandler userRequestHandler;\n+\n+    @Autowired\n+    private PropagationManager propagationManager;\n+\n+    @Autowired\n+    private PropagationTaskExecutor taskExecutor;\n+\n+    @Autowired\n+    private UserDataBinder binder;\n+\n+    @Autowired\n+    private UserDAO userDAO;\n+\n+    protected UserRequestTO doStart(final String bpmnProcess, final User user) {\n+        // check if BPMN process exists\n+        bpmnProcessManager.exportProcess(bpmnProcess, BpmnProcessFormat.XML, new NullOutputStream());\n+\n+        return userRequestHandler.start(bpmnProcess, user);\n+    }\n+\n+    @PreAuthorize(\"isAuthenticated()\")\n+    public UserRequestTO start(final String bpmnProcess) {\n+        return doStart(bpmnProcess, userDAO.findByUsername(AuthContextUtils.getUsername()));\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.USER_REQUEST_START + \"')\")\n+    public UserRequestTO start(final String bpmnProcess, final String userKey) {\n+        return doStart(bpmnProcess, userDAO.authFind(userKey));\n+    }\n+\n+    @PreAuthorize(\"isAuthenticated()\")\n+    public void cancel(final String executionId, final String reason) {\n+        Pair<ProcessInstance, String> parsed = userRequestHandler.parse(executionId);\n+\n+        if (!AuthContextUtils.getUsername().equals(userDAO.find(parsed.getRight()).getUsername())\n+                && !AuthContextUtils.getAuthorities().stream().\n+                        anyMatch(auth -> FlowableEntitlement.USER_REQUEST_CANCEL.equals(auth.getAuthority()))) {\n+\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.DelegatedAdministration);\n+            sce.getElements().add(\"Canceling \" + executionId + \" not allowed\");\n+            throw sce;\n+        }\n+\n+        userRequestHandler.cancel(parsed.getLeft(), reason);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.WORKFLOW_FORM_CLAIM + \"')\")\n+    public UserRequestForm claimForm(final String taskId) {\n+        return userRequestHandler.claimForm(taskId);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.WORKFLOW_FORM_READ + \"') \"\n+            + \"and hasRole('\" + StandardEntitlement.USER_READ + \"')\")\n+    @Transactional(readOnly = true)\n+    public List<UserRequestForm> getForms(final String key) {\n+        User user = userDAO.authFind(key);\n+        return userRequestHandler.getForms(user.getKey());\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.WORKFLOW_FORM_LIST + \"')\")\n+    @Transactional(readOnly = true)\n+    public Pair<Integer, List<UserRequestForm>> getForms(\n+            final int page,\n+            final int size,\n+            final List<OrderByClause> orderByClauses) {\n+\n+        return userRequestHandler.getForms(page, size, orderByClauses);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.WORKFLOW_FORM_SUBMIT + \"')\")\n+    public UserTO submitForm(final UserRequestForm form) {\n+        WorkflowResult<UserPatch> wfResult = userRequestHandler.submitForm(form);\n+\n+        // propByRes can be made empty by the workflow definition if no propagation should occur \n+        // (for example, with rejected users)\n+        if (wfResult.getPropByRes() != null && !wfResult.getPropByRes().isEmpty()) {\n+            List<PropagationTaskTO> tasks = propagationManager.getUserUpdateTasks(\n+                    new WorkflowResult<>(\n+                            Pair.of(wfResult.getResult(), Boolean.TRUE),\n+                            wfResult.getPropByRes(),\n+                            wfResult.getPerformedTasks()));\n+\n+            taskExecutor.execute(tasks, false);\n+        }\n+\n+        UserTO userTO;\n+        if (userDAO.find(wfResult.getResult().getKey()) == null) {\n+            userTO = new UserTO();\n+            userTO.setKey(wfResult.getResult().getKey());\n+        } else {\n+            userTO = binder.getUserTO(wfResult.getResult().getKey());\n+        }\n+        return userTO;\n+    }\n+\n+    @Override\n+    protected UserRequestForm resolveReference(final Method method, final Object... args)\n+            throws UnresolvedReferenceException {\n+\n+        throw new UnresolvedReferenceException();\n+    }\n+}"},{"sha":"8d73fae8a154ecc542d25aae7d081431f2738a85","filename":"ext/flowable/logic/src/main/java/org/apache/syncope/core/logic/UserWorkflowTaskLogic.java","status":"added","additions":91,"deletions":0,"changes":91,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowTaskLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowTaskLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowTaskLogic.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,91 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.logic;\n+\n+import java.lang.reflect.Method;\n+import java.util.List;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.common.lib.to.PropagationTaskTO;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n+import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.core.persistence.api.dao.UserDAO;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.propagation.PropagationManager;\n+import org.apache.syncope.core.provisioning.api.propagation.PropagationTaskExecutor;\n+import org.apache.syncope.core.provisioning.api.WorkflowResult;\n+import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n+import org.apache.syncope.core.flowable.api.WorkflowTaskManager;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class UserWorkflowTaskLogic extends AbstractTransactionalLogic<UserRequestForm> {\n+\n+    @Autowired\n+    private WorkflowTaskManager wfTaskManager;\n+\n+    @Autowired\n+    private PropagationManager propagationManager;\n+\n+    @Autowired\n+    private PropagationTaskExecutor taskExecutor;\n+\n+    @Autowired\n+    private UserDataBinder binder;\n+\n+    @Autowired\n+    private UserDAO userDAO;\n+\n+    @PreAuthorize(\"hasRole('\" + FlowableEntitlement.WORKFLOW_TASK_LIST + \"') \"\n+            + \"and hasRole('\" + StandardEntitlement.USER_READ + \"')\")\n+    public List<WorkflowTask> getAvailableTasks(final String key) {\n+        User user = userDAO.authFind(key);\n+        return wfTaskManager.getAvailableTasks(user.getKey());\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.USER_UPDATE + \"')\")\n+    public UserTO executeNextTask(final WorkflowTaskExecInput workflowTaskExecInput) {\n+        WorkflowResult<String> updated = wfTaskManager.executeNextTask(workflowTaskExecInput);\n+\n+        UserPatch userPatch = new UserPatch();\n+        userPatch.setKey(updated.getResult());\n+\n+        List<PropagationTaskTO> tasks = propagationManager.getUserUpdateTasks(\n+                new WorkflowResult<>(\n+                        Pair.<UserPatch, Boolean>of(userPatch, null),\n+                        updated.getPropByRes(), updated.getPerformedTasks()));\n+\n+        taskExecutor.execute(tasks, false);\n+\n+        return binder.getUserTO(updated.getResult());\n+    }\n+\n+    @Override\n+    protected UserRequestForm resolveReference(final Method method, final Object... args)\n+            throws UnresolvedReferenceException {\n+\n+        throw new UnresolvedReferenceException();\n+    }\n+}"},{"sha":"ea526adcf95f078c5ef9680c33f10ebaedb30980","filename":"ext/flowable/logic/src/main/java/org/apache/syncope/core/logic/init/FlowableLoader.java","status":"renamed","additions":14,"deletions":8,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FFlowableLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FFlowableLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FFlowableLoader.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n-package org.apache.syncope.core.workflow.flowable;\n+package org.apache.syncope.core.logic.init;\n \n import java.io.ByteArrayInputStream;\n import java.io.IOException;\n@@ -25,9 +25,13 @@\n import java.util.Map;\n import javax.annotation.Resource;\n import org.apache.commons.io.IOUtils;\n-import org.apache.syncope.core.spring.ResourceWithFallbackLoader;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n+import org.apache.syncope.core.flowable.impl.FlowableDeployUtils;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n+import org.apache.syncope.core.flowable.support.DomainProcessEngine;\n import org.apache.syncope.core.persistence.api.SyncopeLoader;\n-import org.apache.syncope.core.workflow.flowable.spring.DomainProcessEngine;\n+import org.apache.syncope.core.provisioning.api.EntitlementsHolder;\n+import org.apache.syncope.core.spring.ResourceWithFallbackLoader;\n import org.flowable.engine.ProcessEngine;\n import org.flowable.engine.repository.ProcessDefinition;\n import org.flowable.spring.SpringProcessEngineConfiguration;\n@@ -37,9 +41,9 @@\n import org.springframework.stereotype.Component;\n \n @Component\n-public class FlowableDefinitionLoader implements SyncopeLoader {\n+public class FlowableLoader implements SyncopeLoader {\n \n-    private static final Logger LOG = LoggerFactory.getLogger(FlowableDefinitionLoader.class);\n+    private static final Logger LOG = LoggerFactory.getLogger(FlowableLoader.class);\n \n     @Resource(name = \"userWorkflowDef\")\n     private ResourceWithFallbackLoader userWorkflowDef;\n@@ -54,6 +58,8 @@ public Integer getPriority() {\n \n     @Override\n     public void load() {\n+        EntitlementsHolder.getInstance().init(FlowableEntitlement.values());\n+\n         byte[] wfDef = new byte[0];\n \n         try (InputStream wfIn = userWorkflowDef.getResource().getInputStream()) {\n@@ -64,17 +70,17 @@ public void load() {\n \n         for (Map.Entry<String, ProcessEngine> entry : dpEngine.getEngines().entrySet()) {\n             List<ProcessDefinition> processes = entry.getValue().getRepositoryService().\n-                    createProcessDefinitionQuery().processDefinitionKey(FlowableUserWorkflowAdapter.WF_PROCESS_ID).\n+                    createProcessDefinitionQuery().processDefinitionKey(FlowableRuntimeUtils.WF_PROCESS_ID).\n                     list();\n-            LOG.debug(FlowableUserWorkflowAdapter.WF_PROCESS_ID + \" Flowable processes in repository: {}\", processes);\n+            LOG.debug(FlowableRuntimeUtils.WF_PROCESS_ID + \" Flowable processes in repository: {}\", processes);\n \n             // Only loads process definition from file if not found in repository\n             if (processes.isEmpty()) {\n                 entry.getValue().getRepositoryService().createDeployment().addInputStream(\n                         userWorkflowDef.getResource().getFilename(), new ByteArrayInputStream(wfDef)).deploy();\n \n                 ProcessDefinition procDef = entry.getValue().getRepositoryService().createProcessDefinitionQuery().\n-                        processDefinitionKey(FlowableUserWorkflowAdapter.WF_PROCESS_ID).latestVersion().\n+                        processDefinitionKey(FlowableRuntimeUtils.WF_PROCESS_ID).latestVersion().\n                         singleResult();\n \n                 FlowableDeployUtils.deployModel(entry.getValue(), procDef);","previous_filename":"core/workflow-flowable/src/main/java/org/apache/syncope/core/workflow/flowable/FlowableDefinitionLoader.java"},{"sha":"5a804b5d6efa99ae7f59fd9e4cdcc55e0ddc05df","filename":"ext/flowable/pom.xml","status":"added","additions":49,"deletions":0,"changes":49,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,49 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope</groupId>\n+    <artifactId>syncope-ext</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable</name>\n+  <description>Apache Syncope Ext: Flowable</description>\n+  <groupId>org.apache.syncope.ext</groupId>\n+  <artifactId>syncope-ext-flowable</artifactId>\n+  <packaging>pom</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../..</rootpom.basedir>\n+  </properties>\n+  \n+  <modules>\n+    <module>common-lib</module>\n+    <module>rest-api</module>\n+    <module>logic</module>\n+    <module>rest-cxf</module>\n+    <module>flowable-bpmn</module>\n+    <module>client-console</module>\n+  </modules>\n+\n+</project>"},{"sha":"c45ffd3232ebdec5c6c00d517f9df17397f2c315","filename":"ext/flowable/rest-api/pom.xml","status":"added","additions":76,"deletions":0,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable REST API</name>\n+  <description>Apache Syncope Ext: Flowable REST API</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-rest-api</artifactId>\n+  <packaging>jar</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.syncope.common</groupId>\n+      <artifactId>syncope-common-rest-api</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-common-lib</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <!-- Generating javadoc JAR artifact for usage with CXF's WADL generator (for core) -->\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-javadoc-plugin</artifactId>\n+        <inherited>true</inherited>\n+        <executions>\n+          <execution>\n+            <id>attach-javadocs</id>\n+            <goals>\n+              <goal>jar</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>"},{"sha":"4097afde33e668e7f00a20a3a02d14b557cde38d","filename":"ext/flowable/rest-api/src/main/java/org/apache/syncope/common/rest/api/beans/UserRequestFormQuery.java","status":"renamed","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FUserRequestFormQuery.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FUserRequestFormQuery.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FUserRequestFormQuery.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,15 +18,15 @@\n  */\n package org.apache.syncope.common.rest.api.beans;\n \n-public class WorkflowFormQuery extends AbstractQuery {\n+public class UserRequestFormQuery extends AbstractQuery {\n \n     private static final long serialVersionUID = -4762457303770028554L;\n \n-    public static class Builder extends AbstractQuery.Builder<WorkflowFormQuery, Builder> {\n+    public static class Builder extends AbstractQuery.Builder<UserRequestFormQuery, Builder> {\n \n         @Override\n-        protected WorkflowFormQuery newInstance() {\n-            return new WorkflowFormQuery();\n+        protected UserRequestFormQuery newInstance() {\n+            return new UserRequestFormQuery();\n         }\n     }\n }","previous_filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/beans/WorkflowFormQuery.java"},{"sha":"06cb056da3d6e1ed3d1e0e8a3a5b66b420086b7c","filename":"ext/flowable/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/BpmnProcessService.java","status":"renamed","additions":31,"deletions":44,"changes":75,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FBpmnProcessService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FBpmnProcessService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FBpmnProcessService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.common.rest.api.service;\n \n+import io.swagger.v3.oas.annotations.Operation;\n import io.swagger.v3.oas.annotations.responses.ApiResponse;\n import io.swagger.v3.oas.annotations.responses.ApiResponses;\n import io.swagger.v3.oas.annotations.security.SecurityRequirement;\n@@ -34,88 +35,74 @@\n import javax.ws.rs.Produces;\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.syncope.common.rest.api.RESTHeaders;\n \n /**\n- * REST operations for workflow definition.\n+ * REST operations for BPMN processes.\n  */\n-@Tag(name = \"Workflow\")\n+@Tag(name = \"Flowable\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })\n-@Path(\"workflows\")\n-public interface WorkflowService extends JAXRSService {\n+@Path(\"flowable/bpmnProcesses\")\n+public interface BpmnProcessService extends JAXRSService {\n \n     /**\n-     * Lists the available workflow definitions, for the given any object type.\n+     * Lists the available BPMN processes.\n      *\n-     * @param anyType any object type\n-     * @return available workflow definitions, for the given any object type\n+     * @return available BPMN processs, for the given any object type\n      */\n     @GET\n-    @Path(\"{anyType}\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    List<WorkflowDefinitionTO> list(@NotNull @PathParam(\"anyType\") String anyType);\n+    List<BpmnProcessTO> list();\n \n     /**\n-     * Exports the workflow definition for matching any object type and key.\n+     * Exports the BPMN process for matching key.\n      *\n-     * @param anyType any object type\n-     * @param key workflow definition key\n-     * @return workflow definition for matching any object type and key\n+     * @param key BPMN process key\n+     * @return BPMN process for matching key\n      */\n     @GET\n-    @Path(\"{anyType}/{key}\")\n-    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    Response get(\n-            @NotNull @PathParam(\"anyType\") String anyType,\n-            @NotNull @PathParam(\"key\") String key);\n+    @Path(\"{key}\")\n+    @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\n+    Response get(@NotNull @PathParam(\"key\") String key);\n \n     /**\n-     * Exports the workflow diagram representation (if available), for matching any object type and key.\n+     * Exports the BPMN diagram representation (if available), for matching key.\n      *\n-     * @param anyType any object type\n-     * @param key workflow definition key\n+     * @param key BPMN process key\n      * @return workflow diagram representation\n      */\n     @GET\n-    @Path(\"{anyType}/{key}/diagram.png\")\n+    @Path(\"{key}/diagram.png\")\n     @Produces({ RESTHeaders.MEDIATYPE_IMAGE_PNG })\n-    Response exportDiagram(\n-            @NotNull @PathParam(\"anyType\") String anyType,\n-            @NotNull @PathParam(\"key\") String key);\n+    Response exportDiagram(@NotNull @PathParam(\"key\") String key);\n \n     /**\n-     * Imports the workflow definition for matching any object type, under the provided key.\n+     * Imports the BPMN process under the provided key.\n      *\n-     * @param anyType any object type\n-     * @param key workflow definition key\n-     * @param definition workflow definition for matching kind\n+     * @param key BPMN process key\n+     * @param definition BPMN process for matching kind\n      */\n     @ApiResponses(\n             @ApiResponse(responseCode = \"204\", description = \"Operation was successful\"))\n     @PUT\n-    @Path(\"{anyType}/{key}\")\n-    @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    void set(\n-            @NotNull @PathParam(\"anyType\") String anyType,\n-            @NotNull @PathParam(\"key\") String key,\n-            @NotNull String definition);\n+    @Path(\"{key}\")\n+    @Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\n+    @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })\n+    void set(@NotNull @PathParam(\"key\") String key, @NotNull String definition);\n \n     /**\n-     * Removes the workflow definition for matching any object type, under the provided key.\n+     * Removes the BPMN process under the provided key.\n      *\n-     * @param anyType any object type\n-     * @param key workflow definition key\n+     * @param key BPMN process key\n      */\n+    @Operation(operationId = \"deleteBpmnProcess\")\n     @ApiResponses(\n             @ApiResponse(responseCode = \"204\", description = \"Operation was successful\"))\n     @DELETE\n-    @Path(\"{anyType}/{key}\")\n+    @Path(\"{key}\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    void delete(\n-            @NotNull @PathParam(\"anyType\") String anyType,\n-            @NotNull @PathParam(\"key\") String key);\n+    void delete(@NotNull @PathParam(\"key\") String key);\n }","previous_filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/WorkflowService.java"},{"sha":"701772dd62ade2edd545f00c8b3ccdabc2190516","filename":"ext/flowable/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/UserRequestService.java","status":"renamed","additions":40,"deletions":33,"changes":73,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserRequestService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -25,28 +25,58 @@\n import javax.validation.constraints.NotNull;\n import javax.ws.rs.BeanParam;\n import javax.ws.rs.Consumes;\n+import javax.ws.rs.DELETE;\n import javax.ws.rs.GET;\n import javax.ws.rs.POST;\n import javax.ws.rs.Path;\n import javax.ws.rs.PathParam;\n import javax.ws.rs.Produces;\n+import javax.ws.rs.QueryParam;\n import javax.ws.rs.core.MediaType;\n import org.apache.syncope.common.lib.to.PagedResult;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.syncope.common.rest.api.RESTHeaders;\n-import org.apache.syncope.common.rest.api.beans.WorkflowFormQuery;\n+import org.apache.syncope.common.rest.api.beans.UserRequestFormQuery;\n \n /**\n  * REST operations related to user workflow.\n  */\n-@Tag(name = \"UserWorkflow\")\n+@Tag(name = \"Flowable\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })\n-@Path(\"userworkflow\")\n-public interface UserWorkflowService extends JAXRSService {\n+@Path(\"flowable/userRequests\")\n+public interface UserRequestService extends JAXRSService {\n+\n+    /**\n+     * Starts a new user request, for the given BOMN Process and\n+     * user (if provided) or requesting user (if not provided).\n+     *\n+     * @param bpmnProcess BPMN process\n+     * @param userKey user key\n+     * @return data about the started request service, including execution id\n+     */\n+    @POST\n+    @Path(\"start/{bpmnProcess}\")\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    UserRequestTO start(\n+            @NotNull @PathParam(\"bpmnProcess\") String bpmnProcess,\n+            @QueryParam(\"userKey\") String userKey);\n+\n+    /**\n+     * Cancel a running user request.\n+     *\n+     * @param executionId execution id\n+     * @param reason reason to cancel the user request\n+     */\n+    @DELETE\n+    @Path(\"{executionId}\")\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    void cancel(\n+            @NotNull @PathParam(\"executionId\") String executionId,\n+            @QueryParam(\"reason\") String reason);\n \n     /**\n      * Returns a list of all available workflow forms.\n@@ -57,7 +87,7 @@ public interface UserWorkflowService extends JAXRSService {\n     @GET\n     @Path(\"forms\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    PagedResult<WorkflowFormTO> getForms(@BeanParam WorkflowFormQuery query);\n+    PagedResult<UserRequestForm> getForms(@BeanParam UserRequestFormQuery query);\n \n     /**\n      * Returns a list of available forms for the given user key.\n@@ -68,7 +98,7 @@ public interface UserWorkflowService extends JAXRSService {\n     @GET\n     @Path(\"forms/{userKey}\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    WorkflowFormTO getFormForUser(@NotNull @PathParam(\"userKey\") String userKey);\n+    List<UserRequestForm> getForms(@NotNull @PathParam(\"userKey\") String userKey);\n \n     /**\n      * Claims the form for the given task id.\n@@ -79,7 +109,7 @@ public interface UserWorkflowService extends JAXRSService {\n     @POST\n     @Path(\"forms/{taskId}/claim\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    WorkflowFormTO claimForm(@NotNull @PathParam(\"taskId\") String taskId);\n+    UserRequestForm claimForm(@NotNull @PathParam(\"taskId\") String taskId);\n \n     /**\n      * Submits a workflow form.\n@@ -91,28 +121,5 @@ public interface UserWorkflowService extends JAXRSService {\n     @Path(\"forms\")\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n     @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    UserTO submitForm(@NotNull WorkflowFormTO form);\n-\n-    /**\n-     * Returns a list of available tasks for the given user key.\n-     *\n-     * @param userKey user key\n-     * @return list of available tasks for the given user key\n-     */\n-    @GET\n-    @Path(\"tasks/{userKey}\")\n-    List<WorkflowTaskTO> getAvailableTasks(@NotNull @PathParam(\"userKey\") String userKey);\n-\n-    /**\n-     * Executes workflow task for matching id.\n-     *\n-     * @param taskId workflow task id\n-     * @param userTO argument to be passed to workflow task\n-     * @return updated user\n-     */\n-    @POST\n-    @Path(\"tasks/{taskId}/execute\")\n-    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n-    UserTO executeTask(@NotNull @PathParam(\"taskId\") String taskId, @NotNull UserTO userTO);\n+    UserTO submitForm(@NotNull UserRequestForm form);\n }","previous_filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/UserWorkflowService.java"},{"sha":"54f38d0d623d4c3560ae6b7f58a0bc46c2f6d8ad","filename":"ext/flowable/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/UserWorkflowTaskService.java","status":"added","additions":67,"deletions":0,"changes":67,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowTaskService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowTaskService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowTaskService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,67 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.rest.api.service;\n+\n+import io.swagger.v3.oas.annotations.security.SecurityRequirement;\n+import io.swagger.v3.oas.annotations.security.SecurityRequirements;\n+import io.swagger.v3.oas.annotations.tags.Tag;\n+import java.util.List;\n+import javax.validation.constraints.NotNull;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.common.rest.api.RESTHeaders;\n+\n+@Tag(name = \"Flowable\")\n+@SecurityRequirements({\n+    @SecurityRequirement(name = \"BasicAuthentication\"),\n+    @SecurityRequirement(name = \"Bearer\") })\n+@Path(\"flowable/userWorkflowTasks\")\n+public interface UserWorkflowTaskService extends JAXRSService {\n+\n+    /**\n+     * Returns a list of available tasks for the given user key.\n+     *\n+     * @param userKey user key\n+     * @return list of available tasks for the given user key\n+     */\n+    @GET\n+    @Path(\"tasks/{userKey}\")\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    List<WorkflowTask> getAvailableTasks(@NotNull @PathParam(\"userKey\") String userKey);\n+\n+    /**\n+     * Executes the next workflow task available, for matching user key.\n+     *\n+     * @param workflowTaskExecInput input for task execution\n+     * @return updated user\n+     */\n+    @POST\n+    @Path(\"tasks/{userKey}\")\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    UserTO executeNextTask(@NotNull WorkflowTaskExecInput workflowTaskExecInput);\n+}"},{"sha":"20b60c138307012c90518865f34768cfd53c1fe2","filename":"ext/flowable/rest-cxf/pom.xml","status":"added","additions":72,"deletions":0,"changes":72,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-cxf%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,72 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.apache.syncope.ext</groupId>\n+    <artifactId>syncope-ext-flowable</artifactId>\n+    <version>3.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <name>Apache Syncope Ext: Flowable REST CXF</name>\n+  <description>Apache Syncope Ext: Flowable REST CXF</description>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n+  <packaging>jar</packaging>\n+  \n+  <properties>\n+    <rootpom.basedir>${basedir}/../../..</rootpom.basedir>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.syncope.core</groupId>\n+      <artifactId>syncope-core-rest-cxf</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-rest-api</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-rest-api</artifactId>\n+      <version>${project.version}</version>\n+      <classifier>javadoc</classifier>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-logic</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-checkstyle-plugin</artifactId>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>"},{"sha":"dd1aea8b87213af97b0d300fb9c10d10d49a3352","filename":"ext/flowable/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/BpmnProcessServiceImpl.java","status":"renamed","additions":23,"deletions":24,"changes":47,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FBpmnProcessServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FBpmnProcessServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FBpmnProcessServiceImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,62 +22,61 @@\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import javax.ws.rs.core.StreamingOutput;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n+import org.apache.syncope.common.lib.types.BpmnProcessFormat;\n import org.apache.syncope.common.rest.api.RESTHeaders;\n-import org.apache.syncope.common.rest.api.service.WorkflowService;\n-import org.apache.syncope.core.logic.WorkflowLogic;\n-import org.apache.syncope.core.workflow.api.WorkflowDefinitionFormat;\n+import org.apache.syncope.core.logic.BpmnProcessLogic;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Service;\n+import org.apache.syncope.common.rest.api.service.BpmnProcessService;\n \n @Service\n-public class WorkflowServiceImpl extends AbstractServiceImpl implements WorkflowService {\n+public class BpmnProcessServiceImpl extends AbstractServiceImpl implements BpmnProcessService {\n \n     @Autowired\n-    private WorkflowLogic logic;\n+    private BpmnProcessLogic logic;\n \n     @Override\n-    public List<WorkflowDefinitionTO> list(final String anyType) {\n-        return logic.list(anyType);\n+    public List<BpmnProcessTO> list() {\n+        return logic.list();\n     }\n \n     @Override\n-    public Response get(final String anyType, final String key) {\n-        WorkflowDefinitionFormat format =\n+    public Response get(final String key) {\n+        BpmnProcessFormat format =\n                 messageContext.getHttpHeaders().getAcceptableMediaTypes().contains(MediaType.APPLICATION_JSON_TYPE)\n-                ? WorkflowDefinitionFormat.JSON\n-                : WorkflowDefinitionFormat.XML;\n+                ? BpmnProcessFormat.JSON\n+                : BpmnProcessFormat.XML;\n \n-        StreamingOutput sout = (os) -> logic.exportDefinition(anyType, key, format, os);\n+        StreamingOutput sout = os -> logic.exportDefinition(key, format, os);\n \n         return Response.ok(sout).\n-                type(format == WorkflowDefinitionFormat.JSON\n+                type(format == BpmnProcessFormat.JSON\n                         ? MediaType.APPLICATION_JSON_TYPE : MediaType.APPLICATION_XHTML_XML_TYPE).\n                 build();\n     }\n \n     @Override\n-    public Response exportDiagram(final String anyType, final String key) {\n-        StreamingOutput sout = (os) -> logic.exportDiagram(anyType, key, os);\n+    public Response exportDiagram(final String key) {\n+        StreamingOutput sout = (os) -> logic.exportDiagram(key, os);\n \n         return Response.ok(sout).\n                 type(RESTHeaders.MEDIATYPE_IMAGE_PNG).\n                 build();\n     }\n \n     @Override\n-    public void set(final String anyType, final String key, final String definition) {\n-        WorkflowDefinitionFormat format =\n+    public void set(final String key, final String definition) {\n+        BpmnProcessFormat format =\n                 messageContext.getHttpHeaders().getMediaType().equals(MediaType.APPLICATION_JSON_TYPE)\n-                ? WorkflowDefinitionFormat.JSON\n-                : WorkflowDefinitionFormat.XML;\n+                ? BpmnProcessFormat.JSON\n+                : BpmnProcessFormat.XML;\n \n-        logic.importDefinition(anyType, key, format, definition);\n+        logic.importDefinition(key, format, definition);\n     }\n \n     @Override\n-    public void delete(final String anyType, final String key) {\n-        logic.delete(anyType, key);\n+    public void delete(final String key) {\n+        logic.delete(key);\n     }\n-\n }","previous_filename":"core/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/WorkflowServiceImpl.java"},{"sha":"2f174a0065e68ee0ead314b0d3a584fdbf9968d9","filename":"ext/flowable/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/UserRequestServiceImpl.java","status":"renamed","additions":23,"deletions":20,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserRequestServiceImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -21,50 +21,53 @@\n import java.util.List;\n import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.to.PagedResult;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n-import org.apache.syncope.common.rest.api.beans.WorkflowFormQuery;\n-import org.apache.syncope.common.rest.api.service.UserWorkflowService;\n-import org.apache.syncope.core.logic.UserWorkflowLogic;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.rest.api.beans.UserRequestFormQuery;\n+import org.apache.syncope.core.logic.UserRequestLogic;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Service;\n+import org.apache.syncope.common.rest.api.service.UserRequestService;\n \n @Service\n-public class UserWorkflowServiceImpl extends AbstractServiceImpl implements UserWorkflowService {\n+public class UserRequestServiceImpl extends AbstractServiceImpl implements UserRequestService {\n \n     @Autowired\n-    private UserWorkflowLogic logic;\n+    private UserRequestLogic logic;\n \n     @Override\n-    public WorkflowFormTO claimForm(final String taskId) {\n-        return logic.claimForm(taskId);\n+    public UserRequestTO start(final String bpmnProcess, final String userKey) {\n+        return userKey == null\n+                ? logic.start(bpmnProcess)\n+                : logic.start(bpmnProcess, userKey);\n     }\n \n     @Override\n-    public UserTO executeTask(final String taskId, final UserTO userTO) {\n-        return logic.executeWorkflowTask(userTO, taskId);\n+    public void cancel(final String executionId, final String reason) {\n+        logic.cancel(executionId, reason);\n     }\n \n     @Override\n-    public WorkflowFormTO getFormForUser(final String userKey) {\n-        return logic.getFormForUser(userKey);\n+    public UserRequestForm claimForm(final String taskId) {\n+        return logic.claimForm(taskId);\n     }\n \n     @Override\n-    public PagedResult<WorkflowFormTO> getForms(final WorkflowFormQuery query) {\n-        Pair<Integer, List<WorkflowFormTO>> result = logic.getForms(\n-                query.getPage(), query.getSize(), getOrderByClauses(query.getOrderBy()));\n-        return buildPagedResult(result.getRight(), query.getPage(), query.getSize(), result.getLeft());\n+    public List<UserRequestForm> getForms(final String userKey) {\n+        return logic.getForms(userKey);\n     }\n \n     @Override\n-    public List<WorkflowTaskTO> getAvailableTasks(final String userKey) {\n-        return logic.getAvailableTasks(userKey);\n+    public PagedResult<UserRequestForm> getForms(final UserRequestFormQuery query) {\n+        Pair<Integer, List<UserRequestForm>> result = logic.getForms(\n+                query.getPage(), query.getSize(), getOrderByClauses(query.getOrderBy()));\n+        return buildPagedResult(result.getRight(), query.getPage(), query.getSize(), result.getLeft());\n     }\n \n     @Override\n-    public UserTO submitForm(final WorkflowFormTO form) {\n+    public UserTO submitForm(final UserRequestForm form) {\n         return logic.submitForm(form);\n     }\n+\n }","previous_filename":"core/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/UserWorkflowServiceImpl.java"},{"sha":"441973d29af0cf121d765b4f6e53af33922586b5","filename":"ext/flowable/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/UserWorkflowTaskServiceImpl.java","status":"added","additions":45,"deletions":0,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowTaskServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowTaskServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowTaskServiceImpl.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.rest.cxf.service;\n+\n+import java.util.List;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n+import org.apache.syncope.common.lib.to.WorkflowTaskExecInput;\n+import org.apache.syncope.core.logic.UserWorkflowTaskLogic;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+import org.apache.syncope.common.rest.api.service.UserWorkflowTaskService;\n+\n+@Service\n+public class UserWorkflowTaskServiceImpl extends AbstractServiceImpl implements UserWorkflowTaskService {\n+\n+    @Autowired\n+    private UserWorkflowTaskLogic logic;\n+\n+    @Override\n+    public List<WorkflowTask> getAvailableTasks(final String userKey) {\n+        return logic.getAvailableTasks(userKey);\n+    }\n+\n+    @Override\n+    public UserTO executeNextTask(final WorkflowTaskExecInput workflowTaskExecInput) {\n+        return logic.executeNextTask(workflowTaskExecInput);\n+    }\n+}"},{"sha":"66bb81216f71a5782d8e1e19412aadebe8068f11","filename":"ext/oidcclient/client-console/src/main/java/org/apache/syncope/client/console/pages/OIDCClient.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FOIDCClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FOIDCClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Foidcclient%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FOIDCClient.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,7 +32,8 @@\n import org.apache.wicket.model.ResourceModel;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n-@ExtPage(label = \"OIDC Client\", icon = \"fa-openid \", listEntitlement = OIDCClientEntitlement.OP_READ, priority = 200)\n+@ExtPage(label = \"OpenID Connect 1.0 Client\", icon = \"fa-openid \", \n+        listEntitlement = OIDCClientEntitlement.OP_READ, priority = 300)\n public class OIDCClient extends BaseExtPage {\n \n     private static final long serialVersionUID = -599601954212606001L;"},{"sha":"8ce5496998bfd4f07a9193ae120cf6ee4f451dc9","filename":"ext/oidcclient/persistence-jpa/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Fpersistence-jpa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Fpersistence-jpa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Foidcclient%2Fpersistence-jpa%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -117,7 +117,7 @@ under the License.\n             <inherited>true</inherited>\n             <executions>\n               <execution>\n-                <id>sqlgenr</id>\n+                <id>sqlgen</id>\n                 <phase>process-classes</phase>\n                 <goals>\n                   <goal>sql</goal>"},{"sha":"37851c5ea1fd030d75389600db125956720af0b9","filename":"ext/oidcclient/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/OIDCClientService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCClientService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCClientService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCClientService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -35,7 +35,7 @@\n /**\n  * REST operations for OpenID Connect Clients.\n  */\n-@Tag(name = \"OIDCClients\")\n+@Tag(name = \"OpenID Connect 1.0\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"be7c7be4b4bb459dc1567d82d76114705d602c3d","filename":"ext/oidcclient/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/OIDCProviderService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCProviderService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCProviderService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Foidcclient%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FOIDCProviderService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -47,7 +47,7 @@\n /**\n  * REST operations for OpenID Connect Providers.\n  */\n-@Tag(name = \"OIDCProviders\")\n+@Tag(name = \"OpenID Connect 1.0\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"0c0aaea3744ca28c02bf2692e946b2e230ea055a","filename":"ext/pom.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -77,6 +77,7 @@ under the License.\n   </profiles>\n   \n   <modules>\n+    <module>flowable</module>\n     <module>camel</module>\n     <module>swagger-ui</module>\n     <module>saml2sp</module>"},{"sha":"71ef8e56d2cd3a32d31f6d98bbb425a9a60ccc52","filename":"ext/saml2sp/client-console/src/main/java/org/apache/syncope/client/console/pages/SAML2SP.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSAML2SP.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSAML2SP.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSAML2SP.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,7 +33,7 @@\n import org.apache.wicket.model.ResourceModel;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n-@ExtPage(label = \"SAML 2.0 SP\", icon = \"fa-sign-in\", listEntitlement = SAML2SPEntitlement.IDP_READ, priority = 300)\n+@ExtPage(label = \"SAML 2.0 SP\", icon = \"fa-sign-in\", listEntitlement = SAML2SPEntitlement.IDP_READ, priority = 400)\n public class SAML2SP extends BaseExtPage {\n \n     private static final long serialVersionUID = -4837201407211278956L;"},{"sha":"196d731cb29d7cb739a9262011149b48e55cdfd3","filename":"ext/saml2sp/logic/src/main/java/org/apache/syncope/core/logic/init/SAML2SPLoader.java","status":"modified","additions":2,"deletions":5,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FSAML2SPLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FSAML2SPLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Finit%2FSAML2SPLoader.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -25,7 +25,6 @@\n import java.util.Properties;\n import net.shibboleth.utilities.java.support.resolver.CriteriaSet;\n import org.apache.commons.lang3.StringUtils;\n-import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.common.lib.PropertyUtils;\n import org.apache.syncope.core.persistence.api.SyncopeLoader;\n import org.apache.syncope.core.provisioning.api.EntitlementsHolder;\n@@ -95,9 +94,8 @@ public Integer getPriority() {\n     public void load() {\n         EntitlementsHolder.getInstance().init(SAML2SPEntitlement.values());\n \n-        Pair<Properties, String> init = PropertyUtils.read(getClass(), SAML2SP_LOGIC_PROPERTIES, \"conf.directory\");\n-        Properties props = init.getLeft();\n-        String confDirectory = init.getRight();\n+        Properties props = PropertyUtils.read(getClass(), SAML2SP_LOGIC_PROPERTIES, \"conf.directory\").getLeft();\n+        String confDirectory = props.getProperty(\"conf.directory\");\n \n         assertNotNull(confDirectory, \"<conf.directory>\");\n \n@@ -174,5 +172,4 @@ public Credential getCredential() {\n     public String getSignatureAlgorithm() {\n         return signatureAlgorithm;\n     }\n-\n }"},{"sha":"eb0aac18b86290943c062f803996953ff12102a2","filename":"ext/saml2sp/persistence-jpa/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Fpersistence-jpa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Fpersistence-jpa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Fpersistence-jpa%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -117,7 +117,7 @@ under the License.\n             <inherited>true</inherited>\n             <executions>\n               <execution>\n-                <id>sqlgenr</id>\n+                <id>sqlgen</id>\n                 <phase>process-classes</phase>\n                 <goals>\n                   <goal>sql</goal>"},{"sha":"a20a3b914131a2e93f2e74dc4b550dfefcd0f150","filename":"ext/saml2sp/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/SAML2IdPService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2IdPService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2IdPService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2IdPService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -46,7 +46,7 @@\n /**\n  * REST operations for SAML 2.0 Identity Providers.\n  */\n-@Tag(name = \"SAML2IdP\")\n+@Tag(name = \"SAML 2.0\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"2495fb196b7352c06edf3f9c0c85ca7986ba1edc","filename":"ext/saml2sp/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/SAML2SPService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2SPService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2SPService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSAML2SPService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -39,7 +39,7 @@\n /**\n  * REST operations for the provided SAML 2.0 Service Provider.\n  */\n-@Tag(name = \"SAML2SP\")\n+@Tag(name = \"SAML 2.0\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"917b07626a1a8f4945a24ad7910b982b452c1d20","filename":"ext/scimv2/client-console/src/main/java/org/apache/syncope/client/console/pages/SCIMConfPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fscimv2%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSCIMConfPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fscimv2%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSCIMConfPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fscimv2%2Fclient-console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FSCIMConfPage.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -37,7 +37,7 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-@ExtPage(label = \"SCIM 2.0\", icon = \"fa-cloud\", listEntitlement = SCIMEntitlement.SCIM_CONF_GET, priority = 100)\n+@ExtPage(label = \"SCIM 2.0\", icon = \"fa-cloud\", listEntitlement = SCIMEntitlement.SCIM_CONF_GET, priority = 500)\n public class SCIMConfPage extends BaseExtPage {\n \n     protected static final Logger LOG = LoggerFactory.getLogger(SCIMConfPage.class);"},{"sha":"6faca11091abe3e6499b722537ffdc3a6f687a60","filename":"ext/scimv2/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/SCIMConfService.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fscimv2%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSCIMConfService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/ext%2Fscimv2%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSCIMConfService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fscimv2%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FSCIMConfService.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -36,7 +36,7 @@\n /**\n  * REST operations for SCIM 2.0 configuration.\n  */\n-@Tag(name = \"SCIMConf\")\n+@Tag(name = \"SCIM 2.0\")\n @SecurityRequirements({\n     @SecurityRequirement(name = \"BasicAuthentication\"),\n     @SecurityRequirement(name = \"Bearer\") })"},{"sha":"ca8d1e1171f52ac3208a87e4976c82fa2961bb5f","filename":"fit/console-reference/pom.xml","status":"modified","additions":7,"deletions":58,"changes":65,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -57,6 +57,12 @@ under the License.\n       <version>${project.version}</version>\n     </dependency>\n \n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-client-console</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n     <dependency>\n       <groupId>org.apache.syncope.ext.camel</groupId>\n       <artifactId>syncope-ext-camel-client-console</artifactId>\n@@ -122,12 +128,6 @@ under the License.\n       <artifactId>h2</artifactId>\n       <scope>test</scope>\n     </dependency>\n-    <dependency>\n-      <groupId>org.flowable</groupId>\n-      <artifactId>flowable-ui-modeler-app</artifactId>\n-      <type>war</type>\n-      <scope>test</scope>\n-    </dependency>\n     <dependency>\n       <groupId>org.apache.syncope.fit</groupId>\n       <artifactId>syncope-fit-build-tools</artifactId>\n@@ -145,58 +145,7 @@ under the License.\n   </dependencies>\n \n   <build>\n-    <plugins>\n-      \n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-antrun-plugin</artifactId>\n-        <inherited>true</inherited>\n-        <executions>\n-          <execution>\n-            <id>setupFlowableModeler</id>\n-            <phase>process-resources</phase>\n-            <configuration>\n-              <target>\n-                <unzip src=\"${settings.localRepository}/org/flowable/flowable-ui-modeler-app/${flowable.version}/flowable-ui-modeler-app-${flowable.version}.war\" dest=\"${flowable-modeler.directory}\">\n-                  <patternset>\n-                    <include name=\"WEB-INF/classes/static/**\" />\n-                    <include name=\"WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\" />\n-                  </patternset>\n-                </unzip>\n-                \n-                <unzip src=\"${flowable-modeler.directory}/WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\" dest=\"${flowable-modeler.directory}\">\n-                  <patternset>\n-                    <include name=\"stencilset_bpmn.json\" />\n-                  </patternset>\n-                </unzip>\n-                \n-                <move todir=\"${flowable-modeler.directory}\">\n-                  <fileset dir=\"${flowable-modeler.directory}/WEB-INF/classes/static/\">\n-                    <include name=\"**\" />\n-                  </fileset>\n-                </move>\n-                <delete dir=\"${flowable-modeler.directory}/WEB-INF\" />\n-                \n-                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;/head&gt;\" value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\" />\n-                <replace file=\"${flowable-modeler.directory}/index.html\" token=\" ng-click=&quot;backToLanding()&quot;\" value=\" disabled=&quot;disabled&quot;\" />\n-                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot;\" value=\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot; style=&quot;display: none;&quot;\" />\n-                <replace file=\"${flowable-modeler.directory}/index.html\" token=\"&lt;div class=&quot;pull-right\" value=\"&lt;div style=&quot;display: none;&quot; class=&quot;pull-right\" />\n-                <replace file=\"${flowable-modeler.directory}/editor-app/editor.html\" token=\"&lt;div class=&quot;btn-group pull-right&quot;\" value=\"&lt;div style=&quot;display: none;&quot; class=&quot;btn-group pull-right&quot;\" />\n-                <replace file=\"${flowable-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\" token=\"$location.path('/processes');\" value=\"window.close();\" />\n- \n-                <copy file=\"${basedir}/src/main/resources/app-cfg.js\" todir=\"${flowable-modeler.directory}/scripts\" overwrite=\"true\" />\n-                <copy file=\"${basedir}/src/main/resources/url-config.js\" todir=\"${flowable-modeler.directory}/editor-app/configuration\" overwrite=\"true\" />\n-                <copy file=\"${basedir}/src/main/resources/toolbar.js\" todir=\"${flowable-modeler.directory}/editor-app/configuration\" overwrite=\"true\" />\n-                <copy file=\"${basedir}/src/main/resources/save-model.html\" todir=\"${flowable-modeler.directory}/editor-app/popups\" overwrite=\"true\" />\n-              </target>\n-            </configuration>\n-            <goals>\n-              <goal>run</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-      \n+    <plugins>      \n       <plugin>\n         <groupId>org.codehaus.cargo</groupId>\n         <artifactId>cargo-maven2-plugin</artifactId>"},{"sha":"484a331953b5d5b8c4b4d9fa7bc9fe5f5b14b932","filename":"fit/console-reference/src/main/resources/console.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,15 +33,12 @@ maxWaitTimeOnApplyChanges=30\n \n csrf=true\n \n-flowableModelerDirectory=${flowable-modeler.directory}\n-\n reconciliationReportKey=c3520ad9-179f-49e7-b315-d684d216dd97\n \n page.dashboard=org.apache.syncope.client.console.pages.Dashboard\n page.realms=org.apache.syncope.client.console.pages.Realms\n page.topology=org.apache.syncope.client.console.topology.Topology\n page.reports=org.apache.syncope.client.console.pages.Reports\n-page.workflow=org.apache.syncope.client.console.pages.Workflow\n page.audit=org.apache.syncope.client.console.pages.Audit\n page.implementations=org.apache.syncope.client.console.pages.Implementations\n page.logs=org.apache.syncope.client.console.pages.Logs"},{"sha":"56ea8cce139f46b0b496666d3f435888f2cf72f7","filename":"fit/console-reference/src/test/resources/hotswap-agent.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,6 +22,7 @@ autoHotswap=true\n extraClasspath=\\\n ${basedir}/../../client/console/target/classes/org,\\\n ${basedir}/../../ext/camel/client-console/target/classes/org,\\\n+${basedir}/../../ext/flowable/client-console/target/classes/org,\\\n ${basedir}/../../ext/saml2sp/client-console/target/classes/org,\\\n ${basedir}/../../ext/scimv2/client-console/target/classes/org,\\\n ${basedir}/../../ext/oidcclient/client-console/target/classes/org"},{"sha":"c89241e6a6e60deb9ed5948b1383a24a13af6a75","filename":"fit/core-reference/pom.xml","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fpom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -137,6 +137,18 @@ under the License.\n       <version>${project.version}</version>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n+      <version>${project.version}</version>\n+      <scope>test</scope>          \n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.syncope.ext.flowable</groupId>\n+      <artifactId>syncope-ext-flowable-client-console</artifactId>\n+      <version>${project.version}</version>\n+      <scope>test</scope>\n+    </dependency>  \n     <dependency>\n       <groupId>org.apache.syncope.ext.camel</groupId>\n       <artifactId>syncope-ext-camel-rest-cxf</artifactId>\n@@ -1466,8 +1478,8 @@ under the License.\n       \n       <dependencies>\n         <dependency>\n-          <groupId>org.apache.syncope.core</groupId>\n-          <artifactId>syncope-core-workflow-flowable</artifactId>\n+          <groupId>org.apache.syncope.ext.flowable</groupId>\n+          <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n           <version>${project.version}</version>\n         </dependency>\n "},{"sha":"abdfcb6c9115bb19b2ceeeb496b11708dfd3279a","filename":"fit/core-reference/src/main/java/org/apache/syncope/fit/core/reference/AssignDirectorGroup.java","status":"added","additions":63,"deletions":0,"changes":63,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FAssignDirectorGroup.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FAssignDirectorGroup.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FAssignDirectorGroup.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,63 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.core.reference;\n+\n+import org.apache.syncope.common.lib.patch.MembershipPatch;\n+import org.apache.syncope.common.lib.patch.UserPatch;\n+import org.apache.syncope.core.flowable.impl.FlowableRuntimeUtils;\n+import org.apache.syncope.core.flowable.task.AbstractFlowableServiceTask;\n+import org.apache.syncope.core.persistence.api.dao.UserDAO;\n+import org.apache.syncope.core.persistence.api.entity.user.User;\n+import org.apache.syncope.core.provisioning.api.PropagationByResource;\n+import org.apache.syncope.core.provisioning.api.data.UserDataBinder;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+public class AssignDirectorGroup extends AbstractFlowableServiceTask {\n+\n+    @Autowired\n+    private UserDataBinder dataBinder;\n+\n+    @Autowired\n+    private UserDAO userDAO;\n+\n+    @Override\n+    protected void doExecute(final String executionId) {\n+        User user = engine.getRuntimeService().\n+                getVariable(executionId, FlowableRuntimeUtils.USER, User.class);\n+\n+        Boolean secondLevelApprove = engine.getRuntimeService().\n+                getVariable(executionId, \"secondLevelApprove\", Boolean.class);\n+        if (Boolean.TRUE.equals(secondLevelApprove)) {\n+            user = userDAO.save(user);\n+\n+            UserPatch userPatch = new UserPatch();\n+            userPatch.setKey(user.getKey());\n+            userPatch.getMemberships().add(new MembershipPatch.Builder().\n+                    group(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").build());\n+\n+            PropagationByResource propByRes = dataBinder.update(user, userPatch);\n+\n+            // report updated user and propagation by resource as result\n+            engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.USER, user);\n+            engine.getRuntimeService().setVariable(executionId, FlowableRuntimeUtils.PROP_BY_RESOURCE, propByRes);\n+        } else {\n+            LOG.info(\"Second level was not approved, not assigning the director group to \" + user.getUsername());\n+        }\n+    }\n+}"},{"sha":"be8a7bb4e3cae045cb1726bb640f66c57f2ad8f8","filename":"fit/core-reference/src/main/resources/all/workflow.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -16,6 +16,6 @@\n # under the License.\n wf.directory=${conf.directory}\n historyLevel=activity\n-uwfAdapter=org.apache.syncope.core.workflow.flowable.FlowableUserWorkflowAdapter\n+uwfAdapter=org.apache.syncope.core.flowable.impl.FlowableUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter\n awfAdapter=org.apache.syncope.core.workflow.java.DefaultAnyObjectWorkflowAdapter"},{"sha":"2329c53437daa97cac7ce72349f6b798c7249bba","filename":"fit/core-reference/src/main/resources/all/workflowTestContext.xml","status":"added","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2FworkflowTestContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2FworkflowTestContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2FworkflowTestContext.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\" \n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+  <bean id=\"assignDirectorGroup\" class=\"org.apache.syncope.fit.core.reference.AssignDirectorGroup\"/>\n+\n+</beans>"},{"sha":"fd482b5abcf31603390d2869233a70c934c56142","filename":"fit/core-reference/src/main/resources/directorGroupRequest.bpmn20.xml","status":"added","additions":104,"deletions":0,"changes":104,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FdirectorGroupRequest.bpmn20.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FdirectorGroupRequest.bpmn20.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FdirectorGroupRequest.bpmn20.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,104 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" \n+             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n+             xmlns:flowable=\"http://flowable.org/bpmn\"\n+             xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" \n+             xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" \n+             xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" \n+             typeLanguage=\"http://www.w3.org/2001/XMLSchema\" \n+             expressionLanguage=\"http://www.w3.org/1999/XPath\" \n+             targetNamespace=\"http://www.flowable.org/processdef\">\n+\n+  <process id=\"directorGroupRequest\" name=\"Assign director group\" isExecutable=\"true\">\n+    <startEvent id=\"startevent1\" name=\"Start\"/>\n+    <endEvent id=\"endevent1\" name=\"End\"/>\n+    <userTask id=\"firstApproval\" name=\"First approval\" flowable:formKey=\"firstApproval\" flowable:candidateGroups=\"managingDirector\">\n+      <extensionElements>\n+        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${userTO.username}\" writable=\"false\"/>\n+        <flowable:formProperty id=\"firstLevelApprove\" name=\"Approve?\" type=\"boolean\" variable=\"firstLevelApprove\" required=\"true\"/>\n+        <flowable:formProperty id=\"rejectReason\" name=\"Reason for rejecting\" type=\"string\" variable=\"rejectReason\"/>\n+      </extensionElements>\n+    </userTask>\n+    <userTask id=\"secondApproval\" name=\"Second approval\" flowable:formKey=\"secondApproval\" flowable:candidateGroups=\"root\">\n+      <extensionElements>\n+        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${userTO.username}\" writable=\"false\"/>\n+        <flowable:formProperty id=\"secondLevelApprove\" name=\"Approve?\" type=\"boolean\" variable=\"secondLevelApprove\" required=\"true\"/>\n+        <flowable:formProperty id=\"rejectReason\" name=\"Reason for rejecting\" type=\"string\" variable=\"rejectReason\"/>\n+      </extensionElements>\n+    </userTask>\n+    <serviceTask id=\"assignDirectorGroup\" name=\"Assign director group\" flowable:expression=\"#{assignDirectorGroup.execute(execution.processInstanceId)}\"/>\n+    <exclusiveGateway id=\"sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\" default=\"sid-338A4B20-89E9-46B2-8AB3-36291455051B\"/>\n+    <sequenceFlow id=\"sid-A7C20EB5-AAE6-4CF3-A151-F1A9FA9207A0\" sourceRef=\"firstApproval\" targetRef=\"sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\"/>\n+    <sequenceFlow id=\"sid-92E7D60C-09E7-465A-8115-C60ACD06E955\" sourceRef=\"secondApproval\" targetRef=\"assignDirectorGroup\"/>\n+    <sequenceFlow id=\"sid-90AAE913-A229-4136-8C1D-AB5A78ACE209\" sourceRef=\"assignDirectorGroup\" targetRef=\"endevent1\"/>\n+    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"firstApproval\"/>\n+    <sequenceFlow id=\"sid-338A4B20-89E9-46B2-8AB3-36291455051B\" sourceRef=\"sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\" targetRef=\"secondApproval\"/>\n+    <sequenceFlow id=\"sid-D43EBA31-49F5-4305-B71D-122E98D1DE22\" sourceRef=\"sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\" targetRef=\"endevent1\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${!firstLevelApprove}]]></conditionExpression>\n+    </sequenceFlow>\n+  </process>\n+  <bpmndi:BPMNDiagram id=\"BPMNDiagram_directorGroupRequest\">\n+    <bpmndi:BPMNPlane bpmnElement=\"directorGroupRequest\" id=\"BPMNPlane_directorGroupRequest\">\n+      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n+        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"180.0\" y=\"130.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n+        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"711.0\" y=\"131.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"firstApproval\" id=\"BPMNShape_firstApproval\">\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"300.0\" y=\"105.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"secondApproval\" id=\"BPMNShape_secondApproval\">\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"480.0\" y=\"235.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"assignDirectorGroup\" id=\"BPMNShape_assignDirectorGroup\">\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"675.0\" y=\"235.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\" id=\"BPMNShape_sid-1E2454BD-FAE9-4A15-B169-D41843A39C15\">\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"510.0\" y=\"125.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n+        <omgdi:waypoint x=\"209.94999837389875\" y=\"145.0\"/>\n+        <omgdi:waypoint x=\"300.0\" y=\"145.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-338A4B20-89E9-46B2-8AB3-36291455051B\" id=\"BPMNEdge_sid-338A4B20-89E9-46B2-8AB3-36291455051B\">\n+        <omgdi:waypoint x=\"530.4263565891473\" y=\"164.51605344694036\"/>\n+        <omgdi:waypoint x=\"530.1542471042471\" y=\"235.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-90AAE913-A229-4136-8C1D-AB5A78ACE209\" id=\"BPMNEdge_sid-90AAE913-A229-4136-8C1D-AB5A78ACE209\">\n+        <omgdi:waypoint x=\"725.0\" y=\"235.0\"/>\n+        <omgdi:waypoint x=\"725.0\" y=\"158.9499300542635\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-92E7D60C-09E7-465A-8115-C60ACD06E955\" id=\"BPMNEdge_sid-92E7D60C-09E7-465A-8115-C60ACD06E955\">\n+        <omgdi:waypoint x=\"579.9499999997585\" y=\"275.0\"/>\n+        <omgdi:waypoint x=\"674.9999999998254\" y=\"275.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-D43EBA31-49F5-4305-B71D-122E98D1DE22\" id=\"BPMNEdge_sid-D43EBA31-49F5-4305-B71D-122E98D1DE22\">\n+        <omgdi:waypoint x=\"549.49393353939\" y=\"145.45103092783506\"/>\n+        <omgdi:waypoint x=\"711.0000424606164\" y=\"145.03586113839918\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-A7C20EB5-AAE6-4CF3-A151-F1A9FA9207A0\" id=\"BPMNEdge_sid-A7C20EB5-AAE6-4CF3-A151-F1A9FA9207A0\">\n+        <omgdi:waypoint x=\"399.9499999999431\" y=\"145.0\"/>\n+        <omgdi:waypoint x=\"510.0\" y=\"145.0\"/>\n+      </bpmndi:BPMNEdge>\n+    </bpmndi:BPMNPlane>\n+  </bpmndi:BPMNDiagram>\n+</definitions>\n\\ No newline at end of file"},{"sha":"295dacf244c8cd8ca8556e6a1232e5e6caa89e74","filename":"fit/core-reference/src/main/resources/userWorkflow.bpmn20.xml","status":"modified","additions":361,"deletions":365,"changes":726,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2FuserWorkflow.bpmn20.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,26 +32,14 @@ under the License.\n     <sequenceFlow id=\"flow1\" sourceRef=\"theStart\" targetRef=\"create\"/>\n     <serviceTask id=\"create\" name=\"Create\" flowable:expression=\"#{create.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow2\" sourceRef=\"create\" targetRef=\"createGW\"/>\n-    <exclusiveGateway id=\"createGW\"/>\n-    <sequenceFlow id=\"createAsAnonymous2Approval\" sourceRef=\"createGW\" targetRef=\"createApproval\">\n-      <conditionExpression xsi:type=\"tFormalExpression\">\n-        <![CDATA[${wfExecutor == 'anonymous' || flowableUtils.isUserIngroup(user, 'groupForWorkflowApproval')}]]>\n-      </conditionExpression>\n-    </sequenceFlow>\n-    <sequenceFlow id=\"create2Activate\" sourceRef=\"createGW\" targetRef=\"enableGW\">\n-      <conditionExpression xsi:type=\"tFormalExpression\">\n-        <![CDATA[${!flowableUtils.isUserIngroup(user, 'groupForWorkflowApproval')}]]>\n-      </conditionExpression>\n-    </sequenceFlow>\n-    <userTask id=\"createApproval\" name=\"Create approval\"\n-              flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"createApproval\">\n+    <exclusiveGateway id=\"createGW\" default=\"create2Activate\"/>\n+    <userTask id=\"createApproval\" name=\"Create approval\" flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"createApproval\">\n       <extensionElements>\n-        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${user.username}\" writable=\"false\"/>\n+        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${userTO.username}\" writable=\"false\"/>\n         <flowable:formProperty id=\"approveCreate\" name=\"Approve?\" type=\"boolean\" variable=\"approveCreate\" required=\"true\"/>\n         <flowable:formProperty id=\"rejectReason\" name=\"Reason for rejecting\" type=\"string\" variable=\"rejectReason\"/>\n       </extensionElements>\n     </userTask>\n-    <sequenceFlow id=\"flow3\" sourceRef=\"createApproval\" targetRef=\"CreateApprovalEvaluation\"/>\n     <scriptTask id=\"CreateApprovalEvaluation\" name=\"Create approval evaluation\" scriptFormat=\"groovy\" flowable:autoStoreVariables=\"false\">\n       <script><![CDATA[\n try {\n@@ -68,33 +56,23 @@ try {\n   } catch(Exception te) {\n     execution.setVariable(\"task\", null);\n   }\n+} finally {\n+  execution.removeVariable(\"approveCreate\");\n+  execution.removeVariable(\"rejectReason\");\n }]]></script>\n     </scriptTask>\n-    <sequenceFlow id=\"sid-56E7041A-748A-4C71-ABF3-7DCA0BEC8991\" sourceRef=\"CreateApprovalEvaluation\" targetRef=\"createApprovalGW\"/>\n     <exclusiveGateway id=\"createApprovalGW\" default=\"sid-76B82B68-099D-4729-B8CF-D028386FE900\"/>\n-    <sequenceFlow id=\"sid-76B82B68-099D-4729-B8CF-D028386FE900\" sourceRef=\"createApprovalGW\" targetRef=\"createApproval\"/>\n-    <sequenceFlow id=\"createApprovalGW2EnableGW\" sourceRef=\"createApprovalGW\" targetRef=\"enableGW\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'approve'}]]></conditionExpression>\n-    </sequenceFlow>\n-    <sequenceFlow id=\"createApproval2Reject\" sourceRef=\"createApprovalGW\" targetRef=\"reject\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'reject'}]]></conditionExpression>\n-    </sequenceFlow>\n-    <sequenceFlow id=\"sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\" sourceRef=\"createApprovalGW\" targetRef=\"rejectedGw\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'delete'}]]></conditionExpression>\n-    </sequenceFlow>\n     <exclusiveGateway id=\"enableGW\"/>\n-    <sequenceFlow id=\"createApprovalGW2OptIn\" sourceRef=\"enableGW\" targetRef=\"generateToken\">\n-      <conditionExpression xsi:type=\"tFormalExpression\">\n-        <![CDATA[${flowableUtils.isUserIngroup(user, 'groupForWorkflowOptIn')}]]>\n-      </conditionExpression>\n+    <sequenceFlow id=\"enableGW2GenerateToken\" sourceRef=\"enableGW\" targetRef=\"generateToken\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flowableUtils.isUserIngroup(userTO, 'groupForWorkflowOptIn')}]]></conditionExpression>\n     </sequenceFlow>\n-    <sequenceFlow id=\"createApprovalGW2Activate\" sourceRef=\"enableGW\" targetRef=\"activate\">\n+    <sequenceFlow id=\"enableGW2Activate\" sourceRef=\"enableGW\" targetRef=\"activate\">\n       <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${enabled == null}]]></conditionExpression>\n     </sequenceFlow>\n-    <sequenceFlow id=\"createApprovalGW2Active\" sourceRef=\"enableGW\" targetRef=\"active\">\n+    <sequenceFlow id=\"enableGW2Active\" sourceRef=\"enableGW\" targetRef=\"active\">\n       <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${enabled}]]></conditionExpression>\n     </sequenceFlow>\n-    <sequenceFlow id=\"createApprovalGW2Suspended\" sourceRef=\"enableGW\" targetRef=\"suspend\">\n+    <sequenceFlow id=\"enableGW2Suspended\" sourceRef=\"enableGW\" targetRef=\"suspend\">\n       <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${!enabled}]]></conditionExpression>\n     </sequenceFlow>\n     <serviceTask id=\"activate\" name=\"Activate\" flowable:expression=\"#{autoActivate.execute(execution.processInstanceId)}\"/>\n@@ -112,7 +90,7 @@ try {\n     </sequenceFlow>\n     <scriptTask id=\"removeToken\" name=\"Remove Token and Activate\" scriptFormat=\"groovy\" flowable:autoStoreVariables=\"false\">\n       <script><![CDATA[\n-        user.removeToken()    \n+        user.removeToken()\n       ]]></script>\n     </scriptTask>\n     <sequenceFlow id=\"flow7\" sourceRef=\"removeToken\" targetRef=\"active\"/>\n@@ -141,15 +119,13 @@ try {\n     <sequenceFlow id=\"active2ConfirmPasswordReset\" sourceRef=\"activeGw\" targetRef=\"checkToken4ConfirmPasswordReset\">\n       <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'confirmPasswordReset'}]]></conditionExpression>\n     </sequenceFlow>\n-    <userTask id=\"updateApproval\" name=\"Update approval\"\n-              flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"updateApproval\">\n+    <userTask id=\"updateApproval\" name=\"Update approval\" flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"updateApproval\">\n       <extensionElements>\n-        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${user.username}\" writable=\"false\"/>\n+        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${userTO.username}\" writable=\"false\"/>\n         <flowable:formProperty id=\"approveUpdate\" name=\"Approve?\" type=\"boolean\" variable=\"approveUpdate\" required=\"true\"/>\n         <flowable:formProperty id=\"rejectReason\" name=\"Reason for rejecting\" type=\"string\" variable=\"rejectReason\"/>\n       </extensionElements>\n     </userTask>\n-    <sequenceFlow id=\"sid-A2BDF803-688C-4A4D-9D33-6D859C029245\" sourceRef=\"updateApproval\" targetRef=\"UpdateApprovalEvaluation\"/>\n     <scriptTask id=\"UpdateApprovalEvaluation\" name=\"Update approval evaluation\" scriptFormat=\"groovy\" flowable:autoStoreVariables=\"false\">\n       <script><![CDATA[\n try {\n@@ -166,9 +142,11 @@ try {\n   } catch(Exception te) {\n     execution.setVariable(\"task\", null);\n   }\n+} finally {\n+  execution.removeVariable(\"approveUpdate\");\n+  execution.removeVariable(\"rejectReason\");\n }]]></script>\n     </scriptTask>\n-    <sequenceFlow id=\"sid-53FA7F29-CE60-4AE6-921D-AF7331CDB19F\" sourceRef=\"UpdateApprovalEvaluation\" targetRef=\"updateApprovalGW\"/>\n     <exclusiveGateway id=\"updateApprovalGW\" default=\"sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\"/>\n     <sequenceFlow id=\"sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\" sourceRef=\"updateApprovalGW\" targetRef=\"updateApproval\"/>\n     <sequenceFlow id=\"updateApprovalGW2Update\" sourceRef=\"updateApprovalGW\" targetRef=\"update\">\n@@ -188,28 +166,6 @@ try {\n     <sequenceFlow id=\"flow8ter\" sourceRef=\"rejectUpdate\" targetRef=\"active\"/>\n     <serviceTask id=\"update\" name=\"Update\" flowable:expression=\"#{update.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow9\" sourceRef=\"update\" targetRef=\"active\"/>\n-    <userTask id=\"recertificationRequest\" name=\"Recertification Request\"\n-              flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"recertify\">\n-      <extensionElements>\n-        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${user.username}\" writable=\"false\"/>\n-        <flowable:formProperty id=\"approve\" name=\"Recertify?\" type=\"boolean\" required=\"true\"/>\n-        <flowable:formProperty id=\"rejectReason\" name=\"Reason for not recertifying\" type=\"string\" variable=\"rejectReason\"/>\n-      </extensionElements>\n-    </userTask>\n-    <sequenceFlow id=\"recert-flow1\" sourceRef=\"recertificationRequest\" targetRef=\"recertify-task\"/>\n-    <serviceTask id=\"recertify-task\" name=\"Recertify\" flowable:expression=\"#{recertify.execute(execution.processInstanceId)}\"/>\n-    <sequenceFlow id=\"recert-request-start-flow\" sourceRef=\"activeGw\" targetRef=\"recertificationRequest\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'request-certify'}]]></conditionExpression>\n-    </sequenceFlow>\n-    <exclusiveGateway id=\"recert-condition\"/>\n-    <sequenceFlow id=\"recert-flow2\" sourceRef=\"recertify-task\" targetRef=\"recert-condition\"/>\n-    <sequenceFlow id=\"recert-approved-flow\" sourceRef=\"recert-condition\" targetRef=\"active\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${approve}]]></conditionExpression>\n-    </sequenceFlow>\n-    <sequenceFlow id=\"recert-denied-flow\" sourceRef=\"recert-condition\" targetRef=\"suspend\">\n-      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${!approve}]]></conditionExpression>\n-    </sequenceFlow>\n-    <!-- End Recertification flow -->\n     <serviceTask id=\"suspend\" name=\"Suspend\" flowable:expression=\"#{suspend.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow10\" sourceRef=\"suspend\" targetRef=\"suspended\"/>\n     <userTask id=\"suspended\" name=\"Suspended\"/>\n@@ -225,11 +181,11 @@ try {\n     <sequenceFlow id=\"flow12\" sourceRef=\"reactivate\" targetRef=\"active\"/>\n     <scriptTask id=\"reject\" name=\"Reject\" scriptFormat=\"groovy\" flowable:autoStoreVariables=\"false\">\n       <script><![CDATA[\n-        def scriptVar = rejectReason\n-        execution.setVariable(\"propByResource\", null);\n+        execution.removeVariable(\"userTO\");\n+        execution.removeVariable(\"encryptedPwd\");\n+        execution.removeVariable(\"propByResource\");\n       ]]></script>\n     </scriptTask>\n-    <sequenceFlow id=\"flow13\" sourceRef=\"reject\" targetRef=\"rejected\"/>\n     <userTask id=\"rejected\" name=\"Rejected\"/>\n     <sequenceFlow id=\"flow14\" sourceRef=\"rejected\" targetRef=\"rejectedGw\"/>\n     <exclusiveGateway id=\"rejectedGw\"/>\n@@ -239,10 +195,9 @@ try {\n     <sequenceFlow id=\"rejected2Rejected\" sourceRef=\"rejectedGw\" targetRef=\"rejected\">\n       <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${empty task}]]></conditionExpression>\n     </sequenceFlow>\n-    <userTask id=\"deleteApproval\" name=\"Delete approval\"\n-              flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"deleteApproval\">\n+    <userTask id=\"deleteApproval\" name=\"Delete approval\" flowable:candidateGroups=\"managingDirector\" flowable:formKey=\"deleteApproval\">\n       <extensionElements>\n-        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${user.username}\" writable=\"false\"/>\n+        <flowable:formProperty id=\"username\" name=\"Username\" type=\"string\" expression=\"${userTO.username}\" writable=\"false\"/>\n         <flowable:formProperty id=\"approveDelete\" name=\"Approve?\" type=\"boolean\" variable=\"approveDelete\" required=\"true\"/>\n         <flowable:formProperty id=\"rejectReason\" name=\"Reason for rejecting\" type=\"string\" variable=\"rejectReason\"/>\n       </extensionElements>\n@@ -272,434 +227,475 @@ try {\n     <serviceTask id=\"delete\" name=\"Delete\" flowable:expression=\"#{delete.execute(execution.processInstanceId)}\"/>\n     <sequenceFlow id=\"flow99\" sourceRef=\"delete\" targetRef=\"theEnd\"/>\n     <endEvent id=\"theEnd\"/>\n+    <serviceTask id=\"updateWhilePendingCreateApproval\" name=\"Update\" flowable:expression=\"#{update.execute(execution.processInstanceId)}\"/>\n+    <sequenceFlow id=\"sid-76B82B68-099D-4729-B8CF-D028386FE900\" sourceRef=\"createApprovalGW\" targetRef=\"createApproval\"/>\n+    <sequenceFlow id=\"sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\" sourceRef=\"createApprovalGW\" targetRef=\"rejectedGw\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'delete'}]]></conditionExpression>\n+    </sequenceFlow>\n+    <exclusiveGateway id=\"sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\" default=\"flow3\"/>\n+    <sequenceFlow id=\"flow13\" sourceRef=\"reject\" targetRef=\"rejected\"/>\n+    <sequenceFlow id=\"createApprovalGW2EnableGW\" sourceRef=\"createApprovalGW\" targetRef=\"enableGW\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'approve'}]]></conditionExpression>\n+    </sequenceFlow>\n+    <sequenceFlow id=\"createApproval2Reject\" sourceRef=\"createApprovalGW\" targetRef=\"reject\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'reject'}]]></conditionExpression>\n+    </sequenceFlow>\n+    <sequenceFlow id=\"create2Activate\" sourceRef=\"createGW\" targetRef=\"enableGW\"/>\n+    <sequenceFlow id=\"flow3\" sourceRef=\"sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\" targetRef=\"CreateApprovalEvaluation\"/>\n+    <sequenceFlow id=\"sid-56E7041A-748A-4C71-ABF3-7DCA0BEC8991\" sourceRef=\"CreateApprovalEvaluation\" targetRef=\"createApprovalGW\"/>\n+    <sequenceFlow id=\"createAsAnonymous2Approval\" sourceRef=\"createGW\" targetRef=\"createApproval\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${wfExecutor == 'anonymous' || flowableUtils.isUserIngroup(userTO, 'groupForWorkflowApproval')}]]></conditionExpression>\n+    </sequenceFlow>\n+    <serviceTask id=\"updateWhilePendingUpdateApproval\" name=\"Update\" flowable:expression=\"#{update.execute(execution.processInstanceId)}\"/>\n+    <exclusiveGateway id=\"sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\" default=\"sid-12E29B94-C369-45C1-BCEF-C165AFDA525A\"/>\n+    <sequenceFlow id=\"sid-930DADF1-C361-43DD-A240-582F21DEB9B6\" sourceRef=\"createApproval\" targetRef=\"sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\"/>\n+    <sequenceFlow id=\"sid-A2BDF803-688C-4A4D-9D33-6D859C029245\" sourceRef=\"updateApproval\" targetRef=\"sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\"/>\n+    <sequenceFlow id=\"sid-66CDB1C4-7C2F-4BAE-9834-84CF0CF52BF3\" sourceRef=\"sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\" targetRef=\"updateWhilePendingUpdateApproval\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'update'}]]></conditionExpression>\n+    </sequenceFlow>\n+    <sequenceFlow id=\"sid-C9FA59AF-4F39-489E-B424-5C06B15AE317\" sourceRef=\"sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\" targetRef=\"updateWhilePendingCreateApproval\">\n+      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${task == 'update'}]]></conditionExpression>\n+    </sequenceFlow>\n+    <sequenceFlow id=\"sid-F746E78F-F59B-4842-9D88-C9C79474FC06\" sourceRef=\"updateWhilePendingCreateApproval\" targetRef=\"createApproval\"/>\n+    <sequenceFlow id=\"sid-1D0DA593-85D7-412B-8DA3-79DC0CE00E1D\" sourceRef=\"updateWhilePendingUpdateApproval\" targetRef=\"updateApproval\"/>\n+    <sequenceFlow id=\"sid-12E29B94-C369-45C1-BCEF-C165AFDA525A\" sourceRef=\"sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\" targetRef=\"UpdateApprovalEvaluation\"/>\n+    <sequenceFlow id=\"sid-53FA7F29-CE60-4AE6-921D-AF7331CDB19F\" sourceRef=\"UpdateApprovalEvaluation\" targetRef=\"updateApprovalGW\"/>\n   </process>\n   <bpmndi:BPMNDiagram id=\"BPMNDiagram_userWorkflow\">\n     <bpmndi:BPMNPlane bpmnElement=\"userWorkflow\" id=\"BPMNPlane_userWorkflow\">\n       <bpmndi:BPMNShape bpmnElement=\"theStart\" id=\"BPMNShape_theStart\">\n-        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"333.0\" y=\"252.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"333.0\" y=\"252.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"create\" id=\"BPMNShape_create\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"300.0\" y=\"323.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"300.0\" y=\"323.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"createGW\" id=\"BPMNShape_createGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"330.0\" y=\"507.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"330.0\" y=\"507.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"createApproval\" id=\"BPMNShape_createApproval\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"420.0\" y=\"560.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"420.0\" y=\"560.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"CreateApprovalEvaluation\" id=\"BPMNShape_CreateApprovalEvaluation\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"420.0\" y=\"732.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"477.5\" y=\"765.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"createApprovalGW\" id=\"BPMNShape_createApprovalGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"570.0\" y=\"570.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"570.0\" y=\"570.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"enableGW\" id=\"BPMNShape_enableGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"690.0\" y=\"429.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"690.0\" y=\"429.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"activate\" id=\"BPMNShape_activate\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"610.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"610.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"generateToken\" id=\"BPMNShape_generateToken\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"213.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"213.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"created\" id=\"BPMNShape_created\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"952.0\" y=\"213.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"952.0\" y=\"213.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"optinGW\" id=\"BPMNShape_optinGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1102.0\" y=\"223.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1102.0\" y=\"223.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"removeToken\" id=\"BPMNShape_removeToken\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1180.0\" y=\"213.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1180.0\" y=\"213.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"active\" id=\"BPMNShape_active\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1130.0\" y=\"511.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1130.0\" y=\"511.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"activeGw\" id=\"BPMNShape_activeGw\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1500.0\" y=\"520.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1500.0\" y=\"520.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"updateApproval\" id=\"BPMNShape_updateApproval\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1590.0\" y=\"740.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1605.0\" y=\"740.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"UpdateApprovalEvaluation\" id=\"BPMNShape_UpdateApprovalEvaluation\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"1590.0\" y=\"824.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"1740.0\" y=\"855.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"updateApprovalGW\" id=\"BPMNShape_updateApprovalGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1770.0\" y=\"750.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1770.0\" y=\"750.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"rejectUpdate\" id=\"BPMNShape_rejectUpdate\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"840.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"840.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"update\" id=\"BPMNShape_update\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"700.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recertificationRequest\" id=\"BPMNShape_recertificationRequest\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"1964.0\" y=\"499.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recertify-task\" id=\"BPMNShape_recertify-task\">\n-        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"2106.0\" y=\"500.0\"></omgdc:Bounds>\n-      </bpmndi:BPMNShape>\n-      <bpmndi:BPMNShape bpmnElement=\"recert-condition\" id=\"BPMNShape_recert-condition\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"2136.0\" y=\"410.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"700.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspend\" id=\"BPMNShape_suspend\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1590.0\" y=\"100.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1590.0\" y=\"100.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspended\" id=\"BPMNShape_suspended\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1740.0\" y=\"120.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1740.0\" y=\"120.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"suspendedGw\" id=\"BPMNShape_suspendedGw\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1920.0\" y=\"180.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1920.0\" y=\"180.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"reactivate\" id=\"BPMNShape_reactivate\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"2040.0\" y=\"110.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"2040.0\" y=\"110.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"reject\" id=\"BPMNShape_reject\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"660.0\" y=\"659.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"660.0\" y=\"659.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"rejected\" id=\"BPMNShape_rejected\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"770.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"810.0\" y=\"770.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"rejectedGw\" id=\"BPMNShape_rejectedGw\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"990.0\" y=\"780.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"990.0\" y=\"780.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"deleteApproval\" id=\"BPMNShape_deleteApproval\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1590.0\" y=\"280.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1590.0\" y=\"280.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"deleteApprovalGW\" id=\"BPMNShape_deleteApprovalGW\">\n-        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1770.0\" y=\"300.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1770.0\" y=\"300.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"rejectDelete\" id=\"BPMNShape_rejectDelete\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"240.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1890.0\" y=\"240.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"generateToken4PasswordReset\" id=\"BPMNShape_generateToken4PasswordReset\">\n-        <omgdc:Bounds height=\"59.0\" width=\"100.0\" x=\"1643.0\" y=\"452.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"59.0\" width=\"100.0\" x=\"1643.0\" y=\"452.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"notify4RequestPasswordReset\" id=\"BPMNShape_notify4RequestPasswordReset\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1848.0\" y=\"452.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1848.0\" y=\"452.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"checkToken4ConfirmPasswordReset\" id=\"BPMNShape_checkToken4ConfirmPasswordReset\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1643.0\" y=\"561.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1643.0\" y=\"561.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"notify4ConfirmPasswordReset\" id=\"BPMNShape_notify4ConfirmPasswordReset\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1848.0\" y=\"561.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1848.0\" y=\"561.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"delete\" id=\"BPMNShape_delete\">\n-        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"2220.0\" y=\"358.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"2220.0\" y=\"358.0\"/>\n       </bpmndi:BPMNShape>\n       <bpmndi:BPMNShape bpmnElement=\"theEnd\" id=\"BPMNShape_theEnd\">\n-        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"2358.0\" y=\"374.0\"></omgdc:Bounds>\n+        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"2358.0\" y=\"374.0\"/>\n       </bpmndi:BPMNShape>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n-        <omgdi:waypoint x=\"350.0\" y=\"287.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"350.0\" y=\"323.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNShape bpmnElement=\"updateWhilePendingCreateApproval\" id=\"BPMNShape_updateWhilePendingCreateApproval\">\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"362.5\" y=\"770.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\" id=\"BPMNShape_sid-8CFA3152-19AA-4878-AD2C-96B63F6E98C7\">\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"450.0\" y=\"660.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"updateWhilePendingUpdateApproval\" id=\"BPMNShape_updateWhilePendingUpdateApproval\">\n+        <omgdc:Bounds height=\"60.0\" width=\"100.0\" x=\"1455.0\" y=\"865.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNShape bpmnElement=\"sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\" id=\"BPMNShape_sid-4C9C9117-26DB-4326-A12B-EEDA42EADF07\">\n+        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1635.0\" y=\"875.0\"/>\n+      </bpmndi:BPMNShape>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2Update\" id=\"BPMNEdge_active2Update\">\n+        <omgdi:waypoint x=\"1539.9223684210267\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1556.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1556.0\" y=\"730.0\"/>\n+        <omgdi:waypoint x=\"1889.999999999701\" y=\"730.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n-        <omgdi:waypoint x=\"350.0\" y=\"383.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"350.0\" y=\"507.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-1D0DA593-85D7-412B-8DA3-79DC0CE00E1D\" id=\"BPMNEdge_sid-1D0DA593-85D7-412B-8DA3-79DC0CE00E1D\">\n+        <omgdi:waypoint x=\"1540.94\" y=\"865.0\"/>\n+        <omgdi:waypoint x=\"1619.0\" y=\"799.9499999999999\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createAsAnonymous2Approval\" id=\"BPMNEdge_createAsAnonymous2Approval\">\n-        <omgdi:waypoint x=\"370.0\" y=\"527.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"382.0\" y=\"527.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"382.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"420.0\" y=\"590.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2ConfirmPasswordReset\" id=\"BPMNEdge_active2ConfirmPasswordReset\">\n+        <omgdi:waypoint x=\"1539.9442374350085\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1693.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1693.0\" y=\"561.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"create2Activate\" id=\"BPMNEdge_create2Activate\">\n-        <omgdi:waypoint x=\"370.0\" y=\"527.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"382.0\" y=\"527.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"382.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"690.0\" y=\"449.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-76B82B68-099D-4729-B8CF-D028386FE900\" id=\"BPMNEdge_sid-76B82B68-099D-4729-B8CF-D028386FE900\">\n+        <omgdi:waypoint x=\"570.0\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"519.9499999997392\" y=\"590.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n-        <omgdi:waypoint x=\"470.0\" y=\"620.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"470.0\" y=\"732.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-930DADF1-C361-43DD-A240-582F21DEB9B6\" id=\"BPMNEdge_sid-930DADF1-C361-43DD-A240-582F21DEB9B6\">\n+        <omgdi:waypoint x=\"470.0\" y=\"619.9499999999999\"/>\n+        <omgdi:waypoint x=\"470.0\" y=\"660.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"rejected2Rejected\" id=\"BPMNEdge_rejected2Rejected\">\n+        <omgdi:waypoint x=\"990.0\" y=\"800.0\"/>\n+        <omgdi:waypoint x=\"909.9499999999135\" y=\"800.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"sid-56E7041A-748A-4C71-ABF3-7DCA0BEC8991\" id=\"BPMNEdge_sid-56E7041A-748A-4C71-ABF3-7DCA0BEC8991\">\n-        <omgdi:waypoint x=\"470.0\" y=\"732.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"590.0\" y=\"610.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"577.4499999999488\" y=\"805.0\"/>\n+        <omgdi:waypoint x=\"590.0\" y=\"805.0\"/>\n+        <omgdi:waypoint x=\"590.0\" y=\"609.9046184271755\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-76B82B68-099D-4729-B8CF-D028386FE900\" id=\"BPMNEdge_sid-76B82B68-099D-4729-B8CF-D028386FE900\">\n-        <omgdi:waypoint x=\"570.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"520.0\" y=\"590.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2Delete\" id=\"BPMNEdge_active2Delete\">\n+        <omgdi:waypoint x=\"1539.9189252336448\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1552.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1552.0\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"2174.0\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"2260.1369863013697\" y=\"417.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2EnableGW\" id=\"BPMNEdge_createApprovalGW2EnableGW\">\n-        <omgdi:waypoint x=\"610.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"622.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"622.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"690.0\" y=\"449.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"enableGW2GenerateToken\" id=\"BPMNEdge_enableGW2GenerateToken\">\n+        <omgdi:waypoint x=\"729.9433544302707\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"860.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"860.0\" y=\"272.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApproval2Reject\" id=\"BPMNEdge_createApproval2Reject\">\n-        <omgdi:waypoint x=\"610.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"622.0\" y=\"590.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"622.0\" y=\"689.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"660.0\" y=\"689.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n+        <omgdi:waypoint x=\"348.3475822648328\" y=\"281.94584310464063\"/>\n+        <omgdi:waypoint x=\"349.30232558139534\" y=\"323.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\" id=\"BPMNEdge_sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\">\n-        <omgdi:waypoint x=\"590.0\" y=\"610.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"590.0\" y=\"859.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1010.0\" y=\"859.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1010.0\" y=\"820.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2OptIn\" id=\"BPMNEdge_createApprovalGW2OptIn\">\n-        <omgdi:waypoint x=\"730.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"860.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"860.0\" y=\"273.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2Activate\" id=\"BPMNEdge_createApprovalGW2Activate\">\n-        <omgdi:waypoint x=\"730.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"640.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"810.0\" y=\"640.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2Active\" id=\"BPMNEdge_createApprovalGW2Active\">\n-        <omgdi:waypoint x=\"730.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"861.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"861.0\" y=\"541.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1130.0\" y=\"541.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2Suspended\" id=\"BPMNEdge_createApprovalGW2Suspended\">\n-        <omgdi:waypoint x=\"730.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"449.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"130.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1590.0\" y=\"130.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n+        <omgdi:waypoint x=\"350.0\" y=\"382.95\"/>\n+        <omgdi:waypoint x=\"350.0\" y=\"507.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n+        <omgdi:waypoint x=\"489.93253064798597\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"527.0\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"527.34\" y=\"765.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n-        <omgdi:waypoint x=\"910.0\" y=\"640.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"922.0\" y=\"640.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1059.0\" y=\"640.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"571.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"909.9499999998994\" y=\"640.0\"/>\n+        <omgdi:waypoint x=\"922.0\" y=\"640.0\"/>\n+        <omgdi:waypoint x=\"1059.0\" y=\"640.0\"/>\n+        <omgdi:waypoint x=\"1143.3333333333333\" y=\"570.95\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"updateApprovalGW2Update\" id=\"BPMNEdge_updateApprovalGW2Update\">\n+        <omgdi:waypoint x=\"1809.9339371980675\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"730.0\"/>\n+        <omgdi:waypoint x=\"1890.0\" y=\"730.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n-        <omgdi:waypoint x=\"910.0\" y=\"243.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"952.0\" y=\"243.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"909.9499999999393\" y=\"243.0\"/>\n+        <omgdi:waypoint x=\"952.0\" y=\"243.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n-        <omgdi:waypoint x=\"1002.0\" y=\"273.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1002.0\" y=\"310.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1122.0\" y=\"310.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1122.0\" y=\"263.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"created2Activate\" id=\"BPMNEdge_created2Activate\">\n-        <omgdi:waypoint x=\"1142.0\" y=\"243.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"243.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"created2Created\" id=\"BPMNEdge_created2Created\">\n-        <omgdi:waypoint x=\"1102.0\" y=\"243.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1052.0\" y=\"243.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1002.0\" y=\"272.95\"/>\n+        <omgdi:waypoint x=\"1002.0\" y=\"310.0\"/>\n+        <omgdi:waypoint x=\"1122.0\" y=\"310.0\"/>\n+        <omgdi:waypoint x=\"1122.0\" y=\"262.9148355754858\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n-        <omgdi:waypoint x=\"1230.0\" y=\"273.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"511.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1224.96644295302\" y=\"272.95\"/>\n+        <omgdi:waypoint x=\"1185.025167785235\" y=\"511.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n-        <omgdi:waypoint x=\"1230.0\" y=\"541.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1500.0\" y=\"540.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-66CDB1C4-7C2F-4BAE-9834-84CF0CF52BF3\" id=\"BPMNEdge_sid-66CDB1C4-7C2F-4BAE-9834-84CF0CF52BF3\">\n+        <omgdi:waypoint x=\"1635.4333333333334\" y=\"895.4333333333334\"/>\n+        <omgdi:waypoint x=\"1554.9499999999264\" y=\"895.1659468438539\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2UpdateApproval\" id=\"BPMNEdge_active2UpdateApproval\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1554.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1554.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1590.0\" y=\"770.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n+        <omgdi:waypoint x=\"1229.9499999999914\" y=\"540.8529411764707\"/>\n+        <omgdi:waypoint x=\"1500.0586510263724\" y=\"540.058504398827\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2DeleteApproval\" id=\"BPMNEdge_active2DeleteApproval\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1554.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1554.0\" y=\"310.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1590.0\" y=\"310.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2Suspend\" id=\"BPMNEdge_active2Suspend\">\n+        <omgdi:waypoint x=\"1539.9189252336448\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1552.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1552.0\" y=\"130.0\"/>\n+        <omgdi:waypoint x=\"1589.9999999999768\" y=\"130.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2Update\" id=\"BPMNEdge_active2Update\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1556.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1556.0\" y=\"730.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1890.0\" y=\"730.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n+        <omgdi:waypoint x=\"1989.95\" y=\"730.0\"/>\n+        <omgdi:waypoint x=\"2037.0\" y=\"730.0\"/>\n+        <omgdi:waypoint x=\"2037.0\" y=\"971.0\"/>\n+        <omgdi:waypoint x=\"1334.0\" y=\"971.0\"/>\n+        <omgdi:waypoint x=\"1180.0\" y=\"844.0\"/>\n+        <omgdi:waypoint x=\"1180.0\" y=\"570.95\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"enableGW2Active\" id=\"BPMNEdge_enableGW2Active\">\n+        <omgdi:waypoint x=\"729.9433984115534\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"861.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"861.0\" y=\"541.0\"/>\n+        <omgdi:waypoint x=\"1130.0\" y=\"541.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2Suspend\" id=\"BPMNEdge_active2Suspend\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1552.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1552.0\" y=\"130.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1590.0\" y=\"130.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2UpdateApproval\" id=\"BPMNEdge_active2UpdateApproval\">\n+        <omgdi:waypoint x=\"1539.9207478005092\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1554.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1554.0\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1605.0\" y=\"770.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2Delete\" id=\"BPMNEdge_active2Delete\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1552.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1552.0\" y=\"680.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2174.0\" y=\"680.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"418.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-B5FFEBCA-1FBF-457F-BC55-39FD387188B2\" id=\"BPMNEdge_sid-B5FFEBCA-1FBF-457F-BC55-39FD387188B2\">\n+        <omgdi:waypoint x=\"1790.0\" y=\"789.9304794520548\"/>\n+        <omgdi:waypoint x=\"1790.0\" y=\"821.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"821.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"417.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2RequestPasswordReset\" id=\"BPMNEdge_active2RequestPasswordReset\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1693.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1693.0\" y=\"511.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"deleteApprovalGW2Delete\" id=\"BPMNEdge_deleteApprovalGW2Delete\">\n+        <omgdi:waypoint x=\"1809.9339371980677\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"388.0\"/>\n+        <omgdi:waypoint x=\"2220.0\" y=\"388.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"active2ConfirmPasswordReset\" id=\"BPMNEdge_active2ConfirmPasswordReset\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1693.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1693.0\" y=\"561.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"createAsAnonymous2Approval\" id=\"BPMNEdge_createAsAnonymous2Approval\">\n+        <omgdi:waypoint x=\"369.91892523364487\" y=\"527.0\"/>\n+        <omgdi:waypoint x=\"382.0\" y=\"527.0\"/>\n+        <omgdi:waypoint x=\"382.0\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"420.0\" y=\"590.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-A2BDF803-688C-4A4D-9D33-6D859C029245\" id=\"BPMNEdge_sid-A2BDF803-688C-4A4D-9D33-6D859C029245\">\n-        <omgdi:waypoint x=\"1640.0\" y=\"800.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1640.0\" y=\"824.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"createApproval2Reject\" id=\"BPMNEdge_createApproval2Reject\">\n+        <omgdi:waypoint x=\"609.9189252336447\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"622.0\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"622.0\" y=\"689.0\"/>\n+        <omgdi:waypoint x=\"660.0\" y=\"689.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"sid-53FA7F29-CE60-4AE6-921D-AF7331CDB19F\" id=\"BPMNEdge_sid-53FA7F29-CE60-4AE6-921D-AF7331CDB19F\">\n-        <omgdi:waypoint x=\"1640.0\" y=\"824.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1790.0\" y=\"790.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\" id=\"BPMNEdge_sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\">\n-        <omgdi:waypoint x=\"1770.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1690.0\" y=\"770.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1790.0\" y=\"855.0\"/>\n+        <omgdi:waypoint x=\"1790.0\" y=\"789.9079463570856\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"updateApprovalGW2Update\" id=\"BPMNEdge_updateApprovalGW2Update\">\n-        <omgdi:waypoint x=\"1810.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"730.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1890.0\" y=\"730.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"rejected2Delete\" id=\"BPMNEdge_rejected2Delete\">\n+        <omgdi:waypoint x=\"1029.9339371980675\" y=\"800.0\"/>\n+        <omgdi:waypoint x=\"1072.0\" y=\"800.0\"/>\n+        <omgdi:waypoint x=\"1323.0\" y=\"1000.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"1000.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"417.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"updateApprovalGW2Reject\" id=\"BPMNEdge_updateApprovalGW2Reject\">\n-        <omgdi:waypoint x=\"1810.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"870.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1890.0\" y=\"870.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-F746E78F-F59B-4842-9D88-C9C79474FC06\" id=\"BPMNEdge_sid-F746E78F-F59B-4842-9D88-C9C79474FC06\">\n+        <omgdi:waypoint x=\"400.83333333333337\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"367.0\" y=\"683.0\"/>\n+        <omgdi:waypoint x=\"436.7741935483871\" y=\"619.9499999999999\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"sid-B5FFEBCA-1FBF-457F-BC55-39FD387188B2\" id=\"BPMNEdge_sid-B5FFEBCA-1FBF-457F-BC55-39FD387188B2\">\n-        <omgdi:waypoint x=\"1790.0\" y=\"790.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1790.0\" y=\"821.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"821.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"418.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow14ter\" id=\"BPMNEdge_flow14ter\">\n+        <omgdi:waypoint x=\"1889.9999999999998\" y=\"260.7451923076923\"/>\n+        <omgdi:waypoint x=\"1524.0\" y=\"193.0\"/>\n+        <omgdi:waypoint x=\"1209.6057471264367\" y=\"511.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow8ter\" id=\"BPMNEdge_flow8ter\">\n-        <omgdi:waypoint x=\"1940.0\" y=\"900.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1940.0\" y=\"924.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1338.0\" y=\"924.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1214.0\" y=\"837.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"571.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"suspended2Delete\" id=\"BPMNEdge_suspended2Delete\">\n+        <omgdi:waypoint x=\"1959.9469781884277\" y=\"200.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"200.0\"/>\n+        <omgdi:waypoint x=\"2270.0\" y=\"358.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n-        <omgdi:waypoint x=\"1990.0\" y=\"730.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2037.0\" y=\"730.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2037.0\" y=\"946.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1336.0\" y=\"946.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"844.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"571.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-flow1\" id=\"BPMNEdge_recert-flow1\">\n-        <omgdi:waypoint x=\"2064.0\" y=\"539.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2106.0\" y=\"540.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-request-start-flow\" id=\"BPMNEdge_recert-request-start-flow\">\n-        <omgdi:waypoint x=\"1540.0\" y=\"540.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1964.0\" y=\"539.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-flow2\" id=\"BPMNEdge_recert-flow2\">\n-        <omgdi:waypoint x=\"2156.0\" y=\"500.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2156.0\" y=\"450.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-approved-flow\" id=\"BPMNEdge_recert-approved-flow\">\n-        <omgdi:waypoint x=\"2156.0\" y=\"410.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1593.0\" y=\"365.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"511.0\"></omgdi:waypoint>\n-      </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"recert-denied-flow\" id=\"BPMNEdge_recert-denied-flow\">\n-        <omgdi:waypoint x=\"2156.0\" y=\"410.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2156.0\" y=\"53.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1640.0\" y=\"53.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1640.0\" y=\"100.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"deleteApprovalGW2Reject\" id=\"BPMNEdge_deleteApprovalGW2Reject\">\n+        <omgdi:waypoint x=\"1809.9339371980677\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"270.0\"/>\n+        <omgdi:waypoint x=\"1889.9999999999768\" y=\"270.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n-        <omgdi:waypoint x=\"1690.0\" y=\"130.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1702.0\" y=\"130.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1702.0\" y=\"150.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1740.0\" y=\"150.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"createApprovalGW2EnableGW\" id=\"BPMNEdge_createApprovalGW2EnableGW\">\n+        <omgdi:waypoint x=\"609.9189252336447\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"622.0\" y=\"590.0\"/>\n+        <omgdi:waypoint x=\"622.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"690.0\" y=\"449.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n-        <omgdi:waypoint x=\"1840.0\" y=\"150.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"150.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"200.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1920.0\" y=\"200.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"created2Created\" id=\"BPMNEdge_created2Created\">\n+        <omgdi:waypoint x=\"1102.0\" y=\"243.0\"/>\n+        <omgdi:waypoint x=\"1051.95\" y=\"243.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"suspended2Reactivate\" id=\"BPMNEdge_suspended2Reactivate\">\n-        <omgdi:waypoint x=\"1960.0\" y=\"200.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2002.0\" y=\"200.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2002.0\" y=\"140.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2040.0\" y=\"140.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1959.9339371980413\" y=\"200.0\"/>\n+        <omgdi:waypoint x=\"2002.0\" y=\"200.0\"/>\n+        <omgdi:waypoint x=\"2002.0\" y=\"140.0\"/>\n+        <omgdi:waypoint x=\"2039.999999999977\" y=\"140.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"suspended2Delete\" id=\"BPMNEdge_suspended2Delete\">\n-        <omgdi:waypoint x=\"1960.0\" y=\"200.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"200.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"358.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2DeleteApproval\" id=\"BPMNEdge_active2DeleteApproval\">\n+        <omgdi:waypoint x=\"1539.9207478005092\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1554.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1554.0\" y=\"310.0\"/>\n+        <omgdi:waypoint x=\"1590.0\" y=\"310.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n-        <omgdi:waypoint x=\"2040.0\" y=\"140.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2028.0\" y=\"127.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1478.0\" y=\"40.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"511.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow17\" id=\"BPMNEdge_flow17\">\n+        <omgdi:waypoint x=\"1742.95\" y=\"591.0\"/>\n+        <omgdi:waypoint x=\"1848.0\" y=\"591.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n+        <omgdi:waypoint x=\"1847.9999999999998\" y=\"619.3716000000001\"/>\n+        <omgdi:waypoint x=\"1773.0\" y=\"662.0\"/>\n+        <omgdi:waypoint x=\"1229.9499999999998\" y=\"551.1921585160202\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-A2BDF803-688C-4A4D-9D33-6D859C029245\" id=\"BPMNEdge_sid-A2BDF803-688C-4A4D-9D33-6D859C029245\">\n+        <omgdi:waypoint x=\"1655.1193227091633\" y=\"799.9499999999999\"/>\n+        <omgdi:waypoint x=\"1655.42\" y=\"875.42\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow13\" id=\"BPMNEdge_flow13\">\n-        <omgdi:waypoint x=\"760.0\" y=\"689.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"689.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"772.0\" y=\"800.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"810.0\" y=\"800.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"759.9499999998994\" y=\"689.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"689.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"800.0\"/>\n+        <omgdi:waypoint x=\"810.0\" y=\"800.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow14\" id=\"BPMNEdge_flow14\">\n-        <omgdi:waypoint x=\"860.0\" y=\"770.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"860.0\" y=\"732.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1010.0\" y=\"732.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1010.0\" y=\"780.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"860.0\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"860.0\" y=\"732.0\"/>\n+        <omgdi:waypoint x=\"1010.0\" y=\"732.0\"/>\n+        <omgdi:waypoint x=\"1010.0\" y=\"780.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"rejected2Delete\" id=\"BPMNEdge_rejected2Delete\">\n-        <omgdi:waypoint x=\"1030.0\" y=\"800.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1072.0\" y=\"800.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1323.0\" y=\"1000.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"1000.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2270.0\" y=\"418.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow15\" id=\"BPMNEdge_flow15\">\n+        <omgdi:waypoint x=\"1742.95\" y=\"481.62182926829274\"/>\n+        <omgdi:waypoint x=\"1847.9999999999989\" y=\"481.8780487804878\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"rejected2Rejected\" id=\"BPMNEdge_rejected2Rejected\">\n-        <omgdi:waypoint x=\"990.0\" y=\"800.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"910.0\" y=\"800.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\" id=\"BPMNEdge_sid-B2EEC511-2924-4A95-B0B8-E35DA268DD58\">\n+        <omgdi:waypoint x=\"590.0\" y=\"609.9462931995539\"/>\n+        <omgdi:waypoint x=\"590.0\" y=\"859.0\"/>\n+        <omgdi:waypoint x=\"1010.0\" y=\"859.0\"/>\n+        <omgdi:waypoint x=\"1010.0\" y=\"819.9168505942274\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"updateApprovalGW2Reject\" id=\"BPMNEdge_updateApprovalGW2Reject\">\n+        <omgdi:waypoint x=\"1809.9339371980675\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"870.0\"/>\n+        <omgdi:waypoint x=\"1890.0\" y=\"870.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow16\" id=\"BPMNEdge_flow16\">\n+        <omgdi:waypoint x=\"1848.0\" y=\"458.94174757281553\"/>\n+        <omgdi:waypoint x=\"1692.0\" y=\"387.0\"/>\n+        <omgdi:waypoint x=\"1229.9499999999998\" y=\"525.9609375\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-C9FA59AF-4F39-489E-B424-5C06B15AE317\" id=\"BPMNEdge_sid-C9FA59AF-4F39-489E-B424-5C06B15AE317\">\n+        <omgdi:waypoint x=\"450.0\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"412.0\" y=\"680.0\"/>\n+        <omgdi:waypoint x=\"412.375\" y=\"770.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"enableGW2Suspended\" id=\"BPMNEdge_enableGW2Suspended\">\n+        <omgdi:waypoint x=\"729.9339371980061\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"130.0\"/>\n+        <omgdi:waypoint x=\"1590.0\" y=\"130.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow14bis\" id=\"BPMNEdge_flow14bis\">\n-        <omgdi:waypoint x=\"1690.0\" y=\"310.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1702.0\" y=\"310.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1702.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1770.0\" y=\"320.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"1689.949999999984\" y=\"310.0\"/>\n+        <omgdi:waypoint x=\"1702.0\" y=\"310.0\"/>\n+        <omgdi:waypoint x=\"1702.0\" y=\"320.0\"/>\n+        <omgdi:waypoint x=\"1770.0\" y=\"320.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"deleteApprovalGW2Delete\" id=\"BPMNEdge_deleteApprovalGW2Delete\">\n-        <omgdi:waypoint x=\"1810.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"388.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2220.0\" y=\"388.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"enableGW2Activate\" id=\"BPMNEdge_enableGW2Activate\">\n+        <omgdi:waypoint x=\"729.9339371980061\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"772.0\" y=\"640.0\"/>\n+        <omgdi:waypoint x=\"810.0\" y=\"640.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"deleteApprovalGW2Reject\" id=\"BPMNEdge_deleteApprovalGW2Reject\">\n-        <omgdi:waypoint x=\"1810.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"320.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1852.0\" y=\"270.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1890.0\" y=\"270.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"created2Activate\" id=\"BPMNEdge_created2Activate\">\n+        <omgdi:waypoint x=\"1141.9407724328892\" y=\"243.0\"/>\n+        <omgdi:waypoint x=\"1180.0\" y=\"243.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow14ter\" id=\"BPMNEdge_flow14ter\">\n-        <omgdi:waypoint x=\"1940.0\" y=\"240.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1524.0\" y=\"193.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"511.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-12E29B94-C369-45C1-BCEF-C165AFDA525A\" id=\"BPMNEdge_sid-12E29B94-C369-45C1-BCEF-C165AFDA525A\">\n+        <omgdi:waypoint x=\"1674.5135906040268\" y=\"895.429104477612\"/>\n+        <omgdi:waypoint x=\"1740.0\" y=\"895.185687732342\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow15\" id=\"BPMNEdge_flow15\">\n-        <omgdi:waypoint x=\"1743.0\" y=\"481.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1848.0\" y=\"482.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\" id=\"BPMNEdge_sid-E58BBC2D-8831-4CF2-A798-14B258FE569B\">\n+        <omgdi:waypoint x=\"1770.0\" y=\"770.0\"/>\n+        <omgdi:waypoint x=\"1704.95\" y=\"770.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow16\" id=\"BPMNEdge_flow16\">\n-        <omgdi:waypoint x=\"1898.0\" y=\"452.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1692.0\" y=\"387.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"511.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"create2Activate\" id=\"BPMNEdge_create2Activate\">\n+        <omgdi:waypoint x=\"369.91892523364487\" y=\"527.0\"/>\n+        <omgdi:waypoint x=\"382.0\" y=\"527.0\"/>\n+        <omgdi:waypoint x=\"382.0\" y=\"449.0\"/>\n+        <omgdi:waypoint x=\"690.0\" y=\"449.0\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow17\" id=\"BPMNEdge_flow17\">\n-        <omgdi:waypoint x=\"1743.0\" y=\"591.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1848.0\" y=\"591.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"active2RequestPasswordReset\" id=\"BPMNEdge_active2RequestPasswordReset\">\n+        <omgdi:waypoint x=\"1539.9442374350085\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1693.0\" y=\"540.0\"/>\n+        <omgdi:waypoint x=\"1693.0\" y=\"510.95\"/>\n       </bpmndi:BPMNEdge>\n-      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n-        <omgdi:waypoint x=\"1898.0\" y=\"621.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1773.0\" y=\"662.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"1180.0\" y=\"571.0\"></omgdi:waypoint>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n+        <omgdi:waypoint x=\"1689.95\" y=\"130.0\"/>\n+        <omgdi:waypoint x=\"1702.0\" y=\"130.0\"/>\n+        <omgdi:waypoint x=\"1702.0\" y=\"150.0\"/>\n+        <omgdi:waypoint x=\"1739.9999999999768\" y=\"150.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n+        <omgdi:waypoint x=\"1839.9499999999837\" y=\"150.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"150.0\"/>\n+        <omgdi:waypoint x=\"1852.0\" y=\"200.0\"/>\n+        <omgdi:waypoint x=\"1920.0\" y=\"200.0\"/>\n       </bpmndi:BPMNEdge>\n       <bpmndi:BPMNEdge bpmnElement=\"flow99\" id=\"BPMNEdge_flow99\">\n-        <omgdi:waypoint x=\"2320.0\" y=\"388.0\"></omgdi:waypoint>\n-        <omgdi:waypoint x=\"2358.0\" y=\"391.0\"></omgdi:waypoint>\n+        <omgdi:waypoint x=\"2319.9499999999875\" y=\"388.0\"/>\n+        <omgdi:waypoint x=\"2358.0\" y=\"388.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n+        <omgdi:waypoint x=\"2040.0\" y=\"129.51612903225808\"/>\n+        <omgdi:waypoint x=\"2028.0\" y=\"127.0\"/>\n+        <omgdi:waypoint x=\"1478.0\" y=\"40.0\"/>\n+        <omgdi:waypoint x=\"1197.8145708582833\" y=\"511.0\"/>\n+      </bpmndi:BPMNEdge>\n+      <bpmndi:BPMNEdge bpmnElement=\"flow8ter\" id=\"BPMNEdge_flow8ter\">\n+        <omgdi:waypoint x=\"1940.0\" y=\"899.9499999999999\"/>\n+        <omgdi:waypoint x=\"1940.0\" y=\"948.0\"/>\n+        <omgdi:waypoint x=\"1339.0\" y=\"948.0\"/>\n+        <omgdi:waypoint x=\"1214.0\" y=\"837.0\"/>\n+        <omgdi:waypoint x=\"1183.4402027027027\" y=\"570.95\"/>\n       </bpmndi:BPMNEdge>\n     </bpmndi:BPMNPlane>\n   </bpmndi:BPMNDiagram>\n-</definitions>\n\\ No newline at end of file\n+</definitions>"},{"sha":"ee5d8e1390459c33afe976321e04df85e7fee8bc","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/AbstractITCase.java","status":"modified","additions":10,"deletions":6,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -108,14 +108,15 @@\n import org.apache.syncope.common.rest.api.service.TaskService;\n import org.apache.syncope.common.rest.api.service.UserSelfService;\n import org.apache.syncope.common.rest.api.service.UserService;\n-import org.apache.syncope.common.rest.api.service.UserWorkflowService;\n-import org.apache.syncope.common.rest.api.service.WorkflowService;\n import org.apache.syncope.fit.core.UserITCase;\n import org.identityconnectors.common.security.Encryptor;\n import org.junit.jupiter.api.BeforeAll;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.jdbc.core.JdbcTemplate;\n+import org.apache.syncope.common.rest.api.service.UserRequestService;\n+import org.apache.syncope.common.rest.api.service.BpmnProcessService;\n+import org.apache.syncope.common.rest.api.service.UserWorkflowTaskService;\n \n public abstract class AbstractITCase {\n \n@@ -217,7 +218,9 @@ public abstract class AbstractITCase {\n \n     protected static UserSelfService userSelfService;\n \n-    protected static UserWorkflowService userWorkflowService;\n+    protected static UserRequestService userRequestService;\n+\n+    protected static UserWorkflowTaskService userWorkflowTaskService;\n \n     protected static GroupService groupService;\n \n@@ -241,7 +244,7 @@ public abstract class AbstractITCase {\n \n     protected static ReconciliationService reconciliationService;\n \n-    protected static WorkflowService workflowService;\n+    protected static BpmnProcessService bpmnProcessService;\n \n     protected static MailTemplateService mailTemplateService;\n \n@@ -314,7 +317,8 @@ public static void restSetup() {\n         dynRealmService = adminClient.getService(DynRealmService.class);\n         userService = adminClient.getService(UserService.class);\n         userSelfService = adminClient.getService(UserSelfService.class);\n-        userWorkflowService = adminClient.getService(UserWorkflowService.class);\n+        userRequestService = adminClient.getService(UserRequestService.class);\n+        userWorkflowTaskService = adminClient.getService(UserWorkflowTaskService.class);\n         groupService = adminClient.getService(GroupService.class);\n         resourceService = adminClient.getService(ResourceService.class);\n         resourceHistoryService = adminClient.getService(ResourceHistoryService.class);\n@@ -327,7 +331,7 @@ public static void restSetup() {\n         taskService = adminClient.getService(TaskService.class);\n         reconciliationService = adminClient.getService(ReconciliationService.class);\n         policyService = adminClient.getService(PolicyService.class);\n-        workflowService = adminClient.getService(WorkflowService.class);\n+        bpmnProcessService = adminClient.getService(BpmnProcessService.class);\n         mailTemplateService = adminClient.getService(MailTemplateService.class);\n         notificationService = adminClient.getService(NotificationService.class);\n         schemaService = adminClient.getService(SchemaService.class);"},{"sha":"08afd11b632bdcf086650d206673b8c1754f604f","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/FlowableDetector.java","status":"modified","additions":1,"deletions":9,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FFlowableDetector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FFlowableDetector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FFlowableDetector.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,15 +22,7 @@\n \n public class FlowableDetector {\n \n-    public static boolean isFlowableEnabledForUsers(final SyncopeService syncopeService) {\n+    public static boolean isFlowableEnabledForUserWorkflow(final SyncopeService syncopeService) {\n         return syncopeService.platform().getUserWorkflowAdapter().contains(\"Flowable\");\n     }\n-\n-    public static boolean isFlowableEnabledForGroups(final SyncopeService syncopeService) {\n-        return syncopeService.platform().getGroupWorkflowAdapter().contains(\"Flowable\");\n-    }\n-\n-    public static boolean isFlowableEnabledForAnyObjects(final SyncopeService syncopeService) {\n-        return syncopeService.platform().getAnyObjectWorkflowAdapter().contains(\"Flowable\");\n-    }\n }"},{"sha":"0159d8fe3b6c3b8c1dc1c497f117d1268d9a8086","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/AjaxBrowseITCase.java","status":"modified","additions":0,"deletions":7,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FAjaxBrowseITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FAjaxBrowseITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FAjaxBrowseITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -27,9 +27,7 @@\n import org.apache.syncope.client.console.pages.Reports;\n import org.apache.syncope.client.console.pages.Security;\n import org.apache.syncope.client.console.pages.Types;\n-import org.apache.syncope.client.console.pages.Workflow;\n import org.apache.syncope.client.console.topology.Topology;\n-import org.apache.syncope.fit.FlowableDetector;\n import org.junit.jupiter.api.Test;\n \n // Please, keep the class name as is in order to respect the execution order. It seems that from wicket 7.5.0 the \n@@ -69,11 +67,6 @@ public void browsingBookmarkablePageLink() {\n         TESTER.clickLink(\"body:reportsLI:reports\");\n         TESTER.assertRenderedPage(Reports.class);\n \n-        if (FlowableDetector.isFlowableEnabledForUsers(SYNCOPE_SERVICE)) {\n-            TESTER.clickLink(\"body:configurationLI:configurationUL:workflowLI:workflow\");\n-            TESTER.assertRenderedPage(Workflow.class);\n-        }\n-\n         TESTER.clickLink(\"body:configurationLI:configurationUL:logsLI:logs\");\n         TESTER.assertRenderedPage(Logs.class);\n "},{"sha":"e2f351bdfa32cc262fecb09fd18555408383fbc1","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/AuthenticationITCase.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthenticationITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthenticationITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FAuthenticationITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -54,7 +54,7 @@\n import org.apache.syncope.common.lib.to.ProvisioningResult;\n import org.apache.syncope.common.lib.to.RoleTO;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.syncope.common.lib.types.AttrSchemaType;\n import org.apache.syncope.common.lib.types.CipherAlgorithm;\n@@ -474,7 +474,7 @@ public void anyTypeEntitlement() {\n \n     @Test\n     public void issueSYNCOPE434() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n         // 1. create user with group 'groupForWorkflowApproval' \n         // (users with group groupForWorkflowApproval are defined in workflow as subject to approval)\n@@ -495,10 +495,10 @@ public void issueSYNCOPE434() {\n         }\n \n         // 3. approve user\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n-        form = userWorkflowService.claimForm(form.getTaskId());\n+        UserRequestForm form = userRequestService.getForms(userTO.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n         form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n-        userTO = userWorkflowService.submitForm(form);\n+        userTO = userRequestService.submitForm(form);\n         assertNotNull(userTO);\n         assertEquals(\"active\", userTO.getStatus());\n "},{"sha":"443cd83d75ffdc0cd2ea15df55ed2344553821c3","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/BpmnProcessITCase.java","status":"renamed","additions":17,"deletions":19,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBpmnProcessITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBpmnProcessITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FBpmnProcessITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -26,35 +26,33 @@\n import java.io.IOException;\n import java.io.InputStream;\n import java.nio.charset.StandardCharsets;\n-import java.util.Optional;\n import javax.ws.rs.core.Response;\n import org.apache.commons.io.IOUtils;\n-import org.apache.syncope.common.lib.to.WorkflowDefinitionTO;\n-import org.apache.syncope.common.lib.types.AnyTypeKind;\n+import org.apache.syncope.common.lib.to.BpmnProcessTO;\n import org.apache.syncope.fit.AbstractITCase;\n import org.apache.syncope.fit.FlowableDetector;\n import org.junit.jupiter.api.BeforeAll;\n import org.junit.jupiter.api.Test;\n \n-public class WorkflowITCase extends AbstractITCase {\n+public class BpmnProcessITCase extends AbstractITCase {\n \n-    private static String defaultUserKey = null;\n+    private static String userWorkflowKey = null;\n \n     @BeforeAll\n     public static void findDefault() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-        Optional<WorkflowDefinitionTO> found = workflowService.list(AnyTypeKind.USER.name()).stream().\n-                filter(object -> object.isMain()).findAny();\n-        if (found.isPresent()) {\n-            defaultUserKey = found.get().getKey();\n-        }\n-        assertNotNull(defaultUserKey);\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+        bpmnProcessService.list().stream().\n+                filter(BpmnProcessTO::isUserWorkflow).findAny().\n+                ifPresent(process -> {\n+                    userWorkflowKey = process.getKey();\n+                });\n+        assertNotNull(userWorkflowKey);\n     }\n \n     @Test\n-    public void exportUserDefinition() throws IOException {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-        Response response = workflowService.get(AnyTypeKind.USER.name(), defaultUserKey);\n+    public void exportUserWorkflowProcess() throws IOException {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+        Response response = bpmnProcessService.get(userWorkflowKey);\n         assertTrue(response.getMediaType().toString().\n                 startsWith(clientFactory.getContentType().getMediaType().toString()));\n         assertTrue(response.getEntity() instanceof InputStream);\n@@ -64,11 +62,11 @@ public void exportUserDefinition() throws IOException {\n     }\n \n     @Test\n-    public void updateUserDefinition() throws IOException {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-        Response response = workflowService.get(AnyTypeKind.USER.name(), defaultUserKey);\n+    public void updateUserWorkflowProcess() throws IOException {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+        Response response = bpmnProcessService.get(userWorkflowKey);\n         String definition = IOUtils.toString((InputStream) response.getEntity(), StandardCharsets.UTF_8);\n \n-        workflowService.set(AnyTypeKind.USER.name(), defaultUserKey, definition);\n+        bpmnProcessService.set(userWorkflowKey, definition);\n     }\n }","previous_filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/WorkflowITCase.java"},{"sha":"e07c30f12585a97ae258f9197f4337103599ecc8","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/MultitenancyITCase.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FMultitenancyITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FMultitenancyITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FMultitenancyITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -105,8 +105,8 @@ public void masterOnly() {\n \n     @Test\n     public void readPlainSchemas() {\n-        assertEquals(13, adminClient.getService(SchemaService.class).search(new SchemaQuery.Builder().type(\n-                SchemaType.PLAIN).build()).size());\n+        assertEquals(12, adminClient.getService(SchemaService.class).\n+                search(new SchemaQuery.Builder().type(SchemaType.PLAIN).build()).size());\n     }\n \n     @Test"},{"sha":"b1ba164df70d3313f0cacb1573bc9e9de4022ba6","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/PullTaskITCase.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -253,7 +253,7 @@ public void fromCSV() throws Exception {\n             UserTO userTO = userService.read(inUserTO.getKey());\n             assertNotNull(userTO);\n             assertEquals(userName, userTO.getUsername());\n-            assertEquals(FlowableDetector.isFlowableEnabledForUsers(syncopeService)\n+            assertEquals(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService)\n                     ? \"active\" : \"created\", userTO.getStatus());\n             assertEquals(\"test9@syncope.apache.org\", userTO.getPlainAttr(\"email\").get().getValues().get(0));\n             assertEquals(\"test9@syncope.apache.org\", userTO.getPlainAttr(\"userId\").get().getValues().get(0));"},{"sha":"44a3d5c6ebd1e40ecf3b63b7fffca933d8215866","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/RoleITCase.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FRoleITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FRoleITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FRoleITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -31,6 +31,7 @@\n import org.apache.syncope.common.lib.to.RoleTO;\n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.common.lib.types.ClientExceptionType;\n+import org.apache.syncope.common.lib.types.FlowableEntitlement;\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.syncope.common.rest.api.service.RoleService;\n import org.apache.syncope.fit.AbstractITCase;\n@@ -90,16 +91,16 @@ public void update() {\n         role = createRole(role);\n         assertNotNull(role);\n \n-        assertFalse(role.getEntitlements().contains(StandardEntitlement.WORKFLOW_TASK_LIST));\n+        assertFalse(role.getEntitlements().contains(FlowableEntitlement.WORKFLOW_TASK_LIST));\n         assertFalse(role.getRealms().contains(\"/even/two\"));\n \n-        role.getEntitlements().add(StandardEntitlement.WORKFLOW_TASK_LIST);\n+        role.getEntitlements().add(FlowableEntitlement.WORKFLOW_TASK_LIST);\n         role.getRealms().add(\"/even/two\");\n \n         roleService.update(role);\n \n         role = roleService.read(role.getKey());\n-        assertTrue(role.getEntitlements().contains(StandardEntitlement.WORKFLOW_TASK_LIST));\n+        assertTrue(role.getEntitlements().contains(FlowableEntitlement.WORKFLOW_TASK_LIST));\n         assertTrue(role.getRealms().contains(\"/even/two\"));\n     }\n "},{"sha":"24eacadfe40b260917d4eb86c9252035143b441e","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/SchedTaskITCase.java","status":"modified","additions":0,"deletions":26,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSchedTaskITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSchedTaskITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSchedTaskITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -24,7 +24,6 @@\n import static org.junit.jupiter.api.Assertions.assertNull;\n import static org.junit.jupiter.api.Assertions.assertTrue;\n import static org.junit.jupiter.api.Assertions.fail;\n-import static org.junit.jupiter.api.Assumptions.assumeTrue;\n \n import java.util.Date;\n import java.util.List;\n@@ -40,16 +39,12 @@\n import org.apache.syncope.common.lib.to.ExecTO;\n import org.apache.syncope.common.lib.to.ImplementationTO;\n import org.apache.syncope.common.lib.types.ImplementationType;\n-import org.apache.syncope.common.lib.to.WorkflowFormPropertyTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n import org.apache.syncope.common.lib.types.JobAction;\n import org.apache.syncope.common.lib.types.TaskType;\n import org.apache.syncope.common.rest.api.beans.ExecuteQuery;\n import org.apache.syncope.common.rest.api.beans.ExecQuery;\n import org.apache.syncope.common.rest.api.beans.TaskQuery;\n-import org.apache.syncope.common.rest.api.beans.WorkflowFormQuery;\n import org.apache.syncope.common.rest.api.service.TaskService;\n-import org.apache.syncope.fit.FlowableDetector;\n import org.apache.syncope.fit.core.reference.TestSampleJobDelegate;\n import org.junit.jupiter.api.Test;\n \n@@ -138,27 +133,6 @@ public void deferred() {\n         assertTrue(DateUtils.addSeconds(execs.getResult().get(0).getStart(), 1).after(later));\n     }\n \n-    @Test\n-    public void recertification() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        execTask(taskService, TaskType.SCHEDULED, \"e95555d2-1b09-42c8-b25b-f4c4ec598989\", \"JOB_FIRED\", 50, false);\n-\n-        List<WorkflowFormTO> forms = userWorkflowService.getForms(\n-                new WorkflowFormQuery.Builder().page(1).size(1000).build()).getResult();\n-        assertFalse(forms.isEmpty());\n-        forms.forEach(form -> {\n-            userWorkflowService.claimForm(form.getTaskId());\n-            WorkflowFormPropertyTO approve = form.getProperty(\"approve\").orElse(null);\n-            approve.setValue(\"true\");\n-            userWorkflowService.submitForm(form);\n-        });\n-\n-        forms = userWorkflowService.getForms(\n-                new WorkflowFormQuery.Builder().page(1).size(1000).build()).getResult();\n-        assertTrue(forms.isEmpty());\n-    }\n-\n     @Test\n     public void issueSYNCOPE144() {\n         ImplementationTO taskJobDelegate = implementationService.read("},{"sha":"cd4940fa34813173b1459096dbfcda19f57e0392","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserITCase.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -714,7 +714,7 @@ public void verifyTaskRegistration() {\n \n     @Test\n     public void createActivate() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n         UserTO userTO = getUniqueSampleTO(\"createActivate@syncope.apache.org\");\n \n@@ -751,7 +751,7 @@ public void suspendReactivate() {\n         userTO = createUser(userTO).getEntity();\n \n         assertNotNull(userTO);\n-        assertEquals(FlowableDetector.isFlowableEnabledForUsers(syncopeService)\n+        assertEquals(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService)\n                 ? \"active\"\n                 : \"created\", userTO.getStatus());\n \n@@ -787,7 +787,7 @@ public void suspendReactivateOnResource() {\n         userTO.getResources().add(RESOURCE_NAME_LDAP);\n         userTO = createUser(userTO).getEntity();\n         assertNotNull(userTO);\n-        assertEquals(FlowableDetector.isFlowableEnabledForUsers(syncopeService)\n+        assertEquals(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService)\n                 ? \"active\"\n                 : \"created\", userTO.getStatus());\n         String userKey = userTO.getKey();"},{"sha":"5446894635d1fe0b1dfa9abaceffe361695434c6","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserRequestITCase.java","status":"added","additions":144,"deletions":0,"changes":144,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserRequestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserRequestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserRequestITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -0,0 +1,144 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.core;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.Assumptions.assumeTrue;\n+\n+import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.cxf.helpers.IOUtils;\n+import org.apache.cxf.jaxrs.client.WebClient;\n+import org.apache.syncope.common.lib.to.PagedResult;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.to.UserRequestTO;\n+import org.apache.syncope.common.lib.to.UserTO;\n+import org.apache.syncope.common.rest.api.beans.UserRequestFormQuery;\n+import org.apache.syncope.fit.AbstractITCase;\n+import org.apache.syncope.fit.FlowableDetector;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+public class UserRequestITCase extends AbstractITCase {\n+\n+    @BeforeAll\n+    public static void loadBpmnProcesses() throws IOException {\n+        WebClient.client(bpmnProcessService).type(MediaType.APPLICATION_XML_TYPE);\n+        bpmnProcessService.set(\"directorGroupRequest\",\n+                IOUtils.toString(UserRequestITCase.class.getResourceAsStream(\"/directorGroupRequest.bpmn20.xml\")));\n+    }\n+\n+    @Test\n+    public void twoLevelsApproval() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        UserTO user = createUser(UserITCase.getUniqueSampleTO(\"twoLevelsApproval@tirasa.net\")).getEntity();\n+        assertNotNull(user);\n+        assertFalse(user.getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+\n+        // start request\n+        UserRequestTO req = userRequestService.start(\"directorGroupRequest\", user.getKey());\n+        assertNotNull(req);\n+\n+        // 1st approval -> reject\n+        UserRequestForm form = userRequestService.getForms(user.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"firstLevelApprove\").get().setValue(Boolean.FALSE.toString());\n+        userRequestService.submitForm(form);\n+\n+        // no more forms, group not assigned\n+        assertTrue(userRequestService.getForms(user.getKey()).isEmpty());\n+        assertFalse(userService.read(user.getKey()).getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+\n+        // start request again\n+        req = userRequestService.start(\"directorGroupRequest\", user.getKey());\n+        assertNotNull(req);\n+\n+        // 1st approval -> accept\n+        form = userRequestService.getForms(user.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"firstLevelApprove\").get().setValue(Boolean.TRUE.toString());\n+        userRequestService.submitForm(form);\n+\n+        // 2nd approval -> reject\n+        form = userRequestService.getForms(user.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"secondLevelApprove\").get().setValue(Boolean.FALSE.toString());\n+        user = userRequestService.submitForm(form);\n+\n+        // no more forms, group not assigned\n+        assertTrue(userRequestService.getForms(user.getKey()).isEmpty());\n+        assertFalse(userService.read(user.getKey()).getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+\n+        // start request again\n+        req = userRequestService.start(\"directorGroupRequest\", user.getKey());\n+        assertNotNull(req);\n+\n+        // 1st approval -> accept\n+        form = userRequestService.getForms(user.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"firstLevelApprove\").get().setValue(Boolean.TRUE.toString());\n+        userRequestService.submitForm(form);\n+\n+        // 2nd approval -> accept\n+        form = userRequestService.getForms(user.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"secondLevelApprove\").get().setValue(Boolean.TRUE.toString());\n+        user = userRequestService.submitForm(form);\n+\n+        // check that the director group was effectively assigned\n+        assertTrue(user.getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+        assertTrue(userService.read(user.getKey()).getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+    }\n+\n+    @Test\n+    public void cancel() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        PagedResult<UserRequestForm> forms =\n+                userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        int preForms = forms.getTotalCount();\n+\n+        UserTO user = createUser(UserITCase.getUniqueSampleTO(\"twoLevelsApproval@tirasa.net\")).getEntity();\n+        assertNotNull(user);\n+        assertFalse(user.getMembership(\"ebf97068-aa4b-4a85-9f01-680e8c4cf227\").isPresent());\n+\n+        // start request\n+        UserRequestTO req = userRequestService.start(\"directorGroupRequest\", user.getKey());\n+        assertNotNull(req);\n+\n+        // check that form was generated\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms + 1, forms.getTotalCount());\n+\n+        assertEquals(1, userRequestService.getForms(user.getKey()).size());\n+\n+        // cancel request\n+        userRequestService.cancel(req.getExecutionId(), \"nothing in particular\");\n+\n+        // check that form was removed\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms, forms.getTotalCount());\n+\n+        assertTrue(userRequestService.getForms(user.getKey()).isEmpty());\n+    }\n+}"},{"sha":"0e48cf248d8513018682bed14eda3827b79f73fc","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserSelfITCase.java","status":"modified","additions":329,"deletions":23,"changes":352,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -27,11 +27,15 @@\n import static org.junit.jupiter.api.Assertions.fail;\n import static org.junit.jupiter.api.Assumptions.assumeTrue;\n \n+import java.util.Collections;\n+import java.util.List;\n import java.util.Map;\n import java.util.Set;\n+import java.util.UUID;\n import javax.sql.DataSource;\n import javax.ws.rs.ForbiddenException;\n import javax.ws.rs.core.GenericType;\n+import javax.ws.rs.core.Response;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.commons.lang3.tuple.Pair;\n import org.apache.syncope.client.lib.SyncopeClient;\n@@ -46,18 +50,22 @@\n import org.apache.syncope.common.lib.to.PagedResult;\n import org.apache.syncope.common.lib.to.ProvisioningResult;\n import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n+import org.apache.syncope.common.lib.to.UserRequestForm;\n+import org.apache.syncope.common.lib.to.WorkflowTask;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.syncope.common.lib.types.ClientExceptionType;\n import org.apache.syncope.common.lib.types.PatchOperation;\n import org.apache.syncope.common.rest.api.beans.AnyQuery;\n+import org.apache.syncope.common.rest.api.beans.UserRequestFormQuery;\n import org.apache.syncope.common.rest.api.service.ResourceService;\n+import org.apache.syncope.common.rest.api.service.UserRequestService;\n import org.apache.syncope.common.rest.api.service.UserSelfService;\n import org.apache.syncope.common.rest.api.service.UserService;\n import org.apache.syncope.fit.AbstractITCase;\n import org.apache.syncope.fit.FlowableDetector;\n import org.junit.jupiter.api.Test;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.dao.EmptyResultDataAccessException;\n import org.springframework.jdbc.core.JdbcTemplate;\n import org.springframework.test.context.junit.jupiter.SpringJUnitConfig;\n \n@@ -74,7 +82,7 @@ public void selfRegistrationAllowed() {\n \n     @Test\n     public void create() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n         // 1. self-registration as admin: failure\n         try {\n@@ -96,7 +104,7 @@ public void create() {\n \n     @Test\n     public void createAndApprove() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n         // self-create user with membership: goes 'createApproval' with resources and membership but no propagation\n         UserTO userTO = UserITCase.getUniqueSampleTO(\"anonymous@syncope.apache.org\");\n@@ -122,28 +130,28 @@ public void createAndApprove() {\n         }\n \n         // now approve and verify that propagation has happened\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n-        form = userWorkflowService.claimForm(form.getTaskId());\n+        UserRequestForm form = userRequestService.getForms(userTO.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n         form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n-        userTO = userWorkflowService.submitForm(form);\n+        userTO = userRequestService.submitForm(form);\n         assertNotNull(userTO);\n         assertEquals(\"active\", userTO.getStatus());\n         assertNotNull(resourceService.readConnObject(RESOURCE_NAME_TESTDB, AnyTypeKind.USER.name(), userTO.getKey()));\n     }\n \n     @Test\n     public void read() {\n-        UserService userService2 = clientFactory.create(\"rossini\", ADMIN_PWD).getService(UserService.class);\n-\n+        UserTO user = createUser(UserITCase.getUniqueSampleTO(\"selfread@syncope.apache.org\")).getEntity();\n+        UserService us2 = clientFactory.create(user.getUsername(), \"password123\").getService(UserService.class);\n         try {\n-            userService2.read(\"1417acbe-cbf6-4277-9372-e75e04f97000\");\n+            us2.read(user.getKey());\n             fail(\"This should not happen\");\n         } catch (ForbiddenException e) {\n             assertNotNull(e);\n         }\n \n-        Pair<Map<String, Set<String>>, UserTO> self = clientFactory.create(\"rossini\", ADMIN_PWD).self();\n-        assertEquals(\"rossini\", self.getRight().getUsername());\n+        Pair<Map<String, Set<String>>, UserTO> self = clientFactory.create(user.getUsername(), \"password123\").self();\n+        assertEquals(user.getUsername(), self.getRight().getUsername());\n     }\n \n     @Test\n@@ -174,14 +182,14 @@ public void updateWithoutApproval() {\n                 readEntity(new GenericType<ProvisioningResult<UserTO>>() {\n                 }).getEntity();\n         assertNotNull(updated);\n-        assertEquals(FlowableDetector.isFlowableEnabledForUsers(syncopeService)\n+        assertEquals(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService)\n                 ? \"active\" : \"created\", updated.getStatus());\n         assertTrue(updated.getUsername().endsWith(\"XX\"));\n     }\n \n     @Test\n     public void updateWithApproval() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n \n         // 1. create user as admin\n         UserTO created = createUser(UserITCase.getUniqueSampleTO(\"anonymous@syncope.apache.org\")).getEntity();\n@@ -220,10 +228,10 @@ public void updateWithApproval() {\n         }\n \n         // 3. approve self-update as admin\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(updated.getKey());\n-        form = userWorkflowService.claimForm(form.getTaskId());\n+        UserRequestForm form = userRequestService.getForms(updated.getKey()).get(0);\n+        form = userRequestService.claimForm(form.getTaskId());\n         form.getProperty(\"approveUpdate\").get().setValue(Boolean.TRUE.toString());\n-        updated = userWorkflowService.submitForm(form);\n+        updated = userRequestService.submitForm(form);\n         assertNotNull(updated);\n         assertEquals(\"active\", updated.getStatus());\n         assertTrue(updated.getUsername().endsWith(\"XX\"));\n@@ -244,16 +252,10 @@ public void delete() {\n                 new GenericType<ProvisioningResult<UserTO>>() {\n         }).getEntity();\n         assertNotNull(deleted);\n-        assertEquals(FlowableDetector.isFlowableEnabledForUsers(syncopeService)\n+        assertEquals(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService)\n                 ? \"deleteApproval\" : null, deleted.getStatus());\n     }\n \n-    @Test\n-    public void issueSYNCOPE373() {\n-        UserTO userTO = adminClient.self().getRight();\n-        assertEquals(ADMIN_UNAME, userTO.getUsername());\n-    }\n-\n     @Test\n     public void passwordReset() {\n         // 0. ensure that password request DOES require security question\n@@ -400,4 +402,308 @@ public void mustChangePassword() {\n         assertFalse(self.getRight().isMustChangePassword());\n     }\n \n+    @Test\n+    public void createWithReject() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        UserTO userTO = UserITCase.getUniqueSampleTO(\"createWithReject@syncope.apache.org\");\n+        userTO.getResources().add(RESOURCE_NAME_TESTDB);\n+\n+        // User with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f are defined in workflow as subject to approval\n+        userTO.getMemberships().add(new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n+\n+        // 1. create user with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f\n+        userTO = createUser(userTO).getEntity();\n+        assertNotNull(userTO);\n+        assertEquals(1, userTO.getMemberships().size());\n+        assertEquals(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\", userTO.getMemberships().get(0).getGroupKey());\n+        assertEquals(\"createApproval\", userTO.getStatus());\n+\n+        // 2. request if there is any pending task for user just created\n+        UserRequestForm form = userRequestService.getForms(userTO.getKey()).get(0);\n+        assertNotNull(form);\n+        assertNotNull(form.getUsername());\n+        assertEquals(userTO.getUsername(), form.getUsername());\n+        assertNotNull(form.getTaskId());\n+        assertNull(form.getOwner());\n+\n+        // 3. claim task as rossini, with role \"User manager\" granting entitlement to claim forms but not in\n+        // groupForWorkflowApproval, designated for approval in workflow definition: fail\n+        UserTO rossini = userService.read(\"1417acbe-cbf6-4277-9372-e75e04f97000\");\n+        if (!rossini.getRoles().contains(\"User manager\")) {\n+            UserPatch userPatch = new UserPatch();\n+            userPatch.setKey(\"1417acbe-cbf6-4277-9372-e75e04f97000\");\n+            userPatch.getRoles().add(new StringPatchItem.Builder().\n+                    operation(PatchOperation.ADD_REPLACE).value(\"User manager\").build());\n+            rossini = updateUser(userPatch).getEntity();\n+        }\n+        assertTrue(rossini.getRoles().contains(\"User manager\"));\n+\n+        UserRequestService userService2 = clientFactory.create(\"rossini\", ADMIN_PWD).\n+                getService(UserRequestService.class);\n+        try {\n+            userService2.claimForm(form.getTaskId());\n+            fail(\"This should not happen\");\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.Workflow, e.getType());\n+        }\n+\n+        // 4. claim task from bellini, with role \"User manager\" and in groupForWorkflowApproval\n+        UserRequestService userService3 = clientFactory.create(\"bellini\", ADMIN_PWD).\n+                getService(UserRequestService.class);\n+        form = userService3.claimForm(form.getTaskId());\n+        assertNotNull(form);\n+        assertNotNull(form.getTaskId());\n+        assertNotNull(form.getOwner());\n+\n+        // 5. reject user\n+        form.getProperty(\"approveCreate\").get().setValue(Boolean.FALSE.toString());\n+        form.getProperty(\"rejectReason\").get().setValue(\"I don't like him.\");\n+        userTO = userService3.submitForm(form);\n+        assertNotNull(userTO);\n+        assertEquals(\"rejected\", userTO.getStatus());\n+\n+        // 6. check that rejected user was not propagated to external resource (SYNCOPE-364)\n+        JdbcTemplate jdbcTemplate = new JdbcTemplate(testDataSource);\n+        Exception exception = null;\n+        try {\n+            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n+                    new String[] { userTO.getUsername() }, Integer.class);\n+        } catch (EmptyResultDataAccessException e) {\n+            exception = e;\n+        }\n+        assertNotNull(exception);\n+    }\n+\n+    @Test\n+    public void createWithApproval() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        // read forms *before* any operation\n+        PagedResult<UserRequestForm> forms =\n+                userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        int preForms = forms.getTotalCount();\n+\n+        UserTO userTO = UserITCase.getUniqueSampleTO(\"createWithApproval@syncope.apache.org\");\n+        userTO.getResources().add(RESOURCE_NAME_TESTDB);\n+\n+        // User with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f are defined in workflow as subject to approval\n+        userTO.getMemberships().add(\n+                new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n+\n+        // 1. create user and verify that no propagation occurred)\n+        ProvisioningResult<UserTO> result = createUser(userTO);\n+        assertNotNull(result);\n+        userTO = result.getEntity();\n+        assertEquals(1, userTO.getMemberships().size());\n+        assertEquals(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\", userTO.getMemberships().get(0).getGroupKey());\n+        assertEquals(\"createApproval\", userTO.getStatus());\n+        assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB), userTO.getResources());\n+\n+        assertTrue(result.getPropagationStatuses().isEmpty());\n+\n+        JdbcTemplate jdbcTemplate = new JdbcTemplate(testDataSource);\n+\n+        Exception exception = null;\n+        try {\n+            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n+                    new String[] { userTO.getUsername() }, Integer.class);\n+        } catch (EmptyResultDataAccessException e) {\n+            exception = e;\n+        }\n+        assertNotNull(exception);\n+\n+        // 2. request if there is any pending form for user just created\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms + 1, forms.getTotalCount());\n+\n+        // 3. as admin, update user: still pending approval\n+        String updatedUsername = \"changed-\" + UUID.randomUUID().toString();\n+        UserPatch userPatch = new UserPatch();\n+        userPatch.setKey(userTO.getKey());\n+        userPatch.setUsername(new StringReplacePatchItem.Builder().value(updatedUsername).build());\n+        updateUser(userPatch);\n+\n+        UserRequestForm form = userRequestService.getForms(userTO.getKey()).get(0);\n+        assertNotNull(form);\n+        assertNotNull(form.getTaskId());\n+        assertNotNull(form.getUserTO());\n+        assertEquals(updatedUsername, form.getUserTO().getUsername());\n+        assertNull(form.getUserPatch());\n+        assertNull(form.getOwner());\n+\n+        // 4. claim task (as admin)\n+        form = userRequestService.claimForm(form.getTaskId());\n+        assertNotNull(form);\n+        assertNotNull(form.getTaskId());\n+        assertNotNull(form.getUserTO());\n+        assertEquals(updatedUsername, form.getUserTO().getUsername());\n+        assertNull(form.getUserPatch());\n+        assertNotNull(form.getOwner());\n+\n+        // 5. approve user (and verify that propagation occurred)\n+        form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n+        userTO = userRequestService.submitForm(form);\n+        assertNotNull(userTO);\n+        assertEquals(updatedUsername, userTO.getUsername());\n+        assertEquals(\"active\", userTO.getStatus());\n+        assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB), userTO.getResources());\n+\n+        String username = queryForObject(\n+                jdbcTemplate, 50, \"SELECT id FROM test WHERE id=?\", String.class, userTO.getUsername());\n+        assertEquals(userTO.getUsername(), username);\n+\n+        // 6. update user\n+        userPatch = new UserPatch();\n+        userPatch.setKey(userTO.getKey());\n+        userPatch.setPassword(new PasswordPatch.Builder().value(\"anotherPassword123\").build());\n+\n+        userTO = updateUser(userPatch).getEntity();\n+        assertNotNull(userTO);\n+    }\n+\n+    @Test\n+    public void updateApproval() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        // read forms *before* any operation\n+        PagedResult<UserRequestForm> forms = userRequestService.getForms(new UserRequestFormQuery.Builder().\n+                page(1).size(1000).build());\n+        int preForms = forms.getTotalCount();\n+\n+        UserTO created = createUser(UserITCase.getUniqueSampleTO(\"updateApproval@syncope.apache.org\")).getEntity();\n+        assertNotNull(created);\n+        assertEquals(\"/\", created.getRealm());\n+        assertEquals(0, created.getMemberships().size());\n+\n+        UserPatch patch = new UserPatch();\n+        patch.setKey(created.getKey());\n+        patch.getMemberships().add(new MembershipPatch.Builder().group(\"b1f7c12d-ec83-441f-a50e-1691daaedf3b\").build());\n+\n+        SyncopeClient client = clientFactory.create(created.getUsername(), \"password123\");\n+        Response response = client.getService(UserSelfService.class).update(patch);\n+        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n+        assertEquals(\"updateApproval\", userService.read(created.getKey()).getStatus());\n+\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms + 1, forms.getTotalCount());\n+\n+        UserRequestForm form = userRequestService.getForms(created.getKey()).get(0);\n+        assertNotNull(form);\n+        assertNotNull(form.getTaskId());\n+        assertNull(form.getOwner());\n+        assertNotNull(form.getUserTO());\n+        assertNotNull(form.getUserPatch());\n+        assertEquals(patch, form.getUserPatch());\n+\n+        // as admin, update user: still pending approval\n+        UserPatch adminPatch = new UserPatch();\n+        adminPatch.setKey(created.getKey());\n+        adminPatch.setRealm(new StringReplacePatchItem.Builder().value(\"/even/two\").build());\n+\n+        UserTO updated = updateUser(adminPatch).getEntity();\n+        assertEquals(\"updateApproval\", updated.getStatus());\n+        assertEquals(\"/even/two\", updated.getRealm());\n+        assertEquals(0, updated.getMemberships().size());\n+\n+        // the patch is not updated in the approval form\n+        form = userRequestService.getForms(created.getKey()).get(0);\n+        assertEquals(patch, form.getUserPatch());\n+\n+        // approve the user\n+        form = userRequestService.claimForm(form.getTaskId());\n+        form.getProperty(\"approveUpdate\").get().setValue(Boolean.TRUE.toString());\n+        userRequestService.submitForm(form);\n+\n+        // verify that the approved user bears both original and further changes\n+        UserTO approved = userService.read(created.getKey());\n+        assertEquals(\"active\", approved.getStatus());\n+        assertEquals(\"/even/two\", approved.getRealm());\n+        assertEquals(1, approved.getMemberships().size());\n+        assertTrue(approved.getMembership(\"b1f7c12d-ec83-441f-a50e-1691daaedf3b\").isPresent());\n+    }\n+\n+    @Test\n+    public void availableTasks() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        UserTO user = createUser(UserITCase.getUniqueSampleTO(\"availableTasks@apache.org\")).getEntity();\n+        assertEquals(\"active\", user.getStatus());\n+\n+        List<WorkflowTask> tasks = userWorkflowTaskService.getAvailableTasks(user.getKey());\n+        assertNotNull(tasks);\n+        assertTrue(tasks.stream().anyMatch(task -> \"update\".equals(task.getName())));\n+        assertTrue(tasks.stream().anyMatch(task -> \"suspend\".equals(task.getName())));\n+        assertTrue(tasks.stream().anyMatch(task -> \"delete\".equals(task.getName())));\n+    }\n+\n+    @Test\n+    public void issueSYNCOPE15() {\n+        assumeTrue(FlowableDetector.isFlowableEnabledForUserWorkflow(syncopeService));\n+\n+        // read forms *before* any operation\n+        PagedResult<UserRequestForm> forms = userRequestService.getForms(new UserRequestFormQuery.Builder().\n+                page(1).size(1000).build());\n+        int preForms = forms.getTotalCount();\n+\n+        UserTO userTO = UserITCase.getUniqueSampleTO(\"issueSYNCOPE15@syncope.apache.org\");\n+        userTO.getResources().clear();\n+        userTO.getVirAttrs().clear();\n+        userTO.getDerAttrs().clear();\n+        userTO.getMemberships().clear();\n+\n+        // Users with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f are defined in workflow as subject to approval\n+        userTO.getMemberships().add(\n+                new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n+\n+        // 1. create user with group 9 (and verify that no propagation occurred)\n+        userTO = createUser(userTO).getEntity();\n+        assertNotNull(userTO);\n+        assertNotEquals(0L, userTO.getKey());\n+        assertNotNull(userTO.getCreationDate());\n+        assertNotNull(userTO.getCreator());\n+        assertNotNull(userTO.getLastChangeDate());\n+        assertNotNull(userTO.getLastModifier());\n+        assertEquals(userTO.getCreationDate(), userTO.getLastChangeDate());\n+\n+        // 2. request if there is any pending form for user just created\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms + 1, forms.getTotalCount());\n+\n+        UserRequestForm form = userRequestService.getForms(userTO.getKey()).get(0);\n+        assertNotNull(form);\n+\n+        // 3. first claim by bellini ....\n+        UserRequestService userService3 = clientFactory.create(\"bellini\", ADMIN_PWD).\n+                getService(UserRequestService.class);\n+        form = userService3.claimForm(form.getTaskId());\n+        assertNotNull(form);\n+        assertNotNull(form.getTaskId());\n+        assertNotNull(form.getOwner());\n+\n+        // 4. second claim task by admin\n+        form = userRequestService.claimForm(form.getTaskId());\n+        assertNotNull(form);\n+\n+        // 5. approve user\n+        form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n+\n+        // 6. submit approve\n+        userTO = userRequestService.submitForm(form);\n+        assertNotNull(userTO);\n+        assertEquals(preForms,\n+                userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build()).\n+                        getTotalCount());\n+        assertTrue(userRequestService.getForms(userTO.getKey()).isEmpty());\n+\n+        // 7.check that no more forms are still to be processed\n+        forms = userRequestService.getForms(new UserRequestFormQuery.Builder().page(1).size(1000).build());\n+        assertEquals(preForms, forms.getTotalCount());\n+    }\n+\n+    @Test\n+    public void issueSYNCOPE373() {\n+        UserTO userTO = adminClient.self().getRight();\n+        assertEquals(ADMIN_UNAME, userTO.getUsername());\n+    }\n }"},{"sha":"24dc61dd36fab23ee5b2e29e55b46097b41430be","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserWorkflowITCase.java","status":"removed","additions":0,"deletions":361,"changes":361,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,361 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.fit.core;\n-\n-import org.apache.syncope.fit.FlowableDetector;\n-\n-import static org.junit.jupiter.api.Assertions.assertEquals;\n-import static org.junit.jupiter.api.Assertions.assertNotEquals;\n-import static org.junit.jupiter.api.Assertions.assertNotNull;\n-import static org.junit.jupiter.api.Assertions.assertNull;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n-import static org.junit.jupiter.api.Assertions.fail;\n-import static org.junit.jupiter.api.Assumptions.assumeTrue;\n-\n-import java.util.Collections;\n-import java.util.List;\n-import java.util.UUID;\n-import javax.sql.DataSource;\n-import javax.ws.rs.core.Response;\n-import org.apache.syncope.client.lib.SyncopeClient;\n-import org.apache.syncope.common.lib.SyncopeClientException;\n-import org.apache.syncope.common.lib.patch.MembershipPatch;\n-import org.apache.syncope.common.lib.patch.PasswordPatch;\n-import org.apache.syncope.common.lib.patch.StringPatchItem;\n-import org.apache.syncope.common.lib.patch.StringReplacePatchItem;\n-import org.apache.syncope.common.lib.patch.UserPatch;\n-import org.apache.syncope.common.lib.to.MembershipTO;\n-import org.apache.syncope.common.lib.to.PagedResult;\n-import org.apache.syncope.common.lib.to.ProvisioningResult;\n-import org.apache.syncope.common.lib.to.UserTO;\n-import org.apache.syncope.common.lib.to.WorkflowFormTO;\n-import org.apache.syncope.common.lib.to.WorkflowTaskTO;\n-import org.apache.syncope.common.lib.types.ClientExceptionType;\n-import org.apache.syncope.common.lib.types.PatchOperation;\n-import org.apache.syncope.common.rest.api.beans.WorkflowFormQuery;\n-import org.apache.syncope.common.rest.api.service.UserSelfService;\n-import org.apache.syncope.common.rest.api.service.UserWorkflowService;\n-import org.apache.syncope.fit.AbstractITCase;\n-import org.junit.jupiter.api.Test;\n-import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.dao.EmptyResultDataAccessException;\n-import org.springframework.jdbc.core.JdbcTemplate;\n-import org.springframework.test.context.junit.jupiter.SpringJUnitConfig;\n-\n-@SpringJUnitConfig(locations = { \"classpath:testJDBCEnv.xml\" })\n-public class UserWorkflowITCase extends AbstractITCase {\n-\n-    @Autowired\n-    private DataSource testDataSource;\n-\n-    @Test\n-    public void createWithReject() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        UserTO userTO = UserITCase.getUniqueSampleTO(\"createWithReject@syncope.apache.org\");\n-        userTO.getResources().add(RESOURCE_NAME_TESTDB);\n-\n-        // User with group 9 are defined in workflow as subject to approval\n-        userTO.getMemberships().add(\n-                new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n-\n-        // 1. create user with group 9\n-        userTO = createUser(userTO).getEntity();\n-        assertNotNull(userTO);\n-        assertEquals(1, userTO.getMemberships().size());\n-        assertEquals(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\", userTO.getMemberships().get(0).getGroupKey());\n-        assertEquals(\"createApproval\", userTO.getStatus());\n-\n-        // 2. request if there is any pending task for user just created\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n-        assertNotNull(form);\n-        assertNotNull(form.getUsername());\n-        assertEquals(userTO.getUsername(), form.getUsername());\n-        assertNotNull(form.getTaskId());\n-        assertNull(form.getOwner());\n-\n-        // 3. claim task as rossini, with role \"User manager\" granting entitlement to claim forms but not in group 7,\n-        // designated for approval in workflow definition: fail\n-        UserTO rossini = userService.read(\"1417acbe-cbf6-4277-9372-e75e04f97000\");\n-        if (!rossini.getRoles().contains(\"User manager\")) {\n-            UserPatch userPatch = new UserPatch();\n-            userPatch.setKey(\"1417acbe-cbf6-4277-9372-e75e04f97000\");\n-            userPatch.getRoles().add(new StringPatchItem.Builder().\n-                    operation(PatchOperation.ADD_REPLACE).value(\"User manager\").build());\n-            rossini = updateUser(userPatch).getEntity();\n-        }\n-        assertTrue(rossini.getRoles().contains(\"User manager\"));\n-\n-        UserWorkflowService userService2 = clientFactory.create(\"rossini\", ADMIN_PWD).\n-                getService(UserWorkflowService.class);\n-        try {\n-            userService2.claimForm(form.getTaskId());\n-            fail(\"This should not happen\");\n-        } catch (SyncopeClientException e) {\n-            assertEquals(ClientExceptionType.Workflow, e.getType());\n-        }\n-\n-        // 4. claim task from bellini, with role \"User manager\" and in group 7\n-        UserWorkflowService userService3 = clientFactory.create(\"bellini\", ADMIN_PWD).\n-                getService(UserWorkflowService.class);\n-        form = userService3.claimForm(form.getTaskId());\n-        assertNotNull(form);\n-        assertNotNull(form.getTaskId());\n-        assertNotNull(form.getOwner());\n-\n-        // 5. reject user\n-        form.getProperty(\"approveCreate\").get().setValue(Boolean.FALSE.toString());\n-        form.getProperty(\"rejectReason\").get().setValue(\"I don't like him.\");\n-        userTO = userService3.submitForm(form);\n-        assertNotNull(userTO);\n-        assertEquals(\"rejected\", userTO.getStatus());\n-\n-        // 6. check that rejected user was not propagated to external resource (SYNCOPE-364)\n-        JdbcTemplate jdbcTemplate = new JdbcTemplate(testDataSource);\n-        Exception exception = null;\n-        try {\n-            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n-                    new String[] { userTO.getUsername() }, Integer.class);\n-        } catch (EmptyResultDataAccessException e) {\n-            exception = e;\n-        }\n-        assertNotNull(exception);\n-    }\n-\n-    @Test\n-    public void createWithApproval() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        // read forms *before* any operation\n-        PagedResult<WorkflowFormTO> forms =\n-                userWorkflowService.getForms(new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        int preForms = forms.getTotalCount();\n-\n-        UserTO userTO = UserITCase.getUniqueSampleTO(\"createWithApproval@syncope.apache.org\");\n-        userTO.getResources().add(RESOURCE_NAME_TESTDB);\n-\n-        // User with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f are defined in workflow as subject to approval\n-        userTO.getMemberships().add(\n-                new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n-\n-        // 1. create user and verify that no propagation occurred)\n-        ProvisioningResult<UserTO> result = createUser(userTO);\n-        assertNotNull(result);\n-        userTO = result.getEntity();\n-        assertEquals(1, userTO.getMemberships().size());\n-        assertEquals(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\", userTO.getMemberships().get(0).getGroupKey());\n-        assertEquals(\"createApproval\", userTO.getStatus());\n-        assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB), userTO.getResources());\n-\n-        assertTrue(result.getPropagationStatuses().isEmpty());\n-\n-        JdbcTemplate jdbcTemplate = new JdbcTemplate(testDataSource);\n-\n-        Exception exception = null;\n-        try {\n-            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n-                    new String[] { userTO.getUsername() }, Integer.class);\n-        } catch (EmptyResultDataAccessException e) {\n-            exception = e;\n-        }\n-        assertNotNull(exception);\n-\n-        // 2. request if there is any pending form for user just created\n-        forms = userWorkflowService.getForms(new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        assertEquals(preForms + 1, forms.getTotalCount());\n-\n-        // 3. as admin, request for changes: still pending approval\n-        String updatedUsername = \"changed-\" + UUID.randomUUID().toString();\n-        userTO.setUsername(updatedUsername);\n-        userWorkflowService.executeTask(\"default\", userTO);\n-\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n-        assertNotNull(form);\n-        assertNotNull(form.getTaskId());\n-        assertNotNull(form.getUserTO());\n-        assertEquals(updatedUsername, form.getUserTO().getUsername());\n-        assertNull(form.getUserPatch());\n-        assertNull(form.getOwner());\n-\n-        // 4. claim task (as admin)\n-        form = userWorkflowService.claimForm(form.getTaskId());\n-        assertNotNull(form);\n-        assertNotNull(form.getTaskId());\n-        assertNotNull(form.getUserTO());\n-        assertEquals(updatedUsername, form.getUserTO().getUsername());\n-        assertNull(form.getUserPatch());\n-        assertNotNull(form.getOwner());\n-\n-        // 5. approve user (and verify that propagation occurred)\n-        form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n-        userTO = userWorkflowService.submitForm(form);\n-        assertNotNull(userTO);\n-        assertEquals(updatedUsername, userTO.getUsername());\n-        assertEquals(\"active\", userTO.getStatus());\n-        assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB), userTO.getResources());\n-\n-        String username = queryForObject(\n-                jdbcTemplate, 50, \"SELECT id FROM test WHERE id=?\", String.class, userTO.getUsername());\n-        assertEquals(userTO.getUsername(), username);\n-\n-        // 6. update user\n-        UserPatch userPatch = new UserPatch();\n-        userPatch.setKey(userTO.getKey());\n-        userPatch.setPassword(new PasswordPatch.Builder().value(\"anotherPassword123\").build());\n-\n-        userTO = updateUser(userPatch).getEntity();\n-        assertNotNull(userTO);\n-    }\n-\n-    @Test\n-    public void updateApproval() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        // read forms *before* any operation\n-        PagedResult<WorkflowFormTO> forms = userWorkflowService.getForms(\n-                new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        int preForms = forms.getTotalCount();\n-\n-        UserTO created = createUser(UserITCase.getUniqueSampleTO(\"updateApproval@syncope.apache.org\")).getEntity();\n-        assertNotNull(created);\n-        assertEquals(\"/\", created.getRealm());\n-        assertEquals(0, created.getMemberships().size());\n-\n-        UserPatch patch = new UserPatch();\n-        patch.setKey(created.getKey());\n-        patch.getMemberships().add(new MembershipPatch.Builder().group(\"b1f7c12d-ec83-441f-a50e-1691daaedf3b\").build());\n-\n-        SyncopeClient client = clientFactory.create(created.getUsername(), \"password123\");\n-        Response response = client.getService(UserSelfService.class).update(patch);\n-        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n-        assertEquals(\"updateApproval\", userService.read(created.getKey()).getStatus());\n-\n-        forms = userWorkflowService.getForms(new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        assertEquals(preForms + 1, forms.getTotalCount());\n-\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(created.getKey());\n-        assertNotNull(form);\n-        assertNotNull(form.getTaskId());\n-        assertNull(form.getOwner());\n-        assertNotNull(form.getUserTO());\n-        assertNotNull(form.getUserPatch());\n-        assertEquals(patch, form.getUserPatch());\n-\n-        // as admin, request for more changes: still pending approval\n-        patch.setRealm(new StringReplacePatchItem.Builder().value(\"/even/two\").build());\n-        response = userService.update(patch);\n-        assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n-        assertEquals(\"updateApproval\", userService.read(created.getKey()).getStatus());\n-\n-        // the patch is updated in the approval form\n-        form = userWorkflowService.getFormForUser(created.getKey());\n-        assertEquals(patch, form.getUserPatch());\n-\n-        // approve the user\n-        form = userWorkflowService.claimForm(form.getTaskId());\n-        form.getProperty(\"approveUpdate\").get().setValue(Boolean.TRUE.toString());\n-        userWorkflowService.submitForm(form);\n-\n-        // verify that the approved user bears both original and further changes\n-        UserTO approved = userService.read(created.getKey());\n-        assertNotNull(approved);\n-        assertEquals(\"/even/two\", approved.getRealm());\n-        assertEquals(1, approved.getMemberships().size());\n-        assertNotNull(approved.getMembership(\"b1f7c12d-ec83-441f-a50e-1691daaedf3b\").get());\n-    }\n-\n-    @Test\n-    public void availableTasks() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        UserTO user = createUser(UserITCase.getUniqueSampleTO(\"availableTasks@apache.org\")).getEntity();\n-        assertEquals(\"active\", user.getStatus());\n-\n-        List<WorkflowTaskTO> tasks = userWorkflowService.getAvailableTasks(user.getKey());\n-        assertNotNull(tasks);\n-        assertTrue(tasks.stream().anyMatch(task -> \"update\".equals(task.getName())));\n-        assertTrue(tasks.stream().anyMatch(task -> \"suspend\".equals(task.getName())));\n-        assertTrue(tasks.stream().anyMatch(task -> \"delete\".equals(task.getName())));\n-    }\n-\n-    @Test\n-    public void issueSYNCOPE15() {\n-        assumeTrue(FlowableDetector.isFlowableEnabledForUsers(syncopeService));\n-\n-        // read forms *before* any operation\n-        PagedResult<WorkflowFormTO> forms = userWorkflowService.getForms(\n-                new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        int preForms = forms.getTotalCount();\n-\n-        UserTO userTO = UserITCase.getUniqueSampleTO(\"issueSYNCOPE15@syncope.apache.org\");\n-        userTO.getResources().clear();\n-        userTO.getVirAttrs().clear();\n-        userTO.getDerAttrs().clear();\n-        userTO.getMemberships().clear();\n-\n-        // Users with group 0cbcabd2-4410-4b6b-8f05-a052b451d18f are defined in workflow as subject to approval\n-        userTO.getMemberships().add(\n-                new MembershipTO.Builder().group(\"0cbcabd2-4410-4b6b-8f05-a052b451d18f\").build());\n-\n-        // 1. create user with group 9 (and verify that no propagation occurred)\n-        userTO = createUser(userTO).getEntity();\n-        assertNotNull(userTO);\n-        assertNotEquals(0L, userTO.getKey());\n-        assertNotNull(userTO.getCreationDate());\n-        assertNotNull(userTO.getCreator());\n-        assertNotNull(userTO.getLastChangeDate());\n-        assertNotNull(userTO.getLastModifier());\n-        assertEquals(userTO.getCreationDate(), userTO.getLastChangeDate());\n-\n-        // 2. request if there is any pending form for user just created\n-        forms = userWorkflowService.getForms(new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        assertEquals(preForms + 1, forms.getTotalCount());\n-\n-        WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n-        assertNotNull(form);\n-\n-        // 3. first claim by bellini ....\n-        UserWorkflowService userService3 = clientFactory.create(\"bellini\", ADMIN_PWD).\n-                getService(UserWorkflowService.class);\n-        form = userService3.claimForm(form.getTaskId());\n-        assertNotNull(form);\n-        assertNotNull(form.getTaskId());\n-        assertNotNull(form.getOwner());\n-\n-        // 4. second claim task by admin\n-        form = userWorkflowService.claimForm(form.getTaskId());\n-        assertNotNull(form);\n-\n-        // 5. approve user\n-        form.getProperty(\"approveCreate\").get().setValue(Boolean.TRUE.toString());\n-\n-        // 6. submit approve\n-        userTO = userWorkflowService.submitForm(form);\n-        assertNotNull(userTO);\n-        assertEquals(\n-                preForms,\n-                userWorkflowService.getForms(\n-                        new WorkflowFormQuery.Builder().page(1).size(1000).build()).getTotalCount());\n-        assertNull(userWorkflowService.getFormForUser(userTO.getKey()));\n-\n-        // 7.check that no more forms are still to be processed\n-        forms = userWorkflowService.getForms(new WorkflowFormQuery.Builder().page(1).size(1000).build());\n-        assertEquals(preForms, forms.getTotalCount());\n-    }\n-}"},{"sha":"7bb0d1e485a6525fcf4aadd67f857a1ca223465d","filename":"fit/core-reference/src/test/resources/addFlowableToContent.xsl","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2FaddFlowableToContent.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2FaddFlowableToContent.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2FaddFlowableToContent.xsl?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -24,19 +24,19 @@\n     <dataset>\n       <xsl:apply-templates/>\n       \n-      <ACT_RU_EXECUTION ID_=\"4\" REV_=\"2\" PROC_INST_ID_=\"4\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n+      <ACT_RU_EXECUTION ID_=\"4\" REV_=\"2\" PROC_INST_ID_=\"4\" BUSINESS_KEY_=\"userWorkflow:1417acbe-cbf6-4277-9372-e75e04f97000\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n       <ACT_RU_TASK ID_=\"5\" REV_=\"2\" EXECUTION_ID_=\"4\" PROC_INST_ID_=\"4\" PROC_DEF_ID_=\"userWorkflow:1:4\" NAME_=\"Active\" TASK_DEF_KEY_=\"active\" PRIORITY_=\"50\" CREATE_TIME_=\"2013-02-25T17:19:03+0100\"/>\n \n-      <ACT_RU_EXECUTION ID_=\"6\" REV_=\"2\" PROC_INST_ID_=\"6\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n+      <ACT_RU_EXECUTION ID_=\"6\" REV_=\"2\" PROC_INST_ID_=\"6\" BUSINESS_KEY_=\"userWorkflow:74cd8ece-715a-44a4-a736-e17b46c4e7e6\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n       <ACT_RU_TASK ID_=\"7\" REV_=\"2\" EXECUTION_ID_=\"6\" PROC_INST_ID_=\"6\" PROC_DEF_ID_=\"userWorkflow:1:4\" NAME_=\"Active\" TASK_DEF_KEY_=\"active\" PRIORITY_=\"50\" CREATE_TIME_=\"2013-02-25T17:19:03+0100\"/>\n \n-      <ACT_RU_EXECUTION ID_=\"8\" REV_=\"2\" PROC_INST_ID_=\"8\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n+      <ACT_RU_EXECUTION ID_=\"8\" REV_=\"2\" PROC_INST_ID_=\"8\" BUSINESS_KEY_=\"userWorkflow:b3cbc78d-32e6-4bd4-92e0-bbe07566a2ee\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n       <ACT_RU_TASK ID_=\"9\" REV_=\"2\" EXECUTION_ID_=\"8\" PROC_INST_ID_=\"8\" PROC_DEF_ID_=\"userWorkflow:1:4\" NAME_=\"Active\" TASK_DEF_KEY_=\"active\" PRIORITY_=\"50\" CREATE_TIME_=\"2013-02-25T17:19:03+0100\"/>\n \n-      <ACT_RU_EXECUTION ID_=\"10\" REV_=\"2\" PROC_INST_ID_=\"10\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n+      <ACT_RU_EXECUTION ID_=\"10\" REV_=\"2\" PROC_INST_ID_=\"10\" BUSINESS_KEY_=\"userWorkflow:c9b2dec2-00a7-4855-97c0-d854842b4b24\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n       <ACT_RU_TASK ID_=\"11\" REV_=\"2\" EXECUTION_ID_=\"10\" PROC_INST_ID_=\"10\" PROC_DEF_ID_=\"userWorkflow:1:4\" NAME_=\"Active\" TASK_DEF_KEY_=\"active\" PRIORITY_=\"50\" CREATE_TIME_=\"2013-02-25T17:19:03+0100\"/>\n \n-      <ACT_RU_EXECUTION ID_=\"12\" REV_=\"2\" PROC_INST_ID_=\"12\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n+      <ACT_RU_EXECUTION ID_=\"12\" REV_=\"2\" PROC_INST_ID_=\"12\" BUSINESS_KEY_=\"userWorkflow:823074dc-d280-436d-a7dd-07399fae48ec\" PROC_DEF_ID_=\"userWorkflow:1:4\" ACT_ID_=\"active\" IS_ACTIVE_=\"1\" IS_CONCURRENT_=\"0\" IS_SCOPE_=\"1\" IS_EVENT_SCOPE_=\"0\" SUSPENSION_STATE_=\"1\"/>\n       <ACT_RU_TASK ID_=\"13\" REV_=\"2\" EXECUTION_ID_=\"12\" PROC_INST_ID_=\"12\" PROC_DEF_ID_=\"userWorkflow:1:4\" NAME_=\"Active\" TASK_DEF_KEY_=\"active\" PRIORITY_=\"50\" CREATE_TIME_=\"2013-02-25T17:19:03+0100\"/>\n     </dataset>\n   </xsl:template>"},{"sha":"6e47934773fb724bacc0e3f45f6c53a0ffccdb65","filename":"fit/core-reference/src/test/resources/console.properties","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -33,15 +33,12 @@ maxWaitTimeOnApplyChanges=30\n \n csrf=false\n \n-flowableModelerDirectory=${flowable-modeler.directory}\n-\n reconciliationReportKey=c3520ad9-179f-49e7-b315-d684d216dd97\n \n page.dashboard=org.apache.syncope.client.console.pages.Dashboard\n page.realms=org.apache.syncope.client.console.pages.Realms\n page.topology=org.apache.syncope.client.console.topology.Topology\n page.reports=org.apache.syncope.client.console.pages.Reports\n-page.workflow=org.apache.syncope.client.console.pages.Workflow\n page.audit=org.apache.syncope.client.console.pages.Audit\n page.implementations=org.apache.syncope.client.console.pages.Implementations\n page.logs=org.apache.syncope.client.console.pages.Logs"},{"sha":"b834eb6c2138cb938a23bb1c475dc0aedc271e0c","filename":"fit/core-reference/src/test/resources/hotswap-agent.properties","status":"modified","additions":9,"deletions":2,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fhotswap-agent.properties?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,8 +32,15 @@ ${basedir}/../../core/provisioning-api/target/classes,\\\n ${basedir}/../../core/provisioning-java/target/classes/org,\\\n ${basedir}/../../core/workflow-api/target/classes,\\\n ${basedir}/../../core/workflow-java/target/classes/org,\\\n-${basedir}/../../core/workflow-activiti/target/classes/org,\\\n-${basedir}/../../core/migration/target/classes,\\\n+${basedir}/../../ext/flowable/common-lib/target/classes,\\\n+${basedir}/../../ext/flowable/flowable-bpmn/target/classes/org,\\\n+${basedir}/../../ext/flowable/logic/target/classes,\\\n+${basedir}/../../ext/flowable/persistence-api/target/classes,\\\n+${basedir}/../../ext/flowable/persistence-jpa/target/classes/org/apache/syncope/core/persistence/jpa/dao,\\\n+${basedir}/../../ext/flowable/provisioning-api/target/classes,\\\n+${basedir}/../../ext/flowable/provisioning-java/target/classes,\\\n+${basedir}/../../ext/flowable/rest-api/target/classes,\\\n+${basedir}/../../ext/flowable/rest-cxf/target/classes/org,\\\n ${basedir}/../../ext/camel/common-lib/target/classes,\\\n ${basedir}/../../ext/camel/logic/target/classes,\\\n ${basedir}/../../ext/camel/provisioning-camel/target/classes/org,\\"},{"sha":"c0dfc6507128710b0035c30cee09192c3260754d","filename":"installer/src/main/java/org/apache/syncope/installer/files/ConsolePom.java","status":"modified","additions":4,"deletions":82,"changes":86,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsolePom.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsolePom.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FConsolePom.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -22,88 +22,10 @@ public final class ConsolePom {\n \n     public static final String FLOWABLE_PLACEHOLDER = \"</dependencies>\";\n \n-    public static final String FLOWABLE_CONTENT_TO_ADD = \"<dependency>\\n\"\n-            + \"          <groupId>org.flowable</groupId>\\n\"\n-            + \"          <artifactId>flowable-ui-modeler-app</artifactId>\\n\"\n-            + \"          <type>war</type>\\n\"\n-            + \"          <scope>test</scope>\\n\"\n-            + \"        </dependency>\\n\"\n-            + \"  </dependencies>\\n\";\n-\n-    public static final String MODELER_PLACEHOLDER = \"</finalName>\";\n-\n-    public static final String MODELER_CONTENT_TO_ADD = \"</finalName><plugins>\\n\"\n-            + \"          <plugin>\\n\"\n-            + \"            <groupId>org.apache.maven.plugins</groupId>\\n\"\n-            + \"            <artifactId>maven-antrun-plugin</artifactId>\\n\"\n-            + \"            <inherited>true</inherited>\\n\"\n-            + \"            <executions>\\n\"\n-            + \"              <execution>\\n\"\n-            + \"                <id>setupFlowableModeler</id>\\n\"\n-            + \"                <phase>process-resources</phase>\\n\"\n-            + \"                <configuration>\\n\"\n-            + \"                  <target>\\n\"\n-            + \"                <unzip src=\\\"${settings.localRepository}/org/flowable/flowable-ui-modeler-app/\"\n-            + \"${flowable.version}/flowable-ui-modeler-app-${flowable.version}.war\\\" \\n\"\n-            + \"                       dest=\\\"${flowable-modeler.directory}\\\">\\n\" + \"                  <patternset>\\n\"\n-            + \"                    <include name=\\\"WEB-INF/classes/static/**\\\"/>\\n\"\n-            + \"                    <include name=\\\"WEB-INF/lib/flowable-ui-modeler-logic-${flowable.version}.jar\\\"/>\\n\"\n-            + \"                  </patternset>\\n\" + \"                </unzip>\\n\" + \"                \\n\"\n-            + \"                <unzip src=\\\"${flowable-modeler.directory}/WEB-INF/lib/\"\n-            + \"flowable-ui-modeler-logic-${flowable.version}.jar\\\"\\n\"\n-            + \"                       dest=\\\"${flowable-modeler.directory}\\\">\\n\" + \"                  <patternset>\\n\"\n-            + \"                    <include name=\\\"stencilset_bpmn.json\\\"/>\\n\" + \"                  </patternset>\\n\"\n-            + \"                </unzip>\\n\" + \"                \\n\"\n-            + \"                <move todir=\\\"${flowable-modeler.directory}\\\">\\n\"\n-            + \"                  <fileset dir=\\\"${flowable-modeler.directory}/WEB-INF/classes/static/\\\">\\n\"\n-            + \"                    <include name=\\\"**\\\"/>\\n\" + \"                  </fileset>\\n\"\n-            + \"                </move>\\n\"\n-            + \"                <delete dir=\\\"${flowable-modeler.directory}/WEB-INF\\\"/>\\n\"\n-            + \"                \\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/index.html\\\"\\n\"\n-            + \"                         token=\\\"&lt;/head&gt;\\\"\\n\"\n-            + \"                         value=\\\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = \"\n-            + \"refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"\n-            + \"\\\"/>\\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/index.html\\\"\\n\"\n-            + \"                         token=\\\" ng-click=&quot;backToLanding()&quot;\\\"\\n\"\n-            + \"                         value=\\\" disabled=&quot;disabled&quot;\\\"/>\\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/index.html\\\"\\n\"\n-            + \"                         token=\\\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot;\\\"\\n\"\n-            + \"                         value=\\\"&lt;ul class=&quot;nav navbar-nav&quot; id=&quot;main-nav&quot; \"\n-            + \"style=&quot;display: none;&quot;\\\"/>\\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/index.html\\\"\\n\"\n-            + \"                         token=\\\"&lt;div class=&quot;pull-right\\\"\\n\"\n-            + \"                         value=\\\"&lt;div style=&quot;display: none;&quot; class=&quot;pull-right\\\"/>\\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/editor-app/editor.html\\\"\\n\"\n-            + \"                         token=\\\"&lt;div class=&quot;btn-group pull-right&quot;\\\"\\n\"\n-            + \"                         value=\\\"&lt;div style=&quot;display: none;&quot; class=&quot;btn-group \"\n-            + \"pull-right&quot;\\\"/>\\n\"\n-            + \"                <replace file=\\\"${flowable-modeler.directory}/editor-app/configuration/\"\n-            + \"toolbar-default-actions.js\\\"\\n\"\n-            + \"                         token=\\\"$location.path('/processes');\\\"\\n\"\n-            + \"                         value=\\\"window.close();\\\"/>\\n\" + \" \\n\"\n-            + \"                <copy file=\\\"${basedir}/src/main/resources/app-cfg.js\\\" \\n\"\n-            + \"                      todir=\\\"${flowable-modeler.directory}/scripts\\\"\\n\"\n-            + \"                      overwrite=\\\"true\\\"/>\\n\"\n-            + \"                <copy file=\\\"${basedir}/src/main/resources/url-config.js\\\" \\n\"\n-            + \"                      todir=\\\"${flowable-modeler.directory}/editor-app/configuration\\\"\\n\"\n-            + \"                      overwrite=\\\"true\\\"/>\\n\"\n-            + \"                <copy file=\\\"${basedir}/src/main/resources/toolbar.js\\\" \\n\"\n-            + \"                      todir=\\\"${flowable-modeler.directory}/editor-app/configuration\\\"\\n\"\n-            + \"                      overwrite=\\\"true\\\"/>\\n\"\n-            + \"                <copy file=\\\"${basedir}/src/main/resources/save-model.html\\\" \\n\"\n-            + \"                      todir=\\\"${flowable-modeler.directory}/editor-app/popups\\\"\\n\"\n-            + \"                      overwrite=\\\"true\\\"/>\"\n-            + \"                  </target>\\n\"\n-            + \"                </configuration>\\n\"\n-            + \"                <goals>\\n\"\n-            + \"                  <goal>run</goal>\\n\"\n-            + \"                </goals>\\n\"\n-            + \"              </execution>\\n\"\n-            + \"            </executions>\\n\"\n-            + \"          </plugin>\\n\"\n-            + \"        </plugins>\";\n+    public static final String FLOWABLE_CONTENT_TO_ADD = \"    <dependency>\\n\"\n+            + \"      <groupId>org.apache.syncope.ext.flowable</groupId>\\n\"\n+            + \"      <artifactId>syncope-ext-flowable-client-console</artifactId>\\n\"\n+            + \"      <version>${project.version}</version>\\n\" + \"    </dependency>\\n\";\n \n     private ConsolePom() {\n         // private constructor for static utility class"},{"sha":"044da8a1053b564ae44b25b1cfbb11a077441266","filename":"installer/src/main/java/org/apache/syncope/installer/files/CorePom.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCorePom.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCorePom.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FCorePom.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,9 +32,9 @@ public final class CorePom {\n     public static final String FLOWABLE_PLACEHOLDER = \"</dependencies>\";\n \n     public static final String FLOWABLE_CONTENT_TO_ADD = \"    <dependency>\\n\"\n-            + \"      <groupId>org.apache.syncope.core</groupId>\\n\"\n-            + \"      <artifactId>syncope-core-workflow-flowable</artifactId>\\n\"\n-            + \"    </dependency>\\n\"\n+            + \"      <groupId>org.apache.syncope.ext.flowable</groupId>\\n\"\n+            + \"      <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\\n\"\n+            + \"        </dependency>\\n\"\n             + \"  </dependencies>\\n\";\n \n     private CorePom() {"},{"sha":"e1c43b4e12a4fa341d47b746e26c5804b91413bf","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":12,"deletions":16,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -41,18 +41,17 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         final String confDirectory = args[6];\n         final String logsDirectory = args[7];\n         final String bundlesDirectory = args[8];\n-        final String modelerDirectory = args[9];\n-        final String syncopeVersion = args[10];\n-        final String syncopeAdminPassword = args[11];\n-        final boolean isProxyEnabled = Boolean.valueOf(args[12]);\n-        final String proxyHost = args[13];\n-        final String proxyPort = args[14];\n-        final String proxyUser = args[15];\n-        final String proxyPwd = args[16];\n-        final boolean mavenProxyAutoconf = Boolean.valueOf(args[17]);\n-        final boolean swagger = Boolean.valueOf(args[18]);\n-        final boolean flowable = Boolean.valueOf(args[19]);\n-        final String jwsKey = args[20];\n+        final String syncopeVersion = args[9];\n+        final String syncopeAdminPassword = args[10];\n+        final boolean isProxyEnabled = Boolean.valueOf(args[11]);\n+        final String proxyHost = args[12];\n+        final String proxyPort = args[13];\n+        final String proxyUser = args[14];\n+        final String proxyPwd = args[15];\n+        final boolean mavenProxyAutoconf = Boolean.valueOf(args[16]);\n+        final boolean swagger = Boolean.valueOf(args[17]);\n+        final boolean flowable = Boolean.valueOf(args[18]);\n+        final String jwsKey = args[19];\n \n         setSyncopeInstallDir(installPath, artifactId);\n \n@@ -103,7 +102,6 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         fileSystemUtils.createDirectory(confDirectory);\n         fileSystemUtils.createDirectory(logsDirectory);\n         fileSystemUtils.createDirectory(bundlesDirectory);\n-        fileSystemUtils.createDirectory(modelerDirectory);\n \n         if (flowable) {\n             File pomFile = new File(\n@@ -129,15 +127,13 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n             contentPomFile = fileSystemUtils.readFile(pomFile);\n             fileSystemUtils.writeToFile(\n                     pomFile,\n-                    contentPomFile.replace(ConsolePom.FLOWABLE_PLACEHOLDER, ConsolePom.FLOWABLE_CONTENT_TO_ADD).\n-                            replace(ConsolePom.MODELER_PLACEHOLDER, ConsolePom.MODELER_CONTENT_TO_ADD));\n+                    contentPomFile.replace(ConsolePom.FLOWABLE_PLACEHOLDER, ConsolePom.FLOWABLE_CONTENT_TO_ADD));\n         }\n \n         final Properties syncopeProperties = new Properties();\n         syncopeProperties.setProperty(\"conf.directory\", confDirectory);\n         syncopeProperties.setProperty(\"log.directory\", logsDirectory);\n         syncopeProperties.setProperty(\"bundles.directory\", bundlesDirectory);\n-        syncopeProperties.setProperty(\"flowable-modeler.directory\", modelerDirectory);\n         mavenUtils.mvnCleanPackageWithProperties(\n                 installPath + File.separator + artifactId, syncopeProperties, customMavenProxySettings);\n     }"},{"sha":"6f5c79aaf054857419a6e56d905666a33fc56273","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ContainerProcess.java","status":"modified","additions":13,"deletions":20,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FContainerProcess.java?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -73,8 +73,6 @@ public final class ContainerProcess extends BaseProcess {\n \n     private String bundlesDirectory;\n \n-    private String modelerDirectory;\n-\n     private boolean withDataSource;\n \n     private boolean jbossSsl;\n@@ -83,8 +81,6 @@ public final class ContainerProcess extends BaseProcess {\n \n     private String jbossPort;\n \n-    private String jbossJdbcModuleName;\n-\n     private String jbossAdminUsername;\n \n     private String jbossAdminPassword;\n@@ -121,21 +117,19 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         confDirectory = args[13];\n         logsDirectory = args[14];\n         bundlesDirectory = args[15];\n-        modelerDirectory = args[16];\n-        withDataSource = Boolean.valueOf(args[17]);\n-        jbossSsl = Boolean.valueOf(args[18]);\n-        jbossHost = args[19];\n-        jbossPort = args[20];\n-        jbossJdbcModuleName = args[21];\n-        jbossAdminUsername = args[22];\n-        jbossAdminPassword = args[23];\n-        jbossManagementPort = args[24];\n-        isProxyEnabled = Boolean.valueOf(args[25]);\n-        proxyHost = args[26];\n-        proxyPort = args[27];\n-        proxyUser = args[28];\n-        proxyPwd = args[29];\n-        mavenProxyAutoconf = Boolean.valueOf(args[30]);\n+        withDataSource = Boolean.valueOf(args[16]);\n+        jbossSsl = Boolean.valueOf(args[17]);\n+        jbossHost = args[18];\n+        jbossPort = args[19];\n+        jbossAdminUsername = args[20];\n+        jbossAdminPassword = args[21];\n+        jbossManagementPort = args[22];\n+        isProxyEnabled = Boolean.valueOf(args[23]);\n+        proxyHost = args[24];\n+        proxyPort = args[25];\n+        proxyUser = args[26];\n+        proxyPwd = args[27];\n+        mavenProxyAutoconf = Boolean.valueOf(args[28]);\n \n         handler.logOutput(\"Configure web.xml file according to \" + selectedContainer + \" properties\", true);\n         InstallLog.getInstance().info(\"Configure web.xml file according to \" + selectedContainer + \" properties\");\n@@ -211,7 +205,6 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         mvnProperties.setProperty(\"conf.directory\", confDirectory);\n         mvnProperties.setProperty(\"log.directory\", logsDirectory);\n         mvnProperties.setProperty(\"bundles.directory\", bundlesDirectory);\n-        mvnProperties.setProperty(\"flowable-modeler.directory\", modelerDirectory);\n         mavenUtils.mvnCleanPackageWithProperties(\n                 installPath + File.separator + artifactId, mvnProperties, customMavenProxySettings);\n "},{"sha":"07de8801bd7a855af9ac78f9d8d6c54a797b4558","filename":"installer/src/main/resources/izpack/ProcessPanel.Spec.xml","status":"modified","additions":24,"deletions":27,"changes":51,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FProcessPanel.Spec.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -35,18 +35,17 @@ under the License.\n       <arg>$mvn.conf.directory</arg><!-- 6 -->\n       <arg>$mvn.log.directory</arg><!-- 7 -->\n       <arg>$mvn.bundle.directory</arg><!-- 8 -->\n-      <arg>$mvn.modeler.directory</arg><!-- 9 -->\n-      <arg>$mvn.syncope.version</arg><!-- 10 -->\n-      <arg>$mvn.syncope.admin.password</arg><!-- 11 -->\n-      <arg>$mvn.proxy</arg><!-- 12 -->\n-      <arg>$mvn.proxy.host</arg><!-- 13 -->\n-      <arg>$mvn.proxy.port</arg><!-- 14 -->\n-      <arg>$mvn.proxy.user</arg><!-- 15 -->\n-      <arg>$mvn.proxy.pwd</arg><!-- 16 -->\n-      <arg>$mvn.proxy.autoconf</arg><!-- 17 -->\n-      <arg>$options.swagger</arg><!-- 18 -->\n-      <arg>$options.flowable.workflow.adapter</arg><!-- 19 -->\n-      <arg>$mvn.jws.key</arg><!-- 20 -->\n+      <arg>$mvn.syncope.version</arg><!-- 9 -->\n+      <arg>$mvn.syncope.admin.password</arg><!-- 10 -->\n+      <arg>$mvn.proxy</arg><!-- 11 -->\n+      <arg>$mvn.proxy.host</arg><!-- 12 -->\n+      <arg>$mvn.proxy.port</arg><!-- 13 -->\n+      <arg>$mvn.proxy.user</arg><!-- 14 -->\n+      <arg>$mvn.proxy.pwd</arg><!-- 15 -->\n+      <arg>$mvn.proxy.autoconf</arg><!-- 16 -->\n+      <arg>$options.swagger</arg><!-- 17 -->\n+      <arg>$options.flowable.workflow.adapter</arg><!-- 18 -->\n+      <arg>$mvn.jws.key</arg><!-- 19 -->\n     </executeclass>\n   </job>\n   <job name=\"Persistence configuration...\">\n@@ -79,21 +78,19 @@ under the License.\n       <arg>$mvn.conf.directory</arg><!-- 13 -->\n       <arg>$mvn.log.directory</arg><!-- 14 -->\n       <arg>$mvn.bundle.directory</arg><!-- 15 -->\n-      <arg>$mvn.modeler.directory</arg><!-- 16 -->\n-      <arg>$with.datasuorce</arg><!-- 17 -->\n-      <arg>$jboss.container.ssl</arg><!-- 18 -->\n-      <arg>$jboss.container.host</arg><!-- 19 -->\n-      <arg>$jboss.container.port</arg><!-- 20 -->\n-      <arg>$jboss.container.jdbc.module</arg><!-- 21 -->\n-      <arg>$jboss.container.user</arg><!-- 22 -->\n-      <arg>$jboss.container.pwd</arg><!-- 23 -->\n-      <arg>$jboss.container.management.port</arg><!-- 24 -->\n-      <arg>$mvn.proxy</arg><!-- 25 -->\n-      <arg>$mvn.proxy.host</arg><!-- 26 -->\n-      <arg>$mvn.proxy.port</arg><!-- 27 -->\n-      <arg>$mvn.proxy.user</arg><!-- 28 -->\n-      <arg>$mvn.proxy.pwd</arg><!-- 29 -->\n-      <arg>$mvn.proxy.autoconf</arg><!-- 30 -->\n+      <arg>$with.datasuorce</arg><!-- 16 -->\n+      <arg>$jboss.container.ssl</arg><!-- 17 -->\n+      <arg>$jboss.container.host</arg><!-- 18 -->\n+      <arg>$jboss.container.port</arg><!-- 19 -->\n+      <arg>$jboss.container.user</arg><!-- 20 -->\n+      <arg>$jboss.container.pwd</arg><!-- 21 -->\n+      <arg>$jboss.container.management.port</arg><!-- 22 -->\n+      <arg>$mvn.proxy</arg><!-- 23 -->\n+      <arg>$mvn.proxy.host</arg><!-- 24 -->\n+      <arg>$mvn.proxy.port</arg><!-- 25 -->\n+      <arg>$mvn.proxy.user</arg><!-- 26 -->\n+      <arg>$mvn.proxy.pwd</arg><!-- 27 -->\n+      <arg>$mvn.proxy.autoconf</arg><!-- 28 -->\n     </executeclass>\n   </job>\n   <onFail previous=\"true\" next=\"false\" />"},{"sha":"8d7ca08e73fc33556f9daf21b9d3ed6f0b1797cf","filename":"installer/src/main/resources/izpack/userInputLang.xml_eng","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_eng?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,7 +32,6 @@ under the License.\n   <str id=\"archetype.mvn.conf.directory\" txt=\"Conf directory name:\"/>\n   <str id=\"archetype.mvn.log.directory\" txt=\"Log directory name:\"/>\n   <str id=\"archetype.mvn.bundle.directory\" txt=\"Bundle directory name:\"/>\n-  <str id=\"archetype.mvn.modeler.directory\" txt=\"Flowable modeler directory name:\"/>\n   <str id=\"mvn.syncope.version.id\" txt=\"Syncope Version:\"/>\n   <str id=\"mvn.syncope.admin.password.id\" txt=\"Admin Password:\"/>\n   <str id=\"mvn.proxy.id\" txt=\"Use Proxy Server:\"/>"},{"sha":"fd9f26f8a082fc3657728f3fe031f47f6cce0a79","filename":"installer/src/main/resources/izpack/userInputLang.xml_ita","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputLang.xml_ita?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -32,7 +32,6 @@ under the License.\n   <str id=\"archetype.mvn.conf.directory\" txt=\"Conf directory name:\"/>\n   <str id=\"archetype.mvn.log.directory\" txt=\"Log directory name:\"/>\n   <str id=\"archetype.mvn.bundle.directory\" txt=\"Bundle directory name:\"/>\n-  <str id=\"archetype.mvn.modeler.directory\" txt=\"Flowable modeler directory name:\"/>\n   <str id=\"mvn.syncope.version.id\" txt=\"Syncope Version:\"/>\n   <str id=\"mvn.syncope.admin.password.id\" txt=\"Admin Password:\"/>\n   <str id=\"mvn.proxy.id\" txt=\"Usa un Server Proxy:\"/>"},{"sha":"18844fc6d5d1956f195b28765bcde028ea19651a","filename":"installer/src/main/resources/izpack/userInputSpec.xml","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Fizpack%2FuserInputSpec.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -122,9 +122,6 @@ under the License.\n       <spec id=\"options.flowable.workflow.adapter.id\" true=\"true\" false=\"false\" set=\"true\"/>\n     </field>\n     <field type=\"space\"/>\n-    <field type=\"dir\" variable=\"mvn.modeler.directory\" conditionid=\"options.choice.flowable\">\n-      <spec id=\"archetype.mvn.modeler.directory\" size=\"20\" set=\"/var/tmp/syncope/modeler\" mustExist=\"false\" create=\"true\"/>\n-    </field>\n   </panel>\n   \n   <panel id=\"persistence\">"},{"sha":"e640a15da92f0c850dbc710f1750b65b56d7c6f6","filename":"pom.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -439,7 +439,6 @@ under the License.\n     <bundles.directory>${project.build.directory}/bundles</bundles.directory>\n     <connid.location>file:${bundles.directory}/</connid.location>\n     <log.directory>${project.build.directory}/log</log.directory>\n-    <flowable-modeler.directory>${project.build.directory}/flowable-modeler</flowable-modeler.directory>    \n \n     <swagger-core.version>2.0.5</swagger-core.version>    \n     <swagger-ui.version>3.18.2</swagger-ui.version>"},{"sha":"15f6a7722626c994df5e0487f89d55b8e6f256e0","filename":"src/main/asciidoc/reference-guide/concepts/workflow.adoc","status":"modified","additions":0,"deletions":55,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fworkflow.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fworkflow.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fconcepts%2Fworkflow.adoc?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -196,58 +196,3 @@ the following flow (the actual operations on the admin console for the sample ab\n . administrator A claims the approval and is then allowed to manage it\n . administrator A reviews the updated user, with ongoing modification applied (no actual modification performed yet)\n . administrator A can approve or reject such modification\n-\n-===== Identity Recertification\n-\n-Recertification, also referred to as Attestation, is the process of periodically reviewing all the identities and\n-granted accesses, within a given organization.\n-\n-[TIP]\n-====\n-Recertification is the traditional and most effective countermeasure against __privilege creep__, that is the\n-retention of accounts during time even when the user change his role, or even his job. \n-\n-Recertification is a good practice, recommended and often required by international or organizational standards.\n-====\n-\n-Typically, every entity within an Identity Manager needs to be periodically recertified:\n-\n-* *Identities*: Is the user still valid for the organization?\n-* *Accounts*: Is the user still using this account?\n-* *Group Memberships / Entitlements*: Does the user require this functionality?\n-\n-A basic <<tasks-custom,custom task>> implementing identity recertification is provided with the\n-ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n-https://github.com/apache/syncope/blob/syncope-{docVersion}/core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/IdentityRecertification.java[IdentityRecertification^]\n-endif::[]\n-ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n-https://github.com/apache/syncope/blob/master/core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/IdentityRecertification.java[IdentityRecertification^]\n-endif::[]\n-class, which can be used as base to implement more complex recertification processes.\n-\n-Essentially, this task goes through all the available users and checks whether they were already recertified in the\n-past `identity.recertification.day.interval` days - see <<configuration-parameters, below>> for details; when needed,\n-it triggers a specific <<approval,approval>>.\n-\n-The delegated administrator for approving recertifications can be configured by modifying the\n-\"Recertification Request\" task in the workflow definition.\n-\n-.Certifiers are members of the `managingDirector` group\n-====\n-[source,xml]\n-----\n-<userTask id=\"recertificationRequest\" name=\"Recertification Request\"\n-          flowable:formKey=\"recertify\"\n-          flowable:candidateGroups=\"managingDirector\">\n-----\n-====\n-\n-.Certifier is the manager defined in the user's `lastRecertificator` attribute\n-====\n-[source,xml]\n-----\n-<userTask id=\"recertificationRequest\" name=\"Recertification Request\"\n-          flowable:formKey=\"recertify\"\n-          flowable:candidateUser=\"${user.lastRecertificator}\">\n-----\n-===="},{"sha":"504590cdcfc068a11f1305bc13eb80d01efba1f1","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/customization.adoc","status":"modified","additions":13,"deletions":2,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fcustomization.adoc?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -278,14 +278,25 @@ Add the following dependency to `core/pom.xml`:\n [source,xml,subs=\"verbatim,attributes\"]\n ----\n <dependency>\n-  <groupId>org.apache.syncope.core</groupId>\n-  <artifactId>syncope-core-workflow-flowable</artifactId>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-rest-cxf</artifactId>\n   <version>${syncope.version}</version>\n </dependency>\n ----\n \n Copy `core/src/main/resources/all/workflow.properties` to `core/src/main/resources/workflow.properties`.\n \n+Add the following dependency to `console/pom.xml`:\n+\n+[source,xml,subs=\"verbatim,attributes\"]\n+----\n+<dependency>\n+  <groupId>org.apache.syncope.ext.flowable</groupId>\n+  <artifactId>syncope-ext-flowable-client-console</artifactId>\n+  <version>${syncope.version}</version>\n+</dependency>\n+----\n+\n [discrete]\n ===== Enable the <<apache-camel-provisioning-manager>>\n "},{"sha":"7ba4a4db69e3f5a05f02e1247cd29699b483345b","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/configurationparameters.adoc","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fconfigurationparameters.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fconfigurationparameters.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fconfigurationparameters.adoc?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -50,8 +50,6 @@ mechanism to work properly;\n Suspended Users are anyway not allowed to authenticate.\n * `log.lastlogindate` - whether the system updates the `lastLoginDate` field of users upon authentication;\n * `return.password.value` - whether the hashed password value shall be returned when reading users;\n-* `identity.recertification.day.interval` - number of days between\n-<<identity-recertification,identity recertifications>>;\n * `connector.conf.history.size` - how many previous configurations shall be kept for each Connector Instance,\n for usage with <<connectors-resources-history, connectors and resources configuration history management>>;\n * `resource.conf.history.size` - how many previous configurations shall be kept for each External Resource,"},{"sha":"6cf0e6802f693ce2b05c24bacfeef2f9a9b0ff67","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/flowablemodeler.adoc","status":"removed","additions":0,"deletions":46,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/11612399a31d6cee09abfd199772989291b4dd0a/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fflowablemodeler.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/11612399a31d6cee09abfd199772989291b4dd0a/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fflowablemodeler.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fflowablemodeler.adoc?ref=11612399a31d6cee09abfd199772989291b4dd0a","patch":"@@ -1,46 +0,0 @@\n-//\n-// Licensed to the Apache Software Foundation (ASF) under one\n-// or more contributor license agreements.  See the NOTICE file\n-// distributed with this work for additional information\n-// regarding copyright ownership.  The ASF licenses this file\n-// to you under the Apache License, Version 2.0 (the\n-// \"License\"); you may not use this file except in compliance\n-// with the License.  You may obtain a copy of the License at\n-//\n-//   http://www.apache.org/licenses/LICENSE-2.0\n-//\n-// Unless required by applicable law or agreed to in writing,\n-// software distributed under the License is distributed on an\n-// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-// KIND, either express or implied.  See the License for the\n-// specific language governing permissions and limitations\n-// under the License.\n-//\n-==== Enable the Flowable Modeler\n-\n-Due to licensing issues - see\n-https://issues.apache.org/jira/browse/SYNCOPE-439?focusedCommentId=13829896&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13829896[this comment^]\n-for more information - it is not possible to embed the\n-http://www.flowable.org/docs/userguide/index.html#flowableModelerApp[Flowable Modeler^], which provides a powerful\n-graphical web editing interface for Flowable, into any Apache Syncope artifact; thus, some manual steps are required to enable it on a\n-working Apache Syncope deployment, for use with the Admin Console.\n-\n-[WARNING]\n-This procedure requires Apache Maven since it is using a fake project to perform all of the required setup tasks.\n-\n-First of all, generate a new Maven project as described in the\n-ifeval::[\"{backend}\" == \"html5\"]\n-http://syncope.apache.org/docs/getting-started.html[Apache Syncope Getting Started Guide,]\n-endif::[]\n-ifeval::[\"{backend}\" == \"pdf\"]\n-http://syncope.apache.org/docs/getting-started.pdf[Apache Syncope Getting Started Guide,]\n-endif::[]\n-then build via\n-\n-....\n-$ mvn -P all clean install\n-....\n-\n-At this point, copy the `console/target/flowable-modeler/` directory in the desired location of the host where the\n-admin console is deployed, then set the value of `flowableModelerDirectory` with this path in the `console.properties`\n-file."},{"sha":"6f2d6a07c6398ca71e6732ee6c1ec899b1d43fdd","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/systemadministration.adoc","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fsystemadministration.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3cabe08aab4db4a7fb5a9dedb471ac453e2ff713/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fsystemadministration.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fsystemadministration.adoc?ref=3cabe08aab4db4a7fb5a9dedb471ac453e2ff713","patch":"@@ -66,8 +66,6 @@ include::configureconnidlocations.adoc[]\n \n include::importexport.adoc[]\n \n-include::flowablemodeler.adoc[]\n-\n include::connectorbundles.adoc[]\n \n include::emailconfiguration.adoc[]"}]}