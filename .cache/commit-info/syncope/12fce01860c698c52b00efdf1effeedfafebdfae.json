{"sha":"12fce01860c698c52b00efdf1effeedfafebdfae","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjEyZmNlMDE4NjBjNjk4YzUyYjAwZWZkZjFlZmZlZWRmYWZlYmRmYWU=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-21T14:02:59Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-21T14:02:59Z"},"message":"Fixes issue 196\n\nApplied changes inspired by your patch.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247159 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e7e4b8a9ff15b36234349855ebfbe14b2d0e03da","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/e7e4b8a9ff15b36234349855ebfbe14b2d0e03da"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/12fce01860c698c52b00efdf1effeedfafebdfae","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/12fce01860c698c52b00efdf1effeedfafebdfae","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/12fce01860c698c52b00efdf1effeedfafebdfae","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/12fce01860c698c52b00efdf1effeedfafebdfae/comments","author":null,"committer":null,"parents":[{"sha":"12dea2d92a5b3f5d57a88a77cc8cb8b19409b7ff","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/12dea2d92a5b3f5d57a88a77cc8cb8b19409b7ff","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/12dea2d92a5b3f5d57a88a77cc8cb8b19409b7ff"}],"stats":{"total":34,"additions":25,"deletions":9},"files":[{"sha":"18c2bfbe1d3b02d1317c2a6ee343f3b6d7c70e38","filename":"core/src/main/java/org/syncope/core/persistence/propagation/PropagationManager.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FPropagationManager.java?ref=12fce01860c698c52b00efdf1effeedfafebdfae","patch":"@@ -857,12 +857,12 @@ public TaskExec execute(final PropagationTask task,\n             if (hasToBeregistered(task, execution)) {\n                 PropagationTask savedTask = taskDAO.save(task);\n \n-                if (!propagationAttempted.isEmpty()) {\n-                    execution.setStartDate(startDate);\n-                    execution.setMessage(taskExecutionMessage);\n-                    execution.setEndDate(new Date());\n+                execution.setStartDate(startDate);\n+                execution.setMessage(taskExecutionMessage);\n+                execution.setEndDate(new Date());\n+                execution.setTask(savedTask);\n \n-                    execution.setTask(savedTask);\n+                if (!propagationAttempted.isEmpty()) {\n                     execution = taskExecDAO.save(execution);\n \n                     LOG.debug(\"Execution finished: {}\", execution);"},{"sha":"dd3f26531be21247140c67fd89524d351246132f","filename":"core/src/main/java/org/syncope/core/rest/data/TaskDataBinder.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FTaskDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FTaskDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FTaskDataBinder.java?ref=12fce01860c698c52b00efdf1effeedfafebdfae","patch":"@@ -50,15 +50,15 @@ public class TaskDataBinder {\n     /**\n      * Logger.\n      */\n-    protected static final Logger LOG = LoggerFactory.getLogger(\n+    private static final Logger LOG = LoggerFactory.getLogger(\n             TaskDataBinder.class);\n \n     private static final String[] IGNORE_TASK_PROPERTIES = {\n         \"executions\", \"resource\", \"defaultResources\", \"defaultRoles\",\n         \"updateIdentities\"};\n \n     private static final String[] IGNORE_TASK_EXECUTION_PROPERTIES = {\n-        \"task\"};\n+        \"id\", \"task\"};\n \n     @Autowired\n     private ResourceDAO resourceDAO;\n@@ -150,6 +150,9 @@ public TaskExecTO getTaskExecutionTO(final TaskExec execution) {\n         TaskExecTO executionTO = new TaskExecTO();\n         BeanUtils.copyProperties(execution, executionTO,\n                 IGNORE_TASK_EXECUTION_PROPERTIES);\n+        if (execution.getId() != null) {\n+            executionTO.setId(execution.getId());\n+        }\n         executionTO.setTask(execution.getTask().getId());\n \n         return executionTO;"},{"sha":"b809918d35ea1c833fa8696bf275a1652b71604d","filename":"core/src/test/java/org/syncope/core/persistence/dao/TaskTest.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FTaskTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FTaskTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FTaskTest.java?ref=12fce01860c698c52b00efdf1effeedfafebdfae","patch":"@@ -14,9 +14,9 @@\n  */\n package org.syncope.core.persistence.dao;\n \n-import java.util.HashSet;\n import static org.junit.Assert.*;\n \n+import java.util.HashSet;\n import java.util.List;\n import java.util.Set;\n import org.identityconnectors.framework.common.objects.Attribute;\n@@ -45,7 +45,7 @@ public class TaskTest extends AbstractTest {\n     @Test\n     public final void findAll() {\n         List<PropagationTask> plist = taskDAO.findAll(PropagationTask.class);\n-        assertEquals(3, plist.size());\n+        assertEquals(4, plist.size());\n \n         List<SchedTask> sclist = taskDAO.findAll(SchedTask.class);\n         assertEquals(1, sclist.size());"},{"sha":"7f479cd654e5c98a7234bd8364ef60b59e15e18b","filename":"core/src/test/java/org/syncope/core/rest/TaskTestITCase.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java?ref=12fce01860c698c52b00efdf1effeedfafebdfae","patch":"@@ -221,4 +221,14 @@ public void sync() {\n         assertTrue(\"Expected \" + (usersPre + 10) + \", found \" + usersPost,\n                 usersPost == usersPre + 10);\n     }\n+\n+    @Test\n+    public void issue196() {\n+        TaskExecTO execution = restTemplate.getForObject(\n+                BASE_URL + \"task/execute/{taskId}\",\n+                TaskExecTO.class, 6);\n+        assertNotNull(execution);\n+        assertEquals(0, execution.getId());\n+        assertNotNull(execution.getTask());\n+    }\n }"},{"sha":"ef4eb9c1cd18c2e9c83ef0e4c7d125383e6486d0","filename":"core/src/test/resources/content.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/12fce01860c698c52b00efdf1effeedfafebdfae/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=12fce01860c698c52b00efdf1effeedfafebdfae","patch":"@@ -399,6 +399,9 @@\n                  xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E\"/>\n     <Task DTYPE=\"SyncTask\" id=\"4\" resource_name=\"resource-csv\" updateIdentities=\"1\" jobClassName=\"org.syncope.core.scheduling.SyncJob\"/>\n     <Task DTYPE=\"SchedTask\" id=\"5\" jobClassName=\"org.syncope.core.scheduling.SampleJob\" cronExpression=\"0 0 0 1 * ?\"/>\n+    <Task DTYPE=\"PropagationTask\" id=\"6\" propagationMode=\"ASYNC\" resourceOperationType=\"UPDATE\"\n+                 resource_name=\"ws-target-resource-nopropagation\"\n+                 xmlAttributes=\"%3Cset%3E%0A++%3Corg.identityconnectors.framework.common.objects.Name%3E%0A++++%3Cname%3E__NAME__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3EuserId%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Name%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3E__PASSWORD__%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Corg.identityconnectors.common.security.GuardedString%3E%0A++++++++++%3C__readOnly%3Efalse%3C%2F__readOnly%3E%0A++++++++++%3C__disposed%3Efalse%3C%2F__disposed%3E%0A++++++++++%3C__encryptedBytes%3EQTOgwEhIHqtAI%2FYlgDhYc37esEF8VLDMU2IY1ciltrg%3D%3C%2F__encryptedBytes%3E%0A++++++++++%3C__base64SHA1Hash%3EW5%2FrwtdCnI8gAnIUhKcahMEnMMc%3D%3C%2F__base64SHA1Hash%3E%0A++++++++%3C%2Forg.identityconnectors.common.security.GuardedString%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Etype%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Etype%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A++%3Corg.identityconnectors.framework.common.objects.Attribute%3E%0A++++%3Cname%3Efullname%3C%2Fname%3E%0A++++%3Cvalue+class%3D%22java.util.Collections%24UnmodifiableRandomAccessList%22+resolves-to%3D%22java.util.Collections%24UnmodifiableList%22%3E%0A++++++%3Cc+class%3D%22list%22%3E%0A++++++++%3Cstring%3Efullname%3C%2Fstring%3E%0A++++++%3C%2Fc%3E%0A++++++%3Clist+reference%3D%22..%2Fc%22%2F%3E%0A++++%3C%2Fvalue%3E%0A++%3C%2Forg.identityconnectors.framework.common.objects.Attribute%3E%0A%3C%2Fset%3E%0A\"/>\n \n     <RDerSchema name=\"displayProperty\" expression=\"icon + ': ' + show\"/>\n "}]}