{"sha":"c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmMwZTJhZWRlZjUzNjAxMDFhNzhmYjA5MzJjN2VhMTZmYzJhZTNjOGI=","commit":{"author":{"name":"dayash","email":"dima.ayash@tirasa.net","date":"2018-04-26T10:35:05Z"},"committer":{"name":"Francesco Chicchiricc√≤","email":"ilgrosso@apache.org","date":"2018-04-26T11:30:28Z"},"message":"[SYNCOPE-1306] fixing date value without conversion pattern - This closes #73","tree":{"sha":"80b0fcfb670f22dba41b6d6d0aa85eb6fe97c86d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/80b0fcfb670f22dba41b6d6d0aa85eb6fe97c86d"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b/comments","author":{"login":"DimaAy","id":19169906,"node_id":"MDQ6VXNlcjE5MTY5OTA2","avatar_url":"https://avatars.githubusercontent.com/u/19169906?v=4","gravatar_id":"","url":"https://api.github.com/users/DimaAy","html_url":"https://github.com/DimaAy","followers_url":"https://api.github.com/users/DimaAy/followers","following_url":"https://api.github.com/users/DimaAy/following{/other_user}","gists_url":"https://api.github.com/users/DimaAy/gists{/gist_id}","starred_url":"https://api.github.com/users/DimaAy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DimaAy/subscriptions","organizations_url":"https://api.github.com/users/DimaAy/orgs","repos_url":"https://api.github.com/users/DimaAy/repos","events_url":"https://api.github.com/users/DimaAy/events{/privacy}","received_events_url":"https://api.github.com/users/DimaAy/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"c59662741ccfb0e9e9b0ae156ec57b7606e68e83","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c59662741ccfb0e9e9b0ae156ec57b7606e68e83","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c59662741ccfb0e9e9b0ae156ec57b7606e68e83"}],"stats":{"total":32,"additions":24,"deletions":8},"files":[{"sha":"f259eb63d993d33ff1368ced2125492600a928a4","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/AbstractPlainAttrValue.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractPlainAttrValue.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractPlainAttrValue.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FAbstractPlainAttrValue.java?ref=c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","patch":"@@ -256,8 +256,7 @@ public String getValueAsString(final AttrSchemaType type) {\n                 result = getAttr() == null || getAttr().getSchema() == null\n                         || getAttr().getSchema().getConversionPattern() == null\n                         ? FormatUtils.format(getDateValue())\n-                        : FormatUtils.format(\n-                                getDateValue(), false, getAttr().getSchema().getConversionPattern());\n+                        : FormatUtils.format(getDateValue(), false, getAttr().getSchema().getConversionPattern());\n                 break;\n \n             case Binary:"},{"sha":"2f262f2fb52bd96729546266bc4ddb63961a3e43","filename":"core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/utils/FormatUtils.java","status":"modified","additions":23,"deletions":6,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Futils%2FFormatUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Futils%2FFormatUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Futils%2FFormatUtils.java?ref=c0e2aedef5360101a78fb0932c7ea16fc2ae3c8b","patch":"@@ -36,9 +36,7 @@ public final class FormatUtils {\n \n         @Override\n         protected SimpleDateFormat initialValue() {\n-            SimpleDateFormat sdf = new SimpleDateFormat();\n-            sdf.applyPattern(SyncopeConstants.DEFAULT_DATE_PATTERN);\n-            return sdf;\n+            return new SimpleDateFormat();\n         }\n     };\n \n@@ -62,10 +60,15 @@ public static String format(final Date date, final boolean lenient) {\n \n     public static String format(final Date date, final boolean lenient, final String conversionPattern) {\n         SimpleDateFormat sdf = DATE_FORMAT.get();\n-        if (conversionPattern != null) {\n+\n+        if (conversionPattern == null) {\n+            sdf.applyPattern(SyncopeConstants.DEFAULT_DATE_PATTERN);\n+        } else {\n             sdf.applyPattern(conversionPattern);\n         }\n+\n         sdf.setLenient(lenient);\n+\n         return sdf.format(date);\n     }\n \n@@ -75,10 +78,17 @@ public static String format(final long number) {\n \n     public static String format(final long number, final String conversionPattern) {\n         DecimalFormat df = DECIMAL_FORMAT.get();\n+\n+        String previous = df.toPattern();\n         if (conversionPattern != null) {\n             df.applyPattern(conversionPattern);\n         }\n-        return df.format(number);\n+\n+        String formatted = df.format(number);\n+\n+        df.applyPattern(previous);\n+\n+        return formatted;\n     }\n \n     public static String format(final double number) {\n@@ -87,10 +97,17 @@ public static String format(final double number) {\n \n     public static String format(final double number, final String conversionPattern) {\n         DecimalFormat df = DECIMAL_FORMAT.get();\n+\n+        String previous = df.toPattern();\n         if (conversionPattern != null) {\n             df.applyPattern(conversionPattern);\n         }\n-        return df.format(number);\n+\n+        String formatted = df.format(number);\n+\n+        df.applyPattern(previous);\n+\n+        return formatted;\n     }\n \n     public static Date parseDate(final String source) throws ParseException {"}]}