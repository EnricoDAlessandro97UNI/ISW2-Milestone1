{"sha":"b19fc2ae8720cd1c4b217b26ddf9585272ccb829","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmIxOWZjMmFlODcyMGNkMWM0YjIxN2IyNmRkZjk1ODUyNzJjY2I4Mjk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-03-22T14:42:09Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-03-22T14:42:09Z"},"message":"[SYNCOPE-25] Updating to latest glassfish required a Derby instance to be up and running on port 1527: unfortunately cargo does not seem able to launch it (asadmin start-database is not supported), so I ended up by adding a dedicated maven-antrun-plugin configuration inside the glassfish-it profile\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1303808 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"16412f13a277235dfa094a5c7efe098208cb8440","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/16412f13a277235dfa094a5c7efe098208cb8440"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b19fc2ae8720cd1c4b217b26ddf9585272ccb829","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b19fc2ae8720cd1c4b217b26ddf9585272ccb829","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b19fc2ae8720cd1c4b217b26ddf9585272ccb829","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b19fc2ae8720cd1c4b217b26ddf9585272ccb829/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"611325b9e844a993865feef385b062aed1db70c8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/611325b9e844a993865feef385b062aed1db70c8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/611325b9e844a993865feef385b062aed1db70c8"}],"stats":{"total":114,"additions":111,"deletions":3},"files":[{"sha":"9c934154fde370318f22417334b30df851a5f5ef","filename":"core/pom.xml","status":"modified","additions":108,"deletions":1,"changes":109,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b19fc2ae8720cd1c4b217b26ddf9585272ccb829/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b19fc2ae8720cd1c4b217b26ddf9585272ccb829/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=b19fc2ae8720cd1c4b217b26ddf9585272ccb829","patch":"@@ -943,6 +943,10 @@ under the License.\n \n     <profile>\n       <id>glassfish-it</id>\n+      \n+      <properties>\n+        <derby.version>10.8.2.2</derby.version>\n+      </properties>\n \n       <dependencies>\n         <dependency>\n@@ -959,6 +963,19 @@ under the License.\n           <groupId>com.h2database</groupId>\n           <artifactId>h2</artifactId>\n         </dependency>\n+        \n+        <dependency>\n+          <groupId>org.apache.derby</groupId>\n+          <artifactId>derby</artifactId>\n+          <version>${derby.version}</version>\n+          <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+          <groupId>org.apache.derby</groupId>\n+          <artifactId>derbynet</artifactId>\n+          <version>${derby.version}</version>\n+          <scope>test</scope>\n+        </dependency>\n       </dependencies>\n \n       <build>\n@@ -974,6 +991,96 @@ under the License.\n             </configuration>\n           </plugin>\n \n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-antrun-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <executions>\n+              <execution>\n+                <id>start-derby</id>\n+                <phase>pre-integration-test</phase>\n+                <goals>\n+                  <goal>run</goal>\n+                </goals>\n+                <configuration>\n+                  <target>\n+                    <java classname=\"org.apache.derby.drda.NetworkServerControl\" dir=\"${project.build.directory}\"\n+                          classpathref=\"maven.test.classpath\" fork=\"true\" spawn=\"true\">\n+                      <arg line=\"start -noSecurityManager\"/>\n+                    </java>\n+                  </target>\n+                </configuration>\n+              </execution>\n+              <execution>\n+                <id>stop-derby</id>\n+                <phase>post-integration-test</phase>\n+                <goals>\n+                  <goal>run</goal>\n+                </goals>\n+                <configuration>\n+                  <target>\n+                    <java classname=\"org.apache.derby.drda.NetworkServerControl\" \n+                          classpathref=\"maven.test.classpath\">\n+                      <arg line=\"shutdown -noSecurityManager\"/>\n+                    </java>\n+                  </target>\n+                </configuration>\n+              </execution>\n+            </executions>\n+          </plugin>\n+\n+          <!--<plugin>\n+            <groupId>org.codehaus.mojo</groupId>\n+            <artifactId>exec-maven-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <executions>\n+              <execution>\n+                <id>start-derby</id>\n+                <phase>pre-integration-test</phase>\n+                <goals>\n+                  <goal>exec</goal>\n+                </goals>\n+                <configuration>\n+                  <executable>java</executable>\n+                  <classpathScope>test</classpathScope>\n+                  <arguments>\n+                    <argument>-classpath</argument>\n+                    <classpath>\n+                      <dependency>org.apache.derby:derby</dependency>\n+                      <dependency>org.apache.derby:derbynet</dependency>\n+                    </classpath>\n+                    <argument>org.apache.derby.drda.NetworkServerControl</argument>\n+                    <argument>start</argument>\n+                    <argument>-noSecurityManager</argument>\n+                  </arguments>\n+                  <workingDirectory>${project.build.directory}/target/derby</workingDirectory>\n+                </configuration>\n+              </execution>\n+              <execution>\n+                <id>stop-derby</id>\n+                <phase>post-integration-test</phase>\n+                <goals>\n+                  <goal>exec</goal>\n+                </goals>\n+                <configuration>\n+                  <executable>java</executable>\n+                  <classpathScope>test</classpathScope>\n+                  <arguments>\n+                    <argument>-classpath</argument>\n+                    <classpath>\n+                      <dependency>org.apache.derby:derby</dependency>\n+                      <dependency>org.apache.derby:derbynet</dependency>\n+                    </classpath>\n+                    <argument>org.apache.derby.drda.NetworkServerControl</argument>\n+                    <argument>shutdown</argument>\n+                    <argument>-noSecurityManager</argument>\n+                  </arguments>\n+                  <workingDirectory>${project.build.directory}/target/derby</workingDirectory>\n+                </configuration>\n+              </execution>\n+            </executions>\n+          </plugin>-->\n+          \n           <plugin>\n             <groupId>org.codehaus.cargo</groupId>\n             <artifactId>cargo-maven2-plugin</artifactId>\n@@ -982,7 +1089,7 @@ under the License.\n               <container>\n                 <containerId>glassfish3x</containerId>\n                 <zipUrlInstaller>\n-                  <url>http://download.java.net/glassfish/3.1.1/release/glassfish-3.1.1.zip</url>\n+                  <url>http://download.java.net/glassfish/3.1.2/release/glassfish-3.1.2.zip</url>\n                   <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n                   <extractDir>${java.io.tmpdir}</extractDir>\n                 </zipUrlInstaller>"},{"sha":"a670a11c07b5b13a886c76347008bffe6ddce8c2","filename":"core/src/main/webapp/WEB-INF/glassfish-web.xml","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b19fc2ae8720cd1c4b217b26ddf9585272ccb829/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fglassfish-web.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b19fc2ae8720cd1c4b217b26ddf9585272ccb829/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fglassfish-web.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fglassfish-web.xml?ref=b19fc2ae8720cd1c4b217b26ddf9585272ccb829","patch":"@@ -22,10 +22,11 @@ under the License.\n GlassFish Application Server 3.1 Servlet 3.0//EN\" \"http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd\">\n <glassfish-web-app>\n   <context-root>/syncope</context-root>\n-  <resource-ref>\n+  <!-- Uncomment this when using JNDI DataSource -->\n+  <!--<resource-ref>\n     <res-ref-name>jdbc/syncopeDataSource</res-ref-name>\n     <jndi-name>jdbc/syncopeDataSource</jndi-name>\n-  </resource-ref>\n+  </resource-ref>-->\n   <class-loader delegate=\"false\"/>\n   <jsp-config>\n     <property name=\"httpMethods\" value=\"GET,POST,HEAD,PUT,DELETE\"/>"}]}