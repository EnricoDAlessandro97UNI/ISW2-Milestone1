{"sha":"1830e9222630e511f122923bb9118a12013f941f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjE4MzBlOTIyMjYzMGU1MTFmMTIyOTIzYmI5MTE4YTEyMDEzZjk0MWY=","commit":{"author":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2017-04-06T06:55:44Z"},"committer":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2017-04-06T06:56:53Z"},"message":"[SYNCOPE-1009] USER form customization through json file, made minor (but necesary) bugfixes on wizard","tree":{"sha":"6845ea59230f7f5c73a9e6ec7f3009724f50ae91","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6845ea59230f7f5c73a9e6ec7f3009724f50ae91"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1830e9222630e511f122923bb9118a12013f941f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1830e9222630e511f122923bb9118a12013f941f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1830e9222630e511f122923bb9118a12013f941f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1830e9222630e511f122923bb9118a12013f941f/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"c8cef3d92dda92a3c8f81e1740928789d1641d89","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c8cef3d92dda92a3c8f81e1740928789d1641d89","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c8cef3d92dda92a3c8f81e1740928789d1641d89"}],"stats":{"total":460,"additions":361,"deletions":99},"files":[{"sha":"61d08f1950f2016c78b1d2f0b074d1e8dde54410","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/model/CustomAttributesInfo.java","status":"added","additions":62,"deletions":0,"changes":62,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FCustomAttributesInfo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FCustomAttributesInfo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FCustomAttributesInfo.java?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -0,0 +1,62 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.enduser.model;\n+\n+import java.io.Serializable;\n+import java.util.LinkedHashMap;\n+import java.util.Map;\n+\n+public class CustomAttributesInfo implements Serializable {\n+\n+    private static final long serialVersionUID = 878444785696091916L;\n+\n+    private Boolean show = Boolean.TRUE;\n+\n+    private Map<String, ?> attributes = new LinkedHashMap<>();\n+\n+    public CustomAttributesInfo() {\n+    }\n+\n+    public Boolean getShow() {\n+        return show;\n+    }\n+\n+    public void setShow(final Boolean show) {\n+        this.show = show;\n+    }\n+\n+    public Map<String, ?> getAttributes() {\n+        return attributes;\n+    }\n+\n+    public void setAttributes(final Map<String, ?> attributes) {\n+        this.attributes = attributes;\n+    }\n+\n+    public CustomAttributesInfo show(final Boolean value) {\n+        this.show = value;\n+        return this;\n+    }\n+\n+    public CustomAttributesInfo attributes(final Map<String, ?> value) {\n+        this.attributes = value;\n+        return this;\n+    }\n+\n+}"},{"sha":"169d1b465c47f0ebf9b78b61926d9b89dfadf166","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/SchemaResource.java","status":"modified","additions":81,"deletions":9,"changes":90,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -18,17 +18,27 @@\n  */\n package org.apache.syncope.client.enduser.resources;\n \n+import static org.apache.syncope.client.enduser.resources.BaseResource.MAPPER;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n import java.io.IOException;\n import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n import java.util.Collections;\n+import java.util.Comparator;\n+import java.util.HashMap;\n import java.util.List;\n+import java.util.Map;\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n+import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.IterableUtils;\n import org.apache.commons.collections4.Predicate;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.annotations.Resource;\n+import org.apache.syncope.client.enduser.model.CustomAttributesInfo;\n import org.apache.syncope.client.enduser.model.SchemaResponse;\n import org.apache.syncope.common.lib.to.AbstractSchemaTO;\n import org.apache.syncope.common.lib.to.AnyTypeTO;\n@@ -49,6 +59,7 @@ public class SchemaResource extends BaseResource {\n \n     private static final long serialVersionUID = 6453101466981543020L;\n \n+    @SuppressWarnings(\"unchecked\")\n     @Override\n     protected AbstractResource.ResourceResponse newResourceResponse(final IResource.Attributes attributes) {\n         LOG.debug(\"Search all {} any type kind related schemas\", AnyTypeKind.USER.name());\n@@ -92,29 +103,51 @@ public boolean evaluate(final GroupTO item) {\n                 }\n             }\n \n+            Map<String, CustomAttributesInfo> customForm = MAPPER.readValue(request.getReader().readLine(),\n+                    new TypeReference<HashMap<String, CustomAttributesInfo>>() {\n+            });\n+\n             SchemaService schemaService = SyncopeEnduserSession.get().getService(SchemaService.class);\n             final List<AbstractSchemaTO> plainSchemas = classes.isEmpty()\n                     ? Collections.<AbstractSchemaTO>emptyList()\n-                    : schemaService.list(\n-                            new SchemaQuery.Builder().type(SchemaType.PLAIN).anyTypeClasses(classes).build());\n+                    : customForm == null || customForm.isEmpty() || customForm.get(SchemaType.PLAIN.name()) == null\n+                    ? schemaService.list(\n+                            new SchemaQuery.Builder().type(SchemaType.PLAIN).anyTypeClasses(classes).build())\n+                    : customForm.get(SchemaType.PLAIN.name()).getShow()\n+                    ? customizeSchemas(schemaService.list(new SchemaQuery.Builder().type(SchemaType.PLAIN).\n+                            anyTypeClasses(classes).build()), groupParam, customForm.get(SchemaType.PLAIN.name()).\n+                            getAttributes())\n+                    : Collections.<AbstractSchemaTO>emptyList();\n             final List<AbstractSchemaTO> derSchemas = classes.isEmpty()\n                     ? Collections.<AbstractSchemaTO>emptyList()\n-                    : schemaService.list(\n-                            new SchemaQuery.Builder().type(SchemaType.DERIVED).anyTypeClasses(classes).build());\n+                    : customForm == null || customForm.isEmpty() || customForm.get(SchemaType.DERIVED.name()) == null\n+                    ? schemaService.list(\n+                            new SchemaQuery.Builder().type(SchemaType.DERIVED).anyTypeClasses(classes).build())\n+                    : customForm.get(SchemaType.DERIVED.name()).getShow()\n+                    ? customizeSchemas(schemaService.list(new SchemaQuery.Builder().type(SchemaType.DERIVED).\n+                            anyTypeClasses(classes).build()), groupParam, customForm.get(SchemaType.DERIVED.name()).\n+                            getAttributes())\n+                    : Collections.<AbstractSchemaTO>emptyList();\n             final List<AbstractSchemaTO> virSchemas = classes.isEmpty()\n                     ? Collections.<AbstractSchemaTO>emptyList()\n-                    : schemaService.list(\n-                            new SchemaQuery.Builder().type(SchemaType.VIRTUAL).anyTypeClasses(classes).build());\n+                    : customForm == null || customForm.isEmpty() || customForm.get(SchemaType.VIRTUAL.name()) == null\n+                    ? schemaService.list(\n+                            new SchemaQuery.Builder().type(SchemaType.VIRTUAL).anyTypeClasses(classes).build())\n+                    : customForm.get(SchemaType.VIRTUAL.name()).getShow()\n+                    ? customizeSchemas(schemaService.list(new SchemaQuery.Builder().type(SchemaType.VIRTUAL).\n+                            anyTypeClasses(classes).build()), groupParam, customForm.get(SchemaType.VIRTUAL.name()).\n+                            getAttributes())\n+                    : Collections.<AbstractSchemaTO>emptyList();\n \n             if (groupParam != null) {\n                 for (AbstractSchemaTO schema : plainSchemas) {\n-                    schema.setKey(groupParam + \"#\" + schema.getKey());\n+                    schema.setKey(compositeSchemaKey(groupParam, schema.getKey()));\n                 }\n                 for (AbstractSchemaTO schema : derSchemas) {\n-                    schema.setKey(groupParam + \"#\" + schema.getKey());\n+                    schema.setKey(compositeSchemaKey(groupParam, schema.getKey()));\n                 }\n                 for (AbstractSchemaTO schema : virSchemas) {\n-                    schema.setKey(groupParam + \"#\" + schema.getKey());\n+                    schema.setKey(compositeSchemaKey(groupParam, schema.getKey()));\n                 }\n             }\n \n@@ -142,4 +175,43 @@ public void writeData(final IResource.Attributes attributes) throws IOException\n         return response;\n     }\n \n+    private List<AbstractSchemaTO> customizeSchemas(final List<AbstractSchemaTO> schemaTOs, final String groupParam,\n+            final Map<String, ?> customForm) {\n+\n+        if (customForm.isEmpty()) {\n+            return schemaTOs;\n+        }\n+        final boolean isGroupBlank = StringUtils.isBlank(groupParam);\n+\n+        CollectionUtils.filter(schemaTOs, new Predicate<AbstractSchemaTO>() {\n+\n+            @Override\n+            public boolean evaluate(final AbstractSchemaTO object) {\n+                return customForm.containsKey(isGroupBlank\n+                        ? object.getKey()\n+                        : compositeSchemaKey(groupParam, object.getKey()));\n+            }\n+        });\n+\n+        Collections.sort(schemaTOs, new Comparator<AbstractSchemaTO>() {\n+\n+            @Override\n+            public int compare(final AbstractSchemaTO schemaTO1, final AbstractSchemaTO schemaTO2) {\n+                List<String> order = new ArrayList<>(customForm.keySet());\n+                return order.indexOf(isGroupBlank\n+                        ? schemaTO1.getKey()\n+                        : compositeSchemaKey(groupParam, schemaTO1.getKey()))\n+                        - order.indexOf(isGroupBlank\n+                                ? schemaTO2.getKey()\n+                                : compositeSchemaKey(groupParam, schemaTO2.getKey()));\n+            }\n+        });\n+\n+        return schemaTOs;\n+    }\n+\n+    private String compositeSchemaKey(final String prefix, final String schemaKey) {\n+        return prefix + \"#\" + schemaKey;\n+    }\n+\n }"},{"sha":"c8baa53f7e9b67ad1db20b11789a0363fcbff155","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfCreateResource.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -65,7 +65,7 @@ private boolean isSelfRegistrationAllowed() {\n     @Override\n     protected ResourceResponse newResourceResponse(final Attributes attributes) {\n         ResourceResponse response = new ResourceResponse();\n-        response.setContentType(MediaType.APPLICATION_JSON);\n+        response.setContentType(MediaType.TEXT_PLAIN);\n         try {\n             HttpServletRequest request = (HttpServletRequest) attributes.getRequest().getContainerRequest();\n "},{"sha":"2ee22dbb57d28c36cca56cb96dd987b8b993f33f","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfUpdateResource.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -35,6 +35,7 @@\n import org.apache.syncope.client.enduser.SyncopeEnduserConstants;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.annotations.Resource;\n+import org.apache.syncope.common.lib.AnyOperations;\n import org.apache.syncope.common.lib.to.AttrTO;\n import org.apache.syncope.common.lib.to.MembershipTO;\n import org.apache.syncope.common.lib.to.PlainSchemaTO;\n@@ -164,9 +165,10 @@ public boolean evaluate(final MembershipTO item) {\n             }\n             userTO.getVirAttrs().removeAll(membAttrs);\n \n-            // update user\n+            // update user by patch\n             Response res = SyncopeEnduserSession.get().\n-                    getService(userTO.getETagValue(), UserSelfService.class).update(userTO);\n+                    getService(userTO.getETagValue(), UserSelfService.class).update(AnyOperations.diff(userTO,\n+                    SyncopeEnduserSession.get().getSelfTO(), true));\n \n             final String responseMessage = res.getStatusInfo().getFamily().equals(Response.Status.Family.SUCCESSFUL)\n                     ? new StringBuilder()."},{"sha":"9e26dfeeb6e641a33dae4961196235bdb965b21b","filename":"client/enduser/src/main/resources/META-INF/resources/app/configuration/customForm.json","status":"added","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fconfiguration%2FcustomForm.json","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fconfiguration%2FcustomForm.json","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fconfiguration%2FcustomForm.json?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -0,0 +1 @@\n+{}\n\\ No newline at end of file"},{"sha":"73782369de597e738e27691d937912931a64bf19","filename":"client/enduser/src/main/resources/META-INF/resources/app/index.html","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -99,6 +99,7 @@\n   <script src=\"js/services/groupService.js\"></script>\n   <script src=\"js/services/anyService.js\"></script>\n   <script src=\"js/services/saml2IdPService.js\"></script>\n+  <script src=\"js/services/configurationService.js\"></script>\n   <!--controllers-->\n   <script src=\"js/controllers/HomeController.js\"></script>\n   <script src=\"js/controllers/LoginController.js\"></script>"},{"sha":"64d535fb1363ba887894ccc4a738a3583f604627","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/app.js","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -332,7 +332,8 @@ app.run(['$rootScope', '$location', '$state', 'AuthService',\n     };\n   }]);\n app.controller('ApplicationController', ['$scope', '$rootScope', '$location', 'InfoService', 'SAML2IdPService',\n-  function ($scope, $rootScope, $location, InfoService, SAML2IdPService) {\n+  'ConfigurationService',\n+  function ($scope, $rootScope, $location, InfoService, SAML2IdPService, ConfigurationService) {\n     $scope.initApplication = function () {\n       /* \n        * disable by default wizard buttons in self-registration\n@@ -404,6 +405,14 @@ app.controller('ApplicationController', ['$scope', '$rootScope', '$location', 'I\n       $rootScope.getVersion = function () {\n         return $rootScope.version;\n       };\n+      /* \n+       * USER Attributes form customization\n+       */\n+      ConfigurationService.get(\"customForm.json\").then(function (response) {\n+        $rootScope.customForm = response;\n+      }, function (e) {\n+        console.warn(\"Unable to retrieve form customization file provided, applying default configuration.\");\n+      });\n       /* \n        * USER Attributes sorting strategies\n        */"},{"sha":"ed9bc8f1037f559bfa62460cb4bbbe34a3765be4","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/controllers/UserController.js","status":"modified","additions":44,"deletions":14,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -21,10 +21,10 @@\n \n 'use strict';\n \n-angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$location', '$compile', \"$state\",\n-  'AuthService', 'UserSelfService', 'SchemaService', 'RealmService', 'ResourceService', 'SecurityQuestionService',\n+angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$location', \"$state\",\n+  'UserSelfService', 'SchemaService', 'RealmService', 'ResourceService', 'SecurityQuestionService',\n   'GroupService', 'AnyService', 'UserUtil', 'GenericUtil', 'ValidationExecutor', '$translate',\n-  function ($scope, $rootScope, $location, $compile, $state, AuthService, UserSelfService, SchemaService, RealmService,\n+  function ($scope, $rootScope, $location, $state, UserSelfService, SchemaService, RealmService,\n           ResourceService, SecurityQuestionService, GroupService, AnyService, UserUtil, GenericUtil, ValidationExecutor, $translate) {\n \n     $scope.user = {};\n@@ -41,6 +41,7 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n     $scope.captchaInput = {\n       value: \"\"\n     };\n+    $scope.customForm = {};\n \n     $scope.initUser = function () {\n       $scope.dynamicForm = {\n@@ -64,14 +65,24 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n         // initialization is done here synchronously to have all schema fields populated correctly\n         var schemaService;\n         if (group) {\n-          schemaService = SchemaService.getTypeExtSchemas(group, $rootScope.attributesSorting.ASC);\n+          /* \n+           * if you want to sort with custom JS function defined in put also a sorting function as last parameter\n+           * e.g. $rootScope.attributesSorting.ASC\n+           */\n+          schemaService = SchemaService.getTypeExtSchemas(group, $rootScope.customForm);\n         } else {\n-          schemaService = SchemaService.getUserSchemas(anyTypeClass, $rootScope.attributesSorting.ASC);\n+          /* \n+           * if you want to sort with custom JS function defined in put also a sorting function as last parameter\n+           * e.g. $rootScope.attributesSorting.ASC\n+           */\n+          schemaService = SchemaService.getUserSchemas(anyTypeClass, $rootScope.customForm);\n         }\n         schemaService.then(function (schemas) {\n           if (group && (schemas.plainSchemas.length > 0 || schemas.derSchemas.length > 0 || schemas.virSchemas.length > 0))\n             $scope.dynamicForm.groupSchemas.push(group);\n-          //initializing user schemas values\n+          /* \n+           * initializing user schemas values, i.e. USER attributes\n+           */\n           initSchemaValues(schemas);\n         }, function (response) {\n           // parse error response and log\n@@ -90,19 +101,37 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n         // initialize plain attributes\n         for (var i = 0; i < schemas.plainSchemas.length; i++) {\n           var plainSchemaKey = schemas.plainSchemas[i].key;\n+          var initialAttributeValues = $rootScope.customForm != null\n+                  && $rootScope.customForm[\"PLAIN\"] != null\n+                  && $rootScope.customForm[\"PLAIN\"][\"attributes\"] != null\n+                  && $rootScope.customForm[\"PLAIN\"][\"attributes\"][plainSchemaKey] != null\n+                  && $rootScope.customForm[\"PLAIN\"][\"attributes\"][plainSchemaKey].defaultValues\n+                  ? $rootScope.customForm[\"PLAIN\"][\"attributes\"][plainSchemaKey].defaultValues\n+                  : [];\n           if (!$scope.user.plainAttrs[plainSchemaKey]) {\n             $scope.user.plainAttrs[plainSchemaKey] = {\n               schema: plainSchemaKey,\n-              values: []\n+              values: initialAttributeValues\n             };\n-            // initialize multivalue schema and support table: create mode, only first value\n             if (schemas.plainSchemas[i].multivalue) {\n-              $scope.dynamicForm.attributeTable[schemas.plainSchemas[i].key] = {\n-                fields: [schemas.plainSchemas[i].key + \"_\" + 0]\n-              };\n+              // initialize multivalue schema and support table: create mode, default multivalues\n+              if (initialAttributeValues.length > 0) {\n+                // attribute create mode, init empty fields  \n+                $scope.dynamicForm.attributeTable[plainSchemaKey] = {\n+                  fields: []\n+                };\n+                for (var j = 0; j < initialAttributeValues.length; j++) {\n+                  $scope.dynamicForm.attributeTable[plainSchemaKey].fields.push(plainSchemaKey + \"_\" + j);\n+                }\n+              } else {\n+                // initialize multivalue schema and support table: create mode, only first value\n+                $scope.dynamicForm.attributeTable[schemas.plainSchemas[i].key] = {\n+                  fields: [schemas.plainSchemas[i].key + \"_\" + 0]\n+                };\n+              }\n             }\n           } else if (schemas.plainSchemas[i].multivalue) {\n-            // initialize multivalue schema and support table: update mode, all provided values\n+            // initialize multivalue attribute and support table: update mode, all provided values\n             $scope.dynamicForm.attributeTable[schemas.plainSchemas[i].key] = {\n               fields: [schemas.plainSchemas[i].key + \"_\" + 0]\n             };\n@@ -133,12 +162,12 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n               schema: virSchemaKey,\n               values: []\n             };\n-            // initialize multivalue schema and support table: create mode, only first value\n+            // initialize multivalue attribute and support table: create mode, only first value\n             $scope.dynamicForm.virtualAttributeTable[schemas.virSchemas[i].key] = {\n               fields: [schemas.virSchemas[i].key + \"_\" + 0]\n             };\n           } else {\n-            // initialize multivalue schema and support table: update mode, all provided values\n+            // initialize multivalue attribute and support table: update mode, all provided values\n             $scope.dynamicForm.virtualAttributeTable[schemas.virSchemas[i].key] = {\n               fields: [schemas.virSchemas[i].key + \"_\" + 0]\n             };\n@@ -271,6 +300,7 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n           if ($scope.user.mustChangePassword) {\n             $location.path('/mustchangepassword');\n           } else {\n+//            initConfiguration();\n             initProperties();\n           }\n         }, function (e) {"},{"sha":"f67b9261abdd4dcb559cd5d14f8f6ea02632d16f","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/directives/dynamicPlainAttribute.js","status":"modified","additions":14,"deletions":6,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -19,7 +19,7 @@\n \n 'use strict';\n angular.module('self')\n-        .directive('dynamicPlainAttribute', function ($filter) {\n+        .directive('dynamicPlainAttribute', function () {\n           return {\n             restrict: 'E',\n             templateUrl: 'views/dynamicPlainAttribute.html',\n@@ -50,10 +50,10 @@ angular.module('self')\n                       $scope.enumerationValues.push(enumerationValuesSplitted[i]);\n                     }\n                     //SYNCOPE-1024 enumeration keys mgmt\n-                    if ( schema.enumerationKeys ) {\n-                      var enumerationKeysSplitted = schema.enumerationKeys.toString().split( \";\" );\n-                      for ( var i = 0; i < enumerationKeysSplitted.length; i++ ) {\n-                        $scope.enumerationKeys.push( enumerationKeysSplitted[i] );\n+                    if (schema.enumerationKeys) {\n+                      var enumerationKeysSplitted = schema.enumerationKeys.toString().split(\";\");\n+                      for (var i = 0; i < enumerationKeysSplitted.length; i++) {\n+                        $scope.enumerationKeys.push(enumerationKeysSplitted[i]);\n                       }\n                     }\n                     $scope.user.plainAttrs[schema.key].values[index] = $scope.user.plainAttrs[schema.key].values[index]\n@@ -119,12 +119,20 @@ angular.module('self')\n \n                   case \"Boolean\":\n                     $scope.user.plainAttrs[schema.key].values[index] =\n-                            $scope.user.plainAttrs[schema.key].values[index] === \"true\" ? true : false;\n+                            $scope.user.plainAttrs[schema.key].values[index] === \"true\" ? \"true\" : \"false\";\n                     break;\n \n                 }\n               };\n \n+              $scope.customReadonly = function (schemaKey) {\n+                return  $rootScope.customForm != null\n+                        && $rootScope.customForm[\"PLAIN\"] != null\n+                        && $rootScope.customForm[\"PLAIN\"][\"attributes\"] != null\n+                        && $rootScope.customForm[\"PLAIN\"][\"attributes\"][schemaKey] != null\n+                        && $rootScope.customForm[\"PLAIN\"][\"attributes\"][schemaKey].readonly;\n+              };\n+\n               $scope.$watch(function () {\n                 return $scope.user.plainAttrs[$scope.schema.key].values[$scope.index];\n               }, function (newValue, oldValue) {"},{"sha":"85e2934801025169c8f878f520bee1b0bc775542","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/directives/dynamicVirtualAttribute.js","status":"modified","additions":30,"deletions":5,"changes":35,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicVirtualAttribute.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicVirtualAttribute.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicVirtualAttribute.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -28,16 +28,41 @@ angular.module('self')\n               index: \"=\",\n               user: \"=\"\n             },\n-            controller: function ($scope) {\n+            controller: function ($scope, $rootScope) {\n+              var customValues = $rootScope.customForm != null\n+                      && $rootScope.customForm[\"VIRTUAL\"] != null\n+                      && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"] != null\n+                      && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"][$scope.schema.key] != null\n+                      && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"][$scope.schema.key].defaultValues\n+                      ? $rootScope.customForm[\"VIRTUAL\"][\"attributes\"][$scope.schema.key].defaultValues\n+                      : [];\n+\n               $scope.$watch(function () {\n                 return $scope.user.virAttrs[$scope.schema.key].values[$scope.index];\n               }, function (newValue, oldValue) {\n-                $scope.user.virAttrs[$scope.schema.key].values = $scope.user.virAttrs[$scope.schema.key].values\n-                        .filter(function (n) {\n-                          return (n !== undefined && n !== \"\");\n-                        });\n+                if ($scope.user.virAttrs[$scope.schema.key].values\n+                        && $scope.user.virAttrs[$scope.schema.key].values.length > 0) {\n+                  $scope.user.virAttrs[$scope.schema.key].values = $scope.user.virAttrs[$scope.schema.key].values\n+                          .filter(function (n) {\n+                            return (n !== undefined && n !== \"\");\n+                          });\n+                } else {\n+                  $scope.user.virAttrs[$scope.schema.key].values = customValues\n+                          .filter(function (n) {\n+                            return (n !== undefined && n !== \"\");\n+                          });\n+                }\n               });\n+\n+              $scope.customReadonly = function (schemaKey) {\n+                return  $rootScope.customForm != null\n+                        && $rootScope.customForm[\"VIRTUAL\"] != null\n+                        && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"] != null\n+                        && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"][schemaKey] != null\n+                        && $rootScope.customForm[\"VIRTUAL\"][\"attributes\"][schemaKey].readonly;\n+              };\n             }\n             //replace: true\n           };\n+\n         });"},{"sha":"25ee9f279d62dfc9acd620ce048b423f86246210","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/services/configurationService.js","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FconfigurationService.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FconfigurationService.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FconfigurationService.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -0,0 +1,41 @@\n+/* \n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+'use strict';\n+\n+angular.module('self')\n+        .factory('ConfigurationService', ['$q', '$http',\n+          function ($q, $http) {\n+\n+            var configuration = {};\n+\n+            configuration.get = function (filename) {\n+              return  $http.get(\"/syncope-enduser/app/configuration/\" + filename, {cache: false})\n+                      .then(function (response) {\n+                        return response.data;\n+                      }, function (response) {\n+                        console.error(\"Unable to retrieve \" + filename);\n+                        return $q.reject(response.data);\n+                      });\n+            };\n+\n+            return configuration;\n+          }]);\n+\n+"},{"sha":"7412da73e8b698c68b726efb2da23ed90c5cd321","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/services/saml2IdPService.js","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2Fsaml2IdPService.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2Fsaml2IdPService.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2Fsaml2IdPService.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -30,7 +30,7 @@ angular.module('self')\n                       .then(function (response) {\n                         return response.data;\n                       }, function (response) {\n-                        console.error(\"Something went wrong during realms retrieval, exit with status: \", response);\n+                        console.error(\"Something went wrong during saml2Idp extesion retrieval, exit with status: \", response);\n                         return $q.reject(response.data || response.statusText);\n                       });\n             };"},{"sha":"1918bb36d5a89611bb0e2d1bf5dab802e8b8cf36","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/services/schemaService.js","status":"modified","additions":21,"deletions":17,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FschemaService.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FschemaService.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FschemaService.js?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -19,32 +19,36 @@\n \n 'use strict';\n \n-angular.module( 'self' )\n-        .factory( 'SchemaService', [ '$q', '$http',\n-          function ( $q, $http ) {\n+angular.module('self')\n+        .factory('SchemaService', ['$q', '$http',\n+          function ($q, $http) {\n \n-            var schemaService = { };\n+            var schemaService = {};\n \n-            schemaService.getUserSchemas = function ( anyTypeClass, sortingFunction ) {\n-              var classParam = anyTypeClass ? \"?anyTypeClass=\" + encodeURI( anyTypeClass ) : \"\";\n+            schemaService.getUserSchemas = function (anyTypeClass, customForm, sortingFunction) {\n+              var classParam = anyTypeClass ? \"?anyTypeClass=\" + encodeURI(anyTypeClass) : \"\";\n+              var body = customForm ? customForm : {};\n \n-              return  $http.get( \"/syncope-enduser/api/schemas\" + classParam )\n-                      .then( function ( response ) {\n+              return  $http.post(\"/syncope-enduser/api/schemas\" + classParam, body)\n+                      .then(function (response) {\n                         var schemas = response.data;\n-                        schemas.plainSchemas.sort( sortingFunction );\n-                        schemas.derSchemas.sort( sortingFunction );\n-                        schemas.virSchemas.sort( sortingFunction );\n+                        if (sortingFunction) {\n+                          schemas.plainSchemas.sort(sortingFunction);\n+                          schemas.derSchemas.sort(sortingFunction);\n+                          schemas.virSchemas.sort(sortingFunction);\n+                        }\n                         return schemas;\n-                      }, function ( response ) {\n-                        console.error( \"Something went wrong during schema retrieval, exit with status: \", response );\n-                        return $q.reject( response.data || response.statusText );\n-                      } );\n+                      }, function (response) {\n+                        console.error(\"Something went wrong during schema retrieval, exit with status: \", response);\n+                        return $q.reject(response.data || response.statusText);\n+                      });\n             };\n \n-            schemaService.getTypeExtSchemas = function (group) {\n+            schemaService.getTypeExtSchemas = function (group, customForm) {\n               var param = group ? \"?group=\" + encodeURI(group) : \"\";\n+              var body = customForm ? customForm : {};\n \n-              return  $http.get(\"/syncope-enduser/api/schemas\" + param)\n+              return  $http.post(\"/syncope-enduser/api/schemas\" + param, body)\n                       .then(function (response) {\n                         return response.data;\n                       }, function (response) {"},{"sha":"518ab35b885ce81b154483135e325c7bc42d1231","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/captcha.html","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -24,8 +24,8 @@\n         <div id=\"captchaButtons\" style=\"margin-top: 5%; margin-bottom: 10px\">\n           <button id=\"refresh\" type=\"button\" class=\"btn btn-default btn-xs glyphicon glyphicon-refresh\" \n                   ng-click=\"refreshCaptcha()\" title=\"Refresh Captcha\"></button>\n-          <a id=\"refresh\" class=\"btn btn-default btn-xs glyphicon glyphicon-question-sign\" title=\"What is?\" \n-             href=\"https://it.wikipedia.org/wiki/CAPTCHA\"/>\n+          <a id=\"refresh\" class=\"btn btn-default btn-xs glyphicon glyphicon-question-sign\" title=\"What is?\"\n+             href=\"https://it.wikipedia.org/wiki/CAPTCHA\" target=\"_blank\"/>\n         </div>\n         <input class=\"form-control\" style=\"margin:auto; max-width: 260px\" type=\"text\" ng-model=\"input.value\"/>\n       </div>"},{"sha":"b3b5822b61f302bdf144bd0acb9f7acd6446109c","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicPlainAttribute.html","status":"modified","additions":47,"deletions":40,"changes":87,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -16,15 +16,14 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-\n <div ng-switch=\"schema.type\" class=\"schema-type\">\n   <input ng-switch-when=\"String\" class=\"form-control\" type=\"text\"\n          ng-model=\"user.plainAttrs[schema.key].values[index]\"\n          ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n-         ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+         ng-disabled=\"schema.readonly || customReadonly(schema.key)\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n \n   <div ng-switch-when=\"Encrypted\" class=\"input-group input-group-sm\">\n-    <span class=\"input-group-btn\">  \n+    <span class=\"input-group-btn\" ng-disabled=\"schema.readonly || customReadonly(schema.key)\">  \n       <button type=\"button\" class=\"btn btn-default btn-flat\"\n               confirm=\"{{'CONFIRM_REMOVE'| translate}}\"\n               onclick=\"var pwd = $(this).parent().next('input');\n@@ -48,7 +47,7 @@\n     <input class=\"form-control\" type=\"password\" readonly=\"true\"\n            ng-model=\"user.plainAttrs[schema.key].values[index]\"\n            ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n-           ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+           ng-disabled=\"schema.readonly || customReadonly(schema.key)\" ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n     <span class=\"input-group-btn\">  \n       <button type=\"button\" class=\"btn btn-default btn-flat\"\n               onmousedown=\"var pwd = $(this).parent().prev('input');\n@@ -62,59 +61,67 @@\n                     $(this).children().attr('class', 'fa fa-eye');\n                   }\"\n               >\n-        <i class=\"fa fa-eye\"></i>\n-      </button>\n-    </span>\n-  </div>\n+  <i class=\"fa fa-eye\"></i>\n+</button>\n+</span>\n+</div>\n \n-  <div ng-switch-when=\"Boolean\">\n-    <input type=\"checkbox\" ng-model=\"user.plainAttrs[schema.key].values[index]\" ng-required=\"{{schema.mandatoryCondition}}\" \n+<div ng-switch-when=\"Boolean\">\n+  <input type=\"checkbox\" ng-model=\"user.plainAttrs[schema.key].values[index]\" \n+           ng-true-value=\"'true'\" \n+           ng-false-value=\"'false'\" \n+           ng-required=\"{{schema.mandatoryCondition}}\"\n+           ng-disabled=\"schema.readonly || customReadonly(schema.key)\"\n            ng-init=\"initAttribute(schema, index)\" />\n-  </div>\n+    </div>\n \n-  <input ng-switch-when=\"Long\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" \n-         ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n-         ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+    <input ng-switch-when=\"Long\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" \n+           ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n+           ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n \n-  <input ng-switch-when=\"Double\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-         ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n-         ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n-  \n-  <div ng-switch-when=\"Date\" id=\"date\">\n+    <input ng-switch-when=\"Double\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+           ng-required=\"{{schema.mandatoryCondition}}\" validate=\"true\"\n+           ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n+\n+    <div ng-switch-when=\"Date\" id=\"date\">\n       <input type=\"text\" class=\"dateTimePicker\"\n              id=\"dateTimePicker\"\n              kendo-date-time-picker\n              ng-model=\"extendedDate\"\n              ng-required=\"{{schema.mandatoryCondition}}\" close-text=\"Close\"\n              ng-init=\"initAttribute(schema, index)\"\n              ng-change=\"bindDateToModel(selectedDate, extendedDate)\"\n+             ng-disabled=\"schema.readonly || customReadonly(schema.key)\"\n              k-ng-model=\"selectedDate\"\n              data-k-format=languageFormat \n              />\n-  </div>\n+    </div>\n \n-  <div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n-    <select class=\"form-control\"\n-            ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-            ng-required=\"{{schema.mandatoryCondition}}\">\n-      <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">\n-        {{enumerationKeys[$index] || value}}\n-      </option>\n-    </select>\n-  </div>\n+    <div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n+      <select class=\"form-control\"\n+              ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+              ng-required=\"{{schema.mandatoryCondition}}\"\n+              ng-disabled=\"schema.readonly || customReadonly(schema.key)\">\n+        <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">\n+          {{enumerationKeys[$index]|| value}}\n+        </option>\n+      </select>\n+    </div>\n \n-  <div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n-    <input file-input type=\"file\" id=\"fileInput\" name=\"fileInput\"/>\n-    <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n-      <i class=\"glyphicon glyphicon-download\" ></i>\n-    </button>\n-  </div>\n+    <div ng-switch-when=\"Binary\"\n+         ng-disabled=\"schema.readonly || customReadonly(schema.key)\"\n+         ng-init=\"initAttribute(schema, index)\">\n+      <input file-input type=\"file\" id=\"fileInput\" name=\"fileInput\"/>\n+      <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n+        <i class=\"glyphicon glyphicon-download\" ></i>\n+      </button>\n+    </div>\n \n-  <input ng-switch-default class=\"form-control\" type=\"text\"\n-         ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-         ng-required=\"{{schema.mandatoryCondition}}\" \n-         ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"/>\n-</div>\n+    <input ng-switch-default class=\"form-control\" type=\"text\"\n+           ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+           ng-required=\"{{schema.mandatoryCondition}}\" \n+           ng-disabled=\"schema.readonly || customReadonly(schema.key)\" ng-init=\"initAttribute(schema, index)\"/>\n+  </div>\n \n \n "},{"sha":"ee8478465036ea00d9ff0f998d8064409ac09766","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicVirtualAttribute.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1830e9222630e511f122923bb9118a12013f941f/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html?ref=1830e9222630e511f122923bb9118a12013f941f","patch":"@@ -19,5 +19,5 @@\n <p>\n   <input class=\"form-control\" type=\"text\"\n          ng-model=\"user.virAttrs[schema.key].values[index]\"\n-         ng-disabled=\"schema.readonly\"/>\n+         ng-disabled=\"schema.readonly || customReadonly(schema.key)\"/>\n </p>"}]}