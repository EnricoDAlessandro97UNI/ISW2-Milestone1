{"sha":"eca2559de04ffb631e938dd671ca5128faeadd5a","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmVjYTI1NTlkZTA0ZmZiNjMxZTkzOGRkNjcxY2E1MTI4ZmFlYWRkNWE=","commit":{"author":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2014-07-03T09:56:24Z"},"committer":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2014-07-03T09:56:24Z"},"message":"Fixes SYNCOPE-392\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1607576 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"91b5e0d4cd09bb2c293f69507b7c568c145bfcaa","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/91b5e0d4cd09bb2c293f69507b7c568c145bfcaa"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/eca2559de04ffb631e938dd671ca5128faeadd5a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/eca2559de04ffb631e938dd671ca5128faeadd5a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/eca2559de04ffb631e938dd671ca5128faeadd5a","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/eca2559de04ffb631e938dd671ca5128faeadd5a/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"399de2db060bb615807b63d2527d4d7d75da13a5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/399de2db060bb615807b63d2527d4d7d75da13a5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/399de2db060bb615807b63d2527d4d7d75da13a5"}],"stats":{"total":328,"additions":158,"deletions":170},"files":[{"sha":"b0776387e814a523cd368658db2e73bc6a236a9e","filename":"console/src/main/java/org/apache/syncope/console/pages/AbstractSyncTaskModalPage.java","status":"modified","additions":78,"deletions":69,"changes":147,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractSyncTaskModalPage.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -24,7 +24,6 @@\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.to.AbstractSyncTaskTO;\n import org.apache.syncope.common.to.ResourceTO;\n-import org.apache.syncope.common.to.SyncTaskTO;\n import org.apache.syncope.common.types.MatchingRule;\n import org.apache.syncope.common.types.UnmatchingRule;\n import org.apache.syncope.console.commons.Constants;\n@@ -57,26 +56,37 @@ public abstract class AbstractSyncTaskModalPage extends AbstractSchedTaskModalPa\n \n     protected AjaxDropDownChoicePanel<UnmatchingRule> unmatchingRule;\n \n-    public AbstractSyncTaskModalPage(final ModalWindow window, final AbstractSyncTaskTO taskTO,\n-            final PageReference pageRef) {\n+    protected abstract List<String> getSyncActions();\n \n-        super(window, taskTO, pageRef);\n+    final IModel<List<String>> allResources = new LoadableDetachableModel<List<String>>() {\n \n-        final IModel<List<String>> allResources = new LoadableDetachableModel<List<String>>() {\n+        private static final long serialVersionUID = 5275935387613157437L;\n \n-            private static final long serialVersionUID = 5275935387613157437L;\n+        @Override\n+        protected List<String> load() {\n+            final List<String> resourceNames = new ArrayList<String>();\n \n-            @Override\n-            protected List<String> load() {\n-                final List<String> resourceNames = new ArrayList<String>();\n+            for (ResourceTO resourceTO : resourceRestClient.getAll()) {\n+                resourceNames.add(resourceTO.getName());\n+            }\n+            return resourceNames;\n+        }\n+    };\n \n-                for (ResourceTO resourceTO : resourceRestClient.getAll()) {\n+    final IModel<List<String>> syncActionsClasses = new LoadableDetachableModel<List<String>>() {\n \n-                    resourceNames.add(resourceTO.getName());\n-                }\n-                return resourceNames;\n-            }\n-        };\n+        private static final long serialVersionUID = 5275935387613157438L;\n+\n+        @Override\n+        protected List<String> load() {\n+            return getSyncActions();\n+        }\n+    };\n+\n+    public AbstractSyncTaskModalPage(\n+            final ModalWindow window, final AbstractSyncTaskTO taskTO, final PageReference pageRef) {\n+\n+        super(window, taskTO, pageRef);\n \n         final AjaxDropDownChoicePanel<String> resource = new AjaxDropDownChoicePanel<String>(\"resource\",\n                 getString(\"resourceName\"), new PropertyModel<String>(taskTO, \"resource\"));\n@@ -107,66 +117,65 @@ public void onClick(final AjaxRequestTarget target) {\n         first.setVisible(taskTO.getActionsClassNames().isEmpty());\n         syncActionsClassNames.add(first);\n \n-        final ListView<String> actionsClasses = new ListView<String>(\"actionsClasses\",\n-                new PropertyModel<List<String>>(taskTO, \"actionsClassNames\")) {\n+        final ListView<String> actionsClasses = new ListView<String>(\n+                \"actionsClasses\", new PropertyModel<List<String>>(taskTO, \"actionsClassNames\")) {\n \n-                    private static final long serialVersionUID = 9101744072914090143L;\n+            private static final long serialVersionUID = 9101744072914090143L;\n+\n+            @Override\n+            protected void populateItem(final ListItem<String> item) {\n+                final String className = item.getModelObject();\n+\n+                final DropDownChoice<String> actionsClass = new DropDownChoice<String>(\n+                        \"actionsClass\", new Model<String>(className), syncActionsClasses.getObject());\n+                actionsClass.setNullValid(true);\n+                actionsClass.setRequired(true);\n+                actionsClass.add(new AjaxFormComponentUpdatingBehavior(Constants.ON_CHANGE) {\n+\n+                    private static final long serialVersionUID = -1107858522700306810L;\n \n                     @Override\n-                    protected void populateItem(final ListItem<String> item) {\n-                        final String className = item.getModelObject();\n-\n-                        final DropDownChoice<String> actionsClass = new DropDownChoice<String>(\n-                                \"actionsClass\", new Model<String>(className), taskRestClient.getSyncActionsClasses());\n-                        actionsClass.setNullValid(true);\n-                        actionsClass.setRequired(true);\n-                        actionsClass.add(new AjaxFormComponentUpdatingBehavior(Constants.ON_BLUR) {\n-\n-                            private static final long serialVersionUID = -1107858522700306810L;\n-\n-                            @Override\n-                            protected void onUpdate(final AjaxRequestTarget target) {\n-                                taskTO.getActionsClassNames().\n-                                set(item.getIndex(), actionsClass.getModelObject());\n-                            }\n-                        });\n-                        actionsClass.setRequired(true);\n-                        actionsClass.setOutputMarkupId(true);\n-                        actionsClass.setRequired(true);\n-                        item.add(actionsClass);\n-\n-                        AjaxLink<Void> minus = new IndicatingAjaxLink<Void>(\"drop\") {\n-\n-                            private static final long serialVersionUID = -7978723352517770644L;\n-\n-                            @Override\n-                            public void onClick(final AjaxRequestTarget target) {\n-                                taskTO.getActionsClassNames().remove(className);\n-                                first.setVisible(taskTO.getActionsClassNames().isEmpty());\n-                                target.add(syncActionsClassNames);\n-                            }\n-                        };\n-                        item.add(minus);\n-\n-                        final AjaxLink<Void> plus = new IndicatingAjaxLink<Void>(\"add\") {\n-\n-                            private static final long serialVersionUID = -7978723352517770644L;\n-\n-                            @Override\n-                            public void onClick(final AjaxRequestTarget target) {\n-                                taskTO.getActionsClassNames().add(StringUtils.EMPTY);\n-                                target.add(syncActionsClassNames);\n-                            }\n-                        };\n-                        plus.setOutputMarkupPlaceholderTag(true);\n-                        plus.setVisible(item.getIndex() == taskTO.getActionsClassNames().size() - 1);\n-                        item.add(plus);\n+                    protected void onUpdate(final AjaxRequestTarget target) {\n+                        taskTO.getActionsClassNames().set(item.getIndex(), actionsClass.getModelObject());\n+                        target.add(syncActionsClassNames);\n+                    }\n+                });\n+                actionsClass.setRequired(true);\n+                actionsClass.setOutputMarkupId(true);\n+                actionsClass.setRequired(true);\n+                item.add(actionsClass);\n+\n+                AjaxLink<Void> minus = new IndicatingAjaxLink<Void>(\"drop\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        taskTO.getActionsClassNames().remove(className);\n+                        first.setVisible(taskTO.getActionsClassNames().isEmpty());\n+                        target.add(syncActionsClassNames);\n                     }\n                 };\n+                item.add(minus);\n+\n+                final AjaxLink<Void> plus = new IndicatingAjaxLink<Void>(\"add\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        taskTO.getActionsClassNames().add(StringUtils.EMPTY);\n+                        target.add(syncActionsClassNames);\n+                    }\n+                };\n+                plus.setOutputMarkupPlaceholderTag(true);\n+                plus.setVisible(item.getIndex() == taskTO.getActionsClassNames().size() - 1);\n+                item.add(plus);\n+            }\n+        };\n         syncActionsClassNames.add(actionsClasses);\n-        // SYNCOPE-473: provisional, when push action classes will be implemented list will be enabled and container\n-        // moved to correct class (SyncTaskModalPage or PushTaskModalPage)\n-        syncActionsClassNames.setEnabled(taskTO instanceof SyncTaskTO);\n+\n+        syncActionsClassNames.setEnabled(!syncActionsClasses.getObject().isEmpty());\n \n         final AjaxCheckBoxPanel creates = new AjaxCheckBoxPanel(\"performCreate\", getString(\"creates\"),\n                 new PropertyModel<Boolean>(taskTO, \"performCreate\"));"},{"sha":"430b3810979311b8da10b729c6ed975fa2e0bf76","filename":"console/src/main/java/org/apache/syncope/console/pages/PushTaskModalPage.java","status":"modified","additions":10,"deletions":14,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -18,7 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n-import java.util.Arrays;\n+import java.util.List;\n import org.apache.syncope.common.to.PushTaskTO;\n import org.apache.syncope.common.to.SchedTaskTO;\n import org.apache.syncope.common.types.MatchingRule;\n@@ -27,15 +27,13 @@\n import org.apache.syncope.console.pages.panels.RoleSearchPanel;\n import org.apache.syncope.console.pages.panels.UserSearchPanel;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n-import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.model.Model;\n-import org.apache.wicket.model.PropertyModel;\n \n /**\n  * Modal window with Push Task form.\n@@ -52,6 +50,11 @@ public class PushTaskModalPage extends AbstractSyncTaskModalPage {\n \n     private final AjaxCheckBoxPanel checkRoleFilter;\n \n+    @Override\n+    protected List<String> getSyncActions() {\n+        return taskRestClient.getPushActionsClasses();\n+    }\n+\n     public PushTaskModalPage(final ModalWindow window, final PushTaskTO taskTO, final PageReference pageRef) {\n \n         super(window, taskTO, pageRef);\n@@ -79,14 +82,12 @@ public PushTaskModalPage(final ModalWindow window, final PushTaskTO taskTO, fina\n                 new Model<Boolean>(taskTO.getRoleFilter() != null));\n         filterContainer.add(checkRoleFilter);\n \n-        userFilter =\n-                new UserSearchPanel.Builder(\"userFilter\").fiql(taskTO.getUserFilter()).build();\n+        userFilter = new UserSearchPanel.Builder(\"userFilter\").fiql(taskTO.getUserFilter()).build();\n         userFilter.setEnabled(checkUserFilter.getModelObject());\n \n         filterContainer.add(userFilter);\n \n-        roleFilter =\n-                new RoleSearchPanel.Builder(\"roleFilter\").fiql(taskTO.getRoleFilter()).build();\n+        roleFilter = new RoleSearchPanel.Builder(\"roleFilter\").fiql(taskTO.getRoleFilter()).build();\n         roleFilter.setEnabled(checkRoleFilter.getModelObject());\n         filterContainer.add(roleFilter);\n \n@@ -127,13 +128,8 @@ public void submitAction(final SchedTaskTO taskTO) {\n \n     private void setFilters(final PushTaskTO pushTaskTO) {\n         // set user filter if enabled\n-        pushTaskTO.setUserFilter(checkUserFilter.getModelObject()\n-                ? userFilter.buildFIQL()\n-                : null);\n+        pushTaskTO.setUserFilter(checkUserFilter.getModelObject() ? userFilter.buildFIQL() : null);\n         // set role filter if enabled\n-        pushTaskTO.setRoleFilter(checkRoleFilter.getModelObject()\n-                ? roleFilter.buildFIQL()\n-                : null);\n+        pushTaskTO.setRoleFilter(checkRoleFilter.getModelObject() ? roleFilter.buildFIQL() : null);\n     }\n-\n }"},{"sha":"2a728b17e80de8dcaa757cd87bd7323dbab0a8e4","filename":"console/src/main/java/org/apache/syncope/console/pages/SyncTaskModalPage.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import java.util.List;\n import org.apache.syncope.common.to.SchedTaskTO;\n import org.apache.syncope.common.to.SyncTaskTO;\n import org.apache.syncope.common.types.MatchingRule;\n@@ -56,6 +57,11 @@ public SyncTaskModalPage(final ModalWindow window, final SyncTaskTO taskTO, fina\n         profile.add(fullReconciliation);\n     }\n \n+    @Override\n+    protected List<String> getSyncActions() {\n+        return taskRestClient.getSyncActionsClasses();\n+    }\n+\n     @Override\n     public void submitAction(final SchedTaskTO taskTO) {\n         if (taskTO.getId() > 0) {"},{"sha":"863e51a14f153dbb29b21c732b4162aa91cdedda","filename":"console/src/main/java/org/apache/syncope/console/rest/TaskRestClient.java","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FTaskRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FTaskRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FTaskRestClient.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -34,6 +34,7 @@\n import org.apache.syncope.common.util.CollectionWrapper;\n import org.apache.syncope.common.SyncopeClientException;\n import org.apache.syncope.common.to.PushTaskTO;\n+import org.apache.syncope.common.wrap.PushActionClass;\n import org.apache.wicket.extensions.markup.html.repeater.util.SortParam;\n import org.springframework.stereotype.Component;\n \n@@ -72,6 +73,17 @@ public List<String> getSyncActionsClasses() {\n         return CollectionWrapper.unwrap(actions);\n     }\n \n+    public List<String> getPushActionsClasses() {\n+        List<PushActionClass> actions = null;\n+\n+        try {\n+            actions = new ArrayList<PushActionClass>(getService(TaskService.class).getPushActionsClasses());\n+        } catch (SyncopeClientException e) {\n+            LOG.error(\"While getting all sync actions classes\", e);\n+        }\n+        return CollectionWrapper.unwrap(actions);\n+    }\n+\n     /**\n      * Return the number of tasks.\n      *"},{"sha":"8814e69077f05abbb015b2ef726d9e95420c34d1","filename":"console/src/main/resources/org/apache/syncope/console/pages/PushTaskModalPage.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.html?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -129,7 +129,7 @@\n                   </div>\n                   <div class=\"tablerow alt\">\n                     <div class=\"tablecolumn_label short_dynamicsize\">\n-                      <label for=\"syncStatus\"><wicket:message key=\"status\"/></label>\n+                      <label for=\"syncStatus\"><wicket:message key=\"syncStatus\"/></label>\n                     </div>\n                     <div class=\"tablecolumn_field medium_dynamicsize\">\n                       <span wicket:id=\"syncStatus\">[syncStatus]</span>"},{"sha":"f44d51f63941fa90cd04f8842bdd464ba152eb57","filename":"console/src/main/resources/org/apache/syncope/console/pages/PushTaskModalPage.properties","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Name\n description=Description\n lastExec=Last Execution\n nextExec=Next Execution\n-updates=Update matching identities\n cron=Schedule (seconds, minutes, hours, days of month, months, days of week)\n templates=Remove task from scheduler / Use a template to schedule\n apply=Save\n@@ -34,11 +33,12 @@ message=Message\n delete=Delete\n showMessage=Show\n chooseForTemplate=Use A Template\n-creates=Create new identities\n-deletes=Delete matching identities\n-syncStatus=Synchronize user status\n+creates=Allow create operations\n+deletes=Allow delete operations\n+updates=Allow update operations\n+syncStatus=Allow status synchronization\n fullReconciliation=Full reconciliation\n-actionsClasses=Actions classes\n+actionsClasses=Action classes\n matchingRule=Matching Rule\n unmatchingRule=Unmatching Rule\n checkUserFilter=User Filter"},{"sha":"33134b21882e78a92cef6d3a8b0bbe2d1f897b86","filename":"console/src/main/resources/org/apache/syncope/console/pages/PushTaskModalPage_it.properties","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_it.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Nome\n description=Descrizione\n lastExec=Ultima Esecuzione\n nextExec=Prossima Esecuzione\n-updates=Aggiorna identit\\u00e0 esistenti\n cron=Schedule (secondi, minuti, ore, giorni del mese, mesi, giorni della settimana)\n templates=Rimuovi task dallo scheduler / Utilizza un template per schedulare\n apply=Salva\n@@ -34,8 +33,10 @@ message=Messaggio\n delete=Rimozione\n showMessage=Mostra\n chooseForTemplate=Usa Un Template\n-creates=Crea nuove identit\\u00e0\n-deletes=Elimina identit\\u00e0 esistenti\n+creates=Consenti operazioni di creazione\n+deletes=Consenti operazioni di rimozione\n+updates=Consenti operazioni di modifica\n+syncStatus=Consenti sincronizzazione di stato\n status=Sincronizza stato utente\n fullReconciliation=Riconciliazione totale\n actionsClasses=Classi azioni"},{"sha":"8e00512f710ecc0b15824c43e9b3f84d21ba2b87","filename":"console/src/main/resources/org/apache/syncope/console/pages/PushTaskModalPage_pt_BR.properties","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPushTaskModalPage_pt_BR.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Nome\n description=Descri\\u00e7\\u00e3o\n lastExec=\\u00daltima Execu\\u00e7\\u00e3o\n nextExec=Pr\\u00f3xima Execu\\u00e7\\u00e3o\n-updates=Atualizar Identidades correspondentes\n cron=Agenda (segundos, minutos, horas, dias do m\\u00eas, meses, dias da semana)\n templates=Remover tarefa agendada / usar template para agendar\n apply=Salvar\n@@ -34,9 +33,10 @@ message=Mensagem\n delete=Excluir\n showMessage=Mostrar\n chooseForTemplate=Usar um template\n-creates=Criar Nova identidade\n-deletes=Excluir identidades correspondentes\n-syncStatus=Sincronizar status de usu\\u00e1rio\n+creates=Permitir opera\\u00e7\\u00f5es de cria\\u00e7\\u00e3o\n+deletes=Permitir opera\\u00e7\\u00f5es de remo\\u00e7\\u00e3o\n+updates=Permitir a edi\\u00e7\\u00e3o\n+syncStatus=Permitir a sincroniza\\u00e7\\u00e3o de status\n fullReconciliation=Reconcilia\\u00e7\\u00e3o completa\n actionsClasses=Classes de a\\u00e7\\u00f5es\n matchingRule=Regra de correspond\\u00eancia"},{"sha":"47a73c5aba652c5969c2725a9224de9fd8b5a32a","filename":"console/src/main/resources/org/apache/syncope/console/pages/SyncTaskModalPage.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.html?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -129,7 +129,7 @@\n                   </div>\n                   <div class=\"tablerow alt\">\n                     <div class=\"tablecolumn_label short_dynamicsize\">\n-                      <label for=\"syncStatus\"><wicket:message key=\"status\"/></label>\n+                      <label for=\"syncStatus\"><wicket:message key=\"syncStatus\"/></label>\n                     </div>\n                     <div class=\"tablecolumn_field medium_dynamicsize\">\n                       <span wicket:id=\"syncStatus\">[syncStatus]</span>"},{"sha":"59edcc5cd52d325b7f1b7fcc340701242cadfa4a","filename":"console/src/main/resources/org/apache/syncope/console/pages/SyncTaskModalPage.properties","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Name\n description=Description\n lastExec=Last Execution\n nextExec=Next Execution\n-updates=Update matching identities\n cron=Schedule (seconds, minutes, hours, days of month, months, days of week)\n templates=Remove task from scheduler / Use a template to schedule\n apply=Save\n@@ -34,10 +33,11 @@ message=Message\n delete=Delete\n showMessage=Show\n chooseForTemplate=Use A Template\n-creates=Create new identities\n-deletes=Delete matching identities\n-syncStatus=Synchronize user status\n+creates=Allow create operations\n+deletes=Allow delete operations\n+updates=Allow update operations\n+syncStatus=Allow status synchronization\n fullReconciliation=Full reconciliation\n-actionsClasses=Actions classes\n+actionsClasses=Action classes\n matchingRule=Matching Rule\n unmatchingRule=Unmatching Rule"},{"sha":"0ec6d6772162bd50924a37caa4192f30bc79fde8","filename":"console/src/main/resources/org/apache/syncope/console/pages/SyncTaskModalPage_it.properties","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_it.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Nome\n description=Descrizione\n lastExec=Ultima Esecuzione\n nextExec=Prossima Esecuzione\n-updates=Aggiorna identit\\u00e0 esistenti\n cron=Schedule (secondi, minuti, ore, giorni del mese, mesi, giorni della settimana)\n templates=Rimuovi task dallo scheduler / Utilizza un template per schedulare\n apply=Salva\n@@ -34,9 +33,10 @@ message=Messaggio\n delete=Rimozione\n showMessage=Mostra\n chooseForTemplate=Usa Un Template\n-creates=Crea nuove identit\\u00e0\n-deletes=Elimina identit\\u00e0 esistenti\n-status=Sincronizza stato utente\n+creates=Consenti operazioni di creazione\n+deletes=Consenti operazioni di rimozione\n+updates=Consenti operazioni di modifica\n+syncStatus=Consenti sincronizzazione di stato\n fullReconciliation=Riconciliazione totale\n actionsClasses=Classi azioni\n syncStatus=Sincronizza stato utente"},{"sha":"b790e58c6c0487f8f01db62699c8fa3cd6db2e1d","filename":"console/src/main/resources/org/apache/syncope/console/pages/SyncTaskModalPage_pt_BR.properties","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSyncTaskModalPage_pt_BR.properties?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -23,7 +23,6 @@ name=Nome\n description=Descri\\u00e7\\u00e3o\n lastExec=\\u00daltima Execu\\u00e7\\u00e3o\n nextExec=Pr\\u00f3xima Execu\\u00e7\\u00e3o\n-updates=Atualizar Identidades correspondentes\n cron=Agenda (segundos, minutos, horas, dias do m\\u00eas, meses, dias da semana)\n templates=Remover tarefa agendada / usar template para agendar\n apply=Salvar\n@@ -34,9 +33,10 @@ message=Mensagem\n delete=Excluir\n showMessage=Mostrar\n chooseForTemplate=Usar um template\n-creates=Criar Nova identidade\n-deletes=Excluir identidades correspondentes\n-syncStatus=Sincronizar status de usu\\u00e1rio\n+creates=Permitir opera\\u00e7\\u00f5es de cria\\u00e7\\u00e3o\n+deletes=Permitir opera\\u00e7\\u00f5es de remo\\u00e7\\u00e3o\n+updates=Permitir a edi\\u00e7\\u00e3o\n+syncStatus=Permitir a sincroniza\\u00e7\\u00e3o de status\n fullReconciliation=Reconcilia\\u00e7\\u00e3o completa\n actionsClasses=Classes de a\\u00e7\\u00f5es\n matchingRule=Regra de correspond\\u00eancia"},{"sha":"f43b1a34def4d565b3e1855560a93c19927786df","filename":"core/src/main/java/org/apache/syncope/core/persistence/beans/ExternalResource.java","status":"modified","additions":1,"deletions":13,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FExternalResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FExternalResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FExternalResource.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -145,9 +145,6 @@ public class ExternalResource extends AbstractSysInfo {\n     @ManyToOne(fetch = FetchType.EAGER, optional = true)\n     private SyncPolicy syncPolicy;\n \n-    @ManyToOne(fetch = FetchType.EAGER, optional = true)\n-    private PushPolicy pushPolicy;\n-\n     /**\n      * Configuration properties that are overridden from the connector instance.\n      */\n@@ -320,19 +317,11 @@ public void setSyncPolicy(final SyncPolicy syncPolicy) {\n         this.syncPolicy = syncPolicy;\n     }\n \n-    public PushPolicy getPushPolicy() {\n-        return pushPolicy;\n-    }\n-\n-    public void setPushPolicy(final PushPolicy pushPolicy) {\n-        this.pushPolicy = pushPolicy;\n-    }\n-\n     public Set<ConnConfProperty> getConnInstanceConfiguration() {\n         return StringUtils.isBlank(xmlConfiguration)\n                 ? Collections.<ConnConfProperty>emptySet()\n                 : new HashSet<ConnConfProperty>(\n-                        Arrays.asList(POJOHelper.deserialize(xmlConfiguration, ConnConfProperty[].class)));\n+                Arrays.asList(POJOHelper.deserialize(xmlConfiguration, ConnConfProperty[].class)));\n     }\n \n     public void setConnInstanceConfiguration(final Set<ConnConfProperty> properties) {\n@@ -370,5 +359,4 @@ public void setRsyncToken(final SyncToken syncToken) {\n     public List<String> getPropagationActionsClassNames() {\n         return propagationActionsClassNames;\n     }\n-\n }"},{"sha":"dec232b6b72db52a10fe3511f8d7fca1985f3095","filename":"core/src/main/java/org/apache/syncope/core/persistence/dao/PolicyDAO.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FPolicyDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FPolicyDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FPolicyDAO.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -25,7 +25,6 @@\n import org.apache.syncope.core.persistence.beans.ExternalResource;\n import org.apache.syncope.core.persistence.beans.PasswordPolicy;\n import org.apache.syncope.core.persistence.beans.Policy;\n-import org.apache.syncope.core.persistence.beans.PushPolicy;\n import org.apache.syncope.core.persistence.beans.SyncPolicy;\n \n public interface PolicyDAO extends DAO {\n@@ -42,8 +41,6 @@ public interface PolicyDAO extends DAO {\n \n     SyncPolicy getGlobalSyncPolicy();\n \n-    PushPolicy getGlobalPushPolicy();\n-\n     List<Policy> findAll();\n \n     <T extends Policy> T save(T policy);"},{"sha":"61ba38155a6f5b7129d2dd35ac78a439c2df9eab","filename":"core/src/main/java/org/apache/syncope/core/persistence/dao/impl/PolicyDAOImpl.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FPolicyDAOImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FPolicyDAOImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2Fimpl%2FPolicyDAOImpl.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -26,7 +26,6 @@\n import org.apache.syncope.core.persistence.beans.ExternalResource;\n import org.apache.syncope.core.persistence.beans.PasswordPolicy;\n import org.apache.syncope.core.persistence.beans.Policy;\n-import org.apache.syncope.core.persistence.beans.PushPolicy;\n import org.apache.syncope.core.persistence.beans.SyncPolicy;\n import org.apache.syncope.core.persistence.dao.PolicyDAO;\n import org.apache.syncope.core.persistence.validation.entity.InvalidEntityException;\n@@ -83,14 +82,6 @@ public SyncPolicy getGlobalSyncPolicy() {\n                 : (SyncPolicy) policies.get(0);\n     }\n \n-    @Override\n-    public PushPolicy getGlobalPushPolicy() {\n-        List<? extends Policy> policies = find(PolicyType.GLOBAL_PUSH);\n-        return policies == null || policies.isEmpty()\n-                ? null\n-                : (PushPolicy) policies.get(0);\n-    }\n-\n     @Override\n     public List<Policy> findAll() {\n         TypedQuery<Policy> query = entityManager.createQuery(\"SELECT e FROM Policy e\", Policy.class);"},{"sha":"cabeb4f860364f949d3777bd7c56347ce717689d","filename":"core/src/main/java/org/apache/syncope/core/sync/impl/AbstractSyncJob.java","status":"modified","additions":1,"deletions":29,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FAbstractSyncJob.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FAbstractSyncJob.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FAbstractSyncJob.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -21,13 +21,10 @@\n import java.lang.reflect.ParameterizedType;\n import java.util.ArrayList;\n import java.util.List;\n-import org.apache.syncope.common.types.SyncPolicySpec;\n import org.apache.syncope.common.types.TraceLevel;\n import org.apache.syncope.core.persistence.beans.AbstractSyncTask;\n import org.apache.syncope.core.persistence.beans.Entitlement;\n-import org.apache.syncope.core.persistence.beans.PushPolicy;\n import org.apache.syncope.core.persistence.beans.PushTask;\n-import org.apache.syncope.core.persistence.beans.SyncPolicy;\n import org.apache.syncope.core.persistence.beans.SyncTask;\n import org.apache.syncope.core.persistence.beans.TaskExec;\n import org.apache.syncope.core.persistence.beans.role.RMapping;\n@@ -319,7 +316,7 @@ protected String doExecute(final boolean dryRun) throws JobExecutionException {\n             } catch (Exception e) {\n                 final String msg = String.\n                         format(\"Connector instance bean for resource %s and connInstance %s not found\",\n-                                syncTask.getResource(), syncTask.getResource().getConnector());\n+                        syncTask.getResource(), syncTask.getResource().getConnector());\n \n                 throw new JobExecutionException(msg, e);\n             }\n@@ -340,7 +337,6 @@ protected String doExecute(final boolean dryRun) throws JobExecutionException {\n \n             return executeWithSecurityContext(\n                     syncTask,\n-                    getSyncPolicySpec(syncTask),\n                     connector,\n                     uMapping,\n                     rMapping,\n@@ -354,7 +350,6 @@ protected String doExecute(final boolean dryRun) throws JobExecutionException {\n \n     protected abstract String executeWithSecurityContext(\n             final T task,\n-            final SyncPolicySpec syncPolicySpec,\n             final Connector connector,\n             final UMapping uMapping,\n             final RMapping rMapping,\n@@ -370,29 +365,6 @@ protected boolean hasToBeRegistered(final TaskExec execution) {\n                 || syncTask.getResource().getSyncTraceLevel().ordinal() >= TraceLevel.SUMMARY.ordinal();\n     }\n \n-    private SyncPolicySpec getSyncPolicySpec(final AbstractSyncTask syncTask) {\n-        SyncPolicySpec syncPolicySpec;\n-\n-        if (syncTask instanceof SyncTask) {\n-            final SyncPolicy syncPolicy = syncTask.getResource().getSyncPolicy() == null\n-                    ? policyDAO.getGlobalSyncPolicy()\n-                    : syncTask.getResource().getSyncPolicy();\n-\n-            syncPolicySpec = syncPolicy == null ? null : syncPolicy.getSpecification(SyncPolicySpec.class);\n-        } else if (syncTask instanceof PushTask) {\n-            final PushPolicy pushPolicy = syncTask.getResource().getPushPolicy() == null\n-                    ? policyDAO.getGlobalPushPolicy()\n-                    : syncTask.getResource().getPushPolicy();\n-\n-            syncPolicySpec = pushPolicy == null ? null : pushPolicy.getSpecification(SyncPolicySpec.class);\n-        } else {\n-            syncPolicySpec = null;\n-        }\n-\n-        // step required because the call <policy>.getSpecification() could return a null value\n-        return syncPolicySpec == null ? new SyncPolicySpec() : syncPolicySpec;\n-    }\n-\n     @SuppressWarnings(\"unchecked\")\n     private Class<T> getTaskClassReference() {\n         return (Class<T>) ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];"},{"sha":"efb308f40491f94ed44e42cccf5ae95d6abf9994","filename":"core/src/main/java/org/apache/syncope/core/sync/impl/PushJob.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FPushJob.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FPushJob.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FPushJob.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -25,7 +25,6 @@\n import java.util.Set;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.types.SubjectType;\n-import org.apache.syncope.common.types.SyncPolicySpec;\n import org.apache.syncope.core.persistence.beans.PushTask;\n import org.apache.syncope.core.persistence.beans.role.RMapping;\n import org.apache.syncope.core.persistence.beans.role.SyncopeRole;\n@@ -77,7 +76,6 @@ public class PushJob extends AbstractSyncJob<PushTask, PushActions> {\n     @Override\n     protected String executeWithSecurityContext(\n             final PushTask pushTask,\n-            final SyncPolicySpec syncPolicySpec,\n             final Connector connector,\n             final UMapping uMapping,\n             final RMapping rMapping,\n@@ -92,7 +90,7 @@ protected String executeWithSecurityContext(\n                 new SyncProfile<PushTask, PushActions>(connector, pushTask);\n         profile.setActions(actions);\n         profile.setDryRun(dryRun);\n-        profile.setResAct(syncPolicySpec.getConflictResolutionAction());\n+        profile.setResAct(null);\n         profile.setResults(results);\n \n         final UserPushResultHandler uhandler ="},{"sha":"fe23d2ef762995df9a2a901aa5ce94a8f9d4005b","filename":"core/src/main/java/org/apache/syncope/core/sync/impl/SyncJob.java","status":"modified","additions":20,"deletions":2,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncJob.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncJob.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncJob.java?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -27,7 +27,9 @@\n import org.apache.syncope.common.mod.ReferenceMod;\n import org.apache.syncope.common.mod.RoleMod;\n import org.apache.syncope.common.types.SyncPolicySpec;\n+import org.apache.syncope.core.persistence.beans.AbstractSyncTask;\n import org.apache.syncope.core.persistence.beans.ExternalResource;\n+import org.apache.syncope.core.persistence.beans.SyncPolicy;\n import org.apache.syncope.core.persistence.beans.SyncTask;\n import org.apache.syncope.core.persistence.beans.role.RMapping;\n import org.apache.syncope.core.persistence.beans.user.UMapping;\n@@ -101,7 +103,6 @@ protected void setRoleOwners(final RoleSyncResultHandler rhandler)\n     @Override\n     protected String executeWithSecurityContext(\n             final SyncTask syncTask,\n-            final SyncPolicySpec syncPolicySpec,\n             final Connector connector,\n             final UMapping uMapping,\n             final RMapping rMapping,\n@@ -114,7 +115,7 @@ protected String executeWithSecurityContext(\n                 new SyncProfile<SyncTask, SyncActions>(connector, syncTask);\n         profile.setActions(actions);\n         profile.setDryRun(dryRun);\n-        profile.setResAct(syncPolicySpec.getConflictResolutionAction());\n+        profile.setResAct(getSyncPolicySpec(syncTask).getConflictResolutionAction());\n         profile.setResults(results);\n \n         // Prepare handler for SyncDelta objects (users)\n@@ -203,4 +204,21 @@ protected String executeWithSecurityContext(\n \n         return result;\n     }\n+\n+    private SyncPolicySpec getSyncPolicySpec(final AbstractSyncTask syncTask) {\n+        SyncPolicySpec syncPolicySpec;\n+\n+        if (syncTask instanceof SyncTask) {\n+            final SyncPolicy syncPolicy = syncTask.getResource().getSyncPolicy() == null\n+                    ? policyDAO.getGlobalSyncPolicy()\n+                    : syncTask.getResource().getSyncPolicy();\n+\n+            syncPolicySpec = syncPolicy == null ? null : syncPolicy.getSpecification(SyncPolicySpec.class);\n+        } else {\n+            syncPolicySpec = null;\n+        }\n+\n+        // step required because the call <policy>.getSpecification() could return a null value\n+        return syncPolicySpec == null ? new SyncPolicySpec() : syncPolicySpec;\n+    }\n }"},{"sha":"e3c8787ccaf08575f6bb8fbda2f73509b9f95964","filename":"core/src/test/resources/content.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eca2559de04ffb631e938dd671ca5128faeadd5a/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=eca2559de04ffb631e938dd671ca5128faeadd5a","patch":"@@ -956,7 +956,7 @@ under the License.\n         performCreate=\"1\" performUpdate=\"1\" performDelete=\"1\" syncStatus=\"1\"\n         jobClassName=\"org.apache.syncope.core.sync.impl.PushJob\" unmatchingRule=\"ASSIGN\" matchingRule=\"UNLINK\" \n         userFilter=\"username==_NO_ONE_\" roleFilter=\"name==citizen\"/>\n-  <Task DTYPE=\"SyncTask\" id=\"24\" name=\"CSV Task 2\" resource_name=\"resource-csv\"\n+  <Task DTYPE=\"SyncTask\" id=\"24\" name=\"CSV Task (update matching; provision unmatching)\" resource_name=\"resource-csv\"\n         performCreate=\"1\" performUpdate=\"1\" performDelete=\"1\" syncStatus=\"1\" fullReconciliation=\"0\"\n         jobClassName=\"org.apache.syncope.core.sync.impl.SyncJob\" unmatchingRule=\"PROVISION\" matchingRule=\"UPDATE\"\n         userTemplate='{\"creator\":null,\"creationDate\":null,\"lastModifier\":null,\"lastChangeDate\":null,\"id\":0,\"password\":null,\"status\":null,\"token\":null,\"tokenExpireTime\":null,\"username\":null,\"lastLoginDate\":null,\"changePwdDate\":null,\"failedLogins\":null,\"attributes\":[{\"schema\":\"firstname\",\"readonly\":false,\"values\":[\"\"]},{\"schema\":\"userId\",\"readonly\":false,\"values\":[\"&apos;test&apos;\"]},{\"schema\":\"fullname\",\"readonly\":false,\"values\":[\"&apos;test&apos;\"]},{\"schema\":\"surname\",\"readonly\":false,\"values\":[\"&apos;test&apos;\"]}],\"derivedAttributes\":[],\"virtualAttributes\":[],\"resources\":[\"resource-testdb\"],\"propagationStatuses\":[],\"memberships\":[]}'"}]}