{"sha":"3479e5fecc4a3c91009a862f679be146a6852833","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjM0NzllNWZlY2M0YTNjOTEwMDlhODYyZjY3OWJlMTQ2YTY4NTI4MzM=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-05-27T20:50:37Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-05-27T20:50:37Z"},"message":"fix for building with java 7","tree":{"sha":"2a733e2340c09f332b5f077f51f55dd4981962d4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/2a733e2340c09f332b5f077f51f55dd4981962d4"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3479e5fecc4a3c91009a862f679be146a6852833","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3479e5fecc4a3c91009a862f679be146a6852833","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3479e5fecc4a3c91009a862f679be146a6852833","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3479e5fecc4a3c91009a862f679be146a6852833/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"fa5e27ff30cc98bd5194082ef080087193a92b19","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fa5e27ff30cc98bd5194082ef080087193a92b19","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fa5e27ff30cc98bd5194082ef080087193a92b19"}],"stats":{"total":43,"additions":39,"deletions":4},"files":[{"sha":"6d3950f048a4373d2ad8a3089fd11a5441c263d3","filename":"client/console/src/main/java/org/apache/syncope/client/console/policies/PolicyRuleWizardBuilder.java","status":"modified","additions":11,"deletions":2,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3479e5fecc4a3c91009a862f679be146a6852833/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpolicies%2FPolicyRuleWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3479e5fecc4a3c91009a862f679be146a6852833/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpolicies%2FPolicyRuleWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpolicies%2FPolicyRuleWizardBuilder.java?ref=3479e5fecc4a3c91009a862f679be146a6852833","patch":"@@ -20,6 +20,8 @@\n \n import java.io.Serializable;\n import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.Predicate;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n@@ -136,12 +138,19 @@ public void setObject(final String object) {\n                 }\n             });\n \n+            final List<String> choices;\n+\n             if (type == PolicyType.ACCOUNT) {\n-                conf.setChoices(new ArrayList<>(SyncopeConsoleSession.get().getPlatformInfo().getAccountRules()));\n+                choices = new ArrayList<>(SyncopeConsoleSession.get().getPlatformInfo().getAccountRules());\n             } else if (type == PolicyType.PASSWORD) {\n-                conf.setChoices(new ArrayList<>(SyncopeConsoleSession.get().getPlatformInfo().getPasswordRules()));\n+                choices = new ArrayList<>(SyncopeConsoleSession.get().getPlatformInfo().getPasswordRules());\n+            } else {\n+                choices = new ArrayList<>();\n             }\n \n+            Collections.<String>sort(choices);\n+            conf.setChoices(choices);\n+            \n             conf.addRequiredLabel();\n             add(conf);\n         }"},{"sha":"4b02a005dfd3eb0f353390a16d9a97a9f41a9521","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/PoliciesITCase.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3479e5fecc4a3c91009a862f679be146a6852833/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FPoliciesITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3479e5fecc4a3c91009a862f679be146a6852833/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FPoliciesITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FPoliciesITCase.java?ref=3479e5fecc4a3c91009a862f679be146a6852833","patch":"@@ -447,7 +447,7 @@ public void createComposeDeleteAccountPolicy() {\n         FormTester formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:outerObjectsRepeater:3:\"\n                 + \"outer:form:content:container:content:wizard:form\");\n         formTester.setValue(\"view:name:textField\", \"myrule\");\n-        formTester.setValue(\"view:configuration:dropDownChoiceField\", \"1\");\n+        formTester.setValue(\"view:configuration:dropDownChoiceField\", \"0\");\n         formTester.submit(\"buttons:next\");\n \n         wicketTester.assertModelValue(\"body:content:tabbedPanel:panel:outerObjectsRepeater:3:outer:form:content:\"\n@@ -541,7 +541,7 @@ public void createComposeDeletePasswordPolicy() {\n         FormTester formTester = wicketTester.newFormTester(\"body:content:tabbedPanel:panel:outerObjectsRepeater:3:\"\n                 + \"outer:form:content:container:content:wizard:form\");\n         formTester.setValue(\"view:name:textField\", \"myrule\");\n-        formTester.setValue(\"view:configuration:dropDownChoiceField\", \"1\");\n+        formTester.setValue(\"view:configuration:dropDownChoiceField\", \"0\");\n         formTester.submit(\"buttons:next\");\n \n         wicketTester.assertModelValue(\"body:content:tabbedPanel:panel:outerObjectsRepeater:3:outer:form:content:\""},{"sha":"ce344c95cb8033b544f93ed996a1d42c51bb9ab8","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/TopologyITCase.java","status":"modified","additions":26,"deletions":0,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3479e5fecc4a3c91009a862f679be146a6852833/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3479e5fecc4a3c91009a862f679be146a6852833/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FTopologyITCase.java?ref=3479e5fecc4a3c91009a862f679be146a6852833","patch":"@@ -20,6 +20,7 @@\n \n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.fail;\n \n import de.agilecoders.wicket.core.markup.html.bootstrap.dialog.Modal;\n import org.apache.wicket.ajax.markup.html.form.AjaxSubmitLink;\n@@ -271,6 +272,31 @@ public void executePullTask() {\n                 \"body:toggle:outerObjectsRepeater:2:outer:form:content:tasks:secondLevelContainer:title\",\n                 \"Executions of task &#039;TestDB Task&#039;\");\n \n+        int iteration = 0;\n+        try {\n+            wicketTester.assertComponent(\n+                    \"body:toggle:outerObjectsRepeater:2:outer:form:content:tasks:secondLevelContainer:\"\n+                    + \"second:executions:firstLevelContainer:first:container:content:searchContainer:resultTable:\"\n+                    + \"tablePanel:groupForm:checkgroup:dataTable:body:rows:1:cells:6:cell:panelView:viewLink\",\n+                    AjaxLink.class);\n+        } catch (Exception e) {\n+            if (iteration < 10) {\n+                try {\n+                    // requires a short delay\n+                    Thread.sleep(1000);\n+                } catch (Exception ignore) {\n+                }\n+                \n+                wicketTester.clickLink(\n+                        \"body:toggle:outerObjectsRepeater:2:outer:form:content:tasks:secondLevelContainer:second:\"\n+                        + \"executions:firstLevelContainer:first:container:content:searchContainer:resultTable:\"\n+                        + \"tablePanel:groupForm:checkgroup:dataTable:topToolbars:toolbars:1:headers:24:header:label:\"\n+                        + \"panelReload:reloadLink\");\n+                iteration++;\n+            } else {\n+                fail();\n+            }\n+        }\n         wicketTester.clickLink(\"body:toggle:outerObjectsRepeater:2:outer:form:content:tasks:secondLevelContainer:\"\n                 + \"second:executions:firstLevelContainer:first:container:content:searchContainer:resultTable:\"\n                 + \"tablePanel:groupForm:checkgroup:dataTable:body:rows:1:cells:6:cell:panelView:viewLink\");"}]}