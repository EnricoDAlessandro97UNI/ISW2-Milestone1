{"sha":"d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ1ZWVmN2FkMWYzNDMzNjQyZmRjNmQ1OWVjYzM5ZWNjNWZjMTJiYzg=","commit":{"author":{"name":"Christian Schneider","email":"cschneider@apache.org","date":"2013-01-30T11:59:07Z"},"committer":{"name":"Christian Schneider","email":"cschneider@apache.org","date":"2013-01-30T11:59:07Z"},"message":"SYNCOPE-231 Switching ReportTO to use AbstractReportletConf to enable JAXB serialization\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1440358 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7e13bdc15acd83d533a5503c54fd523f41bffd8f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7e13bdc15acd83d533a5503c54fd523f41bffd8f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/comments","author":{"login":"cschneider","id":484584,"node_id":"MDQ6VXNlcjQ4NDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/484584?v=4","gravatar_id":"","url":"https://api.github.com/users/cschneider","html_url":"https://github.com/cschneider","followers_url":"https://api.github.com/users/cschneider/followers","following_url":"https://api.github.com/users/cschneider/following{/other_user}","gists_url":"https://api.github.com/users/cschneider/gists{/gist_id}","starred_url":"https://api.github.com/users/cschneider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cschneider/subscriptions","organizations_url":"https://api.github.com/users/cschneider/orgs","repos_url":"https://api.github.com/users/cschneider/repos","events_url":"https://api.github.com/users/cschneider/events{/privacy}","received_events_url":"https://api.github.com/users/cschneider/received_events","type":"User","site_admin":false},"committer":{"login":"cschneider","id":484584,"node_id":"MDQ6VXNlcjQ4NDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/484584?v=4","gravatar_id":"","url":"https://api.github.com/users/cschneider","html_url":"https://github.com/cschneider","followers_url":"https://api.github.com/users/cschneider/followers","following_url":"https://api.github.com/users/cschneider/following{/other_user}","gists_url":"https://api.github.com/users/cschneider/gists{/gist_id}","starred_url":"https://api.github.com/users/cschneider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cschneider/subscriptions","organizations_url":"https://api.github.com/users/cschneider/orgs","repos_url":"https://api.github.com/users/cschneider/repos","events_url":"https://api.github.com/users/cschneider/events{/privacy}","received_events_url":"https://api.github.com/users/cschneider/received_events","type":"User","site_admin":false},"parents":[{"sha":"12a5f01719dc547ab183761056d22571e24c2c22","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/12a5f01719dc547ab183761056d22571e24c2c22","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/12a5f01719dc547ab183761056d22571e24c2c22"}],"stats":{"total":59,"additions":38,"deletions":21},"files":[{"sha":"62f830c2b3cd3ee5481e2ced5023ddc143cddcb8","filename":"common/src/main/java/org/apache/syncope/common/to/ReportTO.java","status":"modified","additions":11,"deletions":8,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FReportTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FReportTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FReportTO.java?ref=d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","patch":"@@ -25,14 +25,17 @@\n import javax.xml.bind.annotation.XmlElement;\r\n import javax.xml.bind.annotation.XmlElementWrapper;\r\n import javax.xml.bind.annotation.XmlRootElement;\r\n+import javax.xml.bind.annotation.XmlSeeAlso;\r\n import javax.xml.bind.annotation.XmlType;\r\n \r\n import org.apache.syncope.common.AbstractBaseBean;\r\n import org.apache.syncope.common.report.AbstractReportletConf;\r\n-import org.apache.syncope.common.report.ReportletConf;\r\n+import org.apache.syncope.common.report.StaticReportletConf;\r\n+import org.apache.syncope.common.report.UserReportletConf;\r\n \r\n @XmlRootElement(name = \"report\")\r\n @XmlType\r\n+@XmlSeeAlso({UserReportletConf.class, StaticReportletConf.class})\r\n public class ReportTO extends AbstractBaseBean {\r\n \r\n     private static final long serialVersionUID = 5274568072084814410L;\r\n@@ -41,7 +44,7 @@ public class ReportTO extends AbstractBaseBean {\n \r\n     private String name;\r\n \r\n-    private List<ReportletConf> reportletConfs;\r\n+    private List<AbstractReportletConf> reportletConfs;\r\n \r\n     private String cronExpression;\r\n \r\n@@ -60,7 +63,7 @@ public class ReportTO extends AbstractBaseBean {\n     public ReportTO() {\r\n         super();\r\n \r\n-        reportletConfs = new ArrayList<ReportletConf>();\r\n+        reportletConfs = new ArrayList<AbstractReportletConf>();\r\n         executions = new ArrayList<ReportExecTO>();\r\n     }\r\n \r\n@@ -80,21 +83,21 @@ public void setName(String name) {\n         this.name = name;\r\n     }\r\n \r\n-    public boolean addReportletConf(ReportletConf reportlet) {\r\n+    public boolean addReportletConf(AbstractReportletConf reportlet) {\r\n         return this.reportletConfs.add(reportlet);\r\n     }\r\n \r\n-    public boolean removeReportletConf(ReportletConf reportlet) {\r\n+    public boolean removeReportletConf(AbstractReportletConf reportlet) {\r\n         return this.reportletConfs.remove(reportlet);\r\n     }\r\n \r\n     @XmlElementWrapper(name = \"reportletConfigurations\")\r\n-    @XmlElement(name = \"configuration\", type=AbstractReportletConf.class)\r\n-    public List<ReportletConf> getReportletConfs() {\r\n+    @XmlElement(name=\"reportletconf\")\r\n+    public List<AbstractReportletConf> getReportletConfs() {\r\n         return reportletConfs;\r\n     }\r\n \r\n-    public void setReportletConfs(List<ReportletConf> reportlets) {\r\n+    public void setReportletConfs(List<AbstractReportletConf> reportlets) {\r\n         this.reportletConfs = reportlets;\r\n     }\r\n \r"},{"sha":"915fe35d5d4165053739e4a3fe5d64bb961bc687","filename":"console/src/main/java/org/apache/syncope/console/pages/ReportModalPage.java","status":"modified","additions":9,"deletions":8,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java?ref=d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","patch":"@@ -23,6 +23,7 @@\n import java.util.Iterator;\n import java.util.List;\n \n+import org.apache.syncope.common.report.AbstractReportletConf;\n import org.apache.syncope.common.report.ReportletConf;\n import org.apache.syncope.common.to.ReportExecTO;\n import org.apache.syncope.common.to.ReportTO;\n@@ -109,11 +110,11 @@ public class ReportModalPage extends BaseModalPage {\n \n     private long exportExecId;\n \n-    private ReportletConf modalReportletConf;\n+    private AbstractReportletConf modalReportletConf;\n \n     private String modalReportletConfOldName;\n \n-    private ListChoice<ReportletConf> reportlets;\n+    private ListChoice<AbstractReportletConf> reportlets;\n \n     public ReportModalPage(final ModalWindow window, final ReportTO reportTO, final PageReference callerPageRef) {\n         this.reportTO = reportTO;\n@@ -250,7 +251,7 @@ public void onClose(final AjaxRequestTarget target) {\n         nextExec.setEnabled(false);\n         profile.add(nextExec);\n \n-        reportlets = new ListChoice<ReportletConf>(\"reportletConfs\", new Model(), reportTO.getReportletConfs(),\n+        reportlets = new ListChoice<AbstractReportletConf>(\"reportletConfs\", new Model(), reportTO.getReportletConfs(),\n                 new IChoiceRenderer<ReportletConf>() {\n                     private static final long serialVersionUID = 1048000918946220007L;\n \n@@ -383,17 +384,17 @@ public void onClick(final AjaxRequestTarget target) {\n         });\n     }\n \n-    private void moveUp(final ReportletConf item) {\n-        final List<ReportletConf> list = reportTO.getReportletConfs();\n+    private void moveUp(final AbstractReportletConf item) {\n+        final List<AbstractReportletConf> list = reportTO.getReportletConfs();\n         int newPosition = list.indexOf(item) - 1;\n         if (newPosition > -1) {\n             list.remove(item);\n             list.add(newPosition, item);\n         }\n     }\n \n-    private void moveDown(final ReportletConf item) {\n-        final List<ReportletConf> list = reportTO.getReportletConfs();\n+    private void moveDown(final AbstractReportletConf item) {\n+        final List<AbstractReportletConf> list = reportTO.getReportletConfs();\n         int newPosition = list.indexOf(item) + 1;\n         if (newPosition < list.size()) {\n             list.remove(item);\n@@ -542,7 +543,7 @@ public void setExportFormat(final String exportFormat) {\n         this.exportFormat = exportFormat;\n     }\n \n-    public void setModalReportletConf(final ReportletConf modalReportletConf) {\n+    public void setModalReportletConf(final AbstractReportletConf modalReportletConf) {\n         this.modalReportletConf = modalReportletConf;\n     }\n "},{"sha":"a0565bcec9ed70e8a73f4b748561b3eba8f0231f","filename":"console/src/main/java/org/apache/syncope/console/pages/ReportletConfModalPage.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java?ref=d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","patch":"@@ -30,6 +30,7 @@\n import org.apache.commons.lang.ArrayUtils;\n import org.apache.syncope.common.SyncopeConstants;\n import org.apache.syncope.common.annotation.FormAttributeField;\n+import org.apache.syncope.common.report.AbstractReportletConf;\n import org.apache.syncope.common.report.ReportletConf;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.types.AttributableType;\n@@ -83,15 +84,15 @@ public class ReportletConfModalPage extends BaseModalPage {\n     @SpringBean\n     private SchemaRestClient schemaRestClient;\n \n-    private ReportletConf reportletConf;\n+    private AbstractReportletConf reportletConf;\n \n     final AjaxTextFieldPanel name;\n \n     private WebMarkupContainer propertiesContainer;\n \n     private ListView<String> propView;\n \n-    public ReportletConfModalPage(final ReportletConf reportletConf, final ModalWindow window,\n+    public ReportletConfModalPage(final AbstractReportletConf reportletConf, final ModalWindow window,\n             final PageReference callerPageRef) {\n \n         this.reportletConf = reportletConf;\n@@ -126,7 +127,7 @@ public String getObject() {\n             public void setObject(final String object) {\n                 try {\n                     Class<?> reportletClass = Class.forName(object);\n-                    ReportletConfModalPage.this.reportletConf = (ReportletConf) reportletClass.newInstance();\n+                    ReportletConfModalPage.this.reportletConf = (AbstractReportletConf) reportletClass.newInstance();\n                     propertiesContainer.replace(buildPropView());\n                 } catch (Exception e) {\n                     LOG.error(\"Cannot find or initialize {}\", object, e);"},{"sha":"1cc16038d9efc28a3a531b94b91c72a3fe534558","filename":"core/src/main/java/org/apache/syncope/core/rest/data/ReportDataBinder.java","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FReportDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FReportDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FReportDataBinder.java?ref=d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","patch":"@@ -19,7 +19,10 @@\n package org.apache.syncope.core.rest.data;\n \n import java.util.HashSet;\n+import java.util.List;\n import java.util.Set;\n+\n+import org.apache.syncope.common.report.AbstractReportletConf;\n import org.apache.syncope.common.report.ReportletConf;\n import org.apache.syncope.common.to.ReportExecTO;\n import org.apache.syncope.common.to.ReportTO;\n@@ -116,7 +119,7 @@ public ReportTO getReportTO(final Report report) {\n         reportTO.setId(report.getId());\n         BeanUtils.copyProperties(report, reportTO, IGNORE_REPORT_PROPERTIES);\n \n-        reportTO.setReportletConfs(report.getReportletConfs());\n+        copyReportletConfs(report, reportTO);\n \n         ReportExec latestExec = reportExecDAO.findLatestStarted(report);\n         reportTO.setLatestExecStatus(latestExec == null\n@@ -153,6 +156,13 @@ public ReportTO getReportTO(final Report report) {\n         return reportTO;\n     }\n \n+    private void copyReportletConfs(Report report, ReportTO reportTO) {\n+        reportTO.getReportletConfs().clear();\n+        for (ReportletConf reportletConf : report.getReportletConfs()) {\n+            reportTO.getReportletConfs().add((AbstractReportletConf) reportletConf);\n+        }\n+    }\n+\n     public ReportExecTO getReportExecTO(final ReportExec execution) {\n         ReportExecTO executionTO = new ReportExecTO();\n         executionTO.setId(execution.getId());"},{"sha":"a81ef2e3d9c629ab77b7391f0c68131fd87eb495","filename":"core/src/test/java/org/apache/syncope/core/rest/ReportTestITCase.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java?ref=d5eef7ad1f3433642fdc6d59ecc39ecc5fc12bc8","patch":"@@ -30,6 +30,7 @@\n import java.net.URL;\n import java.util.List;\n import java.util.Set;\n+import java.util.UUID;\n \n import javax.ws.rs.core.Response;\n \n@@ -49,6 +50,7 @@ public class ReportTestITCase extends AbstractTest {\n \n     public ReportTO createReport(final ReportTO report) {\n         Response response = reportService.create(report);\n+        assertCreated(response);\n         return getObject(response, ReportTO.class, reportService);\n     }\n \n@@ -139,7 +141,7 @@ public void update() {\n     @Test\n     public void delete() {\n         ReportTO report = new ReportTO();\n-        report.setName(\"testReportForDelete\");\n+        report.setName(\"testReportForDelete\" + getUUIDString());\n         report.addReportletConf(new UserReportletConf(\"first\"));\n         report.addReportletConf(new UserReportletConf(\"second\"));\n "}]}