{"sha":"2f028924d52d5cb48595aa7e5056c20aeadb4945","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjJmMDI4OTI0ZDUyZDVjYjQ4NTk1YWE3ZTUwNTZjMjBhZWFkYjQ5NDU=","commit":{"author":{"name":"giacomolm","email":"giacomolm@hotmail.it","date":"2015-06-05T07:40:35Z"},"committer":{"name":"giacomolm","email":"giacomolm@hotmail.it","date":"2015-06-05T07:40:35Z"},"message":"[SYNCOPE-667] Merge from 1_2_X","tree":{"sha":"6dadbb394b85832ead009b1d4776ea88024c3fcc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6dadbb394b85832ead009b1d4776ea88024c3fcc"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2f028924d52d5cb48595aa7e5056c20aeadb4945","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2f028924d52d5cb48595aa7e5056c20aeadb4945","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2f028924d52d5cb48595aa7e5056c20aeadb4945","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2f028924d52d5cb48595aa7e5056c20aeadb4945/comments","author":{"login":"giacomolm","id":4027829,"node_id":"MDQ6VXNlcjQwMjc4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4027829?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomolm","html_url":"https://github.com/giacomolm","followers_url":"https://api.github.com/users/giacomolm/followers","following_url":"https://api.github.com/users/giacomolm/following{/other_user}","gists_url":"https://api.github.com/users/giacomolm/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomolm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomolm/subscriptions","organizations_url":"https://api.github.com/users/giacomolm/orgs","repos_url":"https://api.github.com/users/giacomolm/repos","events_url":"https://api.github.com/users/giacomolm/events{/privacy}","received_events_url":"https://api.github.com/users/giacomolm/received_events","type":"User","site_admin":false},"committer":{"login":"giacomolm","id":4027829,"node_id":"MDQ6VXNlcjQwMjc4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4027829?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomolm","html_url":"https://github.com/giacomolm","followers_url":"https://api.github.com/users/giacomolm/followers","following_url":"https://api.github.com/users/giacomolm/following{/other_user}","gists_url":"https://api.github.com/users/giacomolm/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomolm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomolm/subscriptions","organizations_url":"https://api.github.com/users/giacomolm/orgs","repos_url":"https://api.github.com/users/giacomolm/repos","events_url":"https://api.github.com/users/giacomolm/events{/privacy}","received_events_url":"https://api.github.com/users/giacomolm/received_events","type":"User","site_admin":false},"parents":[{"sha":"8cc3ffc1feba36af7414c380b6ac833662b58f73","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8cc3ffc1feba36af7414c380b6ac833662b58f73","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8cc3ffc1feba36af7414c380b6ac833662b58f73"},{"sha":"18394d3c5027ae9e4442414a7f886e422904d77f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/18394d3c5027ae9e4442414a7f886e422904d77f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/18394d3c5027ae9e4442414a7f886e422904d77f"}],"stats":{"total":12,"additions":9,"deletions":3},"files":[{"sha":"cb41d8cb2ad7bdef75e6460509f364d10449303b","filename":"core/provisioning-api/src/main/java/org/apache/syncope/core/provisioning/api/notification/NotificationManager.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2f028924d52d5cb48595aa7e5056c20aeadb4945/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fnotification%2FNotificationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2f028924d52d5cb48595aa7e5056c20aeadb4945/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fnotification%2FNotificationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fapi%2Fnotification%2FNotificationManager.java?ref=2f028924d52d5cb48595aa7e5056c20aeadb4945","patch":"@@ -18,7 +18,9 @@\n  */\n package org.apache.syncope.core.provisioning.api.notification;\n \n+import java.util.List;\n import org.apache.syncope.common.lib.types.AuditElements;\n+import org.apache.syncope.core.persistence.api.entity.task.NotificationTask;\n import org.apache.syncope.core.persistence.api.entity.task.TaskExec;\n \n /**\n@@ -40,7 +42,7 @@ public interface NotificationManager {\n     /**\n      * Create notification tasks for each notification matching the given user id and (some of) tasks performed.\n      */\n-    void createTasks(AuditElements.EventCategoryType type, String category, String subcategory,\n+    List<NotificationTask> createTasks(AuditElements.EventCategoryType type, String category, String subcategory,\n             String event, AuditElements.Result condition, Object before, Object output, Object... input);\n \n     long getMaxRetries();"},{"sha":"900abc7b1659818a905c02cb16f332d4f3e77d96","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/notification/NotificationManagerImpl.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2f028924d52d5cb48595aa7e5056c20aeadb4945/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2f028924d52d5cb48595aa7e5056c20aeadb4945/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fnotification%2FNotificationManagerImpl.java?ref=2f028924d52d5cb48595aa7e5056c20aeadb4945","patch":"@@ -256,7 +256,7 @@ protected Context createVelocityContext(final Map<String, Object> model) {\n     }\n \n     @Override\n-    public void createTasks(\n+    public List<NotificationTask> createTasks(\n             final AuditElements.EventCategoryType type,\n             final String category,\n             final String subcategory,\n@@ -268,6 +268,7 @@ public void createTasks(\n \n         SubjectType subjectType = null;\n         Subject<?, ?, ?> subject = null;\n+        List<NotificationTask> notificationList = new ArrayList<NotificationTask>();\n \n         if (before instanceof UserTO) {\n             subjectType = SubjectType.USER;\n@@ -319,14 +320,17 @@ public void createTasks(\n                         model.put(\"group\", groupDataBinder.getGroupTO((Group) subject));\n                     }\n \n-                    taskDAO.save(getNotificationTask(notification, subject, model));\n+                    NotificationTask notificationTask = getNotificationTask(notification, subject, model);\n+                    notificationTask = taskDAO.save(notificationTask);\n+                    notificationList.add(notificationTask);     \n                 }\n             } else {\n                 LOG.debug(\"Notification {}, userAbout {}, groupAbout {} is deactivated, \"\n                         + \"notification task will not be created\", notification.getKey(),\n                         notification.getUserAbout(), notification.getGroupAbout());\n             }\n         }\n+        return notificationList;\n     }\n \n     private String getRecipientEmail("}]}