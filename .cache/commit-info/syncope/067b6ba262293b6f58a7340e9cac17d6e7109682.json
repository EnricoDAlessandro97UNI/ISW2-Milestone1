{"sha":"067b6ba262293b6f58a7340e9cac17d6e7109682","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjA2N2I2YmEyNjIyOTNiNmY1OGE3MzQwZTljYWMxN2Q2ZTcxMDk2ODI=","commit":{"author":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2014-05-08T12:49:21Z"},"committer":{"name":"Andrea Patricelli","email":"andreapatricelli@apache.org","date":"2014-05-08T12:49:21Z"},"message":"[SYNCOPE-490] improved SyncopeSession and login to prevent error page visualization after failed login and manual page reload\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1593254 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"92bf601ab43630bf3cb87d48cb0e263cf97a3c00","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/92bf601ab43630bf3cb87d48cb0e263cf97a3c00"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/067b6ba262293b6f58a7340e9cac17d6e7109682","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/067b6ba262293b6f58a7340e9cac17d6e7109682","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/067b6ba262293b6f58a7340e9cac17d6e7109682","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/067b6ba262293b6f58a7340e9cac17d6e7109682/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"1bfec5da1dd1ed5c1368d4bac60a1f30c2fb7700","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1bfec5da1dd1ed5c1368d4bac60a1f30c2fb7700","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1bfec5da1dd1ed5c1368d4bac60a1f30c2fb7700"}],"stats":{"total":6,"additions":6,"deletions":0},"files":[{"sha":"b3bcd3b43b174a828e85983c909ecc05e31abecf","filename":"console/src/main/java/org/apache/syncope/console/SyncopeSession.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/067b6ba262293b6f58a7340e9cac17d6e7109682/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/067b6ba262293b6f58a7340e9cac17d6e7109682/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java?ref=067b6ba262293b6f58a7340e9cac17d6e7109682","patch":"@@ -79,6 +79,10 @@ public SyncopeSession(final Request request) {\n         anonymousKey = applicationContext.getBean(\"anonymousKey\", String.class);\n     }\n \n+    public void resetClients() {\n+        clients.clear();\n+    }\n+\n     public boolean isSelfRegistrationAllowed() {\n         SyncopeClient client = clients.isEmpty()\n                 ? clientFactory.createAnonymous()"},{"sha":"bbb1b7faef62c3205228cecabef4831987f7e8d5","filename":"console/src/main/java/org/apache/syncope/console/pages/Login.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/067b6ba262293b6f58a7340e9cac17d6e7109682/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/067b6ba262293b6f58a7340e9cac17d6e7109682/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=067b6ba262293b6f58a7340e9cac17d6e7109682","patch":"@@ -22,6 +22,7 @@\n import java.util.List;\n import java.util.Locale;\n import org.apache.syncope.common.services.EntitlementService;\n+import org.apache.syncope.common.services.UserSelfService;\n import org.apache.syncope.common.wrap.EntitlementTO;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.util.CollectionWrapper;\n@@ -121,6 +122,7 @@ protected void onSubmit(AjaxRequestTarget target, Form<?> form) {\n                 } catch (AccessControlException e) {\n                     error(getString(\"login-error\"));\n                     feedbackPanel.refresh(target);\n+                    SyncopeSession.get().resetClients();\n                 }\n             }\n         };"}]}