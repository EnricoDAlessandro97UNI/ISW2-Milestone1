{"sha":"7526a2d59c482b708cbfe5da27f216023e554d01","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc1MjZhMmQ1OWM0ODJiNzA4Y2JmZTVkYTI3ZjIxNjAyM2U1NTRkMDE=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2015-09-15T13:43:43Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2015-09-15T13:43:43Z"},"message":"[SYNCOPE-156] modal window review in order to make content change possible at runtime","tree":{"sha":"d4a7d8411ee711c5c3ea94488faaa5f425f81702","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d4a7d8411ee711c5c3ea94488faaa5f425f81702"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7526a2d59c482b708cbfe5da27f216023e554d01","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7526a2d59c482b708cbfe5da27f216023e554d01","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7526a2d59c482b708cbfe5da27f216023e554d01","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7526a2d59c482b708cbfe5da27f216023e554d01/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"85df1a77abf823f8c4c9305f7f0ea973b1ed3041","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/85df1a77abf823f8c4c9305f7f0ea973b1ed3041","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/85df1a77abf823f8c4c9305f7f0ea973b1ed3041"}],"stats":{"total":570,"additions":335,"deletions":235},"files":[{"sha":"921888eab8c40055d1d59ce6320688fb19a1d871","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/BasePage.java","status":"modified","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -22,6 +22,7 @@\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.rest.UserWorkflowRestClient;\n import org.apache.syncope.client.console.topology.Topology;\n+import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.common.lib.types.Entitlement;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n@@ -175,4 +176,30 @@ public void onClose(final AjaxRequestTarget target) {\n             }\n         });\n     }\n+    \n+    /**\n+     * Set a WindowClosedCallback for a Modal instance.\n+     *\n+     * @param modal window\n+     * @param container container\n+     */\n+    public void setWindowClosedCallback(final BaseModal modal, final WebMarkupContainer container) {\n+        modal.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n+\n+            private static final long serialVersionUID = 8804221891699487139L;\n+\n+            @Override\n+            public void onClose(final AjaxRequestTarget target) {\n+                if (container != null) {\n+                    target.add(container);\n+                }\n+\n+                if (isModalResult()) {\n+                    info(getString(Constants.OPERATION_SUCCEEDED));\n+                    feedbackPanel.refresh(target);\n+                    setModalResult(false);\n+                }\n+            }\n+        });\n+    }\n }"},{"sha":"fbe81d6c9ebfdcb414b200f8506e7c9712318fde","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Realms.java","status":"modified","additions":110,"deletions":56,"changes":166,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -28,7 +28,7 @@\n import java.util.List;\n import java.util.Map;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n-import org.apache.syncope.client.console.panels.EditRealmModalPanel;\n+import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.panels.Realm;\n import org.apache.syncope.client.console.panels.RealmModalPanel;\n import org.apache.syncope.client.console.rest.RealmRestClient;\n@@ -60,25 +60,57 @@ public class Realms extends BasePage {\n     @SpringBean\n     private RealmRestClient realmRestClient;\n \n+    private final WebMarkupContainer menu;\n+\n     private final WebMarkupContainer content;\n \n     protected RealmTO currentRealm;\n \n+    final BaseModal<RealmTO> modal;\n+\n     public Realms(final PageParameters parameters) {\n         super(parameters);\n \n         final List<RealmTO> realms = realmRestClient.list();\n         Collections.sort(realms, new RealmNameComparator());\n \n-        addRealmTree(getParentMap(realms), 0L, Realms.this);\n+        menu = new WebMarkupContainer(\"menu\");\n+        menu.setOutputMarkupId(true);\n+        add(menu);\n+\n+        addRealmTree(getParentMap(realms), 0L, menu);\n         setCurrentRealm(realms.get(0));\n \n         content = new WebMarkupContainer(\"content\");\n         content.add(new Label(\"header\", \"Root realm\"));\n         content.add(new Label(\"body\", \"Root realm\"));\n         content.setOutputMarkupId(true);\n-        updateRealmContent(currentRealm);\n         add(content);\n+\n+        modal = new BaseModal<>(\"modal\");\n+        content.add(modal);\n+\n+        modal.setWindowClosedCallback(new WindowClosedCallback() {\n+\n+            private static final long serialVersionUID = 8804221891699487139L;\n+\n+            @Override\n+            public void onClose(final AjaxRequestTarget target) {\n+                final List<RealmTO> realms = realmRestClient.list();\n+                Collections.sort(realms, new RealmNameComparator());\n+                target.add(addRealmTree(getParentMap(realms), 0L, menu));\n+\n+                modal.show(false);\n+\n+                if (isModalResult()) {\n+                    info(getString(Constants.OPERATION_SUCCEEDED));\n+                    feedbackPanel.refresh(target);\n+                    setModalResult(false);\n+                }\n+            }\n+        });\n+\n+        updateRealmContent(currentRealm);\n     }\n \n     private MarkupContainer addRealmTree(\n@@ -180,92 +212,114 @@ public RealmTO getCurrentRealm() {\n     private void updateRealmContent(final RealmTO realmTO) {\n         content.addOrReplace(new Label(\"header\", realmTO.getName()));\n         content.addOrReplace(new Realm(\"body\", realmTO, getPageReference()));\n-        setupCreateModal();\n-        setupEditModal();\n+        setupDeleteLink();\n+        setupCreateLink();\n+        setupEditLink();\n     }\n \n-    private void setupCreateModal() {\n-        final BaseModal<RealmTO> createModal = new BaseModal<>(\"createModal\");\n-        createModal.header(new ResourceModel(\"createRealm\"));\n+    private void setupDeleteLink() {\n \n-        createModal.setWindowClosedCallback(new WindowClosedCallback() {\n+        final AjaxLink<Void> deleteLink = new ClearIndicatingAjaxLink<Void>(\"deleteLink\", getPageReference()) {\n \n-            private static final long serialVersionUID = 8804221891699487139L;\n+            private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n-            public void onClose(final AjaxRequestTarget target) {\n-                final List<RealmTO> realms = realmRestClient.list();\n-                Collections.sort(realms, new RealmNameComparator());\n-                target.add(addRealmTree(getParentMap(realms), 0L, Realms.this));\n+            protected void onClickInternal(final AjaxRequestTarget target) {\n+                try {\n+                    final RealmTO toBeDeleted = Realms.this.getCurrentRealm();\n+\n+                    if (toBeDeleted.getKey() == 0) {\n+                        throw new Exception(\"Root realm cannot be deleted\");\n+                    }\n+\n+                    realmRestClient.delete(toBeDeleted.getFullPath());\n+\n+                    final List<RealmTO> realms = realmRestClient.list();\n+                    Collections.sort(realms, new RealmNameComparator());\n+                    target.add(addRealmTree(getParentMap(realms), 0L, menu));\n+\n+//                    info(getString(Constants.OPERATION_SUCCEEDED));\n+//                    feedbackPanel.refresh(target);\n+                } catch (Exception e) {\n+                    LOG.error(\"While deleting realm\", e);\n+                    error(getString(Constants.ERROR) + \": \" + e.getMessage());\n+                    getFeedbackPanel().refresh(target);\n+                }\n             }\n-        });\n+        };\n \n-        content.addOrReplace(createModal);\n+        if (SyncopeConsoleSession.get().owns(Entitlement.REALM_DELETE)) {\n+            MetaDataRoleAuthorizationStrategy.authorize(deleteLink, ENABLE, Entitlement.REALM_DELETE);\n+        }\n \n-        final RealmModalPanel realmModalPanel = new RealmModalPanel(BaseModal.getModalContentId(),\n-                this.getPageReference(), createModal,\n-                new RealmTO(), this.getCurrentRealm().getFullPath(), Entitlement.REALM_CREATE);\n+        content.addOrReplace(deleteLink);\n+    }\n \n-        realmModalPanel.setOutputMarkupId(true);\n-        createModal.addOrReplace(realmModalPanel);\n+    private void setupCreateLink() {\n \n-        //create new realms                \n         final AjaxLink<Void> createLink = new ClearIndicatingAjaxLink<Void>(\"createLink\", getPageReference()) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n             protected void onClickInternal(final AjaxRequestTarget target) {\n-                createModal.addOrReplace(realmModalPanel);\n-                createModal.show(target);\n-            }\n+                modal.header(new ResourceModel(\"createRealm\"));\n+\n+                final RealmTO realmTO = new RealmTO();\n+                modal.setFormModel(realmTO);\n \n+                final RealmModalPanel panel = new RealmModalPanel(\n+                        modal,\n+                        Realms.this.getPageReference(),\n+                        realmTO,\n+                        Realms.this.getCurrentRealm().getFullPath(),\n+                        Entitlement.REALM_CREATE,\n+                        true);\n+                target.add(modal.setContent(panel));\n+\n+                modal.addSumbitButton();\n+                modal.show(true);\n+            }\n         };\n+\n         if (SyncopeConsoleSession.get().owns(Entitlement.REALM_CREATE)) {\n             MetaDataRoleAuthorizationStrategy.authorize(createLink, ENABLE, Entitlement.REALM_CREATE);\n         }\n+\n         content.addOrReplace(createLink);\n     }\n \n-    private void setupEditModal() {\n-\n-        final BaseModal<RealmTO> editModal = new BaseModal<>(\"editModal\");\n-        editModal.header(Model.of(getCurrentRealm().getName()));\n-\n-        editModal.setWindowClosedCallback(new WindowClosedCallback() {\n+    private void setupEditLink() {\n+        final AjaxLink<Void> editLink = new ClearIndicatingAjaxLink<Void>(\"editLink\", getPageReference()) {\n \n-            private static final long serialVersionUID = 8804221891699487139L;\n+            private static final long serialVersionUID = -6957616042924610290L;\n \n             @Override\n-            public void onClose(final AjaxRequestTarget target) {\n-                final List<RealmTO> realms = realmRestClient.list();\n-                Collections.sort(realms, new RealmNameComparator());\n-                target.add(addRealmTree(getParentMap(realms), 0L, Realms.this));\n-            }\n-        });\n+            protected void onClickInternal(final AjaxRequestTarget target) {\n+                modal.header(Model.of(Realms.this.getCurrentRealm().getName()));\n \n-        content.addOrReplace(editModal);\n+                final RealmTO realmTO = Realms.this.getCurrentRealm();\n+                modal.setFormModel(realmTO);\n \n-        final RealmModalPanel ediRealmModalPanel =\n-                new EditRealmModalPanel(\n-                        BaseModal.getModalContentId(),\n+                final RealmModalPanel panel = new RealmModalPanel(\n+                        modal,\n                         Realms.this.getPageReference(),\n-                        editModal, getCurrentRealm(), Realms.this.getCurrentRealm().getFullPath(),\n-                        Entitlement.REALM_UPDATE);\n-\n-        ediRealmModalPanel.setOutputMarkupId(true);\n-        editModal.addOrReplace(ediRealmModalPanel);\n-\n-        final AjaxLink<Void> edit = new ClearIndicatingAjaxLink<Void>(\"edit\", getPageReference()) {\n-\n-            private static final long serialVersionUID = -6957616042924610290L;\n-\n-            @Override\n-            protected void onClickInternal(final AjaxRequestTarget target) {\n-                editModal.show(target);\n+                        realmTO,\n+                        realmTO.getFullPath(),\n+                        Entitlement.REALM_UPDATE,\n+                        false);\n+                target.add(modal.setContent(panel));\n+\n+                modal.addSumbitButton();\n+                modal.show(true);\n             }\n         };\n-        content.addOrReplace(edit);\n+\n+        if (SyncopeConsoleSession.get().owns(Entitlement.REALM_UPDATE)) {\n+            MetaDataRoleAuthorizationStrategy.authorize(editLink, ENABLE, Entitlement.REALM_UPDATE);\n+        }\n+\n+        content.addOrReplace(editLink);\n     }\n \n     private static class ControlSidebarClick<T> {"},{"sha":"1ddffb788e784f24aa36c97ca0fc53cfd4cae2ee","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/AbstractModalPanel.java","status":"modified","additions":17,"deletions":26,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -18,7 +18,6 @@\n  */\n package org.apache.syncope.client.console.panels;\n \n-import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.init.MIMETypesLoader;\n import org.apache.syncope.client.console.rest.ConfigurationRestClient;\n import org.apache.syncope.client.console.rest.ConnectorRestClient;\n@@ -30,9 +29,12 @@\n import org.apache.syncope.client.console.rest.UserRestClient;\n import org.apache.syncope.client.console.rest.UserSelfRestClient;\n import org.apache.syncope.client.console.wicket.markup.head.MetaHeaderItem;\n+import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.markup.head.HeaderItem;\n import org.apache.wicket.markup.head.IHeaderResponse;\n import org.apache.wicket.markup.head.PriorityHeaderItem;\n+import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n@@ -44,14 +46,14 @@ public class AbstractModalPanel extends Panel {\n \n     protected static final Logger LOG = LoggerFactory.getLogger(AbstractModalPanel.class);\n \n+    protected final BaseModal<?> modal;\n+\n     protected static final String CANCEL = \"cancel\";\n \n     protected static final String SUBMIT = \"submit\";\n \n     protected static final String APPLY = \"apply\";\n \n-    protected static final String FORM = \"form\";\n-\n     protected final HeaderItem meta = new MetaHeaderItem(\"X-UA-Compatible\", \"IE=edge\");\n \n     @SpringBean\n@@ -84,37 +86,26 @@ public class AbstractModalPanel extends Panel {\n     @SpringBean\n     protected MIMETypesLoader mimeTypesInitializer;\n \n-    protected NotificationPanel feedbackPanel;\n-\n-    /**\n-     * Response flag set by the Modal Window after the operation is completed.\n-     */\n-    protected boolean modalResult = false;\n-\n-    public AbstractModalPanel(final String id) {\n+    public AbstractModalPanel(final String id, final BaseModal<?> modal) {\n         super(id);\n-\n-        feedbackPanel = new NotificationPanel(Constants.FEEDBACK);\n-        feedbackPanel.setOutputMarkupId(true);\n-        add(feedbackPanel);\n+        this.modal = modal;\n     }\n \n-    public NotificationPanel getFeedbackPanel() {\n-        return feedbackPanel;\n+    @Override\n+    public void renderHead(final IHeaderResponse response) {\n+        super.renderHead(response);\n+        response.render(new PriorityHeaderItem(meta));\n     }\n \n-    public boolean isModalResult() {\n-        return modalResult;\n+    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n+        this.modal.close(target);\n     }\n \n-    public void setModalResult(final boolean modalResult) {\n-        this.modalResult = modalResult;\n+    public void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+        modal.getFeedbackPanel().refresh(target);\n     }\n \n-    @Override\n-    public void renderHead(final IHeaderResponse response) {\n-        super.renderHead(response);\n-        response.render(new PriorityHeaderItem(meta));\n+    public void onError(final AjaxRequestTarget target, final Form<?> form) {\n+        modal.getFeedbackPanel().refresh(target);\n     }\n-\n }"},{"sha":"c4ddfa1f8ebfdc938cf289b8ac39eb78afe2bab0","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/EditRealmModalPanel.java","status":"removed","additions":0,"deletions":40,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/85df1a77abf823f8c4c9305f7f0ea973b1ed3041/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FEditRealmModalPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/85df1a77abf823f8c4c9305f7f0ea973b1ed3041/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FEditRealmModalPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FEditRealmModalPanel.java?ref=85df1a77abf823f8c4c9305f7f0ea973b1ed3041","patch":"@@ -1,40 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.console.panels;\n-\n-import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n-import org.apache.syncope.common.lib.to.RealmTO;\n-import org.apache.wicket.PageReference;\n-\n-public class EditRealmModalPanel extends RealmModalPanel {\n-\n-    private static final long serialVersionUID = -4285220460543213901L;\n-\n-    public EditRealmModalPanel(\n-            final String id,\n-            final PageReference pageRef,\n-            final BaseModal<RealmTO> window,\n-            final RealmTO realmTO,\n-            final String parentPath,\n-            final String entitlement) {\n-\n-        super(id, pageRef, window, realmTO, parentPath, entitlement);\n-\n-    }\n-}"},{"sha":"9c2f91b4ce9ced820480bb58c4f9df0dd1567b7e","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/GroupModalPanel.java","status":"modified","additions":7,"deletions":7,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupModalPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupModalPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupModalPanel.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -18,10 +18,10 @@\n  */\n package org.apache.syncope.client.console.panels;\n \n-import de.agilecoders.wicket.core.markup.html.bootstrap.dialog.Modal;\n import org.apache.commons.lang3.SerializationUtils;\n import org.apache.syncope.client.console.commons.Constants;\n import org.apache.syncope.client.console.commons.Mode;\n+import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.common.lib.AnyOperations;\n import org.apache.syncope.common.lib.mod.GroupMod;\n import org.apache.syncope.common.lib.to.GroupTO;\n@@ -48,14 +48,14 @@ public class GroupModalPanel extends AbstractModalPanel {\n \n     protected GroupTO originalGroupTO;\n \n-    public GroupModalPanel(final String id, final Modal<?> window, final GroupTO groupTO) {\n-        this(id, window, groupTO, Mode.ADMIN);\n+    public GroupModalPanel(final String id, final BaseModal<?> modal, final GroupTO groupTO) {\n+        this(id, modal, groupTO, Mode.ADMIN);\n     }\n \n     @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n-    public GroupModalPanel(final String id, final Modal<?> window, final GroupTO groupTO, final Mode mode) {\n+    public GroupModalPanel(final String id, final BaseModal<?> modal, final GroupTO groupTO, final Mode mode) {\n \n-        super(id);\n+        super(id, modal);\n \n         this.mode = mode;\n \n@@ -86,13 +86,13 @@ protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n                 } catch (Exception e) {\n                     LOG.error(\"Failure managing groupTO {}\", groupTO, e);\n                     error(getString(Constants.ERROR) + \": \" + e.getMessage());\n-                    feedbackPanel.refresh(target);\n+                    modal.getFeedbackPanel().refresh(target);\n                 }\n             }\n \n             @Override\n             protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n-                feedbackPanel.refresh(target);\n+                modal.getFeedbackPanel().refresh(target);\n             }\n         };\n         form.add(submit);"},{"sha":"6a048b3240cbfd9ceb6e69f6bc8d1002c6fb6795","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/GroupSearchResultPanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupSearchResultPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupSearchResultPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FGroupSearchResultPanel.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -127,7 +127,7 @@ public ActionLinksPanel<AnyTO> getActions(final String componentId, final IModel\n                     @Override\n                     public void onClick(final AjaxRequestTarget target, final AnyTO anyTO) {\n                         editModal.addOrReplace(new GroupModalPanel(\n-                                BaseModal.getModalContentId(), editModal, (GroupTO) model.getObject()));\n+                                BaseModal.getContentId(), editModal, (GroupTO) model.getObject()));\n \n                         target.add(editModal);\n                         editModal.show(target);"},{"sha":"ed0c491d8a51c5b34f6864708ab9f64c0be0c923","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/RealmModalPanel.java","status":"modified","additions":33,"deletions":46,"changes":79,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -20,19 +20,17 @@\n \n import static org.apache.wicket.Component.ENABLE;\n \n-import com.googlecode.wicket.jquery.ui.markup.html.link.AjaxSubmitLink;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.pages.AbstractBasePage;\n import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.rest.RealmRestClient;\n-import org.apache.syncope.client.console.wicket.markup.html.bootstrap.buttons.PrimaryModalButton;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.markup.html.form.Form;\n-import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n public class RealmModalPanel extends AbstractModalPanel {\n@@ -43,77 +41,66 @@ public class RealmModalPanel extends AbstractModalPanel {\n \n     private final PageReference pageRef;\n \n-    private final BaseModal<RealmTO> modal;\n+    private boolean newRealm = false;\n \n     @SpringBean\n     private RealmRestClient realmRestClient;\n \n     private final String parentPath;\n \n     public RealmModalPanel(\n-            final String id,\n+            final BaseModal<?> modal,\n             final PageReference pageRef,\n-            final BaseModal<RealmTO> modal,\n             final RealmTO realmTO,\n             final String parentPath,\n             final String entitlement) {\n+        this(modal, pageRef, realmTO, parentPath, entitlement, false);\n+    }\n \n-        super(id);\n+    public RealmModalPanel(\n+            final BaseModal<?> modal,\n+            final PageReference pageRef,\n+            final RealmTO realmTO,\n+            final String parentPath,\n+            final String entitlement,\n+            final boolean newRealm) {\n+\n+        super(BaseModal.getContentId(), modal);\n+        this.newRealm = newRealm;\n \n         this.pageRef = pageRef;\n-        this.modal = modal;\n         this.realmTO = realmTO;\n         this.parentPath = parentPath;\n \n-        final Form<RealmTO> form = new Form<>(\"realmForm\");\n-        form.setModel(new CompoundPropertyModel<>(realmTO));\n-\n         final RealmDetails realmDetail = new RealmDetails(\"details\", realmTO);\n         if (SyncopeConsoleSession.get().owns(entitlement)) {\n             MetaDataRoleAuthorizationStrategy.authorize(realmDetail, ENABLE, entitlement);\n         }\n-        form.add(realmDetail);\n \n-        final AjaxSubmitLink submit = getOnSubmit(form);\n-        modal.addFooterInput(submit);\n-        add(form);\n+        add(realmDetail);\n     }\n \n-    protected final PrimaryModalButton getOnSubmit(final Form form) {\n-        return new PrimaryModalButton(BaseModal.getModalInputId(), \"submit\", form) {\n-\n-            private static final long serialVersionUID = -958724007591692537L;\n-\n-            @Override\n-            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n-                try {\n-                    submitAction(target, form);\n-\n-                    if (pageRef.getPage() instanceof BasePage) {\n-                        ((BasePage) pageRef.getPage()).setModalResult(true);\n-                    }\n-\n-                    closeAction(target, form);\n-                } catch (Exception e) {\n-                    LOG.error(\"While creating or updating realm\", e);\n-                    error(getString(Constants.ERROR) + \": \" + e.getMessage());\n-                    feedbackPanel.refresh(target);\n-                }\n+    @Override\n+    public void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+        try {\n+            final RealmTO updatedRealmTO = RealmTO.class.cast(form.getModelObject());\n+            if (newRealm) {\n+                realmRestClient.create(this.parentPath, updatedRealmTO);\n+            } else {\n+                realmRestClient.update(updatedRealmTO);\n             }\n \n-            @Override\n-            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n-                feedbackPanel.refresh(target);\n+            if (pageRef.getPage() instanceof BasePage) {\n+                ((BasePage) pageRef.getPage()).setModalResult(true);\n             }\n-        };\n-    }\n \n-    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n-        final RealmTO updatedRealmTO = (RealmTO) form.getModelObject();\n-        realmRestClient.create(this.parentPath, updatedRealmTO);\n-    }\n+            AbstractBasePage.class.cast(pageRef.getPage()).setModalResult(true);\n \n-    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n-        this.modal.close(target);\n+            closeAction(target, form);\n+        } catch (Exception e) {\n+            LOG.error(\"While creating or updating realm\", e);\n+            error(getString(Constants.ERROR) + \": \" + e.getMessage());\n+            modal.getFeedbackPanel().refresh(target);\n+        }\n     }\n }"},{"sha":"2d99ee71212b691646ad4d4d77c9f00d794542d9","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/RealmRestClient.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FRealmRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FRealmRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FRealmRestClient.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -38,4 +38,12 @@ public List<RealmTO> list() {\n     public void create(final String parentPath, final RealmTO realmTO) {\n         getService(RealmService.class).create(parentPath, realmTO);\n     }\n+\n+    public void update(final RealmTO realmTO) {\n+        getService(RealmService.class).update(realmTO);\n+    }\n+\n+    public void delete(final String fullPath) {\n+        getService(RealmService.class).delete(fullPath);\n+    }\n }"},{"sha":"336f85ed48da1c30573b01ad14ad21e351e28f4c","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/bootstrap/buttons/PrimaryModalButton.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fbuttons%2FPrimaryModalButton.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fbuttons%2FPrimaryModalButton.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fbuttons%2FPrimaryModalButton.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -30,6 +30,6 @@ public class PrimaryModalButton extends AjaxSubmitLink {\n     public PrimaryModalButton(final String id, final String name, final Form<?> form) {\n         super(id, form);\n         add(new ButtonBehavior(Buttons.Type.Primary, Buttons.Size.Medium));\n-        \n+\n     }\n }"},{"sha":"42fbece0ac5ed3ce7837c02eb9317c97273e0c2e","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/bootstrap/dialog/BaseModal.java","status":"modified","additions":96,"deletions":20,"changes":116,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.java?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -22,71 +22,123 @@\n import de.agilecoders.wicket.extensions.markup.html.bootstrap.behavior.Draggable;\n import de.agilecoders.wicket.extensions.markup.html.bootstrap.behavior.DraggableConfig;\n import de.agilecoders.wicket.extensions.markup.html.bootstrap.behavior.Resizable;\n+import java.io.Serializable;\n import java.util.ArrayList;\n import java.util.List;\n+import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.panels.AbstractModalPanel;\n import org.apache.syncope.client.console.panels.NotificationPanel;\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.buttons.DefaultModalCloseButton;\n+import org.apache.syncope.client.console.wicket.markup.html.bootstrap.buttons.PrimaryModalButton;\n import org.apache.wicket.Component;\n-import org.apache.wicket.MarkupContainer;\n+import org.apache.wicket.WicketRuntimeException;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.core.request.handler.IPartialPageRequestHandler;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow.WindowClosedCallback;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n-import org.apache.wicket.markup.html.panel.EmptyPanel;\n+import org.apache.wicket.model.CompoundPropertyModel;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-public class BaseModal<T> extends Modal<T> {\n+public class BaseModal<T extends Serializable> extends Modal<T> {\n \n     private static final long serialVersionUID = -6142277554912316095L;\n \n     protected static final Logger LOG = LoggerFactory.getLogger(BaseModal.class);\n \n-    private static final String CONTENT = \"modalContent\";\n+    /** the default id of the content component */\n+    public static final String CONTENT_ID = \"content\";\n \n-    private static final String INPUT = \"input\";\n+    private static final String SUBMIT = \"submit\";\n+\n+    protected static final String FORM = \"form\";\n \n     protected NotificationPanel feedbackPanel;\n \n     private final List<Component> components;\n \n-    private final WebMarkupContainer container;\n-\n     private WindowClosedCallback windowClosedCallback;\n \n+    private AbstractModalPanel content;\n+\n+    private PrimaryModalButton submitButton;\n+\n+    final Form<T> form;\n+\n     public BaseModal(final String id) {\n         super(id);\n-        container = new WebMarkupContainer(\"container\");\n-        container.add(new EmptyPanel(CONTENT));\n-        container.setOutputMarkupId(true);\n-        add(container);\n+\n+        feedbackPanel = new NotificationPanel(Constants.FEEDBACK);\n+        feedbackPanel.setOutputMarkupId(true);\n+        add(feedbackPanel);\n+\n+        form = new Form<T>(FORM);\n+        add(form);\n+\n+        content = new AbstractModalPanel(CONTENT_ID, this) {\n+\n+            private static final long serialVersionUID = 1L;\n+\n+        };\n+\n+        content.setOutputMarkupId(true);\n+\n+        form.add(content);\n+\n         setUseCloseHandler(true);\n         this.windowClosedCallback = null;\n         components = new ArrayList<>();\n \n         // Note: it would imply the adding of WebjarsJavaScriptResourceReference about JQuery resizable and mouse\n         add(new Resizable().withChildSelector(\".modal-content\"));\n+        \n         // Note: it would imply the adding of WebjarsJavaScriptResourceReference about JQuery draggable\n         add(new Draggable(new DraggableConfig().withHandle(\".modal-header\").withCursor(\"move\")));\n+        \n         addButton(new DefaultModalCloseButton());\n         setUseKeyboard(true);\n         setFadeIn(true);\n \n     }\n \n-    @Override\n-    public MarkupContainer addOrReplace(final Component... component) {\n-        return container.addOrReplace(component);\n+    public NotificationPanel getFeedbackPanel() {\n+        return feedbackPanel;\n+    }\n+\n+    public Form<T> getForm() {\n+        return form;\n+    }\n+\n+    public BaseModal<T> setFormModel(final T modelObject) {\n+        form.setModel(new CompoundPropertyModel<>(modelObject));\n+        return this;\n     }\n \n-    public static String getModalContentId() {\n-        return CONTENT;\n+    public T getFormModel() {\n+        return form.getModelObject();\n     }\n \n-    public static String getModalInputId() {\n-        return INPUT;\n+    public AbstractModalPanel getContent() {\n+        return content;\n+    }\n+\n+    public BaseModal<T> setContent(final AbstractModalPanel component) {\n+        if (!component.getId().equals(getContentId())) {\n+            throw new WicketRuntimeException(\n+                    \"Modal content id is wrong. Component ID:\" + component.getId() + \"; content ID: \" + getContentId());\n+        }\n+\n+        content.replaceWith(component);\n+        content = component;\n+\n+        return this;\n+    }\n+\n+    public static String getContentId() {\n+        return CONTENT_ID;\n     }\n \n     public BaseModal<T> setWindowClosedCallback(final WindowClosedCallback callback) {\n@@ -101,8 +153,32 @@ protected void onClose(final IPartialPageRequestHandler target) {\n         }\n     }\n \n-    public void addFooterInput(final Component component) {\n-        this.components.add(component);\n+    public void addSumbitButton() {\n+\n+        final PrimaryModalButton submit = new PrimaryModalButton(SUBMIT, SUBMIT, form) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                BaseModal.this.getContent().onSubmit(target, form);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                BaseModal.this.getContent().onError(target, form);\n+            }\n+        };\n+\n+        submit.setOutputMarkupId(true);\n+\n+        if (submitButton == null) {\n+            submitButton = submit;\n+            this.components.add(submitButton);\n+        } else {\n+            submitButton.replaceWith(submit);\n+            submitButton = submit;\n+        }\n     }\n \n     @Override"},{"sha":"bf54dac0125048ead48485cf95234937e9a096cb","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Realms.html","status":"modified","additions":9,"deletions":6,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.html?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -28,15 +28,19 @@ <h3 class=\"box-title\">\n             </h3>\n             <div class=\"box-tools pull-right\">\n               <ul class=\"nav navbar-nav actions\">\n+                <li>\n+                  <a href=\"#\" wicket:id=\"editLink\">\n+                    <i class=\"fa fa-pencil-square-o\"></i>\n+                  </a>                  \n+                </li>\n                 <li>\n                   <a href=\"#\" wicket:id=\"createLink\">\n                     <i class=\"fa fa-plus\"></i>\n                   </a>                  \n                 </li>\n-                <li><a href=\"#\"><i class=\"fa fa-minus\"></i></a></li>\n                 <li>\n-                  <a href=\"#\" wicket:id=\"edit\">\n-                    <i class=\"fa fa-pencil-square-o\"></i>\n+                  <a href=\"#\" wicket:id=\"deleteLink\">\n+                    <i class=\"fa fa-minus\"></i>\n                   </a>                  \n                 </li>\n               </ul>\n@@ -48,13 +52,12 @@ <h3 class=\"box-title\">\n             </div>\n           </div>\n         </div>\n-        <div wicket:id=\"createModal\"></div>\n-        <div wicket:id=\"editModal\"></div>\n+        <div wicket:id=\"modal\"></div>\n       </div>\n \n       <aside class=\"control-sidebar control-sidebar-dark control-sidebar-open block-sidebar\">\n         <section class=\"sidebar\">\n-          <ul class=\"sidebar-menu\">\n+          <ul class=\"sidebar-menu\" wicket:id=\"menu\">\n             <wicket:container wicket:id=\"list\"></wicket:container>\n           </ul>\n         </section>"},{"sha":"abda19e035fa0ac2aa5326579a0ec1e0ad682ea6","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/AbstractModalPanel.html","status":"modified","additions":1,"deletions":23,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FAbstractModalPanel.html?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -16,30 +16,8 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n-\n-<!--  <wicket:head>\n-      <script type=\"text/javascript\">\n-        var notificationShownTimes = 0;\n-  \n-        function showNotification(componentId, messagecount) {\n-          notificationShownTimes++;\n-          timeout = 1700 + (messagecount * 500) + notificationShownTimes * 200;\n-          $('div#' + componentId).fadeTo('normal', 1.0);\n-          setTimeout(\"$('div#\" + componentId + \"').fadeOut('normal')\", timeout);\n-        }\n-      </script>\n-  \n-      <style type=\"text/css\">\n-        table.palette td.header {\n-          background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n-            repeat-x scroll 50% 50% #E6E6E6 !important;\n-        }\n-      </style>\n-  </wicket:head>-->\n-\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://xmlns.jcp.org/jsf/composite\">\n   <wicket:panel>\n-    <div wicket:id=\"feedback\"/>\n     <wicket:child />\n   </wicket:panel>\n </html>"},{"sha":"d07b59fe996baa5942dfadf2e265a1e9b2aaee0f","filename":"client/console/src/main/resources/org/apache/syncope/client/console/panels/RealmModalPanel.html","status":"modified","additions":1,"deletions":5,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmModalPanel.html?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -18,10 +18,6 @@\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n   <wicket:extend>\n-    <div wicket:id=\"feedback\"/>\n-    <form data-example-id=\"simple-input-groups\" class=\"bs-example bs-example-form\" wicket:id=\"realmForm\">\n-      <div wicket:id=\"details\">[details]</div>\n-      <wicket:child />\n-    </form>\n+    <div wicket:id=\"details\">[details]</div>\n   </wicket:extend>\n </html>"},{"sha":"920581ee4cb87531a5fa109bec95c13594bc0adc","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/bootstrap/dialog/BaseModal.html","status":"modified","additions":24,"deletions":4,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7526a2d59c482b708cbfe5da27f216023e554d01/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fbootstrap%2Fdialog%2FBaseModal.html?ref=7526a2d59c482b708cbfe5da27f216023e554d01","patch":"@@ -18,6 +18,25 @@\n under the License.\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:head>\n+    <script type=\"text/javascript\">\n+      var notificationShownTimes = 0;\n+\n+      function showNotification(componentId, messagecount) {\n+        notificationShownTimes++;\n+        timeout = 1700 + (messagecount * 500) + notificationShownTimes * 200;\n+        $('div#' + componentId).fadeTo('normal', 1.0);\n+        setTimeout(\"$('div#\" + componentId + \"').fadeOut('normal')\", timeout);\n+      }\n+    </script>\n+\n+    <style type=\"text/css\">\n+      table.palette td.header {\n+        background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n+          repeat-x scroll 50% 50% #E6E6E6 !important;\n+      }\n+    </style>\n+  </wicket:head>\n   <wicket:panel>\n     <div class=\"modal-dialog\" wicket:id=\"dialog\">\n       <div class=\"modal-content\">\n@@ -26,16 +45,17 @@\n           <h4 wicket:id=\"header-label\" class=\"modal-title\">Modal header</h4>\n         </div>\n         <div class=\"modal-body\">\n-          <div wicket:id=\"container\">\n-            <span wicket:id=\"modalContent\">[modalContent]</span>\n-          </div>\n+          <div wicket:id=\"feedback\"/>\n+          <form data-example-id=\"simple-input-groups\" class=\"bs-example bs-example-form\" wicket:id=\"form\">\n+            <span wicket:id=\"content\">[modal content]</span>\n+          </form>\n         </div>\n         <div class=\"modal-footer\" wicket:id=\"footer\">\n           <wicket:fragment wicket:id=\"buttons\">\n             <button type=\"button\" wicket:id=\"button\"></button>\n           </wicket:fragment>\n           <wicket:fragment wicket:id=\"inputs\">\n-            <button wicket:id=\"input\"><wicket:message key=\"submit\"/></button>\n+            <button wicket:id=\"submit\"><wicket:message key=\"submit\"/></button>\n           </wicket:fragment>\n         </div>\n       </div>"}]}