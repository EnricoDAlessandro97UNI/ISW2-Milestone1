{"sha":"79b7963ba0f91a59a3735b66d343a871c37b6c99","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc5Yjc5NjNiYTBmOTFhNTlhMzczNWI2NmQzNDNhODcxYzM3YjZjOTk=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-10-11T10:56:05Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-10-11T10:56:05Z"},"message":"Reorganizing resources\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246586 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d20cd508604f223d8a9f27dacd6d8337995c778e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d20cd508604f223d8a9f27dacd6d8337995c778e"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/79b7963ba0f91a59a3735b66d343a871c37b6c99","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/79b7963ba0f91a59a3735b66d343a871c37b6c99","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/79b7963ba0f91a59a3735b66d343a871c37b6c99","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/79b7963ba0f91a59a3735b66d343a871c37b6c99/comments","author":null,"committer":null,"parents":[{"sha":"f1a1387d7b76d097f16da9ab7e6cdcf1ce50d9c3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f1a1387d7b76d097f16da9ab7e6cdcf1ce50d9c3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f1a1387d7b76d097f16da9ab7e6cdcf1ce50d9c3"}],"stats":{"total":76,"additions":44,"deletions":32},"files":[{"sha":"3631200448d9c3c492f131f4ed0dbddbefee01ec","filename":"core/pom.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -312,7 +312,7 @@\n                     </components>\n                     <componentProperties>\n                         <jdk5>true</jdk5>\n-                        <propertyfile>${project.build.directory}/test-classes/org/syncope/core/persistence/db.properties</propertyfile>\n+                        <propertyfile>${project.build.directory}/test-classes/persistence.properties</propertyfile>\n                         <skip>${maven.test.skip}</skip>\n                         <format>true</format>\n                     </componentProperties>\n@@ -361,7 +361,7 @@\n                             <finalName>integration-test</finalName>\n                             <classesDirectory>${project.build.directory}/test-classes</classesDirectory>\n                             <includes>\n-                                <include>**/db.properties</include>\n+                                <include>**/persistence.properties</include>\n                                 <include>**/content.xml</include>\n                                 <include>**/treecache.xml</include>\n                             </includes>\n@@ -386,8 +386,8 @@\n                         </goals>\n                         <configuration>\n                             <packagingExcludes>\n-                                WEB-INF/classes/org/syncope/core/persistence/db.properties,\n-                                WEB-INF/classes/org/syncope/core/persistence/content.xml,\n+                                WEB-INF/classes/persistence.properties,\n+                                WEB-INF/classes/content.xml,\n                                 WEB-INF/classes/treecache.xml,\n                                 WEB-INF/classes/beans.xml\n                             </packagingExcludes>"},{"sha":"e7478efd87e4ca30e621deb7a493e13335f172b1","filename":"core/src/main/java/org/syncope/core/monitor/CacheMonitor.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fmonitor%2FCacheMonitor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fmonitor%2FCacheMonitor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fmonitor%2FCacheMonitor.java?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -39,7 +39,9 @@ public class CacheMonitor {\n     private EntityManager entityManager;\n \n     @Around(\"execution(* org.syncope.core.persistence.dao..*.*(..))\")\n-    public final Object log(final ProceedingJoinPoint pjp) throws Throwable {\n+    public final Object log(final ProceedingJoinPoint pjp)\n+            throws Throwable {\n+\n         Object result;\n         if (!LOG.isDebugEnabled()) {\n             result = pjp.proceed();"},{"sha":"2c6b04191813efcd4ddda09cc7ace2f18191c7fe","filename":"core/src/main/java/org/syncope/core/persistence/DefaultContentLoader.java","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FDefaultContentLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FDefaultContentLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2FDefaultContentLoader.java?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -71,16 +71,15 @@ public final void contextInitialized(final ServletContextEvent sce) {\n         try {\n             InputStream dbPropsStream =\n                     sce.getServletContext().getResourceAsStream(\n-                    \"WEB-INF/classes/\"\n-                    + \"org/syncope/core/persistence/db.properties\");\n+                    \"WEB-INF/classes/persistence.properties\");\n             Properties dbProps = new Properties();\n             dbProps.load(dbPropsStream);\n             dbSchema = dbProps.getProperty(\"database.schema\");\n         } catch (Throwable t) {\n             if (LOG.isDebugEnabled()) {\n-                LOG.debug(\"Could not find db.properties\", t);\n+                LOG.debug(\"Could not find persistence.properties\", t);\n             } else {\n-                LOG.error(\"Could not find db.properties\");\n+                LOG.error(\"Could not find persistence.properties\");\n             }\n         }\n \n@@ -133,7 +132,7 @@ public final void contextInitialized(final ServletContextEvent sce) {\n                         new FlatXmlDataSetBuilder();\n                 dataSetBuilder.setColumnSensing(true);\n                 IDataSet dataSet = dataSetBuilder.build(\n-                        getClass().getResourceAsStream(\"content.xml\"));\n+                        getClass().getResourceAsStream(\"/content.xml\"));\n \n                 DatabaseOperation.CLEAN_INSERT.execute(dbUnitConn, dataSet);\n             }"},{"sha":"8c5f83ae60ec4a2e273b62d66123d41c7737fd8d","filename":"core/src/main/resources/content.xml","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","previous_filename":"core/src/main/resources/org/syncope/core/persistence/content.xml"},{"sha":"d1980b95ebc5622cf4109d0a586e3196da2b30f7","filename":"core/src/main/resources/persistence.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Fpersistence.properties?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","previous_filename":"core/src/main/resources/org/syncope/core/persistence/db.properties"},{"sha":"66066577a418a3a42f4b69f8d4552fec86bce126","filename":"core/src/main/resources/persistenceContext.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -43,7 +43,7 @@\n           class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n         <property name=\"locations\">\n             <list>\n-                <value>classpath:org/syncope/core/persistence/db.properties</value>\n+                <value>classpath:persistence.properties</value>\n             </list>\n         </property>\n     </bean>"},{"sha":"d4f2caa14be42c01d9408a8155581c0081a11da9","filename":"core/src/test/java/org/syncope/core/test/persistence/AbstractTest.java","status":"modified","additions":30,"deletions":19,"changes":49,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FAbstractTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FAbstractTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FAbstractTest.java?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -20,7 +20,6 @@\n import java.sql.Connection;\n import java.sql.DatabaseMetaData;\n import java.sql.ResultSet;\n-import java.sql.ResultSetMetaData;\n import java.sql.SQLException;\n import java.sql.Statement;\n import java.util.Properties;\n@@ -47,34 +46,45 @@\n })\n public abstract class AbstractTest {\n \n+    /**\n+     * Logger.\n+     */\n     protected static final Logger LOG = LoggerFactory.getLogger(\n             AbstractTest.class);\n-    protected static String bundles_version;\n-    protected static String bundles_directory;\n+    protected static String bundlesVersion;\n+    protected static String bundlesDirectory;\n     @Autowired\n     private DataSource dataSource;\n     @Autowired\n     private DefaultDataTypeFactory dbUnitDataTypeFactory;\n \n-    private void logTableContent(Connection conn, String tableName)\n+    private void logTableContent(final Connection conn,\n+            final String tableName)\n             throws SQLException {\n \n+        if (LOG.isDebugEnabled()) {\n+            LOG.debug(\"Table: \" + tableName);\n+        }\n+\n         Statement stmt = null;\n         ResultSet rs = null;\n         try {\n             stmt = conn.createStatement();\n-\n             rs = stmt.executeQuery(\"SELECT * FROM \" + tableName);\n-            ResultSetMetaData metaData = rs.getMetaData();\n-            LOG.debug(\"Table: \" + tableName);\n-            StringBuilder row = new StringBuilder();\n+\n+            final StringBuilder row = new StringBuilder();\n             while (rs.next()) {\n-                for (int i = 0; i < metaData.getColumnCount(); i++) {\n-                    row.append(metaData.getColumnLabel(i + 1)).append(\"=\").\n-                            append(rs.getString(i + 1)).append(\" \");\n+                for (int i = 0; i < rs.getMetaData().getColumnCount(); i++) {\n+                    row.append(rs.getMetaData().getColumnLabel(i + 1)).\n+                            append(\"=\").\n+                            append(rs.getString(i + 1)).\n+                            append(\" \");\n+                }\n+\n+                if (LOG.isDebugEnabled()) {\n+                    LOG.debug(row.toString());\n                 }\n \n-                LOG.debug(row.toString());\n                 row.delete(0, row.length());\n             }\n         } catch (SQLException sqle) {\n@@ -86,7 +96,8 @@ private void logTableContent(Connection conn, String tableName)\n     }\n \n     @Before\n-    public void setUpTestDataWithinTransaction() throws Exception {\n+    public void setUpTestDataWithinTransaction()\n+            throws Exception {\n         Connection conn = DataSourceUtils.getConnection(dataSource);\n         IDatabaseConnection dbUnitConn = new DatabaseConnection(conn);\n \n@@ -97,7 +108,7 @@ public void setUpTestDataWithinTransaction() throws Exception {\n         FlatXmlDataSetBuilder dataSetBuilder = new FlatXmlDataSetBuilder();\n         dataSetBuilder.setColumnSensing(true);\n         IDataSet dataSet = dataSetBuilder.build(getClass().getResourceAsStream(\n-                \"/org/syncope/core/persistence/content.xml\"));\n+                \"/content.xml\"));\n         try {\n             DatabaseOperation.CLEAN_INSERT.execute(dbUnitConn, dataSet);\n         } catch (Throwable t) {\n@@ -125,19 +136,19 @@ public void setUpTestDataWithinTransaction() throws Exception {\n     }\n \n     @Before\n-    public void init() {\n+    public void setUpIdentityConnectorsBundles() {\n         Properties props = new java.util.Properties();\n         try {\n             InputStream propStream =\n                     getClass().getResourceAsStream(\n                     \"/bundles.properties\");\n             props.load(propStream);\n-            bundles_version = props.getProperty(\"bundles.version\");\n-            bundles_directory = props.getProperty(\"bundles.directory\");\n+            bundlesVersion = props.getProperty(\"bundles.version\");\n+            bundlesDirectory = props.getProperty(\"bundles.directory\");\n         } catch (Throwable t) {\n             LOG.error(\"Could not load bundles.properties\", t);\n         }\n-        assertNotNull(bundles_version);\n-        assertNotNull(bundles_directory);\n+        assertNotNull(bundlesVersion);\n+        assertNotNull(bundlesDirectory);\n     }\n }"},{"sha":"e74345e65d6e2c1c3ed0e3d6680d1802b8ebee53","filename":"core/src/test/java/org/syncope/core/test/persistence/ConnectorInstanceDAOTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FConnectorInstanceDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FConnectorInstanceDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FConnectorInstanceDAOTest.java?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -48,7 +48,7 @@ public final void findById() {\n                 connectorInstance.getBundleName());\n \n         assertEquals(\"invalid bundle version\",\n-                bundles_version, connectorInstance.getVersion());\n+                bundlesVersion, connectorInstance.getVersion());\n     }\n \n     @Test"},{"sha":"d3dd47dcaac9da1aa4eed99b536fe580008d715c","filename":"core/src/test/java/org/syncope/core/test/persistence/ResourceDAOTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FResourceDAOTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FResourceDAOTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Fpersistence%2FResourceDAOTest.java?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","patch":"@@ -53,7 +53,7 @@ public final void findById() {\n                 connector.getBundleName());\n \n         assertEquals(\"invalid bundle version\",\n-                bundles_version, connector.getVersion());\n+                bundlesVersion, connector.getVersion());\n \n         List<SchemaMapping> mappings = resource.getMappings();\n "},{"sha":"5477c77c733f2e773df4525571bd4b9960905a99","filename":"core/src/test/resources/content.xml","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","previous_filename":"core/src/test/resources/org/syncope/core/persistence/content.xml"},{"sha":"62efa0bf08e2d0b1b1a9042ba754b95c80f018d5","filename":"core/src/test/resources/persistence.properties","status":"renamed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/79b7963ba0f91a59a3735b66d343a871c37b6c99/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fpersistence.properties?ref=79b7963ba0f91a59a3735b66d343a871c37b6c99","previous_filename":"core/src/test/resources/org/syncope/core/persistence/db.properties"}]}