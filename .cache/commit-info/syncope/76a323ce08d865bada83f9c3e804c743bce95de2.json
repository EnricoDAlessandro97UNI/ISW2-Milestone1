{"sha":"76a323ce08d865bada83f9c3e804c743bce95de2","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc2YTMyM2NlMDhkODY1YmFkYTgzZjljM2U4MDRjNzQzYmNlOTVkZTI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-07-06T07:39:00Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-07-06T07:39:36Z"},"message":"Fixes to the release process after 2.1.0","tree":{"sha":"ba066dfc9f5bbd1512a33a0c76b09027b4a6e120","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ba066dfc9f5bbd1512a33a0c76b09027b4a6e120"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/76a323ce08d865bada83f9c3e804c743bce95de2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/76a323ce08d865bada83f9c3e804c743bce95de2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/76a323ce08d865bada83f9c3e804c743bce95de2","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/76a323ce08d865bada83f9c3e804c743bce95de2/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"0057595c9fa341af49ce671d67c1ac80f06294c9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0057595c9fa341af49ce671d67c1ac80f06294c9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0057595c9fa341af49ce671d67c1ac80f06294c9"}],"stats":{"total":75,"additions":30,"deletions":45},"files":[{"sha":"dcd11b1f4818e20e910e4ed202cb52a6b8bbaad6","filename":"pom.xml","status":"modified","additions":1,"deletions":15,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76a323ce08d865bada83f9c3e804c743bce95de2/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76a323ce08d865bada83f9c3e804c743bce95de2/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=76a323ce08d865bada83f9c3e804c743bce95de2","patch":"@@ -2258,7 +2258,7 @@ under the License.\n         <artifactId>maven-javadoc-plugin</artifactId>\n         <version>2.10.4</version>\n         <configuration>\n-          <destDir>apidocs/2.0</destDir>\n+          <destDir>apidocs/2.1</destDir>\n           <isOffline>false</isOffline>\n           <detectLinks>true</detectLinks>\n           <detectJavaApiLink>true</detectJavaApiLink>\n@@ -2487,20 +2487,6 @@ under the License.\n                   </target>\n                 </configuration>\n               </execution>\n-              <execution>\n-                <id>place-htaccess</id>\n-                <goals>\n-                  <goal>run</goal>\n-                </goals>\n-                <phase>site-deploy</phase>\n-                <configuration>\n-                  <target>\n-                    <copy todir=\"${site.deploymentBaseDir}/docs\">\n-                      <fileset dir=\"${rootpom.basedir}/src/site/\" includes=\".htaccess\" />\n-                    </copy>\n-                  </target>\n-                </configuration>\n-              </execution>\n             </executions>\n           </plugin>\n         </plugins>"},{"sha":"5c3d2a0592e7d5c000c703b1029095c5f036e829","filename":"src/site/.htaccess","status":"removed","additions":0,"deletions":19,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0057595c9fa341af49ce671d67c1ac80f06294c9/src%2Fsite%2F.htaccess","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0057595c9fa341af49ce671d67c1ac80f06294c9/src%2Fsite%2F.htaccess","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fsite%2F.htaccess?ref=0057595c9fa341af49ce671d67c1ac80f06294c9","patch":"@@ -1,19 +0,0 @@\n-# Licensed to the Apache Software Foundation (ASF) under one\n-# or more contributor license agreements.  See the NOTICE file\n-# distributed with this work for additional information\n-# regarding copyright ownership.  The ASF licenses this file\n-# to you under the Apache License, Version 2.0 (the\n-# \"License\"); you may not use this file except in compliance\n-# with the License.  You may obtain a copy of the License at\n-#\n-#   http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing,\n-# software distributed under the License is distributed on an\n-# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-# KIND, either express or implied.  See the License for the\n-# specific language governing permissions and limitations\n-# under the License.\n-\n-RedirectMatch getting-started(.*)$ \"https://syncope.apache.org/docs/2.1/getting-started$1\"\n-RedirectMatch reference-guide(.*)$ \"https://syncope.apache.org/docs/2.1/reference-guide$1\""},{"sha":"2d3ad584fac988bc39dcfaa5dc614a60fa9e870f","filename":"src/site/xdoc/release-process.xml","status":"modified","additions":29,"deletions":11,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/76a323ce08d865bada83f9c3e804c743bce95de2/src%2Fsite%2Fxdoc%2Frelease-process.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/76a323ce08d865bada83f9c3e804c743bce95de2/src%2Fsite%2Fxdoc%2Frelease-process.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fsite%2Fxdoc%2Frelease-process.xml?ref=76a323ce08d865bada83f9c3e804c743bce95de2","patch":"@@ -312,17 +312,27 @@ unzip $SYNCOPE_RELEASE_DIR/target/syncope-$VERSION-source-release.zip\n cd syncope-$VERSION        \n mvn -PskipTests,all\n \n-cd fit/core-reference && mvn -Pdebug,all\n+cd standalone/target/standalone/apache-tomcat-* && ./bin/startup.sh\n+\n+curl -o /tmp/syncope.wadl http://localhost:9080/syncope/syncope.wadl\n+\n curl -o /tmp/index.html http://localhost:9080/syncope/index.html\n-sed -i 's/\\/syncope\\/webjars\\/jquery\\/2.2.4\\/jquery.min.js/https:\\/\\/code.jquery.com\\/jquery-2.2.4.min.js/' index.html \n-sed -i 's/\\/syncope\\/webjars\\/jquery-ui\\/1.11.4\\/jquery-ui.min.js/http:\\/\\/code.jquery.com\\/ui\\/1.11.4\\/jquery-ui.min.js/' index.html               \n-sed -i 's/\\/syncope\\/webjars\\/jquery-ui-themes\\/1.11.4\\/smoothness\\/jquery-ui.min.css/https:\\/\\/code.jquery.com\\/ui\\/1.11.4\\/themes\\/smoothness\\/jquery-ui.css/' index.html \n+sed -i 's/\\/syncope\\/webjars\\/jquery\\/2.2.4\\/jquery.min.js/https:\\/\\/code.jquery.com\\/jquery-2.2.4.min.js/' /tmp/index.html \n+sed -i 's/\\/syncope\\/webjars\\/jquery-ui\\/1.11.4\\/jquery-ui.min.js/http:\\/\\/code.jquery.com\\/ui\\/1.11.4\\/jquery-ui.min.js/' /tmp/index.html               \n+sed -i 's/\\/syncope\\/webjars\\/jquery-ui-themes\\/1.11.4\\/smoothness\\/jquery-ui.min.css/https:\\/\\/code.jquery.com\\/ui\\/1.11.4\\/themes\\/smoothness\\/jquery-ui.css/' /tmp/index.html \n+\n+# if releasing from 2_0_X\n curl -o /tmp/schema_1_syncope2.html http://localhost:9080/syncope/schema_1_syncope2.html\n-sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/styles\\/default.min.css/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/styles\\/default.min.css/' schema_1_syncope2.html \n-sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/highlight.min.js/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/highlight.min.js/' schema_1_syncope2.html \n-curl -o /tmp/syncope.wadl http://localhost:9080/syncope/syncope.wadl\n-# now CTRL+C to stop cargo\n+sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/styles\\/default.min.css/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/styles\\/default.min.css/' /tmp/schema_1_syncope2.html \n+sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/highlight.min.js/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/highlight.min.js/' /tmp/schema_1_syncope2.html \n \n+# else if releasing from 2_1_X\n+curl -o /tmp/schema_1_syncope2.html http://localhost:9080/syncope/schema_1_syncope21.html\n+sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/styles\\/default.min.css/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/styles\\/default.min.css/' /tmp/schema_1_syncope21.html \n+sed -i 's/\\/syncope\\/webjars\\/highlightjs\\/9.8.0\\/highlight.min.js/http:\\/\\/cdnjs.cloudflare.com\\/ajax\\/libs\\/highlight.js\\/9.8.0\\/highlight.min.js/' /tmp/schema_1_syncope21.html \n+\n+./bin/shutdown.sh && cd - \n+              \n svn checkout https://svn.apache.org/repos/asf/syncope/site/ site\n \n cd $SYNCOPE_SITE_DIR\n@@ -338,20 +348,28 @@ mv /tmp/syncope.wadl $VERSION/rest/2.0\n cp $SYNCOPE_SITE_DIR/target/generated-docs/getting-started.* docs/2.0/\n cp $SYNCOPE_SITE_DIR/target/generated-docs/reference-guide.* docs/2.0/\n cp -r $SYNCOPE_SITE_DIR/target/generated-docs/images docs/2.0/\n-cd ..\n+cd docs\n+ln -s 2.1/reference-guide.html .\n+ln -s 2.1/getting-started.html .\n+ln -s 2.1/images/ .\n+cd ../..\n svn add $VERSION\n svn copy apidocs/2.1 $VERSION/apidocs/\n svn copy rest/2.1 $VERSION/rest/\n \n # else if releasing from 2_1_X\n mkdir -p $VERSION/rest/2.1\n mv /tmp/index.html $VERSION/rest/2.1\n-mv /tmp/schema_1_syncope2.html $VERSION/rest/2.1\n+mv /tmp/schema_1_syncope21.html $VERSION/rest/2.1\n mv /tmp/syncope.wadl $VERSION/rest/2.1\n cp $SYNCOPE_SITE_DIR/target/generated-docs/getting-started.* docs/2.1/\n cp $SYNCOPE_SITE_DIR/target/generated-docs/reference-guide.* docs/2.1/\n cp -r $SYNCOPE_SITE_DIR/target/generated-docs/images docs/2.1/\n-cd ..\n+cd docs\n+ln -s 2.1/reference-guide.html .\n+ln -s 2.1/getting-started.html .\n+ln -s 2.1/images/ .\n+cd ../..\n svn add $VERSION\n svn copy apidocs/2.0 $VERSION/apidocs/\n svn copy rest/2.0 $VERSION/rest/"}]}