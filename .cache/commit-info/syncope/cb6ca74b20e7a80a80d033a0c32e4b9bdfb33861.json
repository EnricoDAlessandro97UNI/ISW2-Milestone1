{"sha":"cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmNiNmNhNzRiMjBlN2E4MGE4MGQwMzNhMGMzMmU0YjliZGZiMzM4NjE=","commit":{"author":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2018-11-28T08:54:34Z"},"committer":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2018-11-28T09:20:48Z"},"message":"[SYNCOPE-1404] Fix dialog not closing in Netbeans ide plugin when creating a new element","tree":{"sha":"f3c07d675f2b1d0f485374664a554df85bfdc864","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/f3c07d675f2b1d0f485374664a554df85bfdc864"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/comments","author":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"committer":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"parents":[{"sha":"fb6d9229bef59c4bbfec6a51155e01b521eef6f7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fb6d9229bef59c4bbfec6a51155e01b521eef6f7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fb6d9229bef59c4bbfec6a51155e01b521eef6f7"}],"stats":{"total":344,"additions":177,"deletions":167},"files":[{"sha":"5d4391ebbf738098d6f54243e9b5a52cee55389e","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/ConnectionParams.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FConnectionParams.java?ref=cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","patch":"@@ -29,7 +29,9 @@ public final class ConnectionParams {\n     public static final class Builder {\n \n         private String scheme;\n+\n         private String host;\n+\n         private String port;\n \n         private String username;\n@@ -43,10 +45,12 @@ public Builder scheme(final String value) {\n             this.scheme = value;\n             return this;\n         }\n+\n         public Builder host(final String value) {\n             this.host = value;\n             return this;\n         }\n+\n         public Builder port(final String value) {\n             this.port = value;\n             return this;"},{"sha":"92bf8814ea44f34392b227c200dc95efab80734d","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/ResourceConnector.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2FResourceConnector.java?ref=cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","patch":"@@ -33,7 +33,7 @@ public final class ResourceConnector {\n \n     private static ReportTemplateManagerService REPORT_TEMPLATE_MANAGER_SERVICE;\n \n-     private static ImplementationManagerService IMPLEMENTATION_MANAGER_SERVICE;\n+    private static ImplementationManagerService IMPLEMENTATION_MANAGER_SERVICE;\n \n     private static final Object MAIL_TEMPLATE_MONITOR = new Object();\n \n@@ -76,7 +76,7 @@ public static ImplementationManagerService getImplementationManagerService() thr\n         }\n         return IMPLEMENTATION_MANAGER_SERVICE;\n     }\n-    \n+\n     public static ConnectionParams getConnectionParams() {\n         Preferences prefs = NbPreferences.forModule(ResourceExplorerTopComponent.class);\n         return ConnectionParams.builder()"},{"sha":"b8f762133ef7d653d9248dc34e6ead32b0f6ca1d","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/service/ImplementationManagerService.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fservice%2FImplementationManagerService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fservice%2FImplementationManagerService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fservice%2FImplementationManagerService.java?ref=cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","patch":"@@ -28,30 +28,30 @@\n \n public class ImplementationManagerService {\n \n-    private final ImplementationService service ;\n+    private final ImplementationService service;\n \n     public ImplementationManagerService(final String url, final String userName, final String password) {\n         SyncopeClient syncopeClient = new SyncopeClientFactoryBean().setAddress(url).create(userName, password);\n         service = syncopeClient.getService(ImplementationService.class);\n     }\n- \n+\n     public List<ImplementationTO> list(final ImplementationType type) {\n         return service.list(type);\n-    } \n+    }\n \n-    public ImplementationTO read(final ImplementationType type , final String key) {\n+    public ImplementationTO read(final ImplementationType type, final String key) {\n         return service.read(type, key);\n     }\n \n     public boolean create(final ImplementationTO implementationTO) {\n         return Response.Status.CREATED.getStatusCode() == service.create(implementationTO).getStatus();\n     }\n \n-    public boolean delete(final ImplementationType type , final String key) {\n+    public boolean delete(final ImplementationType type, final String key) {\n         return Response.Status.NO_CONTENT.getStatusCode() == service.delete(type, key).getStatus();\n     }\n \n     public boolean update(final ImplementationTO implementationTO) {\n-       return Response.Status.NO_CONTENT.getStatusCode() == service.update(implementationTO).getStatus();\n+        return Response.Status.NO_CONTENT.getStatusCode() == service.update(implementationTO).getStatus();\n     }\n }"},{"sha":"8eb17cd0ffc31cf7db48cd72d1338e39cc15cb93","filename":"ide/netbeans/src/main/java/org/apache/syncope/ide/netbeans/view/ResourceExplorerTopComponent.java","status":"modified","additions":165,"deletions":159,"changes":324,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ide%2Fnetbeans%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fide%2Fnetbeans%2Fview%2FResourceExplorerTopComponent.java?ref=cb6ca74b20e7a80a80d033a0c32e4b9bdfb33861","patch":"@@ -191,37 +191,40 @@ private void resourceExplorerTreeMouseClicked(final java.awt.event.MouseEvent ev\n                     } else if (PluginConstants.REPORT_XSLTS.equals(parentNodeName)) {\n                         openReportEditor(leafNodeName);\n                     } else if (PluginConstants.GROOVY_SCRIPTS.equals(grandParentNodeName)) {\n-                        openScriptEditor(leafNodeName , parentNodeName);\n+                        openScriptEditor(leafNodeName, parentNodeName);\n                     }\n-                }  catch (SyncopeClientException ex) {\n-                JOptionPane.showMessageDialog(null, ex.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n+                } catch (SyncopeClientException ex) {\n+                    JOptionPane.showMessageDialog(null, ex.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n                 } catch (IOException ex) {\n-                JOptionPane.showMessageDialog(null , ex.getMessage(), \"Error\" , JOptionPane.ERROR_MESSAGE);\n+                    JOptionPane.showMessageDialog(null, ex.getMessage(), \"Error\", JOptionPane.ERROR_MESSAGE);\n                 } catch (Exception ex) {\n-                LOG.info(\"The Exception is\" + ex);\n-                getRefreshServerDetails().setVisible(true);\n-                }               \n+                    LOG.log(Level.WARNING, \"While navigating explorer tree {0}\", ex);\n+                    getRefreshServerDetails().setVisible(true);\n+                }\n             }\n         } else if (evt.getButton() == MouseEvent.BUTTON3 && evt.getClickCount() == 1) {\n             DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) resourceExplorerTree.\n                     getLastSelectedPathComponent();\n-            DefaultMutableTreeNode parent = (DefaultMutableTreeNode) selectedNode.getParent();\n-            String parentNodeName = (String) parent.getUserObject();\n-            String selectedNodeName = (String) selectedNode.getUserObject();\n-            if (selectedNode.isLeaf()\n-                    && !PluginConstants.ROOT_NAME.equals(selectedNodeName)\n-                    && !PluginConstants.MAIL_TEMPLATES.equals(selectedNodeName)\n-                    && !PluginConstants.REPORT_XSLTS.equals(selectedNodeName)\n-                    && !PluginConstants.GROOVY_SCRIPTS.equals(parentNodeName)) {\n-                leafRightClickAction(evt, selectedNode);\n-            } else if (PluginConstants.MAIL_TEMPLATES.equals(selectedNodeName)) {\n-                folderRightClickAction(evt, mailTemplates);\n-            } else if (PluginConstants.REPORT_XSLTS.equals(selectedNodeName)) {\n-                folderRightClickAction(evt, reportXslts);\n-            } else if (PluginConstants.GROOVY_SCRIPTS.equals(parentNodeName)) {\n-                folderRightClickAction(evt, selectedNode);\n-            } else if (PluginConstants.ROOT_NAME.equals(selectedNodeName)) {\n-                rootRightClickAction(evt);\n+\n+            if (selectedNode != null) {\n+                DefaultMutableTreeNode parent = (DefaultMutableTreeNode) selectedNode.getParent();\n+                String parentNodeName = (String) parent.getUserObject();\n+                String selectedNodeName = (String) selectedNode.getUserObject();\n+                if (selectedNode.isLeaf()\n+                        && !PluginConstants.ROOT_NAME.equals(selectedNodeName)\n+                        && !PluginConstants.MAIL_TEMPLATES.equals(selectedNodeName)\n+                        && !PluginConstants.REPORT_XSLTS.equals(selectedNodeName)\n+                        && !PluginConstants.GROOVY_SCRIPTS.equals(parentNodeName)) {\n+                    leafRightClickAction(evt, selectedNode);\n+                } else if (PluginConstants.MAIL_TEMPLATES.equals(selectedNodeName)) {\n+                    folderRightClickAction(evt, mailTemplates);\n+                } else if (PluginConstants.REPORT_XSLTS.equals(selectedNodeName)) {\n+                    folderRightClickAction(evt, reportXslts);\n+                } else if (PluginConstants.GROOVY_SCRIPTS.equals(parentNodeName)) {\n+                    folderRightClickAction(evt, selectedNode);\n+                } else if (PluginConstants.ROOT_NAME.equals(selectedNodeName)) {\n+                    rootRightClickAction(evt);\n+                }\n             }\n         }\n     }\n@@ -271,16 +274,16 @@ public boolean cancel() {\n                     progr.finish();\n                 }\n \n-           }; \n+            };\n             REQUEST_PROCESSOR.post(tsk);\n         } catch (IOException e) {\n             JOptionPane.showMessageDialog(null, e.getMessage(), \"Generic Error\", JOptionPane.ERROR_MESSAGE);\n             ServerDetailsView serverDetails = getRefreshServerDetails();\n         } catch (Exception ex) {\n             getRefreshServerDetails().setVisible(true);\n         }\n-\n     }\n+\n     @Override\n     public void componentClosed() {\n         // TODO add custom code on component\n@@ -321,14 +324,14 @@ private void addGroovyScripts() {\n         for (ImplementationType type : ImplementationType.values()) {\n             String implType = type.toString();\n             DefaultMutableTreeNode tempNode = new DefaultMutableTreeNode(implType.toString());\n-           if (implType.equals(\"JWT_SSO_PROVIDER\") || implType.equals(\"AUDIT_APPENDER\")) {\n-                continue ;\n-           }\n+            if (implType.equals(\"JWT_SSO_PROVIDER\") || implType.equals(\"AUDIT_APPENDER\")) {\n+                continue;\n+            }\n             List<ImplementationTO> scripts = implementationManagerService.list(type);\n             for (ImplementationTO script : scripts) {\n-                 if (script.getEngine() == ImplementationEngine.GROOVY) {\n+                if (script.getEngine() == ImplementationEngine.GROOVY) {\n                     tempNode.add(new DefaultMutableTreeNode(\n-                        script.getKey()));\n+                            script.getKey()));\n                 }\n             }\n             groovyScripts.add(tempNode);\n@@ -375,6 +378,7 @@ public void actionPerformed(final ActionEvent evt) {\n                 serverDetails.setVisible(true);\n             }\n         });\n+\n         menu.show(evt.getComponent(), evt.getX(), evt.getY());\n     }\n \n@@ -387,29 +391,30 @@ private void folderRightClickAction(final MouseEvent evt,\n         addItem.addActionListener(new ActionListener() {\n \n             @Override\n-            public void actionPerformed(final ActionEvent e) {\n-            try {\n-                String name = null ;\n-                while (StringUtils.isBlank(name)) {\n-                     name = JOptionPane.showInputDialog(\"Enter Name\");\n-                }\n-                DefaultMutableTreeNode parent = (DefaultMutableTreeNode) node.getParent();\n-                boolean added = false;\n-                if (!\"exit\".equals(e.getActionCommand())) {\n-\n-                    if (PluginConstants.MAIL_TEMPLATES.equals(node.getUserObject())) {\n-\n-                        MailTemplateTO mailTemplate = new MailTemplateTO();\n-                        mailTemplate.setKey(name);\n-                        added = mailTemplateManagerService.create(mailTemplate);\n-                        mailTemplateManagerService.setFormat(name,\n-                                MailTemplateFormat.HTML,\n-                                IOUtils.toInputStream(\"//Enter Content here\", encodingPattern));\n-                        mailTemplateManagerService.setFormat(name,\n-                                MailTemplateFormat.TEXT,\n-                                IOUtils.toInputStream(\"//Enter Content here\", encodingPattern));\n+            public void actionPerformed(final ActionEvent event) {\n+                try {\n+                    String name = JOptionPane.showInputDialog(\"Enter Name\");\n+                    if (StringUtils.isBlank(name)) {\n+                        return;\n+                    }\n+\n+                    DefaultMutableTreeNode parent = (DefaultMutableTreeNode) node.getParent();\n+                    boolean added = false;\n+\n+                    if (!\"exit\".equals(event.getActionCommand())) {\n+                        if (PluginConstants.MAIL_TEMPLATES.equals(node.getUserObject())) {\n+\n+                            MailTemplateTO mailTemplate = new MailTemplateTO();\n+                            mailTemplate.setKey(name);\n+                            added = mailTemplateManagerService.create(mailTemplate);\n+                            mailTemplateManagerService.setFormat(name,\n+                                    MailTemplateFormat.HTML,\n+                                    IOUtils.toInputStream(\"//Enter Content here\", encodingPattern));\n+                            mailTemplateManagerService.setFormat(name,\n+                                    MailTemplateFormat.TEXT,\n+                                    IOUtils.toInputStream(\"//Enter Content here\", encodingPattern));\n                             openMailEditor(name);\n-                    } else if (PluginConstants.GROOVY_SCRIPTS.equals(parent.getUserObject())) {\n+                        } else if (PluginConstants.GROOVY_SCRIPTS.equals(parent.getUserObject())) {\n                             ImplementationTO newNode = new ImplementationTO();\n                             ImplementationType type = getType((String) node.getUserObject());\n                             newNode.setKey(name);\n@@ -475,43 +480,44 @@ public void actionPerformed(final ActionEvent e) {\n \n                                 default:\n                             }\n-                                    newNode.setBody(IOUtils.toString(\n+                            newNode.setBody(IOUtils.toString(\n                                     getClass().getResourceAsStream(\"/org/apache/syncope/ide/netbeans/implementations/\"\n-                                    + templateClassName + \".groovy\")));\n-                                    added = implementationManagerService.create(newNode);\n-                                    openScriptEditor(name, (String) node.getUserObject());\n-                    } else {\n-                        ReportTemplateTO reportTemplate = new ReportTemplateTO();\n-                        reportTemplate.setKey(name);\n-                        added = reportTemplateManagerService.create(reportTemplate);\n-                        reportTemplateManagerService.setFormat(name,\n-                                ReportTemplateFormat.FO,\n-                                IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n-                        reportTemplateManagerService.setFormat(name,\n-                                ReportTemplateFormat.CSV,\n-                                IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n-                        reportTemplateManagerService.setFormat(name,\n-                                ReportTemplateFormat.HTML,\n-                                IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n+                                            + templateClassName + \".groovy\")));\n+                            added = implementationManagerService.create(newNode);\n+                            openScriptEditor(name, (String) node.getUserObject());\n+                        } else {\n+                            ReportTemplateTO reportTemplate = new ReportTemplateTO();\n+                            reportTemplate.setKey(name);\n+                            added = reportTemplateManagerService.create(reportTemplate);\n+                            reportTemplateManagerService.setFormat(name,\n+                                    ReportTemplateFormat.FO,\n+                                    IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n+                            reportTemplateManagerService.setFormat(name,\n+                                    ReportTemplateFormat.CSV,\n+                                    IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n+                            reportTemplateManagerService.setFormat(name,\n+                                    ReportTemplateFormat.HTML,\n+                                    IOUtils.toInputStream(\"//Enter content here\", encodingPattern));\n                             openReportEditor(name);\n-                    }\n+                        }\n \n-                    if (added) {\n-                        node.add(new DefaultMutableTreeNode(name));\n-                        treeModel.reload(node);\n-                    } else {\n-                        JOptionPane.showMessageDialog(\n-                                null, \"Error while creating new element\", \"Error\", JOptionPane.ERROR_MESSAGE);\n+                        if (added) {\n+                            node.add(new DefaultMutableTreeNode(name));\n+                            treeModel.reload(node);\n+                        } else {\n+                            JOptionPane.showMessageDialog(\n+                                    null, \"Error while creating new element\", \"Error\", JOptionPane.ERROR_MESSAGE);\n+                        }\n                     }\n+                } catch (SyncopeClientException excp) {\n+                    JOptionPane.showMessageDialog(null, excp.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n+                } catch (IOException ex) {\n+                    JOptionPane.showMessageDialog(null, ex.getMessage(), \"Error\", JOptionPane.ERROR_MESSAGE);\n+                } catch (Exception exc) {\n+                    LOG.log(Level.WARNING, \"Refreshing after exception\");\n+                    getRefreshServerDetails().setVisible(true);\n                 }\n-            } catch (SyncopeClientException excp) {\n-                JOptionPane.showMessageDialog(null, excp.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n-            } catch (IOException ex) {\n-                JOptionPane.showMessageDialog(null , ex.getMessage(), \"Error\", JOptionPane.ERROR_MESSAGE);\n-            } catch (Exception exc) {\n-                 getRefreshServerDetails().setVisible(true);\n             }\n-        }\n         });\n \n         menu.show(evt.getComponent(), evt.getX(), evt.getY());\n@@ -530,27 +536,27 @@ public void actionPerformed(final ActionEvent e) {\n                 int result = JOptionPane.showConfirmDialog(null, \"Are you sure to delete the item?\");\n                 if (result == JOptionPane.OK_OPTION) {\n                     DefaultMutableTreeNode parent = (DefaultMutableTreeNode) node.getParent();\n-                    String nodeName = (String) node.getUserObject() ;\n+                    String nodeName = (String) node.getUserObject();\n                     boolean deleted = false;\n-                try {\n-                    if (PluginConstants.MAIL_TEMPLATES.equals(parent.getUserObject())) {\n-                        deleted = mailTemplateManagerService.delete(nodeName);\n-                    } else if (PluginConstants.REPORT_XSLTS.equals(parent.getUserObject())) {\n-                        deleted = reportTemplateManagerService.delete(nodeName);\n-                    } else {\n-                        ImplementationType type = getType((String) parent.getUserObject());\n-                        deleted = implementationManagerService.delete(type, nodeName);\n-                    }\n-                    if (deleted) {\n-                        node.removeFromParent();\n-                        treeModel.reload(parent);\n-                    } else {\n-                        JOptionPane.showMessageDialog(\n-                                null, \"Error while deleting new element\", \"Error\", JOptionPane.ERROR_MESSAGE);\n-                    }\n+                    try {\n+                        if (PluginConstants.MAIL_TEMPLATES.equals(parent.getUserObject())) {\n+                            deleted = mailTemplateManagerService.delete(nodeName);\n+                        } else if (PluginConstants.REPORT_XSLTS.equals(parent.getUserObject())) {\n+                            deleted = reportTemplateManagerService.delete(nodeName);\n+                        } else {\n+                            ImplementationType type = getType((String) parent.getUserObject());\n+                            deleted = implementationManagerService.delete(type, nodeName);\n+                        }\n+                        if (deleted) {\n+                            node.removeFromParent();\n+                            treeModel.reload(parent);\n+                        } else {\n+                            JOptionPane.showMessageDialog(\n+                                    null, \"Error while deleting new element\", \"Error\", JOptionPane.ERROR_MESSAGE);\n+                        }\n                     } catch (SyncopeClientException exc) {\n                         JOptionPane.showMessageDialog(\n-                            null, exc.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n+                                null, exc.getMessage(), \"Syncope Error\", JOptionPane.ERROR_MESSAGE);\n                     } catch (Exception ex) {\n                         getRefreshServerDetails().setVisible(true);\n                     }\n@@ -567,24 +573,23 @@ private void openMailEditor(final String name) throws IOException {\n                 PluginConstants.MAIL_TEMPLATE_FORMATS, MailTemplateFormat.TEXT.name());\n \n         if (StringUtils.isNotBlank(formatStr)) {\n-\n             MailTemplateFormat format = MailTemplateFormat.valueOf(formatStr);\n             String type = null;\n             InputStream is = null;\n \n-                switch (format) {\n-                    case HTML:\n-                        type = \"html\";\n-                        is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.HTML);\n-                        break;\n-                    case TEXT:\n-                        type = \"txt\";\n-                        is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.TEXT);\n-                        break;\n-                    default:\n-                        LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n-                        break;\n-                }\n+            switch (format) {\n+                case HTML:\n+                    type = \"html\";\n+                    is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.HTML);\n+                    break;\n+                case TEXT:\n+                    type = \"txt\";\n+                    is = (InputStream) mailTemplateManagerService.getFormat(name, MailTemplateFormat.TEXT);\n+                    break;\n+                default:\n+                    LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n+                    break;\n+            }\n             String content = is == null ? StringUtils.EMPTY : IOUtils.toString(is, encodingPattern);\n \n             String mailTemplatesDirName = System.getProperty(\"java.io.tmpdir\") + \"/Templates/Mail/\";\n@@ -614,56 +619,57 @@ public void propertyChange(final PropertyChangeEvent evt) {\n         }\n     }\n \n-    private void openScriptEditor(final String name , final String type) throws IOException {\n-            ImplementationTO node = implementationManagerService.read(getType(type), name);\n-            String groovyScriptsDirName = System.getProperty(\"java.io.tmpdir\") + \"/Groovy/\"\n-            + node.getType().toString() + \"/\";\n-            File groovyScriptsDir = new File(groovyScriptsDirName);\n-            if (!groovyScriptsDir.exists()) {\n-                groovyScriptsDir.mkdirs();\n-            }\n-            File file = new File(groovyScriptsDirName + name + \".groovy\");\n-            FileWriter fw = new FileWriter(file);\n-            fw.write(node.getBody());\n-            fw.flush();\n-            FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n-            DataObject data = DataObject.find(fob);\n-            data.getLookup().lookup(OpenCookie.class).open();\n-            data.addPropertyChangeListener(new PropertyChangeListener() {\n+    private void openScriptEditor(final String name, final String type) throws IOException {\n+        ImplementationTO node = implementationManagerService.read(getType(type), name);\n+        String groovyScriptsDirName = System.getProperty(\"java.io.tmpdir\") + \"/Groovy/\"\n+                + node.getType().toString() + \"/\";\n+        File groovyScriptsDir = new File(groovyScriptsDirName);\n+        if (!groovyScriptsDir.exists()) {\n+            groovyScriptsDir.mkdirs();\n+        }\n+        File file = new File(groovyScriptsDirName + name + \".groovy\");\n+        FileWriter fw = new FileWriter(file);\n+        fw.write(node.getBody());\n+        fw.flush();\n+        FileObject fob = FileUtil.toFileObject(file.getAbsoluteFile());\n+        DataObject data = DataObject.find(fob);\n+        data.getLookup().lookup(OpenCookie.class).open();\n+        data.addPropertyChangeListener(new PropertyChangeListener() {\n \n-                @Override\n-                public void propertyChange(final PropertyChangeEvent evt) {\n-                    if (DataObject.PROP_MODIFIED.equals(evt.getPropertyName())) {\n-                        //save item remotely\n-                        LOG.info(String.format(\"Saving Groovy template [%s]\", name));\n-                       saveContent();\n-                    }\n+            @Override\n+            public void propertyChange(final PropertyChangeEvent evt) {\n+                if (DataObject.PROP_MODIFIED.equals(evt.getPropertyName())) {\n+                    //save item remotely\n+                    LOG.info(String.format(\"Saving Groovy template [%s]\", name));\n+                    saveContent();\n                 }\n-            });\n+            }\n+        });\n \n     }\n \n     private void openReportEditor(final String name) throws IOException {\n         String formatStr = (String) JOptionPane.showInputDialog(null, \"Select File Format\",\n                 \"File format\", JOptionPane.QUESTION_MESSAGE, null,\n                 PluginConstants.REPORT_TEMPLATE_FORMATS, ReportTemplateFormat.FO.name());\n+\n         if (StringUtils.isNotBlank(formatStr)) {\n             ReportTemplateFormat format = ReportTemplateFormat.valueOf(formatStr);\n             InputStream is = null;\n-                switch (format) {\n-                    case HTML:\n-                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.HTML);\n-                        break;\n-                    case CSV:\n-                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.CSV);\n-                        break;\n-                    case FO:\n-                        is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.FO);\n-                        break;\n-                    default:\n-                        LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n-                        break;\n-                }\n+            switch (format) {\n+                case HTML:\n+                    is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.HTML);\n+                    break;\n+                case CSV:\n+                    is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.CSV);\n+                    break;\n+                case FO:\n+                    is = (InputStream) reportTemplateManagerService.getFormat(name, ReportTemplateFormat.FO);\n+                    break;\n+                default:\n+                    LOG.log(Level.SEVERE, String.format(\"Format [%s] not supported\", format));\n+                    break;\n+            }\n             String content = is == null ? StringUtils.EMPTY : IOUtils.toString(is, encodingPattern);\n \n             String reportTemplatesDirName = System.getProperty(\"java.io.tmpdir\") + \"/Templates/Report/\";\n@@ -730,9 +736,9 @@ private void saveContent() {\n                         ReportTemplateFormat.CSV,\n                         IOUtils.toInputStream(content, encodingPattern));\n             } else if (\"Groovy\".equals(fileName)) {\n-                    ImplementationTO node = implementationManagerService.read(getType(templateType), key);\n-                    node.setBody(content);\n-                    implementationManagerService.update(node);\n+                ImplementationTO node = implementationManagerService.read(getType(templateType), key);\n+                node.setBody(content);\n+                implementationManagerService.update(node);\n             }\n         } catch (BadLocationException e) {\n             Exceptions.printStackTrace(e);\n@@ -742,10 +748,10 @@ private void saveContent() {\n     }\n \n     private ImplementationType getType(final String typeName) {\n-        ImplementationType type = null ;\n+        ImplementationType type = null;\n         for (ImplementationType implType : ImplementationType.values()) {\n             if (implType.toString().equals(typeName)) {\n-                type = implType ;\n+                type = implType;\n             }\n \n         }"}]}