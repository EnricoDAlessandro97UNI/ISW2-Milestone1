{"sha":"ccfaddb733dc9cc75486991e6e3dd4977c990942","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmNjZmFkZGI3MzNkYzljYzc1NDg2OTkxZTZlM2RkNDk3N2M5OTA5NDI=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-25T12:54:10Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-25T12:54:10Z"},"message":"Fixes issue 182\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247163 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a12cbd73500a9d95b988657a4c07beced7c820ce","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a12cbd73500a9d95b988657a4c07beced7c820ce"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ccfaddb733dc9cc75486991e6e3dd4977c990942","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ccfaddb733dc9cc75486991e6e3dd4977c990942","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ccfaddb733dc9cc75486991e6e3dd4977c990942","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ccfaddb733dc9cc75486991e6e3dd4977c990942/comments","author":null,"committer":null,"parents":[{"sha":"65a7f609dc140ef795160b98c33f549680a78cf6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/65a7f609dc140ef795160b98c33f549680a78cf6","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/65a7f609dc140ef795160b98c33f549680a78cf6"}],"stats":{"total":49,"additions":43,"deletions":6},"files":[{"sha":"83820e2fee59f8388cc776f64e56317f37cfb473","filename":"console/src/main/java/org/syncope/console/pages/Configuration.java","status":"modified","additions":28,"deletions":6,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942","patch":"@@ -60,10 +60,13 @@\n import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-\n import ch.qos.logback.classic.Level;\n import ch.qos.logback.classic.Logger;\n import ch.qos.logback.classic.LoggerContext;\n+import org.apache.wicket.markup.html.link.Link;\n+import org.apache.wicket.request.handler.resource.ResourceStreamRequestHandler;\n+import org.apache.wicket.request.resource.ContentDisposition;\n+import org.apache.wicket.util.resource.StringResourceStream;\n \n /**\n  * Configurations WebPage.\n@@ -259,13 +262,32 @@ public Page createPage() {\n             }\n         };\n \n-        String allowedRoles = xmlRolesReader.getAllAllowedRoles(\n-                \"Configuration\", \"create\");\n-        MetaDataRoleAuthorizationStrategy.authorize(createConfigurationLink,\n-                ENABLE, allowedRoles);\n-\n+        MetaDataRoleAuthorizationStrategy.authorize(\n+                createConfigurationLink, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"create\"));\n         add(createConfigurationLink);\n \n+        Link dbExportLink = new Link<Void>(\"dbExportLink\") {\n+\n+            private static final long serialVersionUID = -4331619903296515985L;\n+\n+            @Override\n+            public void onClick() {\n+                StringResourceStream stream =\n+                        new StringResourceStream(restClient.dbContentAsXml(),\n+                        \"text/xml\");\n+                getRequestCycle().scheduleRequestHandlerAfterCurrent(\n+                        new ResourceStreamRequestHandler(stream).setFileName(\n+                        \"content.xml\").setContentDisposition(\n+                        ContentDisposition.ATTACHMENT));\n+            }\n+        };\n+\n+        MetaDataRoleAuthorizationStrategy.authorize(\n+                dbExportLink, ENABLE,\n+                xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"read\"));\n+        add(dbExportLink);\n+\n         Form paginatorForm = new Form(\"PaginatorForm\");\n \n         final DropDownChoice rowsChooser = new DropDownChoice(\"rowsChooser\","},{"sha":"292ad3f70a6c0d77744268d32c372e4369e0bcf3","filename":"console/src/main/java/org/syncope/console/rest/ConfigurationRestClient.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942","patch":"@@ -29,6 +29,13 @@\n @Component\n public class ConfigurationRestClient extends AbstractBaseRestClient {\n \n+    public String dbContentAsXml()\n+            throws SyncopeClientCompositeErrorException {\n+\n+        return restTemplate.getForObject(baseURL\n+                + \"configuration/dbexport.json\", String.class);\n+    }\n+\n     /**\n      * Get all stored configurations.\n      * @return ConfigurationTOs"},{"sha":"76299b252de691d657fc69bbc38a192ca8ef6f76","filename":"console/src/main/resources/org/syncope/console/pages/Configuration.html","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942","patch":"@@ -93,5 +93,11 @@\n                 </span>\n             </div>\n         </div>\n+        <div>\n+            <label style=\"position: absolute; top: 10px; right:55px;\"><wicket:message key=\"db_export\"/></label>\n+            <a style=\"position: absolute; top: 2px; right:20px;\" wicket:id=\"dbExportLink\">\n+                <img src=\"img/db_export.png\" alt=\"DB export\" width=\"30\" height=\"30\" /></a>\n+        </div>    \n+\n     </div>\n </wicket:extend>\n\\ No newline at end of file"},{"sha":"c73032ca2fd3811342ebf49606337fe24ddea2db","filename":"console/src/main/resources/org/syncope/console/pages/Configuration.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.properties?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942","patch":"@@ -7,5 +7,6 @@ tab4=Console Log\n edit=Edit\n delete=Delete\n create_configuration=Create new configuration\n+db_export=DB export\n logger=Logger\n level=Level"},{"sha":"95fe7b34f9799b18d3aabb7fb9710af4284e5516","filename":"console/src/main/resources/org/syncope/console/pages/Configuration_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration_it.properties?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942","patch":"@@ -7,5 +7,6 @@ tab4=Log Console\n edit=Modifica\n delete=Elimina\n create_configuration=Crea nuova configurazione\n+db_export=Esportazione DB\n logger=Logger\n level=Livello"},{"sha":"413cb0673cdb221f076d5a04eceb3fa8341fe842","filename":"console/src/main/webapp/img/db_export.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ccfaddb733dc9cc75486991e6e3dd4977c990942/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png?ref=ccfaddb733dc9cc75486991e6e3dd4977c990942"}]}