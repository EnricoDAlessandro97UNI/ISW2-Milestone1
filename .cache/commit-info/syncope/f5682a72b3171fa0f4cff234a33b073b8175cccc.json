{"sha":"f5682a72b3171fa0f4cff234a33b073b8175cccc","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmY1NjgyYTcyYjMxNzFmYTBmNGNmZjIzNGEzM2IwNzNiODE3NWNjY2M=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-01T13:00:55Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-01T13:00:55Z"},"message":"[SYNCOPE-761] Report templates are now managed entities, not from filesystem anymore","tree":{"sha":"ea8dba44f909eab3e88a51e3d76d0bee8ce14b15","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ea8dba44f909eab3e88a51e3d76d0bee8ce14b15"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f5682a72b3171fa0f4cff234a33b073b8175cccc","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f5682a72b3171fa0f4cff234a33b073b8175cccc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f5682a72b3171fa0f4cff234a33b073b8175cccc","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f5682a72b3171fa0f4cff234a33b073b8175cccc/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"63eeca3ed9e485802f814d57062c6151af41fcf9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/63eeca3ed9e485802f814d57062c6151af41fcf9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/63eeca3ed9e485802f814d57062c6151af41fcf9"}],"stats":{"total":3965,"additions":2410,"deletions":1555},"files":[{"sha":"637a0d572483795ba7749a8d2d14c825070a4fd7","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/MailTemplateTO.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FMailTemplateTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FMailTemplateTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FMailTemplateTO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -23,7 +23,7 @@\n import javax.xml.bind.annotation.XmlType;\n import org.apache.syncope.common.lib.AbstractBaseBean;\n \n-@XmlRootElement(name = \"maiLTemplate\")\n+@XmlRootElement(name = \"mailTemplate\")\n @XmlType\n public class MailTemplateTO extends AbstractBaseBean implements EntityTO<String> {\n "},{"sha":"d6bba9ee328b0dd801aea975d04574205ba95118","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/ReportTO.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -53,6 +53,8 @@ public class ReportTO extends AbstractStartEndBean implements EntityTO<Long> {\n \n     private boolean active;\n \n+    private String template;\n+\n     @Override\n     public Long getKey() {\n         return key;\n@@ -126,4 +128,12 @@ public void setActive(final boolean active) {\n         this.active = active;\n     }\n \n+    public String getTemplate() {\n+        return template;\n+    }\n+\n+    public void setTemplate(final String template) {\n+        this.template = template;\n+    }\n+\n }"},{"sha":"e295f50cb65d11a81f8b6345daa68f1bc84f7926","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/to/ReportTemplateTO.java","status":"added","additions":44,"deletions":0,"changes":44,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTemplateTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTemplateTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fto%2FReportTemplateTO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.to;\n+\n+import javax.ws.rs.PathParam;\n+import javax.xml.bind.annotation.XmlRootElement;\n+import javax.xml.bind.annotation.XmlType;\n+import org.apache.syncope.common.lib.AbstractBaseBean;\n+\n+@XmlRootElement(name = \"reportTemplate\")\n+@XmlType\n+public class ReportTemplateTO extends AbstractBaseBean implements EntityTO<String> {\n+\n+    private static final long serialVersionUID = 7776679004906244896L;\n+\n+    private String key;\n+\n+    @Override\n+    public String getKey() {\n+        return key;\n+    }\n+\n+    @PathParam(\"key\")\n+    @Override\n+    public void setKey(final String key) {\n+        this.key = key;\n+    }\n+}"},{"sha":"17ebf915765288b61ff3383544bb758b24298e0b","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/types/ReportTemplateFormat.java","status":"added","additions":30,"deletions":0,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FReportTemplateFormat.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FReportTemplateFormat.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FReportTemplateFormat.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,30 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.lib.types;\n+\n+import javax.xml.bind.annotation.XmlEnum;\n+\n+@XmlEnum\n+public enum ReportTemplateFormat {\n+\n+    FO,\n+    HTML,\n+    CSV;\n+\n+}"},{"sha":"81e3d331013809f3e66ed73b178dd6b411333807","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/types/StandardEntitlement.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Ftypes%2FStandardEntitlement.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -198,6 +198,16 @@ public final class StandardEntitlement {\n \n     public static final String NOTIFICATION_DELETE = \"NOTIFICATION_DELETE\";\n \n+    public static final String REPORT_TEMPLATE_LIST = \"REPORT_TEMPLATE_LIST\";\n+\n+    public static final String REPORT_TEMPLATE_CREATE = \"REPORT_TEMPLATE_CREATE\";\n+\n+    public static final String REPORT_TEMPLATE_READ = \"REPORT_TEMPLATE_READ\";\n+\n+    public static final String REPORT_TEMPLATE_UPDATE = \"REPORT_TEMPLATE_UPDATE\";\n+\n+    public static final String REPORT_TEMPLATE_DELETE = \"REPORT_TEMPLATE_DELETE\";\n+\n     public static final String REPORT_LIST = \"REPORT_LIST\";\n \n     public static final String REPORT_READ = \"REPORT_READ\";"},{"sha":"e622582c49181c5e871d0263a1e325081036c186","filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/ReportTemplateService.java","status":"added","additions":121,"deletions":0,"changes":121,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FReportTemplateService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FReportTemplateService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FReportTemplateService.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,121 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.common.rest.api.service;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+import javax.validation.constraints.NotNull;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.DELETE;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.PUT;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import org.apache.syncope.common.lib.to.ReportTemplateTO;\n+import org.apache.syncope.common.lib.types.ReportTemplateFormat;\n+\n+/**\n+ * REST operations for report templates.\n+ */\n+@Path(\"reportTemplates\")\n+public interface ReportTemplateService extends JAXRSService {\n+\n+    /**\n+     * Returns a list of all report templates.\n+     *\n+     * @return list of all report templates.\n+     */\n+    @GET\n+    @Produces({ JAXRSService.APPLICATION_XML, MediaType.APPLICATION_JSON })\n+    List<ReportTemplateTO> list();\n+\n+    /**\n+     * Creates a new report template.\n+     *\n+     * @param reportTemplateTO Creates a new report template.\n+     * @return Response object featuring Location header of created report template\n+     */\n+    @POST\n+    @Consumes({ JAXRSService.APPLICATION_XML, MediaType.APPLICATION_JSON })\n+    Response create(@NotNull ReportTemplateTO reportTemplateTO);\n+\n+    /**\n+     * Returns report template with matching key.\n+     *\n+     * @param key key of report template to be read\n+     * @return report template with matching key\n+     */\n+    @GET\n+    @Path(\"{key}\")\n+    @Produces({ JAXRSService.APPLICATION_XML, MediaType.APPLICATION_JSON })\n+    ReportTemplateTO read(@NotNull @PathParam(\"key\") String key);\n+\n+    /**\n+     * Deletes the report template matching the given key.\n+     *\n+     * @param key key for report template to be deleted\n+     */\n+    @DELETE\n+    @Path(\"{key}\")\n+    void delete(@NotNull @PathParam(\"key\") String key);\n+\n+    /**\n+     * Gets the template for the given key and format, if available.\n+     *\n+     * @param key report template\n+     * @param format template format\n+     * @return report template with matching key and format, if available\n+     */\n+    @GET\n+    @Path(\"{key}/{format}\")\n+    Response getFormat(\n+            @NotNull @PathParam(\"key\") String key,\n+            @NotNull @PathParam(\"format\") ReportTemplateFormat format);\n+\n+    /**\n+     * Sets the template for the given key and format, if available.\n+     *\n+     * @param key report template\n+     * @param format template format\n+     * @param templateIn template to be set\n+     */\n+    @PUT\n+    @Path(\"{key}/{format}\")\n+    void setFormat(\n+            @NotNull @PathParam(\"key\") String key,\n+            @NotNull @PathParam(\"format\") ReportTemplateFormat format,\n+            InputStream templateIn);\n+\n+    /**\n+     * Removes the template for the given key and format, if available.\n+     *\n+     * @param key report template\n+     * @param format template format\n+     */\n+    @DELETE\n+    @Path(\"{key}/{format}\")\n+    void removeFormat(\n+            @NotNull @PathParam(\"key\") String key,\n+            @NotNull @PathParam(\"format\") ReportTemplateFormat format);\n+\n+}"},{"sha":"b2d9f812964d1cf516cfb3ccd89637907b56aabe","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/ReportLogic.java","status":"modified","additions":60,"deletions":55,"changes":115,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportLogic.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -27,13 +27,13 @@\n import java.util.List;\n import java.util.Map;\n import java.util.zip.ZipInputStream;\n+import javax.xml.transform.stream.StreamSource;\n import org.apache.cocoon.optional.pipeline.components.sax.fop.FopSerializer;\n import org.apache.cocoon.pipeline.NonCachingPipeline;\n import org.apache.cocoon.pipeline.Pipeline;\n import org.apache.cocoon.sax.SAXPipelineComponent;\n import org.apache.cocoon.sax.component.XMLGenerator;\n import org.apache.cocoon.sax.component.XMLSerializer;\n-import org.apache.cocoon.sax.component.XSLTTransformer;\n import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.Transformer;\n import org.apache.commons.io.IOUtils;\n@@ -59,6 +59,7 @@\n import org.apache.syncope.common.lib.types.JobAction;\n import org.apache.syncope.common.lib.types.JobStatusType;\n import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.core.logic.report.XSLTTransformer;\n import org.apache.xmlgraphics.util.MimeConstants;\n import org.quartz.JobKey;\n import org.quartz.Scheduler;\n@@ -147,6 +148,56 @@ public ReportTO read(final Long key) {\n         return binder.getReportTO(report);\n     }\n \n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_EXECUTE + \"')\")\n+    public ReportExecTO execute(final Long key, final Date startAt) {\n+        Report report = reportDAO.find(key);\n+        if (report == null) {\n+            throw new NotFoundException(\"Report \" + key);\n+        }\n+\n+        if (!report.isActive()) {\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.Scheduling);\n+            sce.getElements().add(\"Report \" + key + \" is not active\");\n+            throw sce;\n+        }\n+\n+        try {\n+            jobInstanceLoader.registerJob(report, startAt);\n+\n+            scheduler.getScheduler().triggerJob(new JobKey(JobNamer.getJobName(report), Scheduler.DEFAULT_GROUP));\n+        } catch (Exception e) {\n+            LOG.error(\"While executing report {}\", report, e);\n+\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.Scheduling);\n+            sce.getElements().add(e.getMessage());\n+            throw sce;\n+        }\n+\n+        ReportExecTO result = new ReportExecTO();\n+        result.setReport(key);\n+        result.setStart(new Date());\n+        result.setStatus(ReportExecStatus.STARTED.name());\n+        result.setMessage(\"Job fired; waiting for results...\");\n+\n+        return result;\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_READ + \"')\")\n+    public ReportExec getReportExec(final Long executionKey) {\n+        ReportExec reportExec = reportExecDAO.find(executionKey);\n+        if (reportExec == null) {\n+            throw new NotFoundException(\"Report execution \" + executionKey);\n+        }\n+        if (!ReportExecStatus.SUCCESS.name().equals(reportExec.getStatus()) || reportExec.getExecResult() == null) {\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.InvalidReportExec);\n+            sce.getElements().add(reportExec.getExecResult() == null\n+                    ? \"No report data produced\"\n+                    : \"Report did not run successfully\");\n+            throw sce;\n+        }\n+        return reportExec;\n+    }\n+\n     @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_READ + \"')\")\n     public void exportExecutionResult(final OutputStream os, final ReportExec reportExec,\n             final ReportExecExportFormat format) {\n@@ -169,28 +220,32 @@ public void exportExecutionResult(final OutputStream os, final ReportExec report\n \n             switch (format) {\n                 case HTML:\n-                    XSLTTransformer xsl2html = new XSLTTransformer(getClass().getResource(\"/report/report2html.xsl\"));\n+                    XSLTTransformer xsl2html = new XSLTTransformer(new StreamSource(\n+                            IOUtils.toInputStream(reportExec.getReport().getTemplate().getHTMLTemplate())));\n                     xsl2html.setParameters(parameters);\n                     pipeline.addComponent(xsl2html);\n                     pipeline.addComponent(XMLSerializer.createXHTMLSerializer());\n                     break;\n \n                 case PDF:\n-                    XSLTTransformer xsl2pdf = new XSLTTransformer(getClass().getResource(\"/report/report2fo.xsl\"));\n+                    XSLTTransformer xsl2pdf = new XSLTTransformer(new StreamSource(\n+                            IOUtils.toInputStream(reportExec.getReport().getTemplate().getFOTemplate())));\n                     xsl2pdf.setParameters(parameters);\n                     pipeline.addComponent(xsl2pdf);\n                     pipeline.addComponent(new FopSerializer(MimeConstants.MIME_PDF));\n                     break;\n \n                 case RTF:\n-                    XSLTTransformer xsl2rtf = new XSLTTransformer(getClass().getResource(\"/report/report2fo.xsl\"));\n+                    XSLTTransformer xsl2rtf = new XSLTTransformer(new StreamSource(\n+                            IOUtils.toInputStream(reportExec.getReport().getTemplate().getFOTemplate())));\n                     xsl2rtf.setParameters(parameters);\n                     pipeline.addComponent(xsl2rtf);\n                     pipeline.addComponent(new FopSerializer(MimeConstants.MIME_RTF));\n                     break;\n \n                 case CSV:\n-                    XSLTTransformer xsl2csv = new XSLTTransformer(getClass().getResource(\"/report/report2csv.xsl\"));\n+                    XSLTTransformer xsl2csv = new XSLTTransformer(new StreamSource(\n+                            IOUtils.toInputStream(reportExec.getReport().getTemplate().getCSVTemplate())));\n                     xsl2csv.setParameters(parameters);\n                     pipeline.addComponent(xsl2csv);\n                     pipeline.addComponent(new TextSerializer());\n@@ -213,56 +268,6 @@ public void exportExecutionResult(final OutputStream os, final ReportExec report\n         }\n     }\n \n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_READ + \"')\")\n-    public ReportExec getAndCheckReportExec(final Long executionKey) {\n-        ReportExec reportExec = reportExecDAO.find(executionKey);\n-        if (reportExec == null) {\n-            throw new NotFoundException(\"Report execution \" + executionKey);\n-        }\n-        if (!ReportExecStatus.SUCCESS.name().equals(reportExec.getStatus()) || reportExec.getExecResult() == null) {\n-            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.InvalidReportExec);\n-            sce.getElements().add(reportExec.getExecResult() == null\n-                    ? \"No report data produced\"\n-                    : \"Report did not run successfully\");\n-            throw sce;\n-        }\n-        return reportExec;\n-    }\n-\n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_EXECUTE + \"')\")\n-    public ReportExecTO execute(final Long key, final Date startAt) {\n-        Report report = reportDAO.find(key);\n-        if (report == null) {\n-            throw new NotFoundException(\"Report \" + key);\n-        }\n-\n-        if (!report.isActive()) {\n-            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.Scheduling);\n-            sce.getElements().add(\"Report \" + key + \" is not active\");\n-            throw sce;\n-        }\n-\n-        try {\n-            jobInstanceLoader.registerJob(report, startAt);\n-\n-            scheduler.getScheduler().triggerJob(new JobKey(JobNamer.getJobName(report), Scheduler.DEFAULT_GROUP));\n-        } catch (Exception e) {\n-            LOG.error(\"While executing report {}\", report, e);\n-\n-            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.Scheduling);\n-            sce.getElements().add(e.getMessage());\n-            throw sce;\n-        }\n-\n-        ReportExecTO result = new ReportExecTO();\n-        result.setReport(key);\n-        result.setStart(new Date());\n-        result.setStatus(ReportExecStatus.STARTED.name());\n-        result.setMessage(\"Job fired; waiting for results...\");\n-\n-        return result;\n-    }\n-\n     @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_DELETE + \"')\")\n     public ReportTO delete(final Long key) {\n         Report report = reportDAO.find(key);"},{"sha":"a3d2682677aaa324bf7398e73d9af714c55c028b","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/ReportTemplateLogic.java","status":"added","additions":199,"deletions":0,"changes":199,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportTemplateLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportTemplateLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FReportTemplateLogic.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,199 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.logic;\n+\n+import java.lang.reflect.Method;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.commons.collections4.CollectionUtils;\n+import org.apache.commons.collections4.Transformer;\n+import org.apache.commons.lang3.ArrayUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.to.ReportTemplateTO;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n+import org.apache.syncope.common.lib.types.ReportTemplateFormat;\n+import org.apache.syncope.common.lib.types.StandardEntitlement;\n+import org.apache.syncope.core.persistence.api.dao.NotFoundException;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n+import org.apache.syncope.core.persistence.api.dao.ReportDAO;\n+import org.apache.syncope.core.persistence.api.entity.EntityFactory;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n+import org.apache.syncope.core.persistence.api.entity.Report;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class ReportTemplateLogic extends AbstractTransactionalLogic<ReportTemplateTO> {\n+\n+    @Autowired\n+    private ReportTemplateDAO reportTemplateDAO;\n+\n+    @Autowired\n+    private ReportDAO reportDAO;\n+\n+    @Autowired\n+    private EntityFactory entityFactory;\n+\n+    private ReportTemplateTO getReportTemplateTO(final String key) {\n+        ReportTemplateTO reportTemplateTO = new ReportTemplateTO();\n+        reportTemplateTO.setKey(key);\n+        return reportTemplateTO;\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_READ + \"')\")\n+    public ReportTemplateTO read(final String key) {\n+        ReportTemplate reportTemplate = reportTemplateDAO.find(key);\n+        if (reportTemplate == null) {\n+            LOG.error(\"Could not find report template '\" + key + \"'\");\n+\n+            throw new NotFoundException(key);\n+        }\n+\n+        return getReportTemplateTO(key);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_LIST + \"')\")\n+    public List<ReportTemplateTO> list() {\n+        return CollectionUtils.collect(\n+                reportTemplateDAO.findAll(), new Transformer<ReportTemplate, ReportTemplateTO>() {\n+\n+            @Override\n+            public ReportTemplateTO transform(final ReportTemplate input) {\n+                return getReportTemplateTO(input.getKey());\n+            }\n+        }, new ArrayList<ReportTemplateTO>());\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_CREATE + \"')\")\n+    public ReportTemplateTO create(final String key) {\n+        ReportTemplate reportTemplate = entityFactory.newEntity(ReportTemplate.class);\n+        reportTemplate.setKey(key);\n+        reportTemplateDAO.save(reportTemplate);\n+\n+        return getReportTemplateTO(key);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_READ + \"')\")\n+    public String getFormat(final String key, final ReportTemplateFormat format) {\n+        ReportTemplate reportTemplate = reportTemplateDAO.find(key);\n+        if (reportTemplate == null) {\n+            LOG.error(\"Could not find report template '\" + key + \"'\");\n+\n+            throw new NotFoundException(key);\n+        }\n+\n+        String template = format == ReportTemplateFormat.HTML\n+                ? reportTemplate.getHTMLTemplate()\n+                : format == ReportTemplateFormat.CSV\n+                        ? reportTemplate.getCSVTemplate()\n+                        : reportTemplate.getFOTemplate();\n+        if (StringUtils.isBlank(template)) {\n+            LOG.error(\"Could not find report template '\" + key + \"' in \" + format + \" format\");\n+\n+            throw new NotFoundException(key + \" in \" + format);\n+        }\n+\n+        return template;\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_UPDATE + \"')\")\n+    public void setFormat(final String key, final ReportTemplateFormat format, final String template) {\n+        ReportTemplate reportTemplate = reportTemplateDAO.find(key);\n+        if (reportTemplate == null) {\n+            LOG.error(\"Could not find report template '\" + key + \"'\");\n+\n+            throw new NotFoundException(key);\n+        }\n+\n+        switch (format) {\n+            case CSV:\n+                reportTemplate.setCSVTemplate(template);\n+                break;\n+\n+            case FO:\n+                reportTemplate.setFOTemplate(template);\n+                break;\n+\n+            case HTML:\n+                reportTemplate.setHTMLTemplate(template);\n+                break;\n+\n+            default:\n+        }\n+\n+        reportTemplateDAO.save(reportTemplate);\n+    }\n+\n+    @PreAuthorize(\"hasRole('\" + StandardEntitlement.REPORT_TEMPLATE_DELETE + \"')\")\n+    public ReportTemplateTO delete(final String key) {\n+        ReportTemplate reportTemplate = reportTemplateDAO.find(key);\n+        if (reportTemplate == null) {\n+            LOG.error(\"Could not find report template '\" + key + \"'\");\n+\n+            throw new NotFoundException(key);\n+        }\n+\n+        List<Report> reports = reportDAO.findByTemplate(reportTemplate);\n+        if (!reports.isEmpty()) {\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.InUseByNotifications);\n+            sce.getElements().addAll(CollectionUtils.collect(reports, new Transformer<Report, String>() {\n+\n+                @Override\n+                public String transform(final Report report) {\n+                    return String.valueOf(report.getKey());\n+                }\n+            }, new ArrayList<String>()));\n+            throw sce;\n+        }\n+\n+        ReportTemplateTO deleted = getReportTemplateTO(key);\n+        reportTemplateDAO.delete(key);\n+        return deleted;\n+    }\n+\n+    @Override\n+    protected ReportTemplateTO resolveReference(final Method method, final Object... args)\n+            throws UnresolvedReferenceException {\n+\n+        String key = null;\n+\n+        if (ArrayUtils.isNotEmpty(args)) {\n+            for (int i = 0; key == null && i < args.length; i++) {\n+                if (args[i] instanceof Long) {\n+                    key = (String) args[i];\n+                } else if (args[i] instanceof ReportTemplateTO) {\n+                    key = ((ReportTemplateTO) args[i]).getKey();\n+                }\n+            }\n+        }\n+\n+        if ((key != null) && !key.equals(0L)) {\n+            try {\n+                return getReportTemplateTO(key);\n+            } catch (Throwable ignore) {\n+                LOG.debug(\"Unresolved reference\", ignore);\n+                throw new UnresolvedReferenceException(ignore);\n+            }\n+        }\n+\n+        throw new UnresolvedReferenceException();\n+    }\n+}"},{"sha":"91ecb923aac56ab3f3c393f10382defb903f77f9","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/report/XSLTTransformer.java","status":"added","additions":193,"deletions":0,"changes":193,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Freport%2FXSLTTransformer.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Freport%2FXSLTTransformer.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Freport%2FXSLTTransformer.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,193 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.syncope.core.logic.report;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.regex.Pattern;\n+import javax.xml.transform.Source;\n+import javax.xml.transform.Templates;\n+import javax.xml.transform.Transformer;\n+import javax.xml.transform.TransformerConfigurationException;\n+import javax.xml.transform.TransformerFactory;\n+import javax.xml.transform.sax.SAXResult;\n+import javax.xml.transform.sax.SAXTransformerFactory;\n+import javax.xml.transform.sax.TransformerHandler;\n+import org.apache.cocoon.pipeline.SetupException;\n+import org.apache.cocoon.pipeline.caching.CacheKey;\n+import org.apache.cocoon.pipeline.component.CachingPipelineComponent;\n+import org.apache.cocoon.pipeline.util.StringRepresentation;\n+import org.apache.cocoon.sax.AbstractSAXTransformer;\n+import org.apache.cocoon.sax.SAXConsumer;\n+import org.apache.cocoon.sax.util.SAXConsumerAdapter;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class XSLTTransformer extends AbstractSAXTransformer implements CachingPipelineComponent {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(XSLTTransformer.class);\n+\n+    /**\n+     * A generic transformer factory to parse XSLTs.\n+     */\n+    private static final SAXTransformerFactory TRAX_FACTORY = createNewSAXTransformerFactory();\n+\n+    /**\n+     * The XSLT parameters name pattern.\n+     */\n+    private static final Pattern XSLT_PARAMETER_NAME_PATTERN = Pattern.compile(\"[a-zA-Z_][\\\\w\\\\-\\\\.]*\");\n+\n+    /**\n+     * The XSLT parameters reference.\n+     */\n+    private Map<String, Object> parameters;\n+\n+    /**\n+     * The XSLT Template reference.\n+     */\n+    private Templates templates;\n+\n+    private Source source;\n+\n+    public XSLTTransformer(final Source source) {\n+        super();\n+        this.load(source, null);\n+    }\n+\n+    /**\n+     * Creates a new transformer reading the XSLT from the Source source and setting the TransformerFactory attributes.\n+     *\n+     * This constructor is useful when users want to perform XSLT transformation using <a\n+     * href=\"http://xml.apache.org/xalan-j/xsltc_usage.html\">xsltc</a>.\n+     *\n+     * @param source the XSLT source\n+     * @param attributes the Transformer Factory attributes\n+     */\n+    public XSLTTransformer(final Source source, final Map<String, Object> attributes) {\n+        super();\n+        this.load(source, attributes);\n+    }\n+\n+    /**\n+     * Method useful to create a new transformer reading the XSLT from the URL source and setting the Transformer\n+     * Factory attributes.\n+     *\n+     * This method is useful when users want to perform XSLT transformation using <a\n+     * href=\"http://xml.apache.org/xalan-j/xsltc_usage.html\">xsltc</a>.\n+     *\n+     * @param source the XSLT source\n+     * @param attributes the Transformer Factory attributes\n+     */\n+    private void load(final Source source, final Map<String, Object> attributes) {\n+        if (source == null) {\n+            throw new IllegalArgumentException(\"The parameter 'source' mustn't be null.\");\n+        }\n+\n+        this.source = source;\n+\n+        this.load(this.source, this.source.toString(), attributes);\n+    }\n+\n+    private void load(final Source source, final String localCacheKey, final Map<String, Object> attributes) {\n+        LOG.debug(\"{} local cache miss: {}\", getClass().getSimpleName(), localCacheKey);\n+\n+        // XSLT has to be parsed\n+        final SAXTransformerFactory transformerFactory;\n+        if (attributes == null || attributes.isEmpty()) {\n+            transformerFactory = TRAX_FACTORY;\n+        } else {\n+            transformerFactory = createNewSAXTransformerFactory();\n+            for (Map.Entry<String, Object> attribute : attributes.entrySet()) {\n+                transformerFactory.setAttribute(attribute.getKey(), attribute.getValue());\n+            }\n+        }\n+\n+        try {\n+            this.templates = transformerFactory.newTemplates(source);\n+        } catch (TransformerConfigurationException e) {\n+            throw new SetupException(\"Impossible to read XSLT from '\" + source + \"', see nested exception\", e);\n+        }\n+    }\n+\n+    /**\n+     * Sets the XSLT parameters to be applied to XSLT stylesheet.\n+     *\n+     * @param parameters the XSLT parameters to be applied to XSLT stylesheet\n+     */\n+    public void setParameters(final Map<String, ? extends Object> parameters) {\n+        if (parameters == null) {\n+            this.parameters = null;\n+        } else {\n+            this.parameters = new HashMap<>(parameters);\n+        }\n+    }\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    protected void setSAXConsumer(final SAXConsumer consumer) {\n+        TransformerHandler transformerHandler;\n+        try {\n+            transformerHandler = TRAX_FACTORY.newTransformerHandler(this.templates);\n+        } catch (Exception e) {\n+            throw new SetupException(\"Could not initialize transformer handler.\", e);\n+        }\n+\n+        if (this.parameters != null) {\n+            final Transformer transformer = transformerHandler.getTransformer();\n+\n+            for (Map.Entry<String, Object> entry : this.parameters.entrySet()) {\n+                final String name = entry.getKey();\n+\n+                // is valid XSLT parameter name\n+                if (XSLT_PARAMETER_NAME_PATTERN.matcher(name).matches()) {\n+                    transformer.setParameter(name, entry.getValue());\n+                }\n+            }\n+        }\n+\n+        final SAXResult result = new SAXResult();\n+        result.setHandler(consumer);\n+        // According to TrAX specs, all TransformerHandlers are LexicalHandlers\n+        result.setLexicalHandler(consumer);\n+        transformerHandler.setResult(result);\n+\n+        final SAXConsumerAdapter saxConsumerAdapter = new SAXConsumerAdapter();\n+        saxConsumerAdapter.setContentHandler(transformerHandler);\n+        super.setSAXConsumer(saxConsumerAdapter);\n+    }\n+\n+    @Override\n+    public CacheKey constructCacheKey() {\n+        return null;\n+    }\n+\n+    /**\n+     * Utility method to create a new transformer factory.\n+     *\n+     * @return a new transformer factory\n+     */\n+    private static SAXTransformerFactory createNewSAXTransformerFactory() {\n+        return (SAXTransformerFactory) TransformerFactory.newInstance();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return StringRepresentation.buildString(this, \"src=<\" + this.source + \">\");\n+    }\n+}"},{"sha":"86fe6352d3cd9401acdee1a5a160c3075d4e5347","filename":"core/logic/src/main/resources/report/groupReportlet2csv.xsl","status":"removed","additions":0,"deletions":106,"changes":106,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2csv.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,106 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-  \n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n-  \n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.GroupReportlet']\">\n-    \n-    <xsl:call-template name=\"header\">\n-      <xsl:with-param name=\"node\" select=\"configurations/groupAttributes\"/>\n-    </xsl:call-template>\n-    <xsl:for-each select=\"group\">\n-      <xsl:call-template name=\"groupAttributes\">\n-        <xsl:with-param name=\"header\" select=\"../configurations/groupAttributes\"/>\n-        <xsl:with-param name=\"attrs\" select=\".\"/>\n-      </xsl:call-template>\n-      <xsl:text>&#10;</xsl:text>\n-    </xsl:for-each>\n-  </xsl:template>\n-  \n-  <xsl:template name=\"header\">\n-    <xsl:param name=\"node\"/>  \n-    <xsl:for-each select=\"$node/*\">\n-      <xsl:value-of select=\"text()\"/>   \n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>\n-    </xsl:for-each>\n-    <xsl:text>&#10;</xsl:text>\n-  </xsl:template>\n-    \n-  <xsl:template name=\"groupAttributes\">\n-    <xsl:param name=\"header\"/>\n-    <xsl:param name=\"attrs\"/>\n-    \n-    <xsl:for-each select=\"$header/*\">\n-      <xsl:variable name=\"nameAttr\" select=\"text()\"/>\n-      \n-      <xsl:choose> \n-        <xsl:when test=\"string-length($attrs/@*[name()=$nameAttr]) &gt; 0\">\n-          <xsl:variable name=\"groupAttr\" select=\"$attrs/@*[name()=$nameAttr]\"/>\n-          <xsl:text>\"</xsl:text>\n-          <xsl:value-of select=\"$groupAttr/.\"/>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) \n-                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n-          <xsl:text>\"</xsl:text>       \n-          <xsl:for-each select=\"$attrs/*/resource\">\n-            <xsl:variable name=\"value\" select=\"@name\"/>\n-            <xsl:value-of select=\"$value\"/>\n-            <xsl:if test=\"position() != last()\">\n-              <xsl:value-of select=\"$delimiter\"/>\n-            </xsl:if>\n-          </xsl:for-each>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='user']) \n-                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n-          <xsl:text>\"</xsl:text>       \n-          <xsl:for-each select=\"$attrs/*/user\">\n-            <xsl:variable name=\"value\" select=\"@userUsername\"/>\n-            <xsl:value-of select=\"$value\"/>\n-            <xsl:if test=\"position() != last()\">\n-              <xsl:value-of select=\"$delimiter\"/>\n-            </xsl:if>\n-          </xsl:for-each>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <xsl:text>\"</xsl:text>\n-          <xsl:if test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0\"> \n-            <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n-            <xsl:value-of select=\"$value\"/>\n-          </xsl:if>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>\n-    \n-    </xsl:for-each>\n-  </xsl:template>\n-  \n-</xsl:stylesheet>\n-"},{"sha":"e95d17040ba29f4c4311d14864414cef271c574f","filename":"core/logic/src/main/resources/report/groupReportlet2fo.xsl","status":"removed","additions":0,"deletions":185,"changes":185,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2fo.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,185 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.GroupReportlet']\">\n-   \n-    <fo:block font-size=\"16pt\" font-weight=\"bold\" space-after=\"0.5cm\" space-before=\"5mm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n-        \n-    <xsl:for-each select=\"group\">\n-      <fo:block font-size=\"14pt\" font-weight=\"bold\" space-before=\"15mm\" space-after=\"5mm\" background-color=\"(#8888ff)\">Group <xsl:value-of select=\"@name\"/></fo:block>\n-      <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n-        <fo:table-column/>\n-        <fo:table-column/>\n-        <fo:table-body>\n-          <fo:table-row background-color=\"(#ccccff)\">\n-            <fo:table-cell>\n-              <fo:block>Id:</fo:block>\n-            </fo:table-cell>\n-            <fo:table-cell>\n-              <fo:block font-style=\"italic\">\n-                <xsl:value-of select=\"@id\"/>\n-              </fo:block>\n-            </fo:table-cell>\n-          </fo:table-row>\n-          <xsl:if test=\"@groupOwner != 'null'\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Group Owner:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@groupOwner\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <xsl:if test=\"@userOwner != 'null'\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Last Login Date:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@userOwner\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-        </fo:table-body>\n-      </fo:table>\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS GROUP HASN'T ANY ATTRIBUTE</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      \n-      <xsl:choose>\n-        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS GROUP HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      \n-      <xsl:choose>\n-        <xsl:when test=\"users/user\">\n-          <fo:block font-size=\"11pt\" font-weight=\"bold\">Users</fo:block>\n-          <xsl:for-each select=\"users/user\">\n-            <fo:block background-color=\"(#ccccff)\" font-size=\"9pt\" font-weight=\"bold\" space-before=\"4mm\">User: <xsl:value-of select=\"@userUsername\"/> (Id: <xsl:value-of select=\"@userId\"/>)</fo:block>\n-                 \n-          </xsl:for-each> \n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS GROUP HASN'T ANY USER ASSIGNED TO</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:call-template name=\"groupResources\">\n-        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-      </xsl:call-template>\n-    </xsl:for-each>\n-\n-  </xsl:template>\n-  \n-  <xsl:template name=\"attributes\">\n-    <xsl:param name=\"label\"/>\n-    <xsl:param name=\"node\"/>\n-    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\">\n-      <xsl:value-of select=\"$label\"/>\n-    </fo:block>\n-    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n-      <fo:table-column/>\n-      <fo:table-column/>\n-      <fo:table-header>\n-        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n-          <fo:table-cell>\n-            <fo:block font-weight=\"bold\">Schema name</fo:block>\n-          </fo:table-cell>\n-          <fo:table-cell>\n-            <fo:block font-weight=\"bold\">Value(s)</fo:block>\n-          </fo:table-cell>\n-        </fo:table-row>\n-      </fo:table-header>\n-      <fo:table-body>\n-        <xsl:for-each select=\"$node\">\n-          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-            <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>\n-                  <xsl:value-of select=\"@name\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <xsl:for-each select=\"value\">\n-                  <fo:block></fo:block><!--                        <fo:block>&#x2022;</fo:block>-->\n-                  <fo:block font-style=\"italic\">\n-                    <xsl:value-of select=\"text()\"/>\n-                  </fo:block>\n-                </xsl:for-each>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <fo:table-row>\n-            <fo:table-cell>\n-              <fo:block></fo:block>\n-            </fo:table-cell>\n-            <fo:table-cell>\n-              <fo:block></fo:block>\n-            </fo:table-cell>\n-          </fo:table-row>\n-        </xsl:for-each>\n-      </fo:table-body>\n-    </fo:table>\n-  </xsl:template>\n-  \n-  <xsl:template name=\"groupResources\">\n-    <xsl:param name=\"node\"/>\n-    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"3mm\" space-before=\"5mm\">Group Resources</fo:block>\n-    <xsl:for-each select=\"$node\">\n-      <fo:block></fo:block> <!--            <fo:block>&#x2022;</fo:block>-->\n-      <fo:block background-color=\"(#ccccff)\">\n-        <xsl:value-of select=\"@name\"/>\n-      </fo:block>\n-    </xsl:for-each>\n-  </xsl:template>\n-</xsl:stylesheet>"},{"sha":"7e2a52f928d1578a0b1109fc753b12fddaeee8a1","filename":"core/logic/src/main/resources/report/groupReportlet2html.xsl","status":"removed","additions":0,"deletions":160,"changes":160,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FgroupReportlet2html.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,160 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.GroupReportlet']\">\n-    <h2>Reportlet: <xsl:value-of select=\"@name\"/></h2>\n-    <xsl:for-each select=\"group\">\n-      <h3>Group <xsl:value-of select=\"@name\"/></h3>\n-      \n-      <table style=\"border: 1px solid black;\">\n-        <tr>\n-          <td>Id:</td>\n-          <td>\n-            <xsl:value-of select=\"@id\"/>\n-          </td>\n-        </tr>\n-        <xsl:if test=\"@groupOwner != 'null'\"> <!--!= null test=\"not(USER/FIRSTNAME)\" -->\n-          <tr>\n-            <td>Group Owner:</td>\n-            <td>\n-              <xsl:value-of select=\"@groupOwner\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        <xsl:if test=\"@userOwner != 'null'\">\n-          <tr>\n-            <td>User Owner:</td>\n-            <td>\n-              <xsl:value-of select=\"@userOwner\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        \n-      </table>\n-\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS GROUP HASN'T ANY ATTRIBUTE</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS GROUP HASN'T ANY DERIVED ATTRIBUTE</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <!--</xsl:if>-->\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      \n-      <xsl:choose>\n-        <xsl:when test=\"users/user\">\n-          <h4>Users</h4>\n-          <xsl:for-each select=\"users/user\">\n-            <h5>User: <xsl:value-of select=\"@userUsername\"/> (Id: <xsl:value-of select=\"@userId\"/>)</h5>\n-          </xsl:for-each>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS GROUP HASN'T ANY USER ASSIGNED TO</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      \n-      <xsl:call-template name=\"groupResources\">\n-        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-      </xsl:call-template>\n-      <hr/>\n-      \n-    </xsl:for-each>\n-  </xsl:template>\n-\n-  <xsl:template name=\"attributes\">\n-    <xsl:param name=\"label\"/>\n-    <xsl:param name=\"node\"/>\n-\n-    <h4>\n-      <xsl:value-of select=\"$label\"/>\n-    </h4>\n-    \n-    <table>\n-      <thead>\n-        <tr>\n-          <th>Schema name</th>\n-          <th>Value(s)</th>\n-        </tr>\n-      </thead>\n-      <tbody>\n-        <xsl:for-each select=\"$node\">\n-          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-            <tr>\n-              <td>\n-                <xsl:value-of select=\"@name\"/>\n-              </td>\n-              <td>\n-                <ul>\n-                  <xsl:for-each select=\"value\">\n-                    <li>\n-                      <xsl:value-of select=\"text()\"/>\n-                    </li>\n-                  </xsl:for-each>\n-                </ul>\n-              </td>\n-            </tr>\n-          </xsl:if>\n-        </xsl:for-each>\n-      </tbody>\n-    </table>\n-  </xsl:template>\n-\n-  <xsl:template name=\"groupResources\">\n-    <xsl:param name=\"node\"/>\n-    \n-    <h4>Group Resources</h4>\n-    <ul>\n-      <xsl:for-each select=\"$node\">\n-        <li>\n-          <xsl:value-of select=\"@name\"/>\n-        </li>\n-      </xsl:for-each>\n-    </ul>\n-  </xsl:template>\n-</xsl:stylesheet>"},{"sha":"2036c689b158c6459f872f0d42b36c3ea1a6bd70","filename":"core/logic/src/main/resources/report/report2csv.xsl","status":"removed","additions":0,"deletions":36,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2csv.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,36 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:import href=\"userReportlet2csv.xsl\"/>\n-  <xsl:import href=\"groupReportlet2csv.xsl\"/>\n-  <xsl:import href=\"staticReportlet2csv.xsl\"/>\n- \n-  <xsl:param name=\"status\"/>\n-  <xsl:param name=\"message\"/>\n-  <xsl:param name=\"start\"/>\n-  <xsl:param name=\"end\"/>\n-    \n-  <xsl:template match=\"/\">\n-    <xsl:apply-templates/>\n-  </xsl:template>\n-\n-</xsl:stylesheet>"},{"sha":"2ad86cc1dca0beda56ad9fd2edfef0995e1c4ba1","filename":"core/logic/src/main/resources/report/report2fo.xsl","status":"removed","additions":0,"deletions":97,"changes":97,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2fo.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,97 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n-                version=\"1.0\">\n-\n-  <xsl:import href=\"userReportlet2fo.xsl\"/>\n-  <xsl:import href=\"groupReportlet2fo.xsl\"/>\n-  <xsl:import href=\"staticReportlet2fo.xsl\"/>\n- \n-  <xsl:param name=\"status\"/>\n-  <xsl:param name=\"message\"/>\n-  <xsl:param name=\"start\"/>\n-  <xsl:param name=\"end\"/>\n-  \n-  <xsl:template match=\"/\">\n-    <fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\" font-family=\"Helvetica\" font-size=\"10pt\">\n-      \n-      <!-- defines the layout master -->\n-      <fo:layout-master-set>\n-        <fo:simple-page-master master-name=\"first\" page-height=\"29.7cm\" page-width=\"21cm\" \n-                               margin-top=\"1cm\" margin-bottom=\"2cm\" margin-left=\"2.5cm\" margin-right=\"2.5cm\">\n-          <fo:region-body margin-top=\"1cm\"/>\n-          <fo:region-before extent=\"1cm\"/>\n-          <fo:region-after extent=\"1.5cm\"/>\n-        </fo:simple-page-master>\n-      </fo:layout-master-set>\n-\n-      <!-- starts actual layout -->\n-      <fo:page-sequence master-reference=\"first\">\n-\t\n-        <fo:flow flow-name=\"xsl-region-body\">\n-          <fo:block font-size=\"24pt\" font-weight=\"bold\" text-align=\"center\" space-after=\"1cm\">\n-            Apache Syncope Report - <xsl:value-of select=\"report/@name\"/>\n-          </fo:block>\n-\n-          <fo:table table-layout=\"fixed\" border-width=\"0.5mm\" border-style=\"solid\" width=\"100%\" space-after=\"1cm\">\n-            <fo:table-column column-width=\"proportional-column-width(1)\"/>\n-            <fo:table-column column-width=\"proportional-column-width(1)\"/>\n-            <fo:table-body>\n-              <fo:table-row>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">Report Name:</fo:block>\n-                </fo:table-cell>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n-                    <xsl:value-of select=\"report/@name\"/>\n-                  </fo:block>\n-                </fo:table-cell>\n-              </fo:table-row>\n-              <fo:table-row>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">Start Date:</fo:block>\n-                </fo:table-cell>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n-                    <xsl:value-of select=\"$start\"/>\n-                  </fo:block>\n-                </fo:table-cell>\n-              </fo:table-row>\n-              <fo:table-row>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">End Date:</fo:block>\n-                </fo:table-cell>\n-                <fo:table-cell>\n-                  <fo:block font-size=\"18pt\" font-weight=\"bold\">\n-                    <xsl:value-of select=\"$end\"/>\n-                  </fo:block>\n-                </fo:table-cell>\n-              </fo:table-row>\n-            </fo:table-body>\n-          </fo:table>\n-\n-          <xsl:apply-templates/>\n-        </fo:flow>\n-      </fo:page-sequence>\n-    </fo:root>\n-  </xsl:template>\n-\n-</xsl:stylesheet>"},{"sha":"920a4f9f963bfd5246fd07bf75543f153aa44d01","filename":"core/logic/src/main/resources/report/report2html.xsl","status":"removed","additions":0,"deletions":77,"changes":77,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2Freport2html.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,77 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:import href=\"userReportlet2html.xsl\"/>\n-  <xsl:import href=\"groupReportlet2html.xsl\"/>\n-  <xsl:import href=\"staticReportlet2html.xsl\"/>\n- \n-  <xsl:param name=\"status\"/>\n-  <xsl:param name=\"message\"/>\n-  <xsl:param name=\"start\"/>\n-  <xsl:param name=\"end\"/>\n-  \n-  <xsl:template match=\"/\">\n-    <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n-      <head>\n-        <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\n-        <title>Apache Syncope Report - <xsl:value-of select=\"report/@name\"/></title>\n-      </head>\n-      <body>\n-        <table style=\"border: 1px solid black;\">\n-          <tr>\n-            <td>\n-              <h1>Report Name:</h1>\n-            </td>\n-            <td>\n-              <h1>\n-                <xsl:value-of select=\"report/@name\"/>\n-              </h1>\n-            </td>\n-          </tr>\n-          <tr>\n-            <td>\n-              <h2>Start Date:</h2>\n-            </td>\n-            <td>\n-              <h2>\n-                <xsl:value-of select=\"$start\"/>\n-              </h2>\n-            </td>\n-          </tr>\n-          <tr>\n-            <td>\n-              <h2>End Date:</h2>\n-            </td>\n-            <td>\n-              <h2>\n-                <xsl:value-of select=\"$end\"/>\n-              </h2>\n-            </td>\n-          </tr>\n-        </table>\n-\n-        <xsl:apply-templates/>\n-      </body>\n-    </html>\n-  </xsl:template>\n-\n-</xsl:stylesheet>"},{"sha":"90879d980e6223c8f079890a5a1fbfe228146951","filename":"core/logic/src/main/resources/report/staticReportlet2csv.xsl","status":"removed","additions":0,"deletions":81,"changes":81,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2csv.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,81 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\">\n-\n-  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n-   \n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n-    <xsl:call-template name=\"header\">\n-      <xsl:with-param name=\"node\" select=\"configurations/staticAttributes\"/>\n-    </xsl:call-template>\n-    \n-    <xsl:call-template name=\"staticAttributes\">\n-      <xsl:with-param name=\"header\" select=\"configurations/staticAttributes\"/>\n-    </xsl:call-template>\n-  </xsl:template>\n-  \n-  <xsl:template name=\"header\">\n-    <xsl:param name=\"node\"/>  \n-    <xsl:for-each select=\"$node/*\">\n-      <xsl:text>\"</xsl:text>\n-      <xsl:value-of select=\"text()\"/>\n-      <xsl:text>\"</xsl:text> \n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>\n-    </xsl:for-each>\n-    <xsl:text>&#10;</xsl:text>\n-  </xsl:template>\n-    \n-  <xsl:template name=\"staticAttributes\">\n-    <xsl:param name=\"header\"/>\n-    \n-    <xsl:variable name=\"attrs\" select=\".\"/>\n-    <xsl:for-each select=\"$header/*\">\n-      <xsl:variable name=\"nameAttr\" select=\"text()\"/> \n-      <xsl:if test=\"string-length($attrs/*[name(.)=$nameAttr]/text()) &gt; 0 \n-                      and count($attrs/*[name(.)=$nameAttr]/*/node()) = 0\">\n-        <xsl:variable name=\"value\" select=\"$attrs/*[name(.)=$nameAttr]/text()\"/>\n-        <xsl:text>\"</xsl:text>\n-        <xsl:value-of select=\"$value\"/>\n-        <xsl:text>\"</xsl:text>\n-      </xsl:if>\n-      \n-      <xsl:if test=\"string-length($attrs/*[name(.)=$nameAttr]/*/text()) &gt; 0 \n-                      and count($attrs/*[name(.)=$nameAttr]/*/node()) &gt; 0\">\n-        <xsl:text>\"</xsl:text>\n-        <xsl:for-each select=\"$attrs/*[name(.)=$nameAttr]/*\">\n-          <xsl:variable name=\"value\" select=\"text()\"/>\n-          <xsl:text></xsl:text>\n-          <xsl:value-of select=\"$value\"/>\n-          <xsl:if test=\"position() != last()\">\n-            <xsl:value-of select=\"$delimiter\"/>\n-          </xsl:if>\n-        </xsl:for-each>\n-        <xsl:text>\"</xsl:text>\n-      </xsl:if>\n-      \n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>\n-    \n-    </xsl:for-each>\n-  </xsl:template>\n-</xsl:stylesheet>"},{"sha":"c123d514fff660a69ebf0554bbad1535e31942ea","filename":"core/logic/src/main/resources/report/staticReportlet2fo.xsl","status":"removed","additions":0,"deletions":84,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2fo.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,84 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n-\n--->\n-\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n-\n-    <fo:block font-size=\"14pt\" font-weight=\"bold\" space-after=\"0.5cm\">Reportlet: \n-      <xsl:value-of select=\"@name\"/>\n-    </fo:block>\n-\n-    <xsl:if test=\"string-length(string/text()) &gt; 0\">\n-      <fo:block font-size=\"11pt\">String value: \n-        <xsl:value-of select=\"string/text()\"/>\n-      </fo:block>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(long/text()) &gt; 0\">\n-      <fo:block font-size=\"11pt\">Long value: \n-        <xsl:value-of select=\"long/text()\"/>\n-      </fo:block>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(double/text()) &gt; 0\">\n-      <fo:block font-size=\"11pt\">Double value: \n-        <xsl:value-of select=\"double/text()\"/>\n-      </fo:block>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(date/text()) &gt; 0\">\n-      <fo:block font-size=\"11pt\">Date value: \n-        <xsl:value-of select=\"date/text()\"/>\n-      </fo:block>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(enum/text()) &gt; 0\">\n-      <fo:block font-size=\"11pt\">Enum value: \n-        <xsl:value-of select=\"enum/text()\"/>\n-      </fo:block>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(list) &gt; 0\">\n-      <fo:block font-size=\"11pt\">List values:</fo:block>\n-            \n-      <fo:list-block provisional-label-separation=\"4mm\" provisional-distance-between-starts=\"2mm\">\n-        <xsl:for-each select=\"list/string\">\n-          <xsl:if test=\"string-length(string/text()) &gt; 0\">\n-            <fo:list-item>\n-              <fo:list-item-label end-indent=\"label-end()\">\n-                <fo:block>&#x2022;</fo:block>\n-              </fo:list-item-label>\n-              <fo:list-item-body start-indent=\"body-start()\">\n-                <fo:block>\n-                  <xsl:value-of select=\"text()\"/>\n-                </fo:block>\n-              </fo:list-item-body>\n-            </fo:list-item>\n-          </xsl:if>\n-        </xsl:for-each>\n-      </fo:list-block>\n-    </xsl:if>\n-        \n-  </xsl:template>\n-</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"da0ba8590e0a0d569bd72423fbd7c95c5f3595a6","filename":"core/logic/src/main/resources/report/staticReportlet2html.xsl","status":"removed","additions":0,"deletions":74,"changes":74,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FstaticReportlet2html.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,74 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n-\n--->\n-\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.StaticReportlet']\">\n-    <h2>Reportlet: \n-      <xsl:value-of select=\"@name\"/>\n-    </h2>\n-        \n-    <xsl:if test=\"string-length(string/text()) &gt; 0\">\n-      <p>String value:                 \n-        <xsl:value-of select=\"string/text()\"/>\n-      </p>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(long/text()) &gt; 0\">\n-      <p>Long value: \n-        <xsl:value-of select=\"long/text()\"/>\n-      </p>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(double/text()) &gt; 0\">\n-      <p>Double value: \n-        <xsl:value-of select=\"double/text()\"/>\n-      </p>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(date/text()) &gt; 0\">\n-      <p>Date value: \n-        <xsl:value-of select=\"date/text()\"/>\n-      </p>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(enum/text()) &gt; 0\">\n-      <p>Enum value: \n-        <xsl:value-of select=\"enum/text()\"/>\n-      </p>\n-    </xsl:if>\n-\n-    <xsl:if test=\"string-length(list) &gt; 0\">\n-      <p>List values:</p>\n-            \n-      <ul>\n-        <xsl:for-each select=\"list/string\">\n-          <xsl:if test=\"string-length(string/text()) &gt; 0\">\n-            <li>\n-              <xsl:value-of select=\"text()\"/>\n-            </li>\n-          </xsl:if>\n-        </xsl:for-each>\n-      </ul>\n-    </xsl:if>\n-  </xsl:template>\n-</xsl:stylesheet>\n\\ No newline at end of file"},{"sha":"8fd9f51ac41c3ed9fdcf2774d942c7cc5e8ede20","filename":"core/logic/src/main/resources/report/userReportlet2csv.xsl","status":"removed","additions":0,"deletions":119,"changes":119,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2csv.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,119 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:variable name=\"delimiter\" select=\"';'\"/>\n-  \n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n-    \n-    <xsl:call-template name=\"header\">\n-      <xsl:with-param name=\"node\" select=\"configurations/userAttributes\"/>\n-    </xsl:call-template>\n-    <xsl:for-each select=\"user\">\n-      <xsl:call-template name=\"userAttributes\">\n-        <xsl:with-param name=\"header\" select=\"../configurations/userAttributes\"/>\n-      </xsl:call-template>\n-      <xsl:text>&#10;</xsl:text>\n-    </xsl:for-each>\n-  </xsl:template>\n-  \n-  <xsl:template name=\"header\">\n-    <xsl:param name=\"node\"/>  \n-    <xsl:for-each select=\"$node/*\">\n-      <xsl:text>\"</xsl:text>\n-      <xsl:value-of select=\"text()\"/>   \n-      <xsl:text>\"</xsl:text>\n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>\n-    </xsl:for-each>\n-    <xsl:text>&#10;</xsl:text>\n-  </xsl:template>\n-    \n-  <xsl:template name=\"userAttributes\">\n-    <xsl:param name=\"header\"/>\n-  \n-    <xsl:variable name=\"attrs\" select=\".\"/>\n-    <xsl:for-each select=\"$header/*\">\n-      <xsl:variable name=\"nameAttr\" select=\"text()\"/>\n-      <xsl:choose>      \n-        <xsl:when test=\"count($attrs/@*[name()=$nameAttr]) &gt; 0\">\n-          <xsl:variable name=\"userAttr\" select=\"$attrs/@*[name()=$nameAttr]\"/>\n-          <xsl:text>\"</xsl:text>\n-          <xsl:value-of select=\"$userAttr/.\"/>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0 \n-                        and count($attrs/*/*[@name=$nameAttr]/node()) = 0\">\n-          <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n-          <xsl:text>\"</xsl:text>\n-          <xsl:value-of select=\"$value\"/>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"string-length($attrs/*/*[@name=$nameAttr]/value/text()) &gt; 0 \n-                        and count($attrs/*/*[@name=$nameAttr]/node()) &gt; 0\">\n-          <xsl:text>\"</xsl:text>\n-          <xsl:for-each select=\"$attrs/*/*[@name=$nameAttr]/*\">\n-            <xsl:variable name=\"value\" select=\"$attrs/*/*[@name=$nameAttr]/value/text()\"/>\n-            <xsl:value-of select=\"$value\"/>\n-            <xsl:if test=\"position() != last()\">\n-              <xsl:value-of select=\"$delimiter\"/>\n-            </xsl:if>\n-          </xsl:for-each>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='membership']) \n-                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n-          <xsl:text>\"</xsl:text>       \n-          <xsl:variable name=\"value\" select=\"@groupName\"/>\n-          <xsl:for-each select=\"$attrs/*/membership\">\n-            <xsl:variable name=\"value\" select=\"@groupName\"/>\n-            <xsl:value-of select=\"$value\"/>\n-            <xsl:if test=\"position() != last()\">\n-              <xsl:value-of select=\"$delimiter\"/>\n-            </xsl:if>\n-          </xsl:for-each>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:when test=\"name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) \n-                        and count($attrs/*[name(.)=$nameAttr]/node()) &gt; 0\">\n-          <xsl:text>\"</xsl:text>\n-          <xsl:variable name=\"value\" select=\"@name\"/>\n-          <xsl:for-each select=\"$attrs/*/resource\">\n-            <xsl:variable name=\"value\" select=\"@name\"/>\n-            <xsl:value-of select=\"$value\"/>\n-            <xsl:if test=\"position() != last()\">\n-              <xsl:value-of select=\"$delimiter\"/>\n-            </xsl:if>\n-          </xsl:for-each>\n-          <xsl:text>\"</xsl:text>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <xsl:text>\"\"</xsl:text> \n-        </xsl:otherwise>  \n-      </xsl:choose>\n-      <xsl:if test=\"position() != last()\">\n-        <xsl:value-of select=\"$delimiter\"/>\n-      </xsl:if>  \n-    </xsl:for-each>\n-  </xsl:template>\n-  \n-</xsl:stylesheet>"},{"sha":"222229d7d7ba86a06caeb9f9bf9913ced677e714","filename":"core/logic/src/main/resources/report/userReportlet2fo.xsl","status":"removed","additions":0,"deletions":247,"changes":247,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2fo.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,247 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n-   \n-    <fo:block font-size=\"16pt\" font-weight=\"bold\" space-after=\"0.5cm\" space-before=\"5mm\">Reportlet: <xsl:value-of select=\"@name\"/></fo:block>\n-        \n-    <xsl:for-each select=\"user\">\n-      <fo:block font-size=\"14pt\" font-weight=\"bold\" space-before=\"15mm\" space-after=\"5mm\" background-color=\"(#8888ff)\">User <xsl:value-of select=\"@username\"/></fo:block>\n-      <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n-        <fo:table-column/>\n-        <fo:table-column/>\n-        <fo:table-body>\n-          <fo:table-row background-color=\"(#ccccff)\">\n-            <fo:table-cell>\n-              <fo:block>Status:</fo:block>\n-            </fo:table-cell>\n-            <fo:table-cell>\n-              <fo:block font-style=\"italic\">\n-                <xsl:value-of select=\"@status\"/>\n-              </fo:block>\n-            </fo:table-cell>\n-          </fo:table-row>\n-          <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Creation Date:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@creationDate\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Last Login Date:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@lastLoginDate\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Change Password Date:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@changePwdDate\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Password History Size:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@passwordHistorySize\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n-            <fo:table-row background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>Number of Failed Login Attempts:</fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <fo:block font-style=\"italic\">\n-                  <xsl:value-of select=\"@failedLoginCount\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-        </fo:table-body>\n-      </fo:table>\n-      <xsl:call-template name=\"attributes\">\n-        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-      </xsl:call-template>\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n-          <fo:block font-size=\"11pt\" font-weight=\"bold\">Memberships</fo:block>\n-          <xsl:for-each select=\"memberships/membership\">\n-            <fo:block font-size=\"10pt\" font-weight=\"bold\" space-before=\"2mm\">Group: <xsl:value-of select=\"@groupName\"/>(<xsl:value-of select=\"@groupId\"/>)</fo:block>\n-            <fo:block start-indent=\"1cm\" space-before=\"3mm\" space-after=\"0.5cm\">\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS GROUP HASN'T ANY ATTRIBUTE</fo:block>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS GROUP HASN'T ANY DERIVED ATTRIBUTE</fo:block>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <fo:block color=\"red\" font-size=\"8pt\" space-after=\"2mm\">THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE</fo:block>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <!-- 'groupResources\" is defined in groupReportlet2fo.xsl -->\n-              <xsl:call-template name=\"groupResources\">\n-                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-              </xsl:call-template>\n-            </fo:block>\n-          </xsl:for-each>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <fo:block color=\"red\" font-size=\"9pt\" space-after=\"3mm\">THIS USER HASN'T BEEN ASSIGNED TO ANY GROUP</fo:block>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:call-template name=\"resources\">\n-        <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-      </xsl:call-template>\n-    </xsl:for-each>\n-  </xsl:template>\n-  <xsl:template name=\"attributes\">\n-    <xsl:param name=\"label\"/>\n-    <xsl:param name=\"node\"/>\n-    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"2mm\">\n-      <xsl:value-of select=\"$label\"/>\n-    </fo:block>\n-    <fo:table table-layout=\"fixed\" space-after=\"7mm\">\n-      <fo:table-column/>\n-      <fo:table-column/>\n-      <fo:table-header>\n-        <fo:table-row height=\"7mm\" background-color=\"(#ccccba)\">\n-          <fo:table-cell>\n-            <fo:block font-weight=\"bold\">Schema name</fo:block>\n-          </fo:table-cell>\n-          <fo:table-cell>\n-            <fo:block font-weight=\"bold\">Value(s)</fo:block>\n-          </fo:table-cell>\n-        </fo:table-row>\n-      </fo:table-header>\n-      <fo:table-body>\n-        <xsl:for-each select=\"$node\">\n-          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-            <fo:table-row height=\"4mm\" background-color=\"(#ccccff)\">\n-              <fo:table-cell>\n-                <fo:block>\n-                  <xsl:value-of select=\"@name\"/>\n-                </fo:block>\n-              </fo:table-cell>\n-              <fo:table-cell>\n-                <xsl:for-each select=\"value\">\n-                  <fo:block></fo:block><!--                        <fo:block>&#x2022;</fo:block>-->\n-                  <fo:block font-style=\"italic\">\n-                    <xsl:value-of select=\"text()\"/>\n-                  </fo:block>\n-                </xsl:for-each>\n-              </fo:table-cell>\n-            </fo:table-row>\n-          </xsl:if>\n-          <fo:table-row>\n-            <fo:table-cell>\n-              <fo:block></fo:block>\n-            </fo:table-cell>\n-            <fo:table-cell>\n-              <fo:block></fo:block>\n-            </fo:table-cell>\n-          </fo:table-row>\n-        </xsl:for-each>\n-      </fo:table-body>\n-    </fo:table>\n-  </xsl:template>\n-  <xsl:template name=\"resources\">\n-    <xsl:param name=\"node\"/>\n-    <fo:block font-size=\"11pt\" font-weight=\"bold\" space-after=\"3mm\">Resources</fo:block>\n-    <xsl:for-each select=\"$node\">\n-      <fo:block></fo:block> <!--            <fo:block>&#x2022;</fo:block>-->\n-      <fo:block background-color=\"(#ccccff)\">\n-        <xsl:value-of select=\"@name\"/>\n-      </fo:block>\n-    </xsl:for-each>\n-  </xsl:template>\n-</xsl:stylesheet>"},{"sha":"0a0e5c5aaa1843cff85decb0351920d01669909d","filename":"core/logic/src/main/resources/report/userReportlet2html.xsl","status":"removed","additions":0,"deletions":219,"changes":219,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/63eeca3ed9e485802f814d57062c6151af41fcf9/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fresources%2Freport%2FuserReportlet2html.xsl?ref=63eeca3ed9e485802f814d57062c6151af41fcf9","patch":"@@ -1,219 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n-                version=\"1.0\">\n-\n-  <xsl:template match=\"reportlet[@class='org.apache.syncope.core.report.UserReportlet']\">\n-    \n-    <h3>Reportlet: <xsl:value-of select=\"@name\"/></h3>\n-    \n-    <xsl:for-each select=\"user\">\n-      <h4>User <xsl:value-of select=\"@username\"/></h4>\n-      \n-      <table style=\"border: 1px solid black;\">\n-        <tr>\n-          <td>Status:</td>\n-          <td>\n-            <xsl:value-of select=\"@status\"/>\n-          </td>\n-        </tr>\n-        <xsl:if test=\"string-length(@creationDate) &gt; 0\">\n-          <tr>\n-            <td>Creation Date:</td>\n-            <td>\n-              <xsl:value-of select=\"@creationDate\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        <xsl:if test=\"string-length(@lastLoginDate) &gt; 0\">\n-          <tr>\n-            <td>Last Login Date:</td>\n-            <td>\n-              <xsl:value-of select=\"@lastLoginDate\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        <xsl:if test=\"string-length(@changePwdDate) &gt; 0\">\n-          <tr>\n-            <td>Change Password Date:</td>\n-            <td>\n-              <xsl:value-of select=\"@changePwdDate\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        <xsl:if test=\"string-length(@passwordHistorySize) &gt; 0\">\n-          <tr>\n-            <td>Password History Size:</td>\n-            <td>\n-              <xsl:value-of select=\"@passwordHistorySize\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-        <xsl:if test=\"string-length(@failedLoginCount) &gt; 0\">\n-          <tr>\n-            <td>Number of Failed Login Attempts:</td>\n-            <td>\n-              <xsl:value-of select=\"@failedLoginCount\"/>\n-            </td>\n-          </tr>\n-        </xsl:if>\n-      </table>\n-\n-      <xsl:call-template name=\"attributes\">\n-        <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-        <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-      </xsl:call-template>\n-\n-      <!--<xsl:if test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">-->\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS USER HASN'T DERIVED ATTRIBUTES</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <!--</xsl:if>-->\n-      <xsl:choose>\n-        <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-          <xsl:call-template name=\"attributes\">\n-            <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-            <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-          </xsl:call-template>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS USER HASN'T VIRTUAL ATTRIBUTES</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      \n-      <xsl:choose>\n-        <xsl:when test=\"string-length(memberships/membership) &gt; 0\">\n-          <h4>Memberships</h4>\n-          <xsl:for-each select=\"memberships/membership\">\n-            <h5>Group: <xsl:value-of select=\"@groupName\"/>(<xsl:value-of select=\"@groupId\"/>)</h5>\n-            <blockquote>\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(attributes/attribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"attributes/attribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <h5>THIS GROUP HASN'T ATTRIBUTES</h5>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(derivedAttributes/derivedAttribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Derived Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"derivedAttributes/derivedAttribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <h5>THIS GROUP HASN'T DERIVED ATTRIBUTES</h5>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <xsl:choose>\n-                <xsl:when test=\"string-length(virtualAttributes/virtualAttribute) &gt; 0\">\n-                  <xsl:call-template name=\"attributes\">\n-                    <xsl:with-param name=\"label\">Virtual Attributes</xsl:with-param>\n-                    <xsl:with-param name=\"node\" select=\"virtualAttributes/virtualAttribute\"/>\n-                  </xsl:call-template>\n-                </xsl:when>\n-                <xsl:otherwise>\n-                  <h5>THIS GROUP HASN'T VIRTUAL ATTRIBUTES</h5>\n-                </xsl:otherwise>\n-              </xsl:choose>\n-              <!-- 'groupResources\" is defined in groupReportlet2html.xsl -->\n-              <xsl:call-template name=\"groupResources\">\n-                <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-              </xsl:call-template>\n-            </blockquote>\n-          </xsl:for-each>\n-        </xsl:when>\n-        <xsl:otherwise>\n-          <h5>THIS USER ISN'T ASSIGNED TO A GROUP</h5>\n-        </xsl:otherwise>\n-      </xsl:choose>\n-      <xsl:if test=\"string-length(resources) &gt; 0\">\n-        <xsl:call-template name=\"resources\">\n-          <xsl:with-param name=\"node\" select=\"resources/resource\"/>\n-        </xsl:call-template>\n-      </xsl:if>\n-      <hr/>\n-    </xsl:for-each>\n-       \n-  </xsl:template>\n-\n-  <xsl:template name=\"attributes\">\n-    <xsl:param name=\"label\"/>\n-    <xsl:param name=\"node\"/>\n-\n-    <h4>\n-      <xsl:value-of select=\"$label\"/>\n-    </h4>\n-    \n-    <table>\n-      <thead>\n-        <tr>\n-          <th>Schema name</th>\n-          <th>Value(s)</th>\n-        </tr>\n-      </thead>\n-      <tbody>\n-        <xsl:for-each select=\"$node\">\n-          <xsl:if test=\"string-length(value/text()) &gt; 0\">\n-            <tr>\n-              <td>\n-                <xsl:value-of select=\"@name\"/>\n-              </td>\n-              <td>\n-                <ul>\n-                  <xsl:for-each select=\"value\">\n-                    <li>\n-                      <xsl:value-of select=\"text()\"/>\n-                    </li>\n-                  </xsl:for-each>\n-                </ul>\n-              </td>\n-            </tr>\n-          </xsl:if>\n-        </xsl:for-each>\n-      </tbody>\n-    </table>\n-  </xsl:template>\n-\n-  <xsl:template name=\"resources\">\n-    <xsl:param name=\"node\"/>\n-    \n-    <h4>Resources</h4>\n-    <ul>\n-      <xsl:for-each select=\"$node\">\n-        <li>\n-          <xsl:value-of select=\"@name\"/>\n-        </li>\n-      </xsl:for-each>\n-    </ul>\n-  </xsl:template>\n-</xsl:stylesheet>"},{"sha":"38ec5ad90f675f7e39787850b273e5db35914fe7","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/dao/MailTemplateDAO.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FMailTemplateDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FMailTemplateDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FMailTemplateDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -27,7 +27,7 @@ public interface MailTemplateDAO extends DAO<MailTemplate, String> {\n \n     List<MailTemplate> findAll();\n \n-    MailTemplate save(MailTemplate notification);\n+    MailTemplate save(MailTemplate template);\n \n     void delete(String key);\n }"},{"sha":"cfce78f237c66b72228e220d900fb071ea9946e6","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/dao/ReportDAO.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -20,11 +20,14 @@\n \n import java.util.List;\n import org.apache.syncope.core.persistence.api.entity.Report;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n \n public interface ReportDAO extends DAO<Report, Long> {\n \n     Report find(Long key);\n \n+    List<Report> findByTemplate(ReportTemplate template);\n+\n     List<Report> findAll();\n \n     Report save(Report report);"},{"sha":"6796f9b84f3406ab11f1573aa7cd8ebb4015fb30","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/dao/ReportTemplateDAO.java","status":"added","additions":33,"deletions":0,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportTemplateDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportTemplateDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fdao%2FReportTemplateDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,33 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.persistence.api.dao;\n+\n+import java.util.List;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n+\n+public interface ReportTemplateDAO extends DAO<ReportTemplate, String> {\n+\n+    ReportTemplate find(String key);\n+\n+    List<ReportTemplate> findAll();\n+\n+    ReportTemplate save(ReportTemplate template);\n+\n+    void delete(String key);\n+}"},{"sha":"08650c2e867b6b3f06fadad59224c0ec1be89b97","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/entity/Report.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReport.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReport.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReport.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -44,4 +44,8 @@ public interface Report extends Entity<Long> {\n     boolean isActive();\n \n     void setActive(boolean active);\n+\n+    ReportTemplate getTemplate();\n+\n+    void setTemplate(ReportTemplate template);\n }"},{"sha":"3169f82b5ae9298f17bdfc25f3928207ddc92b08","filename":"core/persistence-api/src/main/java/org/apache/syncope/core/persistence/api/entity/ReportTemplate.java","status":"added","additions":36,"deletions":0,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReportTemplate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReportTemplate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fapi%2Fentity%2FReportTemplate.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,36 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.persistence.api.entity;\n+\n+public interface ReportTemplate extends Entity<String> {\n+\n+    void setKey(String key);\n+\n+    String getFOTemplate();\n+\n+    void setFOTemplate(String foTemplate);\n+\n+    String getCSVTemplate();\n+\n+    void setCSVTemplate(String csvTemplate);\n+\n+    String getHTMLTemplate();\n+\n+    void setHTMLTemplate(String htmlTemplate);\n+}"},{"sha":"8b2a3c2a7dae51e8a9e9c5eb48f6b88608eacf2d","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPANotificationDAO.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPANotificationDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPANotificationDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPANotificationDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -25,15 +25,18 @@\n import org.apache.syncope.core.persistence.api.entity.Notification;\n import org.apache.syncope.core.persistence.jpa.entity.JPANotification;\n import org.springframework.stereotype.Repository;\n+import org.springframework.transaction.annotation.Transactional;\n \n @Repository\n public class JPANotificationDAO extends AbstractDAO<Notification, Long> implements NotificationDAO {\n \n+    @Transactional(readOnly = true)\n     @Override\n     public Notification find(final Long key) {\n         return entityManager().find(JPANotification.class, key);\n     }\n \n+    @Transactional(readOnly = true)\n     @Override\n     public List<Notification> findByTemplate(final MailTemplate template) {\n         TypedQuery<Notification> query = entityManager().createQuery(\n@@ -43,6 +46,7 @@ public List<Notification> findByTemplate(final MailTemplate template) {\n         return query.getResultList();\n     }\n \n+    @Transactional(readOnly = true)\n     @Override\n     public List<Notification> findAll() {\n         TypedQuery<Notification> query = entityManager().createQuery("},{"sha":"5f39e203d642da91bd85008d0933adc2ce37e43c","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAReportDAO.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -22,6 +22,7 @@\n import javax.persistence.TypedQuery;\n import org.apache.syncope.core.persistence.api.dao.ReportDAO;\n import org.apache.syncope.core.persistence.api.entity.Report;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n import org.apache.syncope.core.persistence.jpa.entity.JPAReport;\n import org.springframework.stereotype.Repository;\n import org.springframework.transaction.annotation.Transactional;\n@@ -35,6 +36,16 @@ public Report find(final Long key) {\n         return entityManager().find(JPAReport.class, key);\n     }\n \n+    @Transactional(readOnly = true)\n+    @Override\n+    public List<Report> findByTemplate(final ReportTemplate template) {\n+        TypedQuery<Report> query = entityManager().createQuery(\n+                \"SELECT e FROM \" + JPAReport.class.getSimpleName() + \" e \"\n+                + \"WHERE e.template=:template\", Report.class);\n+        query.setParameter(\"template\", template);\n+        return query.getResultList();\n+    }\n+\n     @Transactional(readOnly = true)\n     @Override\n     public List<Report> findAll() {"},{"sha":"08b434b7e3cbae9dc3636a474cdcf0e720db2058","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAReportTemplateDAO.java","status":"added","additions":57,"deletions":0,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportTemplateDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportTemplateDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAReportTemplateDAO.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,57 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.persistence.jpa.dao;\n+\n+import java.util.List;\n+import javax.persistence.TypedQuery;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n+import org.apache.syncope.core.persistence.jpa.entity.JPAReportTemplate;\n+import org.springframework.stereotype.Repository;\n+\n+@Repository\n+public class JPAReportTemplateDAO extends AbstractDAO<ReportTemplate, String> implements ReportTemplateDAO {\n+\n+    @Override\n+    public ReportTemplate find(final String key) {\n+        return entityManager().find(JPAReportTemplate.class, key);\n+    }\n+\n+    @Override\n+    public List<ReportTemplate> findAll() {\n+        TypedQuery<ReportTemplate> query = entityManager().createQuery(\n+                \"SELECT e FROM \" + JPAReportTemplate.class.getSimpleName() + \" e\", ReportTemplate.class);\n+        return query.getResultList();\n+    }\n+\n+    @Override\n+    public ReportTemplate save(final ReportTemplate notification) {\n+        return entityManager().merge(notification);\n+    }\n+\n+    @Override\n+    public void delete(final String key) {\n+        ReportTemplate template = find(key);\n+        if (template == null) {\n+            return;\n+        }\n+\n+        entityManager().remove(template);\n+    }\n+}"},{"sha":"5c8cc59a9914e5b8409ac6ef59e04ea4e14b18d4","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPAEntityFactory.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAEntityFactory.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -47,6 +47,7 @@\n import org.apache.syncope.core.persistence.api.entity.RelationshipType;\n import org.apache.syncope.core.persistence.api.entity.Report;\n import org.apache.syncope.core.persistence.api.entity.ReportExec;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n import org.apache.syncope.core.persistence.api.entity.Role;\n import org.apache.syncope.core.persistence.api.entity.policy.SyncPolicy;\n import org.apache.syncope.core.persistence.api.entity.VirSchema;\n@@ -217,6 +218,8 @@ public <KEY, T extends Entity<KEY>> T newEntity(final Class<T> reference) {\n             result = (T) new JPACPlainAttrUniqueValue();\n         } else if (reference.equals(Report.class)) {\n             result = (T) new JPAReport();\n+        } else if (reference.equals(ReportTemplate.class)) {\n+            result = (T) new JPAReportTemplate();\n         } else if (reference.equals(ReportExec.class)) {\n             result = (T) new JPAReportExec();\n         } else if (reference.equals(NotificationTask.class)) {"},{"sha":"2c40c518d2c40d72071efb98323a587b5ca29745","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPAReport.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReport.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReport.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReport.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -26,6 +26,8 @@\n import javax.persistence.Entity;\n import javax.persistence.FetchType;\n import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n import javax.persistence.OneToMany;\n import javax.persistence.Table;\n import javax.validation.constraints.Max;\n@@ -36,6 +38,7 @@\n import org.apache.syncope.common.lib.report.ReportletConf;\n import org.apache.syncope.core.persistence.api.entity.Report;\n import org.apache.syncope.core.persistence.api.entity.ReportExec;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n import org.apache.syncope.core.persistence.jpa.validation.entity.ReportCheck;\n \n @Entity\n@@ -67,6 +70,10 @@ public class JPAReport extends AbstractEntity<Long> implements Report {\n     @Max(1)\n     private Integer active;\n \n+    @ManyToOne(fetch = FetchType.EAGER, optional = false)\n+    @JoinColumn(name = \"template_name\")\n+    private JPAReportTemplate template;\n+\n     @Override\n     public Long getKey() {\n         return id;\n@@ -141,4 +148,15 @@ public boolean isActive() {\n     public void setActive(final boolean active) {\n         this.active = getBooleanAsInteger(active);\n     }\n+\n+    @Override\n+    public ReportTemplate getTemplate() {\n+        return template;\n+    }\n+\n+    @Override\n+    public void setTemplate(final ReportTemplate template) {\n+        checkType(template, JPAReportTemplate.class);\n+        this.template = (JPAReportTemplate) template;\n+    }\n }"},{"sha":"7551411b2275fe47dfe074daab117cae70c31d11","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPAReportTemplate.java","status":"added","additions":89,"deletions":0,"changes":89,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReportTemplate.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReportTemplate.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAReportTemplate.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,89 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.persistence.jpa.entity;\n+\n+import javax.persistence.Cacheable;\n+import javax.persistence.Entity;\n+import javax.persistence.Id;\n+import javax.persistence.Lob;\n+import javax.persistence.Table;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n+\n+@Entity\n+@Table(name = JPAReportTemplate.TABLE)\n+@Cacheable\n+public class JPAReportTemplate extends AbstractEntity<String> implements ReportTemplate {\n+\n+    private static final long serialVersionUID = 7755855927366231089L;\n+\n+    public static final String TABLE = \"ReportTemplate\";\n+\n+    @Id\n+    private String name;\n+\n+    @Lob\n+    private String foTemplate;\n+\n+    @Lob\n+    private String csvTemplate;\n+\n+    @Lob\n+    private String htmlTemplate;\n+\n+    @Override\n+    public String getKey() {\n+        return name;\n+    }\n+\n+    @Override\n+    public void setKey(final String name) {\n+        this.name = name;\n+    }\n+\n+    @Override\n+    public String getFOTemplate() {\n+        return foTemplate;\n+    }\n+\n+    @Override\n+    public void setFOTemplate(final String foTemplate) {\n+        this.foTemplate = foTemplate;\n+    }\n+\n+    @Override\n+    public String getCSVTemplate() {\n+        return csvTemplate;\n+    }\n+\n+    @Override\n+    public void setCSVTemplate(final String csvTemplate) {\n+        this.csvTemplate = csvTemplate;\n+    }\n+\n+    @Override\n+    public String getHTMLTemplate() {\n+        return htmlTemplate;\n+    }\n+\n+    @Override\n+    public void setHTMLTemplate(final String htmlTemplate) {\n+        this.htmlTemplate = htmlTemplate;\n+    }\n+\n+}"},{"sha":"ac0fde97c2deafe1aa987b713e981141ebdccf73","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/ReportTemplateTest.java","status":"added","additions":80,"deletions":0,"changes":80,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTemplateTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTemplateTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTemplateTest.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.persistence.jpa.inner;\n+\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+\n+import java.util.List;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n+import org.apache.syncope.core.persistence.jpa.AbstractTest;\n+import org.junit.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+@Transactional(\"Master\")\n+public class ReportTemplateTest extends AbstractTest {\n+\n+    @Autowired\n+    private ReportTemplateDAO reportTemplateDAO;\n+\n+    @Test\n+    public void find() {\n+        ReportTemplate optin = reportTemplateDAO.find(\"sample\");\n+        assertNotNull(optin);\n+        assertNotNull(optin.getFOTemplate());\n+        assertNotNull(optin.getCSVTemplate());\n+        assertNotNull(optin.getHTMLTemplate());\n+    }\n+\n+    @Test\n+    public void findAll() {\n+        List<ReportTemplate> templates = reportTemplateDAO.findAll();\n+        assertNotNull(templates);\n+        assertFalse(templates.isEmpty());\n+    }\n+\n+    @Test\n+    public void save() {\n+        ReportTemplate template = entityFactory.newEntity(ReportTemplate.class);\n+        template.setKey(\"new\");\n+        template.setCSVTemplate(\n+                \"<xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'></xsl:stylesheet>\");\n+\n+        ReportTemplate actual = reportTemplateDAO.save(template);\n+        assertNotNull(actual);\n+        assertNotNull(actual.getKey());\n+        assertNotNull(actual.getCSVTemplate());\n+        assertNull(actual.getHTMLTemplate());\n+\n+        actual.setHTMLTemplate(\n+                \"<xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'></xsl:stylesheet>\");\n+        actual = reportTemplateDAO.save(actual);\n+        assertNotNull(actual.getCSVTemplate());\n+        assertNotNull(actual.getHTMLTemplate());\n+    }\n+\n+    @Test\n+    public void delete() {\n+        reportTemplateDAO.delete(\"sample\");\n+        assertNull(reportTemplateDAO.find(\"sample\"));\n+    }\n+}"},{"sha":"813d14b3ba4c184250d26dee3103758f5f7a81ea","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/inner/ReportTest.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Finner%2FReportTest.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -25,6 +25,7 @@\n import java.util.List;\n import org.apache.syncope.common.lib.report.UserReportletConf;\n import org.apache.syncope.core.persistence.api.dao.ReportDAO;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n import org.apache.syncope.core.persistence.api.entity.Report;\n import org.apache.syncope.core.persistence.jpa.AbstractTest;\n import org.junit.Test;\n@@ -37,6 +38,9 @@ public class ReportTest extends AbstractTest {\n     @Autowired\n     private ReportDAO reportDAO;\n \n+    @Autowired\n+    private ReportTemplateDAO reportTemplateDAO;\n+\n     @Test\n     public void find() {\n         Report report = reportDAO.find(1L);\n@@ -62,6 +66,7 @@ public void save() {\n         report.setActive(true);\n         report.add(new UserReportletConf(\"first\"));\n         report.add(new UserReportletConf(\"second\"));\n+        report.setTemplate(reportTemplateDAO.find(\"sample\"));\n \n         report = reportDAO.save(report);\n         assertNotNull(report);"},{"sha":"c39e3ce837afae6d011668f8e07bbf4fe3abc60b","filename":"core/persistence-jpa/src/test/java/org/apache/syncope/core/persistence/jpa/outer/ReportTest.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fouter%2FReportTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fouter%2FReportTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fouter%2FReportTest.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -28,6 +28,7 @@\n import org.apache.syncope.common.lib.types.ReportExecStatus;\n import org.apache.syncope.core.persistence.api.dao.ReportDAO;\n import org.apache.syncope.core.persistence.api.dao.ReportExecDAO;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n import org.apache.syncope.core.persistence.api.entity.Report;\n import org.apache.syncope.core.persistence.api.entity.ReportExec;\n import org.apache.syncope.core.persistence.jpa.AbstractTest;\n@@ -41,6 +42,9 @@ public class ReportTest extends AbstractTest {\n     @Autowired\n     private ReportDAO reportDAO;\n \n+    @Autowired\n+    private ReportTemplateDAO reportTemplateDAO;\n+\n     @Autowired\n     private ReportExecDAO reportExecDAO;\n \n@@ -64,6 +68,7 @@ public void saveWithExistingName() {\n         report = entityFactory.newEntity(Report.class);\n         report.setName(name);\n         report.setActive(true);\n+        report.setTemplate(reportTemplateDAO.find(\"sample\"));\n \n         reportDAO.save(report);\n         reportDAO.flush();"},{"sha":"91d7c8630f03b40eb2eda12f56ddd49105c02801","filename":"core/persistence-jpa/src/test/resources/domains/MasterContent.xml","status":"modified","additions":1096,"deletions":1,"changes":1097,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -1213,7 +1213,1102 @@ $$ }&#10;\n     \n   <NotificationTask_recipients notificationtask_id=\"8\" address=\"recipient@prova.org\"/>  \n   \n-  <Report id=\"1\" name=\"test\" active=\"1\"/>\n+  <ReportTemplate name=\"sample\"\n+                  htmlTemplate=\"&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;\n+&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&#10;\n+                version=&quot;1.0&quot;&gt;&#10;\n+&#10;\n+  &lt;xsl:param name=&quot;status&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;message&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;start&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;end&quot;/&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;/&quot;&gt;&#10;\n+    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;&#10;\n+      &lt;head&gt;&#10;\n+        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&#10;\n+        &lt;title&gt;Apache Syncope Report - &lt;xsl:value-of select=&quot;report/@name&quot;/&gt;&lt;/title&gt;&#10;\n+      &lt;/head&gt;&#10;\n+      &lt;body&gt;&#10;\n+        &lt;table style=&quot;border: 1px solid black;&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h1&gt;Report Name:&lt;/h1&gt;&#10;\n+            &lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h1&gt;&#10;\n+                &lt;xsl:value-of select=&quot;report/@name&quot;/&gt;&#10;\n+              &lt;/h1&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h2&gt;Start Date:&lt;/h2&gt;&#10;\n+            &lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h2&gt;&#10;\n+                &lt;xsl:value-of select=&quot;$start&quot;/&gt;&#10;\n+              &lt;/h2&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h2&gt;End Date:&lt;/h2&gt;&#10;\n+            &lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;h2&gt;&#10;\n+                &lt;xsl:value-of select=&quot;$end&quot;/&gt;&#10;\n+              &lt;/h2&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/table&gt;&#10;\n+&#10;\n+        &lt;xsl:apply-templates/&gt;&#10;\n+      &lt;/body&gt;&#10;\n+    &lt;/html&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.StaticReportlet']&quot;&gt;&#10;\n+    &lt;h2&gt;Reportlet: &#10;\n+      &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+    &lt;/h2&gt;&#10;\n+        &#10;\n+    &lt;xsl:if test=&quot;string-length(string/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;String value:                 &#10;\n+        &lt;xsl:value-of select=&quot;string/text()&quot;/&gt;&#10;\n+      &lt;/p&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(long/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;Long value: &#10;\n+        &lt;xsl:value-of select=&quot;long/text()&quot;/&gt;&#10;\n+      &lt;/p&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(double/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;Double value: &#10;\n+        &lt;xsl:value-of select=&quot;double/text()&quot;/&gt;&#10;\n+      &lt;/p&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(date/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;Date value: &#10;\n+        &lt;xsl:value-of select=&quot;date/text()&quot;/&gt;&#10;\n+      &lt;/p&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(enum/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;Enum value: &#10;\n+        &lt;xsl:value-of select=&quot;enum/text()&quot;/&gt;&#10;\n+      &lt;/p&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(list) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;p&gt;List values:&lt;/p&gt;&#10;\n+            &#10;\n+      &lt;ul&gt;&#10;\n+        &lt;xsl:for-each select=&quot;list/string&quot;&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(string/text()) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;li&gt;&#10;\n+              &lt;xsl:value-of select=&quot;text()&quot;/&gt;&#10;\n+            &lt;/li&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/xsl:for-each&gt;&#10;\n+      &lt;/ul&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.UserReportlet']&quot;&gt;&#10;\n+    &#10;\n+    &lt;h3&gt;Reportlet: &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h3&gt;&#10;\n+    &#10;\n+    &lt;xsl:for-each select=&quot;user&quot;&gt;&#10;\n+      &lt;h4&gt;User &lt;xsl:value-of select=&quot;@username&quot;/&gt;&lt;/h4&gt;&#10;\n+      &#10;\n+      &lt;table style=&quot;border: 1px solid black;&quot;&gt;&#10;\n+        &lt;tr&gt;&#10;\n+          &lt;td&gt;Status:&lt;/td&gt;&#10;\n+          &lt;td&gt;&#10;\n+            &lt;xsl:value-of select=&quot;@status&quot;/&gt;&#10;\n+          &lt;/td&gt;&#10;\n+        &lt;/tr&gt;&#10;\n+        &lt;xsl:if test=&quot;string-length(@creationDate) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Creation Date:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@creationDate&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &lt;xsl:if test=&quot;string-length(@lastLoginDate) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Last Login Date:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@lastLoginDate&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &lt;xsl:if test=&quot;string-length(@changePwdDate) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Change Password Date:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@changePwdDate&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &lt;xsl:if test=&quot;string-length(@passwordHistorySize) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Password History Size:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@passwordHistorySize&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &lt;xsl:if test=&quot;string-length(@failedLoginCount) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Number of Failed Login Attempts:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@failedLoginCount&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+      &lt;/table&gt;&#10;\n+&#10;\n+      &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+        &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+&#10;\n+      &lt;!--&lt;xsl:if test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;--&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS USER HASN'T DERIVED ATTRIBUTES&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;!--&lt;/xsl:if&gt;--&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS USER HASN'T VIRTUAL ATTRIBUTES&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(memberships/membership) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;h4&gt;Memberships&lt;/h4&gt;&#10;\n+          &lt;xsl:for-each select=&quot;memberships/membership&quot;&gt;&#10;\n+            &lt;h5&gt;Group: &lt;xsl:value-of select=&quot;@groupName&quot;/&gt;(&lt;xsl:value-of select=&quot;@groupId&quot;/&gt;)&lt;/h5&gt;&#10;\n+            &lt;blockquote&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(attributes/attribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;h5&gt;THIS GROUP HASN'T ATTRIBUTES&lt;/h5&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;h5&gt;THIS GROUP HASN'T DERIVED ATTRIBUTES&lt;/h5&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;h5&gt;THIS GROUP HASN'T VIRTUAL ATTRIBUTES&lt;/h5&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;xsl:call-template name=&quot;groupResources&quot;&gt;&#10;\n+                &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+              &lt;/xsl:call-template&gt;&#10;\n+            &lt;/blockquote&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS USER ISN'T ASSIGNED TO A GROUP&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:if test=&quot;string-length(resources) &amp;gt; 0&quot;&gt;&#10;\n+        &lt;xsl:call-template name=&quot;resources&quot;&gt;&#10;\n+          &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+        &lt;/xsl:call-template&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+      &lt;hr/&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+       &#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.GroupReportlet']&quot;&gt;&#10;\n+    &lt;h2&gt;Reportlet: &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h2&gt;&#10;\n+    &lt;xsl:for-each select=&quot;group&quot;&gt;&#10;\n+      &lt;h3&gt;Group &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h3&gt;&#10;\n+      &#10;\n+      &lt;table style=&quot;border: 1px solid black;&quot;&gt;&#10;\n+        &lt;tr&gt;&#10;\n+          &lt;td&gt;Id:&lt;/td&gt;&#10;\n+          &lt;td&gt;&#10;\n+            &lt;xsl:value-of select=&quot;@id&quot;/&gt;&#10;\n+          &lt;/td&gt;&#10;\n+        &lt;/tr&gt;&#10;\n+        &lt;xsl:if test=&quot;@groupOwner != 'null'&quot;&gt; &lt;!--!= null test=&quot;not(USER/FIRSTNAME)&quot; --&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;Group Owner:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@groupOwner&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &lt;xsl:if test=&quot;@userOwner != 'null'&quot;&gt;&#10;\n+          &lt;tr&gt;&#10;\n+            &lt;td&gt;User Owner:&lt;/td&gt;&#10;\n+            &lt;td&gt;&#10;\n+              &lt;xsl:value-of select=&quot;@userOwner&quot;/&gt;&#10;\n+            &lt;/td&gt;&#10;\n+          &lt;/tr&gt;&#10;\n+        &lt;/xsl:if&gt;&#10;\n+        &#10;\n+      &lt;/table&gt;&#10;\n+&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(attributes/attribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS GROUP HASN'T ANY ATTRIBUTE&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS GROUP HASN'T ANY DERIVED ATTRIBUTE&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;!--&lt;/xsl:if&gt;--&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;users/user&quot;&gt;&#10;\n+          &lt;h4&gt;Users&lt;/h4&gt;&#10;\n+          &lt;xsl:for-each select=&quot;users/user&quot;&gt;&#10;\n+            &lt;h5&gt;User: &lt;xsl:value-of select=&quot;@userUsername&quot;/&gt; (Id: &lt;xsl:value-of select=&quot;@userId&quot;/&gt;)&lt;/h5&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;h5&gt;THIS GROUP HASN'T ANY USER ASSIGNED TO&lt;/h5&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &#10;\n+      &lt;xsl:call-template name=&quot;groupResources&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+      &lt;hr/&gt;&#10;\n+      &#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template name=&quot;attributes&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;label&quot;/&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+&#10;\n+    &lt;h4&gt;&#10;\n+      &lt;xsl:value-of select=&quot;$label&quot;/&gt;&#10;\n+    &lt;/h4&gt;&#10;\n+    &#10;\n+    &lt;table&gt;&#10;\n+      &lt;thead&gt;&#10;\n+        &lt;tr&gt;&#10;\n+          &lt;th&gt;Schema name&lt;/th&gt;&#10;\n+          &lt;th&gt;Value(s)&lt;/th&gt;&#10;\n+        &lt;/tr&gt;&#10;\n+      &lt;/thead&gt;&#10;\n+      &lt;tbody&gt;&#10;\n+        &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(value/text()) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;tr&gt;&#10;\n+              &lt;td&gt;&#10;\n+                &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+              &lt;/td&gt;&#10;\n+              &lt;td&gt;&#10;\n+                &lt;ul&gt;&#10;\n+                  &lt;xsl:for-each select=&quot;value&quot;&gt;&#10;\n+                    &lt;li&gt;&#10;\n+                      &lt;xsl:value-of select=&quot;text()&quot;/&gt;&#10;\n+                    &lt;/li&gt;&#10;\n+                  &lt;/xsl:for-each&gt;&#10;\n+                &lt;/ul&gt;&#10;\n+              &lt;/td&gt;&#10;\n+            &lt;/tr&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/xsl:for-each&gt;&#10;\n+      &lt;/tbody&gt;&#10;\n+    &lt;/table&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:template name=&quot;resources&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+    &#10;\n+    &lt;h4&gt;Resources&lt;/h4&gt;&#10;\n+    &lt;ul&gt;&#10;\n+      &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+        &lt;li&gt;&#10;\n+          &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+        &lt;/li&gt;&#10;\n+      &lt;/xsl:for-each&gt;&#10;\n+    &lt;/ul&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template name=&quot;groupResources&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+    &#10;\n+    &lt;h4&gt;Group Resources&lt;/h4&gt;&#10;\n+    &lt;ul&gt;&#10;\n+      &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+        &lt;li&gt;&#10;\n+          &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+        &lt;/li&gt;&#10;\n+      &lt;/xsl:for-each&gt;&#10;\n+    &lt;/ul&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&lt;/xsl:stylesheet&gt;&#10;\"\n+                  csvTemplate=\"&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;\n+&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&#10;\n+                version=&quot;1.0&quot;&gt;&#10;\n+ &#10;\n+  &lt;xsl:param name=&quot;status&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;message&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;start&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;end&quot;/&gt;&#10;\n+    &#10;\n+  &lt;xsl:template match=&quot;/&quot;&gt;&#10;\n+    &lt;xsl:apply-templates/&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:variable name=&quot;delimiter&quot; select=&quot;';'&quot;/&gt;&#10;\n+   &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.StaticReportlet']&quot;&gt;&#10;\n+    &lt;xsl:call-template name=&quot;header&quot;&gt;&#10;\n+      &lt;xsl:with-param name=&quot;node&quot; select=&quot;configurations/staticAttributes&quot;/&gt;&#10;\n+    &lt;/xsl:call-template&gt;&#10;\n+    &#10;\n+    &lt;xsl:call-template name=&quot;staticAttributes&quot;&gt;&#10;\n+      &lt;xsl:with-param name=&quot;header&quot; select=&quot;configurations/staticAttributes&quot;/&gt;&#10;\n+    &lt;/xsl:call-template&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template name=&quot;header&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;  &#10;\n+    &lt;xsl:for-each select=&quot;$node/*&quot;&gt;&#10;\n+      &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+      &lt;xsl:value-of select=&quot;text()&quot;/&gt;&#10;\n+      &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt; &#10;\n+      &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+    &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+    &#10;\n+  &lt;xsl:template name=&quot;staticAttributes&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;header&quot;/&gt;&#10;\n+    &#10;\n+    &lt;xsl:variable name=&quot;attrs&quot; select=&quot;.&quot;/&gt;&#10;\n+    &lt;xsl:for-each select=&quot;$header/*&quot;&gt;&#10;\n+      &lt;xsl:variable name=&quot;nameAttr&quot; select=&quot;text()&quot;/&gt; &#10;\n+      &lt;xsl:if test=&quot;string-length($attrs/*[name(.)=$nameAttr]/text()) &amp;gt; 0 &#10;\n+                      and count($attrs/*[name(.)=$nameAttr]/*/node()) = 0&quot;&gt;&#10;\n+        &lt;xsl:variable name=&quot;value&quot; select=&quot;$attrs/*[name(.)=$nameAttr]/text()&quot;/&gt;&#10;\n+        &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+        &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+      &#10;\n+      &lt;xsl:if test=&quot;string-length($attrs/*[name(.)=$nameAttr]/*/text()) &amp;gt; 0 &#10;\n+                      and count($attrs/*[name(.)=$nameAttr]/*/node()) &amp;gt; 0&quot;&gt;&#10;\n+        &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;xsl:for-each select=&quot;$attrs/*[name(.)=$nameAttr]/*&quot;&gt;&#10;\n+          &lt;xsl:variable name=&quot;value&quot; select=&quot;text()&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+          &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/xsl:for-each&gt;&#10;\n+        &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+      &#10;\n+      &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+    &#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.UserReportlet']&quot;&gt;&#10;\n+    &#10;\n+    &lt;xsl:call-template name=&quot;header&quot;&gt;&#10;\n+      &lt;xsl:with-param name=&quot;node&quot; select=&quot;configurations/userAttributes&quot;/&gt;&#10;\n+    &lt;/xsl:call-template&gt;&#10;\n+    &lt;xsl:for-each select=&quot;user&quot;&gt;&#10;\n+      &lt;xsl:call-template name=&quot;userAttributes&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;header&quot; select=&quot;../configurations/userAttributes&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+      &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+    &#10;\n+  &lt;xsl:template name=&quot;userAttributes&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;header&quot;/&gt;&#10;\n+  &#10;\n+    &lt;xsl:variable name=&quot;attrs&quot; select=&quot;.&quot;/&gt;&#10;\n+    &lt;xsl:for-each select=&quot;$header/*&quot;&gt;&#10;\n+      &lt;xsl:variable name=&quot;nameAttr&quot; select=&quot;text()&quot;/&gt;&#10;\n+      &lt;xsl:choose&gt;      &#10;\n+        &lt;xsl:when test=&quot;count($attrs/@*[name()=$nameAttr]) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:variable name=&quot;userAttr&quot; select=&quot;$attrs/@*[name()=$nameAttr]&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:value-of select=&quot;$userAttr/.&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length($attrs/*/*[@name=$nameAttr]/value/text()) &amp;gt; 0 &#10;\n+                        and count($attrs/*/*[@name=$nameAttr]/node()) = 0&quot;&gt;&#10;\n+          &lt;xsl:variable name=&quot;value&quot; select=&quot;$attrs/*/*[@name=$nameAttr]/value/text()&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length($attrs/*/*[@name=$nameAttr]/value/text()) &amp;gt; 0 &#10;\n+                        and count($attrs/*/*[@name=$nameAttr]/node()) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:for-each select=&quot;$attrs/*/*[@name=$nameAttr]/*&quot;&gt;&#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;$attrs/*/*[@name=$nameAttr]/value/text()&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+            &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+              &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+            &lt;/xsl:if&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;name($attrs/*[name(.)=$nameAttr]/*[name(.)='membership']) &#10;\n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;       &#10;\n+          &lt;xsl:variable name=&quot;value&quot; select=&quot;@groupName&quot;/&gt;&#10;\n+          &lt;xsl:for-each select=&quot;$attrs/*/membership&quot;&gt;&#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;@groupName&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+            &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+              &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+            &lt;/xsl:if&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) &#10;\n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:variable name=&quot;value&quot; select=&quot;@name&quot;/&gt;&#10;\n+          &lt;xsl:for-each select=&quot;$attrs/*/resource&quot;&gt;&#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;@name&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+            &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+              &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+            &lt;/xsl:if&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&quot;&lt;/xsl:text&gt; &#10;\n+        &lt;/xsl:otherwise&gt;  &#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+      &lt;/xsl:if&gt;  &#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.GroupReportlet']&quot;&gt;&#10;\n+    &#10;\n+    &lt;xsl:call-template name=&quot;header&quot;&gt;&#10;\n+      &lt;xsl:with-param name=&quot;node&quot; select=&quot;configurations/groupAttributes&quot;/&gt;&#10;\n+    &lt;/xsl:call-template&gt;&#10;\n+    &lt;xsl:for-each select=&quot;group&quot;&gt;&#10;\n+      &lt;xsl:call-template name=&quot;groupAttributes&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;header&quot; select=&quot;../configurations/groupAttributes&quot;/&gt;&#10;\n+        &lt;xsl:with-param name=&quot;attrs&quot; select=&quot;.&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+      &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+    &#10;\n+  &lt;xsl:template name=&quot;groupAttributes&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;header&quot;/&gt;&#10;\n+    &lt;xsl:param name=&quot;attrs&quot;/&gt;&#10;\n+    &#10;\n+    &lt;xsl:for-each select=&quot;$header/*&quot;&gt;&#10;\n+      &lt;xsl:variable name=&quot;nameAttr&quot; select=&quot;text()&quot;/&gt;&#10;\n+      &#10;\n+      &lt;xsl:choose&gt; &#10;\n+        &lt;xsl:when test=&quot;string-length($attrs/@*[name()=$nameAttr]) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:variable name=&quot;groupAttr&quot; select=&quot;$attrs/@*[name()=$nameAttr]&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:value-of select=&quot;$groupAttr/.&quot;/&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;name($attrs/*[name(.)=$nameAttr]/*[name(.)='resource']) &#10;\n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;       &#10;\n+          &lt;xsl:for-each select=&quot;$attrs/*/resource&quot;&gt;&#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;@name&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+            &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+              &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+            &lt;/xsl:if&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:when test=&quot;name($attrs/*[name(.)=$nameAttr]/*[name(.)='user']) &#10;\n+                        and count($attrs/*[name(.)=$nameAttr]/node()) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;       &#10;\n+          &lt;xsl:for-each select=&quot;$attrs/*/user&quot;&gt;&#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;@userUsername&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+            &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+              &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+            &lt;/xsl:if&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length($attrs/*/*[@name=$nameAttr]/value/text()) &amp;gt; 0&quot;&gt; &#10;\n+            &lt;xsl:variable name=&quot;value&quot; select=&quot;$attrs/*/*[@name=$nameAttr]/value/text()&quot;/&gt;&#10;\n+            &lt;xsl:value-of select=&quot;$value&quot;/&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:text&gt;&quot;&lt;/xsl:text&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:if test=&quot;position() != last()&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;$delimiter&quot;/&gt;&#10;\n+      &lt;/xsl:if&gt;&#10;\n+    &#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&lt;/xsl:stylesheet&gt;&#10;\"\n+                  foTemplate=\"&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;\n+&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&#10;\n+                xmlns:fo=&quot;http://www.w3.org/1999/XSL/Format&quot;&#10;\n+                version=&quot;1.0&quot;&gt;&#10;\n+&#10;\n+  &lt;xsl:param name=&quot;status&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;message&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;start&quot;/&gt;&#10;\n+  &lt;xsl:param name=&quot;end&quot;/&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;/&quot;&gt;&#10;\n+    &lt;fo:root xmlns:fo=&quot;http://www.w3.org/1999/XSL/Format&quot; font-family=&quot;Helvetica&quot; font-size=&quot;10pt&quot;&gt;&#10;\n+      &#10;\n+      &lt;!-- defines the layout master --&gt;&#10;\n+      &lt;fo:layout-master-set&gt;&#10;\n+        &lt;fo:simple-page-master master-name=&quot;first&quot; page-height=&quot;29.7cm&quot; page-width=&quot;21cm&quot; &#10;\n+                               margin-top=&quot;1cm&quot; margin-bottom=&quot;2cm&quot; margin-left=&quot;2.5cm&quot; margin-right=&quot;2.5cm&quot;&gt;&#10;\n+          &lt;fo:region-body margin-top=&quot;1cm&quot;/&gt;&#10;\n+          &lt;fo:region-before extent=&quot;1cm&quot;/&gt;&#10;\n+          &lt;fo:region-after extent=&quot;1.5cm&quot;/&gt;&#10;\n+        &lt;/fo:simple-page-master&gt;&#10;\n+      &lt;/fo:layout-master-set&gt;&#10;\n+&#10;\n+      &lt;!-- starts actual layout --&gt;&#10;\n+      &lt;fo:page-sequence master-reference=&quot;first&quot;&gt;&#10;\n+        &#10;\n+        &lt;fo:flow flow-name=&quot;xsl-region-body&quot;&gt;&#10;\n+          &lt;fo:block font-size=&quot;24pt&quot; font-weight=&quot;bold&quot; text-align=&quot;center&quot; space-after=&quot;1cm&quot;&gt;&#10;\n+            Apache Syncope Report - &lt;xsl:value-of select=&quot;report/@name&quot;/&gt;&#10;\n+          &lt;/fo:block&gt;&#10;\n+&#10;\n+          &lt;fo:table table-layout=&quot;fixed&quot; border-width=&quot;0.5mm&quot; border-style=&quot;solid&quot; width=&quot;100%&quot; space-after=&quot;1cm&quot;&gt;&#10;\n+            &lt;fo:table-column column-width=&quot;proportional-column-width(1)&quot;/&gt;&#10;\n+            &lt;fo:table-column column-width=&quot;proportional-column-width(1)&quot;/&gt;&#10;\n+            &lt;fo:table-body&gt;&#10;\n+              &lt;fo:table-row&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;Report Name:&lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;&#10;\n+                    &lt;xsl:value-of select=&quot;report/@name&quot;/&gt;&#10;\n+                  &lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+              &lt;/fo:table-row&gt;&#10;\n+              &lt;fo:table-row&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;Start Date:&lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;&#10;\n+                    &lt;xsl:value-of select=&quot;$start&quot;/&gt;&#10;\n+                  &lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+              &lt;/fo:table-row&gt;&#10;\n+              &lt;fo:table-row&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;End Date:&lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+                &lt;fo:table-cell&gt;&#10;\n+                  &lt;fo:block font-size=&quot;18pt&quot; font-weight=&quot;bold&quot;&gt;&#10;\n+                    &lt;xsl:value-of select=&quot;$end&quot;/&gt;&#10;\n+                  &lt;/fo:block&gt;&#10;\n+                &lt;/fo:table-cell&gt;&#10;\n+              &lt;/fo:table-row&gt;&#10;\n+            &lt;/fo:table-body&gt;&#10;\n+          &lt;/fo:table&gt;&#10;\n+&#10;\n+          &lt;xsl:apply-templates/&gt;&#10;\n+        &lt;/fo:flow&gt;&#10;\n+      &lt;/fo:page-sequence&gt;&#10;\n+    &lt;/fo:root&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.StaticReportlet']&quot;&gt;&#10;\n+&#10;\n+    &lt;fo:block font-size=&quot;14pt&quot; font-weight=&quot;bold&quot; space-after=&quot;0.5cm&quot;&gt;Reportlet: &#10;\n+      &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+    &lt;/fo:block&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(string/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;String value: &#10;\n+        &lt;xsl:value-of select=&quot;string/text()&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(long/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;Long value: &#10;\n+        &lt;xsl:value-of select=&quot;long/text()&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(double/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;Double value: &#10;\n+        &lt;xsl:value-of select=&quot;double/text()&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(date/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;Date value: &#10;\n+        &lt;xsl:value-of select=&quot;date/text()&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(enum/text()) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;Enum value: &#10;\n+        &lt;xsl:value-of select=&quot;enum/text()&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+&#10;\n+    &lt;xsl:if test=&quot;string-length(list) &amp;gt; 0&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;11pt&quot;&gt;List values:&lt;/fo:block&gt;&#10;\n+            &#10;\n+      &lt;fo:list-block provisional-label-separation=&quot;4mm&quot; provisional-distance-between-starts=&quot;2mm&quot;&gt;&#10;\n+        &lt;xsl:for-each select=&quot;list/string&quot;&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(string/text()) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:list-item&gt;&#10;\n+              &lt;fo:list-item-label end-indent=&quot;label-end()&quot;&gt;&#10;\n+                &lt;fo:block&gt;&#x2022;&lt;/fo:block&gt;&#10;\n+              &lt;/fo:list-item-label&gt;&#10;\n+              &lt;fo:list-item-body start-indent=&quot;body-start()&quot;&gt;&#10;\n+                &lt;fo:block&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;text()&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:list-item-body&gt;&#10;\n+            &lt;/fo:list-item&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/xsl:for-each&gt;&#10;\n+      &lt;/fo:list-block&gt;&#10;\n+    &lt;/xsl:if&gt;&#10;\n+        &#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.UserReportlet']&quot;&gt;&#10;\n+   &#10;\n+    &lt;fo:block font-size=&quot;16pt&quot; font-weight=&quot;bold&quot; space-after=&quot;0.5cm&quot; space-before=&quot;5mm&quot;&gt;Reportlet: &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/fo:block&gt;&#10;\n+        &#10;\n+    &lt;xsl:for-each select=&quot;user&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;14pt&quot; font-weight=&quot;bold&quot; space-before=&quot;15mm&quot; space-after=&quot;5mm&quot; background-color=&quot;(#8888ff)&quot;&gt;User &lt;xsl:value-of select=&quot;@username&quot;/&gt;&lt;/fo:block&gt;&#10;\n+      &lt;fo:table table-layout=&quot;fixed&quot; space-after=&quot;7mm&quot;&gt;&#10;\n+        &lt;fo:table-column/&gt;&#10;\n+        &lt;fo:table-column/&gt;&#10;\n+        &lt;fo:table-body&gt;&#10;\n+          &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block&gt;Status:&lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                &lt;xsl:value-of select=&quot;@status&quot;/&gt;&#10;\n+              &lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+          &lt;/fo:table-row&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(@creationDate) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Creation Date:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@creationDate&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(@lastLoginDate) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Last Login Date:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@lastLoginDate&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(@changePwdDate) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Change Password Date:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@changePwdDate&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(@passwordHistorySize) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Password History Size:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@passwordHistorySize&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(@failedLoginCount) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Number of Failed Login Attempts:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@failedLoginCount&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/fo:table-body&gt;&#10;\n+      &lt;/fo:table&gt;&#10;\n+      &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+        &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS USER HASN'T ANY DERIVED ATTRIBUTE&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS USER HASN'T ANY VIRTUAL ATTRIBUTE&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(memberships/membership) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;fo:block font-size=&quot;11pt&quot; font-weight=&quot;bold&quot;&gt;Memberships&lt;/fo:block&gt;&#10;\n+          &lt;xsl:for-each select=&quot;memberships/membership&quot;&gt;&#10;\n+            &lt;fo:block font-size=&quot;10pt&quot; font-weight=&quot;bold&quot; space-before=&quot;2mm&quot;&gt;Group: &lt;xsl:value-of select=&quot;@groupName&quot;/&gt;(&lt;xsl:value-of select=&quot;@groupId&quot;/&gt;)&lt;/fo:block&gt;&#10;\n+            &lt;fo:block start-indent=&quot;1cm&quot; space-before=&quot;3mm&quot; space-after=&quot;0.5cm&quot;&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(attributes/attribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;fo:block color=&quot;red&quot; font-size=&quot;8pt&quot; space-after=&quot;2mm&quot;&gt;THIS GROUP HASN'T ANY ATTRIBUTE&lt;/fo:block&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;fo:block color=&quot;red&quot; font-size=&quot;8pt&quot; space-after=&quot;2mm&quot;&gt;THIS GROUP HASN'T ANY DERIVED ATTRIBUTE&lt;/fo:block&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;xsl:choose&gt;&#10;\n+                &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+                  &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+                    &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+                  &lt;/xsl:call-template&gt;&#10;\n+                &lt;/xsl:when&gt;&#10;\n+                &lt;xsl:otherwise&gt;&#10;\n+                  &lt;fo:block color=&quot;red&quot; font-size=&quot;8pt&quot; space-after=&quot;2mm&quot;&gt;THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE&lt;/fo:block&gt;&#10;\n+                &lt;/xsl:otherwise&gt;&#10;\n+              &lt;/xsl:choose&gt;&#10;\n+              &lt;!-- 'groupResources&quot; is defined in groupReportlet2fo.xsl --&gt;&#10;\n+              &lt;xsl:call-template name=&quot;groupResources&quot;&gt;&#10;\n+                &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+              &lt;/xsl:call-template&gt;&#10;\n+            &lt;/fo:block&gt;&#10;\n+          &lt;/xsl:for-each&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS USER HASN'T BEEN ASSIGNED TO ANY GROUP&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:call-template name=&quot;resources&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template match=&quot;reportlet[@class='org.apache.syncope.core.logic.report.GroupReportlet']&quot;&gt;&#10;\n+   &#10;\n+    &lt;fo:block font-size=&quot;16pt&quot; font-weight=&quot;bold&quot; space-after=&quot;0.5cm&quot; space-before=&quot;5mm&quot;&gt;Reportlet: &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/fo:block&gt;&#10;\n+        &#10;\n+    &lt;xsl:for-each select=&quot;group&quot;&gt;&#10;\n+      &lt;fo:block font-size=&quot;14pt&quot; font-weight=&quot;bold&quot; space-before=&quot;15mm&quot; space-after=&quot;5mm&quot; background-color=&quot;(#8888ff)&quot;&gt;Group &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/fo:block&gt;&#10;\n+      &lt;fo:table table-layout=&quot;fixed&quot; space-after=&quot;7mm&quot;&gt;&#10;\n+        &lt;fo:table-column/&gt;&#10;\n+        &lt;fo:table-column/&gt;&#10;\n+        &lt;fo:table-body&gt;&#10;\n+          &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block&gt;Id:&lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                &lt;xsl:value-of select=&quot;@id&quot;/&gt;&#10;\n+              &lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+          &lt;/fo:table-row&gt;&#10;\n+          &lt;xsl:if test=&quot;@groupOwner != 'null'&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Group Owner:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@groupOwner&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;xsl:if test=&quot;@userOwner != 'null'&quot;&gt;&#10;\n+            &lt;fo:table-row background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;Last Login Date:&lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@userOwner&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+        &lt;/fo:table-body&gt;&#10;\n+      &lt;/fo:table&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(attributes/attribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;attributes/attribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS GROUP HASN'T ANY ATTRIBUTE&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(derivedAttributes/derivedAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Derived Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;derivedAttributes/derivedAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS GROUP HASN'T ANY DERIVED ATTRIBUTE&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;string-length(virtualAttributes/virtualAttribute) &amp;gt; 0&quot;&gt;&#10;\n+          &lt;xsl:call-template name=&quot;attributes&quot;&gt;&#10;\n+            &lt;xsl:with-param name=&quot;label&quot;&gt;Virtual Attributes&lt;/xsl:with-param&gt;&#10;\n+            &lt;xsl:with-param name=&quot;node&quot; select=&quot;virtualAttributes/virtualAttribute&quot;/&gt;&#10;\n+          &lt;/xsl:call-template&gt;&#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS GROUP HASN'T ANY VIRTUAL ATTRIBUTE&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &#10;\n+      &lt;xsl:choose&gt;&#10;\n+        &lt;xsl:when test=&quot;users/user&quot;&gt;&#10;\n+          &lt;fo:block font-size=&quot;11pt&quot; font-weight=&quot;bold&quot;&gt;Users&lt;/fo:block&gt;&#10;\n+          &lt;xsl:for-each select=&quot;users/user&quot;&gt;&#10;\n+            &lt;fo:block background-color=&quot;(#ccccff)&quot; font-size=&quot;9pt&quot; font-weight=&quot;bold&quot; space-before=&quot;4mm&quot;&gt;User: &lt;xsl:value-of select=&quot;@userUsername&quot;/&gt; (Id: &lt;xsl:value-of select=&quot;@userId&quot;/&gt;)&lt;/fo:block&gt;&#10;\n+                 &#10;\n+          &lt;/xsl:for-each&gt; &#10;\n+        &lt;/xsl:when&gt;&#10;\n+        &lt;xsl:otherwise&gt;&#10;\n+          &lt;fo:block color=&quot;red&quot; font-size=&quot;9pt&quot; space-after=&quot;3mm&quot;&gt;THIS GROUP HASN'T ANY USER ASSIGNED TO&lt;/fo:block&gt;&#10;\n+        &lt;/xsl:otherwise&gt;&#10;\n+      &lt;/xsl:choose&gt;&#10;\n+      &lt;xsl:call-template name=&quot;groupResources&quot;&gt;&#10;\n+        &lt;xsl:with-param name=&quot;node&quot; select=&quot;resources/resource&quot;/&gt;&#10;\n+      &lt;/xsl:call-template&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template name=&quot;attributes&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;label&quot;/&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+    &lt;fo:block font-size=&quot;11pt&quot; font-weight=&quot;bold&quot; space-after=&quot;2mm&quot;&gt;&#10;\n+      &lt;xsl:value-of select=&quot;$label&quot;/&gt;&#10;\n+    &lt;/fo:block&gt;&#10;\n+    &lt;fo:table table-layout=&quot;fixed&quot; space-after=&quot;7mm&quot;&gt;&#10;\n+      &lt;fo:table-column/&gt;&#10;\n+      &lt;fo:table-column/&gt;&#10;\n+      &lt;fo:table-header&gt;&#10;\n+        &lt;fo:table-row height=&quot;7mm&quot; background-color=&quot;(#ccccba)&quot;&gt;&#10;\n+          &lt;fo:table-cell&gt;&#10;\n+            &lt;fo:block font-weight=&quot;bold&quot;&gt;Schema name&lt;/fo:block&gt;&#10;\n+          &lt;/fo:table-cell&gt;&#10;\n+          &lt;fo:table-cell&gt;&#10;\n+            &lt;fo:block font-weight=&quot;bold&quot;&gt;Value(s)&lt;/fo:block&gt;&#10;\n+          &lt;/fo:table-cell&gt;&#10;\n+        &lt;/fo:table-row&gt;&#10;\n+      &lt;/fo:table-header&gt;&#10;\n+      &lt;fo:table-body&gt;&#10;\n+        &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+          &lt;xsl:if test=&quot;string-length(value/text()) &amp;gt; 0&quot;&gt;&#10;\n+            &lt;fo:table-row height=&quot;4mm&quot; background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;fo:block&gt;&#10;\n+                  &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+                &lt;/fo:block&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+              &lt;fo:table-cell&gt;&#10;\n+                &lt;xsl:for-each select=&quot;value&quot;&gt;&#10;\n+                  &lt;fo:block&gt;&lt;/fo:block&gt;&#10;\n+                  &lt;fo:block font-style=&quot;italic&quot;&gt;&#10;\n+                    &lt;xsl:value-of select=&quot;text()&quot;/&gt;&#10;\n+                  &lt;/fo:block&gt;&#10;\n+                &lt;/xsl:for-each&gt;&#10;\n+              &lt;/fo:table-cell&gt;&#10;\n+            &lt;/fo:table-row&gt;&#10;\n+          &lt;/xsl:if&gt;&#10;\n+          &lt;fo:table-row&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block&gt;&lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+            &lt;fo:table-cell&gt;&#10;\n+              &lt;fo:block&gt;&lt;/fo:block&gt;&#10;\n+            &lt;/fo:table-cell&gt;&#10;\n+          &lt;/fo:table-row&gt;&#10;\n+        &lt;/xsl:for-each&gt;&#10;\n+      &lt;/fo:table-body&gt;&#10;\n+    &lt;/fo:table&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+  &#10;\n+  &lt;xsl:template name=&quot;resources&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+    &lt;fo:block font-size=&quot;11pt&quot; font-weight=&quot;bold&quot; space-after=&quot;3mm&quot;&gt;Resources&lt;/fo:block&gt;&#10;\n+    &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+      &lt;fo:block&gt;&lt;/fo:block&gt; &lt;!--            &lt;fo:block&gt;&#x2022;&lt;/fo:block&gt;--&gt;&#10;\n+      &lt;fo:block background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+  &lt;xsl:template name=&quot;groupResources&quot;&gt;&#10;\n+    &lt;xsl:param name=&quot;node&quot;/&gt;&#10;\n+    &lt;fo:block font-size=&quot;11pt&quot; font-weight=&quot;bold&quot; space-after=&quot;3mm&quot; space-before=&quot;5mm&quot;&gt;Group Resources&lt;/fo:block&gt;&#10;\n+    &lt;xsl:for-each select=&quot;$node&quot;&gt;&#10;\n+      &lt;fo:block&gt;&lt;/fo:block&gt; &lt;!--            &lt;fo:block&gt;&#x2022;&lt;/fo:block&gt;--&gt;&#10;\n+      &lt;fo:block background-color=&quot;(#ccccff)&quot;&gt;&#10;\n+        &lt;xsl:value-of select=&quot;@name&quot;/&gt;&#10;\n+      &lt;/fo:block&gt;&#10;\n+    &lt;/xsl:for-each&gt;&#10;\n+  &lt;/xsl:template&gt;&#10;\n+&#10;\n+&lt;/xsl:stylesheet&gt;&#10;\"/>\n+  \n+  <Report id=\"1\" name=\"test\" active=\"1\" template_name=\"sample\"/>\n   <ReportletConfInstance id=\"1\" Report_id=\"1\" \n                          serializedInstance='{\"@class\":\"org.apache.syncope.common.lib.report.UserReportletConf\",\"name\":\"testUserReportlet\",\"matchingCond\":null,\"plainAttrs\":[\"fullname\",\"gender\"],\"derAttrs\":[\"cn\"],\"virAttrs\":[\"virtualdata\"],\"features\":[\"key\",\"username\",\"workflowId\",\"status\",\"creationDate\",\"lastLoginDate\",\"changePwdDate\",\"passwordHistorySize\",\"failedLoginCount\",\"memberships\",\"resources\"]}'/>\n   <ReportExec Report_id=\"1\" id=\"1\" status=\"SUCCESS\" start=\"2012-02-26 15:40:04\" end=\"2012-02-26 15:41:04\"/>"},{"sha":"1c11b362a1cc6a44f3f1110d64cf48d876a1d067","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/NotificationDataBinderImpl.java","status":"modified","additions":12,"deletions":3,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FNotificationDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FNotificationDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FNotificationDataBinderImpl.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -22,15 +22,18 @@\n import org.apache.commons.collections4.CollectionUtils;\n import org.apache.commons.collections4.Predicate;\n import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.core.provisioning.api.data.NotificationDataBinder;\n import org.apache.syncope.common.lib.to.NotificationTO;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n import org.apache.syncope.core.persistence.api.entity.EntityFactory;\n import org.apache.syncope.core.persistence.api.entity.Notification;\n import org.apache.syncope.core.misc.spring.BeanUtils;\n import org.apache.syncope.core.persistence.api.dao.AnyTypeDAO;\n import org.apache.syncope.core.persistence.api.dao.MailTemplateDAO;\n import org.apache.syncope.core.persistence.api.entity.AnyAbout;\n import org.apache.syncope.core.persistence.api.entity.AnyType;\n+import org.apache.syncope.core.persistence.api.entity.MailTemplate;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n@@ -55,12 +58,11 @@ public class NotificationDataBinderImpl implements NotificationDataBinder {\n     @Override\n     public NotificationTO getNotificationTO(final Notification notification) {\n         NotificationTO result = new NotificationTO();\n-\n-        BeanUtils.copyProperties(notification, result, IGNORE_PROPERTIES);\n-\n         result.setKey(notification.getKey());\n         result.setTemplate(notification.getTemplate().getKey());\n \n+        BeanUtils.copyProperties(notification, result, IGNORE_PROPERTIES);\n+\n         for (AnyAbout about : notification.getAbouts()) {\n             result.getAbouts().put(about.getAnyType().getKey(), about.get());\n         }\n@@ -79,6 +81,13 @@ public Notification create(final NotificationTO notificationTO) {\n     public void update(final Notification notification, final NotificationTO notificationTO) {\n         BeanUtils.copyProperties(notificationTO, notification, IGNORE_PROPERTIES);\n \n+        MailTemplate template = mailTemplateDAO.find(notificationTO.getTemplate());\n+        if (template == null) {\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.RequiredValuesMissing);\n+            sce.getElements().add(\"template\");\n+            throw sce;\n+        }\n+        notification.setTemplate(template);\n         notification.setTemplate(mailTemplateDAO.find(notificationTO.getTemplate()));\n \n         // 1. add or update all (valid) abouts from TO"},{"sha":"930ece766a8dffae0ab738e69cd7086f1ccc3fee","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/ReportDataBinderImpl.java","status":"modified","additions":18,"deletions":1,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FReportDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FReportDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FReportDataBinderImpl.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -19,16 +19,20 @@\n package org.apache.syncope.core.provisioning.java.data;\n \n import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.report.AbstractReportletConf;\n import org.apache.syncope.core.provisioning.api.data.ReportDataBinder;\n import org.apache.syncope.common.lib.report.ReportletConf;\n import org.apache.syncope.common.lib.to.ReportExecTO;\n import org.apache.syncope.common.lib.to.ReportTO;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n import org.apache.syncope.core.persistence.api.dao.ReportExecDAO;\n import org.apache.syncope.core.persistence.api.entity.Report;\n import org.apache.syncope.core.persistence.api.entity.ReportExec;\n import org.apache.syncope.core.provisioning.api.job.JobNamer;\n import org.apache.syncope.core.misc.spring.BeanUtils;\n+import org.apache.syncope.core.persistence.api.dao.ReportTemplateDAO;\n+import org.apache.syncope.core.persistence.api.entity.ReportTemplate;\n import org.quartz.Scheduler;\n import org.quartz.SchedulerException;\n import org.quartz.Trigger;\n@@ -44,10 +48,13 @@ public class ReportDataBinderImpl implements ReportDataBinder {\n \n     private static final Logger LOG = LoggerFactory.getLogger(ReportDataBinder.class);\n \n-    private static final String[] IGNORE_REPORT_PROPERTIES = { \"key\", \"reportlets\", \"executions\" };\n+    private static final String[] IGNORE_REPORT_PROPERTIES = { \"key\", \"template\", \"reportlets\", \"executions\" };\n \n     private static final String[] IGNORE_REPORT_EXECUTION_PROPERTIES = { \"key\", \"report\", \"execResult\" };\n \n+    @Autowired\n+    private ReportTemplateDAO reportTemplateDAO;\n+\n     @Autowired\n     private ReportExecDAO reportExecDAO;\n \n@@ -58,6 +65,14 @@ public class ReportDataBinderImpl implements ReportDataBinder {\n     public void getReport(final Report report, final ReportTO reportTO) {\n         BeanUtils.copyProperties(reportTO, report, IGNORE_REPORT_PROPERTIES);\n \n+        ReportTemplate template = reportTemplateDAO.find(reportTO.getTemplate());\n+        if (template == null) {\n+            SyncopeClientException sce = SyncopeClientException.build(ClientExceptionType.RequiredValuesMissing);\n+            sce.getElements().add(\"template\");\n+            throw sce;\n+        }\n+        report.setTemplate(template);\n+\n         report.removeAllReportletConfs();\n         for (ReportletConf conf : reportTO.getReportletConfs()) {\n             report.add(conf);\n@@ -68,6 +83,8 @@ public void getReport(final Report report, final ReportTO reportTO) {\n     public ReportTO getReportTO(final Report report) {\n         ReportTO reportTO = new ReportTO();\n         reportTO.setKey(report.getKey());\n+        reportTO.setTemplate(report.getTemplate().getKey());\n+\n         BeanUtils.copyProperties(report, reportTO, IGNORE_REPORT_PROPERTIES);\n \n         reportTO.getReportletConfs().clear();"},{"sha":"44fde364926167c5022dca9ac5c90881c9e6171d","filename":"core/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/ReportServiceImpl.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportServiceImpl.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -73,7 +73,7 @@ public ReportTO read(final Long key) {\n     @Override\n     public Response exportExecutionResult(final Long executionKey, final ReportExecExportFormat fmt) {\n         final ReportExecExportFormat format = (fmt == null) ? ReportExecExportFormat.XML : fmt;\n-        final ReportExec reportExec = logic.getAndCheckReportExec(executionKey);\n+        final ReportExec reportExec = logic.getReportExec(executionKey);\n         StreamingOutput sout = new StreamingOutput() {\n \n             @Override"},{"sha":"820b53e09257596f7d2b4675fbdcb8f49c7f1e9f","filename":"core/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/ReportTemplateServiceImpl.java","status":"added","additions":98,"deletions":0,"changes":98,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportTemplateServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportTemplateServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FReportTemplateServiceImpl.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,98 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.core.rest.cxf.service;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.net.URI;\n+import java.util.List;\n+import javax.ws.rs.InternalServerErrorException;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.StreamingOutput;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.syncope.common.lib.to.ReportTemplateTO;\n+import org.apache.syncope.common.lib.types.ReportTemplateFormat;\n+import org.apache.syncope.common.rest.api.RESTHeaders;\n+import org.apache.syncope.common.rest.api.service.ReportTemplateService;\n+import org.apache.syncope.core.logic.ReportTemplateLogic;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class ReportTemplateServiceImpl extends AbstractServiceImpl implements ReportTemplateService {\n+\n+    @Autowired\n+    private ReportTemplateLogic logic;\n+\n+    @Override\n+    public Response create(final ReportTemplateTO reportTemplateTO) {\n+        ReportTemplateTO created = logic.create(reportTemplateTO.getKey());\n+        URI location = uriInfo.getAbsolutePathBuilder().path(String.valueOf(created.getKey())).build();\n+        return Response.created(location).\n+                header(RESTHeaders.RESOURCE_KEY, created.getKey()).\n+                build();\n+    }\n+\n+    @Override\n+    public ReportTemplateTO read(final String key) {\n+        return logic.read(key);\n+    }\n+\n+    @Override\n+    public List<ReportTemplateTO> list() {\n+        return logic.list();\n+    }\n+\n+    @Override\n+    public void delete(final String key) {\n+        logic.delete(key);\n+    }\n+\n+    @Override\n+    public Response getFormat(final String key, final ReportTemplateFormat format) {\n+        final String template = logic.getFormat(key, format);\n+        StreamingOutput sout = new StreamingOutput() {\n+\n+            @Override\n+            public void write(final OutputStream os) throws IOException {\n+                os.write(template.getBytes());\n+            }\n+        };\n+        return Response.ok(sout).\n+                type(MediaType.APPLICATION_XML).\n+                build();\n+    }\n+\n+    @Override\n+    public void setFormat(final String key, final ReportTemplateFormat format, final InputStream templateIn) {\n+        try {\n+            logic.setFormat(key, format, IOUtils.toString(templateIn));\n+        } catch (final IOException e) {\n+            LOG.error(\"While setting format {} for report template {}\", format, key, e);\n+            throw new InternalServerErrorException(\"Could not read entity\", e);\n+        }\n+    }\n+\n+    @Override\n+    public void removeFormat(final String key, final ReportTemplateFormat format) {\n+        logic.setFormat(key, format, null);\n+    }\n+}"},{"sha":"a64bcb80cca19995a6b05477588dda241a17a00b","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/AbstractITCase.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -70,6 +70,7 @@\n import org.apache.syncope.common.rest.api.service.MailTemplateService;\n import org.apache.syncope.common.rest.api.service.RealmService;\n import org.apache.syncope.common.rest.api.service.RelationshipTypeService;\n+import org.apache.syncope.common.rest.api.service.ReportTemplateService;\n import org.apache.syncope.common.rest.api.service.RoleService;\n import org.apache.syncope.common.rest.api.service.SchemaService;\n import org.apache.syncope.common.rest.api.service.SecurityQuestionService;\n@@ -188,6 +189,8 @@ public abstract class AbstractITCase {\n \n     protected static LoggerService loggerService;\n \n+    protected static ReportTemplateService reportTemplateService;\n+\n     protected static ReportService reportService;\n \n     protected static TaskService taskService;\n@@ -257,6 +260,7 @@ public static void restSetup() {\n         configurationService = adminClient.getService(ConfigurationService.class);\n         connectorService = adminClient.getService(ConnectorService.class);\n         loggerService = adminClient.getService(LoggerService.class);\n+        reportTemplateService = adminClient.getService(ReportTemplateService.class);\n         reportService = adminClient.getService(ReportService.class);\n         taskService = adminClient.getService(TaskService.class);\n         policyService = adminClient.getService(PolicyService.class);"},{"sha":"ff36409fcd808afdfb85775d37c95789a7621abd","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/ReportITCase.java","status":"modified","additions":10,"deletions":7,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportITCase.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -90,6 +90,7 @@ public void create() {\n         report.setName(\"testReportForCreate\" + getUUIDString());\n         report.getReportletConfs().add(new UserReportletConf(\"first\"));\n         report.getReportletConfs().add(new UserReportletConf(\"second\"));\n+        report.setTemplate(\"sample\");\n \n         report = createReport(report);\n         assertNotNull(report);\n@@ -104,9 +105,9 @@ public void create() {\n     public void update() {\n         ReportTO report = new ReportTO();\n         report.setName(\"testReportForUpdate\" + getUUIDString());\n-\n         report.getReportletConfs().add(new UserReportletConf(\"first\"));\n         report.getReportletConfs().add(new UserReportletConf(\"second\"));\n+        report.setTemplate(\"sample\");\n \n         report = createReport(report);\n         assertNotNull(report);\n@@ -126,6 +127,7 @@ public void delete() {\n         report.setName(\"testReportForDelete\" + getUUIDString());\n         report.getReportletConfs().add(new UserReportletConf(\"first\"));\n         report.getReportletConfs().add(new UserReportletConf(\"second\"));\n+        report.setTemplate(\"sample\");\n \n         report = createReport(report);\n         assertNotNull(report);\n@@ -203,13 +205,13 @@ public void executeAndExport() throws IOException {\n         reportTO.setActive(true);\n         reportService.update(reportTO);\n \n-        long execId = execute(reportTO.getKey());\n+        long execKey = execute(reportTO.getKey());\n \n-        checkExport(execId, ReportExecExportFormat.XML);\n-        checkExport(execId, ReportExecExportFormat.HTML);\n-        checkExport(execId, ReportExecExportFormat.PDF);\n-        checkExport(execId, ReportExecExportFormat.RTF);\n-        checkExport(execId, ReportExecExportFormat.CSV);\n+        checkExport(execKey, ReportExecExportFormat.XML);\n+        checkExport(execKey, ReportExecExportFormat.HTML);\n+        checkExport(execKey, ReportExecExportFormat.PDF);\n+        checkExport(execKey, ReportExecExportFormat.RTF);\n+        checkExport(execKey, ReportExecExportFormat.CSV);\n     }\n \n     @Test\n@@ -250,6 +252,7 @@ public void issueSYNCOPE43() {\n         ReportTO reportTO = new ReportTO();\n         reportTO.setName(\"issueSYNCOPE43\" + getUUIDString());\n         reportTO.setActive(true);\n+        reportTO.setTemplate(\"sample\");\n         reportTO = createReport(reportTO);\n         assertNotNull(reportTO);\n "},{"sha":"9b5a7ed6d26476fddbf707fc6ad0ddf71f9a7d82","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/ReportTemplateITCase.java","status":"added","additions":154,"deletions":0,"changes":154,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportTemplateITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f5682a72b3171fa0f4cff234a33b073b8175cccc/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportTemplateITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FReportTemplateITCase.java?ref=f5682a72b3171fa0f4cff234a33b073b8175cccc","patch":"@@ -0,0 +1,154 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.core;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.List;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.to.ReportTemplateTO;\n+import org.apache.syncope.common.lib.types.ClientExceptionType;\n+import org.apache.syncope.common.lib.types.ReportTemplateFormat;\n+import org.apache.syncope.fit.AbstractITCase;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runners.MethodSorters;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+@FixMethodOrder(MethodSorters.JVM)\n+public class ReportTemplateITCase extends AbstractITCase {\n+\n+    @Test\n+    public void read() {\n+        ReportTemplateTO reportTemplateTO = reportTemplateService.read(\"sample\");\n+        assertNotNull(reportTemplateTO);\n+    }\n+\n+    @Test\n+    public void list() {\n+        List<ReportTemplateTO> reportTemplateTOs = reportTemplateService.list();\n+        assertNotNull(reportTemplateTOs);\n+        assertFalse(reportTemplateTOs.isEmpty());\n+        for (ReportTemplateTO instance : reportTemplateTOs) {\n+            assertNotNull(instance);\n+        }\n+    }\n+\n+    @Test\n+    public void crud() throws IOException {\n+        final String key = getUUIDString();\n+\n+        // 1. create (empty) report template\n+        ReportTemplateTO reportTemplateTO = new ReportTemplateTO();\n+        reportTemplateTO.setKey(key);\n+\n+        Response response = reportTemplateService.create(reportTemplateTO);\n+        assertEquals(201, response.getStatus());\n+\n+        // 2. attempt to read HTML and CSV -> fail\n+        try {\n+            reportTemplateService.getFormat(key, ReportTemplateFormat.HTML);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+        try {\n+            reportTemplateService.getFormat(key, ReportTemplateFormat.CSV);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+\n+        // 3. set CSV\n+        String csvTemplate =\n+                \"<xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'></xsl:stylesheet>\";\n+        reportTemplateService.setFormat(\n+                key, ReportTemplateFormat.CSV, IOUtils.toInputStream(csvTemplate));\n+\n+        response = reportTemplateService.getFormat(key, ReportTemplateFormat.CSV);\n+        assertEquals(200, response.getStatus());\n+        assertTrue(response.getMediaType().toString().startsWith(MediaType.APPLICATION_XML));\n+        assertTrue(response.getEntity() instanceof InputStream);\n+        assertEquals(csvTemplate, IOUtils.toString((InputStream) response.getEntity()));\n+\n+        // 3. set HTML\n+        String htmlTemplate =\n+                \"<xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'></xsl:stylesheet>\";\n+        reportTemplateService.setFormat(\n+                key, ReportTemplateFormat.HTML, IOUtils.toInputStream(htmlTemplate));\n+\n+        response = reportTemplateService.getFormat(key, ReportTemplateFormat.HTML);\n+        assertEquals(200, response.getStatus());\n+        assertTrue(response.getMediaType().toString().startsWith(MediaType.APPLICATION_XML));\n+        assertTrue(response.getEntity() instanceof InputStream);\n+        assertEquals(htmlTemplate, IOUtils.toString((InputStream) response.getEntity()));\n+\n+        // 4. remove HTML\n+        reportTemplateService.removeFormat(key, ReportTemplateFormat.HTML);\n+\n+        try {\n+            reportTemplateService.getFormat(key, ReportTemplateFormat.HTML);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+\n+        response = reportTemplateService.getFormat(key, ReportTemplateFormat.CSV);\n+        assertEquals(200, response.getStatus());\n+        assertTrue(response.getMediaType().toString().startsWith(MediaType.APPLICATION_XML));\n+        assertTrue(response.getEntity() instanceof InputStream);\n+        assertEquals(csvTemplate, IOUtils.toString((InputStream) response.getEntity()));\n+\n+        // 5. remove report template\n+        reportTemplateService.delete(key);\n+\n+        try {\n+            reportTemplateService.read(key);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+        try {\n+            reportTemplateService.getFormat(key, ReportTemplateFormat.HTML);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+        try {\n+            reportTemplateService.getFormat(key, ReportTemplateFormat.CSV);\n+            fail();\n+        } catch (SyncopeClientException e) {\n+            assertEquals(ClientExceptionType.NotFound, e.getType());\n+        }\n+    }\n+}"}]}