{"sha":"c3a016d0f16b610726ebd07cf997ab294595b0b5","node_id":"C_kwDOJfYA1toAKGMzYTAxNmQwZjE2YjYxMDcyNmViZDA3Y2Y5OTdhYjI5NDU5NWIwYjU","commit":{"author":{"name":"Elena Renzi","email":"elena.renzi@gmail.com","date":"2022-02-01T15:05:41Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2022-02-01T15:05:41Z"},"message":"[SYNCOPE-1657] Changes to Topology for allowing to specify a resource name during clone (#306)","tree":{"sha":"1d317e4ccc76aabec801c7999f8521cfeb9407f6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/1d317e4ccc76aabec801c7999f8521cfeb9407f6"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c3a016d0f16b610726ebd07cf997ab294595b0b5","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh+UxFCRBK7hj4Ov3rIwAADIIIABCgQLV4ZLcJmn9CeEU5xyZT\nI0VIToUC0qjYzdqyIbkqR051zdxNnD4erbTMHb2J88ilps4+kRcK0D4rouGlkjJR\npYnXmZos2llsHxL1Z3IJDgJvs57cqFFVtpT04wsvuHIeycHSvd9Y6fxxZf75CI6M\npWSBvORHwQHTl1XGiViszd+dBIYNcjm+sF8MYlABGEQQ0tvwJC0DhLZQCehXvDEq\nCTHaB7A1CxCpGnse15ZEEc8S2r5JeXKVvJVmWU51VKaxSZEoHfuKtJu9+HM9i8i/\ngd/jtiYZM5W79T4tP7+62715zTohzSXP+raFQkc0gbHv90WvqZVgDg467u6ZA6A=\n=p0Wd\n-----END PGP SIGNATURE-----\n","payload":"tree 1d317e4ccc76aabec801c7999f8521cfeb9407f6\nparent c1087c525b65258fdea224a85acb8fda5eb32384\nauthor Elena Renzi <elena.renzi@gmail.com> 1643727941 +0100\ncommitter GitHub <noreply@github.com> 1643727941 +0100\n\n[SYNCOPE-1657] Changes to Topology for allowing to specify a resource name during clone (#306)\n\n"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c3a016d0f16b610726ebd07cf997ab294595b0b5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c3a016d0f16b610726ebd07cf997ab294595b0b5","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c3a016d0f16b610726ebd07cf997ab294595b0b5/comments","author":{"login":"eeleren","id":11387305,"node_id":"MDQ6VXNlcjExMzg3MzA1","avatar_url":"https://avatars.githubusercontent.com/u/11387305?v=4","gravatar_id":"","url":"https://api.github.com/users/eeleren","html_url":"https://github.com/eeleren","followers_url":"https://api.github.com/users/eeleren/followers","following_url":"https://api.github.com/users/eeleren/following{/other_user}","gists_url":"https://api.github.com/users/eeleren/gists{/gist_id}","starred_url":"https://api.github.com/users/eeleren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eeleren/subscriptions","organizations_url":"https://api.github.com/users/eeleren/orgs","repos_url":"https://api.github.com/users/eeleren/repos","events_url":"https://api.github.com/users/eeleren/events{/privacy}","received_events_url":"https://api.github.com/users/eeleren/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"c1087c525b65258fdea224a85acb8fda5eb32384","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c1087c525b65258fdea224a85acb8fda5eb32384","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c1087c525b65258fdea224a85acb8fda5eb32384"}],"stats":{"total":26,"additions":13,"deletions":13},"files":[{"sha":"3fc6894e14d99e888b0377181743c5ed83d37945","filename":"client/idm/console/src/main/java/org/apache/syncope/client/console/topology/TopologyTogglePanel.java","status":"modified","additions":7,"deletions":13,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.java?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -41,7 +41,6 @@\n import org.apache.syncope.client.console.wicket.markup.html.bootstrap.dialog.BaseModal;\n import org.apache.syncope.client.console.wicket.markup.html.form.IndicatingOnConfirmAjaxLink;\n import org.apache.syncope.client.ui.commons.wizards.AjaxWizard;\n-import org.apache.syncope.client.console.wizards.resources.AbstractResourceWizardBuilder;\n import org.apache.syncope.client.console.wizards.resources.ResourceProvision;\n import org.apache.syncope.client.console.wizards.resources.ResourceProvisionPanel;\n import org.apache.syncope.client.ui.commons.pages.BaseWebPage;\n@@ -627,15 +626,16 @@ public String getAjaxIndicatorMarkupId() {\n         fragment.add(history);\n \n         // [SYNCOPE-1161] - Option to clone a resource\n-        AjaxLink<String> clone = new IndicatingOnConfirmAjaxLink<>(\"clone\", \"confirmClone\", true) {\n+        AjaxLink<String> clone = new IndicatingAjaxLink<>(\"clone\") {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n                 try {\n                     ResourceTO resource = ResourceRestClient.read(node.getKey());\n-                    resource.setKey(\"Copy of \" + resource.getKey());\n+                    resource.setKey(\"Copy of \" + node.getKey());\n+\n                     // reset some resource objects keys\n                     if (resource.getOrgUnit() != null) {\n                         resource.getOrgUnit().setKey(null);\n@@ -653,18 +653,12 @@ public void onClick(final AjaxRequestTarget target) {\n                         }\n                         provision.getVirSchemas().clear();\n                     }\n-                    ResourceRestClient.create(resource);\n+                    target.add(modal.setContent(new ResourceWizardBuilder(resource, pageRef).\n+                            build(BaseModal.CONTENT_ID, AjaxWizard.Mode.CREATE)));\n \n-                    // refresh Topology\n-                    send(pageRef.getPage(), Broadcast.DEPTH, new AbstractResourceWizardBuilder.CreateEvent(\n-                        resource.getKey(),\n-                        resource.getKey(),\n-                        TopologyNode.Kind.RESOURCE,\n-                        resource.getConnector(),\n-                        target));\n+                    modal.header(new Model<>(MessageFormat.format(getString(\"resource.clone\"), node.getKey())));\n+                    modal.show(true);\n \n-                    SyncopeConsoleSession.get().success(getString(Constants.OPERATION_SUCCEEDED));\n-                    toggle(target, false);\n                 } catch (SyncopeClientException e) {\n                     LOG.error(\"While cloning resource {}\", node.getKey(), e);\n                     SyncopeConsoleSession.get().onException(e);"},{"sha":"22cce2d2ec1e69915eacaa0a2bc52fe5c7898ba2","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -23,6 +23,7 @@ connector.menu.history=Configuration history\n \n resource.new=New resource\n resource.edit=Edit resource {0}\n+resource.clone=Clone resource {0}\n resource.menu.add=Add new resource\n resource.menu.remove=Remove resource\n resource.menu.edit=Edit resource"},{"sha":"838f3b30f63bca466aaf32d96c053839e399478a","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel_fr_CA.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_fr_CA.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_fr_CA.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_fr_CA.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -22,6 +22,7 @@ connector.menu.edit=Modifier le connecteur\n connector.menu.history=Historique de configuration\n resource.new=Nouvelle ressource\n resource.edit=Modifier la ressource {0}\n+resource.clone=Cloner la ressource {0}\n resource.menu.add=Ajouter une nouvelle ressource\n resource.menu.remove=Supprimer une ressource\n resource.menu.edit=Modifier la ressource"},{"sha":"ec334246482dc870a6fdad99babafc793129a3d0","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_it.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -23,6 +23,7 @@ connector.menu.history=Storico delle configurazioni\n \n resource.new=Nuova risorsa\n resource.edit=Modifica risorsa {0}\n+resource.clone=Duplica risorsa {0}\n resource.menu.add=Aggiungi nuova risorsa\n resource.menu.remove=Rimuovi risorsa\n resource.menu.edit=Modifica risorsa"},{"sha":"0b70bf0e62cbff1ed9226c898df640bff68bc0db","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel_ja.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ja.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ja.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ja.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -23,6 +23,7 @@ connector.menu.history=\\u8a2d\\u5b9a\\u5c65\\u6b74\n \n resource.new=\\u65b0\\u3057\\u3044\\u30ea\\u30bd\\u30fc\\u30b9\n resource.edit=\\u30ea\\u30bd\\u30fc\\u30b9 {0} \\u3092\\u7de8\\u96c6\n+resource.clone=\\u30ea\\u30bd\\u30fc\\u30b9\\u3092\\u8907\\u88fd {0}\n resource.menu.add=\\u65b0\\u3057\\u3044\\u30ea\\u30bd\\u30fc\\u30b9\\u3092\\u8ffd\\u52a0\n resource.menu.remove=\\u30ea\\u30bd\\u30fc\\u30b9\\u3092\\u524a\\u9664\n resource.menu.edit=\\u30ea\\u30bd\\u30fc\\u30b9\\u3092\\u7de8\\u96c6"},{"sha":"ee13fed7d8b8451fadc82173a14e9683ab3b4bfd","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel_pt_BR.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_pt_BR.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -23,6 +23,7 @@ connector.menu.history=Hist\\u00f3rico de configura\\u00e7\\u00e3o\n \n resource.new=Novo recurso\n resource.edit=Alterar recurso {0}\n+resource.clone=Clone recurso {0}\n resource.menu.add=Adicionar novo recurso\n resource.menu.remove=Retire recurso\n resource.menu.edit=Alterar recurso"},{"sha":"fc2b246ec0131d40a07a91da255f0f9acb262021","filename":"client/idm/console/src/main/resources/org/apache/syncope/client/console/topology/TopologyTogglePanel_ru.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c3a016d0f16b610726ebd07cf997ab294595b0b5/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidm%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftopology%2FTopologyTogglePanel_ru.properties?ref=c3a016d0f16b610726ebd07cf997ab294595b0b5","patch":"@@ -24,6 +24,7 @@ connector.menu.history=\\u0418\\u0441\\u0442\\u043e\\u0440\\u0438\\u044f \\u043a\\u043e\\u\n \n resource.new=\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\n resource.edit=\\u0418\\u0437\\u043c\\u0435\\u043d\\u0438\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 {0}\n+resource.clone=\\u0414\\u0443\\u0431\\u043b\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 {0}\n resource.menu.add=\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\n resource.menu.remove=\\u0423\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\n resource.menu.edit=\\u0418\\u0437\\u043c\\u0435\\u043d\\u0438\\u0442\\u044c \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441"}]}