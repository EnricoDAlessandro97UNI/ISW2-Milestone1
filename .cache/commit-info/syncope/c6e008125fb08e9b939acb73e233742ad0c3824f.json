{"sha":"c6e008125fb08e9b939acb73e233742ad0c3824f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmM2ZTAwODEyNWZiMDhlOWI5MzlhY2I3M2UyMzM3NDJhZDBjMzgyNGY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-11-10T17:54:51Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-11-10T17:54:51Z"},"message":"[SYNCOPE-729] Not considering CREATE or UPDATE but only SEARCH during getObject","tree":{"sha":"fc0819152c98b75762c1a5bb920323b9fe9d94f7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/fc0819152c98b75762c1a5bb920323b9fe9d94f7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c6e008125fb08e9b939acb73e233742ad0c3824f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c6e008125fb08e9b939acb73e233742ad0c3824f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c6e008125fb08e9b939acb73e233742ad0c3824f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c6e008125fb08e9b939acb73e233742ad0c3824f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"573a4e3035f444487b67b6cc1bed94807336a05a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/573a4e3035f444487b67b6cc1bed94807336a05a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/573a4e3035f444487b67b6cc1bed94807336a05a"}],"stats":{"total":59,"additions":5,"deletions":54},"files":[{"sha":"869d7d6e4226a6fa636af01962404382f71eb13d","filename":"core/src/main/java/org/apache/syncope/core/propagation/Connector.java","status":"modified","additions":0,"deletions":15,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnector.java?ref=c6e008125fb08e9b939acb73e233742ad0c3824f","patch":"@@ -22,7 +22,6 @@\n import java.util.List;\n import java.util.Set;\n import org.apache.syncope.common.types.PropagationMode;\n-import org.apache.syncope.common.types.ResourceOperation;\n import org.apache.syncope.core.persistence.beans.AbstractMappingItem;\n import org.apache.syncope.core.persistence.beans.ConnInstance;\n import org.identityconnectors.framework.common.objects.Attribute;\n@@ -118,20 +117,6 @@ void delete(PropagationMode propagationMode, ObjectClass objectClass,\n      */\n     ConnectorObject getObject(ObjectClass objectClass, Uid uid, OperationOptions options);\n \n-    /**\n-     * Get remote object used by the propagation manager in order to choose for a create (object doesn't exist) or an\n-     * update (object exists).\n-     *\n-     * @param propagationMode propagation mode\n-     * @param operationType resource operation type\n-     * @param objectClass ConnId's object class\n-     * @param uid ConnId's Uid\n-     * @param options ConnId's OperationOptions\n-     * @return ConnId's connector object for given uid\n-     */\n-    ConnectorObject getObject(PropagationMode propagationMode, ResourceOperation operationType, ObjectClass objectClass,\n-            Uid uid, OperationOptions options);\n-\n     /**\n      * Search for remote objects.\n      *"},{"sha":"54b708411b8c5e8f2d8fd5bd9bd35a1a8eb0e037","filename":"core/src/main/java/org/apache/syncope/core/propagation/impl/AbstractPropagationTaskExecutor.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java?ref=c6e008125fb08e9b939acb73e233742ad0c3824f","patch":"@@ -491,8 +491,7 @@ protected ConnectorObject getRemoteObject(final PropagationTask task, final Conn\n \n         ConnectorObject obj = null;\n         try {\n-            obj = connector.getObject(task.getPropagationMode(),\n-                    task.getPropagationOperation(),\n+            obj = connector.getObject(\n                     new ObjectClass(task.getObjectClassName()),\n                     new Uid(accountId),\n                     connector.getOperationOptions(AttributableUtil.getInstance(task.getSubjectType())."},{"sha":"fb3c872101e14c92fdbcc91e5e96a4f259b87c3c","filename":"core/src/main/java/org/apache/syncope/core/propagation/impl/ConnectorFacadeProxy.java","status":"modified","additions":4,"deletions":37,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FConnectorFacadeProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c6e008125fb08e9b939acb73e233742ad0c3824f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FConnectorFacadeProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FConnectorFacadeProxy.java?ref=c6e008125fb08e9b939acb73e233742ad0c3824f","patch":"@@ -30,7 +30,6 @@\n import org.apache.syncope.common.types.ConnConfProperty;\n import org.apache.syncope.common.types.ConnectorCapability;\n import org.apache.syncope.common.types.PropagationMode;\n-import org.apache.syncope.common.types.ResourceOperation;\n import org.apache.syncope.core.connid.ConnPoolConfUtil;\n import org.apache.syncope.core.persistence.beans.AbstractMappingItem;\n import org.apache.syncope.core.persistence.beans.ConnInstance;\n@@ -305,44 +304,10 @@ public SyncToken getLatestSyncToken(final ObjectClass objectClass) {\n \n     @Override\n     public ConnectorObject getObject(final ObjectClass objectClass, final Uid uid, final OperationOptions options) {\n-        return getObject(null, null, objectClass, uid, options);\n-    }\n-\n-    @Override\n-    public ConnectorObject getObject(final PropagationMode propagationMode, final ResourceOperation operationType,\n-            final ObjectClass objectClass, final Uid uid, final OperationOptions options) {\n-\n         Future<ConnectorObject> future = null;\n \n         if (activeConnInstance.getCapabilities().contains(ConnectorCapability.SEARCH)) {\n-            if (operationType == null) {\n-                future = asyncFacade.getObject(connector, objectClass, uid, options);\n-            } else {\n-                switch (operationType) {\n-                    case CREATE:\n-                        if (propagationMode == null || (propagationMode == PropagationMode.ONE_PHASE\n-                                ? activeConnInstance.getCapabilities().\n-                                contains(ConnectorCapability.ONE_PHASE_CREATE)\n-                                : activeConnInstance.getCapabilities().\n-                                contains(ConnectorCapability.TWO_PHASES_CREATE))) {\n-\n-                            future = asyncFacade.getObject(connector, objectClass, uid, options);\n-                        }\n-                        break;\n-                    case UPDATE:\n-                        if (propagationMode == null || (propagationMode == PropagationMode.ONE_PHASE\n-                                ? activeConnInstance.getCapabilities().\n-                                contains(ConnectorCapability.ONE_PHASE_UPDATE)\n-                                : activeConnInstance.getCapabilities().\n-                                contains(ConnectorCapability.TWO_PHASES_UPDATE))) {\n-\n-                            future = asyncFacade.getObject(connector, objectClass, uid, options);\n-                        }\n-                        break;\n-                    default:\n-                        future = asyncFacade.getObject(connector, objectClass, uid, options);\n-                }\n-            }\n+            future = asyncFacade.getObject(connector, objectClass, uid, options);\n         } else {\n             LOG.info(\"Search was attempted, although the connector only has these capabilities: {}. No action.\",\n                     activeConnInstance.getCapabilities());\n@@ -351,7 +316,9 @@ public ConnectorObject getObject(final PropagationMode propagationMode, final Re\n         try {\n             return future == null ? null : future.get(activeConnInstance.getConnRequestTimeout(), TimeUnit.SECONDS);\n         } catch (java.util.concurrent.TimeoutException e) {\n-            future.cancel(true);\n+            if (future != null) {\n+                future.cancel(true);\n+            }\n             throw new TimeoutException(\"Request timeout\");\n         } catch (Exception e) {\n             LOG.error(\"Connector request execution failure\", e);"}]}