{"sha":"7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","node_id":"C_kwDOJfYA1toAKDdlMzBlZmU2ZmE3MjMyOWFlNGM5NWJhNTMxNWE3NGM5MTdhNWM0ZmM","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-14T06:37:55Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-14T06:37:55Z"},"message":"Upgrading CAS","tree":{"sha":"f4e0d7d8d0a6723e891cf67350c590c39b373ddc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/f4e0d7d8d0a6723e891cf67350c590c39b373ddc"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"9f665dede10ee06f63ed39172687c014508466d4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9f665dede10ee06f63ed39172687c014508466d4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9f665dede10ee06f63ed39172687c014508466d4"}],"stats":{"total":28,"additions":13,"deletions":15},"files":[{"sha":"244cc3fcb0653c79970453d7e1374d7ff7672dc2","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAUserDAO.java","status":"modified","additions":8,"deletions":14,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAUserDAO.java?ref=7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","patch":"@@ -274,23 +274,17 @@ public UMembership findMembership(final String key) {\n     protected List<PasswordPolicy> getPasswordPolicies(final User user) {\n         List<PasswordPolicy> policies = new ArrayList<>();\n \n-        PasswordPolicy policy;\n-\n         // add resource policies\n-        for (ExternalResource resource : findAllResources(user)) {\n-            policy = resource.getPasswordPolicy();\n-            if (policy != null) {\n-                policies.add(policy);\n-            }\n-        }\n+        findAllResources(user).\n+                forEach(resource -> Optional.ofNullable(resource.getPasswordPolicy()).\n+                filter(p -> !policies.contains(p)).\n+                ifPresent(policies::add));\n \n         // add realm policies\n-        for (Realm realm : realmDAO.findAncestors(user.getRealm())) {\n-            policy = realm.getPasswordPolicy();\n-            if (policy != null) {\n-                policies.add(policy);\n-            }\n-        }\n+        realmDAO.findAncestors(user.getRealm()).\n+                forEach(realm -> Optional.ofNullable(realm.getPasswordPolicy()).\n+                filter(p -> !policies.contains(p)).\n+                ifPresent(policies::add));\n \n         return policies;\n     }"},{"sha":"6eb64c69ed7fc59ee14fdac78239334262ce6e6c","filename":"core/spring/src/main/java/org/apache/syncope/core/spring/security/DefaultPasswordGenerator.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultPasswordGenerator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultPasswordGenerator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultPasswordGenerator.java?ref=7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","patch":"@@ -93,6 +93,10 @@ protected DefaultPasswordRuleConf merge(final List<DefaultPasswordRuleConf> defa\n                 result.setMaxLength(ruleConf.getMaxLength());\n             }\n \n+            if (ruleConf.getAlphabetical() > result.getAlphabetical()) {\n+                result.setAlphabetical(ruleConf.getAlphabetical());\n+            }\n+\n             if (ruleConf.getUppercase() > result.getUppercase()) {\n                 result.setUppercase(ruleConf.getUppercase());\n             }"},{"sha":"67e4ae9032d61c360b46a74e568e2c021139493d","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7e30efe6fa72329ae4c95ba5315a74c917a5c4fc/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=7e30efe6fa72329ae4c95ba5315a74c917a5c4fc","patch":"@@ -446,7 +446,7 @@ under the License.\n \n     <pac4j.version>5.3.1</pac4j.version>\n \n-    <cas.version>6.5.2</cas.version>\n+    <cas.version>6.5.3</cas.version>\n     <cas-client.version>3.6.4</cas-client.version>\n \n     <h2.version>2.1.212</h2.version>"}]}