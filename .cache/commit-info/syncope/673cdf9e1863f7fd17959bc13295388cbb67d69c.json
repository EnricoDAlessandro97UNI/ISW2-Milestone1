{"sha":"673cdf9e1863f7fd17959bc13295388cbb67d69c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjY3M2NkZjllMTg2M2Y3ZmQxNzk1OWJjMTMyOTUzODhjYmI2N2Q2OWM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-03-27T15:10:07Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2017-03-31T13:38:26Z"},"message":"[SYNCOPE-1041] Integration tests","tree":{"sha":"175e7e9f4a62ceb7991a0c63815dfd2cf36bd670","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/175e7e9f4a62ceb7991a0c63815dfd2cf36bd670"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/673cdf9e1863f7fd17959bc13295388cbb67d69c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/673cdf9e1863f7fd17959bc13295388cbb67d69c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/673cdf9e1863f7fd17959bc13295388cbb67d69c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/673cdf9e1863f7fd17959bc13295388cbb67d69c/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"3c11720c601b715e82949b2116afd75d6e782c1a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3c11720c601b715e82949b2116afd75d6e782c1a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3c11720c601b715e82949b2116afd75d6e782c1a"}],"stats":{"total":647,"additions":647,"deletions":0},"files":[{"sha":"fbd0bc569ebff0b8b319a6b5c915c4ec32819b7e","filename":"ext/saml2sp/logic/src/main/java/org/apache/syncope/core/logic/SAML2SPLogic.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSAML2SPLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSAML2SPLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fsaml2sp%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FSAML2SPLogic.java?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -560,6 +560,9 @@ public SAML2RequestTO createLogoutRequest(final String accessToken, final String\n \n         // 2. look for IdP\n         String idpEntityID = (String) consumer.getJwtClaims().getClaim(JWT_CLAIM_IDP_ENTITYID);\n+        if (idpEntityID == null) {\n+            throw new NotFoundException(\"No SAML 2.0 IdP information found in the access token\");\n+        }\n         SAML2IdPEntity idp = cache.get(idpEntityID);\n         if (idp == null) {\n             throw new NotFoundException(\"SAML 2.0 IdP '\" + idpEntityID + \"'\");"},{"sha":"4c069671ff534cd74a13b09dc15ae28bbe704e5c","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/AbstractITCase.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FAbstractITCase.java?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -71,6 +71,8 @@\n import org.apache.syncope.common.rest.api.service.RelationshipTypeService;\n import org.apache.syncope.common.rest.api.service.ReportTemplateService;\n import org.apache.syncope.common.rest.api.service.RoleService;\n+import org.apache.syncope.common.rest.api.service.SAML2IdPService;\n+import org.apache.syncope.common.rest.api.service.SAML2SPService;\n import org.apache.syncope.common.rest.api.service.SchemaService;\n import org.apache.syncope.common.rest.api.service.SecurityQuestionService;\n import org.apache.syncope.common.rest.api.service.SyncopeService;\n@@ -209,6 +211,10 @@ public abstract class AbstractITCase {\n \n     protected static CamelRouteService camelRouteService;\n \n+    protected static SAML2SPService saml2SpService;\n+\n+    protected static SAML2IdPService saml2IdPService;\n+\n     @BeforeClass\n     public static void securitySetup() {\n         InputStream propStream = null;\n@@ -267,6 +273,8 @@ public static void restSetup() {\n         schemaService = adminClient.getService(SchemaService.class);\n         securityQuestionService = adminClient.getService(SecurityQuestionService.class);\n         camelRouteService = adminClient.getService(CamelRouteService.class);\n+        saml2SpService = adminClient.getService(SAML2SPService.class);\n+        saml2IdPService = adminClient.getService(SAML2IdPService.class);\n     }\n \n     protected static String getUUIDString() {"},{"sha":"88c4473f620fbb86fe799767a038717477e870b7","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/SAML2SPDetector.java","status":"added","additions":52,"deletions":0,"changes":52,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FSAML2SPDetector.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FSAML2SPDetector.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2FSAML2SPDetector.java?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit;\n+\n+import org.apache.syncope.client.lib.AnonymousAuthenticationHandler;\n+import org.apache.syncope.client.lib.SyncopeClientFactoryBean;\n+import org.apache.syncope.common.rest.api.service.SAML2SPService;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class SAML2SPDetector {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(SAML2SPDetector.class);\n+\n+    private static Boolean ENABLED;\n+\n+    public static boolean isSAML2SPAvailable() {\n+        synchronized (LOG) {\n+            if (ENABLED == null) {\n+                try {\n+                    new SyncopeClientFactoryBean().\n+                            setAddress(AbstractITCase.ADDRESS).\n+                            setContentType(SyncopeClientFactoryBean.ContentType.XML).\n+                            create(new AnonymousAuthenticationHandler(\n+                                    AbstractITCase.ANONYMOUS_UNAME, AbstractITCase.ANONYMOUS_KEY)).\n+                            getService(SAML2SPService.class).getMetadata(\"http://localhost:9080/syncope\");\n+                    ENABLED = true;\n+                } catch (Exception e) {\n+                    // ignore\n+                    ENABLED = false;\n+                }\n+            }\n+        }\n+        return ENABLED;\n+    }\n+}"},{"sha":"5e1647b6fe45d8995ae5934ab324da99d84d44a7","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/SAML2ITCase.java","status":"added","additions":157,"deletions":0,"changes":157,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSAML2ITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSAML2ITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FSAML2ITCase.java?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -0,0 +1,157 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.fit.core;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.nio.charset.StandardCharsets;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.Response;\n+import org.apache.commons.codec.binary.Base64;\n+import org.apache.commons.collections4.IterableUtils;\n+import org.apache.commons.collections4.Predicate;\n+import org.apache.cxf.jaxrs.client.WebClient;\n+import org.apache.cxf.staxutils.StaxUtils;\n+import org.apache.syncope.client.lib.AnonymousAuthenticationHandler;\n+import org.apache.syncope.client.lib.SyncopeClient;\n+import org.apache.syncope.client.lib.SyncopeClientFactoryBean;\n+import org.apache.syncope.common.lib.to.MappingItemTO;\n+import org.apache.syncope.common.lib.to.SAML2IdPTO;\n+import org.apache.syncope.common.lib.to.SAML2RequestTO;\n+import org.apache.syncope.common.rest.api.service.SAML2SPService;\n+import org.apache.syncope.fit.AbstractITCase;\n+import org.apache.syncope.fit.SAML2SPDetector;\n+import org.junit.AfterClass;\n+import org.junit.Assume;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.w3c.dom.Document;\n+\n+public class SAML2ITCase extends AbstractITCase {\n+\n+    private static SyncopeClient anonymous;\n+\n+    @BeforeClass\n+    public static void setupAnonymousClient() {\n+        anonymous = new SyncopeClientFactoryBean().\n+                setAddress(ADDRESS).\n+                create(new AnonymousAuthenticationHandler(ANONYMOUS_UNAME, ANONYMOUS_KEY));\n+    }\n+\n+    @BeforeClass\n+    public static void importFromIdPMetadata() {\n+        Assume.assumeTrue(SAML2SPDetector.isSAML2SPAvailable());\n+\n+        assertTrue(saml2IdPService.list().isEmpty());\n+\n+        WebClient.client(saml2IdPService).\n+                accept(MediaType.APPLICATION_XML_TYPE).\n+                type(MediaType.APPLICATION_XML_TYPE);\n+        try {\n+            saml2IdPService.importFromMetadata(SAML2ITCase.class.getResourceAsStream(\"/ssocircle.xml\"));\n+            saml2IdPService.importFromMetadata(SAML2ITCase.class.getResourceAsStream(\"/testshib-providers.xml\"));\n+        } catch (Exception e) {\n+            LOG.error(\"Unexpected error while importing SAML 2.0 IdP metadata\", e);\n+        } finally {\n+            WebClient.client(saml2IdPService).\n+                    accept(clientFactory.getContentType().getMediaType()).\n+                    type(clientFactory.getContentType().getMediaType());\n+        }\n+\n+        assertEquals(2, saml2IdPService.list().size());\n+    }\n+\n+    @AfterClass\n+    public static void clearIdPs() {\n+        Assume.assumeTrue(SAML2SPDetector.isSAML2SPAvailable());\n+\n+        for (SAML2IdPTO idp : saml2IdPService.list()) {\n+            saml2IdPService.delete(idp.getKey());\n+        }\n+    }\n+\n+    @Test\n+    public void spMetadata() {\n+        Assume.assumeTrue(SAML2SPDetector.isSAML2SPAvailable());\n+\n+        try {\n+            SAML2SPService service = anonymous.getService(SAML2SPService.class);\n+            WebClient.client(service).accept(MediaType.APPLICATION_XML_TYPE);\n+            Response response = service.getMetadata(ADDRESS);\n+            assertNotNull(response);\n+\n+            Document responseDoc = StaxUtils.read(\n+                    new InputStreamReader((InputStream) response.getEntity(), StandardCharsets.UTF_8));\n+            assertEquals(\"EntityDescriptor\", responseDoc.getDocumentElement().getLocalName());\n+            assertEquals(\"urn:oasis:names:tc:SAML:2.0:metadata\", responseDoc.getDocumentElement().getNamespaceURI());\n+        } catch (Exception e) {\n+            LOG.error(\"During SAML 2.0 SP metadata parsing\", e);\n+            fail(e.getMessage());\n+        }\n+    }\n+\n+    @Test\n+    public void createLoginRequest() {\n+        SAML2RequestTO loginRequest = anonymous.getService(SAML2SPService.class).\n+                createLoginRequest(ADDRESS, \"https://idp.testshib.org/idp/shibboleth\");\n+        assertNotNull(loginRequest);\n+\n+        assertEquals(\"https://idp.testshib.org/idp/profile/SAML2/POST/SSO\", loginRequest.getIdpServiceAddress());\n+        assertNotNull(loginRequest.getContent());\n+        assertTrue(Base64.isBase64(loginRequest.getContent()));\n+        assertNotNull(loginRequest.getRelayState());\n+    }\n+\n+    @Test\n+    public void setIdPMapping() {\n+        SAML2IdPTO ssoCircle = IterableUtils.find(saml2IdPService.list(), new Predicate<SAML2IdPTO>() {\n+\n+            @Override\n+            public boolean evaluate(final SAML2IdPTO object) {\n+                return \"https://idp.ssocircle.com\".equals(object.getEntityID());\n+            }\n+        });\n+        assertNotNull(ssoCircle);\n+        assertFalse(ssoCircle.getMappingItems().isEmpty());\n+        assertNotNull(ssoCircle.getConnObjectKeyItem());\n+        assertNotEquals(\"email\", ssoCircle.getConnObjectKeyItem().getIntAttrName());\n+        assertNotEquals(\"EmailAddress\", ssoCircle.getConnObjectKeyItem().getExtAttrName());\n+\n+        ssoCircle.getMappingItems().clear();\n+\n+        MappingItemTO keyMapping = new MappingItemTO();\n+        keyMapping.setIntAttrName(\"email\");\n+        keyMapping.setExtAttrName(\"EmailAddress\");\n+        ssoCircle.setConnObjectKeyItem(keyMapping);\n+\n+        saml2IdPService.update(ssoCircle);\n+\n+        ssoCircle = saml2IdPService.read(ssoCircle.getKey());\n+        assertEquals(\"email\", ssoCircle.getConnObjectKeyItem().getIntAttrName());\n+        assertEquals(\"EmailAddress\", ssoCircle.getConnObjectKeyItem().getExtAttrName());\n+    }\n+\n+}"},{"sha":"3d01fe02aa9875974ec0c753e39156384b7a38b4","filename":"fit/core-reference/src/test/resources/ssocircle.xml","status":"added","additions":106,"deletions":0,"changes":106,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fssocircle.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fssocircle.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fssocircle.xml?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -0,0 +1,106 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<EntityDescriptor entityID=\"https://idp.ssocircle.com\" xmlns=\"urn:oasis:names:tc:SAML:2.0:metadata\">\n+    <IDPSSODescriptor WantAuthnRequestsSigned=\"false\" protocolSupportEnumeration=\"urn:oasis:names:tc:SAML:2.0:protocol\">\n+        <KeyDescriptor use=\"signing\">\n+            <ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\">\n+                <ds:X509Data>\n+                    <ds:X509Certificate>\n+MIIEYzCCAkugAwIBAgIDIAZmMA0GCSqGSIb3DQEBCwUAMC4xCzAJBgNVBAYTAkRF\n+MRIwEAYDVQQKDAlTU09DaXJjbGUxCzAJBgNVBAMMAkNBMB4XDTE2MDgwMzE1MDMy\n+M1oXDTI2MDMwNDE1MDMyM1owPTELMAkGA1UEBhMCREUxEjAQBgNVBAoTCVNTT0Np\n+cmNsZTEaMBgGA1UEAxMRaWRwLnNzb2NpcmNsZS5jb20wggEiMA0GCSqGSIb3DQEB\n+AQUAA4IBDwAwggEKAoIBAQCAwWJyOYhYmWZF2TJvm1VyZccs3ZJ0TsNcoazr2pTW\n+cY8WTRbIV9d06zYjngvWibyiylewGXcYONB106ZNUdNgrmFd5194Wsyx6bPvnjZE\n+ERny9LOfuwQaqDYeKhI6c+veXApnOfsY26u9Lqb9sga9JnCkUGRaoVrAVM3yfghv\n+/Cg/QEg+I6SVES75tKdcLDTt/FwmAYDEBV8l52bcMDNF+JWtAuetI9/dWCBe9VTC\n+asAr2Fxw1ZYTAiqGI9sW4kWS2ApedbqsgH3qqMlPA7tg9iKy8Yw/deEn0qQIx8Gl\n+VnQFpDgzG9k+jwBoebAYfGvMcO/BDXD2pbWTN+DvbURlAgMBAAGjezB5MAkGA1Ud\n+EwQCMAAwLAYJYIZIAYb4QgENBB8WHU9wZW5TU0wgR2VuZXJhdGVkIENlcnRpZmlj\n+YXRlMB0GA1UdDgQWBBQhAmCewE7aonAvyJfjImCRZDtccTAfBgNVHSMEGDAWgBTA\n+1nEA+0za6ppLItkOX5yEp8cQaTANBgkqhkiG9w0BAQsFAAOCAgEAAhC5/WsF9ztJ\n+Hgo+x9KV9bqVS0MmsgpG26yOAqFYwOSPmUuYmJmHgmKGjKrj1fdCINtzcBHFFBC1\n+maGJ33lMk2bM2THx22/O93f4RFnFab7t23jRFcF0amQUOsDvltfJw7XCal8JdgPU\n+g6TNC4Fy9XYv0OAHc3oDp3vl1Yj8/1qBg6Rc39kehmD5v8SKYmpE7yFKxDF1ol9D\n+KDG/LvClSvnuVP0b4BWdBAA9aJSFtdNGgEvpEUqGkJ1osLVqCMvSYsUtHmapaX3h\n+iM9RbX38jsSgsl44Rar5Ioc7KXOOZFGfEKyyUqucYpjWCOXJELAVAzp7XTvA2q55\n+u31hO0w8Yx4uEQKlmxDuZmxpMz4EWARyjHSAuDKEW1RJvUr6+5uA9qeOKxLiKN1j\n+o6eWAcl6Wr9MreXR9kFpS6kHllfdVSrJES4ST0uh1Jp4EYgmiyMmFCbUpKXifpsN\n+WCLDenE3hllF0+q3wIdu+4P82RIM71n7qVgnDnK29wnLhHDat9rkC62CIbonpkVY\n+mnReX0jze+7twRanJOMCJ+lFg16BDvBcG8u0n/wIDkHHitBI7bU1k6c6DydLQ+69\n+h8SCo6sO9YuD+/3xAGKad4ImZ6vTwlB4zDCpu6YgQWocWRXE+VkOb+RBfvP755PU\n+aLfL63AFVlpOnEpIio5++UjNJRuPuAA=\n+                   </ds:X509Certificate>\n+                </ds:X509Data>\n+            </ds:KeyInfo>\n+        </KeyDescriptor>\n+        <KeyDescriptor use=\"encryption\">\n+            <ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\">\n+                <ds:X509Data>\n+                    <ds:X509Certificate>\n+MIIEYzCCAkugAwIBAgIDIAZmMA0GCSqGSIb3DQEBCwUAMC4xCzAJBgNVBAYTAkRF\n+MRIwEAYDVQQKDAlTU09DaXJjbGUxCzAJBgNVBAMMAkNBMB4XDTE2MDgwMzE1MDMy\n+M1oXDTI2MDMwNDE1MDMyM1owPTELMAkGA1UEBhMCREUxEjAQBgNVBAoTCVNTT0Np\n+cmNsZTEaMBgGA1UEAxMRaWRwLnNzb2NpcmNsZS5jb20wggEiMA0GCSqGSIb3DQEB\n+AQUAA4IBDwAwggEKAoIBAQCAwWJyOYhYmWZF2TJvm1VyZccs3ZJ0TsNcoazr2pTW\n+cY8WTRbIV9d06zYjngvWibyiylewGXcYONB106ZNUdNgrmFd5194Wsyx6bPvnjZE\n+ERny9LOfuwQaqDYeKhI6c+veXApnOfsY26u9Lqb9sga9JnCkUGRaoVrAVM3yfghv\n+/Cg/QEg+I6SVES75tKdcLDTt/FwmAYDEBV8l52bcMDNF+JWtAuetI9/dWCBe9VTC\n+asAr2Fxw1ZYTAiqGI9sW4kWS2ApedbqsgH3qqMlPA7tg9iKy8Yw/deEn0qQIx8Gl\n+VnQFpDgzG9k+jwBoebAYfGvMcO/BDXD2pbWTN+DvbURlAgMBAAGjezB5MAkGA1Ud\n+EwQCMAAwLAYJYIZIAYb4QgENBB8WHU9wZW5TU0wgR2VuZXJhdGVkIENlcnRpZmlj\n+YXRlMB0GA1UdDgQWBBQhAmCewE7aonAvyJfjImCRZDtccTAfBgNVHSMEGDAWgBTA\n+1nEA+0za6ppLItkOX5yEp8cQaTANBgkqhkiG9w0BAQsFAAOCAgEAAhC5/WsF9ztJ\n+Hgo+x9KV9bqVS0MmsgpG26yOAqFYwOSPmUuYmJmHgmKGjKrj1fdCINtzcBHFFBC1\n+maGJ33lMk2bM2THx22/O93f4RFnFab7t23jRFcF0amQUOsDvltfJw7XCal8JdgPU\n+g6TNC4Fy9XYv0OAHc3oDp3vl1Yj8/1qBg6Rc39kehmD5v8SKYmpE7yFKxDF1ol9D\n+KDG/LvClSvnuVP0b4BWdBAA9aJSFtdNGgEvpEUqGkJ1osLVqCMvSYsUtHmapaX3h\n+iM9RbX38jsSgsl44Rar5Ioc7KXOOZFGfEKyyUqucYpjWCOXJELAVAzp7XTvA2q55\n+u31hO0w8Yx4uEQKlmxDuZmxpMz4EWARyjHSAuDKEW1RJvUr6+5uA9qeOKxLiKN1j\n+o6eWAcl6Wr9MreXR9kFpS6kHllfdVSrJES4ST0uh1Jp4EYgmiyMmFCbUpKXifpsN\n+WCLDenE3hllF0+q3wIdu+4P82RIM71n7qVgnDnK29wnLhHDat9rkC62CIbonpkVY\n+mnReX0jze+7twRanJOMCJ+lFg16BDvBcG8u0n/wIDkHHitBI7bU1k6c6DydLQ+69\n+h8SCo6sO9YuD+/3xAGKad4ImZ6vTwlB4zDCpu6YgQWocWRXE+VkOb+RBfvP755PU\n+aLfL63AFVlpOnEpIio5++UjNJRuPuAA=\n+                    </ds:X509Certificate>\n+                </ds:X509Data>\n+            </ds:KeyInfo>\n+            <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\">\n+                <xenc:KeySize xmlns:xenc=\"http://www.w3.org/2001/04/xmlenc#\">128</xenc:KeySize>\n+</EncryptionMethod>\n+        </KeyDescriptor>\n+        <ArtifactResolutionService index=\"0\" isDefault=\"true\" Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" Location=\"https://idp.ssocircle.com:443/sso/ArtifactResolver/metaAlias/publicidp\"/>\n+        <SingleLogoutService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\" Location=\"https://idp.ssocircle.com:443/sso/IDPSloRedirect/metaAlias/publicidp\" ResponseLocation=\"https://idp.ssocircle.com:443/sso/IDPSloRedirect/metaAlias/publicidp\"/>\n+        <SingleLogoutService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location=\"https://idp.ssocircle.com:443/sso/IDPSloPost/metaAlias/publicidp\" ResponseLocation=\"https://idp.ssocircle.com:443/sso/IDPSloPost/metaAlias/publicidp\"/>\n+        <SingleLogoutService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" Location=\"https://idp.ssocircle.com:443/sso/IDPSloSoap/metaAlias/publicidp\"/>\n+        <ManageNameIDService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\" Location=\"https://idp.ssocircle.com:443/sso/IDPMniRedirect/metaAlias/publicidp\" ResponseLocation=\"https://idp.ssocircle.com:443/sso/IDPMniRedirect/metaAlias/publicidp\"/>\n+        <ManageNameIDService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location=\"https://idp.ssocircle.com:443/sso/IDPMniPOSTmetaAlias/publicidp\" ResponseLocation=\"https://idp.ssocircle.com:443/sso/IDPMniPOST/metaAlias/publicidp\"/>\n+        <ManageNameIDService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" Location=\"https://idp.ssocircle.com:443/sso/IDPMniSoap/metaAlias/publicidp\"/>\n+        <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</NameIDFormat>\n+        <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</NameIDFormat>\n+        <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</NameIDFormat>\n+        <NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress</NameIDFormat>\n+        <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos</NameIDFormat>\n+        <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\" Location=\"https://idp.ssocircle.com:443/sso/SSORedirect/metaAlias/publicidp\"/>\n+        <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\" Location=\"https://idp.ssocircle.com:443/sso/SSOPOST/metaAlias/publicidp\"/>\n+        <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" Location=\"https://idp.ssocircle.com:443/sso/SSOSoap/metaAlias/publicidp\"/>\n+        <NameIDMappingService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" Location=\"https://idp.ssocircle.com:443/sso/NIMSoap/metaAlias/publicidp\"/>\n+    </IDPSSODescriptor>\n+</EntityDescriptor>"},{"sha":"6320ccbc32e87e5a0feea53196b1758a1f609e9f","filename":"fit/core-reference/src/test/resources/testshib-providers.xml","status":"added","additions":321,"deletions":0,"changes":321,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Ftestshib-providers.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/673cdf9e1863f7fd17959bc13295388cbb67d69c/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Ftestshib-providers.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Ftestshib-providers.xml?ref=673cdf9e1863f7fd17959bc13295388cbb67d69c","patch":"@@ -0,0 +1,321 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<EntitiesDescriptor Name=\"urn:mace:shibboleth:testshib:two\"\n+    xmlns=\"urn:oasis:names:tc:SAML:2.0:metadata\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"\n+    xmlns:mdalg=\"urn:oasis:names:tc:SAML:metadata:algsupport\" xmlns:mdui=\"urn:oasis:names:tc:SAML:metadata:ui\"\n+    xmlns:shibmd=\"urn:mace:shibboleth:metadata:1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+\n+    <!-- This file contains the metadata for the testing IdP and SP\n+     that are operated by TestShib as a service for testing new\n+     Shibboleth and SAML providers. -->\n+\n+    <EntityDescriptor entityID=\"https://idp.testshib.org/idp/shibboleth\">\n+        \n+        <Extensions>\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha512\" />\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#sha384\" />\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\" />\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" />\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512\" />\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384\" />\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\" />\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" />\n+        </Extensions>\n+\n+        <IDPSSODescriptor\n+            protocolSupportEnumeration=\"urn:oasis:names:tc:SAML:1.1:protocol urn:mace:shibboleth:1.0 urn:oasis:names:tc:SAML:2.0:protocol\">\n+            <Extensions>\n+                <shibmd:Scope regexp=\"false\">testshib.org</shibmd:Scope>\n+                <mdui:UIInfo>\n+                    <mdui:DisplayName xml:lang=\"en\">TestShib Test IdP</mdui:DisplayName>\n+                    <mdui:Description xml:lang=\"en\">TestShib IdP. Use this as a source of attributes\n+                        for your test SP.</mdui:Description>\n+                    <mdui:Logo height=\"88\" width=\"253\"\n+                        >https://www.testshib.org/testshibtwo.jpg</mdui:Logo>\n+                </mdui:UIInfo>\n+\n+            </Extensions>\n+\n+            <!-- new signing key -->\n+            <KeyDescriptor>\n+                <ds:KeyInfo>\n+                    <ds:X509Data>\n+                        <ds:X509Certificate>\n+                            MIIDAzCCAeugAwIBAgIVAPX0G6LuoXnKS0Muei006mVSBXbvMA0GCSqGSIb3DQEB\n+                            CwUAMBsxGTAXBgNVBAMMEGlkcC50ZXN0c2hpYi5vcmcwHhcNMTYwODIzMjEyMDU0\n+                            WhcNMzYwODIzMjEyMDU0WjAbMRkwFwYDVQQDDBBpZHAudGVzdHNoaWIub3JnMIIB\n+                            IjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAg9C4J2DiRTEhJAWzPt1S3ryh\n+                            m3M2P3hPpwJwvt2q948vdTUxhhvNMuc3M3S4WNh6JYBs53R+YmjqJAII4ShMGNEm\n+                            lGnSVfHorex7IxikpuDPKV3SNf28mCAZbQrX+hWA+ann/uifVzqXktOjs6DdzdBn\n+                            xoVhniXgC8WCJwKcx6JO/hHsH1rG/0DSDeZFpTTcZHj4S9MlLNUtt5JxRzV/MmmB\n+                            3ObaX0CMqsSWUOQeE4nylSlp5RWHCnx70cs9kwz5WrflnbnzCeHU2sdbNotBEeTH\n+                            ot6a2cj/pXlRJIgPsrL/4VSicPZcGYMJMPoLTJ8mdy6mpR6nbCmP7dVbCIm/DQID\n+                            AQABoz4wPDAdBgNVHQ4EFgQUUfaDa2mPi24x09yWp1OFXmZ2GPswGwYDVR0RBBQw\n+                            EoIQaWRwLnRlc3RzaGliLm9yZzANBgkqhkiG9w0BAQsFAAOCAQEASKKgqTxhqBzR\n+                            OZ1eVy++si+eTTUQZU4+8UywSKLia2RattaAPMAcXUjO+3cYOQXLVASdlJtt+8QP\n+                            dRkfp8SiJemHPXC8BES83pogJPYEGJsKo19l4XFJHPnPy+Dsn3mlJyOfAa8RyWBS\n+                            80u5lrvAcr2TJXt9fXgkYs7BOCigxtZoR8flceGRlAZ4p5FPPxQR6NDYb645jtOT\n+                            MVr3zgfjP6Wh2dt+2p04LG7ENJn8/gEwtXVuXCsPoSCDx9Y0QmyXTJNdV1aB0AhO\n+                            RkWPlFYwp+zOyOIR+3m1+pqWFpn0eT/HrxpdKa74FA3R2kq4R7dXe4G0kUgXTdqX\n+                            MLRKhDgdmA==\n+                        </ds:X509Certificate>\n+                    </ds:X509Data>\n+                </ds:KeyInfo>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes256-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes192-cbc\" />\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#tripledes-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-1_5\"/>\n+            </KeyDescriptor>\n+\n+            <ArtifactResolutionService Binding=\"urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding\"\n+                Location=\"https://idp.testshib.org:8443/idp/profile/SAML1/SOAP/ArtifactResolution\"\n+                index=\"1\"/>\n+            <ArtifactResolutionService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\"\n+                Location=\"https://idp.testshib.org:8443/idp/profile/SAML2/SOAP/ArtifactResolution\"\n+                index=\"2\"/>\n+\n+            <NameIDFormat>urn:mace:shibboleth:1.0:nameIdentifier</NameIDFormat>\n+            <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</NameIDFormat>\n+            \n+            <SingleSignOnService Binding=\"urn:mace:shibboleth:1.0:profiles:AuthnRequest\"\n+                Location=\"https://idp.testshib.org/idp/profile/Shibboleth/SSO\"/>\n+            <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"\n+                Location=\"https://idp.testshib.org/idp/profile/SAML2/POST/SSO\"/>\n+            <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\"\n+                Location=\"https://idp.testshib.org/idp/profile/SAML2/Redirect/SSO\"/>\n+            <SingleSignOnService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\" \n+                Location=\"https://idp.testshib.org/idp/profile/SAML2/SOAP/ECP\"/>\n+\n+        </IDPSSODescriptor>\n+\n+        <AttributeAuthorityDescriptor\n+            protocolSupportEnumeration=\"urn:oasis:names:tc:SAML:1.1:protocol urn:oasis:names:tc:SAML:2.0:protocol\">\n+\n+            <!-- new SSL/TLS -->\n+            <KeyDescriptor>\n+                <ds:KeyInfo>\n+                    <ds:X509Data>\n+                        <ds:X509Certificate>\n+                            MIIDAzCCAeugAwIBAgIVAPX0G6LuoXnKS0Muei006mVSBXbvMA0GCSqGSIb3DQEB\n+                            CwUAMBsxGTAXBgNVBAMMEGlkcC50ZXN0c2hpYi5vcmcwHhcNMTYwODIzMjEyMDU0\n+                            WhcNMzYwODIzMjEyMDU0WjAbMRkwFwYDVQQDDBBpZHAudGVzdHNoaWIub3JnMIIB\n+                            IjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAg9C4J2DiRTEhJAWzPt1S3ryh\n+                            m3M2P3hPpwJwvt2q948vdTUxhhvNMuc3M3S4WNh6JYBs53R+YmjqJAII4ShMGNEm\n+                            lGnSVfHorex7IxikpuDPKV3SNf28mCAZbQrX+hWA+ann/uifVzqXktOjs6DdzdBn\n+                            xoVhniXgC8WCJwKcx6JO/hHsH1rG/0DSDeZFpTTcZHj4S9MlLNUtt5JxRzV/MmmB\n+                            3ObaX0CMqsSWUOQeE4nylSlp5RWHCnx70cs9kwz5WrflnbnzCeHU2sdbNotBEeTH\n+                            ot6a2cj/pXlRJIgPsrL/4VSicPZcGYMJMPoLTJ8mdy6mpR6nbCmP7dVbCIm/DQID\n+                            AQABoz4wPDAdBgNVHQ4EFgQUUfaDa2mPi24x09yWp1OFXmZ2GPswGwYDVR0RBBQw\n+                            EoIQaWRwLnRlc3RzaGliLm9yZzANBgkqhkiG9w0BAQsFAAOCAQEASKKgqTxhqBzR\n+                            OZ1eVy++si+eTTUQZU4+8UywSKLia2RattaAPMAcXUjO+3cYOQXLVASdlJtt+8QP\n+                            dRkfp8SiJemHPXC8BES83pogJPYEGJsKo19l4XFJHPnPy+Dsn3mlJyOfAa8RyWBS\n+                            80u5lrvAcr2TJXt9fXgkYs7BOCigxtZoR8flceGRlAZ4p5FPPxQR6NDYb645jtOT\n+                            MVr3zgfjP6Wh2dt+2p04LG7ENJn8/gEwtXVuXCsPoSCDx9Y0QmyXTJNdV1aB0AhO\n+                            RkWPlFYwp+zOyOIR+3m1+pqWFpn0eT/HrxpdKa74FA3R2kq4R7dXe4G0kUgXTdqX\n+                            MLRKhDgdmA==\n+                        </ds:X509Certificate>\n+                    </ds:X509Data>\n+                </ds:KeyInfo>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes256-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes192-cbc\" />\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#tripledes-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-1_5\"/>\n+            </KeyDescriptor>\n+\n+            <AttributeService Binding=\"urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding\"\n+                Location=\"https://idp.testshib.org:8443/idp/profile/SAML1/SOAP/AttributeQuery\"/>\n+            <AttributeService Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\"\n+                Location=\"https://idp.testshib.org:8443/idp/profile/SAML2/SOAP/AttributeQuery\"/>\n+\n+            <NameIDFormat>urn:mace:shibboleth:1.0:nameIdentifier</NameIDFormat>\n+            <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</NameIDFormat>\n+\n+        </AttributeAuthorityDescriptor>\n+\n+        <Organization>\n+            <OrganizationName xml:lang=\"en\">TestShib Two Identity Provider</OrganizationName>\n+            <OrganizationDisplayName xml:lang=\"en\">TestShib Two</OrganizationDisplayName>\n+            <OrganizationURL xml:lang=\"en\">http://www.testshib.org/testshib-two/</OrganizationURL>\n+        </Organization>\n+        <ContactPerson contactType=\"technical\">\n+            <GivenName>Nate</GivenName>\n+            <SurName>Klingenstein</SurName>\n+            <EmailAddress>ndk@internet2.edu</EmailAddress>\n+        </ContactPerson>\n+    </EntityDescriptor>\n+\n+    <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->\n+    <!--             Metadata for SP.TESTSHIB.ORG                    -->\n+    <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->\n+\n+    <EntityDescriptor entityID=\"https://sp.testshib.org/shibboleth-sp\">\n+\n+        <Extensions> \n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha512\"/>\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#sha384\"/>\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/>\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#sha224\"/>\n+            <mdalg:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha224\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2009/xmldsig11#dsa-sha256\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/>\n+            <mdalg:SigningMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#dsa-sha1\"/>\n+        </Extensions>\n+\n+        \n+        <!-- An SP supporting SAML 1 and 2 contains this element with protocol support as shown. -->\n+        <SPSSODescriptor\n+            protocolSupportEnumeration=\"urn:oasis:names:tc:SAML:2.0:protocol urn:oasis:names:tc:SAML:1.1:protocol http://schemas.xmlsoap.org/ws/2003/07/secext\">\n+\n+            <Extensions>\n+                <!-- A request initiator at /Testshib that you can use to customize authentication requests issued to your IdP by TestShib. -->\n+                <init:RequestInitiator xmlns:init=\"urn:oasis:names:tc:SAML:profiles:SSO:request-init\" Binding=\"urn:oasis:names:tc:SAML:profiles:SSO:request-init\" Location=\"https://sp.testshib.org/Shibboleth.sso/TestShib\"/>\n+ \n+                <mdui:UIInfo>\n+                    <mdui:DisplayName xml:lang=\"en\">TestShib Test SP</mdui:DisplayName>\n+                    <mdui:Description xml:lang=\"en\">TestShib SP. Log into this to test your machine.\n+                        Once logged in check that all attributes that you expected have been\n+                        released.</mdui:Description>\n+                    <mdui:Logo height=\"88\" width=\"253\">https://www.testshib.org/testshibtwo.jpg</mdui:Logo>\n+                </mdui:UIInfo>\n+            </Extensions>\n+\n+            <KeyDescriptor>\n+                <ds:KeyInfo>\n+                    <ds:X509Data>\n+                        <ds:X509Certificate>\n+                            MIIEPjCCAyagAwIBAgIBADANBgkqhkiG9w0BAQUFADB3MQswCQYDVQQGEwJVUzEV\n+                            MBMGA1UECBMMUGVubnN5bHZhbmlhMRMwEQYDVQQHEwpQaXR0c2J1cmdoMSIwIAYD\n+                            VQQKExlUZXN0U2hpYiBTZXJ2aWNlIFByb3ZpZGVyMRgwFgYDVQQDEw9zcC50ZXN0\n+                            c2hpYi5vcmcwHhcNMDYwODMwMjEyNDM5WhcNMTYwODI3MjEyNDM5WjB3MQswCQYD\n+                            VQQGEwJVUzEVMBMGA1UECBMMUGVubnN5bHZhbmlhMRMwEQYDVQQHEwpQaXR0c2J1\n+                            cmdoMSIwIAYDVQQKExlUZXN0U2hpYiBTZXJ2aWNlIFByb3ZpZGVyMRgwFgYDVQQD\n+                            Ew9zcC50ZXN0c2hpYi5vcmcwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB\n+                            AQDJyR6ZP6MXkQ9z6RRziT0AuCabDd3x1m7nLO9ZRPbr0v1LsU+nnC363jO8nGEq\n+                            sqkgiZ/bSsO5lvjEt4ehff57ERio2Qk9cYw8XCgmYccVXKH9M+QVO1MQwErNobWb\n+                            AjiVkuhWcwLWQwTDBowfKXI87SA7KR7sFUymNx5z1aoRvk3GM++tiPY6u4shy8c7\n+                            vpWbVfisfTfvef/y+galxjPUQYHmegu7vCbjYP3On0V7/Ivzr+r2aPhp8egxt00Q\n+                            XpilNai12LBYV3Nv/lMsUzBeB7+CdXRVjZOHGuQ8mGqEbsj8MBXvcxIKbcpeK5Zi\n+                            JCVXPfarzuriM1G5y5QkKW+LAgMBAAGjgdQwgdEwHQYDVR0OBBYEFKB6wPDxwYrY\n+                            StNjU5P4b4AjBVQVMIGhBgNVHSMEgZkwgZaAFKB6wPDxwYrYStNjU5P4b4AjBVQV\n+                            oXukeTB3MQswCQYDVQQGEwJVUzEVMBMGA1UECBMMUGVubnN5bHZhbmlhMRMwEQYD\n+                            VQQHEwpQaXR0c2J1cmdoMSIwIAYDVQQKExlUZXN0U2hpYiBTZXJ2aWNlIFByb3Zp\n+                            ZGVyMRgwFgYDVQQDEw9zcC50ZXN0c2hpYi5vcmeCAQAwDAYDVR0TBAUwAwEB/zAN\n+                            BgkqhkiG9w0BAQUFAAOCAQEAc06Kgt7ZP6g2TIZgMbFxg6vKwvDL0+2dzF11Onpl\n+                            5sbtkPaNIcj24lQ4vajCrrGKdzHXo9m54BzrdRJ7xDYtw0dbu37l1IZVmiZr12eE\n+                            Iay/5YMU+aWP1z70h867ZQ7/7Y4HW345rdiS6EW663oH732wSYNt9kr7/0Uer3KD\n+                            9CuPuOidBacospDaFyfsaJruE99Kd6Eu/w5KLAGG+m0iqENCziDGzVA47TngKz2v\n+                            PVA+aokoOyoz3b53qeti77ijatSEoKjxheBWpO+eoJeGq/e49Um3M2ogIX/JAlMa\n+                            Inh+vYSYngQB2sx9LGkR9KHaMKNIGCDehk93Xla4pWJx1w== \n+                        </ds:X509Certificate>\n+                    </ds:X509Data>\n+                </ds:KeyInfo>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2009/xmlenc11#aes128-gcm\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2009/xmlenc11#aes192-gcm\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2009/xmlenc11#aes256-gcm\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes192-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes256-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#tripledes-cbc\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2009/xmlenc11#rsa-oaep\"/>\n+                <EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p\"/>\n+            </KeyDescriptor>\n+\n+            <!-- This tells IdPs that Single Logout is supported and where/how to request it. -->\n+\n+            <SingleLogoutService Location=\"https://sp.testshib.org/Shibboleth.sso/SLO/SOAP\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:SOAP\"/>\n+            <SingleLogoutService Location=\"https://sp.testshib.org/Shibboleth.sso/SLO/Redirect\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect\"/>\n+            <SingleLogoutService Location=\"https://sp.testshib.org/Shibboleth.sso/SLO/POST\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"/>\n+            <SingleLogoutService Location=\"https://sp.testshib.org/Shibboleth.sso/SLO/Artifact\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact\"/>\n+\n+\n+            <!-- This tells IdPs that you only need transient identifiers. -->\n+            <NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</NameIDFormat>\n+            <NameIDFormat>urn:mace:shibboleth:1.0:nameIdentifier</NameIDFormat>\n+\n+            <!--\n+\t\tThis tells IdPs where and how to send authentication assertions. Mostly\n+\t\tthe SP will tell the IdP what location to use in its request, but this\n+\t\tis how the IdP validates the location and also figures out which\n+\t\tSAML version/binding to use.\n+\t\t-->\n+\n+            <AssertionConsumerService index=\"1\" isDefault=\"true\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/SAML2/POST\"/>\n+            <AssertionConsumerService index=\"2\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/SAML2/POST-SimpleSign\"/>\n+            <AssertionConsumerService index=\"3\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/SAML2/Artifact\"/>\n+            <AssertionConsumerService index=\"4\"\n+                Binding=\"urn:oasis:names:tc:SAML:1.0:profiles:browser-post\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/SAML/POST\"/>\n+            <AssertionConsumerService index=\"5\"\n+                Binding=\"urn:oasis:names:tc:SAML:1.0:profiles:artifact-01\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/SAML/Artifact\"/>\n+            <AssertionConsumerService index=\"6\"\n+                Binding=\"http://schemas.xmlsoap.org/ws/2003/07/secext\"\n+                Location=\"https://sp.testshib.org/Shibboleth.sso/ADFS\"/>\n+\n+            <!-- A couple additional assertion consumers for the registration webapp. -->\n+\n+            <AssertionConsumerService index=\"7\"\n+                Binding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"\n+                Location=\"https://www.testshib.org/Shibboleth.sso/SAML2/POST\"/>\n+            <AssertionConsumerService index=\"8\"\n+                Binding=\"urn:oasis:names:tc:SAML:1.0:profiles:browser-post\"\n+                Location=\"https://www.testshib.org/Shibboleth.sso/SAML/POST\"/>\n+\n+        </SPSSODescriptor>\n+\n+        <!-- This is just information about the entity in human terms. -->\n+        <Organization>\n+            <OrganizationName xml:lang=\"en\">TestShib Two Service Provider</OrganizationName>\n+            <OrganizationDisplayName xml:lang=\"en\">TestShib Two</OrganizationDisplayName>\n+            <OrganizationURL xml:lang=\"en\">http://www.testshib.org/testshib-two/</OrganizationURL>\n+        </Organization>\n+        <ContactPerson contactType=\"technical\">\n+            <GivenName>Nate</GivenName>\n+            <SurName>Klingenstein</SurName>\n+            <EmailAddress>ndk@internet2.edu</EmailAddress>\n+        </ContactPerson>\n+\n+    </EntityDescriptor>\n+\n+\n+</EntitiesDescriptor>\n+"}]}