{"sha":"2d85c31a2aa31c0659484a6038fc393540b37be2","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjJkODVjMzFhMmFhMzFjMDY1OTQ4NGE2MDM4ZmMzOTM1NDBiMzdiZTI=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-24T19:14:29Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-24T19:14:29Z"},"message":"Merging from 0_1_X\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246540 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0d533b3b249c2770c5b3a2d5fb54e542897911d5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0d533b3b249c2770c5b3a2d5fb54e542897911d5"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2d85c31a2aa31c0659484a6038fc393540b37be2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2d85c31a2aa31c0659484a6038fc393540b37be2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2d85c31a2aa31c0659484a6038fc393540b37be2","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2d85c31a2aa31c0659484a6038fc393540b37be2/comments","author":null,"committer":null,"parents":[{"sha":"5348e10ef02b939f437a5625083ed9fb432bd510","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5348e10ef02b939f437a5625083ed9fb432bd510","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5348e10ef02b939f437a5625083ed9fb432bd510"}],"stats":{"total":713,"additions":532,"deletions":181},"files":[{"sha":"a0b740e57c8d1bdff367b5cddd0f0c2166b0e87a","filename":"client/src/main/java/org/syncope/client/to/ConnectorInstanceTO.java","status":"modified","additions":33,"deletions":10,"changes":43,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnectorInstanceTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnectorInstanceTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnectorInstanceTO.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -14,9 +14,11 @@\n  */\n package org.syncope.client.to;\n \n+import java.util.EnumSet;\n import java.util.HashSet;\n import java.util.Set;\n import org.syncope.client.AbstractBaseBean;\n+import org.syncope.types.ConnectorCapability;\n \n public class ConnectorInstanceTO extends AbstractBaseBean {\n \n@@ -25,6 +27,12 @@ public class ConnectorInstanceTO extends AbstractBaseBean {\n     private String version;\n     private String connectorName;\n     private Set<PropertyTO> configuration;\n+    private Set<ConnectorCapability> capabilities;\n+\n+    public ConnectorInstanceTO() {\n+        configuration = new HashSet<PropertyTO>();\n+        capabilities = EnumSet.noneOf(ConnectorCapability.class);\n+    }\n \n     public Long getId() {\n         return id;\n@@ -51,28 +59,23 @@ public void setVersion(String bundleversion) {\n     }\n \n     public Set<PropertyTO> getConfiguration() {\n-        if (this.configuration == null) {\n-            this.configuration = new HashSet<PropertyTO>();\n-        }\n         return this.configuration;\n     }\n \n     public boolean addConfiguration(PropertyTO property) {\n-        if (this.configuration == null) {\n-            this.configuration = new HashSet<PropertyTO>();\n-        }\n         return this.configuration.add(property);\n     }\n \n     public boolean removeConfiguration(PropertyTO property) {\n-        if (this.configuration == null) {\n-            return true;\n-        }\n         return this.configuration.remove(property);\n     }\n \n     public void setConfiguration(Set<PropertyTO> configuration) {\n-        this.configuration = configuration;\n+        if (configuration == null || configuration.isEmpty()) {\n+            this.configuration.clear();\n+        } else {\n+            this.configuration = configuration;\n+        }\n     }\n \n     public String getConnectorName() {\n@@ -82,4 +85,24 @@ public String getConnectorName() {\n     public void setConnectorName(String connectorname) {\n         this.connectorName = connectorname;\n     }\n+\n+    public boolean addCapability(ConnectorCapability capability) {\n+        return capabilities.add(capability);\n+    }\n+\n+    public boolean removeCapability(ConnectorCapability capability) {\n+        return capabilities.remove(capability);\n+    }\n+\n+    public Set<ConnectorCapability> getCapabilities() {\n+        return capabilities;\n+    }\n+\n+    public void setCapabilities(Set<ConnectorCapability> capabilities) {\n+        if (capabilities == null || capabilities.isEmpty()) {\n+            this.capabilities.clear();\n+        } else {\n+            this.capabilities = capabilities;\n+        }\n+    }\n }"},{"sha":"642d81f7894adb0b8471a9728c8c9b296eb6fa0d","filename":"client/src/main/java/org/syncope/types/ConnectorCapability.java","status":"added","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FConnectorCapability.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FConnectorCapability.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FConnectorCapability.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -0,0 +1,32 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.types;\n+\n+/**\n+ * Enum of all possible capabilities that a connector instance can expose.\n+ */\n+public enum ConnectorCapability {\n+\n+    SYNC_CREATE,\n+    ASYNC_CREATE,\n+    SYNC_UPDATE,\n+    ASYNC_UPDATE,\n+    SYNC_DELETE,\n+    ASYNC_DELETE,\n+    SEARCH,\n+    RESOLVE,\n+    ONDEMAND_SYNC,\n+    AUTO_SYNC\n+}"},{"sha":"14dbb5aec467d8164c6901d609268962b9191662","filename":"console/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -108,6 +108,14 @@\n                 <groupId>org.mortbay.jetty</groupId>\n                 <artifactId>maven-jetty-plugin</artifactId>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-war-plugin</artifactId>\n+                <inherited>true</inherited>\n+                <configuration>\n+                    <attachClasses>true</attachClasses>\n+                </configuration>\n+            </plugin>\n         </plugins>\n \n         <resources>"},{"sha":"9db1eb0148bec5cc69dd1129f0a36fc7097a4add","filename":"console/src/main/java/org/syncope/console/pages/Connectors.java","status":"modified","additions":39,"deletions":8,"changes":47,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -14,6 +14,7 @@\n  */\n package org.syncope.console.pages;\n \n+import java.util.List;\n import org.apache.wicket.Page;\n import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -28,7 +29,10 @@\n import org.apache.wicket.model.LoadableDetachableModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.ConnectorInstanceTO;\n+import org.syncope.client.to.ResourceTO;\n+import org.syncope.client.to.ResourceTOs;\n import org.syncope.console.rest.ConnectorsRestClient;\n+import org.syncope.console.rest.ResourcesRestClient;\n \n /**\n  * Connectors WebPage.\n@@ -38,6 +42,9 @@ public class Connectors extends BasePage {\n     @SpringBean(name = \"connectorsRestClient\")\n     ConnectorsRestClient restClient;\n \n+    @SpringBean(name = \"resourcesRestClient\")\n+    ResourcesRestClient resourcesRestClient;\n+\n     final ModalWindow createConnectorWin;\n     final ModalWindow editConnectorWin;\n     \n@@ -63,7 +70,7 @@ public Connectors(PageParameters parameters) {\n             protected Object load() {\n                 return restClient.getAllConnectors().getInstances();\n             }\n-        };\n+        };        \n \n         ListView connectorsView = new ListView(\"connectors\", connectors) {\n \n@@ -72,6 +79,7 @@ protected void populateItem(final ListItem item) {\n                 final ConnectorInstanceTO connectorTO =\n                         (ConnectorInstanceTO) item.getDefaultModelObject();\n \n+                item.add(new Label(\"id\", connectorTO.getId()+\"\"));\n                 item.add(new Label(\"name\", connectorTO.getConnectorName()));\n                 item.add(new Label(\"version\", connectorTO.getVersion()));\n                 item.add(new Label(\"bundleName\", connectorTO.getBundleName()));\n@@ -103,14 +111,19 @@ public Page createPage() {\n \n                     @Override\n                     public void onClick(AjaxRequestTarget target) {\n-                        restClient.deleteConnector(connectorTO.getId());\n \n+                        if(!checkDeleteIsForbidden(connectorTO)){\n+                        restClient.deleteConnector(connectorTO.getId());\n                         info(getString(\"operation_succeded\"));\n-                        target.addComponent(feedbackPanel);\n-                        \n+                        }\n+\n+                        else\n+                            error(getString(\"delete_error\"));\n+                            \n                         target.addComponent(connectorsContainer);\n-                    }\n-                };\n+                        target.addComponent(feedbackPanel);\n+                    \n+                }};\n \n                 item.add(deleteLink);\n             }\n@@ -153,10 +166,28 @@ public Page createPage() {\n \n     }\n \n+    /**\n+     * Check if the delete action is forbidden\n+     * @param ConnectorInstanceTO object to check\n+     * @return true if the action is forbidden, false otherwise\n+     */\n+    public boolean checkDeleteIsForbidden(ConnectorInstanceTO connectorTO){\n+\n+        boolean forbidden = false;\n+        List<ResourceTO> resources = resourcesRestClient.getAllResources().getResources();\n+\n+        for(ResourceTO resourceTO : resources) {\n+            if(resourceTO.getConnectorId() == connectorTO.getId())\n+                forbidden = true;\n+        }\n+\n+        return forbidden;\n+    }\n+\n     /**\n      * Set a WindowClosedCallback for a ModalWindow instance.\n-     * @param window\n-     * @param container\n+     * @param current window\n+     * @param container to refresh\n      */\n     public void setWindowClosedCallback(ModalWindow window, final WebMarkupContainer container) {\n "},{"sha":"949c2ea3e10aa8741780d6d8caff03cfe8d453b1","filename":"console/src/main/java/org/syncope/console/pages/ConnectorsModalPage.java","status":"modified","additions":81,"deletions":2,"changes":83,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -17,6 +17,8 @@\n package org.syncope.console.pages;\n \n import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collection;\n import java.util.HashSet;\n import java.util.List;\n import java.util.Set;\n@@ -26,6 +28,7 @@\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.basic.Label;\n+import org.apache.wicket.markup.html.form.CheckBoxMultipleChoice;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n@@ -44,6 +47,7 @@\n import org.syncope.client.to.ConnectorInstanceTO;\n import org.syncope.client.to.PropertyTO;\n import org.syncope.console.rest.ConnectorsRestClient;\n+import org.syncope.types.ConnectorCapability;\n \n /**\n  * Modal window with Connector form.\n@@ -53,6 +57,7 @@ public class ConnectorsModalPage extends SyncopeModalPage {\n     public TextField connectorName;\n     public DropDownChoice bundle;\n     public TextField version;\n+    public CheckBoxMultipleChoice capabilitiesPalette;\n \n     ConnectorBundleTOs bundlesTOs;\n     ConnectorBundleTO selectedBundleTO = new ConnectorBundleTO();\n@@ -65,7 +70,8 @@ public class ConnectorsModalPage extends SyncopeModalPage {\n     \n     //WebMarkupContainer container;\n     WebMarkupContainer propertiesContainer;\n-    \n+\n+    List<ConnectorCapability> selections;\n     /**\n      *\n      * @param basePage base\n@@ -80,6 +86,9 @@ public ConnectorsModalPage(final BasePage basePage, final ModalWindow window,\n         \n         connectorForm.setModel(new CompoundPropertyModel(connectorTO));\n \n+        if(!createFlag)\n+            setupSelections(connectorTO);\n+\n         IModel bundles =  new LoadableDetachableModel()\n         {\n             protected Object load() {\n@@ -182,6 +191,8 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n \n                 //Set the model object configuration's properties to connectorPropertiesMap reference\n                 connector.setBundleName(bundle.getModelValue());\n+                //Set the model object's capabilites to capabilitiesPalette's converted Set\n+               connector.setCapabilities(getResourcesSet(selections));\n \n                 try {\n \n@@ -196,7 +207,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                     window.close(target);\n \n                 } catch (Exception e) {\n-                    error(getString(\"error\") + \":\" + e.getMessage());\n+                     error(getString(\"error\") + \":\" + e.getMessage());\n                 }\n             }\n \n@@ -211,11 +222,79 @@ protected void onError(AjaxRequestTarget target, Form form) {\n         connectorForm.add(connectorName);\n         connectorForm.add(bundle);\n         connectorForm.add(version);\n+\n+        final IModel capabilities = new LoadableDetachableModel() {\n+\n+            @Override\n+            protected Object load() {\n+                return Arrays.asList(ConnectorCapability.values());\n+            }\n+        };\n+\n+        capabilitiesPalette = new CheckBoxMultipleChoice(\"capabilitiesPalette\",\n+                               new PropertyModel(this,\"selections\"), capabilities);\n+        connectorForm.add(capabilitiesPalette);\n+\n         connectorForm.add(submit);\n \n         add(connectorForm);\n     }\n \n+    /**\n+     * Setup capabilities.\n+     * @return void\n+     */\n+    public void setupSelections(ConnectorInstanceTO connectorTO){\n+        selections = new ArrayList<ConnectorCapability>();\n+        \n+        for(ConnectorCapability capability : connectorTO.getCapabilities())\n+            selections.add(capability);\n+\n+    }\n+\n+    /**\n+     * Covert a capabilities List<ConnectorCapability> to Set<ConnectorCapability>.\n+     * @return Set<ConnectorCapability>\n+     */\n+    public Set<ConnectorCapability> getResourcesSet(Collection<ConnectorCapability> capabilitiesList) {\n+        Set<ConnectorCapability> capabilitiesSet = new HashSet<ConnectorCapability>();\n+\n+        for (ConnectorCapability capability : capabilitiesList) {\n+            capabilitiesSet.add(capability);\n+        }\n+\n+        return capabilitiesSet;\n+    }\n+\n+    /**\n+     * Originals : connector's  capabilities\n+     * @param connectorTO\n+     * @return List<ConnectorCapability>\n+     */\n+    public List<ConnectorCapability> getSelectedCapabilities(ConnectorInstanceTO connectorTO) {\n+\n+        List<ConnectorCapability> capabilities = new ArrayList<ConnectorCapability>();\n+\n+        for(ConnectorCapability capability : connectorTO.getCapabilities())\n+            capabilities.add(capability);\n+\n+        return capabilities;\n+    }\n+\n+    /**\n+     * Destinations : available capabilities\n+     * @param connectorTO\n+     * @return List<ConnectorCapability>\n+     */\n+    public List<ConnectorCapability> getAvailableCapabilities() {\n+\n+        List<ConnectorCapability> capabilities = new ArrayList<ConnectorCapability>();\n+\n+        capabilities = Arrays.asList(ConnectorCapability.values());\n+\n+        return capabilities;\n+    }\n+\n     /**\n      * Convert an HashSet<PropertyTO> object to a corresponding List<PropertyTO>\n      * object."},{"sha":"db3859216bedf21521623b7335831ca556652c15","filename":"console/src/main/java/org/syncope/console/pages/MembershipModalPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -125,7 +125,7 @@ public Serializable getObject() {\n                                             Date date = new Date();\n                                             try {\n                                                 String dateValue = (String) item.getModelObject();\n-                                                formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n+                                                formatter = new SimpleDateFormat(schemaTO.getConversionPattern());//Default value:yyyy-MM-dd\n \n                                                 if(!dateValue.equals(\"\"))\n                                                     date = formatter.parse((String) item.getModelObject());"},{"sha":"691b14e4222a7783481f371cf2b3bc1a988c4b4a","filename":"console/src/main/java/org/syncope/console/pages/RoleModalPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -141,7 +141,7 @@ public Serializable getObject() {\n                                             Date date = new Date();\n                                             try {\n                                                 String dateValue = (String) item.getModelObject();\n-                                                formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n+                                                formatter = new SimpleDateFormat(schemaTO.getConversionPattern());//Default value:yyyy-MM-dd\n                                                 if(!dateValue.equals(\"\"))\n                                                     date = formatter.parse((String) item.getModelObject());\n                                             } catch (ParseException ex) {"},{"sha":"5c379983ea5fda82b12222c335ca6172f847f8f2","filename":"console/src/main/java/org/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -49,6 +49,7 @@ public class SchemaModalPage extends SyncopeModalPage\n     public RadioChoice mandatory;\n     public RadioChoice virtual;\n     public RadioChoice multivalue;\n+    public RadioChoice readonly;\n     public AjaxButton submit;\n \n     public enum Entity {USER,ROLE,MEMBERSHIP};\n@@ -99,6 +100,7 @@ public SchemaModalPage(final BasePage basePage, final ModalWindow window,\n \n         multivalue = new RadioChoice(\"multivalue\",Arrays.asList(new Boolean[]{true,false}));\n \n+        readonly = new RadioChoice(\"readonly\",Arrays.asList(new Boolean[]{true,false}));\n \n         submit = new AjaxButton(\"submit\", new Model(getString(\"submit\"))) {\n \n@@ -159,6 +161,7 @@ protected void onError(AjaxRequestTarget target, Form form) {\n         schemaForm.add(mandatory);\n         schemaForm.add(virtual);\n         schemaForm.add(multivalue);\n+        schemaForm.add(readonly);\n \n         schemaForm.add(submit);\n "},{"sha":"d9b1dfe1aa01ae122000913674f2ecba3bcb818b","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":2,"deletions":15,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -170,7 +170,7 @@ public Serializable getObject() {\n                                 public void setObject(Serializable object) {\n                                     item.setModelObject((String) object);\n                                 }\n-                            }, schemaTO.isMandatory());\n+                            }, schemaTO.isMandatory(),schemaTO.isReadonly());\n                         } else if (schemaTO.getType().getClassName().equals(\"java.lang.Boolean\")) {\n                             panel = new AjaxCheckBoxPanel(\"panel\", schemaTO.getName(), new Model() {\n \n@@ -198,7 +198,7 @@ public Serializable getObject() {\n \n                                             try {\n                                                 String dateValue = (String) item.getModelObject();\n-                                                formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n+                                                formatter = new SimpleDateFormat(schemaTO.getConversionPattern());//Default value:yyyy-MM-dd\n \n                                                 if (!dateValue.equals(\"\")) {\n                                                     date = formatter.parse((String) item.getModelObject());\n@@ -472,19 +472,6 @@ public List<ResourceTO> getAvailableResources(UserTO userTO) {\n         for (ResourceTO resourceTO : resourcesTos)\n                 resources.add(resourceTO);\n \n-\n-        /*if (userTO.getResources().size() == 0) {\n-            for (ResourceTO resourceTO : resourcesTos) \n-                resources.add(resourceTO);\n-        } else {\n-\n-            for (String resource : userTO.getResources()) {\n-                for (ResourceTO resourceTO : resourcesTos) {\n-                    if (!resource.equals(resourceTO.getName())) \n-                        resources.add(resourceTO);\n-                }\n-            }\n-        }*/\n         return resources;\n     }\n "},{"sha":"a24fb84a9c32907828ce6f44e4505f33a57b9059","filename":"console/src/main/java/org/syncope/console/pages/Users.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -126,6 +126,13 @@ protected void populateItem(final ListItem item) {\n \n                 item.add(new Label(\"id\",userTO.getId()+\"\"));\n \n+                item.add(new Label(\"status\",userTO.getStatus()));\n+\n+                if(userTO.getToken() != null && !userTO.getToken().equals(\"\"))\n+                    item.add(new Label(\"token\",getString(\"tokenValued\")));\n+                else\n+                    item.add(new Label(\"token\",getString(\"tokenNotValued\")));\n+\n                 item.add(new ListView(\"selectedAttributes\", attributesToDisplay(userTO)) {\n \n                     @Override"},{"sha":"ed92eb1ca7249bb8efb258bfda6393e83023f317","filename":"console/src/main/java/org/syncope/console/rest/ConnectorsRestClient.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorsRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorsRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorsRestClient.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -45,9 +45,11 @@ public ConnectorInstanceTOs getAllConnectors() {\n      * @param schemaTO\n      */\n     public void createConnector(ConnectorInstanceTO connectorTO) {\n+      ConnectorInstanceTO actual = null;\n+\n         try {\n-        restClient.getRestTemplate().postForObject(restClient.getBaseURL() +\n-                \"connector/create\", connectorTO, ConnectorInstanceTO.class);\n+       actual = restClient.getRestTemplate().postForObject(restClient.getBaseURL() +\n+                \"connector/create.json\", connectorTO, ConnectorInstanceTO.class);\n         }\n         catch (SyncopeClientCompositeErrorException e) {\n             e.printStackTrace();"},{"sha":"a948255190eb529142e07a3662a6df8f4aab9d6f","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/AjaxCheckBoxPanel.java","status":"modified","additions":20,"deletions":4,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxCheckBoxPanel.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -14,8 +14,6 @@\n  */\n package org.syncope.console.wicket.markup.html.form;\n \n-import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.ajax.markup.html.form.AjaxCheckBox;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n@@ -31,9 +29,27 @@ public class AjaxCheckBoxPanel extends Panel {\n      * @param IModel<?> object\n      * @param required flag\n      */\n-    public AjaxCheckBoxPanel(String id, String name, IModel<Boolean> model,boolean required) {\n+    public AjaxCheckBoxPanel(String id, String name, IModel<Boolean> model,\n+                             boolean required) {\n         super(id,model);\n \n-        add(new UpdatingCheckBox(\"checkboxField\", model).setLabel(new Model(name)));\n+        add(new UpdatingCheckBox(\"checkboxField\", model)\n+                .setLabel(new Model(name)));\n+    }\n+\n+    /**\n+     * Build a AjaxCheckBoxPanel.\n+     * @param component id\n+     * @param label name\n+     * @param IModel<?> object\n+     * @param required flag\n+     * @param readonly flag\n+     */\n+    public AjaxCheckBoxPanel(String id, String name, IModel<Boolean> model,\n+                             boolean required,boolean readonly) {\n+        super(id,model);\n+\n+        add(new UpdatingCheckBox(\"checkboxField\", model)\n+                .setLabel(new Model(name)).setEnabled(!readonly));\n     }\n }"},{"sha":"fdce6cb8b2af3abe446ab6ce68b242be6ea47472","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/AjaxTextFieldPanel.java","status":"modified","additions":24,"deletions":1,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -28,7 +28,8 @@ public class AjaxTextFieldPanel extends Panel {\n      * @param IModel<?> object\n      * @param required flag\n      */\n-    public AjaxTextFieldPanel(String id,String name,IModel model,boolean required) {\n+    public AjaxTextFieldPanel(String id,String name,IModel model,\n+                              boolean required) {\n         super(id,model);\n \n         if(required)\n@@ -39,4 +40,26 @@ public AjaxTextFieldPanel(String id,String name,IModel model,boolean required) {\n         add(new UpdatingTextField(\"textField\", model).setRequired(required)\n                                  .setLabel(new Model(name)));\n     }\n+\n+    /**\n+     * Build AjaxTextFieldPanel.\n+     * @param component id\n+     * @param label name\n+     * @param IModel<?> object\n+     * @param required flag\n+     * @param readonly flag\n+     */\n+    public AjaxTextFieldPanel(String id,String name,IModel model,\n+                              boolean required,boolean readonly) {\n+        super(id,model);\n+\n+        if(required)\n+            add(new Label(\"required\",\"*\"));\n+        else\n+            add(new Label(\"required\",\"\"));\n+\n+        add(new UpdatingTextField(\"textField\", model).setRequired(required)\n+                                 .setLabel(new Model(name))\n+                                 .setEnabled(!readonly));\n+    }\n }\n\\ No newline at end of file"},{"sha":"395942406407ebd942223364d6c422b75ddde230","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/DateFieldPanel.java","status":"modified","additions":33,"deletions":6,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDateFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDateFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDateFieldPanel.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -1,6 +1,4 @@\n-/*\n- *  Copyright 2010 luis.\n- * \n+/* \n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n  *  You may obtain a copy of the License at\n@@ -14,7 +12,6 @@\n  *  limitations under the License.\n  *  under the License.\n  */\n-\n package org.syncope.console.wicket.markup.html.form;\n \n import java.util.Date;\n@@ -35,7 +32,35 @@ public class DateFieldPanel extends Panel {\n      * @param IModel<?> object\n      * @param required flag\n      */\n-    public DateFieldPanel(String id, String name ,IModel<?> model, boolean required) {\n+    public DateFieldPanel(String id, String name ,IModel<?> model,\n+                          boolean required) {\n+        super(id, model);\n+\n+        if (required) {\n+            add(new Label(\"required\", \"*\"));\n+        } else {\n+            add(new Label(\"required\", \"\"));\n+        }\n+\n+        UpdatingTextField dateField = new UpdatingTextField(\"dateField\",\n+                                      model, Date.class);\n+        dateField.setRequired(required);\n+        dateField.setLabel(new Model(name));\n+        dateField.add(new DatePicker());\n+\n+        add(dateField);\n+    }\n+\n+    /**\n+     * Build a DateFieldPanel.\n+     * @param component id\n+     * @param label name\n+     * @param IModel<?> object\n+     * @param required flag\n+     * @param readonly flag\n+     */\n+    public DateFieldPanel(String id, String name ,IModel<?> model, \n+                          boolean required,boolean readonly) {\n         super(id, model);\n \n         if (required) {\n@@ -44,8 +69,10 @@ public DateFieldPanel(String id, String name ,IModel<?> model, boolean required)\n             add(new Label(\"required\", \"\"));\n         }\n \n-        UpdatingTextField dateField = new UpdatingTextField(\"dateField\", model, Date.class);\n+        UpdatingTextField dateField = new UpdatingTextField(\"dateField\",\n+                                      model, Date.class);\n         dateField.setRequired(required);\n+        dateField.setEnabled(!readonly);\n         dateField.setLabel(new Model(name));\n         dateField.add(new DatePicker());\n "},{"sha":"5819f1687881bf3c4eed85d0892401e9ae9820f5","filename":"console/src/main/resources/configuration.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -1 +1 @@\n-baseURL=http://192.168.0.138:8080/syncope/rest/\n\\ No newline at end of file\n+baseURL=http://localhost:8080/syncope/rest/"},{"sha":"335d9a332dbb67a1d55bc2173980d17932e7f4b2","filename":"console/src/main/resources/org/syncope/console/pages/Connectors.html","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -77,15 +77,17 @@ <h1><wicket:message key=\"existing_connectors\"/></h1>\n                 <table id=\"connectors\" class=\"ui-widget ui-widget-content\" wicket:id=\"connectorsContainer\">\n                     <thead>\n                         <tr class=\"ui-widget-header\">\n+                            <th><wicket:message key=\"id\"/></th>\n                             <th><wicket:message key=\"name\"/></th>\n-                    <th><wicket:message key=\"version\"/></th>\n-                    <th><wicket:message key=\"bundleName\"/></th>\n-                    <th><wicket:message key=\"edit\"/></th>\n-                    <th><wicket:message key=\"delete\"/></th>\n+                            <th><wicket:message key=\"version\"/></th>\n+                            <th><wicket:message key=\"bundleName\"/></th>\n+                            <th><wicket:message key=\"edit\"/></th>\n+                            <th><wicket:message key=\"delete\"/></th>\n                     </tr>\n                     </thead>\n                     <tbody>\n                         <tr wicket:id=\"connectors\" >\n+                            <td><span wicket:id=\"id\">[label id]</span></td>\n                             <td><span wicket:id=\"name\">[label name]</span></td>\n                             <td><span wicket:id=\"version\">[label version]</span></td>\n                             <td><span wicket:id=\"bundleName\">[label bundle-name]</span></td>"},{"sha":"4cc65e9735be2fb7b235c7ad138401defa51789e","filename":"console/src/main/resources/org/syncope/console/pages/Connectors.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -1,8 +1,10 @@\n tab1=Connectors\n+id=Id\n name=Name\n version=Version\n bundleName=Bundle name\n edit=Edit\n delete=Delete\n existing_connectors=Existing connectors\n create-link=Create new connector\n+delete_error=Operation forbidden:the connector you're trying to delete is connected to a Resource"},{"sha":"fb06fb773aa6634f32656aeb7c345f1db8ecb93d","filename":"console/src/main/resources/org/syncope/console/pages/ConnectorsModalPage.html","status":"modified","additions":53,"deletions":28,"changes":81,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -12,33 +12,58 @@\n  limitations under the License.\n  under the License.\n -->\n+<wicket:head>\n+       <style type=\"text/css\">\n+            table.palette td.header {\n+                    background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n+                        repeat-x scroll 50% 50% #E6E6E6 !important;\n+             }\n+       </style>\n+</wicket:head>\n <wicket:extend>\n-        <div id=\"dialog-form\" title=\"Create new Connector\">\n-            <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n-            <form wicket:id=\"ConnectorForm\">\n-                <div wicket:id=\"feedback\" style=\"color:red;padding:5px\"/>\n-                <fieldset>\n-\n-                    <label for=\"bundleName\"><wicket:message key=\"bundleName\"/></label>\n-                    <select id=\"bundle\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"bundle\" />\n-\n-                   \n-                        <label for=\"name\"><wicket:message key=\"name\"/></label>\n-                        <input type=\"text\" id=\"name\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"connectorName\" />\n-\n-                        <label for=\"version\"><wicket:message key=\"version\"/></label>\n-                        <input type=\"text\" id=\"version\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"version\" />\n-                   \n-\n-                    <div wicket:id=\"propertiesContainer\">\n-                        <div wicket:id=\"connectorProperties\">\n-                            <span wicket:id=\"key\"/>\n-                            <input type=\"text\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"value\" />\n-                        </div>\n-                    </div>\n-\n-                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"submit\"/>\n-                </fieldset>\n-            </form>\n-        </div>\n+    <form wicket:id=\"ConnectorForm\">\n+    <div id=\"tabs\">\n+            <ul>\n+                <li  class=\"tabs-selected\"\n+                     ><a href=\"#tabs-1\"><span><wicket:message key=\"tab1\"/></span></a>\n+                </li>\n+                <li><a href=\"#tabs-2\"><span><wicket:message key=\"tab2\"/></span></a></li>\n+            </ul>\n+            <div id=\"tabs-1\">\n+                <div id=\"dialog-form\" title=\"Create new Connector\">\n+                    <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n+                        <div wicket:id=\"feedback\" style=\"color:red;padding:5px\"/>\n+                        <fieldset>\n+\n+                            <label for=\"bundleName\"><wicket:message key=\"bundleName\"/></label>\n+                            <select id=\"bundle\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"bundle\" />\n+\n+\n+                                <label for=\"name\"><wicket:message key=\"name\"/></label>\n+                                <input type=\"text\" id=\"name\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"connectorName\" />\n+\n+                                <label for=\"version\"><wicket:message key=\"version\"/></label>\n+                                <input type=\"text\" id=\"version\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"version\" />\n+\n+\n+                            <div wicket:id=\"propertiesContainer\">\n+                                <div wicket:id=\"connectorProperties\">\n+                                    <span wicket:id=\"key\"/>\n+                                    <input type=\"text\" class=\"text ui-widget-content ui-corner-all\" wicket:id=\"value\" />\n+                                </div>\n+                            </div>\n+\n+                            \n+                        </fieldset>\n+                    \n+                </div>\n+            </div>\n+            <div id=\"tabs-2\">\n+\n+                <span wicket:id=\"capabilitiesPalette\"/>\n+\n+            </div>\n+            </div>\n+        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"submit\"/>\n+        </form>\n    </wicket:extend>\n\\ No newline at end of file"},{"sha":"0c51d4cced0ece4829e96337d2509a955c6410ee","filename":"console/src/main/resources/org/syncope/console/pages/ConnectorsModalPage.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -1,3 +1,5 @@\n+tab1=General\n+tab2=Capabilities\n name=Name\n bundleName=Bundle name\n version=Version"},{"sha":"899d866d71aa08734d00bc089fbbde8bcdc22fcc","filename":"console/src/main/resources/org/syncope/console/pages/ConnectorsModalPage_it.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorsModalPage_it.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -7,3 +7,5 @@ edit_attribute=Edit attribute\n serviceName=Nome servizio\n endpoint=Endpoint\n title=Connettori\n+tab1=Generale\n+tab2=Capabilities"},{"sha":"2552abe7d38f5d9fd517968118857f9b7c9406c4","filename":"console/src/main/resources/org/syncope/console/pages/Connectors_it.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors_it.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -6,3 +6,5 @@ version=Versione\n bundleName=Bundle name\n edit=Modifica\n delete=Elimina\n+id=Id\n+delete_error=Operazione vietata: il connettore che si desidera rimuovere \\u00E8 correlato ad una risorsa"},{"sha":"6a913906188fd7a8543c046593470478d7fc8e98","filename":"console/src/main/resources/org/syncope/console/pages/MembershipModalPage.html","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -12,8 +12,6 @@\n  limitations under the License.\n  under the License.\n -->\n-<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n-    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n <wicket:extend>\n         <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n         <form wicket:id=\"MembershipForm\">\n@@ -36,6 +34,12 @@\n                                     <input type=\"button\" wicket:id=\"drop\"/>\n                                 </td>\n                             </tr>\n+                            <!-- each time this table is rendered, stripe rows' color -->\n+                            <script type=\"text/javascript\">\n+                                $(function() {\n+                                    $('.stripedTable tr:even').addClass(\"alt\");\n+                                });\n+                            </script>\n                          </table>\n                     </div>\n                     </div>"},{"sha":"92e5e12b925c49b45dffd7e0adc51347104a3572","filename":"console/src/main/resources/org/syncope/console/pages/RoleModalPage.html","status":"modified","additions":9,"deletions":3,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -12,14 +12,14 @@\n  limitations under the License.\n  under the License.\n -->\n-<wicket:head>\n+<!--wicket:head>\n     <style>\n         table.palette td.header {\n             background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n                 repeat-x scroll 50% 50% #E6E6E6 !important;\n         }\n     </style>\n-</wicket:head>\n+</wicket:head-->\n \n <wicket:extend>\n     <div style=\"margin:10px\" title=\"Create new Resource-Mappings\">\n@@ -32,7 +32,7 @@\n                     <li><a href=\"#tabs-3\"><span><wicket:message key=\"tab3\"/></span></a></li>\n                 </ul>\n                     <div id=\"tabs-1\">\n-                        <table style=\"font-size:14px\" width=\"100%\" wicket:id=\"container\">\n+                        <table class=\"stripedTable\" style=\"font-size:14px\" width=\"100%\" wicket:id=\"container\">\n                             <tr>\n                                 <td><wicket:message key=\"name\"/></td>\n                                 <td>\n@@ -53,6 +53,12 @@\n                                     <input type=\"button\" wicket:id=\"drop\"/>\n                                 </td>\n                             </tr>\n+                            <!-- each time this table is rendered, stripe rows' color -->\n+                            <script type=\"text/javascript\">\n+                                $(function() {\n+                                    $('.stripedTable tr:even').addClass(\"alt\");\n+                                });\n+                            </script>\n                          </table>\n                     </div>\n                     <div id=\"tabs-3\">"},{"sha":"97dbd45459e5ab5efcd818f532f797e48e6fb1ae","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage.html","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -32,6 +32,8 @@\n                 <span id=\"virtual\" wicket:id=\"virtual\" class=\"radio\"/>\n                 <label for=\"multivalue\"><wicket:message key=\"multivalue\"/></label>\n                 <span id=\"multivalue\" wicket:id=\"multivalue\" class=\"radio\"/>\n+                <label for=\"readonly\"><wicket:message key=\"readonly\"/></label>\n+                <span id=\"readonly\" wicket:id=\"readonly\" class=\"radio\"/>\n                 <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"submit\"/>\n             </fieldset>\n         </form>"},{"sha":"f5737587f76ebeee9e2338e2f573e8397f124fd5","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -15,3 +15,4 @@ existing_schemas=Existing Schemas:\n action=Action\n edit_attribute=Edit attribute\n title=Schema\n+readonly=Read-only"},{"sha":"d84e19fcb09cefc162367231c303352a850dac1b","filename":"console/src/main/resources/org/syncope/console/pages/SchemaModalPage_it.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage_it.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -14,4 +14,5 @@ conversionPattern=Conversion pattern\n existing_schemas=Schema esistenti\n action=Azione\n edit_attribute=Modifica attributo\n-title=Schema\n\\ No newline at end of file\n+title=Schema\n+readonly=Read-only"},{"sha":"7cff6a5c003a7f2d9aecea013389213641616e5e","filename":"console/src/main/resources/org/syncope/console/pages/SyncopeModalPage.html","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSyncopeModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSyncopeModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSyncopeModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -42,6 +42,24 @@\n                 $(\"#tabs\").tabs();\n             });\n         </script>\n+\n+        <style type=\"text/css\">\n+            input[disabled] {\n+                background-color: #ddd;\n+            }\n+\n+            table.palette td.header {\n+            background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n+                repeat-x scroll 50% 50% #E6E6E6 !important;\n+            }\n+            tr.alt td {\n+            background: #eff3ea;\n+            }\n+\n+            .stripedTable{\n+            border:1px solid #AAAAAA;\n+            }\n+        </style>\n     </head>\n     <body>\n         <wicket:child />"},{"sha":"c49fe68e7cd08e4cd0967f404d03c7f73013f73d","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.html","status":"modified","additions":19,"deletions":2,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -13,7 +13,7 @@\n  under the License.\n -->\n <wicket:head>\n-    <style>\n+    <style type=\"text/css\">\n         table.palette td.header {\n             background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n                 repeat-x scroll 50% 50% #E6E6E6 !important;\n@@ -29,7 +29,18 @@\n             border: 1px solid gray;\n             border-radius: 3px; /* Standard CSS */\n         }\n+/*\n+        tr.alt td {\n+            background: #eff3ea;\n+        }\n+\n+        .stripedTable{\n+            border:1px solid #AAAAAA;\n+        }\n+  */\n     </style>\n+\n+\n </wicket:head>\n \n <wicket:extend>\n@@ -45,7 +56,7 @@\n                 <li><a href=\"#tabs-4\"><span><wicket:message key=\"tab4\"/></span></a></li>\n             </ul>\n             <div id=\"tabs-1\">\n-                <table style=\"font-size:14px\" wicket:id=\"container\">\n+                <table class=\"stripedTable\" style=\"font-size:14px\" wicket:id=\"container\">\n                     <tr wicket:id=\"userSchemas\">\n                         <td><span wicket:id=\"name\"/></td>\n                         <td>\n@@ -68,6 +79,12 @@\n                             </span>\n                         </td>\n                     </tr>\n+                    <!-- each time this table is rendered, stripe rows' color -->\n+                    <script type=\"text/javascript\">\n+                        $(function() {\n+                            $('.stripedTable tr:even').addClass(\"alt\");\n+                        });\n+                    </script>\n                 </table>\n             </div>\n "},{"sha":"55ee46c38668de37a4acf6af3f3e43cb72b6a9ef","filename":"console/src/main/resources/org/syncope/console/pages/Users.html","status":"modified","additions":8,"deletions":5,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.html?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -12,8 +12,6 @@\n  limitations under the License.\n  under the License.\n -->\n-<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n-    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n <wicket:extend>\n     <div id=\"testa\">\n         <img src=\"img/logo.png\" alt=\"syncope\" title=\"syncope\" id=\"logo\" />\n@@ -79,6 +77,8 @@ <h1>Existing Users:</h1>\n                     <thead>\n                         <tr class=\"ui-widget-header\">\n                             <th><wicket:message key=\"id\"/></th>\n+                            <th><wicket:message key=\"status\"/></th>\n+                            <th><wicket:message key=\"token\"/></th>\n                             <th wicket:id=\"usersSchema\">\n                                 <span wicket:id=\"attribute\"/>\n                             </th>\n@@ -91,6 +91,12 @@ <h1>Existing Users:</h1>\n                             <td>\n                                 <span wicket:id=\"id\">[id]</span>\n                             </td>\n+                            <td>\n+                                <span wicket:id=\"status\">[status]</span>\n+                            </td>\n+                            <td>\n+                                <span wicket:id=\"token\">[token]</span>\n+                            </td>\n                             <td wicket:id=\"selectedAttributes\">\n                                 <span wicket:id=\"name\">[selected attribute]</span>\n                             </td>\n@@ -107,9 +113,6 @@ <h1>Existing Users:</h1>\n                         </tr>\n                     </tbody>\n                 </table>\n-\n-                <!--table id=\"usersTable\" class=\"ui-widget ui-widget-content\" wicket:id=\"usersTable\"/-->\n-\n             </div>\n \n             <div wicket:id=\"createUserWin\">[Show modal window for creating user]</div>"},{"sha":"e0719677fd966524ea516234521233be727931f7","filename":"console/src/main/resources/org/syncope/console/pages/Users.properties","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -10,4 +10,8 @@ create_user=Create new user\n edit=Edit\n delete=Delete\n id=Id\n+status=Status\n+token=Token\n change_attributes=Change attributes view\n+tokenValued=valued\n+tokenNotValued=Not valued"},{"sha":"0c273d84653b1bd2d8c8093c55b0fb2da15cb7cd","filename":"console/src/main/resources/org/syncope/console/pages/Users_it.properties","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers_it.properties?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -12,3 +12,7 @@ edit=Modifica\n delete=Elimina\n id=Id\n change_attributes=Cambia vista attributi\n+status=Stato\n+token=Token\n+tokenValued=Impostato\n+tokenNotValued=Non impostato"},{"sha":"46325297b761c0703ca0ccc57498f6ee49fd50af","filename":"console/src/main/webapp/css/images/ui-bg_highlight-soft_75_cccccc_1x100_red.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fui-bg_highlight-soft_75_cccccc_1x100_red.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fui-bg_highlight-soft_75_cccccc_1x100_red.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fui-bg_highlight-soft_75_cccccc_1x100_red.png?ref=2d85c31a2aa31c0659484a6038fc393540b37be2"},{"sha":"c98c1fd2986aa2c3c70b102f3cc050490a3e657e","filename":"console/src/main/webapp/css/images/warning.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fwarning.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fwarning.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fimages%2Fwarning.png?ref=2d85c31a2aa31c0659484a6038fc393540b37be2"},{"sha":"4c23f9fc301fdab41c8cbd0f1937d72da9c115f5","filename":"console/src/main/webapp/css/stile_sy.css","status":"modified","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstile_sy.css","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstile_sy.css","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstile_sy.css?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -136,6 +136,25 @@ body {\n     padding: 5px;\n }\n \n+.feedbackPanelERROR {\n+    color: black;\n+    font-weight: bold;\n+    margin: 0px;\n+    list-style-type: none;\n+    background:url(\"images/ui-bg_highlight-soft_75_cccccc_1x100_red.png\") repeat-x scroll 50% 50% #CCCCCC;\n+    -moz-border-radius: 3px;\n+    -webkit-border-radius: 3px;\n+    border: 1px solid gray;\n+    border-radius: 3px;\n+    padding: 5px;\n+}\n+\n+.feedbackPanelERROR span {\n+    background: url(\"images/warning.png\") no-repeat left;\n+    border:0 none;\n+    font-size:12px;\n+    padding-left: 24px;\n+}\n .feedbackPanelINFO span {\n     background: url(\"../img/ok.png\") no-repeat left;\n     border:0 none;"},{"sha":"55d63a1b5c677fc7222bd676b3724ca28bd2645b","filename":"core/src/main/java/org/syncope/core/persistence/beans/ConnectorInstance.java","status":"modified","additions":19,"deletions":26,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FConnectorInstance.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FConnectorInstance.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FConnectorInstance.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -15,7 +15,7 @@\n package org.syncope.core.persistence.beans;\n \n import java.util.ArrayList;\n-import java.util.HashSet;\n+import java.util.EnumSet;\n import java.util.List;\n import java.util.Set;\n import javax.persistence.CascadeType;\n@@ -28,29 +28,21 @@\n import javax.persistence.Id;\n import javax.persistence.Lob;\n import javax.persistence.OneToMany;\n+import javax.persistence.TableGenerator;\n import org.hibernate.annotations.CollectionOfElements;\n+import org.syncope.types.ConnectorCapability;\n \n @Entity\n public class ConnectorInstance extends AbstractBaseBean {\n \n     /**\n-     * Enum of all possible capabilities that a connector instance can expose.\n+     * This autogenerated id leads to strange behavior with PostgreSQL, when\n+     * using GenerationType.AUTO.\n      */\n-    public enum Capabitily {\n-\n-        SYNC_CREATE,\n-        ASYNC_CREATE,\n-        SYNC_UPDATE,\n-        ASYNC_UPDATE,\n-        SYNC_DELETE,\n-        ASYNC_DELETE,\n-        SEARCH,\n-        RESOLVE,\n-        ONDEMAND_SYNC,\n-        AUTO_SYNC\n-    }\n     @Id\n-    @GeneratedValue(strategy = GenerationType.AUTO)\n+    @GeneratedValue(strategy = GenerationType.TABLE,\n+    generator = \"SEQ_ConnectorInstance\")\n+    @TableGenerator(name = \"SEQ_ConnectorInstance\", allocationSize = 20)\n     private Long id;\n     /**\n      * Connector class name prefix used to retrieve configuration bean\n@@ -74,9 +66,9 @@ public enum Capabitily {\n     /**\n      * The set of capabilities supported by this connector instance.\n      */\n-    @CollectionOfElements(targetElement = Capabitily.class)\n+    @CollectionOfElements(targetElement = ConnectorCapability.class)\n     @Enumerated(EnumType.STRING)\n-    private Set<Capabitily> capabilities;\n+    private Set<ConnectorCapability> capabilities;\n     /**\n      * The main configuration for the connector instance.\n      * This is directly implemented by the Configuration bean class which\n@@ -94,7 +86,7 @@ public enum Capabitily {\n     private List<TargetResource> resources;\n \n     public ConnectorInstance() {\n-        capabilities = new HashSet<Capabitily>();\n+        capabilities = EnumSet.noneOf(ConnectorCapability.class);\n     }\n \n     public String getVersion() {\n@@ -158,22 +150,23 @@ public boolean removeResource(TargetResource resource) {\n         return this.resources.remove(resource);\n     }\n \n-    public boolean addCapability(Capabitily capabitily) {\n+    public boolean addCapability(ConnectorCapability capabitily) {\n         return capabilities.add(capabitily);\n     }\n \n-    public boolean removeCapability(Capabitily capabitily) {\n+    public boolean removeCapability(ConnectorCapability capabitily) {\n         return capabilities.remove(capabitily);\n     }\n \n-    public Set<Capabitily> getCapabilities() {\n+    public Set<ConnectorCapability> getCapabilities() {\n         return capabilities;\n     }\n \n-    public void setCapabilities(Set<Capabitily> capabilities) {\n-        capabilities.clear();\n-        if (capabilities != null) {\n-            this.capabilities.addAll(capabilities);\n+    public void setCapabilities(Set<ConnectorCapability> capabilities) {\n+        if (capabilities == null || capabilities.isEmpty()) {\n+            this.capabilities.clear();\n+        } else {\n+            this.capabilities = capabilities;\n         }\n     }\n }"},{"sha":"9b88a63961d468ec8ee497adf9a43a9e1da854ff","filename":"core/src/main/java/org/syncope/core/persistence/propagation/ConnectorFacadeProxy.java","status":"modified","additions":9,"deletions":8,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -31,6 +31,7 @@\n import org.syncope.client.to.PropertyTO;\n import org.syncope.core.persistence.ConnectorInstanceLoader;\n import org.syncope.core.persistence.beans.ConnectorInstance;\n+import org.syncope.types.ConnectorCapability;\n \n /**\n  * Intercept calls to ConnectorFacade's methods and check if the correspondant\n@@ -52,7 +53,7 @@ public class ConnectorFacadeProxy {\n      * Set of configure connecto instance capabilities.\n      * @see org.syncope.core.persistence.beans.ConnectorInstance\n      */\n-    private final Set<ConnectorInstance.Capabitily> capabitilies;\n+    private final Set<ConnectorCapability> capabitilies;\n \n     /**\n      * Use the passed connector instance to build a ConnectorFacade that will\n@@ -154,9 +155,9 @@ public Uid create(final PropagationManager.PropagationMode propagationMode,\n \n         if (propagationMode == PropagationManager.PropagationMode.SYNC\n                 ? capabitilies.contains(\n-                ConnectorInstance.Capabitily.SYNC_CREATE)\n+                ConnectorCapability.SYNC_CREATE)\n                 : capabitilies.contains(\n-                ConnectorInstance.Capabitily.ASYNC_CREATE)) {\n+                ConnectorCapability.ASYNC_CREATE)) {\n \n             result = connector.create(oclass, attrs, options);\n             if (result == null) {\n@@ -173,7 +174,7 @@ public Uid resolveUsername(final ObjectClass objectClass,\n \n         Uid result = null;\n \n-        if (capabitilies.contains(ConnectorInstance.Capabitily.RESOLVE)) {\n+        if (capabitilies.contains(ConnectorCapability.RESOLVE)) {\n             result = connector.resolveUsername(objectClass, username, options);\n         }\n \n@@ -190,9 +191,9 @@ public Uid update(final PropagationManager.PropagationMode propagationMode,\n \n         if (propagationMode == PropagationManager.PropagationMode.SYNC\n                 ? capabitilies.contains(\n-                ConnectorInstance.Capabitily.SYNC_UPDATE)\n+                ConnectorCapability.SYNC_UPDATE)\n                 : capabitilies.contains(\n-                ConnectorInstance.Capabitily.ASYNC_UPDATE)) {\n+                ConnectorCapability.ASYNC_UPDATE)) {\n \n             result = connector.update(\n                     objclass, uid, replaceAttributes, options);\n@@ -211,9 +212,9 @@ public void delete(final PropagationManager.PropagationMode propagationMode,\n \n         if (propagationMode == PropagationManager.PropagationMode.SYNC\n                 ? capabitilies.contains(\n-                ConnectorInstance.Capabitily.SYNC_DELETE)\n+                ConnectorCapability.SYNC_DELETE)\n                 : capabitilies.contains(\n-                ConnectorInstance.Capabitily.ASYNC_DELETE)) {\n+                ConnectorCapability.ASYNC_DELETE)) {\n \n             connector.delete(objClass, uid, options);\n         }"},{"sha":"86dd3588f733b013cb4338d4c7a21e76bd48b7d1","filename":"core/src/main/java/org/syncope/core/rest/controller/UserController.java","status":"modified","additions":12,"deletions":11,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -74,7 +74,8 @@ public class UserController extends AbstractController {\n     @Autowired\n     private PropagationManager propagationManager;\n \n-    private Integer findWorkflowAction(Long workflowId, String actionName) {\n+    public Integer findWorkflowAction(final Long workflowId,\n+            final String actionName) {\n \n         WorkflowDescriptor workflowDescriptor =\n                 userWorkflow.getWorkflowDescriptor(Constants.USER_WORKFLOW);\n@@ -101,8 +102,9 @@ private Integer findWorkflowAction(Long workflowId, String actionName) {\n         return actionId;\n     }\n \n-    public SyncopeUser doExecuteAction(String actionName, Long userId,\n-            Map<String, Object> moreInputs)\n+    public SyncopeUser doExecuteAction(final String actionName,\n+            final Long userId,\n+            final Map<String, Object> moreInputs)\n             throws WorkflowException, NotFoundException {\n \n         SyncopeUser user = syncopeUserDAO.find(userId);\n@@ -225,13 +227,12 @@ public WorkflowActionsTO getActions(@PathVariable(\"userId\") Long userId)\n \n         WorkflowActionsTO result = new WorkflowActionsTO();\n \n-        WorkflowDescriptor workflowDescriptor =\n-                userWorkflow.getWorkflowDescriptor(Constants.USER_WORKFLOW);\n         int[] availableActions = userWorkflow.getAvailableActions(\n                 user.getWorkflowId(), Collections.EMPTY_MAP);\n         for (int i = 0; i < availableActions.length; i++) {\n-            result.addAction(workflowDescriptor.getAction(\n-                    availableActions[i]).getName());\n+            result.addAction(\n+                    userWorkflow.getWorkflowDescriptor(Constants.USER_WORKFLOW).\n+                    getAction(availableActions[i]).getName());\n         }\n \n         return result;\n@@ -275,12 +276,12 @@ public ModelAndView getStatus(@PathVariable(\"userId\") Long userId)\n \n         List<Step> currentSteps = userWorkflow.getCurrentSteps(\n                 user.getWorkflowId());\n-        if (currentSteps == null || currentSteps.isEmpty()) {\n-            return null;\n-        }\n \n         ModelAndView mav = new ModelAndView();\n-        mav.addObject(currentSteps.iterator().next().getStatus());\n+        if (currentSteps != null && !currentSteps.isEmpty()) {\n+            mav.addObject(currentSteps.iterator().next().getStatus());\n+        }\n+\n         return mav;\n     }\n "},{"sha":"e4440a03e7b94a1c6ea6409749767f3d28ab0743","filename":"core/src/main/java/org/syncope/core/rest/data/ConnectorInstanceDataBinder.java","status":"modified","additions":30,"deletions":26,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FConnectorInstanceDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FConnectorInstanceDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FConnectorInstanceDataBinder.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -42,13 +42,12 @@ public class ConnectorInstanceDataBinder {\n      */\n     private static final Logger LOG = LoggerFactory.getLogger(\n             ConnectorInstanceDataBinder.class);\n-    private static final String[] ignoreProperties = {\n-        \"id\", \"resources\", \"xmlConfiguration\", \"configuration\"};\n+    private static final String[] ignoreProperties = {\"id\", \"resources\"};\n     @Autowired\n     private ConnectorInstanceDAO connectorInstanceDAO;\n \n     public ConnectorInstance getConnectorInstance(\n-            ConnectorInstanceTO connectorTO)\n+            ConnectorInstanceTO connectorInstanceTO)\n             throws SyncopeClientCompositeErrorException {\n \n         SyncopeClientCompositeErrorException compositeErrorException =\n@@ -59,31 +58,33 @@ public ConnectorInstance getConnectorInstance(\n                 new SyncopeClientException(\n                 SyncopeClientExceptionType.RequiredValuesMissing);\n \n-        if (connectorTO.getBundleName() == null) {\n+        if (connectorInstanceTO.getBundleName() == null) {\n             requiredValuesMissing.addElement(\"bundlename\");\n         }\n \n-        if (connectorTO.getVersion() == null) {\n+        if (connectorInstanceTO.getVersion() == null) {\n             requiredValuesMissing.addElement(\"bundleversion\");\n         }\n \n-        if (connectorTO.getConnectorName() == null) {\n+        if (connectorInstanceTO.getConnectorName() == null) {\n             requiredValuesMissing.addElement(\"connectorname\");\n         }\n \n-        if (connectorTO.getConfiguration() == null\n-                || connectorTO.getConfiguration().isEmpty()) {\n+        if (connectorInstanceTO.getConfiguration() == null\n+                || connectorInstanceTO.getConfiguration().isEmpty()) {\n             requiredValuesMissing.addElement(\"configuration\");\n         }\n \n         ConnectorInstance connectorInstance = new ConnectorInstance();\n \n         BeanUtils.copyProperties(\n-                connectorTO, connectorInstance, ignoreProperties);\n+                connectorInstanceTO, connectorInstance, ignoreProperties);\n+        connectorInstance.getCapabilities().addAll(\n+                connectorInstanceTO.getCapabilities());\n \n         connectorInstance.setXmlConfiguration(\n                 ConnectorInstanceLoader.serializeToXML(\n-                connectorTO.getConfiguration()));\n+                connectorInstanceTO.getConfiguration()));\n \n         // Throw composite exception if there is at least one element set\n         // in the composing exceptions\n@@ -101,7 +102,7 @@ public ConnectorInstance getConnectorInstance(\n \n     public ConnectorInstance updateConnectorInstance(\n             Long connectorInstanceId,\n-            ConnectorInstanceTO connectorTO)\n+            ConnectorInstanceTO connectorInstanceTO)\n             throws SyncopeClientCompositeErrorException {\n \n         SyncopeClientCompositeErrorException compositeErrorException =\n@@ -119,47 +120,48 @@ public ConnectorInstance updateConnectorInstance(\n         ConnectorInstance connectorInstance =\n                 connectorInstanceDAO.find(connectorInstanceId);\n \n-\n-        if (connectorTO.getBundleName() != null) {\n-            connectorInstance.setBundleName(connectorTO.getBundleName());\n+        if (connectorInstanceTO.getBundleName() != null) {\n+            connectorInstance.setBundleName(\n+                    connectorInstanceTO.getBundleName());\n         }\n \n-        if (connectorTO.getVersion() != null) {\n-            connectorInstance.setVersion(connectorTO.getVersion());\n+        if (connectorInstanceTO.getVersion() != null) {\n+            connectorInstance.setVersion(connectorInstanceTO.getVersion());\n         }\n \n-        if (connectorTO.getConnectorName() != null) {\n-            connectorInstance.setConnectorName(connectorTO.getConnectorName());\n+        if (connectorInstanceTO.getConnectorName() != null) {\n+            connectorInstance.setConnectorName(\n+                    connectorInstanceTO.getConnectorName());\n         }\n \n-        if (connectorTO.getConfiguration() != null\n-                || connectorTO.getConfiguration().isEmpty()) {\n+        if (connectorInstanceTO.getConfiguration() != null\n+                || connectorInstanceTO.getConfiguration().isEmpty()) {\n \n             connectorInstance.setXmlConfiguration(\n                     ConnectorInstanceLoader.serializeToXML(\n-                    connectorTO.getConfiguration()));\n+                    connectorInstanceTO.getConfiguration()));\n         }\n \n         try {\n             if (LOG.isDebugEnabled()) {\n                 LOG.debug(URLEncoder.encode(\n                         ConnectorInstanceLoader.serializeToXML(\n-                        connectorTO.getConfiguration()),\n+                        connectorInstanceTO.getConfiguration()),\n                         \"UTF-8\"));\n             }\n-            // Throw composite exception if there is at least one element set\n-            // in the composing exceptions\n         } catch (UnsupportedEncodingException ex) {\n             LOG.error(\"Unexpected exception\", ex);\n         }\n \n-        // Throw composite exception if there is at least one element set\n-        // in the composing exceptions\n+        connectorInstance.setCapabilities(\n+                connectorInstanceTO.getCapabilities());\n \n         if (!requiredValuesMissing.getElements().isEmpty()) {\n             compositeErrorException.addException(requiredValuesMissing);\n         }\n \n+        // Throw composite exception if there is at least one element set\n+        // in the composing exceptions\n         if (compositeErrorException.hasExceptions()) {\n             throw compositeErrorException;\n         }\n@@ -175,6 +177,8 @@ public ConnectorInstanceTO getConnectorInstanceTO(\n \n         BeanUtils.copyProperties(\n                 connectorInstance, connectorInstanceTO, ignoreProperties);\n+        connectorInstanceTO.getCapabilities().addAll(\n+                connectorInstance.getCapabilities());\n \n         connectorInstanceTO.setConfiguration(\n                 (Set<PropertyTO>) ConnectorInstanceLoader.buildFromXML("},{"sha":"8c5f83ae60ec4a2e273b62d66123d41c7737fd8d","filename":"core/src/main/resources/org/syncope/core/persistence/content.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -19,6 +19,7 @@\n     starting value for SyncopeUser.id is 1000 -->\n     <hibernate_sequences sequence_name=\"SyncopeUser\" sequence_next_hi_value=\"10\"/>\n     <hibernate_sequences sequence_name=\"SchemaMapping\" sequence_next_hi_value=\"10\"/>\n+    <hibernate_sequences sequence_name=\"ConnectorInstance\" sequence_next_hi_value=\"10\"/>\n \n     <SyncopeConfiguration confKey=\"token.length\" confValue=\"256\"/>\n     <SyncopeConfiguration confKey=\"token.expireTime\" confValue=\"60\"/>"},{"sha":"ed9fc831e730d885eba77f6fbcec0707bd632233","filename":"core/src/test/java/org/syncope/core/test/rest/ConnectorInstanceTestITCase.java","status":"modified","additions":12,"deletions":14,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FConnectorInstanceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FConnectorInstanceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Ftest%2Frest%2FConnectorInstanceTestITCase.java?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -31,6 +31,7 @@\n import org.syncope.client.to.PropertyTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.identityconnectors.bundles.staticwebservice.WebServiceConnector;\n+import org.syncope.types.ConnectorCapability;\n \n public class ConnectorInstanceTestITCase extends AbstractTestITCase {\n \n@@ -65,7 +66,6 @@ public void createWithException() {\n \n     @Test\n     public void create() {\n-\n         ConnectorInstanceTO connectorTO = new ConnectorInstanceTO();\n \n         // set connector version\n@@ -95,6 +95,11 @@ public void create() {\n         // set connector configuration\n         connectorTO.setConfiguration(conf);\n \n+        // set connector capabilities\n+        connectorTO.addCapability(ConnectorCapability.ASYNC_CREATE);\n+        connectorTO.addCapability(ConnectorCapability.SYNC_CREATE);\n+        connectorTO.addCapability(ConnectorCapability.ASYNC_UPDATE);\n+\n         ConnectorInstanceTO actual =\n                 (ConnectorInstanceTO) restTemplate.postForObject(\n                 BASE_URL + \"connector/create.json\",\n@@ -105,36 +110,32 @@ public void create() {\n         assertEquals(actual.getBundleName(), connectorTO.getBundleName());\n         assertEquals(actual.getConnectorName(), connectorTO.getConnectorName());\n         assertEquals(actual.getVersion(), connectorTO.getVersion());\n+        assertEquals(connectorTO.getCapabilities(), actual.getCapabilities());\n \n         Throwable t = null;\n \n         // check for the updating\n-\n         connectorTO.setId(actual.getId());\n-\n+        connectorTO.removeCapability(ConnectorCapability.ASYNC_UPDATE);\n+        actual = null;\n         try {\n-\n-            restTemplate.postForObject(\n+            actual = restTemplate.postForObject(\n                     BASE_URL + \"connector/update.json\",\n                     connectorTO, ConnectorInstanceTO.class);\n-\n         } catch (HttpStatusCodeException e) {\n             LOG.error(\"update failed\", e);\n             t = e;\n         }\n \n         assertNull(t);\n+        assertNotNull(actual);\n+        assertEquals(connectorTO.getCapabilities(), actual.getCapabilities());\n \n         // check also for the deletion of the created object\n-\n-        t = null;\n-\n         try {\n-\n             restTemplate.delete(\n                     BASE_URL + \"connector/delete/{connectorId}.json\",\n                     actual.getId().toString());\n-\n         } catch (HttpStatusCodeException e) {\n             LOG.error(\"delete failed\", e);\n             t = e;\n@@ -143,14 +144,11 @@ public void create() {\n         assertNull(t);\n \n         // check the non existence\n-\n         try {\n-\n             restTemplate.getForObject(\n                     BASE_URL + \"connector/read/{connectorId}\",\n                     ConnectorInstanceTO.class,\n                     actual.getId().toString());\n-\n         } catch (HttpStatusCodeException e) {\n             assertEquals(e.getStatusCode(), HttpStatus.NOT_FOUND);\n         }"},{"sha":"2bf98382873c78a053a5178d707d8879c9fa599c","filename":"core/src/test/resources/org/syncope/core/persistence/content.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2d85c31a2aa31c0659484a6038fc393540b37be2/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fcontent.xml?ref=2d85c31a2aa31c0659484a6038fc393540b37be2","patch":"@@ -19,6 +19,7 @@\n     starting value for SyncopeUser.id is 1000 -->\n     <hibernate_sequences sequence_name=\"SyncopeUser\" sequence_next_hi_value=\"10\"/>\n     <hibernate_sequences sequence_name=\"SchemaMapping\" sequence_next_hi_value=\"10\"/>\n+    <hibernate_sequences sequence_name=\"ConnectorInstance\" sequence_next_hi_value=\"10\"/>\n \n     <SyncopeConfiguration confKey=\"token.length\" confValue=\"256\"/>\n     <SyncopeConfiguration confKey=\"token.expireTime\" confValue=\"60\"/>"}]}