{"sha":"04415543cc7728e7cd915638ed8f4f98b0e8822d","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjA0NDE1NTQzY2M3NzI4ZTdjZDkxNTYzOGVkOGY0Zjk4YjBlODgyMmQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-04-30T16:16:40Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-04-30T16:16:40Z"},"message":"[SYNCOPE-618] Upgraded to 5.17 with new Activiti Modeler","tree":{"sha":"8953dd8c06b690dd9f40060d13c8d7c4bfd582fe","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/8953dd8c06b690dd9f40060d13c8d7c4bfd582fe"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/04415543cc7728e7cd915638ed8f4f98b0e8822d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/04415543cc7728e7cd915638ed8f4f98b0e8822d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/04415543cc7728e7cd915638ed8f4f98b0e8822d","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/04415543cc7728e7cd915638ed8f4f98b0e8822d/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"5d45494f09042eab9097fd45b3ceea5a4fcaeb07","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5d45494f09042eab9097fd45b3ceea5a4fcaeb07","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5d45494f09042eab9097fd45b3ceea5a4fcaeb07"}],"stats":{"total":1599,"additions":1253,"deletions":346},"files":[{"sha":"0d3303414fa94d26a4a80b61f3e787d2639ce8b4","filename":"archetype/pom.xml","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/archetype%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/archetype%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fpom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -38,7 +38,7 @@ under the License.\n       <extension>\n         <groupId>org.apache.maven.archetype</groupId>\n         <artifactId>archetype-packaging</artifactId>\n-        <version>2.2</version>\n+        <version>2.3</version>\n       </extension>\n     </extensions>\n \n@@ -47,7 +47,7 @@ under the License.\n         <plugin>\n           <groupId>org.apache.maven.plugins</groupId>\n           <artifactId>maven-archetype-plugin</artifactId>\n-          <version>2.2</version>\n+          <version>2.3</version>\n           <extensions>true</extensions>\n         </plugin>\n       </plugins>\n@@ -199,7 +199,8 @@ under the License.\n         <targetPath>${project.build.outputDirectory}/archetype-resources/console/src/main/resources</targetPath>\n         <includes>\n           <include>log4j2.xml</include>\n-          <include>oryx.debug.js-tokenValueMap.properties</include>\n+          <include>save-model.html</include>\n+          <include>url-config.js</include>\n         </includes>\n       </resource>\n       <resource>"},{"sha":"77f873d52486acdaea9ef341a8649b75256542f8","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":39,"deletions":38,"changes":77,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -106,28 +106,48 @@ under the License.\n             <phase>process-resources</phase>\n             <configuration>\n               <target>\n-                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\" dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\" \n+                       dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n                 \n                 <mkdir dir=\"${activiti-modeler.directory}\" />\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/editor\" />\n-                <copy todir=\"${activiti-modeler.directory}/editor\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\n-                    <exclude name=\"oryx.js\" />\n-                  </fileset>\n-                </copy>\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\" todir=\"${activiti-modeler.directory}/editor\" />\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\" todir=\"${activiti-modeler.directory}/editor\" />\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/explorer\" />\n-                <copy todir=\"${activiti-modeler.directory}/explorer\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\" />\n-                </copy>\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/libs\" />\n-                <copy todir=\"${activiti-modeler.directory}/libs\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\" />\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/modeler.html\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+                <replace file=\"${activiti-modeler.directory}/modeler.html\"\n+                         token=\"&lt;/head&gt;\"\n+                         value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"/>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+\n+                <mkdir dir=\"${activiti-modeler.directory}/editor-app\" />\n+                <copy todir=\"${activiti-modeler.directory}/editor-app\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor-app\" />                  \n                 </copy>\n+                <replaceregexp file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                               match=\"ORYX.CONFIG.ROOT_PATH =.*&quot;editor/&quot;; //TODO: Remove last slash!!\"\n+                               replace=\"BASE_PATH = window.location.toString().substr(0, window.location.toString().indexOf(&#39;/wicket&#39;));\n+ORYX.CONFIG.ROOT_PATH = BASE_PATH + &quot;/activiti-modeler/editor-app/editor/&quot;;\"\n+                               byline=\"true\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"new Ajax.Request(ACTIVITI.CONFIG.contextRoot + &#39;/editor/stencilset?version=&#39; + Date.now(), {\"\n+                         value=\"new Ajax.Request(window.location.toString().substr(0, window.location.toString().indexOf(&#39;/activiti-modeler&#39;)) + &quot;/activiti-modeler/stencilset.json&quot;, {\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl(modelUrl);\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl(modelUrl);\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl = function(modelUrl){\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl = function(modelUrl){\"/>                \n+                <replace file=\"${activiti-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\"\n+                         token=\"window.location.href = &quot;./&quot;;\"\n+                         value=\"window.close();\"/>\n+                                               \n+                <copy file=\"${basedir}/src/main/resources/url-config.js\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/configuration\"\n+                      overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/save-model.html\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/popups\"\n+                      overwrite=\"true\" />\n               </target>\n             </configuration>\n             <goals>\n@@ -137,25 +157,6 @@ under the License.\n         </executions>\n       </plugin>\n       \n-      <plugin>\n-        <groupId>com.google.code.maven-replacer-plugin</groupId>\n-        <artifactId>replacer</artifactId>\n-        <executions>\n-          <execution>\n-            <phase>process-resources</phase>\n-            <goals>\n-              <goal>replace</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-        <configuration>\n-          <file>${activiti-modeler.directory}/editor/oryx.debug.js</file>\n-          <tokenValueMap>${basedir}/src/main/resources/oryx.debug.js-tokenValueMap.properties</tokenValueMap>\n-          <unescape>true</unescape>\n-          <regex>false</regex>\n-        </configuration>\n-      </plugin>\n-      \n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-war-plugin</artifactId>"},{"sha":"2bff477eb0eaef326b74a171cdb21f6ee773aefe","filename":"client/console/src/main/java/org/apache/syncope/client/console/SyncopeConsoleApplication.java","status":"modified","additions":69,"deletions":1,"changes":70,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleApplication.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -22,34 +22,102 @@\n import java.util.Collections;\n import java.util.List;\n import java.util.Locale;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.client.console.pages.BasePage;\n import org.apache.syncope.client.console.pages.Dashboard;\n import org.apache.syncope.client.console.pages.Login;\n+import org.apache.syncope.client.console.resources.FilesystemResource;\n+import org.apache.syncope.client.console.resources.WorkflowDefGETResource;\n+import org.apache.syncope.client.console.resources.WorkflowDefPUTResource;\n import org.apache.wicket.Page;\n import org.apache.wicket.authroles.authentication.AbstractAuthenticatedWebSession;\n import org.apache.wicket.authroles.authentication.AuthenticatedWebApplication;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.markup.html.WebPage;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.IResource;\n+import org.apache.wicket.request.resource.ResourceReference;\n import org.apache.wicket.resource.DynamicJQueryResourceReference;\n import org.apache.wicket.spring.injection.annot.SpringComponentInjector;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n+import org.springframework.core.type.filter.AssignableTypeFilter;\n+import org.springframework.util.ClassUtils;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n \n public class SyncopeConsoleApplication extends AuthenticatedWebApplication {\n \n+    private static final Logger LOG = LoggerFactory.getLogger(SyncopeConsoleApplication.class);\n+\n     public static final List<Locale> SUPPORTED_LOCALES = Collections.unmodifiableList(Arrays.asList(\n             new Locale[] {\n                 Locale.ENGLISH, Locale.ITALIAN, new Locale(\"pt\", \"BR\")\n             }));\n \n+    private static final String ACTIVITI_MODELER_CONTEXT = \"activiti-modeler\";\n+\n     @Override\n     protected void init() {\n         super.init();\n \n         getComponentInstantiationListeners().add(new SpringComponentInjector(this));\n+        getResourceSettings().setThrowExceptionOnMissingResource(true);\n         getJavaScriptLibrarySettings().setJQueryReference(new DynamicJQueryResourceReference());\n \n         getSecuritySettings().setAuthorizationStrategy(new MetaDataRoleAuthorizationStrategy(this));\n-        MetaDataRoleAuthorizationStrategy.authorize(getHomePage(), SyncopeConsoleSession.AUTHENTICATED);\n+        ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);\n+        scanner.addIncludeFilter(new AssignableTypeFilter(BasePage.class));\n+\n+        for (BeanDefinition bd : scanner.findCandidateComponents(StringUtils.EMPTY)) {\n+            try {\n+                @SuppressWarnings(\"unchecked\")\n+                Class<? extends BasePage> clazz = (Class<? extends BasePage>) ClassUtils.resolveClassName(\n+                        bd.getBeanClassName(), ClassUtils.getDefaultClassLoader());\n+                MetaDataRoleAuthorizationStrategy.authorize(clazz, SyncopeConsoleSession.AUTHENTICATED);\n+            } catch (Throwable t) {\n+                LOG.warn(\"Could not inspect class {}\", bd.getBeanClassName(), t);\n+            }\n+        }\n+\n+        getMarkupSettings().setStripWicketTags(true);\n+        getMarkupSettings().setCompressWhitespace(true);\n+\n+        getRequestCycleListeners().add(new SyncopeConsoleRequestCycleListener());\n \n         mountPage(\"/login\", getSignInPageClass());\n+\n+        final String activitiModelerDirectory = WebApplicationContextUtils.getWebApplicationContext(\n+                WebApplication.get().getServletContext()).getBean(\"activitiModelerDirectory\", String.class);\n+        mountResource(\"/\" + ACTIVITI_MODELER_CONTEXT, new ResourceReference(ACTIVITI_MODELER_CONTEXT) {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new FilesystemResource(ACTIVITI_MODELER_CONTEXT, activitiModelerDirectory);\n+            }\n+\n+        });\n+        mountResource(\"/workflowDefGET\", new ResourceReference(\"workflowDefGET\") {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new WorkflowDefGETResource();\n+            }\n+        });\n+        mountResource(\"/workflowDefPUT\", new ResourceReference(\"workflowDefPUT\") {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new WorkflowDefPUTResource();\n+            }\n+        });\n     }\n \n     @Override"},{"sha":"925e1404e509bbbdc35a3429f62f9a436281981e","filename":"client/console/src/main/java/org/apache/syncope/client/console/SyncopeConsoleRequestCycleListener.java","status":"added","additions":84,"deletions":0,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleRequestCycleListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleRequestCycleListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleRequestCycleListener.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,84 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console;\n+\n+import java.security.AccessControlException;\n+import javax.ws.rs.BadRequestException;\n+import javax.xml.ws.WebServiceException;\n+import org.apache.syncope.client.console.pages.ErrorPage;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.wicket.Page;\n+import org.apache.wicket.authorization.UnauthorizedInstantiationException;\n+import org.apache.wicket.core.request.handler.PageProvider;\n+import org.apache.wicket.core.request.handler.RenderPageRequestHandler;\n+import org.apache.wicket.markup.html.pages.ExceptionErrorPage;\n+import org.apache.wicket.model.StringResourceModel;\n+import org.apache.wicket.protocol.http.PageExpiredException;\n+import org.apache.wicket.request.IRequestHandler;\n+import org.apache.wicket.request.cycle.AbstractRequestCycleListener;\n+import org.apache.wicket.request.cycle.RequestCycle;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class SyncopeConsoleRequestCycleListener extends AbstractRequestCycleListener {\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(SyncopeConsoleRequestCycleListener.class);\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public IRequestHandler onException(final RequestCycle cycle, final Exception e) {\n+        LOG.error(\"Exception found\", e);\n+\n+        PageParameters errorParameters = new PageParameters();\n+        errorParameters.add(\"errorTitle\", new StringResourceModel(\"alert\", null).getString());\n+\n+        final Page errorPage;\n+        if (e instanceof UnauthorizedInstantiationException) {\n+            errorParameters.add(\"errorMessage\",\n+                    new StringResourceModel(\"unauthorizedInstantiationException\", null).getString());\n+\n+            errorPage = new ErrorPage(errorParameters);\n+        } else if (e.getCause() instanceof AccessControlException) {\n+            errorParameters.add(\"errorMessage\", new StringResourceModel(\"accessControlException\", null).getString());\n+\n+            errorPage = new ErrorPage(errorParameters);\n+        } else if (e instanceof PageExpiredException || !(SyncopeConsoleSession.get()).isSignedIn()) {\n+            errorParameters.add(\"errorMessage\", new StringResourceModel(\"pageExpiredException\", null).getString());\n+\n+            errorPage = new ErrorPage(errorParameters);\n+        } else if (e.getCause() instanceof BadRequestException || e.getCause() instanceof WebServiceException\n+                || e.getCause() instanceof SyncopeClientException) {\n+\n+            errorParameters.add(\"errorMessage\", new StringResourceModel(\"restClientException\", null).getString());\n+\n+            errorPage = new ErrorPage(errorParameters);\n+        } else {\n+            // redirect to default Wicket error page\n+            errorPage = new ExceptionErrorPage(e, null);\n+        }\n+\n+        return new RenderPageRequestHandler(new PageProvider(errorPage));\n+    }\n+}"},{"sha":"8a5add1a2a403f921d2308e19344e79aad5472b9","filename":"client/console/src/main/java/org/apache/syncope/client/console/SyncopeConsoleSession.java","status":"modified","additions":15,"deletions":2,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -61,6 +61,10 @@ public class SyncopeConsoleSession extends AuthenticatedWebSession {\n \n     private SyncopeClient client;\n \n+    private String username;\n+\n+    private String password;\n+\n     private UserTO selfTO;\n \n     private Map<String, Set<String>> auth;\n@@ -106,6 +110,8 @@ public boolean authenticate(final String username, final String password) {\n             auth = self.getKey();\n             selfTO = self.getValue();\n \n+            this.username = username;\n+            this.password = password;\n             authenticated = true;\n         } catch (Exception e) {\n             LOG.error(\"Authentication failed\", e);\n@@ -153,8 +159,15 @@ public <T> T getService(final String etag, final Class<T> serviceClass) {\n     }\n \n     public <T> T getService(final MediaType mediaType, final Class<T> serviceClass) {\n-        T service = client.getService(serviceClass);\n-        WebClient.client(service).type(mediaType).accept(mediaType);\n+        T service;\n+\n+        synchronized (clientFactory) {\n+            SyncopeClientFactoryBean.ContentType preType = clientFactory.getContentType();\n+\n+            clientFactory.setContentType(SyncopeClientFactoryBean.ContentType.fromString(mediaType.toString()));\n+            service = clientFactory.create(username, password).getService(serviceClass);\n+            clientFactory.setContentType(preType);\n+        }\n \n         return service;\n     }"},{"sha":"00a902726e3d345933a5222618caca2d4c7d2fdc","filename":"client/console/src/main/java/org/apache/syncope/client/console/init/ImplementationClassNamesLoader.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FImplementationClassNamesLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FImplementationClassNamesLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Finit%2FImplementationClassNamesLoader.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -38,9 +38,6 @@\n @Component\n public class ImplementationClassNamesLoader implements SyncopeConsoleLoader {\n \n-    /**\n-     * Logger.\n-     */\n     private static final Logger LOG = LoggerFactory.getLogger(ImplementationClassNamesLoader.class);\n \n     private List<Class<? extends AbstractBinaryPreviewer>> previewers;\n@@ -73,7 +70,6 @@ public void load() {\n                 } else if (AbstractExtensionPanel.class.isAssignableFrom(clazz) && !isAbsractClazz) {\n                     extPanels.add((Class<? extends AbstractExtensionPanel>) clazz);\n                 }\n-\n             } catch (Throwable t) {\n                 LOG.warn(\"Could not inspect class {}\", bd.getBeanClassName(), t);\n             }"},{"sha":"05658fc9a504f56b03d21945567c52764175be77","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/ActivitiModelerPopupPage.java","status":"added","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,27 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.pages;\n+\n+import org.apache.wicket.markup.html.WebPage;\n+\n+public class ActivitiModelerPopupPage extends WebPage {\n+\n+    private static final long serialVersionUID = -7031206743629422898L;\n+\n+}"},{"sha":"434a620e8220e8aac98ab9335ff8a919df5650da","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/BasePage.java","status":"modified","additions":75,"deletions":1,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -20,11 +20,17 @@\n \n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.common.lib.types.Entitlement;\n+import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.IAjaxIndicatorAware;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.behavior.Behavior;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n@@ -37,12 +43,81 @@ public BasePage() {\n         this(null);\n     }\n \n+    private String getLIContainerId(final String linkId) {\n+        return linkId + \"LI\";\n+    }\n+\n+    private String getULContainerId(final String linkId) {\n+        return linkId + \"UL\";\n+    }\n+\n     public BasePage(final PageParameters parameters) {\n         super(parameters);\n \n         add(new Label(\"version\", SyncopeConsoleSession.get().getVersion()));\n         add(new Label(\"username\", SyncopeConsoleSession.get().getSelfTO().getUsername()));\n+\n+        // menu\n+        WebMarkupContainer liContainer = new WebMarkupContainer(getLIContainerId(\"dashboard\"));\n+        add(liContainer);\n+        liContainer.add(new BookmarkablePageLink<>(\"dashboard\", Dashboard.class));\n+\n+        WebMarkupContainer confLIContainer = new WebMarkupContainer(getLIContainerId(\"configuration\"));\n+        add(confLIContainer);\n+        WebMarkupContainer confULContainer = new WebMarkupContainer(getULContainerId(\"configuration\"));\n+        confLIContainer.add(confULContainer);\n+\n+        liContainer = new WebMarkupContainer(getLIContainerId(\"workflow\"));\n+        confULContainer.add(liContainer);\n+        BookmarkablePageLink<Page> link = new BookmarkablePageLink<>(\"workflow\", Workflow.class);\n+        MetaDataRoleAuthorizationStrategy.authorize(link, WebPage.ENABLE, Entitlement.WORKFLOW_DEF_READ);\n+        liContainer.add(link);\n+\n         add(new BookmarkablePageLink<Page>(\"logout\", Logout.class));\n+\n+        // set 'active' menu item\n+        // 1. check if current class is set to top-level menu\n+        Component containingLI = get(getLIContainerId(getClass().getSimpleName().toLowerCase()));\n+        // 2. if not, check if it is under 'Configuration'\n+        if (containingLI == null) {\n+            containingLI = confULContainer.get(getLIContainerId(getClass().getSimpleName().toLowerCase()));\n+        }\n+        // 3. when found, set CSS coordinates for menu\n+        if (containingLI != null) {\n+            containingLI.add(new Behavior() {\n+\n+                private static final long serialVersionUID = 1469628524240283489L;\n+\n+                @Override\n+                public void onComponentTag(final Component component, final ComponentTag tag) {\n+                    tag.put(\"class\", \"active\");\n+                }\n+            });\n+\n+            if (confULContainer.getId().equals(containingLI.getParent().getId())) {\n+                confULContainer.add(new Behavior() {\n+\n+                    private static final long serialVersionUID = 3109256773218160485L;\n+\n+                    @Override\n+                    public void onComponentTag(final Component component, final ComponentTag tag) {\n+                        tag.put(\"class\", \"treeview-menu menu-open\");\n+                        tag.put(\"style\", \"display: block;\");\n+                    }\n+\n+                });\n+\n+                confLIContainer.add(new Behavior() {\n+\n+                    private static final long serialVersionUID = 3109256773218160485L;\n+\n+                    @Override\n+                    public void onComponentTag(final Component component, final ComponentTag tag) {\n+                        tag.put(\"class\", \"treeview active\");\n+                    }\n+                });\n+            }\n+        }\n     }\n \n     @Override\n@@ -57,7 +132,6 @@ public String getAjaxIndicatorMarkupId() {\n      * @param container container\n      */\n     protected void setWindowClosedCallback(final ModalWindow window, final WebMarkupContainer container) {\n-\n         window.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n \n             private static final long serialVersionUID = 8804221891699487139L;"},{"sha":"d4db0bcc5e63ca6d1a7f60bd96cb484a2f881a73","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/ErrorPage.java","status":"added","additions":42,"deletions":0,"changes":42,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,42 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.pages;\n+\n+import org.apache.wicket.Page;\n+import org.apache.wicket.markup.html.basic.Label;\n+import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n+\n+/**\n+ * Error WebPage.\n+ */\n+public class ErrorPage extends BasePage {\n+\n+    private static final long serialVersionUID = -390761262038796657L;\n+\n+    public ErrorPage(final PageParameters parameters) {\n+        super(parameters);\n+\n+        add(new Label(\"errorTitle\", new Model<>(parameters.get(\"errorTitle\").toString())));\n+        add(new Label(\"errorMessage\", new Model<>(parameters.get(\"errorMessage\").toString())));\n+\n+        add(new BookmarkablePageLink<Page>(\"home\", getApplication().getHomePage()));\n+    }\n+}"},{"sha":"b16bd2abfd2b5acb4aeaef5a810ae6cc1a41ea64","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Workflow.java","status":"added","additions":107,"deletions":0,"changes":107,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,107 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.pages;\n+\n+import java.io.File;\n+import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.syncope.client.console.wicket.markup.html.link.VeilPopupSettings;\n+import org.apache.syncope.common.lib.types.Entitlement;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.image.Image;\n+import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n+import org.apache.wicket.request.resource.DynamicImageResource;\n+import org.apache.wicket.request.resource.IResource;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+public class Workflow extends BasePage {\n+\n+    private static final long serialVersionUID = -8781434495150074529L;\n+\n+    @SpringBean\n+    private WorkflowRestClient wfRestClient;\n+\n+    public Workflow(final PageParameters parameters) {\n+        super(parameters);\n+\n+        WebMarkupContainer noActivitiEnabledForUsers = new WebMarkupContainer(\"noActivitiEnabledForUsers\");\n+        noActivitiEnabledForUsers.setOutputMarkupPlaceholderTag(true);\n+        add(noActivitiEnabledForUsers);\n+\n+        WebMarkupContainer workflowDefContainer = new WebMarkupContainer(\"workflowDefContainer\");\n+        workflowDefContainer.setOutputMarkupPlaceholderTag(true);\n+\n+        if (wfRestClient.isActivitiEnabledForUsers()) {\n+            noActivitiEnabledForUsers.setVisible(false);\n+        } else {\n+            workflowDefContainer.setVisible(false);\n+        }\n+\n+        BookmarkablePageLink<Void> activitiModeler =\n+                new BookmarkablePageLink<>(\"activitiModeler\", ActivitiModelerPopupPage.class);\n+        activitiModeler.setPopupSettings(new VeilPopupSettings().setHeight(600).setWidth(800));\n+        MetaDataRoleAuthorizationStrategy.authorize(activitiModeler, ENABLE, Entitlement.WORKFLOW_DEF_READ);\n+        workflowDefContainer.add(activitiModeler);\n+        // Check if Activiti Modeler directory is found\n+        boolean activitiModelerEnabled = false;\n+        try {\n+            String activitiModelerDirectory = WebApplicationContextUtils.getWebApplicationContext(\n+                    WebApplication.get().getServletContext()).getBean(\"activitiModelerDirectory\", String.class);\n+            File baseDir = new File(activitiModelerDirectory);\n+            activitiModelerEnabled = baseDir.exists() && baseDir.canRead() && baseDir.isDirectory();\n+        } catch (Exception e) {\n+            LOG.error(\"Could not check for Activiti Modeler directory\", e);\n+        }\n+        activitiModeler.setEnabled(activitiModelerEnabled);\n+\n+        BookmarkablePageLink<Void> xmlEditor = new BookmarkablePageLink<>(\"xmlEditor\", XMLEditorPopupPage.class);\n+        xmlEditor.setPopupSettings(new VeilPopupSettings().setHeight(480).setWidth(800));\n+        MetaDataRoleAuthorizationStrategy.authorize(xmlEditor, ENABLE, Entitlement.WORKFLOW_DEF_READ);\n+        workflowDefContainer.add(xmlEditor);\n+\n+        Image workflowDefDiagram = new Image(\"workflowDefDiagram\", new Model<IResource>()) {\n+\n+            private static final long serialVersionUID = -8457850449086490660L;\n+\n+            @Override\n+            protected IResource getImageResource() {\n+                return new DynamicImageResource() {\n+\n+                    private static final long serialVersionUID = 923201517955737928L;\n+\n+                    @Override\n+                    protected byte[] getImageData(final IResource.Attributes attributes) {\n+                        return wfRestClient.isActivitiEnabledForUsers()\n+                                ? wfRestClient.getDiagram()\n+                                : new byte[0];\n+                    }\n+                };\n+            }\n+        };\n+        workflowDefContainer.add(workflowDefDiagram);\n+\n+        MetaDataRoleAuthorizationStrategy.authorize(workflowDefContainer, ENABLE, Entitlement.WORKFLOW_DEF_READ);\n+        add(workflowDefContainer);\n+    }\n+\n+}"},{"sha":"c02d9ac892d2faed0eba8074b17a36ecc2ff1122","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/XMLEditorPopupPage.java","status":"added","additions":90,"deletions":0,"changes":90,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,90 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.pages;\n+\n+import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.syncope.common.lib.SyncopeClientException;\n+import org.apache.syncope.common.lib.types.Entitlement;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.markup.html.form.Button;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.TextArea;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.apache.wicket.util.io.IOUtils;\n+\n+public class XMLEditorPopupPage extends BasePopupPage {\n+\n+    private static final long serialVersionUID = 5816041644635271734L;\n+\n+    @SpringBean\n+    private WorkflowRestClient wfRestClient;\n+\n+    public XMLEditorPopupPage() {\n+        Form<?> wfForm = new Form<>(\"workflowDefForm\");\n+\n+        String definition;\n+        try {\n+            definition = IOUtils.toString(wfRestClient.getDefinition(MediaType.APPLICATION_XML_TYPE));\n+        } catch (IOException e) {\n+            LOG.error(\"Could not get workflow definition\", e);\n+            definition = StringUtils.EMPTY;\n+        }\n+        final TextArea<String> workflowDefArea = new TextArea<>(\"workflowDefArea\", new Model<>(definition));\n+        wfForm.add(workflowDefArea);\n+\n+        AjaxButton submit =\n+                new IndicatingAjaxButton(APPLY, new Model<>(getString(SUBMIT))) {\n+\n+                    private static final long serialVersionUID = -958724007591692537L;\n+\n+                    @Override\n+                    protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                        try {\n+                            wfRestClient.updateDefinition(\n+                                    MediaType.APPLICATION_XML_TYPE, workflowDefArea.getModelObject());\n+                            info(getString(Constants.OPERATION_SUCCEEDED));\n+                        } catch (SyncopeClientException scee) {\n+                            error(getString(Constants.ERROR) + \": \" + scee.getMessage());\n+                        }\n+                        feedbackPanel.refresh(target);\n+                    }\n+\n+                    @Override\n+                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                        feedbackPanel.refresh(target);\n+                    }\n+                };\n+\n+        final Button close = new Button(\"closePage\", new Model<>(getString(CANCEL)));\n+\n+        MetaDataRoleAuthorizationStrategy.authorize(submit, ENABLE, Entitlement.WORKFLOW_DEF_UPDATE);\n+        wfForm.add(submit);\n+        wfForm.add(close);\n+        this.add(wfForm);\n+    }\n+\n+}"},{"sha":"8a95de60907b9adb4d6d7db13aabe2f97c670ada","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/FilesystemResource.java","status":"added","additions":83,"deletions":0,"changes":83,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,83 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.resources;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Mounts directory on local filesystem as subcontext.\n+ */\n+public class FilesystemResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = -4791087117785935198L;\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(FilesystemResource.class);\n+\n+    private final String baseCtx;\n+\n+    private final String basePath;\n+\n+    public FilesystemResource(final String baseCtx, final String basePath) {\n+        this.baseCtx = baseCtx;\n+        this.basePath = basePath;\n+    }\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        ResourceResponse response = new ResourceResponse();\n+\n+        final File baseDir = new File(basePath);\n+        if (baseDir.exists() && baseDir.canRead() && baseDir.isDirectory()) {\n+            String reqPath = attributes.getRequest().getUrl().getPath();\n+            final String subPath = reqPath.substring(reqPath.indexOf(baseCtx) + baseCtx.length()).\n+                    replace('/', File.separatorChar);\n+            LOG.debug(\"Request for {}\", subPath);\n+\n+            response.setWriteCallback(new WriteCallback() {\n+\n+                @Override\n+                public void writeData(final Attributes attributes) throws IOException {\n+                    FileInputStream resourceIS = null;\n+                    try {\n+                        resourceIS = new FileInputStream(new File(baseDir, subPath));\n+                        IOUtils.copy(resourceIS, attributes.getResponse().getOutputStream());\n+                    } catch (IOException e) {\n+                        LOG.error(\"Could not read from {}\", baseDir.getAbsolutePath() + subPath, e);\n+                    } finally {\n+                        IOUtils.closeQuietly(resourceIS);\n+                    }\n+                }\n+            });\n+        } else {\n+            LOG.error(\"{} not found, not readable or not a directory\", basePath);\n+        }\n+\n+        return response;\n+    }\n+\n+}"},{"sha":"faf3a5797851824b1bd42f967ddf781051535994","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/WorkflowDefGETResource.java","status":"added","additions":59,"deletions":0,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,59 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.resources;\n+\n+import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Mirror REST resource for obtaining user workflow definition in JSON (used by Activiti Modeler).\n+ *\n+ * @see org.apache.syncope.common.rest.api.service.WorkflowService#exportDefinition(\n+ * org.apache.syncope.common.types.SubjectType)\n+ */\n+public class WorkflowDefGETResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = 4637304868056148970L;\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        ResourceResponse response = new ResourceResponse();\n+        response.disableCaching();\n+        response.setContentType(MediaType.APPLICATION_JSON);\n+\n+        response.setWriteCallback(new WriteCallback() {\n+\n+            @Override\n+            public void writeData(final Attributes attributes) throws IOException {\n+                IOUtils.copy(WebApplicationContextUtils.getWebApplicationContext(\n+                        WebApplication.get().getServletContext()).getBean(WorkflowRestClient.class).\n+                        getDefinition(MediaType.APPLICATION_JSON_TYPE),\n+                        attributes.getResponse().getOutputStream());\n+            }\n+        });\n+\n+        return response;\n+    }\n+\n+}"},{"sha":"e603ab28fb305251718dabc2ef6db1f5c406e02f","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/WorkflowDefPUTResource.java","status":"added","additions":74,"deletions":0,"changes":74,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefPUTResource.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,74 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.resources;\n+\n+import java.io.IOException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.core.MediaType;\n+import org.apache.cxf.common.util.UrlUtils;\n+import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.util.io.IOUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.web.context.support.WebApplicationContextUtils;\n+\n+/**\n+ * Mirror REST resource for putting user workflow definition in JSON (used by Activiti Modeler).\n+ *\n+ * @see org.apache.syncope.common.rest.api.service.#importDefinition(\n+ * org.apache.syncope.common.types.SubjectType, java.lang.String)\n+ */\n+public class WorkflowDefPUTResource extends AbstractResource {\n+\n+    private static final long serialVersionUID = 2964542005207297944L;\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(WorkflowDefPUTResource.class);\n+\n+    @Override\n+    protected ResourceResponse newResourceResponse(final Attributes attributes) {\n+        String definition = null;\n+        try {\n+            HttpServletRequest request = (HttpServletRequest) attributes.getRequest().getContainerRequest();\n+            String requestBody = IOUtils.toString(request.getInputStream());\n+            String[] split = requestBody.split(\"&\");\n+            for (int i = 0; i < split.length && definition == null; i++) {\n+                String keyValue = split[i];\n+                if (keyValue.startsWith(\"json_xml=\")) {\n+                    definition = UrlUtils.urlDecode(keyValue.split(\"=\")[1]);\n+                }\n+            }\n+        } catch (IOException e) {\n+            LOG.error(\"Could not extract workflow definition from request\", e);\n+        }\n+\n+        WebApplicationContextUtils.getWebApplicationContext(WebApplication.get().getServletContext()).\n+                getBean(WorkflowRestClient.class).\n+                updateDefinition(MediaType.APPLICATION_JSON_TYPE, definition);\n+\n+        ResourceResponse response = new ResourceResponse();\n+        response.setStatusCode(204);\n+        return response;\n+    }\n+\n+}"},{"sha":"51c8ec520907d5c0244eb36be3acc3a727a89466","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/link/VeilPopupSettings.java","status":"added","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Flink%2FVeilPopupSettings.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.wicket.markup.html.link;\n+\n+import org.apache.wicket.markup.html.link.PopupSettings;\n+\n+public class VeilPopupSettings extends PopupSettings {\n+\n+    private static final long serialVersionUID = -2727046117490858226L;\n+\n+    @Override\n+    public String getPopupJavaScript() {\n+        return \"document.getElementById('veil').style.display = 'block';\" + super.getPopupJavaScript();\n+    }\n+\n+}"},{"sha":"416df199ca25ccc46719510dfffa6127841fbda7","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/ActivitiModelerPopupPage.html","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FActivitiModelerPopupPage.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,28 @@\n+<!DOCTYPE html>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html>\n+  <head>\n+    <title>Apache Syncope / Activiti Modeler</title>\n+\n+    <meta http-equiv=\"refresh\" content=\"0; url=../../activiti-modeler/modeler.html\"/>\n+  </head>\n+  <body>\n+  </body>\n+</html>\n\\ No newline at end of file"},{"sha":"7546a6a744039551af50a205826928d352bf1ade","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/BasePage.html","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -87,16 +87,16 @@\n         <section class=\"sidebar\">\n           <ul class=\"sidebar-menu\">\n             <li class=\"header\">&nbsp;</li>\n-            <li class=\"active\"><a href=\"#\"><i class=\"fa fa-dashboard\"></i><span>Dashboard</span></a></li>\n+            <li wicket:id=\"dashboardLI\"><a href=\"#\" wicket:id=\"dashboard\"><i class=\"fa fa-dashboard\"></i><span>Dashboard</span></a></li>\n             <li><a href=\"#\"><i class=\"fa fa-users\"></i><span>Realms</span></a></li>\n             <li><a href=\"#\"><i class=\"fa fa-th\"></i><span>Resources</span></a></li>\n             <li><a href=\"#\"><i class=\"fa fa-pie-chart\"></i><span>Reports</span></a></li>\n-            <li class=\"treeview\">\n+            <li wicket:id=\"configurationLI\" class=\"treeview\">\n               <a href=\"#\"><i class=\"fa fa-edit\"></i><span>Configuration</span> <i class=\"fa fa-angle-left pull-right\"></i></a>\n-              <ul class=\"treeview-menu\">\n+              <ul wicket:id=\"configurationUL\" class=\"treeview-menu\">\n                 <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Policies</a></li>\n                 <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Security Questions</a></li>\n-                <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Workflow</a></li>\n+                <li wicket:id=\"workflowLI\"><a href=\"#\" wicket:id=\"workflow\"><i class=\"fa fa-circle-o\"></i>Workflow</a></li>\n                 <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Logs</a></li>\n                 <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Layouts</a></li>\n                 <li><a href=\"#\"><i class=\"fa fa-circle-o\"></i>Schemas</a></li>"},{"sha":"bea9c9fed1e520606502c351408c556859ee235d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/ErrorPage.html","status":"added","additions":37,"deletions":0,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FErrorPage.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,37 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+\n+    <div class=\"ui-widget\">\n+      <div class=\"ui-state-error ui-corner-all\">\n+        <p>\n+          <span class=\"ui-icon ui-icon-alert\"></span>\n+          <strong><span wicket:id=\"errorTitle\"/></strong>\n+          <div><span wicket:id=\"errorMessage\"/></div>\n+          <p>\n+            <a href=\"\" wicket:id=\"home\">\n+              <wicket:message key=\"home\"/>\n+            </a>\n+          </p>\n+        </p>\n+      </div>\n+    </div>\n+  </wicket:extend>\n+</html>\n\\ No newline at end of file"},{"sha":"aa77a3facab6bf7a34c092759a18020c22e31cd5","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow.html","status":"added","additions":57,"deletions":0,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,57 @@\n+<!DOCTYPE html>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+\n+    <section class=\"content\">\n+      <div>\n+        <span wicket:id=\"noActivitiEnabledForUsers\"><i><wicket:message key=\"noActivitiEnabledForUsers\"/></i></span>\n+        <span wicket:id=\"workflowDefContainer\">\n+          <div style=\"float: left;\">\n+            <button wicket:id=\"activitiModeler\" style=\"width: 122px\">\n+              <div style=\"display: table-row;\">\n+                <div style=\"display: table-cell\">\n+                  <i class=\"fa fa-file-image-o fa-4x\"></i>\n+                </div>\n+                <div style=\"display: table-cell;vertical-align:middle;font-size:62.5%;\">\n+                  Activiti Modeler\n+                </div>\n+              </div>\n+            </button>\n+          </div>\n+          <div>\n+            <button wicket:id=\"xmlEditor\" style=\"width: 122px\">\n+              <div style=\"display: table-row;\">\n+                <div style=\"display: table-cell\">\n+                  <i class=\"fa fa-file-text-o fa-4x\"></i>\n+                </div>\n+                <div style=\"display: table-cell;vertical-align:middle;font-size:62.5%;\">                  \n+                  XML editor\n+                </div>\n+              </div>\n+            </button>\n+          </div>\n+          <img wicket:id=\"workflowDefDiagram\" style=\"width: 100%;\"/>\n+        </span>\n+      </div>\n+    </section>\n+\n+  </wicket:extend>\n+</html>\n\\ No newline at end of file"},{"sha":"0d6cd15e7b6810ba90d09b345938ad962802b455","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/XMLEditorPopupPage.html","status":"added","additions":80,"deletions":0,"changes":80,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,80 @@\n+<!DOCTYPE html>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:head>\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"webjars/codemirror/${codemirror.version}/lib/codemirror.css\"/>\n+\n+    <script type=\"text/javascript\" src=\"webjars/codemirror/${codemirror.version}/lib/codemirror.js\"></script>\n+    <script type=\"text/javascript\" src=\"webjars/codemirror/${codemirror.version}/mode/xml/xml.js\"></script>\n+    <script type=\"text/javascript\">\n+      function updateTextArea(editor) {\n+        document.getElementById(\"workflowDefArea\").value = editor.getValue();\n+      }\n+    </script>\n+    <script>\n+      window.onunload = refreshParent;\n+      function refreshParent() {\n+        window.opener.location.reload();\n+      }\n+    </script>\n+    <style>\n+      .w_content_3 {\n+        padding: 0;\n+        color: #333333;\n+        font-family: Verdana,Tahoma,sans-serif;\n+        font-size: 100%;\n+        border: 1px solid #BBBBBB;\n+        padding: 1%;\n+      }\n+    </style>\n+  </wicket:head>\n+  <wicket:extend>\n+    <div style=\"padding: 1%;\">\n+      <div class=\"w_content_3\">\n+        <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+          <wicket:message key=\"title\"/>\n+        </p>\n+        <form wicket:id=\"workflowDefForm\">\n+          <div class=\"ui-tabs ui-widget ui-widget-content ui-corner-all\">\n+            <textarea wicket:id=\"workflowDefArea\" id=\"workflowDefArea\" style=\"width: 100%; height: 350px;\">\n+            </textarea>\n+          </div>\n+          <div style=\"padding-top: 1%;\">\n+            <input type=\"submit\"\n+                   class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                   wicket:id=\"apply\"\n+                   style=\"width: 50px\"/>\n+            <input type=\"submit\"\n+                   wicket:id=\"closePage\"\n+                   class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                   onclick=\"window.close();\"\n+                   style=\"width: 50px\"/>\n+          </div>\n+        </form>\n+      </div>\n+    </div>\n+    <script>\n+      window.onload = function() {\n+        var editor = CodeMirror.fromTextArea(document.getElementById(\"workflowDefArea\"), {lineNumbers: true});\n+        editor.on(\"change\", updateTextArea);\n+      };\n+    </script>\n+  </wicket:extend>\n+</html>"},{"sha":"2276791c0c435e78cd5509043e58034e24ea1fa8","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/XMLEditorPopupPage.properties","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage.properties?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,19 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Save\n+cancel=Close\n+title=Workflow XML Editor"},{"sha":"818dfb46d3b520aaf13810110d069dd2db5c543c","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/XMLEditorPopupPage_it.properties","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_it.properties?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,19 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Salva\n+cancel=Chiudi\n+title=Workflow XML Editor"},{"sha":"4152188d8dc538a771bdf3198e2407981a8902b7","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/XMLEditorPopupPage_pt_BR.properties","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FXMLEditorPopupPage_pt_BR.properties?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,19 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+submit=Salvar\n+cancel=Fechar\n+title=Workflow XML Editor\n\\ No newline at end of file"},{"sha":"b6e48de2b7291494c526d86bbd84491f7321c18d","filename":"core/logic/pom.xml","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/core%2Flogic%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/core%2Flogic%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fpom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -83,15 +83,6 @@ under the License.\n       <artifactId>avalon-framework-impl</artifactId>\n     </dependency>\n \n-    <dependency>\n-      <groupId>xalan</groupId>\n-      <artifactId>xalan</artifactId>\n-    </dependency>\n-    <dependency>\n-      <groupId>xerces</groupId>\n-      <artifactId>xercesImpl</artifactId>\n-    </dependency>\n-\n     <dependency>\n       <groupId>org.apache.logging.log4j</groupId>\n       <artifactId>log4j-core</artifactId>"},{"sha":"1d47bfbaccf703407c5aa4fdd953cc5c7531c817","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/sync/SyncJobImpl.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fsync%2FSyncJobImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fsync%2FSyncJobImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fsync%2FSyncJobImpl.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -107,21 +107,21 @@ protected String executeWithSecurityContext(\n \n         LOG.debug(\"Execute synchronization with token {}\", syncTask.getResource().getUsyncToken());\n \n-        final ProvisioningProfile<SyncTask, SyncActions> profile = new ProvisioningProfile<>(connector, syncTask);\n+        ProvisioningProfile<SyncTask, SyncActions> profile = new ProvisioningProfile<>(connector, syncTask);\n         if (actions != null) {\n             profile.getActions().addAll(actions);\n         }\n         profile.setDryRun(dryRun);\n         profile.setResAct(getSyncPolicySpec(syncTask).getConflictResolutionAction());\n \n         // Prepare handler for SyncDelta objects (users)\n-        final UserSyncResultHandler uhandler =\n+        UserSyncResultHandler uhandler =\n                 (UserSyncResultHandler) ApplicationContextProvider.getApplicationContext().getBeanFactory().\n                 createBean(UserSyncResultHandlerImpl.class, AbstractBeanDefinition.AUTOWIRE_BY_NAME, false);\n         uhandler.setProfile(profile);\n \n         // Prepare handler for SyncDelta objects (groups)\n-        final GroupSyncResultHandler rhandler =\n+        GroupSyncResultHandler rhandler =\n                 (GroupSyncResultHandler) ApplicationContextProvider.getApplicationContext().getBeanFactory().\n                 createBean(GroupSyncResultHandlerImpl.class, AbstractBeanDefinition.AUTOWIRE_BY_NAME, false);\n         rhandler.setProfile(profile);"},{"sha":"df4403baff2f7a05784d1e7068d442761f9cb750","filename":"fit/console-reference/pom.xml","status":"modified","additions":39,"deletions":39,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fpom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -114,7 +114,6 @@ under the License.\n     <dependency>\n       <groupId>net.tirasa.connid.bundles.soap</groupId>\n       <artifactId>wssample</artifactId>\n-      <version>${connid.soap.version}</version>\n       <type>war</type>\n       <scope>test</scope>\n     </dependency>\n@@ -150,28 +149,48 @@ under the License.\n             <phase>process-resources</phase>\n             <configuration>\n               <target>\n-                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\" dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\" \n+                       dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n                 \n                 <mkdir dir=\"${activiti-modeler.directory}\" />\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/editor\" />\n-                <copy todir=\"${activiti-modeler.directory}/editor\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\n-                    <exclude name=\"oryx.js\" />\n-                  </fileset>\n-                </copy>\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\" todir=\"${activiti-modeler.directory}/editor\" />\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\" todir=\"${activiti-modeler.directory}/editor\" />\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/explorer\" />\n-                <copy todir=\"${activiti-modeler.directory}/explorer\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\" />\n-                </copy>\n-                \n-                <mkdir dir=\"${activiti-modeler.directory}/libs\" />\n-                <copy todir=\"${activiti-modeler.directory}/libs\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\" />\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/modeler.html\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+                <replace file=\"${activiti-modeler.directory}/modeler.html\"\n+                         token=\"&lt;/head&gt;\"\n+                         value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"/>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+\n+                <mkdir dir=\"${activiti-modeler.directory}/editor-app\" />\n+                <copy todir=\"${activiti-modeler.directory}/editor-app\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor-app\" />                  \n                 </copy>\n+                <replaceregexp file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                               match=\"ORYX.CONFIG.ROOT_PATH =.*&quot;editor/&quot;; //TODO: Remove last slash!!\"\n+                               replace=\"BASE_PATH = window.location.toString().substr(0, window.location.toString().indexOf(&#39;/wicket&#39;));\n+ORYX.CONFIG.ROOT_PATH = BASE_PATH + &quot;/activiti-modeler/editor-app/editor/&quot;;\"\n+                               byline=\"true\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"new Ajax.Request(ACTIVITI.CONFIG.contextRoot + &#39;/editor/stencilset?version=&#39; + Date.now(), {\"\n+                         value=\"new Ajax.Request(window.location.toString().substr(0, window.location.toString().indexOf(&#39;/activiti-modeler&#39;)) + &quot;/activiti-modeler/stencilset.json&quot;, {\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl(modelUrl);\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl(modelUrl);\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl = function(modelUrl){\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl = function(modelUrl){\"/>                \n+                <replace file=\"${activiti-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\"\n+                         token=\"window.location.href = &quot;./&quot;;\"\n+                         value=\"window.close();\"/>\n+                                               \n+                <copy file=\"${basedir}/src/main/resources/url-config.js\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/configuration\"\n+                      overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/save-model.html\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/popups\"\n+                      overwrite=\"true\" />\n               </target>\n             </configuration>\n             <goals>\n@@ -181,25 +200,6 @@ under the License.\n         </executions>\n       </plugin>\n       \n-      <plugin>\n-        <groupId>com.google.code.maven-replacer-plugin</groupId>\n-        <artifactId>replacer</artifactId>\n-        <executions>\n-          <execution>\n-            <phase>process-resources</phase>\n-            <goals>\n-              <goal>replace</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-        <configuration>\n-          <file>${activiti-modeler.directory}/editor/oryx.debug.js</file>\n-          <tokenValueMap>${basedir}/src/main/resources/oryx.debug.js-tokenValueMap.properties</tokenValueMap>\n-          <unescape>true</unescape>\n-          <regex>false</regex>\n-        </configuration>\n-      </plugin>\n-      \n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-war-plugin</artifactId>"},{"sha":"17fdbccebfd61198728b94530688f8563a079191","filename":"fit/console-reference/src/main/resources/oryx.debug.js-tokenValueMap.properties","status":"removed","additions":0,"deletions":35,"changes":35,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js-tokenValueMap.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js-tokenValueMap.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Foryx.debug.js-tokenValueMap.properties?ref=5d45494f09042eab9097fd45b3ceea5a4fcaeb07","patch":"@@ -1,35 +0,0 @@\n-# Licensed to the Apache Software Foundation (ASF) under one\n-# or more contributor license agreements.  See the NOTICE file\n-# distributed with this work for additional information\n-# regarding copyright ownership.  The ASF licenses this file\n-# to you under the Apache License, Version 2.0 (the\n-# \"License\"); you may not use this file except in compliance\n-# with the License.  You may obtain a copy of the License at\n-#\n-#   http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing,\n-# software distributed under the License is distributed on an\n-# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-# KIND, either express or implied.  See the License for the\n-# specific language governing permissions and limitations\n-# under the License.\n-ORYX.CONFIG.ROOT_PATH \\=\t\t\t\t\t\"../editor/\"; //TODO: Remove last slash!!=BASE_PATH =                                     window.location.toString().substr(0, window.location.toString().indexOf('/wicket'));\\nORYX.CONFIG.ROOT_PATH =\t\t\t\tBASE_PATH + \"/activiti-modeler/editor/\";\n-ORYX.CONFIG.EXPLORER_PATH \\=\t\t\t\t\"../explorer\";=ORYX.CONFIG.EXPLORER_PATH =\t\t\tBASE_PATH + \"/activiti-modeler/explorer\";\n-ORYX.CONFIG.LIBS_PATH \\=\t\t\t\t\t\"../libs\";=ORYX.CONFIG.LIBS_PATH =\t\t\t\tBASE_PATH + \"/activiti-modeler/libs\";\n-ORYX.CONFIG.SYNTAXCHECKER_URL \\==ORYX.CONFIG.PLUGINS_CONFIG =\t\t\tORYX.CONFIG.ROOT_PATH + \"plugins.xml\";\\nORYX.CONFIG.SYNTAXCHECKER_URL =\n-this._baseUrl \\= \"../editor/stencilsets/bpmn2.0/\";=this._baseUrl = ORYX.CONFIG.ROOT_PATH + \"stencilsets/bpmn2.0/\";\n-this._source \\= \"../stencilsets/bpmn2.0/bpmn2.0.json\";=this._source = ORYX.CONFIG.ROOT_PATH + \"stencilsets/bpmn2.0/bpmn2.0.json\";\n-\"../service/editor/stencilset\"=ORYX.CONFIG.ROOT_PATH + \"stencilset.json\"\n-ORYX.Editor.createByUrl=modelUrl = BASE_PATH + \"/workflowDefGET\";\\nORYX.Editor.createByUrl\n-../explorer/src/img/signavio/smoky/logo2.png=\"+ORYX.CONFIG.EXPLORER_PATH+\"/src/img/signavio/smoky/logo2.png\n-<a href\\=\\\\\"\"+ORYX.CONFIG.WEB_URL+\"\\\\\" target\\=\\\\\"_self\\\\\" title\\=\\\\\"close modeler\\\\\">=<a href=\\\\\"#\\\\\" title=\\\\\"close modeler\\\\\" onclick=\\\\\"window.close();\\\\\">\n-../editor/images/close_button.png=\"+ORYX.CONFIG.ROOT_PATH+\"images/close_button.png\n-height:16px;width:16px;margin-bottom:-4px;background: transparent url(../libs/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;=height:16px;width:16px;margin-bottom:-4px;background: transparent url(\"+ORYX.CONFIG.LIBS_PATH+\"/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;\n-icon: '../editor/images/add.png',=icon: ORYX.CONFIG.ROOT_PATH + 'images/add.png',\n-icon: '../editor/images/delete.png',=icon: ORYX.CONFIG.ROOT_PATH + 'images/delete.png',\n-id\\=\"edit_model_title\"=id=\"edit_model_title\" readonly=\"readonly\"\n-id\\=\"edit_model_summary\"=id=\"edit_model_summary\" readonly=\"readonly\"\n-\"../service/model/\" + modelMeta.modelId + \"/json\"=BASE_PATH + \"/workflowDefGET\"\n-// Send the request to the server.=saveUri = BASE_PATH + \"/workflowDefPUT\";\\n// Send the request to the server.\n-'Accept':\"application/json\", 'Content-Type':'charset\\=UTF-8'='Accept':\"application/json\", 'Content-Type':'application/json'\n\\ No newline at end of file"},{"sha":"4c6173d5e35b8c3c09f7563039005c883608911b","filename":"fit/console-reference/src/main/resources/save-model.html","status":"added","additions":59,"deletions":0,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fsave-model.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fsave-model.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fsave-model.html?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,59 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<div class=\"modal\" ng-controller=\"SaveModelCtrl\">\n+  <div class=\"modal-dialog\">\n+    <div class=\"modal-content\">\n+      <div class=\"modal-header\">\n+        <h2>{{'MODEL.SAVE.TITLE'| translate}}</h2>\n+      </div>\n+      <div class=\"modal-body\">\n+\n+        <div class=\"form-group\">\n+          <label for=\"nameField\">{{'MODEL.NAME'| translate}}</label>\n+          <input type=\"text\"\n+                 ng-disabled=\"status.loading\"\n+                 id=\"nameField\"\n+                 class=\"form-control\"\n+                 ng-model=\"saveDialog.name\"\n+                 ui-keypress=\"{13:'save()'}\"\n+                 auto-focus readonly/>\n+        </div>\n+        <div class=\"form-group\">\n+          <label for=\"docTextArea\">{{'MODEL.DESCRIPTION'| translate}}</label>\n+          <textarea id=\"docTextArea\" ng-disabled=\"status.loading\" class=\"form-control\" \n+                    ng-model=\"saveDialog.description\" readonly></textarea>\n+        </div>\n+      </div>\n+      <div class=\"modal-footer\">\n+\n+        <div class=\"pull-right\">\n+          <button type=\"button\" class=\"btn\" ng-click=\"close()\" ng-disabled=\"status.loading\" translate>ACTION.CANCEL</button>\n+          <button class=\"btn btn-primary\" ng-click=\"saveAndClose()\" ng-disabled=\"status.loading\" ng-show=\"!error\" translate>ACTION.SAVE-AND-CLOSE</button>\n+        </div>\n+\n+        <div class=\"pull-right popup-error\" ng-if=\"error && !error.isConflict\">\n+          <span>{{'MODEL.SAVE.ERROR'| translate}}</span>\n+        </div>\n+\n+        <loading></loading>\n+\n+      </div>\n+    </div>\n+  </div>\n+</div>\n\\ No newline at end of file"},{"sha":"89a91d7f4771fae030961b76731ef9cc0b5a610d","filename":"fit/console-reference/src/main/resources/url-config.js","status":"added","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Furl-config.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Furl-config.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Furl-config.js?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+var KISBPM = KISBPM || {};\n+\n+KISBPM.URL = {\n+  getModel: function (modelId) {\n+    return window.location.toString().substr(0, window.location.toString().indexOf('/activiti-modeler')) \n+            + \"/workflowDefGET\";\n+  },\n+  getStencilSet: function () {\n+    return window.location.toString().substr(0, window.location.toString().indexOf('/activiti-modeler')) \n+            + \"/activiti-modeler/stencilset.json\";\n+  },\n+  putModel: function (modelId) {\n+    return window.location.toString().substr(0, window.location.toString().indexOf('/activiti-modeler')) \n+            + \"/workflowDefPUT\";\n+  }\n+};"},{"sha":"143d849993da85d62f65d7f7c08c7e740bed4b81","filename":"installer/src/main/java/org/apache/syncope/installer/files/ModelerPom.java","status":"removed","additions":0,"deletions":80,"changes":80,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerPom.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerPom.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerPom.java?ref=5d45494f09042eab9097fd45b3ceea5a4fcaeb07","patch":"@@ -1,80 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.installer.files;\n-\n-public class ModelerPom {\n-\n-    public static final String PATH = \"/pom.xml\";\n-\n-    public static final String FILE = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\"\n-            + \"<project xmlns=\\\"http://maven.apache.org/POM/4.0.0\\\"\\n\"\n-            + \"         xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n-            + \"         xsi:schemaLocation=\\\"http://maven.apache.org/POM/4.0.0\\n\"\n-            + \"                             http://maven.apache.org/xsd/maven-4.0.0.xsd\\\">\\n\"\n-            + \"  <modelVersion>4.0.0</modelVersion>\\n\" + \"   \\n\" + \"  <groupId>org.apache.syncope</groupId>\\n\"\n-            + \"  <artifactId>activitiModelerSetup</artifactId>\\n\" + \"  <version>1.0-SNAPSHOT</version>\\n\"\n-            + \"  <packaging>jar</packaging>\\n\" + \"   \\n\" + \"  <properties>\\n\"\n-            + \"    <activiti.version>5.16.2</activiti.version>\\n\"\n-            + \"    <activiti-modeler.directory>%s</activiti-modeler.directory>\\n\"\n-            + \"    <tokenValueMap>%s/oryx.debug.js-tokenValueMap.properties</tokenValueMap>\\n\" + \"     \\n\"\n-            + \"    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\\n\" + \"  </properties>\\n\" + \"   \\n\"\n-            + \"  <dependencies>\\n\" + \"    <dependency>\\n\" + \"      <groupId>org.activiti</groupId>\\n\"\n-            + \"      <artifactId>activiti-webapp-explorer2</artifactId>           \\n\"\n-            + \"      <version>${activiti.version}</version>\\n\" + \"      <type>war</type>\\n\"\n-            + \"      <scope>test</scope>\\n\" + \"    </dependency>   \\n\" + \"  </dependencies>\\n\" + \"   \\n\"\n-            + \"  <build>   \\n\" + \"    <plugins>\\n\" + \"      <plugin>\\n\"\n-            + \"        <groupId>org.apache.maven.plugins</groupId>\\n\"\n-            + \"        <artifactId>maven-antrun-plugin</artifactId>\\n\" + \"        <version>1.7</version>\\n\"\n-            + \"        <executions>\\n\" + \"          <execution>\\n\" + \"            <id>setupActivitiModeler</id>\\n\"\n-            + \"            <phase>process-resources</phase>\\n\" + \"            <configuration>\\n\"\n-            + \"              <target>\\n\"\n-            + \"                <unzip src=\\\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\\\"\\n\"\n-            + \"                       dest=\\\"${project.build.directory}/activiti-webapp-explorer2\\\" />\\n\"\n-            + \"                 \\n\" + \"                <mkdir dir=\\\"${activiti-modeler.directory}\\\" />\\n\"\n-            + \"                 \\n\" + \"                <mkdir dir=\\\"${activiti-modeler.directory}/editor\\\" />\\n\"\n-            + \"                <copy todir=\\\"${activiti-modeler.directory}/editor\\\">\\n\"\n-            + \"                  <fileset dir=\\\"${project.build.directory}/activiti-webapp-explorer2/editor\\\">\\n\"\n-            + \"                    <exclude name=\\\"oryx.js\\\" />\\n\" + \"                  </fileset>\\n\"\n-            + \"                </copy>\\n\"\n-            + \"                <copy file=\\\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\\\"\\n\"\n-            + \"                      todir=\\\"${activiti-modeler.directory}/editor\\\" />\\n\"\n-            + \"                <copy file=\\\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\\\"\\n\"\n-            + \"                      todir=\\\"${activiti-modeler.directory}/editor\\\" />\\n\" + \"                 \\n\"\n-            + \"                <mkdir dir=\\\"${activiti-modeler.directory}/explorer\\\" />\\n\"\n-            + \"                <copy todir=\\\"${activiti-modeler.directory}/explorer\\\">\\n\"\n-            + \"                  <fileset dir=\\\"${project.build.directory}/activiti-webapp-explorer2/explorer\\\" />\\n\"\n-            + \"                </copy>\\n\" + \"                 \\n\"\n-            + \"                <mkdir dir=\\\"${activiti-modeler.directory}/libs\\\" />\\n\"\n-            + \"                <copy todir=\\\"${activiti-modeler.directory}/libs\\\">\\n\"\n-            + \"                  <fileset dir=\\\"${project.build.directory}/activiti-webapp-explorer2/libs\\\" />\\n\"\n-            + \"                </copy>\\n\" + \"              </target>\\n\" + \"            </configuration>\\n\"\n-            + \"            <goals>\\n\" + \"              <goal>run</goal>\\n\" + \"            </goals>\\n\"\n-            + \"          </execution>\\n\" + \"        </executions>\\n\" + \"      </plugin>\\n\" + \"      <plugin>\\n\"\n-            + \"        <groupId>com.google.code.maven-replacer-plugin</groupId>\\n\"\n-            + \"        <artifactId>replacer</artifactId>\\n\" + \"        <version>1.5.3</version>\\n\"\n-            + \"        <executions>\\n\" + \"          <execution>\\n\" + \"            <phase>process-resources</phase>\\n\"\n-            + \"            <goals>\\n\" + \"              <goal>replace</goal>\\n\"\n-            + \"            </goals>                  \\n\" + \"          </execution>\\n\" + \"        </executions>\\n\"\n-            + \"        <configuration>\\n\"\n-            + \"          <file>${activiti-modeler.directory}/editor/oryx.debug.js</file>\\n\"\n-            + \"          <tokenValueMap>${tokenValueMap}</tokenValueMap>\\n\" + \"          <unescape>true</unescape>\\n\"\n-            + \"          <regex>false</regex>\\n\" + \"        </configuration>\\n\" + \"      </plugin>\\n\"\n-            + \"    </plugins>\\n\" + \"  </build>\\n\" + \"</project>\";\n-\n-}"},{"sha":"e99bd0d4f5d1ac599b8daa99a01d5ae8d5937235","filename":"installer/src/main/java/org/apache/syncope/installer/files/ModelerTokenValueMap.java","status":"removed","additions":0,"deletions":58,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerTokenValueMap.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5d45494f09042eab9097fd45b3ceea5a4fcaeb07/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerTokenValueMap.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FModelerTokenValueMap.java?ref=5d45494f09042eab9097fd45b3ceea5a4fcaeb07","patch":"@@ -1,58 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.installer.files;\n-\n-public class ModelerTokenValueMap {\n-\n-    public static final String PATH = \"/oryx.debug.js-tokenValueMap.properties\";\n-\n-    public static final String FILE = \"# Licensed to the Apache Software Foundation (ASF) under one\\n\"\n-            + \"# or more contributor license agreements.  See the NOTICE file\\n\"\n-            + \"# distributed with this work for additional information\\n\"\n-            + \"# regarding copyright ownership.  The ASF licenses this file\\n\"\n-            + \"# to you under the Apache License, Version 2.0 (the\\n\"\n-            + \"# \\\"License\\\"); you may not use this file except in compliance\\n\"\n-            + \"# with the License.  You may obtain a copy of the License at\\n\" + \"#\\n\"\n-            + \"#   http://www.apache.org/licenses/LICENSE-2.0\\n\" + \"#\\n\"\n-            + \"# Unless required by applicable law or agreed to in writing,\\n\"\n-            + \"# software distributed under the License is distributed on an\\n\"\n-            + \"# \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n\"\n-            + \"# KIND, either express or implied.  See the License for the\\n\"\n-            + \"# specific language governing permissions and limitations\\n\" + \"# under the License.\\n\"\n-            + \"ORYX.CONFIG.ROOT_PATH \\\\=\t\t\t\t\t\\\"../editor/\\\"; //TODO: Remove last slash!!=BASE_PATH =                                     window.location.toString().substr(0, window.location.toString().indexOf('/wicket'));\\\\nORYX.CONFIG.ROOT_PATH =\t\t\t\tBASE_PATH + \\\"/activiti-modeler/editor/\\\";\\n\"\n-            + \"ORYX.CONFIG.EXPLORER_PATH \\\\=\t\t\t\t\\\"../explorer\\\";=ORYX.CONFIG.EXPLORER_PATH =\t\t\tBASE_PATH + \\\"/activiti-modeler/explorer\\\";\\n\"\n-            + \"ORYX.CONFIG.LIBS_PATH \\\\=\t\t\t\t\t\\\"../libs\\\";=ORYX.CONFIG.LIBS_PATH =\t\t\t\tBASE_PATH + \\\"/activiti-modeler/libs\\\";\\n\"\n-            + \"ORYX.CONFIG.SYNTAXCHECKER_URL \\\\==ORYX.CONFIG.PLUGINS_CONFIG =\t\t\tORYX.CONFIG.ROOT_PATH + \\\"plugins.xml\\\";\\\\nORYX.CONFIG.SYNTAXCHECKER_URL =\\n\"\n-            + \"this._baseUrl \\\\= \\\"../editor/stencilsets/bpmn2.0/\\\";=this._baseUrl = ORYX.CONFIG.ROOT_PATH + \\\"stencilsets/bpmn2.0/\\\";\\n\"\n-            + \"this._source \\\\= \\\"../stencilsets/bpmn2.0/bpmn2.0.json\\\";=this._source = ORYX.CONFIG.ROOT_PATH + \\\"stencilsets/bpmn2.0/bpmn2.0.json\\\";\\n\"\n-            + \"\\\"../service/editor/stencilset\\\"=ORYX.CONFIG.ROOT_PATH + \\\"stencilset.json\\\"\\n\"\n-            + \"ORYX.Editor.createByUrl=modelUrl = BASE_PATH + \\\"/workflowDefGET\\\";\\\\nORYX.Editor.createByUrl\\n\"\n-            + \"../explorer/src/img/signavio/smoky/logo2.png=\\\"+ORYX.CONFIG.EXPLORER_PATH+\\\"/src/img/signavio/smoky/logo2.png\\n\"\n-            + \"<a href\\\\=\\\\\\\\\\\"\\\"+ORYX.CONFIG.WEB_URL+\\\"\\\\\\\\\\\" target\\\\=\\\\\\\\\\\"_self\\\\\\\\\\\" title\\\\=\\\\\\\\\\\"close modeler\\\\\\\\\\\">=<a href=\\\\\\\\\\\"#\\\\\\\\\\\" title=\\\\\\\\\\\"close modeler\\\\\\\\\\\" onclick=\\\\\\\\\\\"window.close();\\\\\\\\\\\">\\n\"\n-            + \"../editor/images/close_button.png=\\\"+ORYX.CONFIG.ROOT_PATH+\\\"images/close_button.png\\n\"\n-            + \"height:16px;width:16px;margin-bottom:-4px;background: transparent url(../libs/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;=height:16px;width:16px;margin-bottom:-4px;background: transparent url(\\\"+ORYX.CONFIG.LIBS_PATH+\\\"/ext-2.0.2/resources/images/default/tree/loading.gif) no-repeat center;\\n\"\n-            + \"icon: '../editor/images/add.png',=icon: ORYX.CONFIG.ROOT_PATH + 'images/add.png',\\n\"\n-            + \"icon: '../editor/images/delete.png',=icon: ORYX.CONFIG.ROOT_PATH + 'images/delete.png',\\n\"\n-            + \"id\\\\=\\\"edit_model_title\\\"=id=\\\"edit_model_title\\\" readonly=\\\"readonly\\\"\\n\"\n-            + \"id\\\\=\\\"edit_model_summary\\\"=id=\\\"edit_model_summary\\\" readonly=\\\"readonly\\\"\\n\"\n-            + \"\\\"../service/model/\\\" + modelMeta.modelId + \\\"/json\\\"=BASE_PATH + \\\"/workflowDefGET\\\"\\n\"\n-            + \"// Send the request to the server.=saveUri = BASE_PATH + \\\"/workflowDefPUT\\\";\\\\n// Send the request to the server.\\n\"\n-            + \"'Accept':\\\"application/json\\\", 'Content-Type':'charset\\\\=UTF-8'='Accept':\\\"application/json\\\", 'Content-Type':'application/json'\";\n-\n-}"},{"sha":"f772c8b0d18bf98d0ac8985327d387fff9b6beda","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":9,"deletions":4,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -51,7 +51,7 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         final String proxyUser = args[15];\n         final String proxyPwd = args[16];\n         final boolean mavenProxyAutoconf = Boolean.valueOf(args[17]);\n-        \n+\n         setSyncopeInstallDir(installPath, artifactId);\n \n         final FileSystemUtils fileSystemUtils = new FileSystemUtils(handler);\n@@ -110,15 +110,20 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         fileSystemUtils.createDirectory(logsDirectory);\n         fileSystemUtils.createDirectory(bundlesDirectory);\n         fileSystemUtils.createDirectory(modelerDirectory);\n-        \n+\n         fileSystemUtils.copyFileFromResources(\"/\" + properties.getProperty(\"modelerPomFile\"),\n                 modelerDirectory + \"/\" + properties.getProperty(\"pomFile\"), handler);\n \n         fileSystemUtils.copyFile(\n                 syncopeInstallDir\n                 + properties.getProperty(\"consoleResDirectory\")\n-                + \"/\" + properties.getProperty(\"tokenValueMapFile\"),\n-                modelerDirectory + \"/\" + properties.getProperty(\"tokenValueMapFile\"));\n+                + \"/\" + properties.getProperty(\"urlConfig\"),\n+                modelerDirectory + \"/\" + properties.getProperty(\"urlConfig\"));\n+        fileSystemUtils.copyFile(\n+                syncopeInstallDir\n+                + properties.getProperty(\"consoleResDirectory\")\n+                + \"/\" + properties.getProperty(\"saveModel\"),\n+                modelerDirectory + \"/\" + properties.getProperty(\"saveModel\"));\n \n         final Properties modelerProperties = new Properties();\n         modelerProperties.setProperty(\"modeler.directory\", modelerDirectory);"},{"sha":"6e33c6ac226418dbf915ff15e11f459e4bedf8c5","filename":"installer/src/main/resources/installer.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fresources%2Finstaller.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fresources%2Finstaller.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2Finstaller.properties?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -16,7 +16,8 @@\n # under the License.\n jBossDeploymentStructureXmlFile=core/src/main/webapp/WEB-INF/jboss-deployment-structure.xml\n glassfishCoreWebXmlFile=core/src/main/webapp/WEB-INF/glassfish-web.xml\n-tokenValueMapFile=oryx.debug.js-tokenValueMap.properties\n+urlConfig=url-config.js\n+saveModel=save-model.html\n consoleResDirectory=console/src/main/resources\n pomFile=pom.xml\n persistenceContextEMFactoryFile=core/src/main/resources/persistenceContextEMFactory.xml"},{"sha":"56841bbd8da11862d969db471323972edb0d3d11","filename":"installer/src/main/resources/modelerPom.xml","status":"modified","additions":41,"deletions":44,"changes":85,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -27,9 +27,8 @@ under the License.\n   <packaging>jar</packaging>\n    \n   <properties>\n-    <activiti.version>5.16.4</activiti.version>\n+    <activiti.version>5.17</activiti.version>\n     <activiti-modeler.directory>${modeler.directory}</activiti-modeler.directory>\n-    <tokenValueMap>${modeler.directory}/oryx.debug.js-tokenValueMap.properties</tokenValueMap>\n      \n     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n   </properties>\n@@ -49,38 +48,55 @@ under the License.\n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-antrun-plugin</artifactId>\n-        <version>1.7</version>\n+        <version>1.8</version>\n         <executions>\n           <execution>\n             <id>setupActivitiModeler</id>\n             <phase>process-resources</phase>\n             <configuration>\n               <target>\n-                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\"\n+                <unzip src=\"${settings.localRepository}/org/activiti/activiti-webapp-explorer2/${activiti.version}/activiti-webapp-explorer2-${activiti.version}.war\" \n                        dest=\"${project.build.directory}/activiti-webapp-explorer2\" />\n-                 \n+                \n                 <mkdir dir=\"${activiti-modeler.directory}\" />\n-                 \n-                <mkdir dir=\"${activiti-modeler.directory}/editor\" />\n-                <copy todir=\"${activiti-modeler.directory}/editor\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor\">\n-                    <exclude name=\"oryx.js\" />\n-                  </fileset>\n-                </copy>\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/plugins.xml\"\n-                      todir=\"${activiti-modeler.directory}/editor\" />\n-                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\"\n-                      todir=\"${activiti-modeler.directory}/editor\" />\n-                 \n-                <mkdir dir=\"${activiti-modeler.directory}/explorer\" />\n-                <copy todir=\"${activiti-modeler.directory}/explorer\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/explorer\" />\n-                </copy>\n-                 \n-                <mkdir dir=\"${activiti-modeler.directory}/libs\" />\n-                <copy todir=\"${activiti-modeler.directory}/libs\">\n-                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/libs\" />\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/modeler.html\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+                <replace file=\"${activiti-modeler.directory}/modeler.html\"\n+                         token=\"&lt;/head&gt;\"\n+                         value=\"&lt;script type=&quot;text/javascript&quot;&gt;window.onunload = refreshParent; function refreshParent() { window.opener.location.reload(); }&lt;/script&gt;&lt;/head&gt;\"/>\n+                <copy file=\"${project.build.directory}/activiti-webapp-explorer2/WEB-INF/classes/stencilset.json\" \n+                      todir=\"${activiti-modeler.directory}\" />\n+\n+                <mkdir dir=\"${activiti-modeler.directory}/editor-app\" />\n+                <copy todir=\"${activiti-modeler.directory}/editor-app\">\n+                  <fileset dir=\"${project.build.directory}/activiti-webapp-explorer2/editor-app\" />                  \n                 </copy>\n+                <replaceregexp file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                               match=\"ORYX.CONFIG.ROOT_PATH =.*&quot;editor/&quot;; //TODO: Remove last slash!!\"\n+                               replace=\"BASE_PATH = window.location.toString().substr(0, window.location.toString().indexOf(&#39;/wicket&#39;));\n+ORYX.CONFIG.ROOT_PATH = BASE_PATH + &quot;/activiti-modeler/editor-app/editor/&quot;;\"\n+                               byline=\"true\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"new Ajax.Request(ACTIVITI.CONFIG.contextRoot + &#39;/editor/stencilset?version=&#39; + Date.now(), {\"\n+                         value=\"new Ajax.Request(window.location.toString().substr(0, window.location.toString().indexOf(&#39;/activiti-modeler&#39;)) + &quot;/activiti-modeler/stencilset.json&quot;, {\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl(modelUrl);\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl(modelUrl);\"/>\n+                <replace file=\"${activiti-modeler.directory}/editor-app/editor/oryx.debug.js\"\n+                         token=\"ORYX.Editor.createByUrl = function(modelUrl){\"\n+                         value=\"modelUrl = BASE_PATH + &quot;/workflowDefGET&quot;;\n+ORYX.Editor.createByUrl = function(modelUrl){\"/>                \n+                <replace file=\"${activiti-modeler.directory}/editor-app/configuration/toolbar-default-actions.js\"\n+                         token=\"window.location.href = &quot;./&quot;;\"\n+                         value=\"window.close();\"/>\n+                                               \n+                <copy file=\"${basedir}/src/main/resources/url-config.js\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/configuration\"\n+                      overwrite=\"true\" />\n+                <copy file=\"${basedir}/src/main/resources/save-model.html\" \n+                      todir=\"${activiti-modeler.directory}/editor-app/popups\"\n+                      overwrite=\"true\" />\n               </target>\n             </configuration>\n             <goals>\n@@ -89,25 +105,6 @@ under the License.\n           </execution>\n         </executions>\n       </plugin>\n-      <plugin>\n-        <groupId>com.google.code.maven-replacer-plugin</groupId>\n-        <artifactId>replacer</artifactId>\n-        <version>1.5.3</version>\n-        <executions>\n-          <execution>\n-            <phase>process-resources</phase>\n-            <goals>\n-              <goal>replace</goal>\n-            </goals>                  \n-          </execution>\n-        </executions>\n-        <configuration>\n-          <file>${activiti-modeler.directory}/editor/oryx.debug.js</file>\n-          <tokenValueMap>${tokenValueMap}</tokenValueMap>\n-          <unescape>true</unescape>\n-          <regex>false</regex>\n-        </configuration>\n-      </plugin>\n     </plugins>\n   </build>\n </project>"},{"sha":"08bbfa96866da64ca4e3c427212a06506f094614","filename":"pom.xml","status":"modified","additions":3,"deletions":20,"changes":23,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/04415543cc7728e7cd915638ed8f4f98b0e8822d/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/04415543cc7728e7cd915638ed8f4f98b0e8822d/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=04415543cc7728e7cd915638ed8f4f98b0e8822d","patch":"@@ -347,7 +347,7 @@ under the License.\n \n     <groovy.version>2.4.3</groovy.version>\n \n-    <activiti.version>5.16.4</activiti.version>\n+    <activiti.version>5.17.0</activiti.version>\n \n     <slf4j.version>1.7.12</slf4j.version>\n     <log4j.version>2.2</log4j.version>\n@@ -782,17 +782,6 @@ under the License.\n         <artifactId>avalon-framework-impl</artifactId>\n         <version>4.3.1</version>\n       </dependency>\n-\n-      <dependency>\n-        <groupId>xalan</groupId>\n-        <artifactId>xalan</artifactId>\n-        <version>2.7.1</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>xerces</groupId>\n-        <artifactId>xercesImpl</artifactId>\n-        <version>2.11.0</version>\n-      </dependency>\n       \n       <!-- Activiti -->\n       <dependency>\n@@ -1153,12 +1142,6 @@ under the License.\n           </dependencies>\n         </plugin>\n         \n-        <plugin>\n-          <groupId>com.google.code.maven-replacer-plugin</groupId>\n-          <artifactId>replacer</artifactId>\n-          <version>1.5.3</version>\n-        </plugin>\n-        \n         <plugin>\n           <groupId>org.zeroturnaround</groupId>\n           <artifactId>jrebel-maven-plugin</artifactId>\n@@ -1543,9 +1526,9 @@ under the License.\n                       <link>http://connid.tirasa.net/apidocs/1.4/</link>\n                       <link>http://camel.apache.org/maven/current/camel-core/apidocs/</link>\n                       <link>http://camel.apache.org/maven/current/camel-spring/apidocs/</link>\n-                      <link>http://ci.apache.org/projects/wicket/apidocs/6.x/</link>\n+                      <link>http://ci.apache.org/projects/wicket/apidocs/7.x/</link>\n                       <link>http://docs.spring.io/spring/docs/4.1.x/javadoc-api/</link>\n-                      <link>http://docs.spring.io/spring-security/site/docs/3.2.x/apidocs/</link>\n+                      <link>http://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/</link>\n                       <link>http://activiti.org/javadocs/</link>\n                     </links>\n                   </configuration>"}]}