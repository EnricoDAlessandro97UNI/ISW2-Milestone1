{"sha":"9d15e6f19bd0db7375a024a4d313fe3f84dac70a","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjlkMTVlNmYxOWJkMGRiNzM3NWEwMjRhNGQzMTNmZTNmODRkYWM3MGE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-06-13T09:33:25Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-06-13T09:33:25Z"},"message":"[SYNCOPE-829] Moving result size protection onto external layers","tree":{"sha":"ef864182d6d2866f4e7d82040bdd5d0f6d9841a9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ef864182d6d2866f4e7d82040bdd5d0f6d9841a9"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9d15e6f19bd0db7375a024a4d313fe3f84dac70a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9d15e6f19bd0db7375a024a4d313fe3f84dac70a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9d15e6f19bd0db7375a024a4d313fe3f84dac70a","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9d15e6f19bd0db7375a024a4d313fe3f84dac70a/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"6401a90392ef63cf1f8c89e79d16fc858a27d26f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6401a90392ef63cf1f8c89e79d16fc858a27d26f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/6401a90392ef63cf1f8c89e79d16fc858a27d26f"}],"stats":{"total":18,"additions":12,"deletions":6},"files":[{"sha":"16d0e66b299a37dd09672c73cd0a3d73b43b5f4a","filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/beans/ConnObjectTOListQuery.java","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9d15e6f19bd0db7375a024a4d313fe3f84dac70a/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FConnObjectTOListQuery.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9d15e6f19bd0db7375a024a4d313fe3f84dac70a/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FConnObjectTOListQuery.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fbeans%2FConnObjectTOListQuery.java?ref=9d15e6f19bd0db7375a024a4d313fe3f84dac70a","patch":"@@ -19,6 +19,7 @@\n package org.apache.syncope.common.rest.api.beans;\n \n import java.io.Serializable;\n+import javax.validation.constraints.Max;\n import javax.validation.constraints.Min;\n import javax.ws.rs.DefaultValue;\n import javax.ws.rs.QueryParam;\n@@ -32,6 +33,8 @@ public class ConnObjectTOListQuery implements Serializable {\n \n     private static final long serialVersionUID = -371488230250055359L;\n \n+    private static final int MAX_SIZE = 100;\n+\n     public static class Builder {\n \n         private final ConnObjectTOListQuery instance = new ConnObjectTOListQuery();\n@@ -64,10 +67,15 @@ public ConnObjectTOListQuery build() {\n     private String orderBy;\n \n     public Integer getSize() {\n-        return size;\n+        return size == null\n+                ? 25\n+                : size > MAX_SIZE\n+                        ? MAX_SIZE\n+                        : size;\n     }\n \n     @Min(1)\n+    @Max(MAX_SIZE)\n     @QueryParam(JAXRSService.PARAM_SIZE)\n     @DefaultValue(\"25\")\n     public void setSize(final Integer size) {"},{"sha":"915d8fff69b52135f689bf6137125111165c770a","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/ResourceLogic.java","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9d15e6f19bd0db7375a024a4d313fe3f84dac70a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FResourceLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9d15e6f19bd0db7375a024a4d313fe3f84dac70a/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FResourceLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FResourceLogic.java?ref=9d15e6f19bd0db7375a024a4d313fe3f84dac70a","patch":"@@ -77,8 +77,6 @@\n @Component\n public class ResourceLogic extends AbstractTransactionalLogic<ResourceTO> {\n \n-    private static final transient int MAX_CONNOBJ_SEARCH_SIZE = 1000;\n-\n     @Autowired\n     private ExternalResourceDAO resourceDAO;\n \n@@ -320,7 +318,7 @@ public ConnObjectTO readConnObject(final String key, final String anyTypeKey, fi\n     @PreAuthorize(\"hasRole('\" + StandardEntitlement.RESOURCE_LIST_CONNOBJECT + \"')\")\n     @Transactional(readOnly = true)\n     public Pair<SearchResult, List<ConnObjectTO>> listConnObjects(final String key, final String anyTypeKey,\n-            final Integer size, final String pagedResultsCookie, final List<OrderByClause> orderBy) {\n+            final int size, final String pagedResultsCookie, final List<OrderByClause> orderBy) {\n \n         Triple<ExternalResource, AnyType, Provision> init = connObjectInit(key, anyTypeKey);\n \n@@ -349,9 +347,9 @@ public void handleResult(final SearchResult result) {\n             @Override\n             public boolean handle(final ConnectorObject connectorObject) {\n                 connObjects.add(connObjectUtils.getConnObjectTO(connectorObject));\n-                // provide safety approach in case of pagination not supported or not required (SYNCOPE-829 reworking)\n+                // safety protection against uncontrolled result size\n                 count++;\n-                return count < MAX_CONNOBJ_SEARCH_SIZE;\n+                return count < size;\n             }\n         }, size, pagedResultsCookie, orderBy, mapItems);\n "}]}