{"sha":"262d84d93fcbdb59bef0a64331e49cd82387fd23","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjI2MmQ4NGQ5M2ZjYmRiNTliZWYwYTY0MzMxZTQ5Y2Q4MjM4N2ZkMjM=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-12-20T16:40:45Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-12-20T16:40:45Z"},"message":"Merge from branch 0_7_X + update to latest cargo)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247287 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e6160715a62773e0e909c62769a4082b8306f6a7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/e6160715a62773e0e909c62769a4082b8306f6a7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/262d84d93fcbdb59bef0a64331e49cd82387fd23","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/262d84d93fcbdb59bef0a64331e49cd82387fd23","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/262d84d93fcbdb59bef0a64331e49cd82387fd23","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/262d84d93fcbdb59bef0a64331e49cd82387fd23/comments","author":null,"committer":null,"parents":[{"sha":"1996620dd17f241a73bdcfb68494a849456adc5e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1996620dd17f241a73bdcfb68494a849456adc5e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1996620dd17f241a73bdcfb68494a849456adc5e"}],"stats":{"total":293,"additions":92,"deletions":201},"files":[{"sha":"991352af6a2023ae2f914a797c71c8edd87eb722","filename":"archetype/pom.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -77,20 +77,23 @@\n \t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/workflow.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/content.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/test.csv\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/db.jsp\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n                                       \n \t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/persistence.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/workflow.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/content.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/logback.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../core/src/main/webapp/WEB-INF/web.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/webapp/WEB-INF\" overwrite=\"true\" />\n                                       \n+\t\t\t\t      <copy file=\"${basedir}/../console/src/main/resources/configuration.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources\" overwrite=\"true\" />\n \t\t\t\t      <copy file=\"${basedir}/../console/src/main/resources/logback.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources\" overwrite=\"true\" />\n                                     </then>\n                                     <else>\n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/persistence.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/persistence.properties\" />\n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/workflow.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/workflow.properties\" />\n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/content.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/content.xml\" />\n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/test.csv\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/test.csv\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/db.jsp\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/db.jsp\" />\n                                       \n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/persistence.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/persistence.properties\" />\n \t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/workflow.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/workflow.properties\" />"},{"sha":"1f753050811f4b0d02c57a81bf135d529431b4d4","filename":"archetype/src/main/resources/META-INF/maven/archetype-metadata.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fmaven%2Farchetype-metadata.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fmaven%2Farchetype-metadata.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fmaven%2Farchetype-metadata.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -8,6 +8,9 @@\n                 <fileSet filtered=\"true\" encoding=\"UTF-8\">\n                     <directory>src/main/resources</directory>\n                 </fileSet>\n+                <fileSet filtered=\"true\" encoding=\"UTF-8\">\n+                    <directory>src/main/webapp</directory>\n+                </fileSet>\n                 <fileSet filtered=\"true\" encoding=\"UTF-8\">\n                     <directory>src/test/resources</directory>\n                 </fileSet>\n@@ -17,9 +20,6 @@\n             <fileSets>\n                 <fileSet filtered=\"true\" encoding=\"UTF-8\">\n                     <directory>src/main/resources</directory>\n-                    <includes>\n-                        <include>**/*.xml</include>\n-                    </includes>\n                 </fileSet>\n                 <fileSet filtered=\"true\" encoding=\"UTF-8\">\n                     <directory>src/test/resources</directory>"},{"sha":"31ab66091d1b842654ee2f7ec180447079414502","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":4,"deletions":25,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -140,20 +140,10 @@\n                                         <exclude name=\"**/workflow.properties\" />\r\n                                     </patternset>\r\n                                 </unzip>\r\n-                            </target>\r\n-                        </configuration>\r\n-                        <goals>\r\n-                            <goal>run</goal>\r\n-                        </goals>\r\n-                    </execution>\r\n-                    <execution>\r\n-                        <id>setupTomcat</id>\r\n-                        <phase>pre-integration-test</phase>\r\n-                        <configuration>\r\n-                            <target>\r\n-                                <get src=\"http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" skipexisting=\"true\" />\r\n-                                <unzip src=\"${java.io.tmpdir}/apache-tomcat-${tomcat.version}.zip\"\r\n-                                       dest=\"${java.io.tmpdir}\" overwrite=\"false\"/>\r\n+                                <copy file=\"${project.build.directory}/test-classes/db.jsp\" todir=\"${cargo.run.dir}\"/>\r\n+                                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\r\n+                                    <fileset dir=\"${project.build.directory}/test-classes\"/>\r\n+                                </copy>\r\n                             </target>\r\n                         </configuration>\r\n                         <goals>\r\n@@ -180,12 +170,7 @@\n                 <artifactId>cargo-maven2-plugin</artifactId>\r\n                 <inherited>true</inherited>\r\n                 <configuration>\r\n-                    <wait>true</wait>\r\n                     <container>\r\n-                        <containerId>tomcat7x</containerId>\r\n-                        <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\r\n-                        <log>${cargo.log}</log>\r\n-                        <output>${cargo.output}</output>\r\n                         <dependencies>\r\n                             <dependency>\r\n                                 <groupId>com.h2database</groupId>\r\n@@ -195,12 +180,6 @@\n                     </container>\r\n                     <configuration>\r\n                         <type>standalone</type>\r\n-                        <configfiles>\r\n-                            <configfile>\r\n-                                <file>${project.build.directory}/test-classes/catalina.properties</file>\r\n-                                <todir>conf</todir>\r\n-                            </configfile>\r\n-                        </configfiles>\r\n                         <properties>\r\n                             <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>\r\n                             <cargo.jvmargs>-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m</cargo.jvmargs>\r"},{"sha":"a83a156968bb5ced201a0dbbd85705939020feeb","filename":"archetype/src/main/resources/archetype-resources/console/src/test/resources/catalina.properties","status":"removed","additions":0,"deletions":66,"changes":66,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1996620dd17f241a73bdcfb68494a849456adc5e/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Ftest%2Fresources%2Fcatalina.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1996620dd17f241a73bdcfb68494a849456adc5e/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Ftest%2Fresources%2Fcatalina.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Ftest%2Fresources%2Fcatalina.properties?ref=1996620dd17f241a73bdcfb68494a849456adc5e","patch":"@@ -1,66 +0,0 @@\n-#\n-# List of comma-separated packages that start with or equal this string\n-# will cause a security exception to be thrown when\n-# passed to checkPackageAccess unless the\n-# corresponding RuntimePermission (\"accessClassInPackage.\"+package) has\n-# been granted.\n-package.access=sun.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.,sun.beans.\n-#\n-# List of comma-separated packages that start with or equal this string\n-# will cause a security exception to be thrown when\n-# passed to checkPackageDefinition unless the\n-# corresponding RuntimePermission (\"defineClassInPackage.\"+package) has\n-# been granted.\n-#\n-# by default, no packages are restricted for definition, and none of\n-# the class loaders supplied with the JDK call checkPackageDefinition.\n-#\n-package.definition=sun.,java.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.\n-\n-#\n-#\n-# List of comma-separated paths defining the contents of the \"common\"\n-# classloader. Prefixes should be used to define what is the repository type.\n-# Path may be relative to the CATALINA_HOME or CATALINA_BASE path or absolute.\n-# If left as blank,the JVM system loader will be used as Catalina's \"common\"\n-# loader.\n-# Examples:\n-#     \"foo\": Add this folder as a class repository\n-#     \"foo/*.jar\": Add all the JARs of the specified folder as class\n-#                  repositories\n-#     \"foo/bar.jar\": Add bar.jar as a class repository\n-common.loader=${catalina.home}/lib,${catalina.home}/lib/*.jar\n-\n-#\n-# List of comma-separated paths defining the contents of the \"server\"\n-# classloader. Prefixes should be used to define what is the repository type.\n-# Path may be relative to the CATALINA_HOME or CATALINA_BASE path or absolute.\n-# If left as blank, the \"common\" loader will be used as Catalina's \"server\"\n-# loader.\n-# Examples:\n-#     \"foo\": Add this folder as a class repository\n-#     \"foo/*.jar\": Add all the JARs of the specified folder as class\n-#                  repositories\n-#     \"foo/bar.jar\": Add bar.jar as a class repository\n-server.loader=\n-\n-#\n-# List of comma-separated paths defining the contents of the \"shared\"\n-# classloader. Prefixes should be used to define what is the repository type.\n-# Path may be relative to the CATALINA_BASE path or absolute. If left as blank,\n-# the \"common\" loader will be used as Catalina's \"shared\" loader.\n-# Examples:\n-#     \"foo\": Add this folder as a class repository\n-#     \"foo/*.jar\": Add all the JARs of the specified folder as class\n-#                  repositories\n-#     \"foo/bar.jar\": Add bar.jar as a class repository\n-# Please note that for single jars, e.g. bar.jar, you need the URL form\n-# starting with file:.\n-shared.loader=${project.build.directory}/test-classes\n-\n-#\n-# String cache configuration.\n-tomcat.util.buf.StringCache.byte.enabled=true\n-#tomcat.util.buf.StringCache.char.enabled=true\n-#tomcat.util.buf.StringCache.trainThreshold=500000\n-#tomcat.util.buf.StringCache.cacheSize=5000"},{"sha":"b0dc5813124571aad574069d4914eed3b78f5763","filename":"archetype/src/main/resources/archetype-resources/core/pom.xml","status":"modified","additions":5,"deletions":22,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fcore%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -166,22 +166,13 @@\n                                         <exclude name=\"**/ehcache.xml\"/>\r\n                                         <exclude name=\"**/persistence.properties\"/>\r\n                                         <exclude name=\"**/security.properties\"/>\r\n+                                        <exclude name=\"**/workflow.properties\" />\r\n                                     </patternset>\r\n                                 </unzip>\r\n-                            </target>\r\n-                        </configuration>\r\n-                        <goals>\r\n-                            <goal>run</goal>\r\n-                        </goals>\r\n-                    </execution>\r\n-                    <execution>\r\n-                        <id>setupTomcat</id>\r\n-                        <phase>pre-integration-test</phase>\r\n-                        <configuration>\r\n-                            <target>\r\n-                                <get src=\"http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" skipexisting=\"true\" />\r\n-                                <unzip src=\"${java.io.tmpdir}/apache-tomcat-${tomcat.version}.zip\"\r\n-                                       dest=\"${java.io.tmpdir}\" overwrite=\"false\"/>\r\n+                                <copy file=\"${project.build.directory}/test-classes/db.jsp\" todir=\"${cargo.run.dir}\"/>\r\n+                                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\r\n+                                    <fileset dir=\"${project.build.directory}/test-classes\"/>\r\n+                                </copy>\r\n                             </target>\r\n                         </configuration>\r\n                         <goals>\r\n@@ -208,20 +199,12 @@\n                 <artifactId>cargo-maven2-plugin</artifactId>\r\n                 <inherited>true</inherited>\r\n                 <configuration>\r\n-                    <wait>true</wait>\r\n                     <container>\r\n-                        <containerId>tomcat7x</containerId>\r\n-                        <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\r\n-                        <log>${cargo.log}</log>\r\n-                        <output>${cargo.output}</output>\r\n                         <dependencies>\r\n                             <dependency>\r\n                                 <groupId>com.h2database</groupId>\r\n                                 <artifactId>h2</artifactId>\r\n                             </dependency>\r\n-                            <dependency>\r\n-                                <location>${project.build.directory}/test-classes/</location>\r\n-                            </dependency>\r\n                         </dependencies>\r\n                     </container>\r\n                     <configuration>\r"},{"sha":"b02bd5499ce5a6b09d9e4658be047d1d1e4e8dea","filename":"archetype/src/main/resources/archetype-resources/pom.xml","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -40,7 +40,6 @@\n \r\n         <junit.version>4.9</junit.version>\r\n \r\n-        <cargo.version>1.1.2</cargo.version>\r\n         <tomcat.version>7.0.23</tomcat.version>\r\n \r\n         <bundles.directory>${project.build.directory}/bundles</bundles.directory>\r\n@@ -388,7 +387,20 @@\n                 <plugin>\r\n                     <groupId>org.codehaus.cargo</groupId>\r\n                     <artifactId>cargo-maven2-plugin</artifactId>\r\n-                    <version>${cargo.version}</version>\r\n+                    <version>1.1.4</version>\r\n+                    <configuration>\r\n+                        <container>\r\n+                            <containerId>tomcat7x</containerId>\r\n+                            <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\r\n+                            <zipUrlInstaller>\r\n+                                <url>http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip</url>\r\n+                                <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\r\n+                                <extractDir>${java.io.tmpdir}</extractDir>\r\n+                            </zipUrlInstaller>\r\n+                            <log>${cargo.log}</log>\r\n+                            <output>${cargo.output}</output>    \r\n+                        </container>    \r\n+                    </configuration>\r\n                 </plugin>\r\n                 <plugin>\r\n                     <groupId>org.codehaus.mojo</groupId>\r"},{"sha":"01c937d8dd8a4f448b7f43a605bb21bebdce0fd9","filename":"build-tools/src/main/java/org/syncope/buildtools/H2StartStopListener.java","status":"modified","additions":1,"deletions":18,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fbuildtools%2FH2StartStopListener.java?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -29,8 +29,7 @@\n import org.springframework.web.context.support.WebApplicationContextUtils;\n \n /**\n- * Utility serlvet context listener managing H2 web console lifecycle\n- * (to be used as internal datastore) and H2 test server instance\n+ * Utility serlvet context listener managing H2 test server instance\n  * (to be used as external resource).\n  */\n public class H2StartStopListener implements ServletContextListener {\n@@ -41,24 +40,12 @@ public class H2StartStopListener implements ServletContextListener {\n     private static final Logger LOG =\n             LoggerFactory.getLogger(H2StartStopListener.class);\n \n-    private static final String H2_DATASTORE = \"h2Datastore\";\n-\n     private static final String H2_TESTDB = \"h2TestDb\";\n \n     @Override\n     public void contextInitialized(final ServletContextEvent sce) {\n         ServletContext context = sce.getServletContext();\n \n-        Server h2Datastore;\n-        try {\n-            h2Datastore = Server.createWebServer(\"\");\n-            h2Datastore.start();\n-\n-            context.setAttribute(H2_DATASTORE, h2Datastore);\n-        } catch (SQLException e) {\n-            LOG.error(\"Could not start H2 web console (datastore)\", e);\n-        }\n-\n         File workDir = (File) sce.getServletContext().getAttribute(\n                 \"javax.servlet.context.tempdir\");\n         Server h2TestDb;\n@@ -87,10 +74,6 @@ public void contextInitialized(final ServletContextEvent sce) {\n     public void contextDestroyed(final ServletContextEvent sce) {\n         ServletContext context = sce.getServletContext();\n \n-        Server h2Datastore = (Server) context.getAttribute(H2_DATASTORE);\n-        if (h2Datastore != null && h2Datastore.isRunning(true)) {\n-            h2Datastore.stop();\n-        }\n         Server h2TestDb = (Server) context.getAttribute(H2_TESTDB);\n         if (h2TestDb != null) {\n             h2TestDb.shutdown();"},{"sha":"cb856c37565cb86b8ef257e728a88f6f94e46be7","filename":"console/pom.xml","status":"modified","additions":8,"deletions":21,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -195,7 +195,7 @@\n                     </execution>\n                 </executions>\n             </plugin>\n-                                    \n+            \n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-antrun-plugin</artifactId>\n@@ -215,19 +215,13 @@\n                                         <exclude name=\"**/workflow.properties\" />\n                                     </patternset>\n                                 </unzip>\n-                            </target>\n-                        </configuration>\n-                        <goals>\n-                            <goal>run</goal>\n-                        </goals>\n-                    </execution>\n-                    <execution>\n-                        <id>setupTomcat</id>\n-                        <phase>pre-integration-test</phase>\n-                        <configuration>\n-                            <target>\n-                                <get src=\"http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" skipexisting=\"true\" />\n-                                <unzip src=\"${java.io.tmpdir}/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" overwrite=\"false\" />\n+                                <copy file=\"${project.build.directory}/test-classes/db.jsp\" todir=\"${cargo.run.dir}\"/>\n+                                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\n+                                    <fileset dir=\"${project.build.directory}/test-classes\">\n+                                        <exclude name=\"**/*.class\"/>\n+                                        <exclude name=\"restClientContext.xml\"/>\n+                                    </fileset>\n+                                </copy>\n                             </target>\n                         </configuration>\n                         <goals>\n@@ -255,14 +249,7 @@\n                 <inherited>true</inherited>\n                 <configuration>\n                     <container>\n-                        <containerId>tomcat7x</containerId>\n-                        <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\n-                        <log>${cargo.log}</log>\n-                        <output>${cargo.output}</output>\n                         <dependencies>\n-                            <dependency>\n-                                <location>${project.build.directory}/test-classes/</location>\n-                            </dependency>\n                             <dependency>\n                                 <groupId>com.h2database</groupId>\n                                 <artifactId>h2</artifactId>"},{"sha":"73e8d4df2d77528cde9966c64eb2bb2177a45181","filename":"console/src/main/java/org/syncope/console/pages/panels/RolesPanel.java","status":"modified","additions":15,"deletions":4,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -51,6 +51,8 @@ public class RolesPanel extends Panel {\n     @SpringBean\n     private RoleTreeBuilder roleTreeBuilder;\n \n+    private ListView<MembershipTO> membershipsView;\n+\n     private UserTO userTO = null;\n \n     public RolesPanel(final String id, final UserTO userTO,\n@@ -83,8 +85,7 @@ protected IModel getNodeTextModel(final IModel model) {\n             protected void onNodeLinkClicked(final Object node,\n                     final BaseTree tree, final AjaxRequestTarget target) {\n \n-                final RoleTO roleTO = (RoleTO) ((DefaultMutableTreeNode) node).\n-                        getUserObject();\n+                final RoleTO roleTO = (RoleTO) ((DefaultMutableTreeNode) node).getUserObject();\n \n                 membershipWin.setPageCreator(new ModalWindow.PageCreator() {\n \n@@ -95,8 +96,17 @@ protected void onNodeLinkClicked(final Object node,\n \n                     @Override\n                     public Page createPage() {\n+                        \n+                        for (MembershipTO memberTO : membershipsView.getList()) {\n+                            if (memberTO.getRoleId() == roleTO.getId()) {\n+                                return new MembershipModalPage(\n+                                        getPage().getPageReference(),\n+                                        membershipWin, memberTO, templateMode);\n+                            }\n+                        }\n                         membershipTO = new MembershipTO();\n                         membershipTO.setRoleId(roleTO.getId());\n+                        membershipTO.setRoleName(roleTO.getName());\n \n                         return new MembershipModalPage(\n                                 getPage().getPageReference(),\n@@ -107,12 +117,13 @@ public Page createPage() {\n             }\n         };\n \n-        tree.setOutputMarkupId(true);\n+        tree.setOutputMarkupId(\n+                true);\n         tree.getTreeState().expandAll();\n \n         add(tree);\n \n-        ListView<MembershipTO> membershipsView = new ListView<MembershipTO>(\n+        membershipsView = new ListView<MembershipTO>(\n                 \"memberships\", new PropertyModel<List<? extends MembershipTO>>(\n                 userTO, \"memberships\")) {\n "},{"sha":"66a47344d6a6597214497f08bc6171e054b77b64","filename":"core/pom.xml","status":"modified","additions":6,"deletions":23,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -384,29 +384,19 @@\n                                     </patternset>\n                                 </unzip>\n                                 <copy file=\"${project.build.directory}/test-classes/org/syncope/core/scheduling/TestSyncJobActions.class\" todir=\"${cargo.run.dir}/WEB-INF/classes/org/syncope/core/scheduling\" />\n-                                <mkdir dir=\"${project.build.directory}/test-conf\" />\n-                                <copy todir=\"${project.build.directory}/test-conf\" includeEmptyDirs=\"false\">\n-                                    <fileset dir=\"${project.build.directory}/test-classes\" excludes=\"**/*.class\" />\n+                                <copy file=\"${project.build.directory}/test-classes/db.jsp\" todir=\"${cargo.run.dir}\"/>\n+                                <copy todir=\"${cargo.run.dir}/WEB-INF/classes\" includeEmptyDirs=\"false\">\n+                                    <fileset dir=\"${project.build.directory}/test-classes\">\n+                                        <exclude name=\"**/*.class\"/>\n+                                        <exclude name=\"restClientContext.xml\"/>\n+                                    </fileset>\n                                 </copy>\n                             </target>\n                         </configuration>\n                         <goals>\n                             <goal>run</goal>\n                         </goals>\n                     </execution>\n-                    <execution>\n-                        <id>setupTomcat</id>\n-                        <phase>pre-integration-test</phase>\n-                        <configuration>\n-                            <target>\n-                                <get src=\"http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" skipexisting=\"true\" />\n-                                <unzip src=\"${java.io.tmpdir}/apache-tomcat-${tomcat.version}.zip\" dest=\"${java.io.tmpdir}\" overwrite=\"false\" />\n-                            </target>\n-                        </configuration>\n-                        <goals>\n-                            <goal>run</goal>\n-                        </goals>\n-                    </execution>\n                     <execution>\n                         <id>setupCSV</id>\n                         <phase>pre-integration-test</phase>\n@@ -451,14 +441,7 @@\n                 <inherited>true</inherited>\n                 <configuration>\n                     <container>\n-                        <containerId>tomcat7x</containerId>\n-                        <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\n-                        <log>${cargo.log}</log>\n-                        <output>${cargo.output}</output>\n                         <dependencies>\n-                            <dependency>\n-                                <location>${project.build.directory}/test-conf</location>\n-                            </dependency>\n                             <dependency>\n                                 <groupId>com.h2database</groupId>\n                                 <artifactId>h2</artifactId>"},{"sha":"de608e58a7a6e3e08a27d4a4c301c7d3b08d5d61","filename":"core/src/test/resources/db.jsp","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fsrc%2Ftest%2Fresources%2Fdb.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fsrc%2Ftest%2Fresources%2Fdb.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fdb.jsp?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -0,0 +1,19 @@\n+<%@page import=\"java.sql.SQLException\"%>\n+<%@page import=\"org.h2.tools.Server\"%>\n+<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n+<%\n+    Server h2Datastore = (Server) getServletContext().getAttribute(\n+            \"H2_DATASTORE\");\n+    if (h2Datastore == null || !h2Datastore.isRunning(true)) {\n+        try {\n+            h2Datastore = Server.createWebServer(\"-webPort\", \"8082\");\n+            h2Datastore.start();\n+\n+            getServletContext().setAttribute(\"H2_DATASTORE\", h2Datastore);\n+        } catch (SQLException e) {\n+            log(\"Could not start H2 web console (datastore)\", e);\n+        }\n+\n+        response.sendRedirect(\"http://localhost:8082\");\n+    }\n+%>\n\\ No newline at end of file"},{"sha":"907f44adcd012c7a656ba7dc7bc518708a425227","filename":"core/src/test/resources/exploredb.jsp","status":"modified","additions":0,"deletions":16,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fexploredb.jsp?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -81,22 +81,6 @@\n                         String[] types = {\"TABLE\", \"VIEW\"};\n                         ResultSet rs = dbm.getTables(null, null, \"%\", types);\n             %>\n-            <div style=\"width:300px;float:left;\">\n-                <a name=\"top\">&#160;</a>\n-                <ul style=\"margin-top:0px;\">\n-                    <%\n-                                while (rs.next()) {\n-                                    out.println(\"<li><a href=\\\"#\"\n-                                            + rs.getString(\"TABLE_NAME\") + \"\\\">\"\n-                                            + rs.getString(\"TABLE_NAME\")\n-                                            + \"</a></li>\");\n-                                }\n-                    %>\n-                </ul>\n-            </div>\n-            <%\n-                        rs.beforeFirst();\n-            %>\n             <div style=\"width:1000px;float:left;\">\n                 <%\n                             while (rs.next()) {"},{"sha":"a06e648b4f922bf2e7dbb195d660e51253677de5","filename":"pom.xml","status":"modified","additions":14,"deletions":1,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/262d84d93fcbdb59bef0a64331e49cd82387fd23/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/262d84d93fcbdb59bef0a64331e49cd82387fd23/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=262d84d93fcbdb59bef0a64331e49cd82387fd23","patch":"@@ -647,7 +647,20 @@\n                 <plugin>\n                     <groupId>org.codehaus.cargo</groupId>\n                     <artifactId>cargo-maven2-plugin</artifactId>\n-                    <version>1.1.2</version>\n+                    <version>1.1.4</version>\n+                    <configuration>\n+                        <container>\n+                            <containerId>tomcat7x</containerId>\n+                            <home>${java.io.tmpdir}/apache-tomcat-${tomcat.version}</home>\n+                            <zipUrlInstaller>\n+                                <url>http://archive.apache.org/dist/tomcat/tomcat-7/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.zip</url>\n+                                <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n+                                <extractDir>${java.io.tmpdir}</extractDir>\n+                            </zipUrlInstaller>\n+                            <log>${cargo.log}</log>\n+                            <output>${cargo.output}</output>    \n+                        </container>    \n+                    </configuration>\n                 </plugin>\n                 <plugin>\n                     <groupId>org.codehaus.mojo</groupId>"}]}