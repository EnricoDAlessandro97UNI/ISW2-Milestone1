{"sha":"7530ea211bfc12397300ff76e401a755ccd03d6a","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc1MzBlYTIxMWJmYzEyMzk3MzAwZmY3NmU0MDFhNzU1Y2NkMDNkNmE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-10-30T15:46:10Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-10-30T15:46:10Z"},"message":"Merge branch '1_2_X'","tree":{"sha":"d74ead8a035d013f80bcd75d9c71d85d84f190f1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d74ead8a035d013f80bcd75d9c71d85d84f190f1"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7530ea211bfc12397300ff76e401a755ccd03d6a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7530ea211bfc12397300ff76e401a755ccd03d6a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7530ea211bfc12397300ff76e401a755ccd03d6a","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7530ea211bfc12397300ff76e401a755ccd03d6a/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"8614d33fd43463a09e9230cad260d536d50babcf","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8614d33fd43463a09e9230cad260d536d50babcf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8614d33fd43463a09e9230cad260d536d50babcf"},{"sha":"8fc6e9e542266dbdcf04d8db5bcbbe6ea7d9385e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8fc6e9e542266dbdcf04d8db5bcbbe6ea7d9385e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8fc6e9e542266dbdcf04d8db5bcbbe6ea7d9385e"}],"stats":{"total":471,"additions":330,"deletions":141},"files":[{"sha":"d57b1b023f16c2031b2658c732ba9d6d467639e6","filename":"console/src/main/java/org/apache/syncope/console/pages/AbstractBasePage.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FAbstractBasePage.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -22,6 +22,7 @@\n import org.apache.syncope.console.commons.XMLRolesReader;\n import org.apache.syncope.console.init.MIMETypesInitializer;\n import org.apache.syncope.console.pages.panels.NotificationPanel;\n+import org.apache.syncope.console.rest.ConfigurationRestClient;\n import org.apache.syncope.console.rest.ReportRestClient;\n import org.apache.syncope.console.rest.ResourceRestClient;\n import org.apache.syncope.console.rest.RoleRestClient;\n@@ -85,7 +86,10 @@ public class AbstractBasePage extends WebPage {\n \n     @SpringBean\n     protected ReportRestClient reportRestClient;\n-    \n+\n+    @SpringBean\n+    protected ConfigurationRestClient confRestClient;\n+\n     @SpringBean\n     protected MIMETypesInitializer mimeTypesInitializer;\n "},{"sha":"fe72f87e3500bc79c9e1714914fbc2a2694feffc","filename":"console/src/main/java/org/apache/syncope/console/pages/ConfModalPage.java","status":"added","additions":111,"deletions":0,"changes":111,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.pages;\n+\n+import java.util.Collections;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.common.to.AttributeTO;\n+import org.apache.syncope.common.to.ConfTO;\n+import org.apache.syncope.console.commons.Constants;\n+import org.apache.syncope.console.commons.Mode;\n+import org.apache.syncope.console.pages.panels.AttributesPanel;\n+import org.apache.wicket.PageReference;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.model.CompoundPropertyModel;\n+import org.apache.wicket.model.ResourceModel;\n+\n+public class ConfModalPage extends BaseModalPage {\n+\n+    private static final long serialVersionUID = 3524777398688399977L;\n+\n+    public ConfModalPage(final PageReference pageRef, final ModalWindow window, final WebMarkupContainer parameters) {\n+        super();\n+\n+        MetaDataRoleAuthorizationStrategy.authorize(\n+                parameters, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"list\"));\n+        final ConfTO conf = confRestClient.list();\n+\n+        final Form<ConfTO> form = new Form<ConfTO>(\"confForm\");\n+        form.setModel(new CompoundPropertyModel<ConfTO>(conf));\n+\n+        form.add(new AttributesPanel(\"paramAttrs\", conf, form, Mode.ADMIN));\n+\n+        final AjaxButton submit = new IndicatingAjaxButton(SUBMIT, new ResourceModel(SUBMIT)) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                final ConfTO updatedConf = (ConfTO) form.getModelObject();\n+\n+                try {\n+                    for (AttributeTO attr : updatedConf.getAttrs()) {\n+                        if (attr.getValues().isEmpty()\n+                                || attr.getValues().equals(Collections.singletonList(StringUtils.EMPTY))) {\n+\n+                            confRestClient.delete(attr.getSchema());\n+                        } else {\n+                            confRestClient.set(attr);\n+                        }\n+                    }\n+\n+                    if (pageRef.getPage() instanceof BasePage) {\n+                        ((BasePage) pageRef.getPage()).setModalResult(true);\n+                    }\n+\n+                    window.close(target);\n+                } catch (Exception e) {\n+                    error(getString(Constants.ERROR) + \": \" + e.getMessage());\n+                    feedbackPanel.refresh(target);\n+                }\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                feedbackPanel.refresh(target);\n+            }\n+        };\n+        MetaDataRoleAuthorizationStrategy.authorize(\n+                submit, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"set\"));\n+        MetaDataRoleAuthorizationStrategy.authorize(\n+                submit, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Configuration\", \"delete\"));\n+        form.add(submit);\n+        form.setDefaultButton(submit);\n+\n+        final AjaxButton cancel = new IndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL)) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                window.close(target);\n+            }\n+        };\n+        cancel.setDefaultFormProcessing(false);\n+        form.add(cancel);\n+\n+        add(form);\n+    }\n+}"},{"sha":"485111709b875a1258b8f7183512d3edf434ae71","filename":"console/src/main/java/org/apache/syncope/console/pages/Configuration.java","status":"modified","additions":39,"deletions":67,"changes":106,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -25,7 +25,6 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n-import org.apache.commons.lang3.StringUtils;\n import org.apache.logging.log4j.LogManager;\n import org.apache.logging.log4j.core.LoggerContext;\n import org.apache.logging.log4j.core.config.LoggerConfig;\n@@ -41,13 +40,10 @@\n import org.apache.syncope.common.types.PolicyType;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.commons.HttpResourceStream;\n-import org.apache.syncope.console.commons.Mode;\n import org.apache.syncope.console.commons.PreferenceManager;\n import org.apache.syncope.console.commons.SortableDataProviderComparator;\n-import org.apache.syncope.console.pages.panels.AttributesPanel;\n import org.apache.syncope.console.pages.panels.LayoutsPanel;\n import org.apache.syncope.console.pages.panels.PoliciesPanel;\n-import org.apache.syncope.console.rest.ConfigurationRestClient;\n import org.apache.syncope.console.rest.LoggerRestClient;\n import org.apache.syncope.console.rest.NotificationRestClient;\n import org.apache.syncope.console.rest.SecurityQuestionRestClient;\n@@ -81,7 +77,6 @@\n import org.apache.wicket.markup.html.list.PropertyListView;\n import org.apache.wicket.markup.repeater.Item;\n import org.apache.wicket.model.AbstractReadOnlyModel;\n-import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n@@ -101,6 +96,10 @@ public class Configuration extends BasePage {\n \n     private static final long serialVersionUID = -2838270869037702214L;\n \n+    private static final int SYNCOPECONF_WIN_HEIGHT = 300;\n+\n+    private static final int SYNCOPECONF_WIN_WIDTH = 900;\n+\n     private static final int NOTIFICATION_WIN_HEIGHT = 500;\n \n     private static final int NOTIFICATION_WIN_WIDTH = 1100;\n@@ -109,9 +108,6 @@ public class Configuration extends BasePage {\n \n     private static final int SECURITY_QUESTION_WIN_WIDTH = 900;\n \n-    @SpringBean\n-    private ConfigurationRestClient confRestClient;\n-\n     @SpringBean\n     private LoggerRestClient loggerRestClient;\n \n@@ -127,6 +123,8 @@ public class Configuration extends BasePage {\n     @SpringBean\n     private PreferenceManager prefMan;\n \n+    private final ModalWindow syncopeConfWin;\n+\n     private final ModalWindow createNotificationWin;\n \n     private final ModalWindow editNotificationWin;\n@@ -144,18 +142,39 @@ public class Configuration extends BasePage {\n     public Configuration() {\n         super();\n \n+        add(syncopeConfWin = new ModalWindow(\"syncopeConfWin\"));\n+        syncopeConfWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        syncopeConfWin.setInitialHeight(SYNCOPECONF_WIN_HEIGHT);\n+        syncopeConfWin.setInitialWidth(SYNCOPECONF_WIN_WIDTH);\n+        syncopeConfWin.setCookieName(\"syncopeconf-modal\");\n         setupSyncopeConf();\n \n         add(new PoliciesPanel(\"passwordPoliciesPanel\", getPageReference(), PolicyType.PASSWORD));\n         add(new PoliciesPanel(\"accountPoliciesPanel\", getPageReference(), PolicyType.ACCOUNT));\n         add(new PoliciesPanel(\"syncPoliciesPanel\", getPageReference(), PolicyType.SYNC));\n \n         add(createNotificationWin = new ModalWindow(\"createNotificationWin\"));\n+        createNotificationWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        createNotificationWin.setInitialHeight(NOTIFICATION_WIN_HEIGHT);\n+        createNotificationWin.setInitialWidth(NOTIFICATION_WIN_WIDTH);\n+        createNotificationWin.setCookieName(\"create-notification-modal\");\n         add(editNotificationWin = new ModalWindow(\"editNotificationWin\"));\n+        editNotificationWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        editNotificationWin.setInitialHeight(NOTIFICATION_WIN_HEIGHT);\n+        editNotificationWin.setInitialWidth(NOTIFICATION_WIN_WIDTH);\n+        editNotificationWin.setCookieName(\"edit-notification-modal\");\n         setupNotification();\n \n         add(createSecurityQuestionWin = new ModalWindow(\"createSecurityQuestionWin\"));\n+        createSecurityQuestionWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        createSecurityQuestionWin.setInitialHeight(SECURITY_QUESTION_WIN_HEIGHT);\n+        createSecurityQuestionWin.setInitialWidth(SECURITY_QUESTION_WIN_WIDTH);\n+        createSecurityQuestionWin.setCookieName(\"create-security-question-modal\");\n         add(editSecurityQuestionWin = new ModalWindow(\"editSecurityQuestionWin\"));\n+        editSecurityQuestionWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        editSecurityQuestionWin.setInitialHeight(SECURITY_QUESTION_WIN_HEIGHT);\n+        editSecurityQuestionWin.setInitialWidth(SECURITY_QUESTION_WIN_WIDTH);\n+        editSecurityQuestionWin.setCookieName(\"edit-security-question-modal\");\n         setupSecurityQuestion();\n \n         // Workflow definition stuff\n@@ -255,59 +274,32 @@ protected byte[] getImageData(final IResource.Attributes attributes) {\n \n     @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n     private void setupSyncopeConf() {\n-        WebMarkupContainer parameters = new WebMarkupContainer(\"parameters\");\n+        final WebMarkupContainer parameters = new WebMarkupContainer(\"parameters\");\n+        parameters.setOutputMarkupId(true);\n         add(parameters);\n-        MetaDataRoleAuthorizationStrategy.authorize(parameters, ENABLE, xmlRolesReader.getAllAllowedRoles(\n-                \"Configuration\", \"list\"));\n \n-        final ConfTO conf = confRestClient.list();\n+        setWindowClosedCallback(syncopeConfWin, parameters);\n \n-        for (Iterator<AttributeTO> it = conf.getAttrs().iterator(); it.hasNext();) {\n-            AttributeTO attr = it.next();\n-            for (AttrLayoutType type : AttrLayoutType.values()) {\n-                if (type.getConfKey().equals(attr.getSchema())) {\n-                    it.remove();\n-                }\n-            }\n-        }\n-\n-        final Form<?> form = new Form<Void>(\"confForm\");\n-        form.setModel(new CompoundPropertyModel(conf));\n-        parameters.add(form);\n-\n-        form.add(new AttributesPanel(\"parameters\", conf, form, Mode.ADMIN));\n-\n-        IndicatingAjaxLink<Void> save = new IndicatingAjaxLink<Void>(\"saveParameters\") {\n+        AjaxLink<Void> confLink = new IndicatingAjaxLink<Void>(\"confLink\") {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n-                final ConfTO updatedConf = (ConfTO) form.getModelObject();\n+                syncopeConfWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                try {\n-                    for (AttributeTO attr : updatedConf.getAttrs()) {\n-                        if (attr.getValues().isEmpty()\n-                                || attr.getValues().equals(Collections.singletonList(StringUtils.EMPTY))) {\n+                    private static final long serialVersionUID = -7834632442532690940L;\n \n-                            confRestClient.delete(attr.getSchema());\n-                        } else {\n-                            confRestClient.set(attr);\n-                        }\n+                    @Override\n+                    public Page createPage() {\n+                        return new ConfModalPage(getPageReference(), editNotificationWin, parameters);\n                     }\n+                });\n \n-                    info(getString(Constants.OPERATION_SUCCEEDED));\n-                    feedbackPanel.refresh(target);\n-                } catch (Exception e) {\n-                    LOG.error(\"While updating configuration parameters\", e);\n-                    error(getString(Constants.ERROR) + \": \" + e.getMessage());\n-                    feedbackPanel.refresh(target);\n-                }\n+                syncopeConfWin.show(target);\n             }\n         };\n-        MetaDataRoleAuthorizationStrategy.authorize(save, ENABLE, xmlRolesReader.getAllAllowedRoles(\n-                \"Configuration\", \"set\"));\n-        form.add(save);\n+        parameters.add(confLink);\n \n         Link<Void> dbExportLink = new Link<Void>(\"dbExportLink\") {\n \n@@ -422,16 +414,6 @@ public void onClick(final AjaxRequestTarget target) {\n \n         add(notificationContainer);\n \n-        createNotificationWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        createNotificationWin.setInitialHeight(NOTIFICATION_WIN_HEIGHT);\n-        createNotificationWin.setInitialWidth(NOTIFICATION_WIN_WIDTH);\n-        createNotificationWin.setCookieName(\"create-notification-modal\");\n-\n-        editNotificationWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        editNotificationWin.setInitialHeight(NOTIFICATION_WIN_HEIGHT);\n-        editNotificationWin.setInitialWidth(NOTIFICATION_WIN_WIDTH);\n-        editNotificationWin.setCookieName(\"edit-notification-modal\");\n-\n         setWindowClosedCallback(createNotificationWin, notificationContainer);\n         setWindowClosedCallback(editNotificationWin, notificationContainer);\n \n@@ -565,16 +547,6 @@ public void onClick(final AjaxRequestTarget target) {\n \n         add(securityQuestionContainer);\n \n-        createSecurityQuestionWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        createSecurityQuestionWin.setInitialHeight(SECURITY_QUESTION_WIN_HEIGHT);\n-        createSecurityQuestionWin.setInitialWidth(SECURITY_QUESTION_WIN_WIDTH);\n-        createSecurityQuestionWin.setCookieName(\"create-security-question-modal\");\n-\n-        editSecurityQuestionWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        editSecurityQuestionWin.setInitialHeight(SECURITY_QUESTION_WIN_HEIGHT);\n-        editSecurityQuestionWin.setInitialWidth(SECURITY_QUESTION_WIN_WIDTH);\n-        editSecurityQuestionWin.setCookieName(\"edit-security-question-modal\");\n-\n         setWindowClosedCallback(createSecurityQuestionWin, securityQuestionContainer);\n         setWindowClosedCallback(editSecurityQuestionWin, securityQuestionContainer);\n "},{"sha":"63405afa4d2f10893a979a64be9b0c47f45caf89","filename":"console/src/main/java/org/apache/syncope/console/pages/NotificationModalPage.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -32,7 +32,6 @@\n import org.apache.syncope.console.pages.panels.LoggerCategoryPanel;\n import org.apache.syncope.console.pages.panels.RoleSearchPanel;\n import org.apache.syncope.console.pages.panels.UserSearchPanel;\n-import org.apache.syncope.console.rest.ConfigurationRestClient;\n import org.apache.syncope.console.rest.LoggerRestClient;\n import org.apache.syncope.console.rest.NotificationRestClient;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n@@ -62,9 +61,6 @@ class NotificationModalPage extends BaseModalPage {\n     @SpringBean\n     private NotificationRestClient restClient;\n \n-    @SpringBean\n-    private ConfigurationRestClient confRestClient;\n-\n     @SpringBean\n     private LoggerRestClient loggerRestClient;\n "},{"sha":"095399beb2d1176de700f2e34e9d1259c7c73af6","filename":"console/src/main/java/org/apache/syncope/console/pages/RoleModalPage.java","status":"modified","additions":9,"deletions":12,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -74,7 +74,7 @@ public RoleModalPage(final PageReference pageRef, final ModalWindow window, fina\n             originalRoleTO = SerializationUtils.clone(roleTO);\n         }\n \n-        final Form<RoleTO> form = new Form<RoleTO>(\"RoleForm\");\n+        final Form<RoleTO> form = new Form<RoleTO>(\"roleForm\");\n         form.setMultiPart(true);\n \n         add(new Label(\"displayName\", roleTO.getId() == 0 ? \"\" : roleTO.getDisplayName()));\n@@ -110,6 +110,8 @@ protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n                 feedbackPanel.refresh(target);\n             }\n         };\n+        form.add(submit);\n+        form.setDefaultButton(submit);\n \n         final AjaxButton cancel = new IndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL)) {\n \n@@ -120,29 +122,24 @@ protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n                 closeAction(target, form);\n             }\n         };\n-\n         cancel.setDefaultFormProcessing(false);\n+        form.add(cancel);\n \n         MetaDataRoleAuthorizationStrategy.authorize(submit, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Roles\",\n                 createFlag\n-                ? \"create\"\n-                : \"update\"));\n-\n-        form.add(submit);\n-        form.setDefaultButton(submit);\n-\n-        form.add(cancel);\n+                        ? \"create\"\n+                        : \"update\"));\n \n         add(form);\n     }\n \n-    protected void submitAction(final AjaxRequestTarget target, final Form form) {\n+    protected void submitAction(final AjaxRequestTarget target, final Form<?> form) {\n         final RoleTO roleTO = (RoleTO) form.getDefaultModelObject();\n         final List<String> entitlementList = new ArrayList<String>(rolePanel.getSelectedEntitlements());\n         roleTO.getEntitlements().clear();\n         roleTO.getEntitlements().addAll(entitlementList);\n \n-        final RoleTO result;\n+        RoleTO result;\n         if (createFlag) {\n             result = roleRestClient.create(roleTO);\n         } else {\n@@ -159,7 +156,7 @@ protected void submitAction(final AjaxRequestTarget target, final Form form) {\n         setResponsePage(new ResultStatusModalPage.Builder(window, result).build());\n     }\n \n-    protected void closeAction(final AjaxRequestTarget target, final Form form) {\n+    protected void closeAction(final AjaxRequestTarget target, final Form<?> form) {\n         window.close(target);\n     }\n }"},{"sha":"072b4214f404d0f12c0d5d56f9da07868792d42c","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleSummaryPanel.java","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -107,8 +107,8 @@ private RoleSummaryPanel(final Builder builder) {\n \n         Fragment fragment = new Fragment(\"roleSummaryPanel\",\n                 builder.selectedNodeId == null\n-                ? \"fakerootFrag\"\n-                : (builder.selectedNodeId == 0 ? \"rootPanel\" : \"roleViewPanel\"),\n+                        ? \"fakerootFrag\"\n+                        : (builder.selectedNodeId == 0 ? \"rootPanel\" : \"roleViewPanel\"),\n                 this);\n \n         if (builder.selectedNodeId != null) {\n@@ -130,9 +130,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                RoleTO roleTO = new RoleTO();\n-                                RoleModalPage form = new RoleModalPage(builder.callerPageRef, builder.window, roleTO);\n-                                return form;\n+                                return new RoleModalPage(builder.callerPageRef, builder.window, new RoleTO());\n                             }\n                         });\n "},{"sha":"0cce34a8c6730c8576a8d6558564df1f5d191719","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleTabPanel.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleTabPanel.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -84,8 +84,7 @@ public void onClick(final AjaxRequestTarget target) {\n                     public Page createPage() {\n                         RoleTO roleTO = new RoleTO();\n                         roleTO.setParent(selectedNode.getId());\n-                        RoleModalPage form = new RoleModalPage(pageRef, window, roleTO);\n-                        return form;\n+                        return new RoleModalPage(pageRef, window, roleTO);\n                     }\n                 });\n \n@@ -124,8 +123,7 @@ public void onClick(final AjaxRequestTarget target) {\n                     @Override\n                     public Page createPage() {\n                         RoleTO roleTO = roleRestClient.read(selectedNode.getId());\n-                        RoleModalPage form = new RoleModalPage(pageRef, window, roleTO);\n-                        return form;\n+                        return new RoleModalPage(pageRef, window, roleTO);\n                     }\n                 });\n "},{"sha":"d1e4b78b2fac7af130d267dd7905b422f5608643","filename":"console/src/main/java/org/apache/syncope/console/rest/ConfigurationRestClient.java","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -19,6 +19,7 @@\n package org.apache.syncope.console.rest;\n \n import java.util.ArrayList;\n+import java.util.Iterator;\n import java.util.List;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.common.SyncopeClientException;\n@@ -40,7 +41,18 @@ public class ConfigurationRestClient extends BaseRestClient {\n     private SchemaRestClient schemaRestClient;\n \n     public ConfTO list() {\n-        return getService(ConfigurationService.class).list();\n+        ConfTO conf = getService(ConfigurationService.class).list();\n+\n+        for (Iterator<AttributeTO> it = conf.getAttrs().iterator(); it.hasNext();) {\n+            AttributeTO attr = it.next();\n+            for (AttrLayoutType type : AttrLayoutType.values()) {\n+                if (type.getConfKey().equals(attr.getSchema())) {\n+                    it.remove();\n+                }\n+            }\n+        }\n+\n+        return conf;\n     }\n \n     public AttributeTO read(final String key) {"},{"sha":"4ce55754303d0e05505a9089ec9b54fbda73d1a4","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfModalPage.html","status":"added","additions":39,"deletions":0,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.html?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -0,0 +1,39 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+    <div style=\"margin: 5px;\">\n+      <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+        <wicket:message key=\"title\"/>\n+      </p>\n+      <form wicket:id=\"confForm\">\n+        <span wicket:id=\"paramAttrs\"/>\n+\n+        <div style=\"bottom:0;margin:10px\">\n+          <input type=\"submit\"\n+                 class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                 wicket:id=\"submit\"/>\n+          <input type=\"button\"\n+                 class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                 wicket:id=\"cancel\"/>\n+        </div>        \n+      </form>\n+    </div>\n+  </wicket:extend>\n+</html>\n\\ No newline at end of file"},{"sha":"363bef47c95247d6315c4260f0bb03d82e398105","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfModalPage.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage.properties?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Parameters"},{"sha":"0fd85aee46625550e920866e358c33f031aaa9ba","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfModalPage_it.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_it.properties?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Parametri"},{"sha":"e7f3992f4b7ff8d366e9060fde56ff3003f43250","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfModalPage_pt_BR.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfModalPage_pt_BR.properties?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Par\\u00e2metros"},{"sha":"f3699b8e803a98eaac02d4193cb94d819ec973d8","filename":"console/src/main/resources/org/apache/syncope/console/pages/Configuration.html","status":"modified","additions":11,"deletions":14,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.html?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -32,9 +32,8 @@\n     <div id=\"tabs\">\n       <ul>\n         <li class=\"tabs-selected\">\n-          <a href=\"#parameters\"><span><wicket:message key=\"parameters\"/></span></a>\n+          <a href=\"#layouts\"><span><wicket:message key=\"layouts\"/></span></a>\n         </li>\n-        <li><a href=\"#layouts\"><span><wicket:message key=\"layouts\"/></span></a></li>\n         <li><a href=\"#policies\"><span><wicket:message key=\"policies\"/></span></a></li>\n         <li><a href=\"#notifications\"><span><wicket:message key=\"notifications\"/></span></a></li>\n         <li><a href=\"#securityQuestions\"><span><wicket:message key=\"securityQuestions\"/></span></a></li>\n@@ -70,17 +69,7 @@\n         <div id=\"selfMembership\" style=\"border-width: 1px;border-top-width: 0px;\">\n           <span wicket:id=\"selfMembershipLayoutPanel\">[self membership layout panel]</span>\n         </div>\n-      </div>\n-      <div id=\"parameters\" wicket:id=\"parameters\" style=\"width: 700px;\">\n-        <form wicket:id=\"confForm\">\n-          <span wicket:id=\"parameters\">[parameters]</span>\n-\n-          <a class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-             wicket:id=\"saveParameters\">\n-            <wicket:message key=\"apply\"/>\n-          </a>        \n-        </form>\n-      </div>\n+      </div>      \n       <div id=\"policies\">\n         <ul>\n           <li class=\"tabs-selected\">\n@@ -220,8 +209,16 @@\n         </div>\n       </div>\n       <div>\n+        <div wicket:id=\"parameters\">\n+          <a style=\"position: absolute; top: 2px; right:50px;\" wicket:id=\"confLink\">\n+            <img src=\"img/actions/settings-icon.png\" width=\"30\" height=\"30\"\n+                 alt=\"Parameters\" title=\"title\" wicket:message=\"title:parameters\"/>\n+          </a>\n+        </div>\n+        <div wicket:id=\"syncopeConfWin\">[Show modal window for conf parameters]</div>        \n+\n         <a style=\"position: absolute; top: 2px; right:20px;\" wicket:id=\"dbExportLink\">\n-          <img src=\"img/db_export.png\"width=\"30\" height=\"30\"\n+          <img src=\"img/db_export.png\" width=\"30\" height=\"30\"\n                alt=\"DB export\" title=\"title\" wicket:message=\"title:db_export\"/>\n         </a>\n       </div>    "},{"sha":"3f548151762c9bf3e2b7968953bdde2656dabca4","filename":"console/src/main/resources/org/apache/syncope/console/pages/RoleModalPage.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.html?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -22,7 +22,7 @@\n       <p class=\"ui-widget ui-corner-all ui-widget-header\">\n         <wicket:message key=\"title\"/>&nbsp;<span wicket:id=\"displayName\"/>\n       </p>\n-      <form wicket:id=\"RoleForm\">\n+      <form wicket:id=\"roleForm\">\n         <div id=\"tabs\">\n           <div style=\"display: block; clear: both\">\n             <ul>"},{"sha":"413cb0673cdb221f076d5a04eceb3fa8341fe842","filename":"console/src/main/webapp/img/db_export.png","status":"modified","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fdb_export.png?ref=7530ea211bfc12397300ff76e401a755ccd03d6a"},{"sha":"8647efec5f98c6016ce4d9e28327258d35b147df","filename":"console/src/test/java/org/apache/syncope/console/ConfigurationTestITCase.java","status":"modified","additions":46,"deletions":32,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7530ea211bfc12397300ff76e401a755ccd03d6a/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java?ref=7530ea211bfc12397300ff76e401a755ccd03d6a","patch":"@@ -31,14 +31,23 @@ public void editParameters() {\n         seleniumDriver.findElement(By.xpath(\"//img[@alt=\\\"Configuration\\\"]\")).click();\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//img[@title='Parameters']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//span[contains(text(), 'log.lastlogindate')]/../../div[2]/span/input\")).\n-                click();\n-        seleniumDriver.findElement(By.xpath(\"//div[@id='parameters']/form/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//img[@title='Parameters']/ancestor::a\")).click();\n+\n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n+        seleniumDriver.switchTo().frame(0);\n+        \n+        seleniumDriver.findElement(\n+                By.xpath(\"//span[contains(text(), 'log.lastlogindate')]/../../div[2]/span/input\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[3]/input[@type='submit']\")).click();\n+        \n+        seleniumDriver.switchTo().defaultContent();\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n         wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(\"feedback\")));\n-        assertTrue(seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));\n+        assertTrue(\n+                seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));\n     }\n \n     @Test\n@@ -47,13 +56,13 @@ public void browsePasswordPolicy() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[3]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[2]/a\")).click();\n         seleniumDriver.findElement(By.xpath(\"//div[@id='policies']/ul/li[2]/a\")).click();\n         seleniumDriver.findElement(By.xpath(\"//div[@id='password']/span/div/a\")).click();\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n         seleniumDriver.switchTo().frame(0);\n-        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='id:textField']\")));        \n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='id:textField']\")));\n \n         WebElement element = seleniumDriver.findElement(By.name(\"description:textField\"));\n         element.sendKeys(\"new description\");\n@@ -63,7 +72,8 @@ public void browsePasswordPolicy() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n         wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(\"feedback\")));\n-        assertTrue(seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));\n+        assertTrue(\n+                seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));\n     }\n \n     @Test\n@@ -83,15 +93,16 @@ public void setLogLevel() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[7]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[6]/a\")).click();\n \n         final Select select = new Select(\n                 seleniumDriver.findElement(By.xpath(\"//div[@id='core']/div/span/table/tbody/tr/td[2]/select\")));\n         select.selectByVisibleText(\"ERROR\");\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='workflow']/div/span/img\")));\n         wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(\"feedback\")));\n-        assertTrue(seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));        \n+        assertTrue(\n+                seleniumDriver.findElement(By.tagName(\"body\")).getText().contains(\"Operation executed successfully\"));\n     }\n \n     @Test\n@@ -100,16 +111,16 @@ public void createNotification() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[4]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[3]/a\")).click();\n \n         seleniumDriver.findElement(By.xpath(\"//div[@id='notifications']/a\")).click();\n-        \n+\n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n         seleniumDriver.switchTo().frame(0);\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[2]/form/div[3]/div/div/div/div/label\")));\n \n-        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='sender:textField']\")));        \n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='sender:textField']\")));\n \n         seleniumDriver.findElement(By.name(\"sender:textField\")).sendKeys(\"test@syncope.it\");\n \n@@ -172,8 +183,9 @@ public void createNotification() {\n \n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[3]/div[4]/div/div/span/input\")).click();\n \n-        wait.until(ExpectedConditions.elementToBeClickable(By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n-        \n+        wait.until(ExpectedConditions.elementToBeClickable(By.name(\n+                \"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n+\n         seleniumDriver.findElement(By.name(\n                 \"staticRecipients:multiValueContainer:view:0:panel:textField\")).\n                 sendKeys(\"syncope445@syncope.apache.org\");\n@@ -192,13 +204,13 @@ public void createDisabledNotification() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[4]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[3]/a\")).click();\n \n         seleniumDriver.findElement(By.xpath(\"//div[@id='notifications']/a\")).click();\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n         seleniumDriver.switchTo().frame(0);\n-        \n+\n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[2]/form/div[3]/div/div/div/div/label\")));\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='sender:textField']\")));\n@@ -254,7 +266,8 @@ public void createDisabledNotification() {\n                 + \"/option[text()='resource-db-sync']\")));\n \n         select = new Select(\n-                seleniumDriver.findElement(By.xpath(\"//select[@name='eventSelection:categoryContainer:subcategory:dropDownChoiceField']\")));\n+                seleniumDriver.findElement(By.xpath(\n+                                \"//select[@name='eventSelection:categoryContainer:subcategory:dropDownChoiceField']\")));\n         select.selectByVisibleText(\"resource-db-sync\");\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\n@@ -266,15 +279,16 @@ public void createDisabledNotification() {\n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[3]/ul/li[4]/a/span\")).click();\n \n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[3]/div[4]/div/div/span/input\")).click();\n-                                             \n-        wait.until(ExpectedConditions.elementToBeClickable(By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n-        \n+\n+        wait.until(ExpectedConditions.elementToBeClickable(By.name(\n+                \"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n+\n         seleniumDriver.findElement(\n                 By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\"))\n                 .sendKeys(\"syncope492@syncope.apache.org\");\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\n-                                        \"//div[2]/form/div[3]/div[4]/div/div[2]/label\")));\n+                \"//div[2]/form/div[3]/div[4]/div/div[2]/label\")));\n \n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[4]/input\")).click();\n \n@@ -287,16 +301,16 @@ public void issueSYNCOPE446() {\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[@id='tabs']\")));\n \n-        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[4]/a\")).click();\n+        seleniumDriver.findElement(By.xpath(\"//div[@id='tabs']/ul/li[3]/a\")).click();\n \n         seleniumDriver.findElement(By.xpath(\"//div[@id='notifications']/a\")).click();\n-        \n+\n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//iframe\")));\n         seleniumDriver.switchTo().frame(0);\n \n         wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//div[2]/form/div[3]/div/div/div/div/label\")));\n \n-        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='sender:textField']\")));        \n+        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(\"//input[@name='sender:textField']\")));\n \n         seleniumDriver.findElement(By.name(\"sender:textField\")).sendKeys(\"syncope446@syncope.it\");\n         seleniumDriver.findElement(By.name(\"subject:textField\")).sendKeys(\"Test issue Syncope 446\");\n@@ -352,7 +366,7 @@ public void issueSYNCOPE446() {\n         wait.until(ExpectedConditions.presenceOfElementLocated(\n                 By.xpath(\"//select[@name='aboutContainer:roleAbout:searchFormContainer:searchView:0:type']\"\n                         + \"/option[text()='ENTITLEMENT']\")));\n-        \n+\n         wait.until(ExpectedConditions.elementToBeClickable(\n                 By.xpath(\"//select[@name='aboutContainer:roleAbout:searchFormContainer:searchView:0:type']\")));\n \n@@ -365,19 +379,19 @@ public void issueSYNCOPE446() {\n                 \"//select[@name='aboutContainer:roleAbout:searchFormContainer:searchView:0:property']\"\n                 + \"/option[text()='ROLE_CREATE']\")));\n \n-        select = new Select(\n-                seleniumDriver.findElement(By.xpath(\n-                                \"//select[@name='aboutContainer:roleAbout:searchFormContainer:searchView:0:property']\")));\n+        select = new Select(seleniumDriver.findElement(By.xpath(\n+                \"//select[@name='aboutContainer:roleAbout:searchFormContainer:searchView:0:property']\")));\n         select.selectByVisibleText(\"ROLE_CREATE\");\n \n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[3]/ul/li[4]/a/span\")).click();\n         seleniumDriver.findElement(By.xpath(\"//input[@name='recipientsContainer:checkRecipients:checkboxField']\")).\n                 click();\n \n-        wait.until(ExpectedConditions.elementToBeClickable(By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n-        \n-        seleniumDriver.findElement(By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\")).sendKeys(\n-                \"syncope446@syncope.apache.org\");\n+        wait.until(ExpectedConditions.elementToBeClickable(By.name(\n+                \"staticRecipients:multiValueContainer:view:0:panel:textField\")));\n+\n+        seleniumDriver.findElement(By.name(\"staticRecipients:multiValueContainer:view:0:panel:textField\")).\n+                sendKeys(\"syncope446@syncope.apache.org\");\n \n         seleniumDriver.findElement(By.xpath(\"//div[2]/form/div[4]/input\")).click();\n "}]}