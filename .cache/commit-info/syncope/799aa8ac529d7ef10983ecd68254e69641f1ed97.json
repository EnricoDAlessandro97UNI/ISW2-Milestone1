{"sha":"799aa8ac529d7ef10983ecd68254e69641f1ed97","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc5OWFhOGFjNTI5ZDdlZjEwOTgzZWNkNjgyNTRlNjk2NDFmMWVkOTc=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-12-24T15:24:05Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-12-24T15:24:05Z"},"message":"Little improvement in bean validation\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246711 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2a2a14dd00912f71f7eee685e3c7d194956bd111","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/2a2a14dd00912f71f7eee685e3c7d194956bd111"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/799aa8ac529d7ef10983ecd68254e69641f1ed97","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/799aa8ac529d7ef10983ecd68254e69641f1ed97","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/799aa8ac529d7ef10983ecd68254e69641f1ed97","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/799aa8ac529d7ef10983ecd68254e69641f1ed97/comments","author":null,"committer":null,"parents":[{"sha":"ea5ed5207988bfcc968a51af0a672d5f0890a846","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ea5ed5207988bfcc968a51af0a672d5f0890a846","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ea5ed5207988bfcc968a51af0a672d5f0890a846"}],"stats":{"total":16,"additions":8,"deletions":8},"files":[{"sha":"d3bf7e4a6ecf9ed0ebddef511739821fa30f182c","filename":"core/src/main/java/org/syncope/core/persistence/validation/entity/EntityValidationInterceptor.java","status":"modified","additions":4,"deletions":7,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/799aa8ac529d7ef10983ecd68254e69641f1ed97/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FEntityValidationInterceptor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/799aa8ac529d7ef10983ecd68254e69641f1ed97/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FEntityValidationInterceptor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FEntityValidationInterceptor.java?ref=799aa8ac529d7ef10983ecd68254e69641f1ed97","patch":"@@ -16,14 +16,13 @@\n \n import java.util.Set;\n import javax.validation.ConstraintViolation;\n-import javax.validation.Validation;\n import javax.validation.Validator;\n-import javax.validation.ValidatorFactory;\n import org.aspectj.lang.ProceedingJoinPoint;\n import org.aspectj.lang.annotation.Around;\n import org.aspectj.lang.annotation.Aspect;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n /**\n@@ -33,15 +32,15 @@\n @Aspect\n public class EntityValidationInterceptor {\n \n-    private static final ValidatorFactory VALIDATOR_FACTORY =\n-            Validation.buildDefaultValidatorFactory();\n-\n     /**\n      * Logger.\n      */\n     private static final Logger LOG = LoggerFactory.getLogger(\n             EntityValidationInterceptor.class);\n \n+    @Autowired\n+    private Validator validator;\n+\n     /**\n      * Validate bean prior saving to DB.\n      *\n@@ -53,8 +52,6 @@ public class EntityValidationInterceptor {\n     public final Object save(final ProceedingJoinPoint pjp)\n             throws Throwable {\n \n-        Validator validator = VALIDATOR_FACTORY.getValidator();\n-\n         Set<ConstraintViolation<Object>> violations =\n                 validator.validate(pjp.getArgs()[0]);\n         if (!violations.isEmpty()) {"},{"sha":"a781f4bc93e1ed91ee7c5e3ac76268ba2954a0a0","filename":"core/src/main/resources/persistenceContext.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/799aa8ac529d7ef10983ecd68254e69641f1ed97/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/799aa8ac529d7ef10983ecd68254e69641f1ed97/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=799aa8ac529d7ef10983ecd68254e69641f1ed97","patch":"@@ -107,4 +107,7 @@\n \n     <bean id=\"propagationManager\"\n           class=\"org.syncope.core.persistence.propagation.PropagationManager\"/>\n+\n+    <bean id=\"validator\"\n+          class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\"/>\n </beans>"},{"sha":"25b12a6ee6c61fc0afe88b6a27b836379514182a","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/799aa8ac529d7ef10983ecd68254e69641f1ed97/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/799aa8ac529d7ef10983ecd68254e69641f1ed97/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=799aa8ac529d7ef10983ecd68254e69641f1ed97","patch":"@@ -112,7 +112,7 @@\n         <aspectj.version>1.6.9</aspectj.version>\n \n         <hibernate.version>3.4.0.GA</hibernate.version>\n-        <hibernate-validator.version>4.0.2.GA</hibernate-validator.version>\n+        <hibernate-validator.version>4.1.0.Final</hibernate-validator.version>\n         <ehcache.version>2.3.0</ehcache.version>\n         <ehcache-jgroupsreplication.version>1.4</ehcache-jgroupsreplication.version>\n "}]}