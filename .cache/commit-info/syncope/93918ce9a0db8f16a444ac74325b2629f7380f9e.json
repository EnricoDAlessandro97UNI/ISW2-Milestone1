{"sha":"93918ce9a0db8f16a444ac74325b2629f7380f9e","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjkzOTE4Y2U5YTBkYjhmMTZhNDQ0YWM3NDMyNWIyNjI5ZjczODBmOWU=","commit":{"author":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2013-02-18T17:14:06Z"},"committer":{"name":"Fabio Martelli","email":"fmartelli@apache.org","date":"2013-02-18T17:14:06Z"},"message":"SYNCOPE-257 fixed\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1447396 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5f3e801fa219d1c29fe140bd009f2cd689f56bbc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5f3e801fa219d1c29fe140bd009f2cd689f56bbc"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/93918ce9a0db8f16a444ac74325b2629f7380f9e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/93918ce9a0db8f16a444ac74325b2629f7380f9e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/93918ce9a0db8f16a444ac74325b2629f7380f9e","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/93918ce9a0db8f16a444ac74325b2629f7380f9e/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"ee50849a4aaed45a843be341341895da3d09dd1c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ee50849a4aaed45a843be341341895da3d09dd1c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ee50849a4aaed45a843be341341895da3d09dd1c"}],"stats":{"total":342,"additions":245,"deletions":97},"files":[{"sha":"4578621a750fa5ea707b6c65d3213b7c7c92339f","filename":"common/src/main/java/org/apache/syncope/common/to/MappingItemTO.java","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FMappingItemTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FMappingItemTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Fto%2FMappingItemTO.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -23,6 +23,7 @@\n \r\n import org.apache.syncope.common.AbstractBaseBean;\r\n import org.apache.syncope.common.types.IntMappingType;\r\n+import org.apache.syncope.common.types.MappingPurpose;\r\n \r\n @XmlRootElement(name = \"mappingItem\")\r\n @XmlType\r\n@@ -63,6 +64,11 @@ public class MappingItemTO extends AbstractBaseBean {\n      */\r\n     private String mandatoryCondition = \"false\";\r\n \r\n+    /**\r\n+     * Mapping purposes: SYNCHRONIZATION, PROPAGATION, BOTH.\r\n+     */\r\n+    private MappingPurpose purpose;\r\n+\r\n     public boolean isAccountid() {\r\n         return accountid;\r\n     }\r\n@@ -118,4 +124,12 @@ public IntMappingType getIntMappingType() {\n     public void setIntMappingType(IntMappingType intMappingType) {\r\n         this.intMappingType = intMappingType;\r\n     }\r\n+\r\n+    public MappingPurpose getPurpose() {\r\n+        return purpose;\r\n+    }\r\n+\r\n+    public void setPurpose(MappingPurpose purpose) {\r\n+        this.purpose = purpose;\r\n+    }\r\n }\r"},{"sha":"39c382fc86466ed802e757292567aa26f9d03466","filename":"common/src/main/java/org/apache/syncope/common/types/MappingPurpose.java","status":"added","additions":24,"deletions":0,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FMappingPurpose.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FMappingPurpose.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Ftypes%2FMappingPurpose.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -0,0 +1,24 @@\n+/*\n+ * Copyright 2013 The Apache Software Foundation.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.syncope.common.types;\n+\n+public enum MappingPurpose {\n+\n+    SYNCHRONIZATION,\n+    PROPAGATION,\n+    BOTH\n+\n+}"},{"sha":"bd8b4ef371b9073d72d46bd0b55859a76cf43b1a","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourceMappingPanel.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -31,6 +31,7 @@\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.ConnConfProperty;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.console.commons.JexlHelpUtil;\n import org.apache.syncope.console.pages.panels.ResourceConnConfPanel.ConnConfModEvent;\n import org.apache.syncope.console.rest.ConnectorRestClient;\n@@ -403,6 +404,16 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                     password.setVisible(false);\n                 }\n \n+                final AjaxDropDownChoicePanel purpose = new AjaxDropDownChoicePanel<String>(\n+                        \"purpose\",\n+                        new ResourceModel(\"purpose\", \"purpose\").getObject(),\n+                        new PropertyModel(mapItem, \"purpose\"), \n+                        false);\n+                ((AjaxDropDownChoicePanel) purpose).setChoices(Arrays.asList(MappingPurpose.values()));\n+                purpose.setStyleSheet(FIELD_STYLE);\n+                \n+                item.add(purpose);\n+\n                 typesPanel.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n                     private static final long serialVersionUID = -1107858522700306810L;"},{"sha":"0a7369b6d4f840e723639a575440f02a06661d26","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -32,6 +32,7 @@ roleSchema=Role Schema\n accountId=AccountId\n mandatoryCondition=Mandatory\n password=Password\n+purpose=Purpose\n mappingUserSchema=Mapping User Schema\n mappingRoleSchema=Mapping Role Schema\n delete=Delete"},{"sha":"c1a0125476e000c5ea23f5033afca3072389ba6a","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -33,6 +33,7 @@ roleSchema=Schema Ruolo\n accountId=AccountId\n mandatoryCondition=Obbligatorio\n password=Password\n+purpose=Scopo\n mappingUserSchema=Mapping User Schema\n mappingRoleSchema=Mapping Role Schema\n delete=Rimuovi"},{"sha":"c4583c19aebacd7699a6df9913d144037eeced3d","filename":"console/src/main/resources/org/apache/syncope/console/pages/panels/ResourceMappingPanel.html","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -44,6 +44,7 @@\n       </th>\n       <th><wicket:message key=\"accountId\"/></th>\n       <th><label wicket:id=\"passwordLabel\"/></th>\n+      <th><wicket:message key=\"purpose\"/></th>\n       </tr>\n       </thead>\n       <tfoot>\n@@ -80,6 +81,9 @@\n           <td align=\"center\" valign=\"middle\">\n             <span wicket:id=\"password\">[password]</span>\n           </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"purpose\">[purpose]</span>\n+          </td>\n         </tr>\n       </tbody>\n     </table>"},{"sha":"3c02042c880026d729d3f582400e96bf9a3ed50d","filename":"core/src/main/java/org/apache/syncope/core/connid/ConnObjectUtil.java","status":"modified","additions":16,"deletions":20,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fconnid%2FConnObjectUtil.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fconnid%2FConnObjectUtil.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fconnid%2FConnObjectUtil.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -37,6 +37,7 @@\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.PasswordPolicySpec;\n import org.apache.syncope.common.util.AttributableOperations;\n import org.apache.syncope.core.persistence.beans.AbstractAttributable;\n@@ -66,7 +67,7 @@\n import org.identityconnectors.framework.common.objects.Attribute;\n import org.identityconnectors.framework.common.objects.ConnectorObject;\n import org.identityconnectors.framework.common.objects.ObjectClass;\n-import org.identityconnectors.framework.common.objects.OperationOptionsBuilder;\n+import org.identityconnectors.framework.common.objects.OperationOptions;\n import org.identityconnectors.framework.common.objects.Uid;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -235,7 +236,8 @@ private <T extends AbstractAttributableTO> T getAttributableTOFromConnObject(fin\n         final T attributableTO = attrUtil.newAttributableTO();\n \n         // 1. fill with data from connector object\n-        for (AbstractMappingItem item : attrUtil.getMappingItems(syncTask.getResource())) {\n+        for (AbstractMappingItem item :\n+                attrUtil.getMappingItems(syncTask.getResource(), MappingPurpose.SYNCHRONIZATION)) {\n             Attribute attribute = obj.getAttributeByName(item.getExtAttrName());\n \n             AttributeTO attributeTO;\n@@ -294,7 +296,6 @@ private <T extends AbstractAttributableTO> T getAttributableTOFromConnObject(fin\n                     for (Object value : attribute == null || attribute.getValue() == null\n                             ? Collections.emptyList()\n                             : attribute.getValue()) {\n-\n                         if (value != null) {\n                             attributeTO.addValue(value.toString());\n                         }\n@@ -334,6 +335,7 @@ private <T extends AbstractAttributableTO> T getAttributableTOFromConnObject(fin\n         // 2. add data from defined template (if any)\n         AbstractAttributableTO template = AttributableType.USER == attrUtil.getType()\n                 ? syncTask.getUserTemplate() : syncTask.getRoleTemplate();\n+\n         if (template != null) {\n             if (template instanceof UserTO) {\n                 if (StringUtils.isNotBlank(((UserTO) template).getUsername())) {\n@@ -511,6 +513,8 @@ private void retrieveVirAttrValue(\n             for (ExternalResource resource : getTargetResource(virAttr, type, attrUtil)) {\n                 LOG.debug(\"Seach values into {}\", resource.getName());\n                 try {\n+                    final List<AbstractMappingItem> mappings = attrUtil.getMappingItems(resource, MappingPurpose.BOTH);\n+\n                     final ConnectorObject connectorObject;\n \n                     if (externalResources.containsKey(resource.getName())) {\n@@ -526,31 +530,22 @@ private void retrieveVirAttrValue(\n                             throw new IllegalArgumentException(\"No AccountId found for \" + resource.getName());\n                         }\n \n-                        final Set<String> extAttrNames = new HashSet<String>();\n-\n-                        // retrieve all mapped virtual attribute values\n-                        for (AbstractMappingItem item :\n-                                MappingUtil.getMatchingMappingItems(attrUtil.getMappingItems(resource), type)) {\n-                            extAttrNames.add(item.getExtAttrName());\n-                        }\n-\n-                        LOG.debug(\"External attribute ({}) names to get '{}'\", type, extAttrNames);\n+                        final SyncopeConnector connector = connInstanceLoader.getConnector(resource);\n \n-                        final OperationOptionsBuilder oob = new OperationOptionsBuilder();\n-                        oob.setAttributesToGet(extAttrNames);\n+                        final OperationOptions oo =\n+                                connector.getOperationOptions(MappingUtil.getMatchingMappingItems(mappings, type));\n \n-                        final SyncopeConnector connector = connInstanceLoader.getConnector(resource);\n-                        connectorObject = connector.getObject(fromAttributable(owner), new Uid(accountId), oob.build());\n+                        connectorObject = connector.getObject(fromAttributable(owner), new Uid(accountId), oo);\n                         externalResources.put(resource.getName(), connectorObject);\n                     }\n \n                     if (connectorObject != null) {\n                         // ask for searched virtual attribute value\n-                        final List<AbstractMappingItem> mappings = MappingUtil.getMatchingMappingItems(\n-                                attrUtil.getMappingItems(resource), schemaName, type);\n+                        final List<AbstractMappingItem> virAttrMappings =\n+                                MappingUtil.getMatchingMappingItems(mappings, schemaName, type);\n \n                         // the same virtual attribute could be mapped with one or more external attribute \n-                        for (AbstractMappingItem mapping : mappings) {\n+                        for (AbstractMappingItem mapping : virAttrMappings) {\n                             final Attribute attribute = connectorObject.getAttributeByName(mapping.getExtAttrName());\n \n                             if (attribute != null && attribute.getValue() != null) {\n@@ -584,7 +579,8 @@ private Set<ExternalResource> getTargetResource(\n \n         for (ExternalResource res : attr.getOwner().getResources()) {\n             if (!MappingUtil.getMatchingMappingItems(\n-                    attrUtil.getMappingItems(res), attr.getVirtualSchema().getName(), type).isEmpty()) {\n+                    attrUtil.getMappingItems(res, MappingPurpose.BOTH),\n+                    attr.getVirtualSchema().getName(), type).isEmpty()) {\n \n                 resources.add(res);\n             }"},{"sha":"2c9e88f112ac9aeace24b01b2285d23a7cee2852","filename":"core/src/main/java/org/apache/syncope/core/persistence/beans/AbstractMappingItem.java","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractMappingItem.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractMappingItem.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractMappingItem.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -27,6 +27,7 @@\n import javax.validation.constraints.Max;\n import javax.validation.constraints.Min;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n \n @MappedSuperclass\n @Cacheable\n@@ -71,6 +72,13 @@ public abstract class AbstractMappingItem extends AbstractBaseBean {\n     @Max(1)\n     private Integer password;\n \n+    /**\n+     * Mapping purposes: SYNCHRONIZATION, PROPAGATION, BOTH.\n+     */\n+    @Column(nullable = false)\n+    @Enumerated(EnumType.STRING)\n+    private MappingPurpose purpose;\n+\n     public AbstractMappingItem() {\n         super();\n \n@@ -162,4 +170,12 @@ public boolean isPassword() {\n     public void setPassword(final boolean password) {\n         this.password = getBooleanAsInteger(password);\n     }\n+\n+    public MappingPurpose getPurpose() {\n+        return purpose;\n+    }\n+\n+    public void setPurpose(MappingPurpose purpose) {\n+        this.purpose = purpose;\n+    }\n }"},{"sha":"7326b89a4600263be5dae105f4e9453c1d7dd062","filename":"core/src/main/java/org/apache/syncope/core/propagation/impl/AbstractPropagationTaskExecutor.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -27,6 +27,7 @@\n import java.util.Map;\n import java.util.Set;\n import org.apache.commons.lang.StringUtils;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.PropagationMode;\n import org.apache.syncope.common.types.PropagationTaskExecStatus;\n import org.apache.syncope.common.types.TraceLevel;\n@@ -446,7 +447,7 @@ protected ConnectorObject getRemoteObject(final PropagationTask task, final Sync\n                     new ObjectClass(task.getObjectClassName()),\n                     new Uid(accountId),\n                     connector.getOperationOptions(AttributableUtil.getInstance(task.getSubjectType()).\n-                    getMappingItems(task.getResource())));\n+                    getMappingItems(task.getResource(), MappingPurpose.PROPAGATION)));\n         } catch (TimeoutException toe) {\n             LOG.debug(\"Request timeout\", toe);\n             throw toe;"},{"sha":"474d363b6026f3d16efd2ccf3c26069213ab4fcc","filename":"core/src/main/java/org/apache/syncope/core/propagation/impl/PropagationManager.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FPropagationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FPropagationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FPropagationManager.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -30,6 +30,7 @@\n import org.apache.syncope.common.to.AttributeTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.ResourceOperation;\n import org.apache.syncope.core.connid.ConnObjectUtil;\n import org.apache.syncope.core.connid.PasswordGenerator;\n@@ -450,7 +451,7 @@ protected <T extends AbstractAttributable> Map.Entry<String, Set<Attribute>> pre\n         String accountId = null;\n \n         final AttributableUtil attrUtil = AttributableUtil.getInstance(subject);\n-        for (AbstractMappingItem mapping : attrUtil.getMappingItems(resource)) {\n+        for (AbstractMappingItem mapping : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n             LOG.debug(\"Processing schema {}\", mapping.getIntAttrName());\n \n             try {"},{"sha":"09cfad7c880da7c8e439a50153fbd27ee9ee37b3","filename":"core/src/main/java/org/apache/syncope/core/rest/controller/ResourceController.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -28,6 +28,7 @@\n import org.apache.syncope.common.types.AuditElements.Category;\n import org.apache.syncope.common.types.AuditElements.ResourceSubCategory;\n import org.apache.syncope.common.types.AuditElements.Result;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.validation.SyncopeClientCompositeErrorException;\n import org.apache.syncope.core.audit.AuditManager;\n import org.apache.syncope.core.connid.ConnObjectUtil;\n@@ -217,7 +218,7 @@ public ConnObjectTO getObject(@PathVariable(\"resourceName\") final String resourc\n         final SyncopeConnector connector = connLoader.getConnector(resource);\n \n         final ConnectorObject connectorObject = connector.getObject(objectClass, new Uid(objectId),\n-                connector.getOperationOptions(attrUtil.getMappingItems(resource)));\n+                connector.getOperationOptions(attrUtil.getMappingItems(resource, MappingPurpose.BOTH)));\n         if (connectorObject == null) {\n             throw new NotFoundException(\"Object \" + objectId + \" not found on resource \" + resourceName);\n         }"},{"sha":"11648198fe1f74e00c138edc2735078dfa420265","filename":"core/src/main/java/org/apache/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":8,"deletions":7,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -35,6 +35,7 @@\n import org.apache.syncope.common.to.AttributeTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.ResourceOperation;\n import org.apache.syncope.common.types.SyncopeClientExceptionType;\n import org.apache.syncope.common.validation.SyncopeClientCompositeErrorException;\n@@ -221,7 +222,7 @@ private boolean evaluateMandatoryCondition(final AttributableUtil attrUtil, fina\n         boolean result = false;\n \n         final List<AbstractMappingItem> mappings = MappingUtil.getMatchingMappingItems(\n-                attrUtil.getMappingItems(resource), intAttrName, intMappingType);\n+                attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION), intAttrName, intMappingType);\n         for (Iterator<AbstractMappingItem> itor = mappings.iterator(); itor.hasNext() && !result;) {\n             final AbstractMappingItem mapping = itor.next();\n             result |= evaluateMandatoryCondition(mapping.getMandatoryCondition(), attributable);\n@@ -310,7 +311,7 @@ public PropagationByResource fillVirtual(final AbstractAttributable attributable\n                 }\n \n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (virSchema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.virIntMappingType()\n                                 && attributable.getResources().contains(resource)) {\n@@ -334,7 +335,7 @@ public PropagationByResource fillVirtual(final AbstractAttributable attributable\n             AbstractVirSchema virSchema = getVirtualSchema(vAttrToBeUpdated.getSchema(), attrUtil.virSchemaClass());\n             if (virSchema != null) {\n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (virSchema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.virIntMappingType()\n                                 && attributable.getResources().contains(resource)) {\n@@ -422,7 +423,7 @@ protected PropagationByResource fill(final AbstractAttributable attributable,\n                 }\n \n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (schema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.intMappingType()\n                                 && attributable.getResources().contains(resource)) {\n@@ -448,7 +449,7 @@ protected PropagationByResource fill(final AbstractAttributable attributable,\n             AbstractSchema schema = getSchema(attributeMod.getSchema(), attrUtil.schemaClass());\n             if (schema != null) {\n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (schema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.intMappingType()\n                                 && attributable.getResources().contains(resource)) {\n@@ -522,7 +523,7 @@ protected PropagationByResource fill(final AbstractAttributable attributable,\n                 }\n \n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (derSchema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.derIntMappingType()\n                                 && attributable.getResources().contains(resource)) {\n@@ -548,7 +549,7 @@ protected PropagationByResource fill(final AbstractAttributable attributable,\n             AbstractDerSchema derSchema = getDerivedSchema(derAttrToBeAdded, attrUtil.derSchemaClass());\n             if (derSchema != null) {\n                 for (ExternalResource resource : resourceDAO.findAll()) {\n-                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource)) {\n+                    for (AbstractMappingItem mapItem : attrUtil.getMappingItems(resource, MappingPurpose.PROPAGATION)) {\n                         if (derSchema.getName().equals(mapItem.getIntAttrName())\n                                 && mapItem.getIntMappingType() == attrUtil.derIntMappingType()\n                                 && attributable.getResources().contains(resource)) {"},{"sha":"3615ca3d471a3233414d6fbaea9c63dd17b344f7","filename":"core/src/main/java/org/apache/syncope/core/sync/impl/SyncopeSyncResultHandler.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fsync%2Fimpl%2FSyncopeSyncResultHandler.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -40,6 +40,7 @@\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.ConflictResolutionAction;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.ResourceOperation;\n import org.apache.syncope.common.types.SyncPolicySpec;\n import org.apache.syncope.core.connid.ConnObjectUtil;\n@@ -345,7 +346,8 @@ private List<Long> findByAttributableSearch(\n \n         final Map<String, Attribute> extValues = new HashMap<String, Attribute>();\n \n-        for (AbstractMappingItem item : attrUtil.getMappingItems(syncTask.getResource())) {\n+        for (AbstractMappingItem item :\n+                attrUtil.getMappingItems(syncTask.getResource(), MappingPurpose.SYNCHRONIZATION)) {\n             extValues.put(item.getIntAttrName(), connObj.getAttributeByName(item.getExtAttrName()));\n         }\n \n@@ -443,8 +445,8 @@ public Long findMatchingAttributableId(final ObjectClass objectClass, final Stri\n         final AttributableUtil attrUtil = AttributableUtil.getInstance(objectClass);\n \n         final List<ConnectorObject> found = connector.search(objectClass,\n-                new EqualsFilter(new Name(name)),\n-                connector.getOperationOptions(attrUtil.getMappingItems(syncTask.getResource())));\n+                new EqualsFilter(new Name(name)), connector.getOperationOptions(\n+                attrUtil.getMappingItems(syncTask.getResource(), MappingPurpose.SYNCHRONIZATION)));\n \n         if (found.isEmpty()) {\n             LOG.debug(\"No {} found on {} with __NAME__ {}\", objectClass, syncTask.getResource(), name);"},{"sha":"475a48ab2aef998bb308ea99cd3a020eabc37bd9","filename":"core/src/main/java/org/apache/syncope/core/util/AttributableUtil.java","status":"modified","additions":28,"deletions":4,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FAttributableUtil.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FAttributableUtil.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Futil%2FAttributableUtil.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.core.util;\n \n+import java.util.ArrayList;\n import java.util.Collections;\n import java.util.List;\n import org.apache.commons.lang3.StringUtils;\n@@ -27,6 +28,7 @@\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.SyncPolicySpec;\n import org.apache.syncope.core.persistence.beans.AbstractAttr;\n import org.apache.syncope.core.persistence.beans.AbstractAttrValue;\n@@ -198,26 +200,48 @@ public <T extends AbstractMappingItem> T getAccountIdItem(final ExternalResource\n         return result;\n     }\n \n-    public <T extends AbstractMappingItem> List<T> getMappingItems(final ExternalResource resource) {\n-        List<T> result = Collections.EMPTY_LIST;\n+    public <T extends AbstractMappingItem> List<T> getMappingItems(\n+            final ExternalResource resource, final MappingPurpose purpose) {\n+        List<T> items = Collections.EMPTY_LIST;\n \n         if (resource != null) {\n             switch (type) {\n                 case USER:\n                     if (resource.getUmapping() != null) {\n-                        result = resource.getUmapping().getItems();\n+                        items = resource.getUmapping().getItems();\n                     }\n                     break;\n                 case ROLE:\n                     if (resource.getRmapping() != null) {\n-                        result = resource.getRmapping().getItems();\n+                        items = resource.getRmapping().getItems();\n                     }\n                     break;\n                 case MEMBERSHIP:\n                 default:\n             }\n         }\n \n+        final List<T> result = new ArrayList<T>();\n+\n+        switch (purpose) {\n+            case SYNCHRONIZATION:\n+                for (T item : items) {\n+                    if (MappingPurpose.PROPAGATION != item.getPurpose()) {\n+                        result.add(item);\n+                    }\n+                }\n+                break;\n+            case PROPAGATION:\n+                for (T item : items) {\n+                    if (MappingPurpose.SYNCHRONIZATION != item.getPurpose()) {\n+                        result.add(item);\n+                    }\n+                }\n+                break;\n+            case BOTH:\n+                result.addAll(items);\n+        }\n+\n         return result;\n     }\n "},{"sha":"acdddd942cf56fa2003ea551473e9297c48df4d6","filename":"core/src/test/java/org/apache/syncope/core/persistence/dao/ResourceTest.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -29,6 +29,7 @@\n \n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.core.persistence.beans.AbstractMappingItem;\n import org.apache.syncope.core.persistence.beans.ConnInstance;\n import org.apache.syncope.core.persistence.beans.ExternalResource;\n@@ -101,6 +102,7 @@ public void save() {\n         accountId.setExtAttrName(\"username\");\n         accountId.setIntAttrName(\"fullname\");\n         accountId.setIntMappingType(IntMappingType.UserId);\n+        accountId.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(accountId);\n \n         ConnInstance connector = resourceDAO.find(\"ws-target-resource-1\").getConnector();"},{"sha":"00fda583d01bfe992031a58d53e3cefef6e749d9","filename":"core/src/test/java/org/apache/syncope/core/persistence/relationships/ResourceTest.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -29,6 +29,7 @@\n import java.util.Set;\n \n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.core.persistence.beans.ConnInstance;\n import org.apache.syncope.core.persistence.beans.ExternalResource;\n import org.apache.syncope.core.persistence.beans.PasswordPolicy;\n@@ -112,13 +113,15 @@ public void save() {\n             item.setIntAttrName(\"nonexistent\" + i);\n             item.setIntMappingType(IntMappingType.UserSchema);\n             item.setMandatoryCondition(\"false\");\n+            item.setPurpose(MappingPurpose.SYNCHRONIZATION);\n             mapping.addItem(item);\n             item.setMapping(mapping);\n         }\n         UMappingItem accountId = new UMappingItem();\n         accountId.setExtAttrName(\"username\");\n         accountId.setIntAttrName(\"username\");\n         accountId.setIntMappingType(IntMappingType.UserId);\n+        accountId.setPurpose(MappingPurpose.PROPAGATION);\n         mapping.setAccountIdItem(accountId);\n         accountId.setMapping(mapping);\n \n@@ -128,6 +131,7 @@ public void save() {\n         derived.setExtAttrName(\"fullname\");\n         derived.setIntAttrName(\"cn\");\n         derived.setIntMappingType(IntMappingType.UserDerivedSchema);\n+        derived.setPurpose(MappingPurpose.PROPAGATION);\n         mapping.addItem(derived);\n         derived.setMapping(mapping);\n \n@@ -246,6 +250,7 @@ public void issue243() {\n         UMappingItem newMapItem = new UMappingItem();\n         newMapItem.setIntMappingType(IntMappingType.Username);\n         newMapItem.setExtAttrName(\"TEST\");\n+        newMapItem.setPurpose(MappingPurpose.PROPAGATION);\n         csv.getUmapping().addItem(newMapItem);\n \n         resourceDAO.save(csv);"},{"sha":"1d1a3a6403d88c86f47d516ab36ab6c593ee0398","filename":"core/src/test/java/org/apache/syncope/core/rest/ResourceTestITCase.java","status":"modified","additions":16,"deletions":2,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -40,6 +40,7 @@\n import org.apache.syncope.common.types.ConnConfPropSchema;\n import org.apache.syncope.common.types.ConnConfProperty;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.SyncopeClientExceptionType;\n import org.apache.syncope.common.validation.SyncopeClientCompositeErrorException;\n import org.apache.syncope.common.validation.SyncopeClientException;\n@@ -84,20 +85,23 @@ public void createOverridingProps() {\n         item.setExtAttrName(\"uid\");\n         item.setIntAttrName(\"userId\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.addItem(item);\n \n         item = new MappingItemTO();\n         item.setExtAttrName(\"username\");\n         item.setIntAttrName(\"fullname\");\n         item.setIntMappingType(IntMappingType.UserId);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(item);\n \n         item = new MappingItemTO();\n         item.setExtAttrName(\"fullname\");\n         item.setIntAttrName(\"cn\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n         item.setAccountid(false);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.addItem(item);\n \n         resourceTO.setName(resourceName);\n@@ -138,6 +142,7 @@ public void createWithSingleMappingItem() {\n         MappingItemTO item = new MappingItemTO();\n         item.setIntMappingType(IntMappingType.UserId);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.PROPAGATION);\n         umapping.setAccountIdItem(item);\n \n         resourceTO.setUmapping(umapping);\n@@ -147,6 +152,7 @@ public void createWithSingleMappingItem() {\n         item = new MappingItemTO();\n         item.setIntMappingType(IntMappingType.RoleId);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.SYNCHRONIZATION);\n         rmapping.setAccountIdItem(item);\n \n         resourceTO.setRmapping(rmapping);\n@@ -159,6 +165,8 @@ public void createWithSingleMappingItem() {\n         assertNotNull(actual.getUmapping().getItems());\n         assertNotNull(actual.getRmapping());\n         assertNotNull(actual.getRmapping().getItems());\n+        assertEquals(MappingPurpose.SYNCHRONIZATION, actual.getRmapping().getAccountIdItem().getPurpose());\n+        assertEquals(MappingPurpose.PROPAGATION, actual.getUmapping().getAccountIdItem().getPurpose());\n     }\n \n     @Test\n@@ -184,7 +192,7 @@ public void createWithInvalidMapping() {\n         resourceTO.setUmapping(mapping);\n \n         try {\n-            createResource(resourceService,resourceTO);\n+            createResource(resourceService, resourceTO);\n             fail(\"Create should not have worked\");\n         } catch (SyncopeClientCompositeErrorException e) {\n             SyncopeClientException requiredValueMissing = e\n@@ -236,6 +244,7 @@ public void createWithPasswordPolicy() {\n         item.setIntAttrName(\"userId\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(item);\n \n         resourceTO.setUmapping(mapping);\n@@ -279,6 +288,7 @@ public void update() {\n         item.setExtAttrName(\"test3\");\n         item.setIntAttrName(\"fullname\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.addItem(item);\n \n         // Update defining new mappings\n@@ -287,13 +297,15 @@ public void update() {\n             item.setExtAttrName(\"test\" + i);\n             item.setIntAttrName(\"fullname\");\n             item.setIntMappingType(IntMappingType.UserSchema);\n+            item.setPurpose(MappingPurpose.BOTH);\n             mapping.addItem(item);\n         }\n         item = new MappingItemTO();\n         item.setExtAttrName(\"username\");\n         item.setIntAttrName(\"fullname\");\n         item.setIntMappingType(IntMappingType.UserId);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(item);\n \n         resourceTO.setUmapping(mapping);\n@@ -388,24 +400,26 @@ private ResourceTO buildResourceTO(String resourceName) {\n         item.setExtAttrName(\"uid\");\n         item.setIntAttrName(\"userId\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.addItem(item);\n \n         item = new MappingItemTO();\n         item.setExtAttrName(\"username\");\n         item.setIntAttrName(\"fullname\");\n         item.setIntMappingType(IntMappingType.UserId);\n         item.setAccountid(true);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(item);\n \n         item = new MappingItemTO();\n         item.setExtAttrName(\"fullname\");\n         item.setIntAttrName(\"cn\");\n         item.setIntMappingType(IntMappingType.UserSchema);\n         item.setAccountid(false);\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.addItem(item);\n \n         resourceTO.setUmapping(mapping);\n         return resourceTO;\n     }\n-\n }"},{"sha":"b710d14a25345c2b6bf4fd784b245511ba9feea0","filename":"core/src/test/java/org/apache/syncope/core/rest/TaskTestITCase.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FTaskTestITCase.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -856,6 +856,12 @@ public void issueSYNCOPE307() {\n         UserTO template = new UserTO();\n         template.addResource(\"resource-db-virattr\");\n \n+        AttributeTO userId = attributeTO(\"userId\", \"'s307@apache.org'\");\n+        template.addAttribute(userId);\n+\n+        AttributeTO email = attributeTO(\"email\", \"'s307@apache.org'\");\n+        template.addAttribute(email);\n+\n         task.setUserTemplate(template);\n \n         taskService.update(task.getId(), task);\n@@ -872,6 +878,7 @@ public void issueSYNCOPE307() {\n                     \"SELECT USERNAME FROM testsync WHERE ID=?\", String.class, userTO.getId());\n             assertEquals(\"virtualvalue\", value);\n         } catch (EmptyResultDataAccessException e) {\n+            LOG.error(\"AAAAAAAAAAAAAAAAAAAAAAA\", e);\n             assertTrue(false);\n         }\n     }"},{"sha":"7a0739603ce7d62bc62b934438be189ff99e6a88","filename":"core/src/test/java/org/apache/syncope/core/rest/UserTestITCase.java","status":"modified","additions":21,"deletions":0,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -2023,6 +2023,27 @@ public void virAttrCache() {\n         assertNotNull(actual);\n         assertEquals(\"virtualupdated\", actual.getVirtualAttributeMap().get(\"virtualdata\").getValues().get(0));\n     }\n+    \n+    @Test\n+    public void mappingPurpose() {\n+        UserTO userTO = getUniqueSampleTO(\"mpurpose@apache.org\");\n+        \n+        AttributeTO csvuserid = new AttributeTO();\n+        csvuserid.setSchema(\"csvuserid\");\n+        userTO.addDerivedAttribute(csvuserid);\n+\n+        userTO.getResources().clear();\n+        userTO.addResource(\"resource-csv\");\n+\n+        UserTO actual = createUser(userTO);\n+        assertNotNull(actual);\n+        \n+        final ConnObjectTO connObjectTO = resourceService.getConnector(\n+                \"resource-csv\", \n+                AttributableType.USER, actual.getDerivedAttributeMap().get(\"csvuserid\").getValues().get(0));\n+        \n+        assertNull(connObjectTO.getAttributeMap().get(\"email\"));\n+    }\n \n     private boolean getBooleanAttribute(ConnObjectTO connObjectTO, String attrName) {\n         return Boolean.parseBoolean(getStringAttribute(connObjectTO, attrName));"},{"sha":"8b1d53ef8fdabce84811769d02b90019bc560996","filename":"core/src/test/java/org/apache/syncope/core/rest/data/ResourceDataTest.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataTest.java?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -32,6 +32,7 @@\n import org.apache.syncope.common.to.MappingTO;\n import org.apache.syncope.common.to.ResourceTO;\n import org.apache.syncope.common.types.IntMappingType;\n+import org.apache.syncope.common.types.MappingPurpose;\n import org.apache.syncope.common.types.PropagationMode;\n import org.apache.syncope.core.AbstractNonDAOTest;\n import org.apache.syncope.core.persistence.beans.AbstractMappingItem;\n@@ -119,6 +120,7 @@ public void issue42() {\n         item.setExtAttrName(\"campo1\");\n         item.setAccountid(true);\n         item.setMandatoryCondition(\"false\");\n+        item.setPurpose(MappingPurpose.BOTH);\n         mapping.setAccountIdItem(item);\n \n         ExternalResource resource = resourceDataBinder.create(resourceTO);"},{"sha":"944d261704a80b8d618f9858ae053117415e9c77","filename":"core/src/test/resources/content.xml","status":"modified","additions":57,"deletions":57,"changes":114,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -418,210 +418,210 @@ under the License.\n   <UMapping id=\"15\" resource_name=\"ws-target-resource-1\"/>\n   <UMappingItem id=\"99\" mapping_id=\"15\" extAttrName=\"__NAME__\"\n                 intMappingType=\"UserId\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"100\" extAttrName=\"email\" mapping_id=\"15\"\n                 intAttrName=\"email\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"101\" extAttrName=\"surname\" mapping_id=\"15\"\n                 intAttrName=\"surname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"102\" mapping_id=\"15\"\n                 extAttrName=\"__PASSWORD__\" intMappingType=\"Password\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"PROPAGATION\"/>\n \n   <UMapping id=\"12\" resource_name=\"ws-target-resource-list-mappings-1\"/>\n   <UMappingItem id=\"103\" mapping_id=\"12\"\n                 extAttrName=\"__NAME__\" intAttrName=\"email\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"104\" extAttrName=\"surname\" mapping_id=\"12\"\n                 intAttrName=\"surname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n \n   <UMapping id=\"13\" resource_name=\"ws-target-resource-list-mappings-2\"/>\n   <UMappingItem id=\"105\" mapping_id=\"13\"\n                 extAttrName=\"__NAME__\" intAttrName=\"userId\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n \n   <UMapping id=\"1\" resource_name=\"ws-target-resource-2\"/>\n   <UMappingItem id=\"106\" mapping_id=\"1\" extAttrName=\"__NAME__\"\n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"107\" mapping_id=\"1\"\n                 extAttrName=\"__PASSWORD__\" intMappingType=\"Password\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"108\" extAttrName=\"type\" mapping_id=\"1\"\n                 intAttrName=\"type\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"109\" extAttrName=\"surname\" mapping_id=\"1\"\n                 intAttrName=\"surname\" intMappingType=\"UserSchema\" mandatoryCondition=\"type == 'F'\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"110\" extAttrName=\"name\" mapping_id=\"1\"\n                 intAttrName=\"virtualdata\" intMappingType=\"UserVirtualSchema\" mandatoryCondition=\"type == 'F'\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"111\" extAttrName=\"fullname\" mapping_id=\"1\"\n                 intAttrName=\"cn\" intMappingType=\"UserDerivedSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n     \n   <UMapping id=\"2\" resource_name=\"ws-target-resource-update\"/>\n   <UMappingItem id=\"112\" extAttrName=\"email\" mapping_id=\"2\"\n                 intAttrName=\"email\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"113\" extAttrName=\"userId\" mapping_id=\"2\"\n                 intAttrName=\"userId\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"114\" extAttrName=\"test3\" mapping_id=\"2\" \n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"PROPAGATION\"/>\n     \n   <UMapping id=\"3\" resource_name=\"ws-target-resource-nopropagation\"/>\n   <UMappingItem id=\"115\" mapping_id=\"3\" extAttrName=\"__NAME__\" \n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n                      \n   <UMapping id=\"4\" resource_name=\"ws-target-resource-nopropagation2\"/>\n   <UMappingItem id=\"116\" mapping_id=\"4\" extAttrName=\"__NAME__\" \n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n                      \n   <UMapping id=\"5\" resource_name=\"ws-target-resource-nopropagation3\"/>\n   <UMappingItem id=\"117\" mapping_id=\"5\" extAttrName=\"__NAME__\"\n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n                      \n   <UMapping id=\"6\" resource_name=\"ws-target-resource-nopropagation4\"/>\n   <UMappingItem id=\"118\" mapping_id=\"6\"\n                 extAttrName=\"__NAME__\" intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n                        \n   <UMapping id=\"7\" resource_name=\"resource-testdb\"/>\n   <UMappingItem id=\"119\" mapping_id=\"7\"\n                 extAttrName=\"__NAME__\" intMappingType=\"Username\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"120\" mapping_id=\"7\"\n                 extAttrName=\"__PASSWORD__\" intMappingType=\"Password\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"BOTH\"/>\n                      \n   <UMapping id=\"8\" resource_name=\"resource-testdb2\"/>\n   <UMappingItem id=\"121\" mapping_id=\"8\" extAttrName=\"__NAME__\" \n                 intMappingType=\"Username\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"PROPAGATION\"/>\n   <UMappingItem id=\"122\" mapping_id=\"8\" extAttrName=\"__PASSWORD__\" \n                 intMappingType=\"Password\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"PROPAGATION\"/>\n                          \n   <UMapping id=\"9\" resource_name=\"resource-csv\"/>\n   <UMappingItem id=\"200\" extAttrName=\"id\" mapping_id=\"9\"\n                 intMappingType=\"Username\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"201\" extAttrName=\"id\" mapping_id=\"9\"\n                 intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"202\" mapping_id=\"9\"\n                 extAttrName=\"__PASSWORD__\" intMappingType=\"Password\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"203\" extAttrName=\"name\" mapping_id=\"9\"\n                 intAttrName=\"firstname\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"204\" extAttrName=\"surname\" mapping_id=\"9\"\n                 intAttrName=\"surname\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"205\" extAttrName=\"email\" mapping_id=\"9\"\n                 intAttrName=\"userId\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"SYNCHRONIZATION\"/>\n   <UMappingItem id=\"206\" extAttrName=\"email\" mapping_id=\"9\"\n                 intAttrName=\"email\" intMappingType=\"UserSchema\" mandatoryCondition=\"true\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"SYNCHRONIZATION\"/>\n   <UMappingItem id=\"207\" extAttrName=\"__NAME__\" mapping_id=\"9\"\n                 intAttrName=\"csvuserid\" intMappingType=\"UserDerivedSchema\" mandatoryCondition=\"true\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"208\" extAttrName=\"role\" mapping_id=\"9\"\n                 intAttrName=\"rderToBePropagated\" intMappingType=\"RoleDerivedSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"209\" extAttrName=\"membership\" mapping_id=\"9\"\n                 intAttrName=\"mderToBePropagated\" intMappingType=\"MembershipDerivedSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n                          \n   <UMapping id=\"10\" resource_name=\"ws-target-resource-update-resetsynctoken\"/>\n   <UMappingItem id=\"300\" mapping_id=\"10\"\n                 extAttrName=\"__NAME__\" intAttrName=\"userId\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"1\" password=\"0\"/>\n+                accountid=\"1\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"301\" mapping_id=\"10\"\n                 extAttrName=\"__PASSWORD__\" intAttrName=\"fullname\" intMappingType=\"UserSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"1\"/>\n+                accountid=\"0\" password=\"1\" purpose=\"BOTH\"/>\n \n   <UMapping id=\"11\" resource_name=\"resource-ldap\"\n             accountlink=\"&apos;uid=&apos; + username + &apos;,ou=people,o=isp&apos;\"/>\n   <UMappingItem id=\"311\" accountid=\"1\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"__UID__\" intAttrName=\"Username\" intMappingType=\"Username\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"312\" accountid=\"0\" password=\"1\" mapping_id=\"11\"\n                 extAttrName=\"__PASSWORD__\" intAttrName=\"Password\" intMappingType=\"Password\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"313\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"sn\" intAttrName=\"surname\" intMappingType=\"UserSchema\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"314\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"cn\" intAttrName=\"fullname\" intMappingType=\"UserSchema\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"315\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"mail\" intAttrName=\"email\" intMappingType=\"UserSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"316\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"title\" intAttrName=\"title\" intMappingType=\"RoleSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"317\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"postalAddress\" intAttrName=\"postalAddress\" intMappingType=\"MembershipSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"318\" accountid=\"0\" password=\"0\" mapping_id=\"11\"\n                 extAttrName=\"mail\" intAttrName=\"userId\" intMappingType=\"UserSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <RMapping id=\"1\" resource_name=\"resource-ldap\"\n             accountlink=\"&apos;cn=&apos; + name + &apos;,ou=groups,o=isp&apos;\"/>\n   <RMappingItem id=\"1\" accountid=\"1\" password=\"0\" mapping_id=\"1\"\n                 extAttrName=\"__UID__\" intAttrName=\"roleName\" intMappingType=\"RoleName\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <RMappingItem id=\"2\" accountid=\"0\" password=\"0\" mapping_id=\"1\"\n                 extAttrName=\"owner\" intAttrName=\"roleOwnerSchema\" intMappingType=\"RoleOwnerSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <RMappingItem id=\"3\" accountid=\"0\" password=\"0\" mapping_id=\"1\"\n                 extAttrName=\"description\" intAttrName=\"title\" intMappingType=\"RoleSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n   <RMappingItem id=\"4\" extAttrName=\"businessCategory\" mapping_id=\"1\"\n                 intAttrName=\"rvirtualdata\" intMappingType=\"RoleVirtualSchema\" mandatoryCondition=\"false\"\n-                accountid=\"0\" password=\"0\"/>\n+                accountid=\"0\" password=\"0\" purpose=\"BOTH\"/>\n         \n   <UMapping id=\"16\" resource_name=\"resource-db-sync\"/>\n   <UMappingItem id=\"321\" accountid=\"0\" mapping_id=\"16\"\n                 extAttrName=\"EMAIL\" intAttrName=\"email\" intMappingType=\"UserSchema\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"322\" accountid=\"0\" mapping_id=\"16\"\n                 extAttrName=\"SURNAME\" intAttrName=\"fullname\" intMappingType=\"UserSchema\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"323\" accountid=\"1\" mapping_id=\"16\"\n                 extAttrName=\"__NAME__\" intAttrName=\"aLong\" intMappingType=\"UserSchema\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"324\" accountid=\"0\" mapping_id=\"16\"\n                 extAttrName=\"SURNAME\" intAttrName=\"surname\" intMappingType=\"UserSchema\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"325\" accountid=\"0\" mapping_id=\"16\"\n                 extAttrName=\"USERNAME\" intAttrName=\"Username\" intMappingType=\"Username\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"326\" accountid=\"0\" mapping_id=\"16\"\n                 extAttrName=\"EMAIL\" intAttrName=\"userId\" intMappingType=\"UserSchema\" \n-                mandatoryCondition=\"false\" password=\"0\"/>\n+                mandatoryCondition=\"false\" password=\"0\" purpose=\"BOTH\"/>\n               \n   <UMapping id=\"17\" resource_name=\"resource-db-virattr\"/>\n   <UMappingItem id=\"331\" mapping_id=\"17\" accountid=\"1\" password=\"0\"\n                 extAttrName=\"__NAME__\" intMappingType=\"UserId\" \n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"BOTH\"/>\n   <UMappingItem id=\"332\" mapping_id=\"17\" accountid=\"0\" password=\"0\" \n                 extAttrName=\"USERNAME\" intAttrName=\"virtualdata\" intMappingType=\"UserVirtualSchema\"\n-                mandatoryCondition=\"false\"/>\n+                mandatoryCondition=\"false\" purpose=\"BOTH\"/>\n                 \n   <UMapping id=\"18\" resource_name=\"ws-target-resource-timeout\"/>\n   <UMappingItem id=\"333\" mapping_id=\"18\" accountid=\"1\" password=\"0\"\n                 extAttrName=\"__NAME__\" intAttrName=\"fullname\" intMappingType=\"UserSchema\"\n-                mandatoryCondition=\"true\"/>\n+                mandatoryCondition=\"true\" purpose=\"PROPAGATION\"/>\n   \n   <Task DTYPE=\"PropagationTask\" id=\"1\" propagationMode=\"TWO_PHASES\" propagationOperation=\"UPDATE\"\n         objectClassName=\"__ACCOUNT__\" resource_name=\"ws-target-resource-2\" subjectType=\"USER\" subjectId=\"1\""},{"sha":"a4d6725a5a154c39f79e1ff314869f0ff5bd3f5f","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/93918ce9a0db8f16a444ac74325b2629f7380f9e/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/93918ce9a0db8f16a444ac74325b2629f7380f9e/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=93918ce9a0db8f16a444ac74325b2629f7380f9e","patch":"@@ -280,7 +280,7 @@ under the License.\n     <connid.version>1.3.2</connid.version>\n     <connid.soap.version>1.2.5</connid.soap.version>\n     <connid.db.table.version>2.1.4</connid.db.table.version>\n-    <connid.csvdir.version>0.6</connid.csvdir.version>\n+    <connid.csvdir.version>0.6.1-SNAPSHOT</connid.csvdir.version>\n     <connid.ldap.version>1.3.4</connid.ldap.version>\n \n     <commons-jexl.version>2.1.1</commons-jexl.version>"}]}