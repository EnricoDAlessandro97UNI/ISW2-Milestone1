{"sha":"d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ3ZmJmZTQ4NjI4NTFiYzVkNzgzM2RiYjI5M2M2YjNmNGI1MTg1ZDU=","commit":{"author":{"name":"Matteo Alessandroni","email":"matteo.alessandroni@tirasa.net","date":"2017-07-13T13:16:45Z"},"committer":{"name":"Francesco Chicchiricc√≤","email":"ilgrosso@apache.org","date":"2017-07-13T13:23:48Z"},"message":"Realm is correctly loaded after creation for SYNCOPE-1151 - This closes #54","tree":{"sha":"bbcfcda525d49d162521858e31a8a43f3e99a1ea","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/bbcfcda525d49d162521858e31a8a43f3e99a1ea"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5/comments","author":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"21ea877bd398689c81e74a7b760ea1095d13e084","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/21ea877bd398689c81e74a7b760ea1095d13e084","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/21ea877bd398689c81e74a7b760ea1095d13e084"}],"stats":{"total":21,"additions":15,"deletions":6},"files":[{"sha":"b801cf333113c018760a78578e9c9f09be41ef7e","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Realms.java","status":"modified","additions":8,"deletions":5,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FRealms.java?ref=d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","patch":"@@ -45,6 +45,7 @@\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n public class Realms extends BasePage {\n@@ -192,16 +193,18 @@ protected void setWindowClosedReloadCallback(final BaseModal<?> modal) {\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.add(realmChoicePanel.reloadRealmTree(target));\n-\n                         if (modal.getContent() instanceof ResultPage) {\n                             Serializable result = ResultPage.class.cast(modal.getContent()).getResult();\n \n-                            updateRealmContent(RealmTO.class.cast(\n-                                    ProvisioningResult.class.cast(result).getEntity()), selectedIndex);\n+                            RealmTO reamTO = RealmTO.class.cast(ProvisioningResult.class.cast(result).getEntity());\n+                            // reload realmChoicePanel label too - SYNCOPE-1151\n+                            target.add(realmChoicePanel.reloadRealmTree(target, Model.of(reamTO)));\n+                            updateRealmContent(reamTO, selectedIndex);\n+\n                             target.add(content);\n+                        } else {\n+                            target.add(realmChoicePanel.reloadRealmTree(target));\n                         }\n-\n                         modal.show(false);\n                     }\n                 });"},{"sha":"51f766a139c1395ea2dde3bfea0b2bce62e370dd","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/RealmChoicePanel.java","status":"modified","additions":7,"deletions":1,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmChoicePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmChoicePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FRealmChoicePanel.java?ref=d7fbfe4862851bc5d7833dbb293c6b3f4b5185d5","patch":"@@ -70,7 +70,7 @@ public class RealmChoicePanel extends Panel {\n \n     private final WebMarkupContainer container;\n \n-    private final Model<RealmTO> model;\n+    private Model<RealmTO> model;\n \n     private final Collection<String> availableRealms;\n \n@@ -314,6 +314,12 @@ public final RealmChoicePanel reloadRealmTree(final AjaxRequestTarget target) {\n         return this;\n     }\n \n+    public final RealmChoicePanel reloadRealmTree(final AjaxRequestTarget target, final Model<RealmTO> newModel) {\n+        model = newModel;\n+        reloadRealmTree(target);\n+        return this;\n+    }\n+\n     private Map<String, Pair<RealmTO, List<RealmTO>>> reloadRealmParentMap() {\n         final List<RealmTO> realms = realmRestClient.list();\n         Collections.sort(realms, new RealmNameComparator());"}]}