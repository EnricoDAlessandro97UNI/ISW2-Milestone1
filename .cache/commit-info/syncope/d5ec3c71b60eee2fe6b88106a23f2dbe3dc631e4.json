{"sha":"d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ1ZWMzYzcxYjYwZWVlMmZlNmI4ODEwNmEyM2YyZGJlM2RjNjMxZTQ=","commit":{"author":{"name":"giacomolm","email":"giacomolm@hotmail.it","date":"2016-03-07T16:12:41Z"},"committer":{"name":"giacomolm","email":"giacomolm@hotmail.it","date":"2016-03-07T16:12:58Z"},"message":"[SYNCOPE-719] Minor fixes related to datepicker, input with number type and checkbox","tree":{"sha":"cb03706a405d9320dbe7694f401b58136011e2af","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/cb03706a405d9320dbe7694f401b58136011e2af"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/comments","author":{"login":"giacomolm","id":4027829,"node_id":"MDQ6VXNlcjQwMjc4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4027829?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomolm","html_url":"https://github.com/giacomolm","followers_url":"https://api.github.com/users/giacomolm/followers","following_url":"https://api.github.com/users/giacomolm/following{/other_user}","gists_url":"https://api.github.com/users/giacomolm/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomolm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomolm/subscriptions","organizations_url":"https://api.github.com/users/giacomolm/orgs","repos_url":"https://api.github.com/users/giacomolm/repos","events_url":"https://api.github.com/users/giacomolm/events{/privacy}","received_events_url":"https://api.github.com/users/giacomolm/received_events","type":"User","site_admin":false},"committer":{"login":"giacomolm","id":4027829,"node_id":"MDQ6VXNlcjQwMjc4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4027829?v=4","gravatar_id":"","url":"https://api.github.com/users/giacomolm","html_url":"https://github.com/giacomolm","followers_url":"https://api.github.com/users/giacomolm/followers","following_url":"https://api.github.com/users/giacomolm/following{/other_user}","gists_url":"https://api.github.com/users/giacomolm/gists{/gist_id}","starred_url":"https://api.github.com/users/giacomolm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giacomolm/subscriptions","organizations_url":"https://api.github.com/users/giacomolm/orgs","repos_url":"https://api.github.com/users/giacomolm/repos","events_url":"https://api.github.com/users/giacomolm/events{/privacy}","received_events_url":"https://api.github.com/users/giacomolm/received_events","type":"User","site_admin":false},"parents":[{"sha":"082402cbee81fb7ed996e10ce53a636ddb47795f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/082402cbee81fb7ed996e10ce53a636ddb47795f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/082402cbee81fb7ed996e10ce53a636ddb47795f"}],"stats":{"total":121,"additions":71,"deletions":50},"files":[{"sha":"f6132cb8f09761eadcb3cde689993ade07ca4b3f","filename":"client/enduser/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fpom.xml?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -153,6 +153,14 @@ under the License.\n       <groupId>org.webjars.bower</groupId>\n       <artifactId>FileSaver.js</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>org.webjars</groupId>\n+      <artifactId>momentjs</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.webjars.npm</groupId>\n+      <artifactId>moment-jdateformatparser</artifactId>\n+    </dependency>\n \n     <!--Jquery-->\n     <dependency>"},{"sha":"cc206e8ceb63ec5727ad3b74e1e78e34481a269c","filename":"client/enduser/src/main/resources/META-INF/resources/app/css/login.css","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2Flogin.css","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2Flogin.css","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2Flogin.css?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -163,4 +163,8 @@ body{\n     border-radius: 4px;\n     box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;\n     transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;\n+}\n+\n+input[type=\"number\"]{\n+    padding-right: 0px !important\n }\n\\ No newline at end of file"},{"sha":"355338be7ec0f522a5d0b8ff6bdf1cb6f42a234e","filename":"client/enduser/src/main/resources/META-INF/resources/app/index.html","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -67,6 +67,8 @@\n     <script type=\"text/javascript\" src=\"../webjars/bootstrap-select/${bootstrap-select.version}/js/bootstrap-select.min.js\"></script>\n     <script src=\"../webjars/FileSaver.js/${fileSaver.version}/FileSaver.js\" type=\"text/javascript\"></script>\n     <script src=\"../webjars/lodash/${lodash.version}/lodash.min.js\"></script>\n+    <script src=\"../webjars/momentjs/${momentjs.version}/moment.js\"></script>\n+    <script src=\"../webjars/moment-jdateformatparser/${moment-jdateformatparser.version}/moment-jdateformatparser.js\"></script>\n     <!--main angular application-->\n     <script src=\"js/app.js\"></script>\n     <!--services-->"},{"sha":"ee533d3ce54835843814e6b48b5b30efd88efca9","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/directives/dynamicPlainAttribute.js","status":"modified","additions":16,"deletions":21,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2FdynamicPlainAttribute.js?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -85,29 +85,24 @@ angular.module('self')\n                     };\n                     break;\n                   case \"Date\":\n-\n-                    $scope.selectedDate = $scope.user.plainAttrs[schema.key].values[index];\n                     $scope.format = $scope.schema.conversionPattern;\n-                    $scope.includeTimezone = false;\n-                    if ($scope.schema.conversionPattern.indexOf(\".SSS\") > -1) {\n-                      $scope.format = $scope.format.replace(\".SSS\", \".sss\");\n-                    }\n-                    if ($scope.schema.conversionPattern.indexOf(\"Z\") > -1) {\n-                      $scope.includeTimezone = true;\n-                      $scope.format = $scope.format.replace(\"Z\", \"\");\n-                    }\n-                    if ($scope.schema.conversionPattern.indexOf(\"\\'\") > -1) {\n-                      $scope.format = $scope.format.replace(new RegExp(\"\\'\", \"g\"), \"\");\n+                    var temporaryDate = moment($scope.user.plainAttrs[schema.key].values[index], moment().toMomentFormatString($scope.format));\n+                    if(temporaryDate.isValid()){\n+                      $scope.selectedDate = temporaryDate.toDate();  \n                     }\n+                    else{\n+                      $scope.selectedDate = $scope.user.plainAttrs[schema.key].values[index];\n+                    }                    \n+                    $scope.includeTimezone = false;\n \n-                    $scope.bindDateToModel = function (selectedDate, format) {\n-                      var newFormat = $scope.includeTimezone ? format.concat(\" Z\") : format;\n+                    $scope.bindDateToModel = function (selectedDate, format) {                                       \n                       if (selectedDate) {\n-                        selectedDate = $filter('date')(selectedDate, newFormat);\n-                        var dateGood = selectedDate.toString();\n+                        selectedDate = moment(selectedDate).format(moment().toMomentFormatString(format));\n+                        //removing from selectedDate existing quotes, since moment doesn't remove the from the pattern\n+                        var dateGood = selectedDate.toString().replace(/'/g, \"\");\n                         $scope.user.plainAttrs[schema.key].values[index] = dateGood;\n                       } else {\n-                        $scope.user.plainAttrs[schema.key].values[index] = selectedDate;\n+                        $scope.user.plainAttrs[schema.key].values[index] = selectedDate;                        \n                       }\n                     };\n \n@@ -129,11 +124,11 @@ angular.module('self')\n                     $scope.maxDate = new Date(2050, 5, 22);\n \n                     $scope.open = function ($event) {\n-                      $scope.status.opened = true;\n+                      $scope.status.opened = true;                      \n                     };\n \n                     $scope.setDate = function (year, month, day) {\n-                      $scope.user.plainAttrs[schema.key].values[index] = new Date(year, month, day);\n+                      $scope.user.plainAttrs[schema.key].values[index] = new Date(year, month, day);                      \n                     };\n \n                     $scope.dateOptions = {\n@@ -173,12 +168,12 @@ angular.module('self')\n                         }\n                       }\n \n-                    };\n+                    };                    \n                     break;\n \n                   case \"Boolean\":\n                     $scope.user.plainAttrs[schema.key].values[index] =\n-                            Boolean($scope.user.plainAttrs[schema.key].values[index]) || false;\n+                           $scope.user.plainAttrs[schema.key].values[index] == \"true\" ? true : false;\n                     break;\n \n                 }"},{"sha":"b3ffa7bf54574ea53c011b89a88990198381c08d","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicPlainAttribute.html","status":"modified","additions":28,"deletions":28,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -38,41 +38,41 @@\n          ng-init=\"initAttribute(schema, index)\" name=\"{{schema.key}}\"/>\n   <p ng-switch-when=\"Date\" class=\"input-group\" >\n     <input type=\"text\" class=\"form-control\" \n-           uib-datepicker-popup=\"{{format}}\"\n+           uib-datepicker-popup\n            ng-model=\"selectedDate\"\n            ng-change=\"bindDateToModel(selectedDate, format)\"\n            min-date=\"minDate\" max-date=\"maxDate\"\n            is-open=\"status.opened\" datepicker-options=\"dateOptions\"\n            ng-required=\"{{schema.mandatoryCondition}}\" close-text=\"Close\" ng-init=\"initAttribute(schema, index)\"/>\n-  <span class=\"input-group-btn\">\n-    <button type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button>\n-  </span>\n-</p>\n+    <span class=\"input-group-btn\">\n+      <button type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button>\n+    </span>\n+  </p>\n \n-<div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n-  <select class=\"form-control\"\n-          ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-          ng-required=\"{{schema.mandatoryCondition}}\">\n-    <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">{{schema.enumerationKeys[$index] || value}}</option>\n-  </select>\n-</div>\n-\n-<div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n-  <div enctype=\"multipart/form-data\" accept-charset=\"UTF-8\">\n-    <input id=\"fileInput\" type=\"file\" ng-required=\"{{schema.mandatoryCondition}}\"/>\n-    <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n-      <i class=\"glyphicon glyphicon-download\" ></i>\n-    </button>\n-    <button type=\"button\" class=\"fileButton btn btn-default btn-sm\" title=\"Remove file\" ng-click=\"remove()\">\n-      <i class=\"glyphicon glyphicon-remove-sign\" ></i>\n-    </button>\n-    <h4><span class=\"label label-primary\" ng-model=\"userFile\">{{userFile}}</span></h4>\n+  <div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n+    <select class=\"form-control\"\n+            ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+            ng-required=\"{{schema.mandatoryCondition}}\">\n+      <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">{{schema.enumerationKeys[$index]|| value}}</option>\n+    </select>\n   </div>\n \n-</div>\n-<input ng-switch-default class=\"form-control\" type=\"text\"\n-       ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-       ng-required=\"{{schema.mandatoryCondition}}\" \n-       ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"/>\n+  <div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n+    <div enctype=\"multipart/form-data\" accept-charset=\"UTF-8\">\n+      <input id=\"fileInput\" type=\"file\" ng-required=\"{{schema.mandatoryCondition}}\"/>\n+      <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n+        <i class=\"glyphicon glyphicon-download\" ></i>\n+      </button>\n+      <button type=\"button\" class=\"fileButton btn btn-default btn-sm\" title=\"Remove file\" ng-click=\"remove()\">\n+        <i class=\"glyphicon glyphicon-remove-sign\" ></i>\n+      </button>\n+      <h4><span class=\"label label-primary\" ng-model=\"userFile\">{{userFile}}</span></h4>\n+    </div>\n+\n+  </div>\n+  <input ng-switch-default class=\"form-control\" type=\"text\"\n+         ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+         ng-required=\"{{schema.mandatoryCondition}}\" \n+         ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"/>\n \n </div>"},{"sha":"f988bf778491610c6ef8f0c06f88e5a1a9697a81","filename":"pom.xml","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=d5ec3c71b60eee2fe6b88106a23f2dbe3dc631e4","patch":"@@ -394,14 +394,16 @@ under the License.\n \n     <angular.version>1.5.0</angular.version>\n     <angular-ui-router.version>0.2.17</angular-ui-router.version>\n-    <angular-ui-bootstrap.version>1.1.1-1</angular-ui-bootstrap.version>\n+    <angular-ui-bootstrap.version>1.2.1</angular-ui-bootstrap.version>\n     <angular-ui-select.version>0.14.8</angular-ui-select.version>\n     <angular-treasure-overlay-spinner.version>1.1.0</angular-treasure-overlay-spinner.version>\n     <ng-password-strength.version>0.2.1</ng-password-strength.version>\n     <lodash.version>4.0.0</lodash.version>\n     <kendo-ui-core.version>2014.2.716</kendo-ui-core.version>\n     <select2.version>3.4.8</select2.version>\n     <fileSaver.version>0.0.2</fileSaver.version>\n+    <momentjs.version>2.11.1</momentjs.version>\n+    <moment-jdateformatparser.version>1.0.0</moment-jdateformatparser.version>\n     \n     <izpack.version>5.0.6</izpack.version>\n     <httpclient.version>4.3.6</httpclient.version>\n@@ -1133,6 +1135,16 @@ under the License.\n         <artifactId>FileSaver.js</artifactId>\n         <version>${fileSaver.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.webjars</groupId>\n+        <artifactId>momentjs</artifactId>\n+        <version>${momentjs.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.webjars.npm</groupId>\n+        <artifactId>moment-jdateformatparser</artifactId>\n+        <version>${moment-jdateformatparser.version}</version>\n+      </dependency>\n \n       <dependency>\n         <groupId>com.beust</groupId>"}]}