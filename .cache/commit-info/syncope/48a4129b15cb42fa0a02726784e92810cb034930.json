{"sha":"48a4129b15cb42fa0a02726784e92810cb034930","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ4YTQxMjliMTVjYjQyZmEwYTAyNzI2Nzg0ZTkyODEwY2IwMzQ5MzA=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-06-21T15:05:04Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-06-21T15:05:04Z"},"message":"[SYNCOPE-73] Staging site generation, promotion and rollback is now in\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1352556 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2dfb7b98bd759334370847bc65359cdf4b5efddd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/2dfb7b98bd759334370847bc65359cdf4b5efddd"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/48a4129b15cb42fa0a02726784e92810cb034930","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/48a4129b15cb42fa0a02726784e92810cb034930","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/48a4129b15cb42fa0a02726784e92810cb034930","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/48a4129b15cb42fa0a02726784e92810cb034930/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"d5ca7e9a2357377821e09a4cb361541a2c171dbe","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5ca7e9a2357377821e09a4cb361541a2c171dbe","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d5ca7e9a2357377821e09a4cb361541a2c171dbe"}],"stats":{"total":203,"additions":147,"deletions":56},"files":[{"sha":"6ccbaa02dde0a649adaa8b5ece84b9f7a40e1084","filename":"archetype/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/archetype%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/archetype%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -35,6 +35,14 @@ under the License.\n   <artifactId>syncope-archetype</artifactId>\n   <packaging>maven-archetype</packaging>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <properties>\n     <SVNRepoURL>http://svn.apache.org/repos/asf/incubator/syncope/trunk</SVNRepoURL>\n   </properties>"},{"sha":"410ab53f49e85b89f0ddee9e3995d5d98f7d9941","filename":"build-tools/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/build-tools%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/build-tools%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -35,6 +35,14 @@ under the License.\n   <artifactId>syncope-build-tools</artifactId>\n   <packaging>war</packaging>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <dependencies>\n     <dependency>\n       <artifactId>servlet-api</artifactId>"},{"sha":"18b63ab5a263c3b174753c305252aa351de7b30f","filename":"client/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/client%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/client%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -35,6 +35,14 @@ under the License.\n   <artifactId>syncope-client</artifactId>\n   <packaging>jar</packaging>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <dependencies>\n \n     <dependency>"},{"sha":"34679b7702e2e42a8cb00ae22452ea8e7c3296df","filename":"console/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -36,6 +36,14 @@ under the License.\n   <artifactId>syncope-console</artifactId>\n   <packaging>war</packaging>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <dependencies>\n \n     <dependency>"},{"sha":"1adea5de7facc7a6f8a2e4d22bf2af69a2c33e43","filename":"core/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -36,6 +36,14 @@ under the License.\n   <artifactId>syncope-core</artifactId>\n   <packaging>war</packaging>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <properties>\n     <jdbcdriver.groupId>com.h2database</jdbcdriver.groupId>\n     <jdbcdriver.artifactId>h2</jdbcdriver.artifactId>"},{"sha":"88b42a473b57b75c2398b7c5a0be9d689e3ffe3e","filename":"hibernate-enhancer/pom.xml","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/hibernate-enhancer%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/hibernate-enhancer%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/hibernate-enhancer%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -34,6 +34,14 @@ under the License.\n   <groupId>org.apache.syncope</groupId>\n   <artifactId>syncope-hibernate-enhancer</artifactId>\n \n+  <distributionManagement>\n+    <site>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n+    </site>\n+  </distributionManagement>\n+  \n   <dependencies>\n     <dependency>\n       <groupId>org.springframework</groupId>"},{"sha":"3b11cfd71f36dc6d8f2475b527fe0d071b1cab99","filename":"parent/src/site/xdoc/release-process.xml","status":"modified","additions":96,"deletions":53,"changes":149,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/parent%2Fsrc%2Fsite%2Fxdoc%2Frelease-process.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/parent%2Fsrc%2Fsite%2Fxdoc%2Frelease-process.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/parent%2Fsrc%2Fsite%2Fxdoc%2Frelease-process.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -118,6 +118,12 @@ under the License.\n             Update the <tt>CHANGES</tt> file in a working copy of the project root based on the Text release reports\n             from JIRA.\n           </li>\n+          <li>\n+            Update the \n+            <a href=\"downloads.html\">downloads</a> site page by adding the new release artifacts with base \n+            URL\n+            <source>http://www.apache.org/dyn/closer.cgi/incubator/syncope/&lt;version&gt;/</source>\n+          </li>\n           <li>\n             Commit any changes back to svn:\n             <source>svn commit -m \"updating files for release\"</source>\n@@ -220,61 +226,83 @@ gpg: Signature made ...</source>\n             Backup (zip or tar) your local release candidate directory in case you need to rollback the release after \n             the next step is performed.\n             <source>cd ..\n-tar -czf 1.0-rc1.tar.gz 1.0-rc1/\n-cd 1.0-rc1</source>\n+tar -czf &lt;version&gt;.tar.gz &lt;version&gt;/\n+cd &lt;version&gt;</source>\n           </li>\n         </ol>\n       </subsection>\n       \n       <subsection name=\"Perform the release\">\n-        This step will create a maven staging repository\n-        <source>mvn -P apache-release release:perform</source>\n-        \n         <ol>\n-          <li>Verify the staged artifacts in the Nexus repository:\n-            <ol>\n-              <li>\n-                <a href=\"https://repository.apache.org/index.html\">https://repository.apache.org/index.html</a>\n-              </li>\n-              <li>\n-                <strong>Enterprise --&gt; Staging</strong>\n-              </li>\n-              <li>\n-                <strong>Staging tab --&gt; Name column --&gt; org.apache.syncope</strong>\n-              </li>\n-              <li>Navigate through the artifact tree and make sure that all binary, \n-                <code>javadoc</code>,\n-                <code>sources</code>, and \n-                <code>tests</code> jars, as well as \n-                <code>pom</code>s, ... have \n-                <code>.asc</code> (GPG signature) and \n-                <code>.md5</code>\n-                files (see \n-                <a href=\"http://people.apache.org/~henkp/repo/faq.html\">Repository FAQ</a> and \n-                <a href=\"http://www.apache.org/dev/release-signing.html#openpgp-ascii-detach-sig\">Detached Signatures</a>).\n-                The \n-                <code>syncope-source.tar.gz</code> and \n-                <code>syncope-source.zip</code> of \n-                <code>syncope-root</code>\n-                should likewise have signature and checksum files.\n-              </li>\n-            </ol>\n+          <li>\n+            This step will create the staging site\n+            <source>svn checkout https://svn.apache.org/repos/asf/incubator/syncope/site/ site\n+svn checkout https://svn.apache.org/repos/asf/incubator/syncope/tags/syncope-&lt;version&gt; syncope-&lt;version&gt;\n+cd syncope-&lt;version&gt;\n+mvn -f parent/pom.xml -P site -Dsite.deploymentBaseUrl=file:///&lt;absolute path to ../site/&lt;version&gt;&gt;\n+cd ../site\n+rm -r syncope-console syncope-client syncope-archetype syncope-core syncope-build-tools syncope-hibernate-enhancer syncope-quality\n+svn add &lt;version&gt;\n+svn commit -m \"staging site for release\"</source>\n           </li>\n-          <li>Close the nexus staging repo:\n+          <li>\n+            This step will create a maven staging repository\n+            <source>mvn -P apache-release release:perform [-Duser.name=&lt;your_apache_uid&gt;]</source>\n+        \n+            <p>\n+              <em>If your local OS userid doesn't match your Apache userid, then you'll have to also override the value \n+                provided by the OS to Maven for the site-deploy step to work. This is known to work for Linux, \n+                but not for Mac and unknown for Windows.\n+              </em>\n+            </p>\n+            \n             <ol>\n-              <li>\n-                <a href=\"https://repository.apache.org/index.html\">https://repository.apache.org/index.html</a>\n-              </li>\n-              <li>\n-                <strong>Enterprise --&gt; Staging</strong>\n-              </li>\n-              <li>\n-                <strong>Staging tab --&gt; Name column --&gt; org.apache.syncope</strong>\n+              <li>Verify the staged artifacts in the Nexus repository:\n+                <ol>\n+                  <li>\n+                    <a href=\"https://repository.apache.org/index.html\">https://repository.apache.org/index.html</a>\n+                  </li>\n+                  <li>\n+                    <strong>Enterprise --&gt; Staging</strong>\n+                  </li>\n+                  <li>\n+                    <strong>Staging tab --&gt; Name column --&gt; org.apache.syncope</strong>\n+                  </li>\n+                  <li>Navigate through the artifact tree and make sure that all binary, \n+                    <code>javadoc</code>,\n+                    <code>sources</code>, and \n+                    <code>tests</code> jars, as well as \n+                    <code>pom</code>s, ... have \n+                    <code>.asc</code> (GPG signature) and \n+                    <code>.md5</code>\n+                    files (see \n+                    <a href=\"http://people.apache.org/~henkp/repo/faq.html\">Repository FAQ</a> and \n+                    <a href=\"http://www.apache.org/dev/release-signing.html#openpgp-ascii-detach-sig\">Detached Signatures</a>).\n+                    The \n+                    <code>syncope-source.tar.gz</code> and \n+                    <code>syncope-source.zip</code> of \n+                    <code>syncope-root</code>\n+                    should likewise have signature and checksum files.\n+                  </li>\n+                </ol>\n               </li>\n-              <li>Right click on the open \n-                <code>org.apache.syncope-XXX</code> staging repo\n-                and select \n-                <strong>Close</strong>.\n+              <li>Close the nexus staging repo:\n+                <ol>\n+                  <li>\n+                    <a href=\"https://repository.apache.org/index.html\">https://repository.apache.org/index.html</a>\n+                  </li>\n+                  <li>\n+                    <strong>Enterprise --&gt; Staging</strong>\n+                  </li>\n+                  <li>\n+                    <strong>Staging tab --&gt; Name column --&gt; org.apache.syncope</strong>\n+                  </li>\n+                  <li>Right click on the open \n+                    <code>org.apache.syncope-XXX</code> staging repo\n+                    and select \n+                    <strong>Close</strong>.\n+                  </li>\n+                </ol>\n               </li>\n             </ol>\n           </li>\n@@ -302,6 +330,9 @@ Source release (checksums and signatures are available at the same location):\n https://repository.apache.org/content/repositories/orgapachesyncope-YYY/org/apache/syncope/syncope-root/&lt;version&gt;/syncope-&lt;version&gt;-source.tar.gz\n https://repository.apache.org/content/repositories/orgapachesyncope-YYY/org/apache/syncope/syncope-root/&lt;version&gt;/syncope-&lt;version&gt;-source.zip\n \n+Staging site:\n+http://incubator.apache.org/syncope/&lt;version&gt;/\n+\n PGP release keys (signed using ABCDEFG):\n http://www.apache.org/dist/incubator/syncope/KEYS\n \n@@ -385,6 +416,9 @@ Source release (checksums and signatures are available at the same location):\n https://repository.apache.org/content/repositories/orgapachesyncope-YYY/org/apache/syncope/syncope-root/&lt;version&gt;/syncope-&lt;version&gt;-source.tar.gz\n https://repository.apache.org/content/repositories/orgapachesyncope-YYY/org/apache/syncope/syncope-root/&lt;version&gt;/syncope-&lt;version&gt;-source.zip\n \n+Staging site:\n+http://incubator.apache.org/syncope/&lt;version&gt;/\n+\n PGP release keys (signed using ABCDEFG):\n http://www.apache.org/dist/incubator/syncope/KEYS\n \n@@ -477,11 +511,6 @@ https://repository.apache.org/content/repositories/releases/org/apache/syncope/s\n             <a href=\"https://cwiki.apache.org/confluence/display/SYNCOPE/Releases\">Releases</a>\n             wiki page based on the HTML release reports from JIRA\n           </li>\n-          <li>\n-            Update the <a href=\"downloads.html\">downloads</a> site page to point to the new release artifacts with base \n-            URL\n-            <source>http://www.apache.org/dyn/closer.cgi/incubator/syncope/&lt;version&gt;/</source>\n-          </li>\n           <li>\n             Update the <a href=\"https://cwiki.apache.org/confluence/display/SYNCOPE/Create+a+new+Syncope+project\">Create\n             new project</a> wiki page to point to the new release artifacts\n@@ -491,6 +520,15 @@ https://repository.apache.org/content/repositories/releases/org/apache/syncope/s\n             versions</a> page to mark the version as <strong>Released</strong>, and set the date to the date that\n             the release was approved. You may also need to make a new release entry for the next release.\n           </li>\n+          <li>\n+            Promote the staging site\n+            <source>\n+svn co https://svn.apache.org/repos/asf/incubator/syncope/site/\n+svn rm *.html apidocs css images js\n+svn mv &lt;version&gt;/* .\n+svn rm &lt;version&gt;\n+svn commit -m \"Promoting the staging site\"</source>\n+          </li>\n         </ol>\n       </subsection>\n       \n@@ -516,7 +554,7 @@ https://repository.apache.org/content/repositories/releases/org/apache/syncope/s\n           </p>\n           <ol>\n             <li>\n-              restore the 0.1-rc1.tar.gz and run\n+              restore the &lt;version&gt;.tar.gz and run\n               <source>mvn -P apache-release release:rollback</source> \n             </li>\n             <li>             \n@@ -529,7 +567,12 @@ https://repository.apache.org/content/repositories/releases/org/apache/syncope/s\n           <p>Delete the svn tag created by the \n             <code>release:perform</code> step:\n           </p>\n-          <source>svn rm https://svn.apache.org/repos/asf/incubator/syncope/tags/1.0 -m \"deleting tag from rolled back release\"</source>\n+          <source>svn rm https://svn.apache.org/repos/asf/incubator/syncope/tags/&lt;version&gt; -m \"deleting tag from rolled back release\"</source>\n+        </li>\n+        <li>\n+          <p>Delete the staging site:\n+          </p>\n+          <source>svn rm https://svn.apache.org/repos/asf/incubator/syncope/site/&lt;version&gt; -m \"deleting staging site from rolled back release\"</source>\n         </li>\n         <li>\n           <p>Drop the nexus staging repo:</p>"},{"sha":"802a0f09d261a31ac8bf94ff571bbec80434c0cc","filename":"quality/pom.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/48a4129b15cb42fa0a02726784e92810cb034930/quality%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/48a4129b15cb42fa0a02726784e92810cb034930/quality%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/quality%2Fpom.xml?ref=48a4129b15cb42fa0a02726784e92810cb034930","patch":"@@ -38,9 +38,9 @@ under the License.\n   <!-- <SyncopeRootPOM /> -->\n   <distributionManagement>\n     <site>\n-      <id>syncope.quality.website</id>\n-      <name>Apache Syncope quality website</name>\n-      <url>${site.deploymentBaseUrl}/quality</url>\n+      <id>syncope.website</id>\n+      <name>Apache Syncope website</name>\n+      <url>${site.deploymentBaseUrl}/${project.artifactId}</url>\n     </site>\n   </distributionManagement>\n   "}]}