{"sha":"3c3c00877e8249f52f64aa3ba4b71c9635b27717","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjNjM2MwMDg3N2U4MjQ5ZjUyZjY0YWEzYmE0YjcxYzk2MzViMjc3MTc=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2018-10-11T08:15:21Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2018-10-11T08:33:13Z"},"message":"[SYNCOPE-1382] improves string check conditions","tree":{"sha":"c5b9ac88e1c386c62b2a05e00044ec1676a4c3ac","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c5b9ac88e1c386c62b2a05e00044ec1676a4c3ac"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3c3c00877e8249f52f64aa3ba4b71c9635b27717","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3c3c00877e8249f52f64aa3ba4b71c9635b27717","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3c3c00877e8249f52f64aa3ba4b71c9635b27717","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3c3c00877e8249f52f64aa3ba4b71c9635b27717/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"7de2d08eb3ea65a17d3598ef12ea7c654f9b6f6e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7de2d08eb3ea65a17d3598ef12ea7c654f9b6f6e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7de2d08eb3ea65a17d3598ef12ea7c654f9b6f6e"}],"stats":{"total":5,"additions":3,"deletions":2},"files":[{"sha":"c6ebca16dc32b72b44ec63c288b85fc86dfb1032","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/JPAAnySearchDAO.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3c3c00877e8249f52f64aa3ba4b71c9635b27717/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnySearchDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3c3c00877e8249f52f64aa3ba4b71c9635b27717/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnySearchDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FJPAAnySearchDAO.java?ref=3c3c00877e8249f52f64aa3ba4b71c9635b27717","patch":"@@ -715,7 +715,7 @@ private void fillAttrQuery(\n         boolean ignoreCase = AttributeCond.Type.ILIKE == cond.getType() || AttributeCond.Type.IEQ == cond.getType();\n \n         String column = (cond instanceof AnyCond) ? cond.getSchema() : svs.fieldName(schema.getType());\n-        if (ignoreCase) {\n+        if ((schema.getType() == AttrSchemaType.String || schema.getType() == AttrSchemaType.Enum) && ignoreCase) {\n             column = \"LOWER (\" + column + \")\";\n         }\n         if (!(cond instanceof AnyCond)) {\n@@ -766,7 +766,8 @@ private void fillAttrQuery(\n                 } else {\n                     query.append('=');\n                 }\n-                if (ignoreCase) {\n+                if ((schema.getType() == AttrSchemaType.String \n+                        || schema.getType() == AttrSchemaType.Enum) && ignoreCase) {\n                     query.append(\"LOWER(?\").append(setParameter(parameters, attrValue.getValue())).append(')');\n                 } else {\n                     query.append('?').append(setParameter(parameters, attrValue.getValue()));"}]}