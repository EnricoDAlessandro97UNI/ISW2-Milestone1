{"sha":"968bd6258d62fd307fbd5c222ba8f8c98302dcd7","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjk2OGJkNjI1OGQ2MmZkMzA3ZmJkNWMyMjJiYThmOGM5ODMwMmRjZDc=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-02-01T09:35:21Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-02-01T09:35:21Z"},"message":"[SYNCOPE-294] UserTO re-read from REST before opening the edit modal page\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1441361 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"be7a98f7c5b7878b8efbf9fc36c54a2694d44c33","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/be7a98f7c5b7878b8efbf9fc36c54a2694d44c33"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/968bd6258d62fd307fbd5c222ba8f8c98302dcd7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/968bd6258d62fd307fbd5c222ba8f8c98302dcd7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/968bd6258d62fd307fbd5c222ba8f8c98302dcd7","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"ca346bc8bcd45369fa0368f4148aef5fc39d2c31","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ca346bc8bcd45369fa0368f4148aef5fc39d2c31","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ca346bc8bcd45369fa0368f4148aef5fc39d2c31"}],"stats":{"total":27,"additions":22,"deletions":5},"files":[{"sha":"4ff4d04eb2c29b85e232a49f3fb3529a99f2eed3","filename":"console/src/main/java/org/apache/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import org.apache.commons.lang.StringUtils;\n import org.apache.syncope.common.to.MappingItemTO;\n import org.apache.syncope.common.to.ResourceTO;\n import org.apache.syncope.common.types.AttributableType;\n@@ -32,8 +33,10 @@\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.model.CompoundPropertyModel;\n+import org.apache.wicket.model.Model;\n import org.apache.wicket.model.ResourceModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n@@ -52,6 +55,14 @@ public ResourceModalPage(final PageReference pageref, final ModalWindow window,\n \n         super();\n \n+        this.add(new Label(\"new\", StringUtils.isBlank(resourceTO.getName())\n+                ? new ResourceModel(\"new\")\n+                : new Model(\"\")));\n+\n+        this.add(new Label(\"name\", StringUtils.isBlank(resourceTO.getName())\n+                ? \"\"\n+                : resourceTO.getName()));\n+\n         final Form form = new Form(\"form\");\n         form.setModel(new CompoundPropertyModel(resourceTO));\n "},{"sha":"be080b67a3217a3f67a0275cd203061b5c90afdf","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/UserSearchResultPanel.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -33,6 +33,7 @@\n import org.apache.syncope.console.pages.ResultStatusModalPage;\n import org.apache.syncope.console.pages.StatusModalPage;\n import org.apache.syncope.console.rest.AbstractAttributableRestClient;\n+import org.apache.syncope.console.rest.UserRestClient;\n import org.apache.syncope.console.wicket.extensions.markup.html.repeater.data.table.AttrColumn;\n import org.apache.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n import org.apache.syncope.console.wicket.extensions.markup.html.repeater.data.table.TokenColumn;\n@@ -147,14 +148,15 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new EditUserModalPage(\n-                                        page.getPageReference(), editmodal, (UserTO) model.getObject());\n+                                // SYNCOPE-294: re-read userTO before edit\n+                                UserTO userTO = ((UserRestClient) restClient).read(model.getObject().getId());\n+                                return new EditUserModalPage(page.getPageReference(), editmodal, userTO);\n                             }\n                         });\n \n                         editmodal.show(target);\n                     }\n-                }, ActionLink.ActionType.EDIT, \"Users\", \"update\");\n+                }, ActionLink.ActionType.EDIT, \"Users\", \"read\");\n \n                 panel.add(new ActionLink() {\n "},{"sha":"99fc6e5af0684dbb5b24e70757bc6443f8f4b531","filename":"console/src/main/java/org/apache/syncope/console/rest/AbstractAttributableRestClient.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FAbstractAttributableRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FAbstractAttributableRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Frest%2FAbstractAttributableRestClient.java?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -19,7 +19,6 @@\n package org.apache.syncope.console.rest;\n \n import java.util.List;\n-\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.to.AbstractAttributableTO;\n import org.apache.syncope.common.to.ConnObjectTO;"},{"sha":"a1813c966b8d5dd0e3bab34432b977d16c5031f9","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.html","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -44,7 +44,10 @@\n </wicket:head>\n <wicket:extend>\n   <div style=\"margin:10px\">\n-    <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n+    <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+      <span wicket:id=\"new\"/>&nbsp;<wicket:message key=\"title\"/>&nbsp;<span wicket:id=\"name\"/>\n+    </p>\n+\n     <form wicket:id=\"form\">\n       <div id=\"tabs\">\n         <ul>"},{"sha":"6a279faea3a0ef7e269d25f1dc8ede5d5d92a6eb","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -57,3 +57,4 @@ error_connection=Connection failure\n check=Check connection\n actionsClass=Actions class\n rmapping=Role mapping\n+new=New"},{"sha":"7a12e418bf7156159cbb0c5f81af6f3a4a5c43d3","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/968bd6258d62fd307fbd5c222ba8f8c98302dcd7/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=968bd6258d62fd307fbd5c222ba8f8c98302dcd7","patch":"@@ -58,3 +58,4 @@ error_connection=Connessione non riuscita\n check=Verifica connessione\n actionsClass=Classe azioni\n rmapping=Mapping ruoli\n+new=Nuova"}]}