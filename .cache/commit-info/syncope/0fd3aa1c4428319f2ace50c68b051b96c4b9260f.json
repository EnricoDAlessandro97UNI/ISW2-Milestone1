{"sha":"0fd3aa1c4428319f2ace50c68b051b96c4b9260f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjBmZDNhYTFjNDQyODMxOWYyYWNlNTBjNjhiMDUxYjk2YzRiOTI2MGY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2012-01-27T11:47:28Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2012-01-27T11:47:28Z"},"message":"Fixes issue 216 278\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247380 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ef24709f9f4f7f473dd9eb7f795a0aa2b7079de1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ef24709f9f4f7f473dd9eb7f795a0aa2b7079de1"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/0fd3aa1c4428319f2ace50c68b051b96c4b9260f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0fd3aa1c4428319f2ace50c68b051b96c4b9260f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0fd3aa1c4428319f2ace50c68b051b96c4b9260f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/comments","author":null,"committer":null,"parents":[{"sha":"ed4a445ef2342e7204687456c63fdf619f91f229","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ed4a445ef2342e7204687456c63fdf619f91f229","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ed4a445ef2342e7204687456c63fdf619f91f229"}],"stats":{"total":3240,"additions":1751,"deletions":1489},"files":[{"sha":"23a7f84f1c39e6b348a295853aaeb154df7f097b","filename":"client/src/main/java/org/syncope/client/to/ConnBundleTO.java","status":"modified","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnBundleTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnBundleTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FConnBundleTO.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -84,4 +84,26 @@ public String getVersion() {\n     public void setVersion(String version) {\n         this.version = version;\n     }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        // needed into the administration console\n+        if (obj instanceof ConnBundleTO) {\n+            return toString().equals(obj.toString());\n+        } else {\n+            return false;\n+        }\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        // needed into the administration console\n+        return toString().hashCode();\n+    }\n+\n+    @Override\n+    public String toString() {\n+        // needed into the administration console\n+        return bundleName + \"#\" + version;\n+    }\n }"},{"sha":"70b08af5da34b709eaa1f1cc8ee621d45075e5ea","filename":"console/src/main/java/org/syncope/console/pages/Configuration.java","status":"modified","additions":57,"deletions":109,"changes":166,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -25,7 +25,6 @@\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n@@ -54,9 +53,6 @@\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.rest.ConfigurationRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n import ch.qos.logback.classic.Level;\n import ch.qos.logback.classic.Logger;\n import ch.qos.logback.classic.LoggerContext;\n@@ -75,6 +71,8 @@\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.rest.NotificationRestClient;\n import org.syncope.console.rest.WorkflowRestClient;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n /**\n  * Configurations WebPage.\n@@ -212,7 +210,7 @@ protected void onError(final AjaxRequestTarget target,\n         add(consoleLoggerContainer);\n     }\n \n-    private final void setupSyncopeConf() {\n+    private void setupSyncopeConf() {\n         confPaginatorRows = prefMan.getPaginatorRows(getRequest(),\n                 Constants.PREF_CONFIGURATION_PAGINATOR_ROWS);\n \n@@ -225,21 +223,29 @@ private final void setupSyncopeConf() {\n                 \"value\", \"value\"));\n \n         confColumns.add(new AbstractColumn<ConfigurationTO>(\n-                new ResourceModel(\"edit\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<ConfigurationTO>> cellItem,\n                     final String componentId,\n                     final IModel<ConfigurationTO> model) {\n \n                 final ConfigurationTO configurationTO = model.getObject();\n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -262,37 +268,11 @@ public Page createPage() {\n \n                         editConfigWin.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(editLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Configuration\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n+                }, ActionLink.ActionType.EDIT, \"Configuration\", \"read\");\n \n-        confColumns.add(new AbstractColumn<ConfigurationTO>(\n-                new ResourceModel(\"delete\")) {\n+                panel.add(new ActionLink() {\n \n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<ConfigurationTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<ConfigurationTO> model) {\n-\n-                final ConfigurationTO configurationTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -310,14 +290,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         target.add(confContainer);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Configuration\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Configuration\", \"delete\");\n \n                 cellItem.add(panel);\n             }\n@@ -423,7 +396,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n         add(confPaginatorForm);\n     }\n \n-    private final void setupNotification() {\n+    private void setupNotification() {\n         notificationPaginatorRows = prefMan.getPaginatorRows(getRequest(),\n                 Constants.PREF_NOTIFICATION_PAGINATOR_ROWS);\n \n@@ -440,21 +413,29 @@ private final void setupNotification() {\n                 \"traceLevel\", \"traceLevel\"));\n \n         notificationCols.add(new AbstractColumn<NotificationTO>(\n-                new ResourceModel(\"edit\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<NotificationTO>> cellItem,\n                     final String componentId,\n                     final IModel<NotificationTO> model) {\n \n                 final NotificationTO notificationTO = model.getObject();\n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -477,37 +458,11 @@ public Page createPage() {\n \n                         editNotificationWin.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(editLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Notification\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        notificationCols.add(new AbstractColumn<NotificationTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<NotificationTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<NotificationTO> model) {\n-\n-                final NotificationTO notificationTO = model.getObject();\n+                }, ActionLink.ActionType.EDIT, \"Notification\", \"read\");\n \n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n+                panel.add(new ActionLink() {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -525,14 +480,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         target.add(notificationContainer);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Notification\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Notification\", \"delete\");\n \n                 cellItem.add(panel);\n             }\n@@ -562,32 +510,33 @@ public void onClick(final AjaxRequestTarget target) {\n         setWindowClosedCallback(createNotificationWin, notificationContainer);\n         setWindowClosedCallback(editNotificationWin, notificationContainer);\n \n-        AjaxLink createNotificationLink = new AjaxLink(\n-                \"createNotificationLink\") {\n+        AjaxLink createNotificationLink =\n+                new AjaxLink(\"createNotificationLink\") {\n \n-            private static final long serialVersionUID = -7978723352517770644L;\n+                    private static final long serialVersionUID = -7978723352517770644L;\n \n-            @Override\n-            public void onClick(final AjaxRequestTarget target) {\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n \n-                createNotificationWin.setPageCreator(\n-                        new ModalWindow.PageCreator() {\n+                        createNotificationWin.setPageCreator(\n+                                new ModalWindow.PageCreator() {\n \n-                            private static final long serialVersionUID =\n-                                    -7834632442532690940L;\n+                                    private static final long serialVersionUID =\n+                                            -7834632442532690940L;\n \n-                            @Override\n-                            public Page createPage() {\n-                                return new NotificationModalPage(\n-                                        Configuration.this.getPageReference(),\n-                                        createNotificationWin,\n-                                        new NotificationTO(), true);\n-                            }\n-                        });\n+                                    @Override\n+                                    public Page createPage() {\n+                                        return new NotificationModalPage(\n+                                                Configuration.this.\n+                                                getPageReference(),\n+                                                createNotificationWin,\n+                                                new NotificationTO(), true);\n+                                    }\n+                                });\n \n-                createNotificationWin.show(target);\n-            }\n-        };\n+                        createNotificationWin.show(target);\n+                    }\n+                };\n \n         MetaDataRoleAuthorizationStrategy.authorize(\n                 createNotificationLink, ENABLE,\n@@ -724,7 +673,6 @@ enum LoggerLevel {\n         DEBUG,\n         TRACE,\n         ALL\n-\n     }\n \n     private class LoggerPropertyList extends PropertyListView<LoggerTO> {"},{"sha":"017000b33cd9907a80c6a63a9d58c179a19505bf","filename":"console/src/main/java/org/syncope/console/pages/ConnectorModalPage.java","status":"modified","additions":19,"deletions":20,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -45,6 +45,7 @@\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.springframework.beans.BeanUtils;\n import org.springframework.util.ClassUtils;\n import org.syncope.client.to.ConnBundleTO;\n import org.syncope.client.to.ConnInstanceTO;\n@@ -110,6 +111,18 @@ public ConnectorModalPage(\n                 ? EnumSet.noneOf(ConnectorCapability.class)\n                 : connectorTO.getCapabilities());\n \n+        final IModel<List<ConnBundleTO>> bundles =\n+                new LoadableDetachableModel<List<ConnBundleTO>>() {\n+\n+                    private static final long serialVersionUID =\n+                            5275935387613157437L;\n+\n+                    @Override\n+                    protected List<ConnBundleTO> load() {\n+                        return restClient.getAllBundles();\n+                    }\n+                };\n+\n         IModel<List<ConnConfProperty>> selectedBundleProperties =\n                 new LoadableDetachableModel<List<ConnConfProperty>>() {\n \n@@ -138,10 +151,10 @@ protected List<ConnConfProperty> load() {\n                                 result.add(propertyTO);\n                             }\n                         } else {\n-                            selectedBundleTO.setBundleName(\n-                                    connectorTO.getBundleName());\n-                            selectedBundleTO.setVersion(\n-                                    connectorTO.getVersion());\n+                            BeanUtils.copyProperties(\n+                                    connectorTO, selectedBundleTO, new String[]{\n+                                        \"id\", \"configuration\", \"capabilities\"});\n+\n                             result = new ArrayList<ConnConfProperty>(\n                                     connectorTO.getConfiguration());\n                         }\n@@ -181,18 +194,6 @@ protected List<ConnConfProperty> load() {\n         displayName.setOutputMarkupId(true);\n         version.setEnabled(false);\n \n-        final IModel<List<ConnBundleTO>> bundles =\n-                new LoadableDetachableModel<List<ConnBundleTO>>() {\n-\n-                    private static final long serialVersionUID =\n-                            5275935387613157437L;\n-\n-                    @Override\n-                    protected List<ConnBundleTO> load() {\n-                        return restClient.getAllBundles();\n-                    }\n-                };\n-\n         final AjaxDropDownChoicePanel<ConnBundleTO> bundle =\n                 new AjaxDropDownChoicePanel<ConnBundleTO>(\n                 \"bundle\", \"bundle\", new Model(null), false);\n@@ -208,14 +209,12 @@ protected List<ConnBundleTO> load() {\n \n             @Override\n             public Object getDisplayValue(final ConnBundleTO object) {\n-                return object.getBundleName() + \" \"\n-                        + object.getVersion();\n+                return object.getBundleName() + \" \" + object.getVersion();\n             }\n \n             @Override\n             public String getIdValue(final ConnBundleTO object,\n                     final int index) {\n-\n                 // idValue must include version as well in order to cope\n                 //with multiple version of the same bundle.\n                 return object.getBundleName() + \"#\" + object.getVersion();\n@@ -356,7 +355,7 @@ protected void populateItem(\n                 }\n \n                 field.setTitle(property.getSchema().getHelpMessage());\n-                \n+\n                 if (isArray) {\n                     field.removeRequiredLabel();\n "},{"sha":"03ef3f888fc8fbb3c8d04c8ffa9a88e033cf2011","filename":"console/src/main/java/org/syncope/console/pages/DisplayAttributesModalPage.java","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -73,6 +73,8 @@ public class DisplayAttributesModalPage extends BaseModalPage {\n     final private IModel<List<String>> dnames =\n             new LoadableDetachableModel<List<String>>() {\n \n+                private static final long serialVersionUID = 5275935387613157437L;\n+\n                 @Override\n                 protected List<String> load() {\n \n@@ -191,6 +193,8 @@ public DisplayAttributesModalPage(\n         final ListView<String> details =\n                 new ListView<String>(\"details\", dnames) {\n \n+                    private static final long serialVersionUID = 9101744072914090143L;\n+\n                     @Override\n                     protected void populateItem(ListItem<String> item) {\n                         item.add(new Check(\"dcheck\", item.getModel()));\n@@ -213,6 +217,8 @@ protected void populateItem(ListItem<String> item) {\n             final ListView<String> schemas =\n                     new ListView<String>(\"schemas\", names) {\n \n+                        private static final long serialVersionUID = 9101744072914090143L;\n+\n                         @Override\n                         protected void populateItem(ListItem<String> item) {\n                             item.add(new Check(\"scheck\", item.getModel()));\n@@ -243,6 +249,8 @@ protected void populateItem(ListItem<String> item) {\n             final ListView<String> virSchemas =\n                     new ListView<String>(\"virSchemas\", vsnames) {\n \n+                        private static final long serialVersionUID = 9101744072914090143L;\n+\n                         @Override\n                         protected void populateItem(ListItem<String> item) {\n                             item.add(new Check(\"vscheck\", item.getModel()));\n@@ -273,6 +281,8 @@ protected void populateItem(ListItem<String> item) {\n             final ListView<String> derSchemas =\n                     new ListView<String>(\"derSchemas\", dsnames) {\n \n+                        private static final long serialVersionUID = 9101744072914090143L;\n+\n                         @Override\n                         protected void populateItem(ListItem<String> item) {\n                             item.add(new Check(\"dscheck\", item.getModel()));\n@@ -323,7 +333,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n \n                     prefMan.setList(getRequest(), getResponse(), prefs);\n \n-                    ((Users) callerPageRef.getPage()).setModalResult(true);\n+                    ((BasePage) callerPageRef.getPage()).setModalResult(true);\n \n                     window.close(target);\n                 }"},{"sha":"11754618b6436510782106785374475b8b65b11f","filename":"console/src/main/java/org/syncope/console/pages/Resources.java","status":"modified","additions":36,"deletions":87,"changes":123,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -50,9 +50,8 @@\n import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.rest.ConnectorRestClient;\n import org.syncope.console.rest.ResourceRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n /**\n  * Resources WebPage.\n@@ -110,7 +109,7 @@ public Resources(final PageParameters parameters) {\n         setupConnectors();\n     }\n \n-    private final void setupResources() {\n+    private void setupResources() {\n         List<IColumn> columns = new ArrayList<IColumn>();\n \n         columns.add(new PropertyColumn(\n@@ -122,21 +121,29 @@ private final void setupResources() {\n                 new ResourceModel(\"propagationPriority\"),\n                 \"propagationPriority\", \"propagationPriority\"));\n \n-        columns.add(new AbstractColumn<ResourceTO>(new ResourceModel(\"edit\")) {\n+        columns.add(new AbstractColumn<ResourceTO>(new ResourceModel(\"actions\",\n+                \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<ResourceTO>> cellItem,\n                     final String componentId,\n                     final IModel<ResourceTO> model) {\n                 final ResourceTO resourceTO = model.getObject();\n \n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -157,36 +164,11 @@ public Page createPage() {\n \n                         editResourceWin.show(target);\n                     }\n-                };\n-\n-                final EditLinkPanel panel =\n-                        new EditLinkPanel(componentId, model);\n-                panel.add(editLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Resources\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<ResourceTO>(new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                }, ActionLink.ActionType.EDIT, \"Resources\", \"read\");\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<ResourceTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<ResourceTO> model) {\n-                final ResourceTO resourceTO = model.getObject();\n+                panel.add(new ActionLink() {\n \n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -205,21 +187,12 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(feedbackPanel);\n                         target.add(resourceContainer);\n                     }\n-                };\n-\n-                final DeleteLinkPanel panel =\n-                        new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Resources\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Resources\", \"delete\");\n \n                 cellItem.add(panel);\n             }\n         });\n \n-\n         final AjaxFallbackDefaultDataTable table =\n                 new AjaxFallbackDefaultDataTable(\"resourceDatatable\", columns,\n                 new ResourcesProvider(), resourcePaginatorRows);\n@@ -313,10 +286,15 @@ private void setupConnectors() {\n                 \"bundleName\", \"bundleName\"));\n \n         columns.add(new AbstractColumn<ConnInstanceTO>(\n-                new ResourceModel(\"edit\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<ConnInstanceTO>> cellItem,\n@@ -325,10 +303,12 @@ public void populateItem(\n \n                 final ConnInstanceTO connectorTO = model.getObject();\n \n-                final AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -350,37 +330,11 @@ public Page createPage() {\n \n                         editConnectorWin.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(editLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Connectors\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<ConnInstanceTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                }, ActionLink.ActionType.EDIT, \"Connectors\", \"read\");\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<ConnInstanceTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<ConnInstanceTO> model) {\n+                panel.add(new ActionLink() {\n \n-                final ConnInstanceTO connectorTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -397,14 +351,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(connectorContainer);\n                         target.add(feedbackPanel);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"Connectors\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Connectors\", \"delete\");\n \n                 cellItem.add(panel);\n             }\n@@ -523,6 +470,8 @@ public int size() {\n         public IModel<ResourceTO> model(final ResourceTO resource) {\n             return new AbstractReadOnlyModel<ResourceTO>() {\n \n+                private static final long serialVersionUID = 8952474152465381634L;\n+\n                 @Override\n                 public ResourceTO getObject() {\n                     return resource;"},{"sha":"5155c3e9ff83c8f779e075922c25f54fea236592","filename":"console/src/main/java/org/syncope/console/pages/RoleModalPage.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -47,11 +47,13 @@ public class RoleModalPage extends BaseModalPage {\n \n     private RoleTO originalRoleTO;\n \n-    public RoleModalPage(final PageReference callerPageRef,\n-            final ModalWindow window, final RoleTO roleTO) {\n+    public RoleModalPage(\n+            final PageReference callerPageRef,\n+            final ModalWindow window, \n+            final RoleTO roleTO) {\n \n         super();\n-\n+        \n         final boolean createFlag = roleTO.getId() == 0;\n         if (!createFlag) {\n             originalRoleTO = AttributableOperations.clone(roleTO);"},{"sha":"6e39fb5595d3c600955e174c82e5da7300c55ab5","filename":"console/src/main/java/org/syncope/console/pages/Schema.java","status":"modified","additions":22,"deletions":49,"changes":71,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -52,37 +52,36 @@\n import org.syncope.console.commons.SelectChoiceRenderer;\n import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.rest.SchemaRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLink.ActionType;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n /**\n  * Schema WebPage.\n  */\n public class Schema extends BasePage {\n \n+    private static final long serialVersionUID = 8091922398776299403L;\n+\n     private enum SchemaType {\n \n         RoleSchema,\n         UserSchema,\n         MembershipSchema\n-\n     };\n \n     private enum SchemaDerivedType {\n \n         RoleDerivedSchema,\n         UserDerivedSchema,\n         MembershipDerivedSchema\n-\n     };\n \n     private enum SchemaVirtualType {\n \n         RoleVirtualSchema,\n         UserVirtualSchema,\n         MembershipVirtualSchema\n-\n     };\n \n     private static final int WIN_WIDTH = 550;\n@@ -923,11 +922,17 @@ private <T extends AbstractSchemaModalPage> List<IColumn> getColumnsForSchema(\n                     field));\n         }\n \n+\n         columns.add(new AbstractColumn<AbstractBaseBean>(\n-                new ResourceModel(\"edit\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<AbstractBaseBean>> cellItem,\n@@ -936,14 +941,15 @@ public void populateItem(\n \n                 final AbstractBaseBean schemaTO = model.getObject();\n \n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n \n-                    @Override\n-                    public void onClick(final AjaxRequestTarget target) {\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n+                    @Override\n+                    public void onClick(AjaxRequestTarget target) {\n                         modalWindow.setPageCreator(\n                                 new ModalWindow.PageCreator() {\n \n@@ -969,37 +975,11 @@ public Page createPage() {\n \n                         modalWindow.show(target);\n                     }\n-                };\n+                }, ActionType.EDIT, readPermissions);\n \n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n+                panel.add(new ActionLink() {\n \n-                MetaDataRoleAuthorizationStrategy.authorize(\n-                        panel, ENABLE, readPermissions);\n-\n-                panel.add(editLink);\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<AbstractBaseBean>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<AbstractBaseBean>> cellItem,\n-                    final String componentId,\n-                    final IModel<AbstractBaseBean> model) {\n-\n-                final AbstractBaseBean schemaTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -1027,14 +1007,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         target.add(webContainer);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(\n-                        panel, ENABLE, deletePermissions);\n-\n-                panel.add(deleteLink);\n+                }, ActionType.DELETE, deletePermissions);\n \n                 cellItem.add(panel);\n             }"},{"sha":"f557a4c7bf2cb3d9b0a7b265b7bbb1d42aa2f3a7","filename":"console/src/main/java/org/syncope/console/pages/StatusModalPage.java","status":"added","additions":301,"deletions":0,"changes":301,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,301 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.syncope.console.pages;\n+\n+import com.sun.tools.javac.util.Pair;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import org.apache.wicket.Component;\n+import org.apache.wicket.PageReference;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.behavior.Behavior;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.ComponentTag;\n+import org.apache.wicket.markup.html.basic.Label;\n+import org.apache.wicket.markup.html.form.Check;\n+import org.apache.wicket.markup.html.form.CheckGroup;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.image.Image;\n+import org.apache.wicket.markup.html.list.ListItem;\n+import org.apache.wicket.markup.html.list.ListView;\n+import org.apache.wicket.model.PropertyModel;\n+import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.syncope.client.to.AttributeTO;\n+import org.syncope.client.to.ConnObjectTO;\n+import org.syncope.client.to.ResourceTO;\n+import org.syncope.client.to.SchemaMappingTO;\n+import org.syncope.client.to.UserTO;\n+import org.syncope.console.rest.ResourceRestClient;\n+import org.syncope.console.rest.UserRestClient;\n+import org.syncope.types.IntMappingType;\n+\n+public class StatusModalPage extends BaseModalPage {\n+\n+    private static final long serialVersionUID = 4114026480146090961L;\n+\n+    @SpringBean\n+    private UserRestClient userRestClient;\n+\n+    @SpringBean\n+    private ResourceRestClient resourceRestClient;\n+\n+    private enum STATUS {\n+\n+        ACTIVE,\n+        SUSPENDED,\n+        UNDEFINED,\n+        USER_NOT_FOUND\n+    }\n+\n+    final List<String> selectedResources = new ArrayList<String>();\n+\n+    public StatusModalPage(\n+            final PageReference callerPageRef,\n+            final ModalWindow window,\n+            final UserTO userTO) {\n+\n+        super();\n+\n+        final Map<String, STATUS> statuses = getRemoteStatuses(userTO);\n+\n+        final Form form = new Form(\"form\");\n+        add(form);\n+\n+        final List<String> externalResources = new ArrayList<String>();\n+        externalResources.add(\"Syncope\");\n+        externalResources.addAll(userTO.getResources());\n+\n+        final CheckGroup selections = new CheckGroup(\n+                \"selections\", new PropertyModel(this, \"selectedResources\"));\n+        form.add(selections);\n+\n+        final ListView<String> resources = new ListView<String>(\n+                \"resources\", externalResources) {\n+\n+            private static final long serialVersionUID = 4949588177564901031L;\n+\n+            @Override\n+            protected void populateItem(ListItem<String> item) {\n+                item.add(new Check(\"check\", item.getModel()));\n+                item.add(new Label(\"name\", new ResourceModel(\n+                        item.getModelObject(), item.getModelObject())));\n+\n+                final Image image;\n+                final String alt, title;\n+\n+                switch (\"Syncope\".equals(item.getModelObject())\n+                        ? STATUS.valueOf(userTO.getStatus().toUpperCase())\n+                        : statuses.get(item.getModelObject())) {\n+                    case ACTIVE:\n+                        image = new Image(\"icon\", \"statuses/active.png\");\n+                        alt = \"active icon\";\n+                        title = \"Enabled\";\n+                        break;\n+                    case UNDEFINED:\n+                        image = new Image(\"icon\", \"statuses/undefined.png\");\n+                        item.setEnabled(false);\n+                        alt = \"undefined icon\";\n+                        title = \"Undefined status\";\n+                        break;\n+                    case USER_NOT_FOUND:\n+                        image = new Image(\"icon\", \"statuses/usernotfound.png\");\n+                        item.setEnabled(false);\n+                        alt = \"notfound icon\";\n+                        title = \"User not found\";\n+                        break;\n+                    default:\n+                        image = new Image(\"icon\", \"statuses/inactive.png\");\n+                        alt = \"inactive icon\";\n+                        title = \"Disabled\";\n+                }\n+\n+                image.add(new Behavior() {\n+\n+                    private static final long serialVersionUID = 1469628524240283489L;\n+\n+                    @Override\n+                    public void onComponentTag(\n+                            Component component, ComponentTag tag) {\n+                        tag.put(\"alt\", alt);\n+                        tag.put(\"title\", title);\n+                    }\n+                });\n+\n+                item.add(image);\n+            }\n+        };\n+\n+        selections.add(resources);\n+\n+        final AjaxButton disable = new IndicatingAjaxButton(\n+                \"disable\", new ResourceModel(\"disable\", \"Disable\")) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(\n+                    final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                userRestClient.suspend(userTO.getId(), selectedResources);\n+\n+                if (callerPageRef.getPage() instanceof BasePage) {\n+                    ((BasePage) callerPageRef.getPage()).setModalResult(true);\n+                }\n+\n+                window.close(target);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                target.add(feedbackPanel);\n+            }\n+        };\n+\n+        final AjaxButton enable = new IndicatingAjaxButton(\n+                \"enable\", new ResourceModel(\"enable\", \"Enable\")) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(\n+                    final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                userRestClient.reactivate(userTO.getId(), selectedResources);\n+\n+                ((BasePage) callerPageRef.getPage()).setModalResult(true);\n+\n+                window.close(target);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                target.add(feedbackPanel);\n+            }\n+        };\n+\n+        form.add(disable);\n+        form.add(enable);\n+    }\n+\n+    private Map<String, STATUS> getRemoteStatuses(final UserTO userTO) {\n+        Map<String, STATUS> statuses = new HashMap<String, STATUS>();\n+\n+        for (String res : userTO.getResources()) {\n+            ResourceTO resourceTO = resourceRestClient.read(res);\n+            Pair<IntMappingType, String> accountId = getAccountId(resourceTO);\n+\n+            String objectId = null;\n+\n+            switch (accountId != null ? accountId.fst : IntMappingType.SyncopeUserId) {\n+                case SyncopeUserId:\n+                    objectId = String.valueOf(userTO.getId());\n+                    break;\n+                case Username:\n+                    objectId = userTO.getUsername();\n+                    break;\n+                case UserSchema:\n+                    AttributeTO attributeTO = null;\n+                    attributeTO =\n+                            userTO.getAttributeMap().get(accountId.snd);\n+                    objectId =\n+                            attributeTO != null\n+                            && attributeTO.getValues() != null\n+                            && !attributeTO.getValues().isEmpty()\n+                            ? attributeTO.getValues().get(0) : null;\n+                    break;\n+                case UserDerivedSchema:\n+                    attributeTO =\n+                            userTO.getDerivedAttributeMap().get(accountId.snd);\n+                    objectId =\n+                            attributeTO != null\n+                            && attributeTO.getValues() != null\n+                            && !attributeTO.getValues().isEmpty()\n+                            ? attributeTO.getValues().get(0) : null;\n+                    break;\n+                case UserVirtualSchema:\n+                    attributeTO =\n+                            userTO.getVirtualAttributeMap().get(accountId.snd);\n+                    objectId =\n+                            attributeTO != null\n+                            && attributeTO.getValues() != null\n+                            && !attributeTO.getValues().isEmpty()\n+                            ? attributeTO.getValues().get(0) : null;\n+                    break;\n+                default:\n+            }\n+\n+            STATUS status;\n+\n+            try {\n+                final ConnObjectTO objectTO =\n+                        userRestClient.getRemoteObject(res, objectId);\n+\n+                final Boolean enabled = isEnabled(objectTO);\n+\n+                status = enabled == null\n+                        ? STATUS.UNDEFINED\n+                        : enabled ? STATUS.ACTIVE : STATUS.SUSPENDED;\n+\n+            } catch (Exception e) {\n+                LOG.warn(\"User '{}' not found on resource '{}'\",\n+                        objectId, res);\n+\n+                status = STATUS.USER_NOT_FOUND;\n+            }\n+\n+            statuses.put(res, status);\n+        }\n+\n+        return statuses;\n+    }\n+\n+    private Boolean isEnabled(final ConnObjectTO objectTO) {\n+        final String STATUSATTR = \"__ENABLE__\";\n+\n+        final Map<String, AttributeTO> attributeTOs = objectTO.getAttributeMap();\n+        final AttributeTO status = attributeTOs.get(STATUSATTR);\n+\n+        return status != null && status.getValues() != null\n+                && !status.getValues().isEmpty()\n+                ? Boolean.parseBoolean(status.getValues().get(0)) : null;\n+    }\n+\n+    private Pair<IntMappingType, String> getAccountId(final ResourceTO resourceTO) {\n+        Pair<IntMappingType, String> accountId = null;\n+\n+        for (SchemaMappingTO mapping : resourceTO.getMappings()) {\n+            if (mapping.isAccountid()) {\n+                accountId = new Pair<IntMappingType, String>(\n+                        mapping.getIntMappingType(),\n+                        mapping.getIntAttrName());\n+            }\n+        }\n+\n+        return accountId;\n+    }\n+}"},{"sha":"39a491f68a4fada32a2ae298e88097532d1abded","filename":"console/src/main/java/org/syncope/console/pages/TaskModalPage.java","status":"modified","additions":20,"deletions":49,"changes":69,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -22,9 +22,6 @@\n import java.util.List;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n@@ -54,11 +51,10 @@\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.rest.TaskRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n \n /**\n  * Modal window with Task form (to stop and start execution).\n@@ -132,20 +128,29 @@ public TaskModalPage(final TaskTO taskTO) {\n                 new ResourceModel(\"status\"), \"status\", \"status\"));\n \n         columns.add(new AbstractColumn<TaskExecTO>(\n-                new ResourceModel(\"message\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<TaskExecTO>> cellItem,\n                     final String componentId,\n                     final IModel<TaskExecTO> model) {\n \n-                AjaxLink messageLink = new IndicatingAjaxLink(\"link\") {\n+                final TaskExecTO taskExecutionTO = model.getObject();\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -163,40 +168,12 @@ public Page createPage() {\n                                 });\n                         taskExecMessageWin.show(target);\n                     }\n-                };\n-\n-                messageLink.add(new Label(\"linkTitle\",\n-                        getString(\"showMessage\")));\n-\n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(messageLink);\n-\n-                cellItem.add(panel);\n-\n-                if (!StringUtils.hasText(model.getObject().getMessage())) {\n-                    messageLink.setEnabled(false);\n-                }\n-            }\n-        });\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"read\",\n+                        StringUtils.hasText(model.getObject().getMessage()));\n \n-        columns.add(new AbstractColumn<TaskExecTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<TaskExecTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<TaskExecTO> model) {\n-\n-                final TaskExecTO taskExecutionTO = model.getObject();\n+                panel.add(new ActionLink() {\n \n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -214,13 +191,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(feedbackPanel);\n                         target.add(executions);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"delete\"));\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"69bf3582a604663a5c0443a6a9e7df84e01d02a7","filename":"console/src/main/java/org/syncope/console/pages/Tasks.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -96,6 +96,7 @@ public IModel<TaskExecTO> model(\n                 final TaskExecTO taskExecution) {\n \n             return new AbstractReadOnlyModel<TaskExecTO>() {\n+                private static final long serialVersionUID = 7485475149862342421L;\n \n                 @Override\n                 public TaskExecTO getObject() {\n@@ -112,6 +113,8 @@ public List<TaskExecTO> getTaskDB() {\n     public static class TasksProvider<T extends TaskTO>\n             extends SortableDataProvider<T> {\n \n+        private static final long serialVersionUID = -20112718133295756L;\n+\n         private SortableDataProviderComparator<T> comparator;\n \n         private TaskRestClient restClient;"},{"sha":"705e646d06c8f08482854ed13844665c9aefee54","filename":"console/src/main/java/org/syncope/console/pages/Todo.java","status":"modified","additions":58,"deletions":118,"changes":176,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTodo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTodo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTodo.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -21,9 +21,6 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n@@ -36,8 +33,6 @@\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n-import org.apache.wicket.markup.html.panel.EmptyPanel;\n-import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.markup.repeater.Item;\n import org.apache.wicket.model.AbstractReadOnlyModel;\n import org.apache.wicket.model.IModel;\n@@ -55,10 +50,9 @@\n import org.syncope.console.rest.ApprovalRestClient;\n import org.syncope.console.rest.UserRequestRestClient;\n import org.syncope.console.rest.UserRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n import org.syncope.types.UserRequestType;\n \n public class Todo extends BasePage {\n@@ -127,21 +121,29 @@ private void setupApproval() {\n         columns.add(new PropertyColumn(new ResourceModel(\"owner\"),\n                 \"owner\", \"owner\"));\n         columns.add(new AbstractColumn<WorkflowFormTO>(\n-                new ResourceModel(\"claim\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<WorkflowFormTO>> cellItem,\n                     final String componentId,\n                     final IModel<WorkflowFormTO> model) {\n \n                 final WorkflowFormTO formTO = model.getObject();\n-                AjaxLink claimLink = new IndicatingAjaxLink(\"link\") {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -154,68 +156,33 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(feedbackPanel);\n                         target.add(approvalContainer);\n                     }\n-                };\n-\n-                claimLink.add(new Label(\"linkTitle\", getString(\"claim\")));\n-\n-                Panel panel = new LinkPanel(componentId);\n-                panel.add(claimLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Approval\", \"claim\"));\n+                }, ActionLink.ActionType.CLAIM, \"Approval\", \"claim\");\n \n-                cellItem.add(panel);\n-            }\n-        });\n-        columns.add(new AbstractColumn<WorkflowFormTO>(\n-                new ResourceModel(\"manage\")) {\n+                panel.add(new ActionLink() {\n \n-            private static final long serialVersionUID = 2054811145491901166L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<WorkflowFormTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<WorkflowFormTO> model) {\n-\n-                final WorkflowFormTO formTO = model.getObject();\n-                Panel panel;\n-                if (SyncopeSession.get().getUserId().equals(\n-                        formTO.getOwner())) {\n-\n-                    AjaxLink manageLink = new IndicatingAjaxLink(\"link\") {\n-\n-                        private static final long serialVersionUID =\n-                                -7978723352517770644L;\n-\n-                        @Override\n-                        public void onClick(final AjaxRequestTarget target) {\n-                            editApprovalWin.setPageCreator(\n-                                    new ModalWindow.PageCreator() {\n-\n-                                        @Override\n-                                        public Page createPage() {\n-                                            return new ApprovalModalPage(\n-                                                    Todo.this.getPageReference(),\n-                                                    editApprovalWin, formTO);\n-                                        }\n-                                    });\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        editApprovalWin.setPageCreator(\n+                                new ModalWindow.PageCreator() {\n \n-                            editApprovalWin.show(target);\n-                        }\n-                    };\n-                    manageLink.add(new Label(\"linkTitle\", getString(\"manage\")));\n+                                    private static final long serialVersionUID = -7834632442532690940L;\n \n-                    panel = new LinkPanel(componentId);\n-                    panel.add(manageLink);\n+                                    @Override\n+                                    public Page createPage() {\n+                                        return new ApprovalModalPage(\n+                                                Todo.this.getPageReference(),\n+                                                editApprovalWin, formTO);\n+                                    }\n+                                });\n \n-                    MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                            xmlRolesReader.getAllAllowedRoles(\n-                            \"Approval\", \"read\"));\n+                        editApprovalWin.show(target);\n+                    }\n+                }, ActionLink.ActionType.EDIT, \"Approval\", \"read\",\n+                        SyncopeSession.get().getUserId().equals(\n+                        formTO.getOwner()));\n \n-                } else {\n-                    panel = new EmptyPanel(componentId);\n-                }\n                 cellItem.add(panel);\n             }\n         });\n@@ -275,26 +242,37 @@ private void setupUserRequest() {\n                 \"type\", \"type\"));\n         columns.add(new UserRequestColumn(\"user\"));\n         columns.add(new AbstractColumn<UserRequestTO>(\n-                new ResourceModel(\"manage\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<UserRequestTO>> cellItem,\n                     final String componentId,\n                     final IModel<UserRequestTO> model) {\n \n-                AjaxLink manageLink = new IndicatingAjaxLink(\"link\") {\n+                final UserRequestTO request = model.getObject();\n+\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n                         editUserRequestWin.setPageCreator(\n                                 new ModalWindow.PageCreator() {\n \n+                                    private static final long serialVersionUID = -7834632442532690940L;\n+\n                                     @Override\n                                     public Page createPage() {\n                                         return new UserModalPage(\n@@ -306,13 +284,12 @@ public Page createPage() {\n \n                         editUserRequestWin.show(target);\n                     }\n-                };\n+                }, ActionLink.ActionType.EDIT, \"UserRequest\", \"read\",\n+                        model.getObject().getType() != UserRequestType.DELETE);\n \n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"link\") {\n+                panel.add(new ActionLink() {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -332,42 +309,12 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         target.add(userRequestContainer);\n                     }\n-                };\n-                MetaDataRoleAuthorizationStrategy.authorize(deleteLink, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Users\", \"delete\"));\n-\n-                AjaxLink link = model.getObject().getType()\n-                        == UserRequestType.DELETE ? deleteLink : manageLink;\n-                link.add(new Label(\"linkTitle\", getString(\"manage\")));\n+                }, ActionLink.ActionType.DELETE, \"Users\", \"delete\",\n+                        model.getObject().getType() == UserRequestType.DELETE);\n \n-                Panel panel = new LinkPanel(componentId);\n-                panel.add(link);\n+                panel.add(new ActionLink() {\n \n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"UserRequest\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-        columns.add(new AbstractColumn<UserRequestTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<UserRequestTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<UserRequestTO> model) {\n-\n-                final UserRequestTO request = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -384,14 +331,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         target.add(userRequestContainer);\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\n-                        \"UserRequest\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"UserRequest\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"5ffb3e9fd5dd74b0c51773814d5c3b990ff04bc2","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":6,"deletions":10,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -33,7 +33,6 @@\n import org.syncope.client.to.UserRequestTO;\n import org.syncope.client.to.UserTO;\n import org.syncope.client.util.AttributableOperations;\n-import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.pages.panels.AttributesPanel;\n import org.syncope.console.pages.panels.DerivedAttributesPanel;\n import org.syncope.console.pages.panels.ResourcesPanel;\n@@ -252,20 +251,17 @@ protected void onSubmit(final AjaxRequestTarget target,\n                                 requestRestClient.requestCreate(updatedUserTO);\n                                 break;\n \n-                            case ADMIN:\n+                            case TEMPLATE:\n+                                syncTaskTO.setUserTemplate(updatedUserTO);\n+                                taskRestClient.updateSyncTask(syncTaskTO);\n+                                break;\n+\n                             default:\n                                 userTO = userRestClient.create(updatedUserTO);\n                                 if (userRequestTO != null) {\n                                     requestRestClient.delete(\n                                             userRequestTO.getId());\n                                 }\n-                                break;\n-\n-                            case TEMPLATE:\n-                                syncTaskTO.setUserTemplate(updatedUserTO);\n-                                taskRestClient.updateSyncTask(syncTaskTO);\n-                                break;\n-\n                         }\n                     } else {\n                         UserMod userMod = AttributableOperations.diff(\n@@ -302,7 +298,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n                         default:\n                             window.close(target);\n                     }\n-                } catch (SyncopeClientCompositeErrorException e) {\n+                } catch (Exception e) {\n                     LOG.error(\"While creating or updating user\", e);\n                     error(getString(\"error\") + \":\" + e.getMessage());\n                     target.add(feedbackPanel);"},{"sha":"6d47013d2783e932e7e479d4e03dcac3dc30b358","filename":"console/src/main/java/org/syncope/console/pages/panels/NotificationTasks.java","status":"modified","additions":20,"deletions":74,"changes":94,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FNotificationTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FNotificationTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FNotificationTasks.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -18,17 +18,13 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n@@ -47,10 +43,8 @@\n import org.syncope.console.pages.NotificationTaskModalPage;\n import org.syncope.console.pages.Tasks.TasksProvider;\n import org.syncope.console.rest.TaskRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n public class NotificationTasks extends Panel {\n \n@@ -102,10 +96,15 @@ public NotificationTasks(String id) {\n                 new ResourceModel(\"latestExecStatus\"),\n                 \"latestExecStatus\", \"latestExecStatus\"));\n \n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"detail\")) {\n+        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<TaskTO>> cellItem,\n@@ -114,10 +113,12 @@ public void populateItem(\n \n                 final TaskTO taskTO = model.getObject();\n \n-                AjaxLink viewLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -135,34 +136,11 @@ public Page createPage() {\n \n                         window.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(viewLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"execute\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<TaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<TaskTO> model) {\n-\n-                final TaskTO taskTO = model.getObject();\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"read\");\n \n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n+                panel.add(new ActionLink() {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -176,37 +154,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(getPage().get(\"feedback\"));\n                         target.add(container);\n                     }\n-                };\n-\n-                executeLink.add(new Label(\"linkTitle\", getString(\"execute\")));\n-\n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                }, ActionLink.ActionType.EXECUTE, \"Tasks\", \"execute\");\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<TaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<TaskTO> model) {\n+                panel.add(new ActionLink() {\n \n-                final TaskTO taskTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -219,13 +171,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Tasks\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"eabd4a9a65abba3e5909a91e80586c148db3055f","filename":"console/src/main/java/org/syncope/console/pages/panels/PoliciesPanel.java","status":"modified","additions":18,"deletions":48,"changes":66,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -22,7 +22,6 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n@@ -58,9 +57,8 @@\n import org.syncope.console.commons.XMLRolesReader;\n import org.syncope.console.pages.PolicyModalPage;\n import org.syncope.console.rest.PolicyRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n import org.syncope.types.PolicyType;\n \n public class PoliciesPanel extends Panel {\n@@ -122,8 +120,7 @@ public PoliciesPanel(final String id, final PolicyType policyType) {\n         columns.add(new PropertyColumn(\n                 new ResourceModel(\"description\"), \"description\", \"description\"));\n \n-        columns.add(new AbstractColumn<PolicyTO>(\n-                new ResourceModel(\"type\")) {\n+        columns.add(new AbstractColumn<PolicyTO>(new ResourceModel(\"type\")) {\n \n             private static final long serialVersionUID = 8263694778917279290L;\n \n@@ -139,10 +136,15 @@ public void populateItem(\n         });\n \n         columns.add(new AbstractColumn<PolicyTO>(\n-                new ResourceModel(\"edit\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<PolicyTO>> cellItem,\n@@ -151,10 +153,12 @@ public void populateItem(\n \n                 final PolicyTO accountPolicyTO = model.getObject();\n \n-                AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -175,37 +179,11 @@ public Page createPage() {\n \n                         mwindow.show(target);\n                     }\n-                };\n-\n-                final EditLinkPanel panel =\n-                        new EditLinkPanel(componentId, model);\n-                panel.add(editLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(\n-                        panel, ENABLE, xmlRolesReader.getAllAllowedRoles(\n-                        \"Policies\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<PolicyTO>(\n-                new ResourceModel(\"delete\")) {\n+                }, ActionLink.ActionType.EDIT, \"Policies\", \"read\");\n \n-            private static final long serialVersionUID = 2054811145491901166L;\n+                panel.add(new ActionLink() {\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<PolicyTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<PolicyTO> model) {\n-                final PolicyTO accountPolicyTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -227,15 +205,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                final DeleteLinkPanel panel =\n-                        new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(\n-                        panel, ENABLE, xmlRolesReader.getAllAllowedRoles(\n-                        \"Policies\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Policies\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"bf91d0e4096eb4919896575c7b84768a70e3d0b1","filename":"console/src/main/java/org/syncope/console/pages/panels/PropagationTasks.java","status":"modified","additions":20,"deletions":74,"changes":94,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -20,17 +20,13 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n@@ -49,10 +45,8 @@\n import org.syncope.console.pages.PropagationTaskModalPage;\n import org.syncope.console.pages.Tasks.TasksProvider;\n import org.syncope.console.rest.TaskRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n /**\n  * Tasks page.\n@@ -114,10 +108,15 @@ public PropagationTasks(final String id) {\n                 new ResourceModel(\"latestExecStatus\"),\n                 \"latestExecStatus\", \"latestExecStatus\"));\n \n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"detail\")) {\n+        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<TaskTO>> cellItem,\n@@ -126,10 +125,12 @@ public void populateItem(\n \n                 final TaskTO taskTO = model.getObject();\n \n-                AjaxLink viewLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -147,34 +148,11 @@ public Page createPage() {\n \n                         window.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(viewLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"execute\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<TaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<TaskTO> model) {\n-\n-                final TaskTO taskTO = model.getObject();\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"read\");\n \n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n+                panel.add(new ActionLink() {\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -188,37 +166,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(getPage().get(\"feedback\"));\n                         target.add(container);\n                     }\n-                };\n-\n-                executeLink.add(new Label(\"linkTitle\", getString(\"execute\")));\n-\n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                }, ActionLink.ActionType.EXECUTE, \"Tasks\", \"execute\");\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<TaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<TaskTO> model) {\n+                panel.add(new ActionLink() {\n \n-                final TaskTO taskTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -231,13 +183,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Tasks\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"686928ba86f6cef3fbb0ed089a12e84504ed3370","filename":"console/src/main/java/org/syncope/console/pages/panels/ResultSetPanel.java","status":"modified","additions":65,"deletions":35,"changes":100,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -59,14 +59,14 @@\n import org.syncope.console.commons.XMLRolesReader;\n import org.syncope.console.pages.BasePage;\n import org.syncope.console.pages.DisplayAttributesModalPage;\n+import org.syncope.console.pages.StatusModalPage;\n import org.syncope.console.pages.UserModalPage;\n import org.syncope.console.rest.UserRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.TokenColumn;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.UserAttrColumn;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n public class ResultSetPanel extends Panel implements IEventSource {\n \n@@ -98,6 +98,16 @@ public class ResultSetPanel extends Panel implements IEventSource {\n      */\n     private final static int DISPLAYATTRS_MODAL_WIN_WIDTH = 550;\n \n+    /**\n+     * Schemas to be shown modal window height.\n+     */\n+    private final static int STATUS_MODAL_WIN_HEIGHT = 400;\n+\n+    /**\n+     * Schemas to be shown modal window width.\n+     */\n+    private final static int STATUS_MODAL_WIN_WIDTH = 400;\n+\n     /**\n      * User rest client.\n      */\n@@ -154,11 +164,21 @@ public class ResultSetPanel extends Panel implements IEventSource {\n     private UserDataProvider dataProvider;\n \n     /**\n-     * Modal window used for user profile editing.\n+     * Modal window to be used for user profile editing.\n      * Global visibility is required ...\n      */\n     private final ModalWindow editmodal = new ModalWindow(\"editModal\");\n \n+    /**\n+     * Modal window to be used for attributes choosing to display in tables.\n+     */\n+    final ModalWindow displaymodal = new ModalWindow(\"displayModal\");\n+\n+    /**\n+     * Modal window to be used for user status management.\n+     */\n+    final ModalWindow statusmodal = new ModalWindow(\"statusModal\");\n+\n     /**\n      * Owner page.\n      */\n@@ -185,14 +205,18 @@ public <T extends AbstractAttributableTO> ResultSetPanel(\n         editmodal.setCookieName(\"edit-modal\");\n         add(editmodal);\n \n-        // Modal window for choosing which attributes to display in tables\n-        final ModalWindow displaymodal = new ModalWindow(\"displayModal\");\n         displaymodal.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         displaymodal.setInitialHeight(DISPLAYATTRS_MODAL_WIN_HEIGHT);\n         displaymodal.setInitialWidth(DISPLAYATTRS_MODAL_WIN_WIDTH);\n         displaymodal.setCookieName(\"display-modal\");\n         add(displaymodal);\n \n+        statusmodal.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        statusmodal.setInitialHeight(STATUS_MODAL_WIN_HEIGHT);\n+        statusmodal.setInitialWidth(STATUS_MODAL_WIN_WIDTH);\n+        statusmodal.setCookieName(\"status-modal\");\n+        add(statusmodal);\n+\n         // Container for user search result\n         container = new WebMarkupContainer(\"container\");\n         container.setOutputMarkupId(true);\n@@ -289,6 +313,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n         paginatorForm.add(rowsChooser);\n         // ---------------------------\n \n+        setWindowClosedReloadCallback(statusmodal);\n         setWindowClosedReloadCallback(editmodal);\n         setWindowClosedReloadCallback(displaymodal);\n     }\n@@ -385,7 +410,7 @@ private List<IColumn<UserTO>> getColumns() {\n                     new ResourceModel(\"status\", \"status\"), \"status\", \"status\"));\n         }\n \n-        columns.add(new AbstractColumn<UserTO>(new ResourceModel(\"edit\")) {\n+        columns.add(new AbstractColumn<UserTO>(new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n@@ -400,11 +425,36 @@ public void populateItem(\n                     final String componentId,\n                     final IModel<UserTO> model) {\n \n-                Panel panel = new EditLinkPanel(componentId, model);\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Users\", \"read\"));\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n+\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID =\n+                            -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        statusmodal.setPageCreator(\n+                                new ModalWindow.PageCreator() {\n+\n+                                    private static final long serialVersionUID =\n+                                            -7834632442532690940L;\n+\n+                                    @Override\n+                                    public Page createPage() {\n+                                        return new StatusModalPage(\n+                                                page.getPageReference(),\n+                                                statusmodal,\n+                                                model.getObject());\n+                                    }\n+                                });\n \n-                panel.add(new IndicatingAjaxLink(\"editLink\") {\n+                        statusmodal.show(target);\n+                    }\n+                }, ActionLink.ActionType.SEARCH, \"Users\", \"read\");\n+\n+                panel.add(new ActionLink() {\n \n                     private static final long serialVersionUID =\n                             -7978723352517770644L;\n@@ -429,30 +479,9 @@ public Page createPage() {\n \n                         editmodal.show(target);\n                     }\n-                });\n-                cellItem.add(panel);\n-            }\n-        });\n-        columns.add(new AbstractColumn<UserTO>(new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                }, ActionLink.ActionType.EDIT, \"Users\", \"read\");\n \n-            @Override\n-            public String getCssClass() {\n-                return \"action\";\n-            }\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<UserTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<UserTO> model) {\n-\n-                Panel panel = new DeleteLinkPanel(componentId, model);\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Users\", \"delete\"));\n-\n-                panel.add(new IndicatingDeleteOnConfirmAjaxLink(\"deleteLink\") {\n+                panel.add(new ActionLink() {\n \n                     private static final long serialVersionUID =\n                             -7978723352517770644L;\n@@ -472,7 +501,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         send(getPage(), Broadcast.BREADTH, data);\n                     }\n-                });\n+                }, ActionLink.ActionType.DELETE, \"Users\", \"delete\");\n+\n                 cellItem.add(panel);\n             }\n         });"},{"sha":"f8534262886371f2f073e4f3a3ffca6633b4985b","filename":"console/src/main/java/org/syncope/console/pages/panels/SchedTasks.java","status":"modified","additions":23,"deletions":103,"changes":126,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSchedTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSchedTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSchedTasks.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -31,7 +31,6 @@\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n@@ -50,11 +49,9 @@\n import org.syncope.console.pages.Tasks;\n import org.syncope.console.pages.Tasks.TasksProvider;\n import org.syncope.console.rest.TaskRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n public class SchedTasks extends Panel {\n \n@@ -122,10 +119,15 @@ public SchedTasks(final String id,\n                 \"latestExecStatus\", \"latestExecStatus\"));\n \n         columns.add(new AbstractColumn<SchedTaskTO>(\n-                new ResourceModel(\"detail\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<SchedTaskTO>> cellItem,\n@@ -134,10 +136,12 @@ public void populateItem(\n \n                 final SchedTaskTO taskTO = model.getObject();\n \n-                AjaxLink viewLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -156,35 +160,11 @@ public Page createPage() {\n \n                         window.show(target);\n                     }\n-                };\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"read\");\n \n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(viewLink);\n+                panel.add(new ActionLink() {\n \n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SchedTaskTO>(\n-                new ResourceModel(\"execute\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SchedTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SchedTaskTO> model) {\n-\n-                final SchedTaskTO taskTO = model.getObject();\n-\n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -198,37 +178,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(getPage().get(\"feedback\"));\n                         target.add(container);\n                     }\n-                };\n-\n-                executeLink.add(new Label(\"linkTitle\", getString(\"execute\")));\n-\n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SchedTaskTO>(\n-                new ResourceModel(\"executeDryRun\")) {\n+                }, ActionLink.ActionType.EXECUTE, \"Tasks\", \"execute\");\n \n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SchedTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SchedTaskTO> model) {\n-\n-                final SchedTaskTO taskTO = model.getObject();\n+                panel.add(new ActionLink() {\n \n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -242,39 +196,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(getPage().get(\"feedback\"));\n                         target.add(container);\n                     }\n-                };\n-\n-                executeLink.add(new Label(\"linkTitle\",\n-                        getString(\"executeDryRun\")));\n-\n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n+                }, ActionLink.ActionType.DRYRUN, \"Tasks\", \"execute\");\n \n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n+                panel.add(new ActionLink() {\n \n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SchedTaskTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SchedTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SchedTaskTO> model) {\n-\n-                final SchedTaskTO taskTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -287,13 +213,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Tasks\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"9678cd0cde43436048020ef5fcf73e64a78c12f6","filename":"console/src/main/java/org/syncope/console/pages/panels/SyncTasks.java","status":"modified","additions":26,"deletions":130,"changes":156,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -30,7 +30,6 @@\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.panel.Panel;\n@@ -50,11 +49,9 @@\n import org.syncope.console.pages.Tasks.TasksProvider;\n import org.syncope.console.pages.UserModalPage;\n import org.syncope.console.rest.TaskRestClient;\n-import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n-import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-import org.syncope.console.wicket.markup.html.form.LinkPanel;\n import org.syncope.console.wicket.extensions.markup.html.repeater.data.table.DatePropertyColumn;\n+import org.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n \n public class SyncTasks extends Panel {\n \n@@ -120,10 +117,15 @@ public SyncTasks(String id, final PageReference callerPageRef) {\n                 \"latestExecStatus\", \"latestExecStatus\"));\n \n         columns.add(new AbstractColumn<SyncTaskTO>(\n-                new ResourceModel(\"detail\")) {\n+                new ResourceModel(\"actions\", \"\")) {\n \n             private static final long serialVersionUID = 2054811145491901166L;\n \n+            @Override\n+            public String getCssClass() {\n+                return \"action\";\n+            }\n+\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<SyncTaskTO>> cellItem,\n@@ -132,10 +134,12 @@ public void populateItem(\n \n                 final SyncTaskTO taskTO = model.getObject();\n \n-                AjaxLink viewLink = new IndicatingAjaxLink(\"editLink\") {\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model);\n \n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                panel.add(new ActionLink() {\n+\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -154,35 +158,11 @@ public Page createPage() {\n \n                         window.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(viewLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n+                }, ActionLink.ActionType.EDIT, \"Tasks\", \"read\");\n \n-        columns.add(new AbstractColumn<SyncTaskTO>(\n-                new ResourceModel(\"userTemplate\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SyncTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SyncTaskTO> model) {\n-\n-                final SyncTaskTO taskTO = model.getObject();\n+                panel.add(new ActionLink() {\n \n-                AjaxLink viewLink = new IndicatingAjaxLink(\"editLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -201,35 +181,11 @@ public Page createPage() {\n \n                         window.show(target);\n                     }\n-                };\n-\n-                EditLinkPanel panel = new EditLinkPanel(componentId, model);\n-                panel.add(viewLink);\n+                }, ActionLink.ActionType.TEMPLATE, \"Tasks\", \"read\");\n \n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"read\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SyncTaskTO>(\n-                new ResourceModel(\"execute\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n+                panel.add(new ActionLink() {\n \n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SyncTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SyncTaskTO> model) {\n-\n-                final SyncTaskTO taskTO = model.getObject();\n-\n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -243,37 +199,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n+                }, ActionLink.ActionType.EXECUTE, \"Tasks\", \"execute\");\n \n-                executeLink.add(new Label(\"linkTitle\", getString(\"execute\")));\n+                panel.add(new ActionLink() {\n \n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SyncTaskTO>(\n-                new ResourceModel(\"executeDryRun\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SyncTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SyncTaskTO> model) {\n-\n-                final SyncTaskTO taskTO = model.getObject();\n-\n-                AjaxLink executeLink = new IndicatingAjaxLink(\"link\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -287,39 +217,11 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                executeLink.add(new Label(\"linkTitle\",\n-                        getString(\"executeDryRun\")));\n+                }, ActionLink.ActionType.DRYRUN, \"Tasks\", \"execute\");\n \n-                LinkPanel panel = new LinkPanel(componentId);\n-                panel.add(executeLink);\n+                panel.add(new ActionLink() {\n \n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"execute\"));\n-\n-                cellItem.add(panel);\n-            }\n-        });\n-\n-        columns.add(new AbstractColumn<SyncTaskTO>(\n-                new ResourceModel(\"delete\")) {\n-\n-            private static final long serialVersionUID = 2054811145491901166L;\n-\n-            @Override\n-            public void populateItem(\n-                    final Item<ICellPopulator<SyncTaskTO>> cellItem,\n-                    final String componentId,\n-                    final IModel<SyncTaskTO> model) {\n-\n-                final SyncTaskTO taskTO = model.getObject();\n-\n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n-                        \"deleteLink\") {\n-\n-                    private static final long serialVersionUID =\n-                            -7978723352517770644L;\n+                    private static final long serialVersionUID = -3722207913631435501L;\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n@@ -332,13 +234,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         target.add(container);\n                         target.add(getPage().get(\"feedback\"));\n                     }\n-                };\n-\n-                DeleteLinkPanel panel = new DeleteLinkPanel(componentId, model);\n-                panel.add(deleteLink);\n-\n-                MetaDataRoleAuthorizationStrategy.authorize(panel, ENABLE,\n-                        xmlRolesReader.getAllAllowedRoles(\"Tasks\", \"delete\"));\n+                }, ActionLink.ActionType.DELETE, \"Tasks\", \"delete\");\n \n                 cellItem.add(panel);\n             }"},{"sha":"d351f86739c9953c8150d9860156e1a8bfe85ee6","filename":"console/src/main/java/org/syncope/console/pages/panels/UserModalPageResult.java","status":"modified","additions":16,"deletions":3,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserModalPageResult.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserModalPageResult.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserModalPageResult.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -32,6 +32,8 @@\n import org.apache.wicket.markup.html.panel.Fragment;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.request.resource.ContextRelativeResource;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n import org.syncope.client.to.UserTO;\n import org.syncope.console.pages.UserModalPage;\n import org.syncope.types.PropagationTaskExecStatus;\n@@ -40,6 +42,12 @@ public class UserModalPageResult extends Panel {\n \n     private static final long serialVersionUID = 2646115294319713723L;\n \n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG =\n+            LoggerFactory.getLogger(UserModalPageResult.class);\n+\n     private static final int PROPAGATION_RESULT_PAGINATOR_ROWS = 7;\n \n     public UserModalPageResult(final String id,\n@@ -74,7 +82,8 @@ public UserModalPageResult(final String id,\n \n             final PageableListView<String> propagationStatus =\n                     new PageableListView<String>(\n-                    \"propagationResults\", resourceListKey,\n+                    \"propagationResults\",\n+                    resourceListKey,\n                     PROPAGATION_RESULT_PAGINATOR_ROWS) {\n \n                         private static final long serialVersionUID =\n@@ -86,11 +95,15 @@ protected void populateItem(final ListItem item) {\n                                     (String) item.getDefaultModelObject();\n \n                             item.add(new Label(\"resourceName\", resourceItem));\n+\n                             item.add(new Label(\"propagation\",\n-                                    propagationMap.get(resourceItem).name()));\n+                                    propagationMap.get(resourceItem) != null\n+                                    ? propagationMap.get(resourceItem).name()\n+                                    : \"UNDEFINED\"));\n \n                             item.add(new Image(\"status\",\n-                                    propagationMap.get(resourceItem).\n+                                    propagationMap.get(resourceItem) != null\n+                                    && propagationMap.get(resourceItem).\n                                     isSuccessful()\n                                     ? new ContextRelativeResource(\n                                     \"img/success.png\")"},{"sha":"eb54c11e2e5c22eca42ee1b0a1a75bcf26d128c2","filename":"console/src/main/java/org/syncope/console/rest/UserRestClient.java","status":"modified","additions":52,"deletions":1,"changes":53,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUserRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUserRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUserRestClient.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,6 +19,7 @@\n import org.springframework.stereotype.Component;\n import org.syncope.client.mod.UserMod;\n import org.syncope.client.search.NodeCond;\n+import org.syncope.client.to.ConnObjectTO;\n import org.syncope.client.to.UserTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n \n@@ -70,7 +71,7 @@ public UserTO update(UserMod userModTO)\n     }\n \n     public void delete(Long id) {\n-         restTemplate.delete(baseURL + \"user/delete/{userId}\", id);\n+        restTemplate.delete(baseURL + \"user/delete/{userId}\", id);\n     }\n \n     public UserTO read(Long id) {\n@@ -111,4 +112,54 @@ public List<UserTO> search(final NodeCond searchCond,\n                 baseURL + \"user/search/{page}/{size}\",\n                 searchCond, UserTO[].class, page, size));\n     }\n+\n+    public ConnObjectTO getRemoteObject(\n+            final String resourceName, final String objectId)\n+            throws SyncopeClientCompositeErrorException {\n+        return restTemplate.getForObject(\n+                baseURL + \"/resource/{resourceName}/read/{objectId}.json\",\n+                ConnObjectTO.class, resourceName, objectId);\n+    }\n+\n+    public UserTO reactivate(long userId, List<String> resources)\n+            throws SyncopeClientCompositeErrorException {\n+\n+        return enable(userId, resources, true);\n+    }\n+\n+    public UserTO suspend(long userId, List<String> resources)\n+            throws SyncopeClientCompositeErrorException {\n+\n+        return enable(userId, resources, false);\n+    }\n+\n+    private UserTO enable(\n+            final long userId,\n+            final List<String> resources,\n+            final boolean enable)\n+            throws SyncopeClientCompositeErrorException {\n+\n+        boolean performLoacal = false;\n+        if (resources.contains(\"Syncope\")) {\n+            resources.remove(\"Syncope\");\n+            performLoacal = true;\n+        }\n+\n+        final StringBuilder query = new StringBuilder();\n+        query.append(baseURL).append(\"user/\").append(\n+                enable ? \"reactivate/\" : \"suspend/\").append(userId).\n+                append(\"?\").\n+                // perform on syncope if and only if it has been requested\n+                append(\"performLocally=\").append(performLoacal).\n+                append(\"&\").\n+                // perform on resource if and only if resources have been speciofied\n+                append(\"performRemotely=\").append(!resources.isEmpty()).\n+                append(\"&\");\n+\n+        for (String resource : resources) {\n+            query.append(\"resourceNames=\").append(resource).append(\"&\");\n+        }\n+\n+        return restTemplate.getForObject(query.toString(), UserTO.class);\n+    }\n }"},{"sha":"09ee414ebc4d0f386a20c69f03ff25c39dba5b3a","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/ActionLink.java","status":"added","additions":37,"deletions":0,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,37 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.wicket.markup.html.form;\n+\n+import java.io.Serializable;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+\n+public abstract class ActionLink implements Serializable {\n+\n+    private static final long serialVersionUID = 7031329706998320639L;\n+\n+    public enum ActionType {\n+\n+        CREATE,\n+        EDIT,\n+        TEMPLATE,\n+        SEARCH,\n+        DELETE,\n+        EXECUTE,\n+        DRYRUN,\n+        CLAIM\n+    }\n+\n+    public abstract void onClick(final AjaxRequestTarget target);\n+}"},{"sha":"b60b61b3a8b4f4163a2558eae935aa2b3f547b5b","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/ActionLinksPanel.java","status":"added","additions":264,"deletions":0,"changes":264,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,264 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.wicket.markup.html.form;\n+\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n+import org.apache.wicket.markup.html.panel.Fragment;\n+import org.apache.wicket.markup.html.panel.Panel;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.syncope.console.commons.XMLRolesReader;\n+import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n+\n+/**\n+ * This empty class must exist because there not seems to be alternative to\n+ * provide specialized HTML for edit links.\n+ */\n+public class ActionLinksPanel extends Panel {\n+\n+    private static final long serialVersionUID = 322966537010107771L;\n+\n+    /**\n+     * Role reader for authorizations management.\n+     */\n+    @SpringBean\n+    protected XMLRolesReader xmlRolesReader;\n+\n+    public ActionLinksPanel(final String componentId, final IModel<?> model) {\n+        super(componentId, model);\n+\n+        super.add(new Fragment(\"panelClaim\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelCreate\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelEdit\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelTemplate\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelSearch\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelDelete\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExecute\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelDryRun\", \"emptyFragment\", this));\n+    }\n+\n+    public void add(\n+            final ActionLink link,\n+            final ActionLink.ActionType type,\n+            final String pageId,\n+            final String actionId) {\n+\n+        add(link, type,\n+                xmlRolesReader.getAllAllowedRoles(pageId, actionId), true);\n+    }\n+\n+    public void add(\n+            final ActionLink link,\n+            final ActionLink.ActionType type,\n+            final String pageId,\n+            final String actionId,\n+            final boolean enabled) {\n+\n+        add(link, type,\n+                xmlRolesReader.getAllAllowedRoles(pageId, actionId), enabled);\n+    }\n+\n+    public void add(\n+            final ActionLink link,\n+            final ActionLink.ActionType type,\n+            final String roles) {\n+        add(link, type, roles, true);\n+    }\n+\n+    public void add(\n+            final ActionLink link,\n+            final ActionLink.ActionType type,\n+            final String roles,\n+            final boolean enabled) {\n+\n+        Fragment fragment = null;\n+\n+        switch (type) {\n+            case CLAIM:\n+                fragment = new Fragment(\n+                        \"panelClaim\", \"fragmentClaim\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"claimLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case CREATE:\n+                fragment = new Fragment(\n+                        \"panelCreate\", \"fragmentCreate\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"createLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+\n+            case EDIT:\n+                fragment = new Fragment(\n+                        \"panelEdit\", \"fragmentEdit\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"editLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case TEMPLATE:\n+                fragment = new Fragment(\n+                        \"panelTemplate\", \"fragmentTemplate\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"templateLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case SEARCH:\n+                fragment = new Fragment(\n+                        \"panelSearch\", \"fragmentSearch\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"searchLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case EXECUTE:\n+                fragment = new Fragment(\n+                        \"panelExecute\", \"fragmentExecute\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"executeLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case DRYRUN:\n+                fragment = new Fragment(\n+                        \"panelDryRun\", \"fragmentDryRun\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingAjaxLink(\"dryRunLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+                break;\n+            case DELETE:\n+                fragment = new Fragment(\n+                        \"panelDelete\", \"fragmentDelete\", this);\n+\n+                fragment.addOrReplace(\n+                        new IndicatingDeleteOnConfirmAjaxLink(\"deleteLink\") {\n+\n+                            private static final long serialVersionUID = -7978723352517770644L;\n+\n+                            @Override\n+                            public void onClick(final AjaxRequestTarget target) {\n+                                link.onClick(target);\n+                            }\n+                        });\n+\n+                break;\n+            default:\n+            // do nothink\n+        }\n+\n+        if (fragment != null) {\n+            fragment.setEnabled(enabled);\n+            MetaDataRoleAuthorizationStrategy.authorize(fragment, ENABLE, roles);\n+            super.addOrReplace(fragment);\n+        }\n+    }\n+\n+    public void remove(ActionLink.ActionType type) {\n+        switch (type) {\n+            case CLAIM:\n+                super.addOrReplace(\n+                        new Fragment(\"panelClaim\", \"emptyFragment\", this));\n+                break;\n+\n+            case CREATE:\n+                super.addOrReplace(\n+                        new Fragment(\"panelCreate\", \"emptyFragment\", this));\n+                break;\n+\n+            case EDIT:\n+                super.addOrReplace(\n+                        new Fragment(\"panelEdit\", \"emptyFragment\", this));\n+                break;\n+            case TEMPLATE:\n+                super.addOrReplace(\n+                        new Fragment(\"panelTemplate\", \"emptyFragment\", this));\n+                break;\n+            case SEARCH:\n+                super.addOrReplace(\n+                        new Fragment(\"panelSearch\", \"emptyFragment\", this));\n+                break;\n+            case EXECUTE:\n+                super.addOrReplace(\n+                        new Fragment(\"panelExecute\", \"emptyFragment\", this));\n+                break;\n+            case DRYRUN:\n+                super.addOrReplace(\n+                        new Fragment(\"panelDryRun\", \"emptyFragment\", this));\n+                break;\n+            case DELETE:\n+                super.addOrReplace(\n+                        new Fragment(\"panelDelete\", \"emptyFragment\", this));\n+                break;\n+            default:\n+            // do nothink\n+        }\n+    }\n+}"},{"sha":"119dc5b12ea76ecd288ea1cdd629b8ed7851186f","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/SearchLinkPanel.java","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,31 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.console.wicket.markup.html.form;\n+\n+import org.apache.wicket.markup.html.panel.Panel;\n+import org.apache.wicket.model.IModel;\n+\n+/**\n+ * This empty class must exist because there not seems to be alternative to\n+ * provide specialized HTML for edit links.\n+ */\n+public class SearchLinkPanel extends Panel {\n+\n+    private static final long serialVersionUID = 8719971783832913228L;\n+\n+    public SearchLinkPanel(final String componentId, final IModel<?> model) {\n+        super(componentId, model);\n+    }\n+}"},{"sha":"b9d5edb4f4181d90bcafaa3a92d4372ffe79255e","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/tree/TreeActionLinkPanel.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeActionLinkPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeActionLinkPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeActionLinkPanel.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -80,8 +80,8 @@ public void onClick(final AjaxRequestTarget target) {\n                     public Page createPage() {\n                         RoleTO roleTO = new RoleTO();\n                         roleTO.setParent(idRole);\n-                        RoleModalPage form = new RoleModalPage(callerPageRef,\n-                                window, roleTO);\n+                        RoleModalPage form =\n+                                new RoleModalPage(callerPageRef, window, roleTO);\n                         return form;\n                     }\n                 });"},{"sha":"29873fb8d16506cce4bc66687aae00b072a6244d","filename":"console/src/main/resources/org/syncope/console/pages/StatusModalPage.html","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,78 @@\n+<!--\n+ Licensed under the Apache License, Version 2.0 (the \"License\");\n+ you may not use this file except in compliance with the License.\n+ You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+ Unless required by applicable law or agreed to in writing, software\n+ distributed under the License is distributed on an \"AS IS\" BASIS,\n+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ See the License for the specific language governing permissions and\n+ limitations under the License.\n+ under the License.\n+-->\n+<wicket:head>\n+    <style>\n+        div.group{\n+            width:300px;\n+        }\n+\n+        div#check{\n+            width:20%;\n+            height: 25px;\n+            float:left;\n+        }\n+\n+        div#resource{\n+            margin-top: 3px;\n+            width:70%;\n+            height: 25px;\n+            float:left;\n+        }\n+\n+        div#status{\n+            margin-top: 3px;\n+            height: 25px;\n+            float: left;\n+        }\n+\n+        .submit{\n+            display:  block;\n+            clear:  both;\n+            float: none;\n+            margin-left: 10px;\n+            padding-top: 10px;\n+        }\n+    </style>\n+</wicket:head>\n+<wicket:extend>\n+    <form wicket:id=\"form\">\n+        <p class=\"ui-widget ui-corner-all ui-widget-header\">\n+        <wicket:message key=\"title\"/>\n+        </p>\n+\n+        <div>\n+            <span wicket:id=\"selections\">\n+                <div class=\"group\">\n+                    <div wicket:id=\"resources\">\n+                        <div id=\"check\">\n+                            <input type=\"checkbox\" wicket:id=\"check\"/>\n+                        </div>\n+                        <div id=\"resource\">\n+                            <span wicket:id=\"name\">[schema name]</span>\n+                        </div>\n+                        <div id=\"status\">\n+                            <img wicket:id=\"icon\"/>\n+                        </div>\n+                    </div>\n+                </div>\n+            </span>\n+        </div>\n+\n+        <div class=\"submit\">\n+            <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"enable\"/>\n+            <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\" wicket:id=\"disable\"/>\n+        </div>\n+    </form>\n+</wicket:extend>"},{"sha":"51260af28a1380f74b427185bae0ed5a173880f7","filename":"console/src/main/resources/org/syncope/console/pages/StatusModalPage.properties","status":"added","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage.properties?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1 @@\n+title=User Status Management\n\\ No newline at end of file"},{"sha":"6c974ae66e6d15116706e3565bf61aa0665152c6","filename":"console/src/main/resources/org/syncope/console/pages/StatusModalPage_it.properties","status":"added","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FStatusModalPage_it.properties?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1 @@\n+title=Gestione Stato Utente"},{"sha":"b3ea18ede7ca89d947d50dfd8d1fb24962bbe582","filename":"console/src/main/resources/org/syncope/console/pages/panels/ResultSetPanel.html","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResultSetPanel.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -27,10 +27,6 @@\n             left:97%;\n             width:10px;\n         }\n-\n-        .action{\n-            width: 100px;\n-        }\n     </style>\n </wicket:head>\n <html>\n@@ -56,6 +52,9 @@\n \n         <div wicket:id=\"displayModal\">\n         </div>\n-        \n+\n+        <div wicket:id=\"statusModal\">\n+        </div>\n+\n     </wicket:panel>\n </html>\n\\ No newline at end of file"},{"sha":"8e07437a95f8c1c7721c0326aa667cf753c7b30c","filename":"console/src/main/resources/org/syncope/console/pages/statuses/active.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Factive.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Factive.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Factive.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"e5c3dd2f714bbd0c9372360d0d94d8211c7da0fe","filename":"console/src/main/resources/org/syncope/console/pages/statuses/inactive.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Finactive.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Finactive.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Finactive.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"8e08b27782537ea317436d96c11cab5cc06ff5ed","filename":"console/src/main/resources/org/syncope/console/pages/statuses/undefined.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fundefined.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fundefined.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fundefined.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"c95ed50cae653f5dc3a5906b8b2651dbb8a2d395","filename":"console/src/main/resources/org/syncope/console/pages/statuses/usernotfound.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fusernotfound.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fusernotfound.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fstatuses%2Fusernotfound.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"4b387b4d01741a5cb7f2574e6c54bb4a7325647e","filename":"console/src/main/resources/org/syncope/console/wicket/markup/html/form/ActionLinksPanel.html","status":"added","additions":67,"deletions":0,"changes":67,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,67 @@\n+<!--\n+ Licensed under the Apache License, Version 2.0 (the \"License\");\n+ you may not use this file except in compliance with the License.\n+ You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+ Unless required by applicable law or agreed to in writing, software\n+ distributed under the License is distributed on an \"AS IS\" BASIS,\n+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ See the License for the specific language governing permissions and\n+ limitations under the License.\n+ under the License.\n+-->\n+<wicket:head>\n+    <style>\n+        span#action{\n+            margin-left: 1px;\n+            margin-right: 1px;\n+        }\n+    </style>\n+</wicket:head>\n+<wicket:panel>\n+    <span id=\"action\" wicket:id=\"panelClaim\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelDryRun\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelExecute\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelSearch\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelCreate\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelTemplate\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelEdit\">[plus]</span>\n+    <span id=\"action\" wicket:id=\"panelDelete\">[plus]</span>\n+\n+    <wicket:fragment wicket:id=\"fragmentClaim\">\n+        <a href=\"#\" wicket:id=\"claimLink\"><img src=\"img/actions/claim.png\" alt=\"claim icon\" title=\"Claim\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentCreate\">\n+        <a href=\"#\" wicket:id=\"createLink\"><img src=\"img/actions/create.png\" alt=\"create icon\"  title=\"Create\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentSearch\">\n+        <a href=\"#\" wicket:id=\"searchLink\"><img src=\"img/actions/search.png\" alt=\"search icon\"  title=\"Search and modify\" /></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentEdit\">\n+        <a href=\"#\" wicket:id=\"editLink\"><img src=\"img/actions/edit.png\" alt=\"edit icon\"  title=\"Edit\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentTemplate\">\n+        <a href=\"#\" wicket:id=\"templateLink\"><img src=\"img/actions/template.png\" alt=\"template icon\"  title=\"Specify template\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentDelete\">\n+        <a href=\"#\" wicket:id=\"deleteLink\"><img src=\"img/actions/delete.png\" alt=\"delete icon\"  title=\"Delete\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentDryRun\">\n+        <a href=\"#\" wicket:id=\"dryRunLink\"><img src=\"img/actions/dryrun.png\" alt=\"dryrun icon\"  title=\"DryRun\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentExecute\">\n+        <a href=\"#\" wicket:id=\"executeLink\"><img src=\"img/actions/execute.png\" alt=\"execute icon\"  title=\"Execute\"/></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"emptyFragment\">\n+    </wicket:fragment>\n+</wicket:panel>\n\\ No newline at end of file"},{"sha":"e141cb320a16e72c2ec774507f4a2712e8cdf56c","filename":"console/src/main/resources/org/syncope/console/wicket/markup/html/form/DeleteLinkPanel.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDeleteLinkPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDeleteLinkPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FDeleteLinkPanel.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -14,6 +14,6 @@\n -->\n <wicket:panel>\n   <a href=\"#\" wicket:id=\"deleteLink\">\n-       <wicket:message key=\"delete\"/>\n+       <img src=\"img/delete.png\" alt=\"settings icon\" class=\"drop_button\" />\n   </a>\n </wicket:panel>\n\\ No newline at end of file"},{"sha":"3b95292633639af7ff2dd61a9aee367e68b33ee3","filename":"console/src/main/resources/org/syncope/console/wicket/markup/html/form/EditLinkPanel.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEditLinkPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEditLinkPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEditLinkPanel.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -14,6 +14,6 @@\n -->\n <wicket:panel>\n   <a href=\"#\" wicket:id=\"editLink\">\n-       <wicket:message key=\"edit\"/>\n+       <img src=\"img/edit.png\" alt=\"settings icon\" class=\"drop_button\" />\n   </a>\n </wicket:panel>\n\\ No newline at end of file"},{"sha":"a198f0a1ffa078967218b92ed92c587c97a3ec8a","filename":"console/src/main/resources/org/syncope/console/wicket/markup/html/form/SearchLinkPanel.html","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FSearchLinkPanel.html?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -0,0 +1,19 @@\n+<!--\n+ Licensed under the Apache License, Version 2.0 (the \"License\");\n+ you may not use this file except in compliance with the License.\n+ You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+ Unless required by applicable law or agreed to in writing, software\n+ distributed under the License is distributed on an \"AS IS\" BASIS,\n+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ See the License for the specific language governing permissions and\n+ limitations under the License.\n+ under the License.\n+-->\n+<wicket:panel>\n+    <a href=\"#\" wicket:id=\"searchLink\">\n+        <img src=\"img/search.png\" alt=\"settings icon\" class=\"drop_button\" />\n+    </a>\n+</wicket:panel>\n\\ No newline at end of file"},{"sha":"001b33b3fa62dc753c09e539058f1beb817cfa31","filename":"console/src/main/webapp/css/style.css","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstyle.css","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstyle.css","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Fstyle.css?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -215,7 +215,7 @@ div#dialog-form select.text { margin-bottom:12px; width: auto; padding: .4em; }\n div#dialog-form fieldset { padding:0; border:0; margin-top:25px; }\n div#users-contain { width: 570px; margin-bottom: 20px;}/*width: 350px*/\n div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }\n-div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }\n+div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; }\n .ui-dialog .ui-state-error { padding: .3em; }\n .validateTips { border: 1px solid transparent; padding: 0.3em; }\n \n@@ -332,3 +332,11 @@ em img {\n     opacity:0.4;\n     filter:alpha(opacity=40);\n }\n+\n+th.action{\n+    width: 100px;\n+}\n+\n+td.action{\n+    text-align: center;\n+}"},{"sha":"8e07437a95f8c1c7721c0326aa667cf753c7b30c","filename":"console/src/main/webapp/img/actions/claim.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fclaim.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fclaim.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fclaim.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"df956ab2bb00f07364530b66a337a75dce6fa7c3","filename":"console/src/main/webapp/img/actions/create.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fcreate.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fcreate.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fcreate.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"ec35ed2c6a1bc4f959d74e64dafb0aab721b4f84","filename":"console/src/main/webapp/img/actions/delete.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdelete.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdelete.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdelete.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"ad6d572a114d8d894536c9934d060a904bf3b6f2","filename":"console/src/main/webapp/img/actions/dryrun.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdryrun.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdryrun.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fdryrun.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"f1646e751577748a662acbf19481ce23319e35e9","filename":"console/src/main/webapp/img/actions/edit.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fedit.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fedit.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fedit.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"ad6d572a114d8d894536c9934d060a904bf3b6f2","filename":"console/src/main/webapp/img/actions/execute.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fexecute.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fexecute.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fexecute.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"df956ab2bb00f07364530b66a337a75dce6fa7c3","filename":"console/src/main/webapp/img/actions/search.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fsearch.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fsearch.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Fsearch.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"00cb6df04c5b3ee25c3199af3e4fe5ff5f95b962","filename":"console/src/main/webapp/img/actions/template.png","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Ftemplate.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Ftemplate.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Factions%2Ftemplate.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"df956ab2bb00f07364530b66a337a75dce6fa7c3","filename":"console/src/main/webapp/img/search.png","status":"modified","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fsearch.png","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fsearch.png","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fimg%2Fsearch.png?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f"},{"sha":"99d7fc6644c794ed08e485ee9460941fbebe9cd7","filename":"console/src/test/java/org/syncope/console/AbstractTest.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAbstractTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAbstractTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAbstractTest.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -52,7 +52,10 @@ public void setUp()\n         selenium.type(\"name=userId\", ADMIN);\n         selenium.type(\"name=password\", PASSWORD);\n         selenium.click(\"name=:submit\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//img[@alt='Logout']\\\");\",\n+                \"60000\");\n     }\n \n     @Override"},{"sha":"19c2f4ec0726d1766ecbbc1d2195bef02698185e","filename":"console/src/test/java/org/syncope/console/AccessTestITCase.java","status":"modified","additions":21,"deletions":1,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAccessTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAccessTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FAccessTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -20,31 +20,51 @@ public class AccessTestITCase extends AbstractTest {\n     @Test\n     public void clickAround() {\n         selenium.click(\"css=img[alt=\\\"Schema\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='user']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='user']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='user']/ul/li[3]/a/span\");\n+\n         selenium.click(\"link=Role\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='role']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='role']/ul/li/a/span\");\n         selenium.click(\"//div[@id='role']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='role']/ul/li[3]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='membership']\\\");\",\n+                \"30000\");\n+\n         selenium.click(\"//div[@id='membership']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='membership']/ul/li[3]/a/span\");\n+\n         selenium.click(\"css=img[alt=\\\"Users\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n         selenium.click(\"link=Search\");\n+\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n+\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n+\n         selenium.click(\"css=img[alt=\\\"TODO\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n+\n         selenium.click(\"css=img[alt=\\\"Reports\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n+\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n+\n         selenium.click(\"css=img[alt=\\\"Tasks\\\"]\");\n         selenium.waitForPageToLoad(\"30000\");\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");"},{"sha":"388753ce924bf9931fdeac204db258740cd06171","filename":"console/src/test/java/org/syncope/console/ConfigurationTestITCase.java","status":"modified","additions":77,"deletions":36,"changes":113,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,95 +19,136 @@ public class ConfigurationTestITCase extends AbstractTest {\n \n     @Test\n     public void browseCreateModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//a[contains(text(),'Create new configuration')]\");\n-        assertTrue(selenium.isElementPresent(\"//input[@name='key:textField']\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//input[@name='key:textField']\\\");\",\n+                \"30000\");\n+\n         selenium.type(\"name=key:textField\", \"test1\");\n         selenium.type(\"name=value:textField\", \"value1\");\n         selenium.click(\"name=apply\");\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n     public void browseEditModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//td[3]/span/a\");\n-        assertTrue(selenium.isElementPresent(\"//input[@name='key:textField']\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//tr/td[3]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//input[@name='key:textField']\\\");\",\n+                \"30000\");\n+\n         assertEquals(\"connid.bundles.directory\",\n                 selenium.getAttribute(\"//input[@name='key:textField']@value\"));\n+\n         selenium.click(\"css=a.w_close\");\n \n     }\n \n     @Test\n     public void browsePasswordPolicy() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[3]/ul/li[2]/a\");\n         selenium.click(\"//div[3]/div[2]/span/div/a\");\n \n-        assertTrue(selenium.isElementPresent(\"//input[@name='id:textField']\"));\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//input[@name='id:textField']\\\");\",\n+                \"30000\");\n+\n         selenium.type(\"name=description:textField\", \"new description\");\n         selenium.click(\"//div[2]/form/div[3]/input\");\n-        assertTrue(selenium.isTextPresent(\"new description\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"new description\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n     public void browseAccountPolicy() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[3]/ul/li[3]/a\");\n         selenium.click(\"//div[3]/div[3]/span/div/a\");\n \n-        assertTrue(selenium.isElementPresent(\"//input[@name='id:textField']\"));\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//input[@name='id:textField']\\\");\",\n+                \"30000\");\n+\n         selenium.type(\"name=description:textField\", \"new description\");\n         selenium.click(\"//div[2]/form/div[3]/input\");\n-        assertTrue(selenium.isTextPresent(\"new description\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"new description\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n     public void browseWorkflowDef() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[6]/a/span\");\n-        assertTrue(selenium.isElementPresent(\"//*[@id=\\\"workflowDefArea\\\"]\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//*[@id='workflowDefArea']\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n     public void delete() {\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//tr[7]/td[4]/span/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//tr[7]/td[3]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n-        try {\n-            Thread.sleep(1000);\n-        } catch (InterruptedException e) {\n-        }\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n+\n+        selenium.waitForCondition(\"selenium.isTextPresent(\"\n+                + \"\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n     public void setLogLevel() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Configuration\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[7]/a/span\");\n+\n         selenium.select(\n-                \"//div[3]/div[7]/div/span/table/tbody/tr/td[2]/select\", \"label=ERROR\");\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n+                \"//div[3]/div[7]/div/span/table/tbody/tr/td[2]/select\",\n+                \"label=ERROR\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n     }\n }"},{"sha":"2df6ea1a5421486e0ed96d569b69b9f617bc88ae","filename":"console/src/test/java/org/syncope/console/ConnInstanceTestITCase.java","status":"modified","additions":36,"deletions":51,"changes":87,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FConnInstanceTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,84 +19,69 @@ public class ConnInstanceTestITCase extends AbstractTest {\n \n     @Test\n     public void browseCreateModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[3]/div[2]/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//input[@name='version:textField']\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//input[@name='version:textField']\\\");\",\n+                \"30000\");\n \n         selenium.select(\"//select[@name='bundle:dropDownChoiceField']\",\n-                \"label=org.connid.bundles.soap 1.1\");\n+                \"label=org.connid.bundles.soap 1.2\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//form/div[@id='tabs']/ul/li[1]/a/span\");\n+\n         assertTrue(selenium.isElementPresent(\n                 \"//form/div[2]/div/div/div[4]/div[2]\"));\n+\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void browseEditModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//tr[4]/td[6]/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//input[@name='version:textField']\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//div[3]/ul/li[2]/a\");\n+        selenium.click(\"//tr[4]/td[6]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//input[@name='version:textField']\\\");\",\n+                \"30000\");\n \n         assertEquals(\"ConnInstance103\", selenium.getAttribute(\n                 \"//input[@name='displayName:textField']/@value\"));\n-        assertEquals(\"org.connid.bundles.soap#1.1\", selenium.getSelectedValue(\n+\n+        assertEquals(\"org.connid.bundles.soap#1.2\", selenium.getSelectedValue(\n                 \"//select[@name='bundle:dropDownChoiceField']\"));\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void delete() {\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[3]/ul/li[2]/a\");\n-        selenium.click(\"//tr[4]/td[7]/span/a\");\n+        selenium.click(\"//tr[4]/td[6]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n-        try {\n-            Thread.sleep(1000);\n-        } catch (InterruptedException e) {\n-        }\n-        \n-        assertTrue(selenium.isTextPresent(\n-                \"Operation forbidden:the connector you're trying to delete is\"\n-                + \" connected to a Resource\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\"\n+                + \"\\\"Error occurred during the requested operation\\\");\",\n+                \"10000\");\n     }\n }"},{"sha":"29332d98f0f41655f520e0a210d6bd80ff05a6ba","filename":"console/src/test/java/org/syncope/console/EditProfileTestITCase.java","status":"modified","additions":7,"deletions":32,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FEditProfileTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -34,29 +34,17 @@ public void selfRegistration() {\n \n         selenium.click(\"//div/span/span/a\");\n \n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//span[contains(text(),'Attributes')]\\\");\",\n+                \"30000\");\n \n         selenium.click(\"css=a.w_close\");\n \n         // only to have some \"Logout\" availabe for @After\n         selenium.type(\"name=userId\", \"user1\");\n         selenium.type(\"name=password\", \"password\");\n         selenium.click(\"name=:submit\");\n+\n         selenium.waitForPageToLoad(\"30000\");\n     }\n \n@@ -76,22 +64,9 @@ public void editUserProfile() {\n         selenium.click(\"id=username\");\n         selenium.click(\"//span[@id='editProfile']/a\");\n \n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//span[contains(text(),'Attributes')]\\\");\",\n+                \"30000\");\n \n         assertTrue(selenium.isElementPresent(\"//input[@value='user1']\"));\n "},{"sha":"0a675789f8414c837fc90bdb6d585fdadbda651b","filename":"console/src/test/java/org/syncope/console/ResourceTestITCase.java","status":"modified","additions":40,"deletions":82,"changes":122,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -18,115 +18,73 @@\n public class ResourceTestITCase extends AbstractTest {\n \n     @Test\n-    @SuppressWarnings(\"SleepWhileHoldingLock\")\n     public void browseCreateModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[3]/div/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//form/div[2]/div/div/div/div/label[text()='Name']\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/div/div/div/label[text()='Name']\\\");\",\n+                \"30000\");\n \n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n-    @SuppressWarnings(\"SleepWhileHoldingLock\")\n     public void browseEditModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//td[4]/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//form/div[2]/div/div/div/div/label[text()='Name']\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//td[4]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/div/div/div/label[text()='Name']\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//li[2]/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\"//tbody/tr\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//tbody/tr\\\");\",\n+                \"30000\");\n+\n         selenium.click(\"//tbody/tr[2]/td/input\");\n+        \n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n+\n         selenium.click(\"name=apply\");\n     }\n \n     @Test\n     public void delete() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//tr[3]/td[5]/span/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//tr[3]/td[4]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n     }\n \n     @Test\n-    @SuppressWarnings(\"SleepWhileHoldingLock\")\n     public void checkSecurityTab() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Resources\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//td[4]/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//form/div[2]/div/div/div/div/label[text()='Name']\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\"//td[4]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/div/div/div/label[text()='Name']\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//li[4]/a\");\n \n@@ -135,7 +93,7 @@ public void checkSecurityTab() {\n         selenium.click(\"//li[1]/a\");\n         selenium.click(\"//li[2]/a\");\n         selenium.click(\"//li[3]/a\");\n-        \n+\n         selenium.click(\"css=a.w_close\");\n     }\n }"},{"sha":"a6473faa3bba6ae239030cfb238a6fd4ceb2aac1","filename":"console/src/test/java/org/syncope/console/RoleTestITCase.java","status":"modified","additions":117,"deletions":219,"changes":336,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FRoleTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FRoleTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FRoleTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,306 +19,204 @@ public class RoleTestITCase extends AbstractTest {\n \n     @Test\n     public void createRootNodeModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[3]/span/div/div/table\"\n-                + \"/tbody/tr/td[2]/table/tbody/tr/td/img\");\n+                + \"/tbody/tr/td[2]/table/tbody/tr/td[2]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[3]/span[2]/span/div/p/span/span/a\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[3]/span[2]/span/div/p/span/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//span[contains(text(),'Attributes')]\\\");\",\n+                \"30000\");\n \n         selenium.selectFrame(\"relative=up\");\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void browseCreateModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n+\n         selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/\"\n-                + \"table/tbody/tr/td/a[1]\");\n-\n-        selenium.click(\"//div[3]/span[2]/span/span/div/p/span/span/a[1]/\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+                + \"table/tbody/tr/td[2]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[3]/span[2]/span/span/div/p/span[2]/span/a\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\"//div[3]/span[2]/span/span/div/p/span[2]/span/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//iframe\\\");\", \"30000\");\n+\n+        selenium.selectFrame(\"relative=up\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[2]/form/div[2]/ul/li[1]/a/span\\\");\", \"30000\");\n \n         selenium.click(\"//div[2]/form/div[2]/ul/li[1]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[2]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[3]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[4]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[5]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[6]/a/span\");\n-        selenium.selectFrame(\"relative=up\");\n+\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void browseEditModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n+\n         selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/\"\n-                + \"table/tbody/tr/td/a[1]\");\n+                + \"table/tbody/tr/td[2]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[3]/span[2]/span/span/div/p/span[2]/span/a[2]\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[3]/span[2]/span/span/div/p/span[2]/span/a[2]\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//iframe\\\");\", \"30000\");\n+\n+        selenium.selectFrame(\"relative=up\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//div[2]/form/div[2]/ul/li[1]/a/span\\\");\", \"30000\");\n \n         selenium.click(\"//div[2]/form/div[2]/ul/li[1]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[2]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[3]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[4]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[5]/a/span\");\n         selenium.click(\"//div[2]/form/div[2]/ul/li[6]/a/span\");\n-        selenium.selectFrame(\"relative=up\");\n+\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void checkSecurityTab() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/\"\n-                + \"td[4]/table/tbody/tr/td[2]/a\");\n \n-        selenium.click(\"//div[3]/span[2]/span/span/div/p/span[2]/span/a[2]\");\n-\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n \n-        selenium.click(\"//div[2]/form/div[2]/ul/li[6]/a/span\");\n+        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/\"\n+                + \"table/tbody/tr/td[2]/a\");\n \n-        assertTrue(selenium.isElementPresent(\"//div[2]/form/div[2]/div/div[6]/\"\n-                + \"span/div/div[2]/div/label\"));\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[6]/a\\\");\",\n+                \"30000\");\n \n-        selenium.click(\"//div[2]/form/div[2]/ul/li[1]/a/span\");\n-        selenium.click(\"//div[2]/form/div[2]/ul/li[2]/a/span\");\n-        selenium.click(\"//div[2]/form/div[2]/ul/li[3]/a/span\");\n-        selenium.click(\"//div[2]/form/div[2]/ul/li[4]/a/span\");\n-        selenium.click(\"//div[2]/form/div[2]/ul/li[5]/a/span\");\n+        selenium.click(\"//div/form/div[2]/ul/li[6]/a\");\n \n-        selenium.click(\"css=a.w_close\");\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/div[6]/span/div/div[2]/div/label\\\");\",\n+                \"30000\");\n     }\n \n     @Test\n-    public void displayRoleAttributes() {\n-        selenium.setSpeed(\"1000\");\n-\n+    public void browseUserEditModal() {\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/\"\n-                + \"table/tbody/tr/td/a[1]\");\n-\n-        selenium.click(\"//div[3]/span[2]/span/span/div/p/span/span/a[1]/\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[1]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[2]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[3]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[4]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[5]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[6]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[7]/span\");\n-            selenium.selectFrame(\"relative=up\");\n-            selenium.click(\"css=a.w_close\");\n-        }\n-    }\n \n-    @Test\n-    public void browseUserTable() {\n-        selenium.setSpeed(\"1000\");\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n \n-        selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//div[3]/span/div/div/table[3]/tbody/tr/td[4]/\"\n-                + \"table/tbody/tr/td/a[1]\");\n-\n-        selenium.click(\"//div[3]/span[2]/span/span/\"\n-                + \"div/form/div[2]/ul/li[7]/a/span\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\"//div[3]/span[2]/span/\"\n-                        + \"span/div/form/div[2]/div[2]/div/div/span/\"\n-                        + \"div/table/thead/tr/th/a/\"\n-                        + \"span[contains(text(),'Id')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[1]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[2]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[3]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[4]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[5]/span\");\n-            selenium.click(\"//div[3]/span[2]/\"\n-                    + \"span/span/div/form/div[2]/ul/li/a[6]/span\");\n-        }\n-    }\n+        selenium.click(\"//div[3]/span/div/div/table[2]/tbody/tr/td[3]/\"\n+                + \"table/tbody/tr/td[2]/a\");\n \n-    @Test\n-    public void browseUserEditModal() {\n-        selenium.setSpeed(\"1000\");\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[7]/a\\\");\",\n+                \"30000\");\n \n-        selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        try {\n-            Thread.sleep(3000);\n-        } catch (InterruptedException e) {\n-        }\n-        //Prende Root\n-        selenium.click(\"//div[3]/span/div/div/table[2]/tbody/\"\n-                + \"tr/td[3]/table/tbody/tr/td[2]/a/span\");\n-        try {\n-            Thread.sleep(5000);\n-        } catch (InterruptedException e) {\n-        }\n-        selenium.click(\"//div[3]/span[2]/span/\"\n-                + \"span/div/form/div[2]/ul/li[7]/a/span\");\n+        selenium.click(\"//div/form/div[2]/ul/li[7]/a\");\n \n         selenium.click(\"//input[@name=\\\"userListContainer:search\\\"]\");\n \n-        selenium.click(\"//div[3]/span[2]/span/span/div/form/div\"\n-                + \"[2]/div[2]/div/div/span/div/table/tbody/tr/td[4]/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span/div/form/div[2]/div/span/div/div/\"\n-                        + \"div[contains(text(),'Username')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-        }\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//table/tbody/tr/td[4]/span/span[7]/a\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\n+                \"//div[3]/span[2]/span/span/div/form/div\"\n+                + \"[2]/div[2]/div/div/span/div/table/tbody/tr/td[4]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/span/div/div/div[contains(text(),'Username')]\\\");\",\n+                \"30000\");\n+\n         selenium.selectFrame(\"relative=up\");\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void deleteUser() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        //Remove user4\n-        selenium.click(\"//div[3]/span/div/div/table[10]/tbody/\"\n-                + \"tr/td[6]/table/tbody/tr/td[2]/a/span\");\n \n-        selenium.click(\"//div[3]/span[2]/span/\"\n-                + \"span/div/form/div[2]/ul/li[7]/a/span\");\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\"//div[3]/span/div/div/table[2]/tbody/tr/td[3]/\"\n+                + \"table/tbody/tr/td[2]/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div/form/div[2]/ul/li[7]/a\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\"//div/form/div[2]/ul/li[7]/a\");\n \n         selenium.click(\"//input[@name=\\\"userListContainer:search\\\"]\");\n \n-        selenium.click(\"//div[3]/span[2]/span/span/div/form/div[2]/\"\n-                + \"div[2]/div/div/span/div/table/tbody/tr/td[5]/span/a\");\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//span[8]/a\\\");\", \"30000\");\n+\n+        selenium.click(\n+                \"//div[3]/span[2]/span/span/div/form/div\"\n+                + \"[2]/div[2]/div/div/span/div/table/tbody/tr[2]/td[4]/span/span[8]/a\");\n \n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n     }\n \n     @Test\n     public void deleteRole() {\n-        selenium.setSpeed(\"1000\");\n         selenium.click(\"css=img[alt=\\\"Roles\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n \n-        //Remove managing director\n-        selenium.click(\"//div[3]/span/div/div/table[10]/tbody\"\n-                + \"/tr/td[6]/table/tbody/tr/td[2]/a\");\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='navigationPane']\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\"//div[3]/span/div/div/table[10]/tbody/tr/td[6]/\"\n+                + \"table/tbody/tr/td[2]/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div/p/span[2]/span/a[3]\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[3]/span[2]/span/span/div/p/span[2]/span/a[3]\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n     }"},{"sha":"68c24b179b44766d1abc8034c24b227edc318458","filename":"console/src/test/java/org/syncope/console/SchemaTestITCase.java","status":"modified","additions":21,"deletions":37,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSchemaTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSchemaTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSchemaTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,58 +19,42 @@ public class SchemaTestITCase extends AbstractTest {\n \n     @Test\n     public void create() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Schema\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//div[3]/div/div/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//*[@id=\\\"_wicket_window_0\\\"]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n \n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\"//*[@name=\\\"name:textField\\\"]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//*[@id='_wicket_window_0']\\\");\",\n+                \"30000\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//*[@name='name:textField']\\\");\",\n+                \"30000\");\n \n         selenium.select(\"name=type:dropDownChoiceField\", \"value=0\");\n         selenium.type(\"name=name:textField\", \"newschema\");\n         selenium.click(\"name=apply\");\n-        assertTrue(selenium.isTextPresent(\"newschema\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"newschema\\\");\", \"30000\");\n     }\n \n     @Test\n     public void delete() {\n         selenium.click(\"css=img[alt=\\\"Schema\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n         selenium.click(\"//div[@id='membership']/ul/li[3]/a/span\");\n-        selenium.click(\"//div[3]/div[3]/div/span/table/tbody/tr/td[3]/span/a\");\n+\n+        selenium.click(\"//table/tbody/tr/td[3]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n     }"},{"sha":"d8c1e05a208638624267402e7cd23f30faf53a28","filename":"console/src/test/java/org/syncope/console/TaskTestITCase.java","status":"modified","additions":26,"deletions":35,"changes":61,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FTaskTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FTaskTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FTaskTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -19,54 +19,45 @@ public class TaskTestITCase extends AbstractTest {\n \n     @Test\n     public void execute() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Tasks\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[4]/a\");\n-        selenium.click(\"//div[3]/div[4]/span/div/span/\"\n-                + \"table/tbody/tr/td[7]/span/a\");\n-        try {\n-            Thread.sleep(3000);\n-        } catch (InterruptedException e) {\n-        }\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n-        selenium.click(\"//div[3]/div[4]/span/div/span/\"\n-                + \"table/tbody/tr/td[6]/span/a\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\"//form/div[2]/div/div/span/\"\n-                        + \"div/div/div[2]/span/input\")) {\n+        selenium.click(\"//table/tbody/tr/td[7]/span/span[3]/a\");\n \n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+        selenium.waitForCondition(\"selenium.isTextPresent(\"\n+                + \"\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n+\n+        selenium.click(\"//table/tbody/tr/td[7]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//form/div[2]/div/div/span/div/div/div[2]/span/input\\\");\",\n+                \"30000\");\n \n         assertTrue(selenium.isElementPresent(\n-                \"//form/div[2]/div[3]/span/table/tbody/tr/td\"));\n+                \"//form/div[2]/div[2]/span/table/tbody/tr/td\"));\n+\n         selenium.click(\"css=a.w_close\");\n     }\n \n     @Test\n     public void delete() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Tasks\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n-        selenium.click(\"//div[3]/div[3]/span/div/span/\"\n-                + \"table/tbody/tr/td[10]/span/a\");\n+        selenium.click(\"//table/tbody/tr[4]/td[7]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n+\n+        selenium.waitForCondition(\n+                \"selenium.isTextPresent(\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n     }\n }"},{"sha":"28d2aa6d097e0782cb90cf69b68f43962d32261b","filename":"console/src/test/java/org/syncope/console/UserTestITCase.java","status":"modified","additions":45,"deletions":58,"changes":103,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -20,27 +20,16 @@ public class UserTestITCase extends AbstractTest {\n     @Test\n     @SuppressWarnings(\"SleepWhileHoldingLock\")\n     public void browseCreateModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Users\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"//a[contains(text(),'Create new user')]\");\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//span[contains(text(),'Attributes')]\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n@@ -53,32 +42,22 @@ public void browseCreateModal() {\n     @Test\n     @SuppressWarnings(\"SleepWhileHoldingLock\")\n     public void browseEditModal() {\n-        selenium.setSpeed(\"1000\");\n-\n         selenium.click(\"css=img[alt=\\\"Users\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         //Edit user3\n-        selenium.click(\"//*[@id=\\\"users-contain\\\"]//*[span=3]/../td[4]/span/a\");\n-\n-        for (int second = 0;; second++) {\n-            if (second >= 60) {\n-                fail(\"timeout\");\n-            }\n-            try {\n-                if (selenium.isElementPresent(\n-                        \"//span[contains(text(),'Attributes')]\")) {\n-                    break;\n-                }\n-            } catch (Exception e) {\n-            }\n-            try {\n-                Thread.sleep(1000);\n-            } catch (InterruptedException e) {\n-            }\n-        }\n-\n-        assertTrue(selenium.isElementPresent(\"//input[@value='testUsername']\"));\n-        assertTrue(selenium.isElementPresent(\"//input[@value='Doe']\"));\n+        selenium.click(\n+                \"//*[@id=\\\"users-contain\\\"]//*[span=3]/../td[4]/span/span[7]/a\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//input[@value='testUsername']\\\");\",\n+                \"30000\");\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//input[@value='Doe']\\\");\",\n+                \"30000\");\n \n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n@@ -91,35 +70,43 @@ public void browseEditModal() {\n     @Test\n     public void search() {\n         selenium.click(\"css=img[alt=\\\"Users\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n         selenium.click(\"link=Search\");\n         selenium.select(\"//td[3]/select\", \"label=MEMBERSHIP\");\n-        try {\n-            Thread.sleep(1000);\n-        } catch (InterruptedException e) {\n-        }\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//td[4]/select[option='8 otherchild']\\\");\",\n+                \"30000\");\n+\n         selenium.select(\"//td[4]/select\", \"label=8 otherchild\");\n         selenium.click(\"name=search\");\n-        assertEquals(\"2\", selenium.getText(\n-                \"//*[@id=\\\"users-contain\\\"]//*[span=2]\"));\n+\n+        selenium.waitForCondition(\"selenium.isElementPresent(\"\n+                + \"\\\"//*[@id='users-contain']//*[span=2]\\\");\",\n+                \"30000\");\n     }\n-    \n \n     @Test\n     public void delete() {\n         selenium.click(\"css=img[alt=\\\"Users\\\"]\");\n-        selenium.waitForPageToLoad(\"30000\");\n-        selenium.click(\"//*[@id=\\\"users-contain\\\"]//*[span=1]/../td[5]/span/a\");\n+\n+        selenium.waitForCondition(\n+                \"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n+\n+        selenium.click(\n+                \"//*[@id=\\\"users-contain\\\"]//*[span=1]/../td[4]/span/span[8]/a\");\n+\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n-        try {\n-            Thread.sleep(2000);\n-        } catch (InterruptedException e) {\n-        }\n \n         // it depends on the execution order of tests: resources\n         // 'ws-target-resource-delete' could have been deleted from\n         // ResourceTestITCase#delete\n-        assertTrue(selenium.isTextPresent(\"Operation executed successfully\"));\n+        selenium.waitForCondition(\"selenium.isTextPresent(\"\n+                + \"\\\"Operation executed successfully\\\");\",\n+                \"30000\");\n     }\n }"},{"sha":"1c59b1d28fa039c5da8517c5a12e179e75418a91","filename":"core/src/main/java/org/syncope/core/rest/controller/UserController.java","status":"modified","additions":39,"deletions":10,"changes":49,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FUserController.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -316,7 +316,9 @@ public UserTO activate(\n             @RequestBody final UserTO userTO,\n             @RequestParam(required = false) final Set<String> resourceNames,\n             @RequestParam(required = false, defaultValue = \"true\")\n-            final Boolean performLocal)\n+            final Boolean performLocally,\n+            @RequestParam(required = false, defaultValue = \"true\")\n+            final Boolean performRemotely)\n             throws WorkflowException, NotFoundException,\n             UnauthorizedRoleException, PropagationException {\n \n@@ -328,7 +330,13 @@ public UserTO activate(\n             throw new NotFoundException(\"User \" + userTO.getId());\n         }\n \n-        return setStatus(user, resourceNames, performLocal, true, \"activate\");\n+        return setStatus(\n+                user,\n+                resourceNames,\n+                performLocally,\n+                performRemotely,\n+                true,\n+                \"activate\");\n     }\n \n     @PreAuthorize(\"hasRole('USER_UPDATE')\")\n@@ -339,7 +347,9 @@ public UserTO suspend(\n             @PathVariable(\"userId\") final Long userId,\n             @RequestParam(required = false) final Set<String> resourceNames,\n             @RequestParam(required = false, defaultValue = \"true\")\n-            final Boolean performLocal)\n+            final Boolean performLocally,\n+            @RequestParam(required = false, defaultValue = \"true\")\n+            final Boolean performRemotely)\n             throws NotFoundException, WorkflowException,\n             UnauthorizedRoleException, PropagationException {\n \n@@ -351,7 +361,13 @@ public UserTO suspend(\n             throw new NotFoundException(\"User \" + userId);\n         }\n \n-        return setStatus(user, resourceNames, performLocal, false, \"suspend\");\n+        return setStatus(\n+                user,\n+                resourceNames,\n+                performLocally,\n+                performRemotely,\n+                false,\n+                \"suspend\");\n     }\n \n     @PreAuthorize(\"hasRole('USER_UPDATE')\")\n@@ -361,7 +377,9 @@ public UserTO suspend(\n     public UserTO reactivate(final @PathVariable(\"userId\") Long userId,\n             @RequestParam(required = false) final Set<String> resourceNames,\n             @RequestParam(required = false, defaultValue = \"true\")\n-            final Boolean performLocal)\n+            final Boolean performLocally,\n+            @RequestParam(required = false, defaultValue = \"true\")\n+            final Boolean performRemotely)\n             throws NotFoundException, WorkflowException,\n             UnauthorizedRoleException, PropagationException {\n \n@@ -372,7 +390,13 @@ public UserTO reactivate(final @PathVariable(\"userId\") Long userId,\n             throw new NotFoundException(\"User \" + userId);\n         }\n \n-        return setStatus(user, resourceNames, performLocal, true, \"reactivate\");\n+        return setStatus(\n+                user,\n+                resourceNames,\n+                performLocally,\n+                performRemotely,\n+                true,\n+                \"reactivate\");\n     }\n \n     @PreAuthorize(\"hasRole('USER_DELETE')\")\n@@ -492,7 +516,8 @@ public UserTO submitForm(@RequestBody final WorkflowFormTO form)\n     private UserTO setStatus(\n             final SyncopeUser user,\n             final Set<String> resourceNames,\n-            final boolean performLocal,\n+            final boolean performLocally,\n+            final boolean performRemotely,\n             final boolean status,\n             final String performedTask)\n             throws NotFoundException, WorkflowException,\n@@ -503,7 +528,7 @@ private UserTO setStatus(\n         List<PropagationTask> tasks = null;\n         WorkflowResult<Long> updated = null;\n \n-        if (performLocal) {\n+        if (performLocally) {\n             // perform local changes\n \n             if (\"suspend\".equals(performedTask)) {\n@@ -520,9 +545,13 @@ private UserTO setStatus(\n \n         // Resources to exclude from propagation.\n         Set<String> resources = new HashSet<String>();\n-        if (resourceNames != null) {\n+        if (!performRemotely) {\n             resources.addAll(user.getResourceNames());\n-            resources.removeAll(resourceNames);\n+        } else {\n+            if (resourceNames != null) {\n+                resources.addAll(user.getResourceNames());\n+                resources.removeAll(resourceNames);\n+            }\n         }\n \n         tasks = propagationManager.getUpdateTaskIds(user, status, resources);"},{"sha":"e505fc9b9ea0f5f97a5fcc95c42178e8c8e29064","filename":"core/src/test/java/org/syncope/core/rest/UserTestITCase.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0fd3aa1c4428319f2ace50c68b051b96c4b9260f/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FUserTestITCase.java?ref=0fd3aa1c4428319f2ace50c68b051b96c4b9260f","patch":"@@ -1387,7 +1387,7 @@ public void suspendReactivateOnResource() {\n \n         String query = \"?resourceNames=\" + dbTable.getName()\n                 + \"&resourceNames=\" + ldap.getName()\n-                + \"&performLocal=true\"; // check also performLocal\n+                + \"&performLocally=true\"; // check also performLocally\n \n         userTO = restTemplate.getForObject(\n                 BASE_URL + \"user/suspend/\" + userTO.getId() + query,\n@@ -1416,7 +1416,7 @@ public void suspendReactivateOnResource() {\n         assertNotNull(connObjectTO);\n \n         query = \"?resourceNames=\" + ldap.getName()\n-                + \"&performLocal=false\"; // check also performLocal\n+                + \"&performLocally=false\"; // check also performLocally\n \n         userTO = restTemplate.getForObject(\n                 BASE_URL + \"user/reactivate/\" + userTO.getId() + query,\n@@ -1433,7 +1433,7 @@ public void suspendReactivateOnResource() {\n                 get(OperationalAttributes.ENABLE_NAME).getValues().get(0)));\n \n         query = \"?resourceNames=\" + dbTable.getName()\n-                + \"&performLocal=true\"; // check also performLocal\n+                + \"&performLocally=true\"; // check also performLocally\n \n         userTO = restTemplate.getForObject(\n                 BASE_URL + \"user/reactivate/\" + userTO.getId() + query,"}]}