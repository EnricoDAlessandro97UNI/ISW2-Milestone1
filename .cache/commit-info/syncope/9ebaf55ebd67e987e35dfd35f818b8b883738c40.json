{"sha":"9ebaf55ebd67e987e35dfd35f818b8b883738c40","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjllYmFmNTVlYmQ2N2U5ODdlMzVkZmQzNWY4MThiOGI4ODM3MzhjNDA=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-10T16:06:06Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-10T16:06:06Z"},"message":"Resources selector in UserModalPage changed in Wicket palette component and small fixes\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246474 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0a0e4738081b835547a5c2f298fc9164f2f7f1af","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0a0e4738081b835547a5c2f298fc9164f2f7f1af"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/9ebaf55ebd67e987e35dfd35f818b8b883738c40","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9ebaf55ebd67e987e35dfd35f818b8b883738c40","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9ebaf55ebd67e987e35dfd35f818b8b883738c40","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9ebaf55ebd67e987e35dfd35f818b8b883738c40/comments","author":null,"committer":null,"parents":[{"sha":"fdbf7c5f393003b166d5778d6121b6b26b3d3af3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fdbf7c5f393003b166d5778d6121b6b26b3d3af3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fdbf7c5f393003b166d5778d6121b6b26b3d3af3"}],"stats":{"total":357,"additions":176,"deletions":181},"files":[{"sha":"0be1e7063838d8d0bae02c7c060017a9e5353b8e","filename":"console/src/main/java/org/syncope/console/pages/Schema.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -256,7 +256,6 @@ protected void populateItem(final ListItem item) {\n \n                     @Override\n                     public void onClick(AjaxRequestTarget target) {\n-                        final SchemaTO schemaTO = (SchemaTO) item.getDefaultModelObject();\n \n                         editUserSchemaWin.setPageCreator(new ModalWindow.PageCreator() {\n "},{"sha":"954dc16525ad6910839635e9a879fdae8fab53f7","filename":"console/src/main/java/org/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -21,13 +21,15 @@\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.RadioChoice;\n import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.markup.html.panel.FeedbackPanel;\n import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.SchemaTO;\n import org.syncope.console.rest.SchemaRestClient;\n@@ -82,10 +84,11 @@ public SchemaModalPage(final BasePage basePage, final ModalWindow window,\n         conversionPattern = new TextField(\"conversionPattern\");\n \n         ArrayList<String> validatorsList = new ArrayList<String>();\n-        validatorsList.add(\"AlwaysTrueValidator\");\n-        validatorsList.add(\"EmailAddressValidator\");\n+        validatorsList.add(\"org.syncope.core.persistence.validation.AlwaysTrueValidator\");\n+        validatorsList.add(\"org.syncope.core.persistence.validation.EmailAddressValidator\");\n \n-        validatorClass = new DropDownChoice(\"validatorClass\",validatorsList);\n+        validatorClass = new DropDownChoice(\"validatorClass\",new PropertyModel(schema, \"validatorClass\")\n+                ,validatorsList);\n \n         type = new DropDownChoice(\"type\",Arrays.asList(SchemaValueType.values()));\n         type.setRequired(true);"},{"sha":"d3c80e44294280576aa78f93dfba468206c51749","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":155,"deletions":173,"changes":328,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -22,6 +22,7 @@\n import java.text.ParseException;\n import java.text.SimpleDateFormat;\n import java.util.ArrayList;\n+import java.util.Collection;\n import java.util.Date;\n import java.util.HashMap;\n import java.util.HashSet;\n@@ -38,8 +39,10 @@\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n \n+import org.apache.wicket.extensions.markup.html.form.palette.Palette;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.basic.Label;\n+import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.PasswordTextField;\n import org.apache.wicket.markup.html.list.ListItem;\n@@ -52,6 +55,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n+import org.apache.wicket.model.util.ListModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.mod.AttributeMod;\n import org.syncope.client.mod.MembershipMod;\n@@ -74,7 +78,6 @@\n import org.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.syncope.console.wicket.markup.html.form.DateFieldPanel;\n-import org.syncope.console.wicket.markup.html.form.ListMultipleChoiceTransfer;\n import org.syncope.console.wicket.markup.html.tree.SyncopeRoleTree;\n import org.syncope.console.wicket.markup.html.tree.TreeModelBean;\n \n@@ -114,11 +117,12 @@ public class UserModalPage extends SyncopeModalPage {\n     public UserModalPage(final BasePage basePage, final ModalWindow window,\n             final UserTO userTO, final boolean createFlag) {\n \n-        if (!createFlag) \n+        if (!createFlag) {\n             cloneOldUserTO(userTO);\n+        }\n \n         setupRolesMap();\n-        \n+\n         schemaWrappers = new ArrayList<SchemaWrapper>();\n \n         add(createUserWin = new ModalWindow(\"membershipWin\"));\n@@ -148,166 +152,130 @@ protected void populateItem(ListItem item) {\n \n                 item.add(new ListView(\"fields\", schemaWrapper.getValues()) {\n \n-                Panel panel;\n+                    Panel panel;\n \n-                @Override\n-                protected void populateItem(final ListItem item) {\n+                    @Override\n+                    protected void populateItem(final ListItem item) {\n \n-                    if (schemaTO.getType().getClassName().equals(\"java.lang.String\")) {\n-                        panel = new AjaxTextFieldPanel(\"panel\", schemaTO.getName(), new Model() {\n+                        if (schemaTO.getType().getClassName().equals(\"java.lang.String\")) {\n+                            panel = new AjaxTextFieldPanel(\"panel\", schemaTO.getName(), new Model() {\n \n-                            @Override\n-                            public Serializable getObject() {\n-                                return (String) item.getModelObject();\n-                            }\n+                                @Override\n+                                public Serializable getObject() {\n+                                    return (String) item.getModelObject();\n+                                }\n \n-                            @Override\n-                            public void setObject(Serializable object) {\n-                                item.setModelObject((String) object);\n-                            }\n-                        }, schemaTO.isMandatory());\n-                    } else if (schemaTO.getType().getClassName().equals(\"java.lang.Boolean\")) {\n-                        panel = new AjaxCheckBoxPanel(\"panel\", schemaTO.getName(), new Model() {\n-\n-                            @Override\n-                            public Serializable getObject() {\n-                                return (String) item.getModelObject();\n-                                //return \"false\";\n-                            }\n+                                @Override\n+                                public void setObject(Serializable object) {\n+                                    item.setModelObject((String) object);\n+                                }\n+                            }, schemaTO.isMandatory());\n+                        } else if (schemaTO.getType().getClassName().equals(\"java.lang.Boolean\")) {\n+                            panel = new AjaxCheckBoxPanel(\"panel\", schemaTO.getName(), new Model() {\n+\n+                                @Override\n+                                public Serializable getObject() {\n+                                    return (String) item.getModelObject();\n+                                    //return \"false\";\n+                                }\n \n-                            @Override\n-                            public void setObject(Serializable object) {\n-                                Boolean val = (Boolean) object;\n-                                item.setModelObject(val.toString());\n-                            }\n-                        }, schemaTO.isMandatory());\n+                                @Override\n+                                public void setObject(Serializable object) {\n+                                    Boolean val = (Boolean) object;\n+                                    item.setModelObject(val.toString());\n+                                }\n+                            }, schemaTO.isMandatory());\n \n-                    } else if (schemaTO.getType().getClassName().equals(\"java.util.Date\")) {\n-                        panel = new DateFieldPanel(\"panel\", schemaTO.getName(),\n-                                new Model() {\n+                        } else if (schemaTO.getType().getClassName().equals(\"java.util.Date\")) {\n+                            panel = new DateFieldPanel(\"panel\", schemaTO.getName(),\n+                                    new Model() {\n \n-                                    @Override\n-                                    public Serializable getObject() {\n-                                        DateFormat formatter = new SimpleDateFormat(schemaTO.getConversionPattern());\n-                                        Date date = new Date();\n+                                        @Override\n+                                        public Serializable getObject() {\n+                                            DateFormat formatter = new SimpleDateFormat(schemaTO.getConversionPattern());\n+                                            Date date = new Date();\n \n-                                        try {\n-                                            String dateValue = (String) item.getModelObject();\n-                                            formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n+                                            try {\n+                                                String dateValue = (String) item.getModelObject();\n+                                                formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n \n-                                            if (!dateValue.equals(\"\")) {\n-                                                date = formatter.parse((String) item.getModelObject());\n+                                                if (!dateValue.equals(\"\")) {\n+                                                    date = formatter.parse((String) item.getModelObject());\n+                                                }\n+\n+                                            } catch (ParseException ex) {\n+                                                Logger.getLogger(UserModalPage.class.getName()).log(Level.SEVERE, null, ex);\n                                             }\n+                                            return date;\n+                                        }\n \n-                                        } catch (ParseException ex) {\n-                                            Logger.getLogger(UserModalPage.class.getName()).log(Level.SEVERE, null, ex);\n+                                        @Override\n+                                        public void setObject(Serializable object) {\n+                                            Date date = (Date) object;\n+                                            Format formatter = new SimpleDateFormat(schemaTO.getConversionPattern());\n+                                            String val = formatter.format(date);\n+                                            item.setModelObject(val);\n                                         }\n-                                        return date;\n-                                    }\n-\n-                                    @Override\n-                                    public void setObject(Serializable object) {\n-                                        Date date = (Date) object;\n-                                        Format formatter = new SimpleDateFormat(schemaTO.getConversionPattern());\n-                                        String val = formatter.format(date);\n-                                        item.setModelObject(val);\n-                                    }\n-                                }, schemaTO.isMandatory());\n+                                    }, schemaTO.isMandatory());\n+                        }\n+\n+                        item.add(panel);\n                     }\n+                });\n \n-                    item.add(panel);\n-                }\n-            });\n+                AjaxButton addButton = new AjaxButton(\"add\", new Model(getString(\"add\"))) {\n \n-            AjaxButton addButton = new AjaxButton(\"add\", new Model(getString(\"add\"))) {\n+                    @Override\n+                    protected void onSubmit(AjaxRequestTarget target, Form form) {\n+                        schemaWrapper.getValues().add(\"\");\n \n-                @Override\n-                protected void onSubmit(AjaxRequestTarget target, Form form) {\n-                    schemaWrapper.getValues().add(\"\");\n+                        target.addComponent(container);\n+                    }\n+                };\n \n-                    target.addComponent(container);\n-                }\n-            };\n+                AjaxButton dropButton = new AjaxButton(\"drop\", new Model(getString(\"drop\"))) {\n \n-            AjaxButton dropButton = new AjaxButton(\"drop\", new Model(getString(\"drop\"))) {\n+                    @Override\n+                    protected void onSubmit(AjaxRequestTarget target, Form form) {\n+                        //Drop the last component added\n+                        schemaWrapper.getValues().remove(schemaWrapper.getValues().size() - 1);\n \n-                @Override\n-                protected void onSubmit(AjaxRequestTarget target, Form form) {\n-                    //Drop the last component added\n-                    schemaWrapper.getValues().remove(schemaWrapper.getValues().size() - 1);\n+                        target.addComponent(container);\n+                    }\n+                };\n \n-                    target.addComponent(container);\n+                if (schemaTO.getType().getClassName().equals(\"java.lang.Boolean\")) {\n+                    addButton.setVisible(false);\n+                    dropButton.setVisible(false);\n                 }\n-            };\n \n-            if (schemaTO.getType().getClassName().equals(\"java.lang.Boolean\")) {\n-                addButton.setVisible(false);\n-                dropButton.setVisible(false);\n-            }\n+                addButton.setDefaultFormProcessing(false);\n+                addButton.setVisible(schemaTO.isMultivalue());\n \n-            addButton.setDefaultFormProcessing(false);\n-            addButton.setVisible(schemaTO.isMultivalue());\n+                dropButton.setDefaultFormProcessing(false);\n+                dropButton.setVisible(schemaTO.isMultivalue());\n \n-            dropButton.setDefaultFormProcessing(false);\n-            dropButton.setVisible(schemaTO.isMultivalue());\n+                if (schemaWrapper.getValues().size() == 1) {\n+                    dropButton.setVisible(false);\n+                }\n \n-            if (schemaWrapper.getValues().size() == 1) {\n-                dropButton.setVisible(false);\n+                item.add(addButton);\n+                item.add(dropButton);\n             }\n+        };\n \n-            item.add(addButton);\n-            item.add(dropButton);\n-        }\n-    };\n-\n-    userForm.add(userAttributesView);\n-\n-        final ListMultipleChoiceTransfer resourcesTransfer =\n-                new ListMultipleChoiceTransfer(\"resourcesChoiceTransfer\",\n-                getString(\"firstResourcesList\"), getString(\"secondResourcesList\")) {\n-\n-                    @Override\n-                    public List<String> setupOriginals() {\n-                        //Originals:user's resources\n-                        List<String> resources = new ArrayList<String>();\n-\n-                        for (String resourceName : userTO.getResources()) {\n-                            resources.add(resourceName);\n-                        }\n-\n-                        return resources;\n-\n-                    }\n-\n-                    @Override\n-                    public List<String> setupDestinations() {\n-                        //Destinations:available resources\n-                        List<String> resources = new ArrayList<String>();\n-\n-                        ResourcesRestClient resourcesRestClient = (ResourcesRestClient) ((SyncopeApplication) Application.get()).getApplicationContext().getBean(\"resourcesRestClient\");\n+        userForm.add(userAttributesView);\n \n-                        ResourceTOs resourcesTos = resourcesRestClient.getAllResources();\n+        ListModel<ResourceTO> originals = new ListModel<ResourceTO>();\n+        originals.setObject(getOriginals(userTO));\n \n-                        if (userTO.getResources().size() == 0) {\n-                            for (ResourceTO resourceTO : resourcesTos) {\n-                                resources.add(resourceTO.getName());\n-                            }\n+        ListModel<ResourceTO> destinations = new ListModel<ResourceTO>();\n+        destinations.setObject(getDestinations(userTO));\n \n-                        } else {\n-\n-                            for (String resource : userTO.getResources()) {\n-                                for (ResourceTO resourceTO : resourcesTos) {\n-                                    if (!resource.equals(resourceTO.getName())) {\n-                                        resources.add(resourceTO.getName());\n-                                    }\n-                                }\n-                            }\n-                        }\n-                        return resources;\n-                    }\n-                };\n+        ChoiceRenderer paletteRenderer = new ChoiceRenderer(\"name\", \"name\");\n+        final Palette resourcesPalette = new Palette(\"resourcesPalette\", originals, destinations, paletteRenderer, 8, false);\n \n-        userForm.add(resourcesTransfer);\n+        userForm.add(resourcesPalette);\n \n         container = new WebMarkupContainer(\"container\");\n         container.add(userAttributesView);\n@@ -330,8 +298,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                 boolean res = false;\n \n                 try {\n-\n-                    userTO.setResources(getResourcesSet(resourcesTransfer.getFinalSelections()));\n+                    userTO.setResources(getResourcesSet(resourcesPalette.getModelCollection()));\n                     userTO.setAttributes(getUserAttributesSet());\n                     userTO.setMemberships(getMembershipsSet());\n \n@@ -347,7 +314,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n \n                     }\n \n-                    Users callerPage = (Users)basePage;\n+                    Users callerPage = (Users) basePage;\n                     callerPage.setOperationResult(true);\n \n                     window.close(target);\n@@ -425,7 +392,7 @@ protected void populateItem(final ListItem item) {\n                         (MembershipTO) item.getDefaultModelObject();\n \n                 item.add(new Label(\"roleId\", new Model(membershipTO.getRole())));\n-                item.add(new Label(\"roleName\", new Model((String)rolesMap.get(membershipTO.getRole()))));\n+                item.add(new Label(\"roleName\", new Model((String) rolesMap.get(membershipTO.getRole()))));\n \n                 AjaxLink editLink = new AjaxLink(\"editLink\") {\n \n@@ -471,6 +438,51 @@ public void onClick(AjaxRequestTarget target) {\n         add(userForm);\n     }\n \n+    /**\n+     * Originals : user's resources\n+     * @param userTO\n+     * @return\n+     */\n+    public List<ResourceTO> getOriginals(UserTO userTO) {\n+        List<ResourceTO> resources = new ArrayList<ResourceTO>();\n+        ResourceTO clusterableResourceTO;\n+\n+        for (String resourceName : userTO.getResources()) {\n+            clusterableResourceTO = new ResourceTO();\n+            clusterableResourceTO.setName(resourceName);\n+            resources.add(clusterableResourceTO);\n+        }\n+        return resources;\n+    }\n+\n+    /**\n+     * Destinations : available resources\n+     * @param userTO\n+     * @return\n+     */\n+    public List<ResourceTO> getDestinations(UserTO userTO) {\n+\n+        List<ResourceTO> resources = new ArrayList<ResourceTO>();\n+\n+        ResourcesRestClient resourcesRestClient = (ResourcesRestClient) ((SyncopeApplication) Application.get()).getApplicationContext().getBean(\"resourcesRestClient\");\n+\n+        ResourceTOs resourcesTos = resourcesRestClient.getAllResources();\n+\n+        if (userTO.getResources().size() == 0) {\n+            for (ResourceTO resourceTO : resourcesTos) \n+                resources.add(resourceTO);\n+        } else {\n+\n+            for (String resource : userTO.getResources()) {\n+                for (ResourceTO resourceTO : resourcesTos) {\n+                    if (!resource.equals(resourceTO.getName())) \n+                        resources.add(resourceTO);\n+                }\n+            }\n+        }\n+        return resources;\n+    }\n+\n     /**\n      * Create a copy of old userTO object.\n      * @param userTO\n@@ -491,7 +503,6 @@ public void cloneOldUserTO(UserTO userTO) {\n             membership.setAttributes(membershipTO.getAttributes());\n             oldUser.getMemberships().add(membership);\n         }\n-\n     }\n \n     /**\n@@ -559,9 +570,9 @@ public void setupSchemaWrappers(boolean create, UserTO userTO) {\n                 if (!found) {\n                     schemaWrapper = new SchemaWrapper(schema);\n                     schemaWrappers.add(schemaWrapper);\n-                }\n-                else\n+                } else {\n                     found = false;\n+                }\n             }\n         }\n     }\n@@ -630,11 +641,11 @@ public Set<MembershipTO> getMembershipsSet() {\n      * Covert a resources List<String> to Set<String>.\n      * @return Set<String>\n      */\n-    public Set<String> getResourcesSet(List<String> resourcesList) {\n+    public Set<String> getResourcesSet(Collection<ResourceTO> resourcesList) {\n         Set<String> resourcesSet = new HashSet<String>();\n \n-        for (String resource : resourcesList) {\n-            resourcesSet.add(resource);\n+       for (ResourceTO resourceTO : resourcesList) {\n+            resourcesSet.add(resourceTO.getName());\n         }\n \n         return resourcesSet;\n@@ -690,35 +701,6 @@ public void setupUserMod(UserTO userTO) {\n \n     }\n \n-    /**\n-     * Search for the current attribute in the old user object and, if exists,\n-     * replace it. Otherwise will be created from scratch.\n-     * Old - To remove\n-     * @param attributeTO\n-     * @param userMod\n-     * @return\n-     */\n-//    public void searchAndUpdateAttribute(AttributeTO attributeTO){\n-//        boolean found = false;\n-//\n-//        AttributeMod attributeMod = new AttributeMod();\n-//        attributeMod.setSchema(attributeTO.getSchema());\n-//\n-//        for(AttributeTO oldAttribute : oldUser.getAttributes()){\n-//            if(attributeTO.getSchema().equals(oldAttribute.getSchema())){\n-//            attributeMod.setValuesToBeAdded(attributeTO.getValues());\n-//\n-//            userMod.addAttributeToBeRemoved(oldAttribute.getSchema());\n-//            userMod.addAttributeToBeUpdated(attributeMod);\n-//            found = true;\n-//            }\n-//        }\n-//\n-//        if(!found){\n-//        attributeMod.setValuesToBeAdded(attributeTO.getValues());\n-//        userMod.addAttributeToBeUpdated(attributeMod);\n-//       }\n-//    }\n     public void searchAndUpdateAttribute(AttributeTO attributeTO) {\n         boolean found = false;\n \n@@ -806,12 +788,12 @@ public void searchAndUpdateMembership(MembershipTO membershipTO) {\n                         if (!oldAttribute.equals(newAttribute)) {\n                             attributeMod = new AttributeMod();\n                             attributeMod.setSchema(newAttribute.getSchema());\n-                            \n+\n                             attributeMod.setValuesToBeRemoved(oldAttribute.getValues());\n                             attributeMod.setValuesToBeAdded(newAttribute.getValues());\n \n                             membershipMod.addAttributeToBeUpdated(attributeMod);\n-                            \n+\n                             userMod.addMembershipToBeAdded(membershipMod);\n                             userMod.addMembershipToBeRemoved(oldMembership.getId());\n                         }"},{"sha":"46311a366fb34addd93a69b2a3cbca2f9d66e56f","filename":"console/src/main/java/org/syncope/console/rest/UsersRestClient.java","status":"modified","additions":8,"deletions":2,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FUsersRestClient.java?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -20,6 +20,7 @@\n import org.syncope.client.to.ConfigurationTO;\n import org.syncope.client.to.UserTO;\n import org.syncope.client.to.UserTOs;\n+import org.syncope.client.to.WorkflowActionsTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n \n /**\n@@ -54,16 +55,21 @@ public void createUser(UserTO userTO) {\n                 + \"user/create\", userTO, UserTO.class);\n         \n         userTO.setId(newUserTO.getId());\n-        userTO.setToken(newUserTO.getToken());\n-        userTO.setTokenExpireTime(newUserTO.getTokenExpireTime());\n+        //userTO.setToken(newUserTO.getToken());\n+        //userTO.setTokenExpireTime(newUserTO.getTokenExpireTime());\n         \n+        WorkflowActionsTO workflowActions = restClient.getRestTemplate().getForObject(\n+        restClient.getBaseURL() + \"user/actions/{userId}\", WorkflowActionsTO.class,\n+        newUserTO.getId());\n+\n         // 2. activate user\n         newUserTO = restClient.getRestTemplate().postForObject(restClient.getBaseURL() \n                 + \"user/activate\", newUserTO, UserTO.class);\n         \n         }\n         catch (SyncopeClientCompositeErrorException e) {\n             e.printStackTrace();\n+            throw e;\n         }\n     }\n "},{"sha":"57f8cae4ef95249ec7d6dd1de5eeb3dda66443fb","filename":"console/src/main/resources/org/syncope/console/pages/BasePage.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -1 +1 @@\n-operation_succeded=Operation succesfully\n\\ No newline at end of file\n+operation_succeded=Operation executed successfully"},{"sha":"14f6e618bd7d65a75c8edd4aa21dd200d3d76518","filename":"console/src/main/resources/org/syncope/console/pages/UserModalPage.html","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9ebaf55ebd67e987e35dfd35f818b8b883738c40/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.html?ref=9ebaf55ebd67e987e35dfd35f818b8b883738c40","patch":"@@ -14,6 +14,11 @@\n -->\n <wicket:head>\n     <style>\n+        table.palette td.header {\n+            background:url(\"images/ui-bg_glass_75_e6e6e6_1x400.png\")\n+                repeat-x scroll 50% 50% #E6E6E6 !important;\n+        }\n+\n         div.role-tree table.wicket-tree-content table.icon-panel a{\n             font-size: 10px;\n             color:black;\n@@ -68,7 +73,7 @@\n \n             <div id=\"tabs-3\">\n \n-                <span wicket:id=\"resourcesChoiceTransfer\"/>\n+                <span wicket:id=\"resourcesPalette\"/>\n \n             </div>\n             <div id=\"tabs-4\">"}]}