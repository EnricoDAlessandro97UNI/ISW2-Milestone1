{"sha":"757608a7c7577b157aa6f2593a4f1ef782cc2ffd","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc1NzYwOGE3Yzc1NzdiMTU3YWE2ZjI1OTNhNGYxZWY3ODJjYzJmZmQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-18T16:09:59Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-18T16:09:59Z"},"message":"[SYNCOPE-769] Better fix for SYNCOPE-735, which avoids writing useless history entries rather than cleaning them up afterwards","tree":{"sha":"107e1dae8ccf2be9d0947dac2c61c34bf774df32","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/107e1dae8ccf2be9d0947dac2c61c34bf774df32"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/757608a7c7577b157aa6f2593a4f1ef782cc2ffd","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/757608a7c7577b157aa6f2593a4f1ef782cc2ffd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/757608a7c7577b157aa6f2593a4f1ef782cc2ffd","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"1802b3bb47c7144af3d73b378b5ad83816835946","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1802b3bb47c7144af3d73b378b5ad83816835946","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1802b3bb47c7144af3d73b378b5ad83816835946"}],"stats":{"total":152,"additions":7,"deletions":145},"files":[{"sha":"f4166d3f80565018984b9d30e90c15a0ea50c886","filename":"common/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/UserWorkflowService.java","status":"modified","additions":0,"deletions":13,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2FUserWorkflowService.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -46,19 +46,6 @@ public interface UserWorkflowService extends JAXRSService {\n     @Produces({ JAXRSService.APPLICATION_XML, MediaType.APPLICATION_JSON })\n     List<WorkflowFormTO> getForms();\n \n-    /**\n-     * Returns a list of all available workflow forms with matching name, for the given user key.\n-     *\n-     * @param userKey user key\n-     * @param name form name\n-     * @return list of all available workflow forms with matching name, fir the given user key.\n-     */\n-    @GET\n-    @Path(\"forms/{userKey}/{name}\")\n-    @Produces({ JAXRSService.APPLICATION_XML, MediaType.APPLICATION_JSON })\n-    List<WorkflowFormTO> getFormsByName(\n-            @NotNull @PathParam(\"userKey\") final Long userKey, @NotNull @PathParam(\"name\") final String name);\n-\n     /**\n      * Returns a list of available forms for the given user key.\n      *"},{"sha":"ebde234c4c124d9b432e503986ab49b7c68e280d","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/UserWorkflowLogic.java","status":"modified","additions":0,"deletions":8,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FUserWorkflowLogic.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -95,14 +95,6 @@ public List<WorkflowFormTO> getForms() {\n         return uwfAdapter.getForms();\n     }\n \n-    @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_READ + \"') and hasRole('\"\n-            + StandardEntitlement.USER_READ + \"')\")\n-    @Transactional(rollbackFor = { Throwable.class })\n-    public List<WorkflowFormTO> getForms(final Long key, final String formName) {\n-        User user = userDAO.authFind(key);\n-        return uwfAdapter.getForms(user.getWorkflowId(), formName);\n-    }\n-\n     @PreAuthorize(\"hasRole('\" + StandardEntitlement.WORKFLOW_FORM_SUBMIT + \"')\")\n     @Transactional(rollbackFor = { Throwable.class })\n     public UserTO submitForm(final WorkflowFormTO form) {"},{"sha":"b396e4006511df8bb5932a55f6d734fcbca8e18f","filename":"core/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/UserWorkflowServiceImpl.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2FUserWorkflowServiceImpl.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -56,9 +56,4 @@ public List<WorkflowFormTO> getForms() {\n     public UserTO submitForm(final WorkflowFormTO form) {\n         return lofic.submitForm(form);\n     }\n-\n-    @Override\n-    public List<WorkflowFormTO> getFormsByName(final Long userKey, final String taskName) {\n-        return lofic.getForms(userKey, taskName);\n-    }\n }"},{"sha":"4436c5282c7785bd1d81e9472f52eab0b7e1cc54","filename":"core/workflow-activiti/src/main/java/org/apache/syncope/core/workflow/activiti/ActivitiUserWorkflowAdapter.java","status":"modified","additions":0,"deletions":58,"changes":58,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Factiviti%2FActivitiUserWorkflowAdapter.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -74,7 +74,6 @@\n import org.apache.syncope.core.workflow.api.WorkflowException;\n import org.apache.syncope.core.workflow.java.AbstractUserWorkflowAdapter;\n import org.springframework.beans.factory.annotation.Autowired;\n-import org.springframework.jdbc.core.JdbcTemplate;\n import org.springframework.transaction.annotation.Transactional;\n \n /**\n@@ -190,45 +189,6 @@ protected Set<String> getPerformedTasks(final User user) {\n         return result;\n     }\n \n-    protected void cleanupHistory(final User user) {\n-        JdbcTemplate jdbcTemplate = new JdbcTemplate(engine.getDataSource());\n-\n-        List<String> taskIds = jdbcTemplate.queryForList(\n-                \"SELECT TASK_ID_ FROM ACT_HI_VARINST WHERE NAME_='\" + TASK_IS_FORM\n-                + \"' AND LONG_=1 AND PROC_INST_ID_='\" + user.getWorkflowId() + \"'\", String.class);\n-\n-        StringBuilder update = new StringBuilder();\n-\n-        update.append(\"DELETE FROM ACT_HI_VARINST WHERE PROC_INST_ID_='\").append(user.getWorkflowId()).append(\"' \");\n-        for (String taskId : taskIds) {\n-            update.append(\"AND TASK_ID_<>'\").append(taskId).append(\"' \");\n-        }\n-        jdbcTemplate.execute(update.toString());\n-\n-        update.setLength(0);\n-        update.append(\"DELETE FROM ACT_HI_TASKINST WHERE PROC_INST_ID_='\").append(user.getWorkflowId()).append(\"' \");\n-        for (String taskId : taskIds) {\n-            update.append(\"AND ID_<>'\").append(taskId).append(\"' \");\n-        }\n-        jdbcTemplate.execute(update.toString());\n-\n-        update.setLength(0);\n-        update.append(\"DELETE FROM ACT_HI_ACTINST WHERE PROC_INST_ID_='\").append(user.getWorkflowId()).append(\"' \");\n-        for (String taskId : taskIds) {\n-            update.append(\"AND TASK_ID_<>'\").append(taskId).append(\"' \");\n-        }\n-        jdbcTemplate.execute(update.toString());\n-\n-        List<String> byteArrayIds = jdbcTemplate.queryForList(\n-                \"SELECT BYTEARRAY_ID_ FROM ACT_HI_VARINST WHERE BYTEARRAY_ID_ IS NOT NULL\", String.class);\n-        update.setLength(0);\n-        update.append(\"DELETE FROM ACT_GE_BYTEARRAY WHERE NAME_ LIKE 'hist.%' \");\n-        for (String byteArrayId : byteArrayIds) {\n-            update.append(\"AND ID_<>'\").append(byteArrayId).append(\"' \");\n-        }\n-        jdbcTemplate.execute(update.toString());\n-    }\n-\n     /**\n      * Saves resources to be propagated and password for later - after form submission - propagation.\n      *\n@@ -310,8 +270,6 @@ public WorkflowResult<Pair<Long, Boolean>> create(final UserTO userTO, final boo\n \n         Set<String> tasks = getPerformedTasks(user);\n \n-        cleanupHistory(user);\n-\n         return new WorkflowResult<Pair<Long, Boolean>>(\n                 new ImmutablePair<>(user.getKey(), propagateEnable), propByRes, tasks);\n     }\n@@ -351,8 +309,6 @@ protected Set<String> doExecuteTask(final User user, final String task, final Ma\n         postTasks.removeAll(preTasks);\n         postTasks.add(task);\n \n-        cleanupHistory(user);\n-\n         return postTasks;\n     }\n \n@@ -745,18 +701,6 @@ public List<WorkflowFormTO> getForms() {\n         return forms;\n     }\n \n-    @Override\n-    public List<WorkflowFormTO> getForms(final String workflowId, final String name) {\n-        List<WorkflowFormTO> forms = getForms(\n-                engine.getTaskService().createTaskQuery().processInstanceId(workflowId).taskName(name).\n-                taskVariableValueEquals(TASK_IS_FORM, Boolean.TRUE));\n-\n-        forms.addAll(getForms(engine.getHistoryService().createHistoricTaskInstanceQuery().taskName(name).\n-                taskVariableValueEquals(TASK_IS_FORM, Boolean.TRUE)));\n-\n-        return forms;\n-    }\n-\n     protected <T extends Query<?, ?>, U extends Object> List<WorkflowFormTO> getForms(final Query<T, U> query) {\n         List<WorkflowFormTO> forms = new ArrayList<>();\n \n@@ -911,8 +855,6 @@ public WorkflowResult<UserPatch> submitForm(final WorkflowFormTO form) {\n             }\n         }\n \n-        cleanupHistory(user);\n-\n         return new WorkflowResult<>(userPatch, propByRes, postTasks);\n     }\n }"},{"sha":"771b11c16d56886ca023c02a2794e3be4a4b1a9a","filename":"core/workflow-activiti/src/main/resources/workflow.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -15,6 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n wf.directory=${conf.directory}\n+historyLevel=activity\n jobExecutorActivate=true\n uwfAdapter=org.apache.syncope.core.workflow.activiti.ActivitiUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter"},{"sha":"8070ac2a3b67df589da210eab5018103ab04d16b","filename":"core/workflow-activiti/src/main/resources/workflowActivitiContext.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2FworkflowActivitiContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2FworkflowActivitiContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-activiti%2Fsrc%2Fmain%2Fresources%2FworkflowActivitiContext.xml?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -42,6 +42,7 @@ under the License.\n     <property name=\"jpaHandleTransaction\" value=\"true\"/>\n     <property name=\"jpaCloseEntityManager\" value=\"false\"/>\n \n+    <property name=\"history\" value=\"${historyLevel}\"/>\n     <property name=\"jobExecutorActivate\" value=\"${jobExecutorActivate}\"/>\n \n     <property name=\"customSessionFactories\">"},{"sha":"318a1628a324a9016f080a82b10ea03c67813dd7","filename":"core/workflow-api/src/main/java/org/apache/syncope/core/workflow/api/WorkflowAdapter.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fapi%2FWorkflowAdapter.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -61,15 +61,6 @@ public interface WorkflowAdapter {\n      */\n     List<WorkflowFormTO> getForms();\n \n-    /**\n-     * Gets all forms with the given name for the given workflowId(include historical forms).\n-     *\n-     * @param workflowId workflow id.\n-     * @param name form name.\n-     * @return forms (if present), otherwise an empty list.\n-     */\n-    List<WorkflowFormTO> getForms(String workflowId, String name);\n-\n     /**\n      * Get form for given workflowId (if present).\n      *"},{"sha":"5f4c1986bc5bda32162c0bd5a245dca16012e9e5","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultAnyObjectWorkflowAdapter.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultAnyObjectWorkflowAdapter.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -89,11 +89,6 @@ public List<WorkflowFormTO> getForms() {\n         return Collections.emptyList();\n     }\n \n-    @Override\n-    public List<WorkflowFormTO> getForms(final String workflowId, final String name) {\n-        return Collections.emptyList();\n-    }\n-\n     @Override\n     public WorkflowFormTO getForm(final String workflowId) {\n         return null;"},{"sha":"e14b9a1df3c826433ad4fce45cff718bcd139e3d","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultGroupWorkflowAdapter.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultGroupWorkflowAdapter.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -89,11 +89,6 @@ public List<WorkflowFormTO> getForms() {\n         return Collections.emptyList();\n     }\n \n-    @Override\n-    public List<WorkflowFormTO> getForms(final String workflowId, final String name) {\n-        return Collections.emptyList();\n-    }\n-\n     @Override\n     public WorkflowFormTO getForm(final String workflowId) {\n         return null;"},{"sha":"6523474b10237750765ad2d80ebcf1e07994cb68","filename":"core/workflow-java/src/main/java/org/apache/syncope/core/workflow/java/DefaultUserWorkflowAdapter.java","status":"modified","additions":0,"deletions":5,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fjava%2FDefaultUserWorkflowAdapter.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -186,11 +186,6 @@ public List<WorkflowFormTO> getForms() {\n         return Collections.emptyList();\n     }\n \n-    @Override\n-    public List<WorkflowFormTO> getForms(final String workflowId, final String name) {\n-        return Collections.emptyList();\n-    }\n-\n     @Override\n     public WorkflowFormTO getForm(final String workflowId) {\n         return null;"},{"sha":"8e5f662a1e849cd27d1ad2da447c0543960f786e","filename":"core/workflow-java/src/main/resources/workflow.properties","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/core%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fworkflow-java%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -15,7 +15,6 @@\n # specific language governing permissions and limitations\n # under the License.\n wf.directory=${conf.directory}\n-jobExecutorActivate=false\n uwfAdapter=org.apache.syncope.core.workflow.java.DefaultUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter\n awfAdapter=org.apache.syncope.core.workflow.java.DefaultAnyObjectWorkflowAdapter"},{"sha":"771b11c16d56886ca023c02a2794e3be4a4b1a9a","filename":"fit/core-reference/src/main/resources/all/workflow.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fall%2Fworkflow.properties?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -15,6 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n wf.directory=${conf.directory}\n+historyLevel=activity\n jobExecutorActivate=true\n uwfAdapter=org.apache.syncope.core.workflow.activiti.ActivitiUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter"},{"sha":"8e5f662a1e849cd27d1ad2da447c0543960f786e","filename":"fit/core-reference/src/main/resources/workflow.properties","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Fmain%2Fresources%2Fworkflow.properties?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -15,7 +15,6 @@\n # specific language governing permissions and limitations\n # under the License.\n wf.directory=${conf.directory}\n-jobExecutorActivate=false\n uwfAdapter=org.apache.syncope.core.workflow.java.DefaultUserWorkflowAdapter\n gwfAdapter=org.apache.syncope.core.workflow.java.DefaultGroupWorkflowAdapter\n awfAdapter=org.apache.syncope.core.workflow.java.DefaultAnyObjectWorkflowAdapter"},{"sha":"ecb83d07107666e075b811af6d3bba7252ca854d","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserWorkflowITCase.java","status":"modified","additions":4,"deletions":35,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/757608a7c7577b157aa6f2593a4f1ef782cc2ffd/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserWorkflowITCase.java?ref=757608a7c7577b157aa6f2593a4f1ef782cc2ffd","patch":"@@ -21,7 +21,6 @@\n import org.apache.syncope.fit.ActivitiDetector;\n \n import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertNull;\n@@ -247,7 +246,7 @@ public void issueSYNCOPE15() {\n         WorkflowFormTO form = userWorkflowService.getFormForUser(userTO.getKey());\n         assertNotNull(form);\n \n-        // 3. first claim ny bellini ....\n+        // 3. first claim by bellini ....\n         UserWorkflowService userService3 = clientFactory.create(\"bellini\", ADMIN_PWD).\n                 getService(UserWorkflowService.class);\n         form = userService3.claimForm(form.getTaskId());\n@@ -271,39 +270,9 @@ public void issueSYNCOPE15() {\n         assertEquals(preForms, userWorkflowService.getForms().size());\n         assertNull(userWorkflowService.getFormForUser(userTO.getKey()));\n \n-        // 7. search approval into the history as well\n-        forms = userWorkflowService.getFormsByName(userTO.getKey(), \"Create approval\");\n-        assertFalse(forms.isEmpty());\n-\n-        int count = 0;\n-        for (WorkflowFormTO hform : forms) {\n-            if (form.getTaskId().equals(hform.getTaskId())) {\n-                count++;\n-\n-                assertEquals(\"createApproval\", hform.getKey());\n-                assertNotNull(hform.getCreateTime());\n-                assertNotNull(hform.getDueDate());\n-                assertTrue(Boolean.parseBoolean(hform.getPropertyMap().get(\"approve\").getValue()));\n-                assertNull(hform.getPropertyMap().get(\"rejectReason\").getValue());\n-            }\n-        }\n-        assertEquals(1, count);\n-\n-        userService.delete(userTO.getKey());\n-\n-        try {\n-            userService.read(userTO.getKey());\n-            fail();\n-        } catch (Exception ignore) {\n-            assertNotNull(ignore);\n-        }\n-\n-        try {\n-            userWorkflowService.getFormsByName(userTO.getKey(), \"Create approval\");\n-            fail();\n-        } catch (Exception ignore) {\n-            assertNotNull(ignore);\n-        }\n+        // 7.check that no more forms are still to be processed\n+        forms = userWorkflowService.getForms();\n+        assertEquals(preForms, forms.size());\n     }\n \n }"}]}