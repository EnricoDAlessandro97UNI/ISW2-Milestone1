{"sha":"3fc2f962b2ef8c511dc4defa585e3614730ad69c","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjNmYzJmOTYyYjJlZjhjNTExZGM0ZGVmYTU4NWUzNjE0NzMwYWQ2OWM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-05-05T10:58:31Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-05-05T10:58:31Z"},"message":"[SYNCOPE-156] Sample notification area for TODOs","tree":{"sha":"9f4a513aae1049148aafe7bca0bb3f16b2b6d245","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/9f4a513aae1049148aafe7bca0bb3f16b2b6d245"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3fc2f962b2ef8c511dc4defa585e3614730ad69c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3fc2f962b2ef8c511dc4defa585e3614730ad69c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3fc2f962b2ef8c511dc4defa585e3614730ad69c","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3fc2f962b2ef8c511dc4defa585e3614730ad69c/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"66a119333ebbc3f3f35267377f05504efa5c17dd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/66a119333ebbc3f3f35267377f05504efa5c17dd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/66a119333ebbc3f3f35267377f05504efa5c17dd"}],"stats":{"total":88,"additions":84,"deletions":4},"files":[{"sha":"f162357aa8d7d0ce5d6e182381ccabb03a3a9a72","filename":"client/console/src/main/java/org/apache/syncope/client/console/SyncopeConsoleSession.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeConsoleSession.java?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -124,6 +124,10 @@ public UserTO getSelfTO() {\n         return selfTO;\n     }\n \n+    public boolean owns(final String entitlement) {\n+        return auth.containsKey(entitlement);\n+    }\n+\n     @Override\n     public Roles getRoles() {\n         if (isSignedIn() && roles == null && auth != null) {"},{"sha":"7855813d2c1f173bc72edece5f6b8559d74bb2e8","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/BasePage.java","status":"modified","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.java?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -20,6 +20,7 @@\n \n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n+import org.apache.syncope.client.console.rest.UserWorkflowRestClient;\n import org.apache.syncope.common.lib.types.Entitlement;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n@@ -34,11 +35,15 @@\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n \n public class BasePage extends AbstractBasePage implements IAjaxIndicatorAware {\n \n     private static final long serialVersionUID = 1571997737305598502L;\n \n+    @SpringBean\n+    private UserWorkflowRestClient userWorkflowRestClient;\n+\n     public BasePage() {\n         this(null);\n     }\n@@ -54,9 +59,19 @@ private String getULContainerId(final String linkId) {\n     public BasePage(final PageParameters parameters) {\n         super(parameters);\n \n+        // header, footer\n         add(new Label(\"version\", SyncopeConsoleSession.get().getVersion()));\n         add(new Label(\"username\", SyncopeConsoleSession.get().getSelfTO().getUsername()));\n \n+        WebMarkupContainer todosContainer = new WebMarkupContainer(\"todosContainer\");\n+        add(todosContainer);\n+        Label todos = new Label(\"todos\", \"0\");\n+        todosContainer.add(todos);\n+        if (SyncopeConsoleSession.get().owns(Entitlement.WORKFLOW_FORM_LIST)) {\n+            todos.setDefaultModelObject(userWorkflowRestClient.getForms().size());\n+        }\n+        MetaDataRoleAuthorizationStrategy.authorize(todosContainer, WebPage.RENDER, Entitlement.WORKFLOW_FORM_LIST);\n+\n         // menu\n         WebMarkupContainer liContainer = new WebMarkupContainer(getLIContainerId(\"dashboard\"));\n         add(liContainer);"},{"sha":"bb99755e821189f492d37586d910480fd9e6530a","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/UserWorkflowRestClient.java","status":"renamed","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FUserWorkflowRestClient.java?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -23,11 +23,8 @@\n import org.apache.syncope.common.rest.api.service.UserWorkflowService;\n import org.springframework.stereotype.Component;\n \n-/**\n- * Console client for invoking Rest Todo services.\n- */\n @Component\n-public class ApprovalRestClient extends BaseRestClient {\n+public class UserWorkflowRestClient extends BaseRestClient {\n \n     private static final long serialVersionUID = -4785231164900813921L;\n ","previous_filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/ApprovalRestClient.java"},{"sha":"f64000604aef596166aeb48d3e449aa6e831e890","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/BasePage.html","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FBasePage.html?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -62,6 +62,19 @@\n           </a>\n           <div class=\"navbar-custom-menu\">\n             <ul class=\"nav navbar-nav\">\n+\n+              <li class=\"dropdown tasks-menu\" wicket:id=\"todosContainer\">\n+                <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n+                  <i class=\"fa fa-flag-o\"></i>\n+                  <span class=\"label label-danger\" wicket:id=\"todos\"></span>\n+                </a>\n+                <ul class=\"dropdown-menu\">\n+                  <li class=\"footer\">\n+                    <a href=\"#\">View all TODOs</a>\n+                  </li>\n+                </ul>\n+              </li>\n+\n               <li class=\"dropdown user user-menu\">\n                 <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n                   <!-- hidden-xs hides the username on small devices so only the image appears. -->"},{"sha":"37723620ca08f6ba79b1a823b28227ec1ff8ce33","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.properties?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+noActivitiEnabledForUsers=Activiti not enabled for users"},{"sha":"a4975e8112b154c32d46bb3d5264269ed81a9413","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_it.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_it.properties?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+noActivitiEnabledForUsers=Activiti non configurato per gli utenti"},{"sha":"ea20be73c6148f76645c736273aa9e3b4f3cf2b1","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow_pt_BR.properties","status":"added","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3fc2f962b2ef8c511dc4defa585e3614730ad69c/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow_pt_BR.properties?ref=3fc2f962b2ef8c511dc4defa585e3614730ad69c","patch":"@@ -0,0 +1,17 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+noActivitiEnabledForUsers=Activiti n\\u00e3o habilitado para usu\\u00e1rios"}]}