{"sha":"16b3f89a6dec0831f9098a62b9a033f749dcb401","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjE2YjNmODlhNmRlYzA4MzFmOTA5OGE2MmI5YTAzM2Y3NDlkY2I0MDE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-11-28T12:10:26Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-11-28T12:10:38Z"},"message":"[SYNCOPE-976] Checking for duplicates before insertion","tree":{"sha":"91a521f279c48b5ed4f3f1855dbc662f029bace4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/91a521f279c48b5ed4f3f1855dbc662f029bace4"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/16b3f89a6dec0831f9098a62b9a033f749dcb401","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/16b3f89a6dec0831f9098a62b9a033f749dcb401","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/16b3f89a6dec0831f9098a62b9a033f749dcb401","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/16b3f89a6dec0831f9098a62b9a033f749dcb401/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"8fafe9a8ffd64d204e37d8205da54857f406a4bd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8fafe9a8ffd64d204e37d8205da54857f406a4bd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8fafe9a8ffd64d204e37d8205da54857f406a4bd"}],"stats":{"total":23,"additions":22,"deletions":1},"files":[{"sha":"070395e091a81f6a8e667ea1afb78736df1ceeaa","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/LoggerLogic.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/16b3f89a6dec0831f9098a62b9a033f749dcb401/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FLoggerLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/16b3f89a6dec0831f9098a62b9a033f749dcb401/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FLoggerLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FLoggerLogic.java?ref=16b3f89a6dec0831f9098a62b9a033f749dcb401","patch":"@@ -278,10 +278,13 @@ public List<EventCategoryTO> listAuditEvents() {\n                         EventCategoryTO eventCategoryTO = new EventCategoryTO();\n                         eventCategoryTO.setCategory(clazz.getSimpleName());\n                         for (Method method : clazz.getDeclaredMethods()) {\n-                            if (Modifier.isPublic(method.getModifiers())) {\n+                            if (Modifier.isPublic(method.getModifiers())\n+                                    && !eventCategoryTO.getEvents().contains(method.getName())) {\n+\n                                 eventCategoryTO.getEvents().add(method.getName());\n                             }\n                         }\n+\n                         events.add(eventCategoryTO);\n                     }\n                 }"},{"sha":"373f28a32be3e0524f56b7a6bb4c786e4f875b3a","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/LoggerITCase.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/16b3f89a6dec0831f9098a62b9a033f749dcb401/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FLoggerITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/16b3f89a6dec0831f9098a62b9a033f749dcb401/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FLoggerITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FLoggerITCase.java?ref=16b3f89a6dec0831f9098a62b9a033f749dcb401","patch":"@@ -28,6 +28,8 @@\n import java.util.List;\n import javax.ws.rs.core.Response;\n import javax.xml.ws.WebServiceException;\n+import org.apache.commons.collections4.IterableUtils;\n+import org.apache.commons.collections4.Predicate;\n import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.to.EventCategoryTO;\n import org.apache.syncope.common.lib.to.LoggerTO;\n@@ -225,4 +227,20 @@ public void issueSYNCOPE708() {\n             assertEquals(Response.Status.NOT_FOUND, ex.getType().getResponseStatus());\n         }\n     }\n+\n+    @Test\n+    public void issueSYNCOPE976() {\n+        List<EventCategoryTO> events = loggerService.events();\n+        assertNotNull(events);\n+\n+        EventCategoryTO userLogic = IterableUtils.find(events, new Predicate<EventCategoryTO>() {\n+\n+            @Override\n+            public boolean evaluate(final EventCategoryTO object) {\n+                return \"UserLogic\".equals(object.getCategory());\n+            }\n+        });\n+        assertNotNull(userLogic);\n+        assertEquals(1, IterableUtils.frequency(userLogic.getEvents(), \"create\"));\n+    }\n }"}]}