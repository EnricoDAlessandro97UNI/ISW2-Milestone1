{"sha":"c2731f2623c19091142ee8d40e29dcb7c6bf60b1","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmMyNzMxZjI2MjNjMTkwOTExNDJlZThkNDBlMjlkY2I3YzZiZjYwYjE=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-09-09T14:31:44Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-09-09T14:31:44Z"},"message":"Fixes issue 151\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247114 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"efd2582d25d223c9d94edaf35c784dde3bb417c3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/efd2582d25d223c9d94edaf35c784dde3bb417c3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/c2731f2623c19091142ee8d40e29dcb7c6bf60b1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c2731f2623c19091142ee8d40e29dcb7c6bf60b1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c2731f2623c19091142ee8d40e29dcb7c6bf60b1","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/comments","author":null,"committer":null,"parents":[{"sha":"ebf0f2df2210ac86a0134f41a3257c0927bda2c2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ebf0f2df2210ac86a0134f41a3257c0927bda2c2","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ebf0f2df2210ac86a0134f41a3257c0927bda2c2"}],"stats":{"total":1114,"additions":762,"deletions":352},"files":[{"sha":"89b4a523eebe33e074bc0450dd45eecae43ef21b","filename":"client/src/main/java/org/syncope/types/EntityViolationType.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FEntityViolationType.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FEntityViolationType.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Ftypes%2FEntityViolationType.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -40,7 +40,9 @@ public enum EntityViolationType {\n     InvalidPassword(\n     \"org.syncope.core.validation.password.invalid\"),\n     InvalidPolicy(\n-    \"org.syncope.core.validation.policy.invalid\");\n+    \"org.syncope.core.validation.policy.invalid\"),\n+    InvalidSchemaMapping(\n+    \"org.syncope.core.validation.mapping.invalid\");\n \n     private String message;\n "},{"sha":"278f5cd03bc6d08f22319c71891cfedccbf43ef2","filename":"console/src/main/java/org/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":179,"deletions":144,"changes":323,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -18,7 +18,6 @@\n \n import java.util.Arrays;\n import java.util.Collections;\n-import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.IAjaxCallDecorator;\n@@ -27,14 +26,10 @@\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n-import org.apache.wicket.extensions.ajax.markup.html.autocomplete.AutoCompleteTextField;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n-import org.apache.wicket.markup.html.form.CheckBox;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n-import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n-import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n import org.apache.wicket.model.CompoundPropertyModel;\n@@ -55,6 +50,7 @@\n import org.syncope.console.wicket.markup.html.form.AjaxDecoratedCheckbox;\n import org.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n import org.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n+import org.syncope.console.wicket.markup.html.form.FieldPanel;\n import org.syncope.types.PropagationMode;\n import org.syncope.types.SourceMappingType;\n import org.syncope.types.TraceLevel;\n@@ -83,6 +79,8 @@ public class ResourceModalPage extends BaseModalPage {\n \n     private WebMarkupContainer mappingContainer;\n \n+    private List<String> resourceSchemaNames;\n+\n     public ResourceModalPage(final Resources basePage, final ModalWindow window,\n             final ResourceTO resourceTO, final boolean createFlag) {\n \n@@ -119,6 +117,8 @@ protected List<SourceMappingType> load() {\n                     }\n                 };\n \n+        updateResourceSchemaNames(resourceTO.getConnectorId());\n+\n         final ConnInstanceTO connectorTO = new ConnInstanceTO();\n         if (!createFlag) {\n             connectorTO.setId(resourceTO.getConnectorId());\n@@ -180,6 +180,10 @@ protected List<SourceMappingType> load() {\n         deleteTraceLevel.setChoices(Arrays.asList(TraceLevel.values()));\n         form.add(deleteTraceLevel);\n \n+        mappingContainer = new WebMarkupContainer(\"mappingContainer\");\n+        mappingContainer.setOutputMarkupId(true);\n+        form.add(mappingContainer);\n+\n         final AjaxDropDownChoicePanel<ConnInstanceTO> connector =\n                 new AjaxDropDownChoicePanel<ConnInstanceTO>(\"connector\",\n                 getString(\"connector\"),\n@@ -205,14 +209,11 @@ public void setObject(final ConnInstanceTO connector) {\n             public void detach() {\n             }\n         });\n+\n         connector.addRequiredLabel();\n         connector.setEnabled(createFlag);\n         form.add(connector);\n \n-        mappingContainer = new WebMarkupContainer(\"mappingContainer\");\n-        mappingContainer.setOutputMarkupId(true);\n-        form.add(mappingContainer);\n-\n         final ListView<SchemaMappingTO> mappings = new ListView<SchemaMappingTO>(\n                 \"mappings\", resourceTO.getMappings()) {\n \n@@ -271,166 +272,166 @@ public CharSequence preDecorateScript(\n                     }\n                 });\n \n-                final DropDownChoice<String> schemaAttrChoice =\n-                        new DropDownChoice<String>(\n-                        \"sourceAttrNames\", new PropertyModel<String>(\n-                        mappingTO, \"sourceAttrName\"), (IModel) null);\n-\n-                schemaAttrChoice.add(\n-                        new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n-\n-                            private static final long serialVersionUID =\n-                                    -1107858522700306810L;\n-\n-                            @Override\n-                            protected void onUpdate(AjaxRequestTarget art) {\n-                                mappingTO.setSourceAttrName(\n-                                        schemaAttrChoice.getModelObject());\n-                            }\n-                        });\n-\n-                schemaAttrChoice.setOutputMarkupId(true);\n+                final AjaxDropDownChoicePanel sourceAttrNames =\n+                        new AjaxDropDownChoicePanel<String>(\"sourceAttrNames\",\n+                        getString(\"sourceAttrNames\"),\n+                        new PropertyModel(mappingTO, \"sourceAttrName\"),\n+                        true);\n+                sourceAttrNames.setChoices(resourceSchemaNames);\n+                sourceAttrNames.setRequired(true);\n+                sourceAttrNames.setStyleShet(\n+                        \"ui-widget-content ui-corner-all short_fixedsize\");\n \n                 if (mappingTO.getSourceMappingType() == null) {\n-                    schemaAttrChoice.setChoices(Collections.EMPTY_LIST);\n+                    sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n                 } else {\n                     switch (mappingTO.getSourceMappingType()) {\n                         case UserSchema:\n-                            schemaAttrChoice.setChoices(uSchemaAttrNames);\n+                            sourceAttrNames.setChoices(uSchemaAttrNames);\n                             break;\n \n                         case UserDerivedSchema:\n-                            schemaAttrChoice.setChoices(uDerSchemaAttrNames);\n+                            sourceAttrNames.setChoices(uDerSchemaAttrNames);\n                             break;\n \n                         case UserVirtualSchema:\n-                            schemaAttrChoice.setChoices(uVirSchemaAttrNames);\n+                            sourceAttrNames.setChoices(uVirSchemaAttrNames);\n                             break;\n \n                         case SyncopeUserId:\n-                            schemaAttrChoice.setEnabled(false);\n-                            schemaAttrChoice.setRequired(false);\n-                            schemaAttrChoice.setChoices(Collections.EMPTY_LIST);\n+                            sourceAttrNames.setEnabled(false);\n+                            sourceAttrNames.setRequired(false);\n+                            sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n                             mappingTO.setSourceAttrName(\"SyncopeUserId\");\n                             break;\n \n                         case Password:\n-                            schemaAttrChoice.setEnabled(false);\n-                            schemaAttrChoice.setRequired(false);\n-                            schemaAttrChoice.setChoices(Collections.EMPTY_LIST);\n+                            sourceAttrNames.setEnabled(false);\n+                            sourceAttrNames.setRequired(false);\n+                            sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n                             mappingTO.setSourceAttrName(\"Password\");\n                             break;\n \n                         default:\n-                            schemaAttrChoice.setChoices(\n+                            sourceAttrNames.setChoices(\n                                     Collections.EMPTY_LIST);\n                     }\n                 }\n-                item.add(schemaAttrChoice);\n+                item.add(sourceAttrNames);\n \n-                item.add(new SourceMappingTypesDropDownChoice(\n+                final SourceMappingTypesDropDownChoice mappingTypesPanel =\n+                        new SourceMappingTypesDropDownChoice(\n                         \"sourceMappingTypes\",\n-                        new PropertyModel<SourceMappingType>(mappingTO,\n-                        \"sourceMappingType\"), sourceMappingTypes,\n-                        schemaAttrChoice).setRequired(true).\n-                        setOutputMarkupId(true));\n+                        getString(\"sourceMappingTypes\"),\n+                        new PropertyModel<SourceMappingType>(\n+                        mappingTO, \"sourceMappingType\"),\n+                        sourceAttrNames);\n \n-                final TextField<String> destAttrName = new TextField<String>(\n-                        \"destAttrName\", new PropertyModel(\n-                        mappingTO, \"destAttrName\"));\n-                destAttrName.setRequired(true);\n-                destAttrName.setLabel(new ResourceModel(\"fieldName\"));\n-                destAttrName.setOutputMarkupId(true);\n+                mappingTypesPanel.setRequired(true);\n+                mappingTypesPanel.setChoices(sourceMappingTypes.getObject());\n+                mappingTypesPanel.setStyleShet(\n+                        \"ui-widget-content ui-corner-all short_fixedsize\");\n+                item.add(mappingTypesPanel);\n \n-                destAttrName.add(\n-                        new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+                final FieldPanel destAttrName;\n \n-                            private static final long serialVersionUID =\n-                                    -1107858522700306810L;\n+                if (resourceSchemaNames.isEmpty()) {\n+                    destAttrName = new AjaxTextFieldPanel(\n+                            \"destAttrName\", getString(\"destAttrNames\"),\n+                            new PropertyModel<String>(mappingTO, \"destAttrName\"),\n+                            true);\n \n-                            @Override\n-                            protected void onUpdate(AjaxRequestTarget art) {\n-                                mappingTO.setDestAttrName(\n-                                        destAttrName.getModelObject());\n-                            }\n-                        });\n-                item.add(destAttrName);\n+                } else {\n+                    destAttrName =\n+                            new AjaxDropDownChoicePanel<String>(\n+                            \"destAttrName\", getString(\"destAttrNames\"),\n+                            new PropertyModel(mappingTO, \"destAttrName\"),\n+                            true);\n+                    ((AjaxDropDownChoicePanel) destAttrName).setChoices(\n+                            resourceSchemaNames);\n \n-                final AutoCompleteTextField<String> mandatoryCondirion =\n-                        new AutoCompleteTextField<String>(\"mandatoryCondition\",\n-                        new PropertyModel(mappingTO, \"mandatoryCondition\")) {\n+                }\n \n-                            private static final long serialVersionUID =\n-                                    -6648767303091874219L;\n+                boolean required = mappingTO != null\n+                        && !mappingTO.isAccountid()\n+                        && !mappingTO.isPassword();\n \n-                            @Override\n-                            protected Iterator getChoices(final String input) {\n-                                List<String> choices;\n-                                if (\"true\".startsWith(input.toLowerCase())) {\n-                                    choices = Collections.singletonList(\"true\");\n-                                } else if (\"false\".startsWith(input.toLowerCase())) {\n-                                    choices = Collections.singletonList(\"true\");\n-                                } else {\n-                                    choices = Collections.EMPTY_LIST;\n-                                }\n-\n-                                return choices.iterator();\n-                            }\n-                        };\n+                destAttrName.setRequired(required);\n+                destAttrName.setEnabled(required);\n \n-                mandatoryCondirion.add(\n-                        new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+                destAttrName.setStyleShet(\n+                        \"ui-widget-content ui-corner-all short_fixedsize\");\n+                item.add(destAttrName);\n \n-                            private static final long serialVersionUID =\n-                                    -1107858522700306810L;\n+                final AjaxTextFieldPanel mandatoryCondition =\n+                        new AjaxTextFieldPanel(\n+                        \"mandatoryCondition\",\n+                        getString(\"mandatoryCondition\"),\n+                        new PropertyModel(mappingTO, \"mandatoryCondition\"),\n+                        true);\n \n-                            @Override\n-                            protected void onUpdate(AjaxRequestTarget art) {\n-                                mappingTO.setMandatoryCondition(\n-                                        mandatoryCondirion.getModelObject());\n-                            }\n-                        });\n-                item.add(mandatoryCondirion);\n+                mandatoryCondition.setChoices(Arrays.asList(\n+                        new String[]{\"true\", \"false\"}));\n \n-                final CheckBox accountId = new CheckBox(\"accountId\",\n-                        new PropertyModel(mappingTO, \"accountid\"));\n+                mandatoryCondition.setStyleShet(\n+                        \"ui-widget-content ui-corner-all short_fixedsize\");\n \n-                accountId.add(\n+                item.add(mandatoryCondition);\n+\n+                final AjaxCheckBoxPanel accountId = new AjaxCheckBoxPanel(\n+                        \"accountId\", getString(\"accountId\"),\n+                        new PropertyModel(mappingTO, \"accountid\"), false);\n+\n+                accountId.getField().add(\n                         new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n \n                             private static final long serialVersionUID =\n                                     -1107858522700306810L;\n \n                             @Override\n-                            protected void onUpdate(AjaxRequestTarget art) {\n-                                mappingTO.setAccountid(\n-                                        accountId.getModelObject());\n+                            protected void onUpdate(AjaxRequestTarget target) {\n+                                destAttrName.setEnabled(\n+                                        !accountId.getModelObject()\n+                                        && !mappingTO.isPassword());\n+                                destAttrName.setModelObject(null);\n+                                destAttrName.setRequired(\n+                                        !accountId.getModelObject());\n+                                target.addComponent(destAttrName);\n                             }\n                         });\n \n                 item.add(accountId);\n \n-                final CheckBox password = new CheckBox(\"password\",\n-                        new PropertyModel(mappingTO, \"password\"));\n-                password.add(\n+                final AjaxCheckBoxPanel password = new AjaxCheckBoxPanel(\n+                        \"password\", getString(\"password\"),\n+                        new PropertyModel(mappingTO, \"password\"), true);\n+\n+                password.getField().add(\n                         new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n \n                             private static final long serialVersionUID =\n                                     -1107858522700306810L;\n \n                             @Override\n-                            protected void onUpdate(AjaxRequestTarget art) {\n-                                mappingTO.setPassword(\n-                                        password.getModelObject());\n+                            protected void onUpdate(AjaxRequestTarget target) {\n+                                destAttrName.setEnabled(\n+                                        !mappingTO.isAccountid()\n+                                        && !password.getModelObject());\n+                                destAttrName.setModelObject(null);\n+                                destAttrName.setRequired(\n+                                        !password.getModelObject());\n+                                target.addComponent(destAttrName);\n                             }\n                         });\n+\n                 item.add(password);\n             }\n         };\n+\n         mappings.setReuseItems(true);\n         mappingContainer.add(mappings);\n \n-        AjaxButton addSchemaMappingBtn = new IndicatingAjaxButton(\n+        final AjaxButton addSchemaMappingBtn = new IndicatingAjaxButton(\n                 \"addUserSchemaMappingBtn\", new ResourceModel(\"add\")) {\n \n             private static final long serialVersionUID = -4804368561204623354L;\n@@ -442,9 +443,35 @@ protected void onSubmit(final AjaxRequestTarget target,\n                 resourceTO.getMappings().add(new SchemaMappingTO());\n                 target.addComponent(mappingContainer);\n             }\n+\n+            @Override\n+            protected void onError(AjaxRequestTarget target, Form<?> form) {\n+                // ignore errors\n+            }\n         };\n+\n         addSchemaMappingBtn.setDefaultFormProcessing(false);\n-        form.add(addSchemaMappingBtn);\n+        addSchemaMappingBtn.setEnabled(!createFlag);\n+        mappingContainer.add(addSchemaMappingBtn);\n+\n+        connector.getField().add(\n+                new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n+                    private static final long serialVersionUID =\n+                            -1107858522700306810L;\n+\n+                    @Override\n+                    protected void onUpdate(AjaxRequestTarget target) {\n+                        mappings.removeAll();\n+                        addSchemaMappingBtn.setEnabled(\n+                                resourceTO.getConnectorId() != null\n+                                && resourceTO.getConnectorId() > 0);\n+\n+                        updateResourceSchemaNames(resourceTO.getConnectorId());\n+\n+                        target.addComponent(mappingContainer);\n+                    }\n+                });\n \n         AjaxButton submit = new IndicatingAjaxButton(\n                 \"apply\", new ResourceModel(\"submit\")) {\n@@ -508,59 +535,67 @@ protected void onError(final AjaxRequestTarget target,\n      * It's purposed for storing values in the\n      * corresponding property model after pressing 'Add' button.\n      */\n-    private class SourceMappingTypesDropDownChoice extends DropDownChoice {\n+    private class SourceMappingTypesDropDownChoice\n+            extends AjaxDropDownChoicePanel {\n \n         private static final long serialVersionUID = -2855668124505116627L;\n \n-        public SourceMappingTypesDropDownChoice(final String id,\n+        public SourceMappingTypesDropDownChoice(\n+                final String id,\n+                final String name,\n                 final PropertyModel<SourceMappingType> model,\n-                final IModel imodel,\n-                final DropDownChoice<String> chooserToPopulate) {\n+                final AjaxDropDownChoicePanel<String> chooserToPopulate) {\n \n-            super(id, model, imodel);\n+            super(id, name, model, false);\n \n-            add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+            field.add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n \n                 private static final long serialVersionUID =\n                         -1107858522700306810L;\n \n                 @Override\n                 protected void onUpdate(final AjaxRequestTarget target) {\n-                    chooserToPopulate.setChoices(\n-                            new LoadableDetachableModel<List<String>>() {\n-\n-                                private static final long serialVersionUID =\n-                                        5275935387613157437L;\n-\n-                                @Override\n-                                protected List<String> load() {\n-                                    List<String> result;\n-                                    switch (model.getObject()) {\n-                                        case UserSchema:\n-                                            result = uSchemaAttrNames;\n-                                            break;\n-\n-                                        case UserDerivedSchema:\n-                                            result = uDerSchemaAttrNames;\n-                                            break;\n-\n-                                        case UserVirtualSchema:\n-                                            result = uVirSchemaAttrNames;\n-                                            break;\n-\n-                                        case SyncopeUserId:\n-                                        case Password:\n-                                        default:\n-                                            result = Collections.EMPTY_LIST;\n-                                    }\n-\n-                                    return result;\n-                                }\n-                            });\n+\n+                    chooserToPopulate.setRequired(true);\n+                    chooserToPopulate.setEnabled(true);\n+\n+                    final List<String> result;\n+\n+                    switch (model.getObject()) {\n+                        case UserSchema:\n+                            result = uSchemaAttrNames;\n+                            break;\n+\n+                        case UserDerivedSchema:\n+                            result = uDerSchemaAttrNames;\n+                            break;\n+\n+                        case UserVirtualSchema:\n+                            result = uVirSchemaAttrNames;\n+                            break;\n+\n+                        case SyncopeUserId:\n+                        case Password:\n+                        default:\n+                            chooserToPopulate.setRequired(false);\n+                            chooserToPopulate.setEnabled(false);\n+                            result = Collections.EMPTY_LIST;\n+                    }\n+\n+                    chooserToPopulate.setChoices(result);\n                     target.addComponent(chooserToPopulate);\n-                    target.addComponent(mappingContainer);\n                 }\n             });\n         }\n     }\n+\n+    public final void updateResourceSchemaNames(Long connectorId) {\n+        if (connectorId != null && connectorId > 0) {\n+            resourceSchemaNames =\n+                    connectorRestClient.getSchemaNames(connectorId);\n+        } else {\n+            resourceSchemaNames =\n+                    Collections.EMPTY_LIST;\n+        }\n+    }\n }"},{"sha":"0fa34f0f7cce490b25653899fb0ff0e37ee9d077","filename":"console/src/main/java/org/syncope/console/pages/Resources.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -70,7 +70,7 @@ public class Resources extends BasePage {\n \n     private static final int WIN_HEIGHT = 500;\n \n-    private static final int WIN_WIDTH = 850;\n+    private static final int WIN_WIDTH = 900;\n \n     private WebMarkupContainer container;\n "},{"sha":"f6f791ed645d90434c1db8b94fc698f2a34b67e8","filename":"console/src/main/java/org/syncope/console/rest/ConnectorRestClient.java","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConnectorRestClient.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -100,4 +100,18 @@ public List<ConnBundleTO> getAllBundles() {\n \n         return bundles;\n     }\n+\n+    public List<String> getSchemaNames(final Long connectorId) {\n+        List<String> schemaNames = null;\n+\n+        try {\n+            schemaNames = Arrays.asList(restTemplate.getForObject(\n+                    baseURL + \"connector/{connectorId}/schema/list\",\n+                    String[].class, connectorId));\n+        } catch (SyncopeClientCompositeErrorException e) {\n+            LOG.error(\"While getting resource schema names\", e);\n+        }\n+\n+        return schemaNames;\n+    }\n }"},{"sha":"a9b8ca92802fd9eb8f04bef53b526338bb4d1dd3","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/AjaxTextFieldPanel.java","status":"modified","additions":36,"deletions":2,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -14,16 +14,23 @@\n  */\n package org.syncope.console.wicket.markup.html.form;\n \n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.regex.Pattern;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.markup.html.form.TextField;\n+import org.apache.wicket.extensions.ajax.markup.html.autocomplete.AutoCompleteTextField;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n \n public class AjaxTextFieldPanel extends FieldPanel<String> {\n \n     private static final long serialVersionUID = 238940918106696068L;\n \n+    private List<String> choices = Collections.EMPTY_LIST;\n+\n     public AjaxTextFieldPanel(\n             final String id,\n             final String name,\n@@ -32,7 +39,28 @@ public AjaxTextFieldPanel(\n \n         super(id, name, model, active);\n \n-        field = new TextField(\"textField\", model);\n+        field = new AutoCompleteTextField<String>(\"textField\", model) {\n+\n+            private static final long serialVersionUID = -6648767303091874219L;\n+\n+            @Override\n+            protected Iterator<String> getChoices(String input) {\n+                final Pattern pattern = Pattern.compile(\n+                        Pattern.quote(input) + \".*\",\n+                        Pattern.CASE_INSENSITIVE);\n+\n+                final List<String> result = new ArrayList<String>();\n+\n+                for (String choice : choices) {\n+                    if (pattern.matcher(choice).matches()) {\n+                        result.add(choice);\n+                    }\n+                }\n+\n+                return result.iterator();\n+            }\n+        };\n+\n         add(field.setLabel(new Model(name)).setOutputMarkupId(true));\n \n         if (active) {\n@@ -48,4 +76,10 @@ protected void onUpdate(AjaxRequestTarget art) {\n             });\n         }\n     }\n+\n+    public void setChoices(final List<String> choices) {\n+        if (choices != null) {\n+            this.choices = choices;\n+        }\n+    }\n }"},{"sha":"6410eb47abf591600b478840d5de1634571ee756","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage.html","status":"modified","additions":131,"deletions":130,"changes":261,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -41,150 +41,151 @@\n <wicket:extend>\n     <div style=\"margin:10px\">\n         <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n-\n         <form wicket:id=\"form\">\n-            <div id=\"formtable\">\n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"name\"><wicket:message key=\"name\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"name\">[name]</span>\n-                    </div>\n-                </div>\n+            <div id=\"tabs\">\n+                <ul>\n+                    <li  class=\"tabs-selected\"><a href=\"#resource\"><span><wicket:message key=\"resource\"/></span></a></li>\n+                    <li><a href=\"#mappings\"><span><wicket:message key=\"mappings\"/></span></a></li>\n+                </ul>\n+                <div id=\"resource\">\n+                    <div id=\"formtable\">\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"name\"><wicket:message key=\"name\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"name\">[name]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"connector\"><wicket:message key=\"connector\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"connector\">[connector]</span>\n-                    </div>\n-                </div>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"connector\"><wicket:message key=\"connector\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"connector\">[connector]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"mandatoryConstraint\"><wicket:message key=\"forceMandatoryConstraint\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"forceMandatoryConstraint\">[forceMandatoryConstraint]</span>\n-                    </div>\n-                </div>\n-\n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"optionalPropagationMode\"><wicket:message key=\"optionalPropagationMode\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"optionalPropagationMode\">[optionalPropagationMode]</span>\n-                    </div>\n-                </div>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"mandatoryConstraint\"><wicket:message key=\"forceMandatoryConstraint\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"forceMandatoryConstraint\">[forceMandatoryConstraint]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"createTraceLevel\"><wicket:message key=\"createTraceLevel\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"createTraceLevel\">[createTraceLevel]</span>\n-                    </div>\n-                </div>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"optionalPropagationMode\"><wicket:message key=\"optionalPropagationMode\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"optionalPropagationMode\">[optionalPropagationMode]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"updateTraceLevel\"><wicket:message key=\"updateTraceLevel\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"updateTraceLevel\">[updateTraceLevel]</span>\n-                    </div>\n-                </div>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"createTraceLevel\"><wicket:message key=\"createTraceLevel\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"createTraceLevel\">[createTraceLevel]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"deleteTraceLevel\"><wicket:message key=\"deleteTraceLevel\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"deleteTraceLevel\">[deleteTraceLevel]</span>\n-                    </div>\n-                </div>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"updateTraceLevel\"><wicket:message key=\"updateTraceLevel\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"updateTraceLevel\">[updateTraceLevel]</span>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"accountLink\"><wicket:message key=\"accountLink\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field medium_dynamicsize\">\n-                         <span wicket:id=\"accountLink\">[accountLink]</span>\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_label medium_fixedsize\">\n+                                <label for=\"deleteTraceLevel\"><wicket:message key=\"deleteTraceLevel\"/></label>\n+                            </div>\n+                            <div class=\"tablecolumn_field medium_dynamicsize\">\n+                                <span wicket:id=\"deleteTraceLevel\">[deleteTraceLevel]</span>\n+                            </div>\n+                        </div>\n                     </div>\n                 </div>\n+                <div id=\"mappings\">\n+                    <div id=\"formtable\">\n+                        <div class=\"tablerow\">\n+                            <div class=\"tablecolumn_field all_dynamicsize\">\n+                                <table id=\"mappingUserSchema\"\n+                                       class=\"ui-widget ui-widget-content ui-corner-all\"\n+                                       style=\"font-size: 1em;margin-top:2px;\"\n+                                       width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n+                                       wicket:id=\"mappingContainer\">\n+                                    <thead>\n+                                        <tr class=\"ui-widget-header\">\n+                                            <th><wicket:message key=\"delete\"/></th>\n+                                    <th><wicket:message key=\"sourceMappingTypes\"/></th>\n+                                    <th><wicket:message key=\"sourceAttrNames\"/></th>\n+                                    <th><wicket:message key=\"destAttrNames\"/></th>\n+                                    <th><wicket:message key=\"mandatoryCondition\"/></th>\n+                                    <th><wicket:message key=\"accountId\"/></th>\n+                                    <th><wicket:message key=\"password\"/></th>\n+                                    </tr>\n+                                    </thead>\n+                                    <tfoot>\n+                                        <tr>\n+                                            <td colspan=\"7\" style=\"padding: 5px\">\n+                                                <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                                                       wicket:id=\"addUserSchemaMappingBtn\" />\n+                                            </td>\n+                                        </tr>\n+                                    </tfoot>\n+                                    <tbody>\n+                                        <tr wicket:id=\"mappings\">\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"sourceMappingTypes\">[sourceMappingTypes]</span>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"sourceAttrNames\">[sourceAttrNames]</span>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"destAttrName\">[destAttrName]</span>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"mandatoryCondition\">[mandatoryCondition]</span>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"accountId\">[accountId]</span>\n+                                            </td>\n+                                            <td align=\"center\" valign=\"middle\">\n+                                                <span wicket:id=\"password\">[password]</span>\n+                                            </td>\n+                                        </tr>\n+                                    </tbody>\n+                                </table>\n+                            </div>\n+                        </div>\n \n-                <div class=\"tablerow\">\n-                    <div class=\"tablecolumn_label medium_fixedsize\">\n-                         <label for=\"mappingUserSchema\"><wicket:message key=\"mappingUserSchema\"/></label>\n-                    </div>\n-                    <div class=\"tablecolumn_field all_dynamicsize\">\n-                         <table id=\"mappingUserSchema\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\">\n-                            <thead>\n-                                <tr class=\"ui-widget-header\">\n-                                    <th><wicket:message key=\"delete\"/></th>\n-                            <th><wicket:message key=\"sourceMappingTypes\"/></th>\n-                            <th><wicket:message key=\"sourceAttrNames\"/></th>\n-                            <th><wicket:message key=\"destAttrNames\"/></th>\n-                            <th><wicket:message key=\"mandatoryCondition\"/></th>\n-                            <th><wicket:message key=\"accountId\"/></th>\n-                            <th><wicket:message key=\"password\"/></th>\n-                            </tr>\n-                            </thead>\n-                            <tfoot>\n-                                <tr>\n-                                    <td>\n-                                        <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                               wicket:id=\"addUserSchemaMappingBtn\" />\n-                                    </td>\n-                                </tr>\n-                            </tfoot>\n-                            <tbody wicket:id=\"mappingContainer\">\n-                                <tr wicket:id=\"mappings\">\n-                                    <td align=\"center\" valign=\"middle\">\n-                                        <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                    </td>\n-                                    <td>\n-                                        <select class=\"text ui-widget-content ui-corner-all\"\n-                                                style=\"width:100%\" wicket:id=\"sourceMappingTypes\"/>\n-                                    </td>\n-                                    <td>\n-                                        <select class=\"text ui-widget-content ui-corner-all\"\n-                                                style=\"width:100%\" wicket:id=\"sourceAttrNames\"/>\n-                                    </td>\n-                                    <td align=\"center\" valign=\"middle\">\n-                                        <input type=\"text\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"destAttrName\"/>\n-                                    </td>\n-                                    <td align=\"center\" valign=\"middle\">\n-                                        <input type=\"text\"\n-                                               class=\"text ui-widget-content ui-corner-all\"\n-                                               wicket:id=\"mandatoryCondition\"/>\n-                                    </td>\n-                                    <td align=\"center\" valign=\"middle\">\n-                                        <input type=\"checkbox\" class=\"checkbox\" wicket:id=\"accountId\"/>\n-                                    </td>\n-                                    <td align=\"center\" valign=\"middle\">\n-                                        <input type=\"checkbox\" class=\"checkbox\" wicket:id=\"password\"/>\n-                                    </td>\n-                                </tr>\n-                            </tbody>\n-                        </table>\n+                        <div class=\"tablerow\" style=\"margin-top: 10px\">\n+                            <div class=\"tablecolumn_label long_fixedsize\">\n+                                <label for=\"accountLink\"><wicket:message key=\"accountLink\"/></label>\n+                                <span wicket:id=\"accountLink\">[accountLink]</span>\n+                            </div>\n+                        </div>\n                     </div>\n                 </div>\n \n+                <script type=\"text/javascript\">\n+                    $(function() {\n+                        $('#formtable div.tablerow:even').addClass(\"alt\");\n+                    });\n+                </script>\n             </div>\n-            <script type=\"text/javascript\">\n-                $(function() {\n-                    $('#formtable div.tablerow:even').addClass(\"alt\");\n-                });\n-            </script>   \n-\n-            <div style=\"margin: 10px 0px 0\">\n+            <div style=\"margin: 20px 10px 0\">\n                 <input type=\"submit\"\n                        class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n                        wicket:id=\"apply\"/>"},{"sha":"087036e59f25b98cc06752c5ebabd31b709ed0d8","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -1,4 +1,5 @@\n-tab1=Resources\n+resource=Resource Details\n+mappings=Schema Mappings\n create_attribute=Create new resource\n required_alert=All form fields are required\n name=Name"},{"sha":"367e088fa3f5a2a5132c4313ea092f5767006c86","filename":"console/src/main/resources/org/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -1,4 +1,6 @@\n-tab1=Risorse\n+resource=Dettagli Risorsa\n+mappings=Schema Mapping\n+\n create_attribute=Crea nuova risorsa\n required_alert=Tutti i campi sono richiesti\n name=Nome"},{"sha":"d0fc8439be383f2171e53999cf21dd5bf129d52e","filename":"console/src/test/java/org/syncope/console/ResourceTestITCase.java","status":"modified","additions":19,"deletions":3,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FResourceTestITCase.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -30,7 +30,7 @@ public void browseCreateModal() {\n             }\n             try {\n                 if (selenium.isElementPresent(\n-                        \"//form/div[2]/div/div/label[text()='Name']\")) {\n+                        \"//form/div[2]/div/div/div/div/label[text()='Name']\")) {\n                     break;\n                 }\n             } catch (Exception e) {\n@@ -57,7 +57,7 @@ public void browseEditModal() {\n             }\n             try {\n                 if (selenium.isElementPresent(\n-                        \"//form/div[2]/div/div/label[text()='Name']\")) {\n+                        \"//form/div[2]/div/div/div/div/label[text()='Name']\")) {\n                     break;\n                 }\n             } catch (Exception e) {\n@@ -68,7 +68,23 @@ public void browseEditModal() {\n             }\n         }\n \n-        selenium.click(\"//tr[2]/td/input\");\n+        selenium.click(\"//li[2]/a\");\n+        for (int second = 0;; second++) {\n+            if (second >= 60) {\n+                fail(\"timeout\");\n+            }\n+            try {\n+                if (selenium.isElementPresent(\"//tbody/tr\")) {\n+                    break;\n+                }\n+            } catch (Exception e) {\n+            }\n+            try {\n+                Thread.sleep(1000);\n+            } catch (InterruptedException e) {\n+            }\n+        }\n+        selenium.click(\"//tbody/tr[2]/td/input\");\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n         selenium.click(\"name=apply\");"},{"sha":"2a2f4d22c589c76a9cc41eacc5b01876eef9ce91","filename":"core/src/main/java/org/syncope/core/persistence/beans/AbstractVirAttr.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractVirAttr.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractVirAttr.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractVirAttr.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -101,7 +101,7 @@ protected <T extends AbstractAttributable> List<Object> retrieveValues(\n                             + \"\\n\\tPassword: \" + mapping.isPassword());\n                 }\n \n-                if (mapping.getSourceAttrName().equals(attributeName)\n+                if (attributeName.equals(mapping.getSourceAttrName())\n                         && mapping.getSourceMappingType() == sourceMappingType) {\n \n                     attributeNames.add(mapping.getDestAttrName());"},{"sha":"b0d04070ff4b95f72a061946ed9178b2eb27b81e","filename":"core/src/main/java/org/syncope/core/persistence/beans/SchemaMapping.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSchemaMapping.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSchemaMapping.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FSchemaMapping.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -25,16 +25,20 @@\n import javax.persistence.ManyToOne;\n import javax.validation.constraints.Max;\n import javax.validation.constraints.Min;\n+import org.syncope.core.persistence.validation.entity.SchemaMappingCheck;\n import org.syncope.types.SourceMappingType;\n \n @Entity\n @Cacheable\n+@SchemaMappingCheck\n public class SchemaMapping extends AbstractBaseBean {\n \n+    private static final long serialVersionUID = 7383601853619332424L;\n+\n     @Id\n     private Long id;\n \n-    @Column(nullable = false)\n+    @Column(nullable = true)\n     private String sourceAttrName;\n \n     @Column(nullable = false)\n@@ -50,7 +54,7 @@ public class SchemaMapping extends AbstractBaseBean {\n     /**\n      * Target resource's field to be mapped.\n      */\n-    @Column(nullable = false)\n+    @Column(nullable = true)\n     private String destAttrName;\n \n     /**"},{"sha":"c7ceaee5dde921599e5ddeb3a016f063296a0074","filename":"core/src/main/java/org/syncope/core/persistence/beans/TargetResource.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FTargetResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FTargetResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FTargetResource.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -169,7 +169,7 @@ public List<SchemaMapping> getMappings(final String sourceAttrName,\n \n         List<SchemaMapping> result = new ArrayList<SchemaMapping>();\n         for (SchemaMapping mapping : mappings) {\n-            if (mapping.getSourceAttrName().equals(sourceAttrName)\n+            if (sourceAttrName.equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType() == sourceMappingType) {\n \n                 result.add(mapping);"},{"sha":"1ea9a18e10ff315591c9526f9b5052931c9f5b2c","filename":"core/src/main/java/org/syncope/core/persistence/propagation/ConnectorFacadeProxy.java","status":"modified","additions":30,"deletions":0,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fpropagation%2FConnectorFacadeProxy.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -31,9 +31,12 @@\n import org.identityconnectors.framework.api.ConnectorInfo;\n import org.identityconnectors.framework.api.ConnectorKey;\n import org.identityconnectors.framework.common.objects.Attribute;\n+import org.identityconnectors.framework.common.objects.AttributeInfo;\n import org.identityconnectors.framework.common.objects.ConnectorObject;\n import org.identityconnectors.framework.common.objects.ObjectClass;\n+import org.identityconnectors.framework.common.objects.ObjectClassInfo;\n import org.identityconnectors.framework.common.objects.OperationOptions;\n+import org.identityconnectors.framework.common.objects.Schema;\n import org.identityconnectors.framework.common.objects.SyncDelta;\n import org.identityconnectors.framework.common.objects.SyncResultsHandler;\n import org.identityconnectors.framework.common.objects.SyncToken;\n@@ -511,6 +514,33 @@ public Set<Attribute> getObjectAttributes(\n         return attributes;\n     }\n \n+    /**\n+     * Return resource schema names.\n+     * @param showall return __NAME__ and __PASSWORD__ attribute if true.\n+     * @return a list of schema names.\n+     */\n+    public List<String> getSchema(final boolean showall) {\n+        final List<String> resourceSchemaNames = new ArrayList<String>();\n+\n+        final Schema schema = connector.schema();\n+\n+        try {\n+            for (ObjectClassInfo info : schema.getObjectClassInfo()) {\n+                for (AttributeInfo attrInfo : info.getAttributeInfo()) {\n+                    if (showall || (!\"__NAME__\".equals(attrInfo.getName())\n+                            && !\"__PASSWORD__\".equals(attrInfo.getName()))) {\n+                        resourceSchemaNames.add(attrInfo.getName());\n+                    }\n+                }\n+            }\n+        } catch (Throwable t) {\n+            // catch throwable in order to manage unpredictable behaviors\n+            LOG.debug(\"Unsupported operation {}\", t);\n+        }\n+\n+        return resourceSchemaNames;\n+    }\n+\n     /**\n      * Validate a connector instance.\n      */"},{"sha":"10e9907eabe8508224931d5e76baeaf2136016fd","filename":"core/src/main/java/org/syncope/core/persistence/validation/entity/SchemaMappingCheck.java","status":"added","additions":38,"deletions":0,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingCheck.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingCheck.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingCheck.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -0,0 +1,38 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.validation.entity;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+import javax.validation.Constraint;\n+import javax.validation.Payload;\n+\n+@Target({\n+    ElementType.TYPE\n+})\n+@Retention(RetentionPolicy.RUNTIME)\n+@Constraint(validatedBy = SchemaMappingValidator.class)\n+@Documented\n+public @interface SchemaMappingCheck {\n+\n+    String message() default \"{org.syncope.core.validation.mapping}\";\n+\n+    Class<?>[] groups() default {};\n+\n+    Class<? extends Payload>[] payload() default {};\n+}"},{"sha":"c3b5ef6039a121a0923d447b51e0b32dbb95cdbd","filename":"core/src/main/java/org/syncope/core/persistence/validation/entity/SchemaMappingValidator.java","status":"added","additions":63,"deletions":0,"changes":63,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FSchemaMappingValidator.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -0,0 +1,63 @@\n+/*\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.core.persistence.validation.entity;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+import org.syncope.core.persistence.beans.SchemaMapping;\n+import org.syncope.types.EntityViolationType;\n+import org.syncope.types.SourceMappingType;\n+\n+public class SchemaMappingValidator extends AbstractValidator\n+        implements ConstraintValidator<SchemaMappingCheck, SchemaMapping> {\n+\n+    @Override\n+    public void initialize(final SchemaMappingCheck constraintAnnotation) {\n+    }\n+\n+    @Override\n+    public boolean isValid(\n+            final SchemaMapping object,\n+            final ConstraintValidatorContext context) {\n+\n+        context.disableDefaultConstraintViolation();\n+\n+        if (object.getDestAttrName() == null\n+                && !object.isAccountid()\n+                && !object.isPassword()) {\n+            context.buildConstraintViolationWithTemplate(\n+                    \"Missing destination attribute name\").addNode(\n+                    EntityViolationType.InvalidSchemaMapping.toString()).\n+                    addConstraintViolation();\n+\n+            return false;\n+        }\n+\n+        if (object.getSourceAttrName() == null\n+                && SourceMappingType.SyncopeUserId\n+                != object.getSourceMappingType()\n+                && SourceMappingType.Password\n+                != object.getSourceMappingType()) {\n+            context.buildConstraintViolationWithTemplate(\n+                    \"Missing source attribute name\").addNode(\n+                    EntityViolationType.InvalidSchemaMapping.toString()).\n+                    addConstraintViolation();\n+\n+            return false;\n+        }\n+\n+        return true;\n+    }\n+}"},{"sha":"9ac8ac6df061fcb3c92b1485fe25193cdcff0e56","filename":"core/src/main/java/org/syncope/core/rest/controller/ConnInstanceController.java","status":"modified","additions":40,"deletions":0,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -29,6 +29,7 @@\n import org.identityconnectors.framework.api.ConnectorInfoManager;\n import org.identityconnectors.framework.api.ConnectorKey;\n import org.springframework.beans.BeansException;\n+import org.springframework.beans.factory.NoSuchBeanDefinitionException;\n import org.springframework.http.HttpStatus;\n import org.springframework.security.access.prepost.PreAuthorize;\n import org.springframework.web.bind.annotation.PathVariable;\n@@ -289,4 +290,43 @@ public List<ConnBundleTO> getBundles()\n \n         return connectorBundleTOs;\n     }\n+\n+    @PreAuthorize(\"hasRole('CONNECTOR_READ')\")\n+    @RequestMapping(method = RequestMethod.GET,\n+    value = \"/{connectorId}/schema/list\")\n+    public List<String> getSchemaNames(\n+            @PathVariable(\"connectorId\") final Long connectorId)\n+            throws NotFoundException {\n+\n+        return getSchemaNames(connectorId, false);\n+    }\n+\n+    @PreAuthorize(\"hasRole('CONNECTOR_READ')\")\n+    @RequestMapping(method = RequestMethod.GET,\n+    value = \"/{connectorId}/schema/list/all\")\n+    public List<String> getAllSchemaNames(\n+            @PathVariable(\"connectorId\") final Long connectorId)\n+            throws NotFoundException {\n+        return getSchemaNames(connectorId, true);\n+    }\n+\n+    private List<String> getSchemaNames(\n+            final Long connectorId, final boolean showall)\n+            throws NotFoundException {\n+        try {\n+            final ConnectorFacadeProxy connector = connInstanceLoader.getConnector(\n+                    ConnInstanceLoader.getBeanName(connectorId));\n+\n+            if (connector == null) {\n+                throw new NoSuchBeanDefinitionException(\n+                        \"Connector instance bean not found\");\n+            }\n+\n+            return connector.getSchema(showall);\n+\n+        } catch (BeansException e) {\n+            LOG.error(\"Connector instance bean '{}' not found\", connectorId);\n+            throw new NotFoundException(\"Connector bean not found\", e);\n+        }\n+    }\n }"},{"sha":"5ed0d071143bb520496b9164013403797c836657","filename":"core/src/main/java/org/syncope/core/rest/controller/ResourceController.java","status":"modified","additions":6,"deletions":5,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FResourceController.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -63,18 +63,19 @@ public ResourceTO create(final HttpServletResponse response,\n \n         LOG.debug(\"Resource creation: {}\", resourceTO);\n \n-        SyncopeClientCompositeErrorException scce =\n-                new SyncopeClientCompositeErrorException(\n-                HttpStatus.BAD_REQUEST);\n-\n         if (resourceTO == null) {\n             LOG.error(\"Missing resource\");\n \n             throw new NotFoundException(\"Missing resource\");\n         }\n \n+        SyncopeClientCompositeErrorException scce =\n+                new SyncopeClientCompositeErrorException(\n+                HttpStatus.BAD_REQUEST);\n+\n         LOG.debug(\"Verify that resource doesn't exist yet\");\n-        if (resourceDAO.find(resourceTO.getName()) != null) {\n+        if (resourceTO.getName() != null\n+                && resourceDAO.find(resourceTO.getName()) != null) {\n             SyncopeClientException ex = new SyncopeClientException(\n                     SyncopeClientExceptionType.DuplicateUniqueValue);\n "},{"sha":"244c78ab85112ba846485f66f4ad89823c63e7d2","filename":"core/src/main/java/org/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":9,"deletions":10,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -324,8 +324,7 @@ protected ResourceOperations fill(\n                     LOG.debug(\"No attribute found for schema {}\", schema);\n                 } else {\n                     String newValue = null;\n-                    for (AttributeMod mod : attributableMod.\n-                            getAttributesToBeUpdated()) {\n+                    for (AttributeMod mod : attributableMod.getAttributesToBeUpdated()) {\n \n                         if (schema.getName().equals(mod.getSchema())) {\n                             newValue = mod.getValuesToBeAdded().\n@@ -344,7 +343,7 @@ protected ResourceOperations fill(\n                 }\n \n                 for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-                    if (mapping.getSourceAttrName().equals(schema.getName())\n+                    if (schema.getName().equals(mapping.getSourceAttrName())\n                             && mapping.getSourceMappingType()\n                             == attributableUtil.sourceMappingType()\n                             && mapping.getResource() != null\n@@ -380,7 +379,7 @@ protected ResourceOperations fill(\n \n             if (schema != null) {\n                 for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-                    if (mapping.getSourceAttrName().equals(schema.getName())\n+                    if (schema.getName().equals(mapping.getSourceAttrName())\n                             && mapping.getSourceMappingType()\n                             == attributableUtil.sourceMappingType()\n                             && mapping.getResource() != null\n@@ -480,8 +479,8 @@ protected ResourceOperations fill(\n                 }\n \n                 for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-                    if (mapping.getSourceAttrName().equals(\n-                            derivedSchema.getName())\n+                    if (derivedSchema.getName().equals(\n+                            mapping.getSourceAttrName())\n                             && mapping.getSourceMappingType()\n                             == attributableUtil.derivedSourceMappingType()\n                             && mapping.getResource() != null\n@@ -528,8 +527,8 @@ protected ResourceOperations fill(\n                 }\n \n                 for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-                    if (mapping.getSourceAttrName().equals(\n-                            virtualSchema.getName())\n+                    if (virtualSchema.getName().equals(\n+                            mapping.getSourceAttrName())\n                             && mapping.getSourceMappingType()\n                             == attributableUtil.virtualSourceMappingType()\n                             && mapping.getResource() != null\n@@ -563,8 +562,8 @@ protected ResourceOperations fill(\n \n             if (derivedSchema != null) {\n                 for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-                    if (mapping.getSourceAttrName().equals(\n-                            derivedSchema.getName())\n+                    if (derivedSchema.getName().equals(\n+                            mapping.getSourceAttrName())\n                             && mapping.getSourceMappingType()\n                             == attributableUtil.derivedSourceMappingType()\n                             && mapping.getResource() != null"},{"sha":"c29bf7b53d00e38b631dcf7c2ac4e91f20bcf7ee","filename":"core/src/main/java/org/syncope/core/rest/data/ResourceDataBinder.java","status":"modified","additions":5,"deletions":39,"changes":44,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FResourceDataBinder.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -70,43 +70,23 @@ public TargetResource getResource(final TargetResource resource,\n             final ResourceTO resourceTO)\n             throws SyncopeClientCompositeErrorException {\n \n-        final SyncopeClientException requiredValuesMissing =\n-                new SyncopeClientException(\n-                SyncopeClientExceptionType.RequiredValuesMissing);\n-\n         if (resourceTO == null) {\n             return null;\n         }\n \n-        if (resourceTO.getName() == null) {\n-            requiredValuesMissing.addElement(\"name\");\n-        }\n+        resource.setName(resourceTO.getName());\n \n         ConnInstance connector = null;\n \n         if (resourceTO.getConnectorId() != null) {\n             connector = connectorInstanceDAO.find(resourceTO.getConnectorId());\n         }\n \n-        if (connector == null) {\n-            requiredValuesMissing.addElement(\"connector\");\n-        }\n-\n-        // Throw composite exception if there is at least one element set\n-        // in the composing exceptions\n-        if (!requiredValuesMissing.getElements().isEmpty()) {\n-            SyncopeClientCompositeErrorException scce =\n-                    new SyncopeClientCompositeErrorException(\n-                    HttpStatus.BAD_REQUEST);\n-            scce.addException(requiredValuesMissing);\n-            throw scce;\n+        if (connector != null) {\n+            resource.setConnector(connector);\n+            connector.addResource(resource);\n         }\n-\n-        resource.setName(resourceTO.getName());\n-\n-        resource.setConnector(connector);\n-        connector.addResource(resource);\n-\n+        \n         resource.setForceMandatoryConstraint(\n                 resourceTO.isForceMandatoryConstraint());\n \n@@ -230,20 +210,6 @@ private SchemaMapping getSchemaMapping(TargetResource resource,\n                     requiredValuesMissing.addElement(\"sourceAttrName\");\n             }\n         }\n-        if (mappingTO.getDestAttrName() == null) {\n-            requiredValuesMissing.addElement(\"destAttrName\");\n-        }\n-        if (mappingTO.getSourceMappingType() == null) {\n-            requiredValuesMissing.addElement(\"sourceMappingType\");\n-        }\n-        if (mappingTO.getMandatoryCondition() == null) {\n-            requiredValuesMissing.addElement(\"mandatoryCondition\");\n-        }\n-\n-        // a resource must be provided\n-        if (resource == null) {\n-            requiredValuesMissing.addElement(\"resource\");\n-        }\n \n         // Throw composite exception if there is at least one element set\n         // in the composing exceptions"},{"sha":"3a5452650a117f71f693fd2232eaea4562458d88","filename":"core/src/test/java/org/syncope/core/persistence/dao/ResourceTest.java","status":"modified","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FResourceTest.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -20,11 +20,13 @@\n import org.connid.bundles.soap.WebServiceConnector;\n import org.junit.Test;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.test.annotation.ExpectedException;\n import org.springframework.transaction.annotation.Transactional;\n import org.syncope.core.persistence.beans.ConnInstance;\n import org.syncope.core.persistence.beans.TargetResource;\n import org.syncope.core.persistence.beans.SchemaMapping;\n import org.syncope.core.persistence.AbstractTest;\n+import org.syncope.core.persistence.validation.entity.InvalidEntityException;\n import org.syncope.types.SourceMappingType;\n \n @Transactional\n@@ -96,6 +98,54 @@ public final void save() {\n         assertNotNull(actual);\n     }\n \n+    @Test\n+    @ExpectedException(value = InvalidEntityException.class)\n+    public final void saveInvalidMappingSourceAttr() {\n+\n+        TargetResource resource = new TargetResource();\n+        resource.setName(\"ws-target-resource-basic-save-invalid\");\n+\n+        SchemaMapping accountId = new SchemaMapping();\n+        accountId.setResource(resource);\n+        accountId.setAccountid(true);\n+        accountId.setSourceMappingType(SourceMappingType.UserSchema);\n+\n+        resource.addMapping(accountId);\n+\n+        // save the resource\n+        TargetResource actual = resourceDAO.save(resource);\n+\n+        assertNotNull(actual);\n+    }\n+\n+    @Test\n+    @ExpectedException(value = InvalidEntityException.class)\n+    public final void saveInvalidMappingDestAttr() {\n+\n+        TargetResource resource = new TargetResource();\n+        resource.setName(\"ws-target-resource-basic-save-invalid\");\n+\n+        SchemaMapping mapping = new SchemaMapping();\n+        mapping.setResource(resource);\n+        mapping.setAccountid(true);\n+        mapping.setSourceAttrName(\"username\");\n+        mapping.setSourceMappingType(SourceMappingType.UserSchema);\n+\n+        resource.addMapping(mapping);\n+\n+        mapping = new SchemaMapping();\n+        mapping.setResource(resource);\n+        mapping.setSourceAttrName(\"username\");\n+        mapping.setSourceMappingType(SourceMappingType.UserSchema);\n+\n+        resource.addMapping(mapping);\n+\n+        // save the resource\n+        TargetResource actual = resourceDAO.save(resource);\n+\n+        assertNotNull(actual);\n+    }\n+\n     @Test\n     public final void delete() {\n         TargetResource resource = resourceDAO.find(\"ws-target-resource-2\");"},{"sha":"e967456530c5a82519fbb6809789b2179026347c","filename":"core/src/test/java/org/syncope/core/persistence/relationships/ResourceTest.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FResourceTest.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -103,7 +103,7 @@ public final void issue42() {\n \n         Set<SchemaMapping> beforeUserIdMappings = new HashSet<SchemaMapping>();\n         for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-            if (mapping.getSourceAttrName().equals(userId.getName())\n+            if (userId.getName().equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType()\n                     == SourceMappingType.UserSchema) {\n \n@@ -141,7 +141,7 @@ public final void issue42() {\n \n         Set<SchemaMapping> afterUserIdMappings = new HashSet<SchemaMapping>();\n         for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-            if (mapping.getSourceAttrName().equals(userId.getName())\n+            if (userId.getName().equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType()\n                     == SourceMappingType.UserSchema) {\n "},{"sha":"7a6e8f2a3465ddc83097e4fa3bcb3d688e74d99e","filename":"core/src/test/java/org/syncope/core/persistence/relationships/SchemaTest.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FSchemaTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FSchemaTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Frelationships%2FSchemaTest.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -61,7 +61,7 @@ public final void test1() {\n         // check for associated mappings\n         Set<SchemaMapping> mappings = new HashSet<SchemaMapping>();\n         for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-            if (mapping.getSourceAttrName().equals(schema.getName())\n+            if (schema.getName().equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType()\n                     == SourceMappingType.UserSchema) {\n \n@@ -83,7 +83,7 @@ public final void test1() {\n         // check for mappings deletion\n         mappings = new HashSet<SchemaMapping>();\n         for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-            if (mapping.getSourceAttrName().equals(\"username\")\n+            if (\"username\".equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType()\n                     == SourceMappingType.UserSchema) {\n \n@@ -109,7 +109,7 @@ public void test2() {\n         // check for associated mappings\n         Set<SchemaMapping> mappings = new HashSet<SchemaMapping>();\n         for (SchemaMapping mapping : resourceDAO.findAllMappings()) {\n-            if (mapping.getSourceAttrName().equals(schema.getName())\n+            if (schema.getName().equals(mapping.getSourceAttrName())\n                     && mapping.getSourceMappingType()\n                     == SourceMappingType.UserSchema) {\n "},{"sha":"547539d3d861bb62cf186c040cea088e498f2615","filename":"core/src/test/java/org/syncope/core/rest/ConnInstanceTestITCase.java","status":"modified","additions":24,"deletions":0,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FConnInstanceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FConnInstanceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FConnInstanceTestITCase.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -279,4 +279,28 @@ public void getBundles() {\n             assertNotNull(bundle);\n         }\n     }\n+\n+    @Test\n+    public void getSchemaNames() {\n+        List<String> schemaNames = Arrays.asList(restTemplate.getForObject(\n+                BASE_URL + \"connector/{connectorId}/schema/list/all\",\n+                String[].class, 100));\n+\n+        assertNotNull(schemaNames);\n+        assertFalse(schemaNames.isEmpty());\n+\n+        schemaNames = Arrays.asList(restTemplate.getForObject(\n+                BASE_URL + \"connector/{connectorId}/schema/list\",\n+                String[].class, 101));\n+\n+        assertNotNull(schemaNames);\n+        assertTrue(schemaNames.isEmpty());\n+\n+        schemaNames = Arrays.asList(restTemplate.getForObject(\n+                BASE_URL + \"connector/{connectorId}/schema/list\",\n+                String[].class, 104));\n+\n+        assertNotNull(schemaNames);\n+        assertFalse(schemaNames.isEmpty());\n+    }\n }"},{"sha":"0c291d075c1ba631212bf305749806b889fd0a92","filename":"core/src/test/java/org/syncope/core/rest/ResourceTestITCase.java","status":"modified","additions":90,"deletions":0,"changes":90,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FResourceTestITCase.java?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -26,7 +26,9 @@\n import org.syncope.client.to.ResourceTO;\n import org.syncope.client.to.SchemaMappingTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n+import org.syncope.client.validation.SyncopeClientException;\n import org.syncope.types.SourceMappingType;\n+import org.syncope.types.SyncopeClientExceptionType;\n \n public class ResourceTestITCase extends AbstractTest {\n \n@@ -37,6 +39,7 @@ public void createExistingResource() {\n         ResourceTO resourceTO = new ResourceTO();\n \n         resourceTO.setName(resourceName);\n+        resourceTO.setConnectorId(100L);\n \n         restTemplate.postForObject(BASE_URL + \"resource/create.json\",\n                 resourceTO, ResourceTO.class);\n@@ -86,6 +89,93 @@ public void create() {\n         assertNotNull(actual);\n     }\n \n+    @Test\n+    public void createWithSingleMapping() {\n+        String resourceName = \"ws-target-resource-create-single\";\n+        ResourceTO resourceTO = new ResourceTO();\n+\n+        resourceTO.setName(resourceName);\n+        resourceTO.setConnectorId(102L);\n+\n+        SchemaMappingTO schemaMappingTO = new SchemaMappingTO();\n+        schemaMappingTO.setSourceMappingType(SourceMappingType.SyncopeUserId);\n+        schemaMappingTO.setAccountid(true);\n+        resourceTO.addMapping(schemaMappingTO);\n+\n+        ResourceTO actual = restTemplate.postForObject(\n+                BASE_URL + \"resource/create.json\",\n+                resourceTO, ResourceTO.class);\n+\n+        assertNotNull(actual);\n+    }\n+\n+    @Test\n+    public void createWithWrongMapping() {\n+        String resourceName = \"ws-target-resource-create-wrong\";\n+        ResourceTO resourceTO = new ResourceTO();\n+\n+        resourceTO.setName(resourceName);\n+        resourceTO.setConnectorId(102L);\n+\n+        SchemaMappingTO schemaMappingTO = new SchemaMappingTO();\n+        schemaMappingTO.setSourceMappingType(SourceMappingType.SyncopeUserId);\n+        schemaMappingTO.setAccountid(true);\n+        resourceTO.addMapping(schemaMappingTO);\n+\n+        schemaMappingTO = new SchemaMappingTO();\n+        schemaMappingTO.setSourceMappingType(SourceMappingType.UserSchema);\n+        schemaMappingTO.setDestAttrName(\"email\");\n+        // missing sourceAttrName ...\n+        resourceTO.addMapping(schemaMappingTO);\n+\n+\n+        Throwable t = null;\n+\n+        try {\n+\n+            restTemplate.postForObject(\n+                    BASE_URL + \"resource/create.json\",\n+                    resourceTO, ResourceTO.class);\n+\n+        } catch (SyncopeClientCompositeErrorException e) {\n+            t = e;\n+\n+            SyncopeClientException requiredValueMissing = e.getException(\n+                    SyncopeClientExceptionType.RequiredValuesMissing);\n+            assertNotNull(requiredValueMissing);\n+            assertNotNull(requiredValueMissing.getElements());\n+            assertEquals(1, requiredValueMissing.getElements().size());\n+            assertEquals(\"sourceAttrName\",\n+                    requiredValueMissing.getElements().iterator().next());\n+        }\n+        assertNotNull(t);\n+    }\n+\n+    @Test\n+    @ExpectedException(value = SyncopeClientCompositeErrorException.class)\n+    public final void createWithoutDestAttr() {\n+        String resourceName = \"ws-target-resource-create-wrong\";\n+        ResourceTO resourceTO = new ResourceTO();\n+\n+        resourceTO.setName(resourceName);\n+        resourceTO.setConnectorId(102L);\n+\n+        SchemaMappingTO schemaMappingTO = new SchemaMappingTO();\n+        schemaMappingTO.setSourceMappingType(SourceMappingType.SyncopeUserId);\n+        schemaMappingTO.setAccountid(true);\n+        resourceTO.addMapping(schemaMappingTO);\n+\n+        schemaMappingTO = new SchemaMappingTO();\n+        schemaMappingTO.setSourceMappingType(SourceMappingType.UserSchema);\n+        schemaMappingTO.setSourceAttrName(\"usernane\");\n+        // missing destAttrName ...\n+        resourceTO.addMapping(schemaMappingTO);\n+\n+        restTemplate.postForObject(\n+                BASE_URL + \"resource/create.json\",\n+                resourceTO, ResourceTO.class);\n+    }\n+\n     @Test\n     public void createWithPasswordPolicy() {\n         String resourceName = \"res-with-password-policy\";"},{"sha":"1d71f9dd51c3d23bdc05595586e36931d3f3761c","filename":"core/src/test/resources/content.xml","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/c2731f2623c19091142ee8d40e29dcb7c6bf60b1/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=c2731f2623c19091142ee8d40e29dcb7c6bf60b1","patch":"@@ -248,7 +248,7 @@\n \n     <SchemaMapping id=\"99\" destAttrName=\"userid\"\n                    resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"SyncopeUserId\" sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n                    accountid=\"1\" password=\"0\"/>\n \n     <SchemaMapping id=\"100\" destAttrName=\"email\"\n@@ -283,12 +283,12 @@\n \n     <SchemaMapping id=\"106\" destAttrName=\"password\"\n                    resource_name=\"ws-target-resource-1\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"1\"/>\n \n     <SchemaMapping id=\"107\" destAttrName=\"password\"\n                    resource_name=\"ws-target-resource-2\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"1\"/>\n \n     <SchemaMapping id=\"108\" destAttrName=\"type\"\n@@ -333,12 +333,12 @@\n                    \n     <SchemaMapping id=\"116\" destAttrName=\"id\"\n                    resource_name=\"ws-target-resource-testdb\"\n-                   sourceAttrName=\"SyncopeUserId\" sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"SyncopeUserId\" mandatoryCondition=\"true\"\n                    accountid=\"1\" password=\"0\"/>\n                    \n     <SchemaMapping id=\"117\" destAttrName=\"password\"\n                    resource_name=\"ws-target-resource-testdb\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"1\"/>\n \n     <SchemaMapping id=\"200\" destAttrName=\"id\"\n@@ -347,7 +347,7 @@\n                    accountid=\"0\" password=\"0\"/>\n     <SchemaMapping id=\"201\" destAttrName=\"password\"\n                    resource_name=\"resource-csv\"\n-                   sourceAttrName=\"Password\" sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n+                   sourceMappingType=\"Password\" mandatoryCondition=\"true\"\n                    accountid=\"0\" password=\"1\"/>\n     <SchemaMapping id=\"202\" destAttrName=\"name\"\n                    resource_name=\"resource-csv\""}]}