{"sha":"3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjNjZWI4YjU5N2IyMDNkNWU1YjdmZTk2YzU1NDg3ZTNkZjU2NDFjYjU=","commit":{"author":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2017-06-29T09:40:39Z"},"committer":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2017-06-29T10:04:36Z"},"message":"Log a warning if the default anonymousKey is being used","tree":{"sha":"fce98a1d41a37ec8ce47c2aeccdbd72be31a9558","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/fce98a1d41a37ec8ce47c2aeccdbd72be31a9558"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/comments","author":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"committer":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"parents":[{"sha":"c50ee317670571c7e56e1066536ba99313327166","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/c50ee317670571c7e56e1066536ba99313327166","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/c50ee317670571c7e56e1066536ba99313327166"}],"stats":{"total":17,"additions":16,"deletions":1},"files":[{"sha":"e3c1dd255714f877382d59c676ab6ad565fa38d9","filename":"core/provisioning-java/src/test/resources/provisioningTest.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Ftest%2Fresources%2FprovisioningTest.xml?ref=3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","patch":"@@ -59,6 +59,7 @@ under the License.\n   <bean id=\"credentialChecker\" class=\"org.apache.syncope.core.spring.security.DefaultCredentialChecker\">\n       <constructor-arg value=\"${jwsKey}\" index=\"0\"/>\n       <constructor-arg value=\"${adminPassword}\" index=\"1\"/>\n+      <constructor-arg value=\"${anonymousKey}\" index=\"2\"/>\n   </bean>\n   \n </beans>"},{"sha":"a63c588c9d48afc1741ae5396a30eac60f31f3fc","filename":"core/spring/src/main/java/org/apache/syncope/core/spring/security/DefaultCredentialChecker.java","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultCredentialChecker.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultCredentialChecker.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FDefaultCredentialChecker.java?ref=3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","patch":"@@ -32,13 +32,18 @@ public class DefaultCredentialChecker {\n \n     private static final String DEFAULT_ADMIN_PASSWORD = \"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\";\n \n+    private static final String DEFAULT_ANON_KEY = \"anonymousKey\";\n+\n     private final boolean defaultAdminPasswordInUse;\n \n     private final boolean defaultJwsKeyInUse;\n \n-    public DefaultCredentialChecker(final String jwsKey, final String adminPassword) {\n+    private final boolean defaultAnonymousKeyInUse;\n+\n+    public DefaultCredentialChecker(final String jwsKey, final String adminPassword, final String anonymousKey) {\n         defaultJwsKeyInUse = DEFAULT_JWS_KEY.equals(jwsKey);\n         defaultAdminPasswordInUse = DEFAULT_ADMIN_PASSWORD.equals(adminPassword);\n+        defaultAnonymousKeyInUse = DEFAULT_ANON_KEY.equals(anonymousKey);\n     }\n \n     public void checkIsDefaultJWSKeyInUse() {\n@@ -55,4 +60,11 @@ public void checkIsDefaultAdminPasswordInUse() {\n         }\n     }\n \n+    public void checkIsDefaultAnonymousKeyInUse() {\n+        if (defaultAnonymousKeyInUse) {\n+            LOG.warn(\"The default anonymousKey property is being used. \"\n+                    + \"This must be changed to avoid a security breach!\");\n+        }\n+    }\n+\n }"},{"sha":"da11553fc1b5f67c03b2c4de2b92f1e342ce9109","filename":"core/spring/src/main/java/org/apache/syncope/core/spring/security/UsernamePasswordAuthenticationProvider.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FUsernamePasswordAuthenticationProvider.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FUsernamePasswordAuthenticationProvider.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fspring%2Fsecurity%2FUsernamePasswordAuthenticationProvider.java?ref=3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","patch":"@@ -98,6 +98,7 @@ public Authentication authenticate(final Authentication authentication) {\n \n         if (anonymousUser.equals(authentication.getName())) {\n             username[0] = anonymousUser;\n+            credentialChecker.checkIsDefaultAnonymousKeyInUse();\n             authenticated = authentication.getCredentials().toString().equals(anonymousKey);\n         } else if (adminUser.equals(authentication.getName())) {\n             username[0] = adminUser;"},{"sha":"6fd3cbc3ce4706bf0a05a8aa32615bb902f43dee","filename":"core/spring/src/main/resources/securityContext.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/3ceb8b597b203d5e5b7fe96c55487e3df5641cb5/core%2Fspring%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fresources%2FsecurityContext.xml?ref=3ceb8b597b203d5e5b7fe96c55487e3df5641cb5","patch":"@@ -52,6 +52,7 @@ under the License.\n   <bean id=\"credentialChecker\" class=\"org.apache.syncope.core.spring.security.DefaultCredentialChecker\">\n     <constructor-arg value=\"${jwsKey}\" index=\"0\"/>\n     <constructor-arg value=\"${adminPassword}\" index=\"1\"/>\n+    <constructor-arg value=\"${anonymousKey}\" index=\"2\"/>\n   </bean>\n \n   <bean id=\"syncopeJWTSSOProviderDelegate\" class=\"org.apache.cxf.rs.security.jose.jws.HmacJwsSignatureVerifier\">"}]}