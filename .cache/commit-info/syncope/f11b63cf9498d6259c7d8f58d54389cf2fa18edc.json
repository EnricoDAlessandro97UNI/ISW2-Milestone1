{"sha":"f11b63cf9498d6259c7d8f58d54389cf2fa18edc","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmYxMWI2M2NmOTQ5OGQ2MjU5YzdkOGY1OGQ1NDM4OWNmMmZhMThlZGM=","commit":{"author":{"name":"Matteo Di Carlo","email":"matteo.dicarlo@tirasa.net","date":"2017-01-20T11:21:09Z"},"committer":{"name":"Matteo Di Carlo","email":"matteo.dicarlo@tirasa.net","date":"2017-01-20T11:22:04Z"},"message":"[SYNCOPE-994] add encoding and content of wicket resources responses","tree":{"sha":"49a82dec7b8684e396a73fcbba4c2a13499fd39d","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/49a82dec7b8684e396a73fcbba4c2a13499fd39d"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f11b63cf9498d6259c7d8f58d54389cf2fa18edc","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f11b63cf9498d6259c7d8f58d54389cf2fa18edc","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f11b63cf9498d6259c7d8f58d54389cf2fa18edc","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/comments","author":null,"committer":null,"parents":[{"sha":"7525dc125ddde2565ff9fe41f3af4e92651a4b01","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7525dc125ddde2565ff9fe41f3af4e92651a4b01","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7525dc125ddde2565ff9fe41f3af4e92651a4b01"}],"stats":{"total":76,"additions":59,"deletions":17},"files":[{"sha":"4259ff753520a7350bb6069b28ace11175f9e9d6","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/FilesystemResource.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -21,6 +21,7 @@\n import java.io.File;\n import java.io.FileInputStream;\n import java.io.IOException;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.util.io.IOUtils;\n import org.slf4j.Logger;\n@@ -55,6 +56,7 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n                     replace('/', File.separatorChar);\n             LOG.debug(\"Request for {}\", subPath);\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"24a5d155c0d6e8b3ba7a62c0039fbe6ca4a29348","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/WorkflowDefGETResource.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FWorkflowDefGETResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -21,6 +21,7 @@\n import java.io.IOException;\n import javax.ws.rs.core.MediaType;\n import org.apache.syncope.client.console.rest.WorkflowRestClient;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.util.io.IOUtils;\n \n@@ -38,7 +39,7 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n         ResourceResponse response = new ResourceResponse();\n         response.disableCaching();\n         response.setContentType(MediaType.APPLICATION_JSON);\n-\n+        response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n         response.setWriteCallback(new WriteCallback() {\n \n             @Override"},{"sha":"b1a3cc35ec2793b7c3431cdfb3fb5d8100409cb7","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/AnyTypeClassResource.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeClassResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeClassResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeClassResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,6 +23,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AnyTypeClassTO;\n import org.apache.syncope.common.rest.api.service.AnyTypeClassService;\n import org.apache.wicket.request.resource.AbstractResource;\n@@ -55,6 +56,7 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n \n             final List<AnyTypeClassTO> anyTypeClassTOs = anyTypeClassService.list();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"251cd5515221803c7dc5649140dfed78a25fef45","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/AnyTypeResource.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FAnyTypeResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -22,6 +22,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AnyTypeTO;\n import org.apache.syncope.common.rest.api.service.AnyTypeService;\n import org.apache.wicket.request.resource.AbstractResource;\n@@ -55,6 +56,8 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n             String kind = attributes.getParameters().get(0).toString();\n             final AnyTypeTO anyTypeTO = anyTypeService.read(kind);\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"b0602c4c8e82b72f20d916177a0def627445c635","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/ExternalResourceResource.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FExternalResourceResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FExternalResourceResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FExternalResourceResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,6 +23,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.ResourceTO;\n import org.apache.syncope.common.rest.api.service.ResourceService;\n import org.apache.wicket.request.resource.AbstractResource;\n@@ -56,6 +57,7 @@ protected AbstractResource.ResourceResponse newResourceResponse(final IResource.\n \n             final List<ResourceTO> resourceTOs = resourceService.list();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"150fa965510da2cc810aa1c71dd5184b002263a2","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/GroupResource.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FGroupResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FGroupResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FGroupResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -59,7 +59,7 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n             final List<GroupTO> groupTOs = groupService.search(new AnyQuery.Builder().realm(realm).\n                     fiql(SyncopeClient.getGroupSearchConditionBuilder().isAssignable().query()).\n                     build()).getResult();\n-\n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"4a21ed8b69463c631eca3359432079ea28643106","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/InfoResource.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FInfoResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FInfoResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FInfoResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -19,12 +19,14 @@\n package org.apache.syncope.client.enduser.resources;\n \n import java.io.IOException;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.enduser.SyncopeEnduserConstants;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.adapters.PlatformInfoAdapter;\n import org.apache.syncope.client.enduser.util.SaltGenerator;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.util.cookies.CookieUtils;\n import org.slf4j.Logger;\n@@ -51,6 +53,7 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n                 sessionCookieUtils.save(SyncopeEnduserConstants.XSRF_COOKIE, SaltGenerator.generate(\n                         SyncopeEnduserSession.get().getId()));\n             }\n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"a8483cc0bf60799f12da1520530d74d8d151a599","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/LoginResource.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -25,6 +25,7 @@\n import org.apache.syncope.client.enduser.SyncopeEnduserApplication;\n import org.apache.syncope.client.enduser.model.Credentials;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.util.io.IOUtils;\n@@ -60,8 +61,8 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n             } else if (!SyncopeEnduserApplication.get().getAdminUser().equalsIgnoreCase(username)\n                     && SyncopeEnduserSession.get().authenticate(username, password)) {\n                 // user has been authenticated successfully\n+                response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n                 response.setWriteCallback(new WriteCallback() {\n-\n                     @Override\n                     public void writeData(final Attributes attributes) throws IOException {\n                         attributes.getResponse().write(username);"},{"sha":"c87b65354c4f1c13cbd549b34276c3c7026ab20b","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/RealmResource.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FRealmResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FRealmResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FRealmResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,6 +23,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.syncope.common.rest.api.service.RealmService;\n import org.apache.wicket.request.resource.AbstractResource;\n@@ -53,6 +54,8 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n \n             final List<RealmTO> realmTOs = realmService.list();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"d8c0d9d84931b630287b83388340d243c41705af","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/SchemaResource.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSchemaResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -29,6 +29,7 @@\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.model.SchemaResponse;\n import org.apache.syncope.common.lib.EntityTOUtils;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AbstractSchemaTO;\n import org.apache.syncope.common.lib.to.AnyTypeTO;\n import org.apache.syncope.common.lib.to.GroupTO;\n@@ -137,6 +138,8 @@ public boolean evaluate(final GroupTO item) {\n                     ComparatorUtils.<String>naturalComparator(),\n                     EntityTOUtils.keyTransformer()));\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n             response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                 @Override"},{"sha":"160c30eb90bcd15c4284972daf7764b09d8d316c","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/SecurityQuestionResource.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSecurityQuestionResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSecurityQuestionResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSecurityQuestionResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -21,8 +21,10 @@\n import java.io.IOException;\n import java.util.List;\n import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.SecurityQuestionTO;\n import org.apache.syncope.common.rest.api.service.SecurityQuestionService;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n@@ -66,7 +68,8 @@ protected AbstractResource.ResourceResponse newResourceResponse(final IResource.\n             //if the username is defined then retrieve its security questions, otherwise retrieve all security questions\n             if (!username.isEmpty()) {\n                 final SecurityQuestionTO securityQuestionTO = securityQuestionService.readByUser(username.toString());\n-\n+                response.setContentType(MediaType.APPLICATION_JSON);\n+                response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n                 response.setWriteCallback(new AbstractResource.WriteCallback() {\n \n                     @Override"},{"sha":"90ffdcdddb77dce72ee156a7cacd0688691f4c94","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfChangePassword.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfChangePassword.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfChangePassword.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfChangePassword.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,6 +23,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.rest.api.service.UserSelfService;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n@@ -63,6 +64,8 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n \n             final String responseMessage = new StringBuilder().append(\"Password changed correctly\").toString();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"c7a3a553e6baeacaf34232eb723a6e5eb4b63482","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfConfirmPasswordReset.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfConfirmPasswordReset.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfConfirmPasswordReset.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfConfirmPasswordReset.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,6 +23,7 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.rest.api.service.UserSelfService;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n@@ -69,6 +70,7 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n \n             final String responseMessage = new StringBuilder().append(\"Password changed correctly\").toString();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"fd65e93c9e6b47a9cac6340cc634933c9145414c","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfCreateResource.java","status":"modified","additions":9,"deletions":6,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfCreateResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -32,6 +32,7 @@\n import org.apache.commons.lang3.time.FastDateFormat;\n import org.apache.syncope.client.enduser.SyncopeEnduserConstants;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AttrTO;\n import org.apache.syncope.common.lib.to.MembershipTO;\n import org.apache.syncope.common.lib.to.PlainSchemaTO;\n@@ -180,16 +181,18 @@ public boolean evaluate(final MembershipTO item) {\n                 // adapt request and create user\n                 final Response res = userSelfService.create(userTO, true);\n \n+                response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n                 response.setWriteCallback(new WriteCallback() {\n \n                     @Override\n                     public void writeData(final Attributes attributes) throws IOException {\n                         attributes.getResponse().write(res.getStatusInfo().getFamily().equals(\n                                 Response.Status.Family.SUCCESSFUL)\n                                         ? responseMessage.append(\"User: \").append(userTO.getUsername()).append(\n-                                                \" successfully created\")\n+                                        \" successfully created\")\n                                         : new StringBuilder().append(\"ErrorMessage{{ \").\n-                                                append(res.getStatusInfo().getReasonPhrase()).append(\" }}\"));\n+                                        append(res.getStatusInfo().getReasonPhrase()).append(\" }}\"));\n                     }\n                 });\n                 response.setStatusCode(res.getStatus());\n@@ -204,10 +207,10 @@ public void writeData(final Attributes attributes) throws IOException {\n             LOG.error(\"Could not create userTO\", e);\n             response.setError(Response.Status.BAD_REQUEST.getStatusCode(),\n                     new StringBuilder().\n-                            append(\"ErrorMessage{{ \").\n-                            append(e.getMessage()).\n-                            append(\" }}\").\n-                            toString());\n+                    append(\"ErrorMessage{{ \").\n+                    append(e.getMessage()).\n+                    append(\" }}\").\n+                    toString());\n         }\n         return response;\n     }"},{"sha":"31c1fc8009ceee757ce2f8e567a2796e1a3f49e3","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfPasswordReset.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfPasswordReset.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfPasswordReset.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfPasswordReset.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -21,9 +21,11 @@\n import java.io.IOException;\n import java.util.Map;\n import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.syncope.client.enduser.SyncopeEnduserConstants;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.rest.api.service.UserSelfService;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n@@ -81,6 +83,7 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n             final String responseMessage = new StringBuilder().append(\"Password reset request sent for user \").append(\n                     username).toString();\n \n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"a0342b11d50fa2fe6ef54ce6d24f6e1cdcc160c2","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfReadResource.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfReadResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfReadResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfReadResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -23,10 +23,12 @@\n import java.util.List;\n import java.util.Map;\n import javax.servlet.http.HttpServletRequest;\n+import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n import org.apache.commons.lang3.SerializationUtils;\n import org.apache.commons.lang3.time.FastDateFormat;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AttrTO;\n import org.apache.syncope.common.lib.to.MembershipTO;\n import org.apache.syncope.common.lib.to.PlainSchemaTO;\n@@ -92,6 +94,9 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n             }\n \n             final String selfTOJson = MAPPER.writeValueAsString(userTO);\n+            response.setContentType(MediaType.APPLICATION_JSON);\n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n+\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override"},{"sha":"e144eadd4cc44a200326993c12f7d96f19e02f14","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/UserSelfUpdateResource.java","status":"modified","additions":10,"deletions":7,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f11b63cf9498d6259c7d8f58d54389cf2fa18edc/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FUserSelfUpdateResource.java?ref=f11b63cf9498d6259c7d8f58d54389cf2fa18edc","patch":"@@ -32,6 +32,7 @@\n import org.apache.commons.lang3.time.FastDateFormat;\n import org.apache.syncope.client.enduser.SyncopeEnduserConstants;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.common.lib.SyncopeConstants;\n import org.apache.syncope.common.lib.to.AttrTO;\n import org.apache.syncope.common.lib.to.MembershipTO;\n import org.apache.syncope.common.lib.to.PlainSchemaTO;\n@@ -166,10 +167,12 @@ public boolean evaluate(final MembershipTO item) {\n \n             final String responseMessage = res.getStatusInfo().getFamily().equals(Response.Status.Family.SUCCESSFUL)\n                     ? new StringBuilder().\n-                            append(\"User\").append(userTO.getUsername()).append(\" successfully updated\").toString()\n+                    append(\"User\").append(userTO.getUsername()).append(\" successfully updated\").toString()\n                     : new StringBuilder().\n-                            append(\"ErrorMessage{{ \").append(res.getStatusInfo().getReasonPhrase()).append(\" }}\").\n-                            toString();\n+                    append(\"ErrorMessage{{ \").append(res.getStatusInfo().getReasonPhrase()).append(\" }}\").\n+                    toString();\n+\n+            response.setTextEncoding(SyncopeConstants.DEFAULT_ENCODING);\n             response.setWriteCallback(new WriteCallback() {\n \n                 @Override\n@@ -184,10 +187,10 @@ public void writeData(final Attributes attributes) throws IOException {\n             LOG.error(\"Error while updating user\", e);\n             response.setError(Response.Status.BAD_REQUEST.getStatusCode(),\n                     new StringBuilder().\n-                            append(\"ErrorMessage{{ \").\n-                            append(e.getMessage()).\n-                            append(\" }}\").\n-                            toString());\n+                    append(\"ErrorMessage{{ \").\n+                    append(e.getMessage()).\n+                    append(\" }}\").\n+                    toString());\n         }\n         return response;\n     }"}]}