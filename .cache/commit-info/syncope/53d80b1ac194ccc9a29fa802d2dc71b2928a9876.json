{"sha":"53d80b1ac194ccc9a29fa802d2dc71b2928a9876","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjUzZDgwYjFhYzE5NGNjYzlhMjlmYTgwMmQyZGM3MWIyOTI4YTk4NzY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-05T15:20:59Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-10-05T15:20:59Z"},"message":"(Fix issue 158 170)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247127 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"217c71bc728d467df7009513f8882173f0c5c227","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/217c71bc728d467df7009513f8882173f0c5c227"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/53d80b1ac194ccc9a29fa802d2dc71b2928a9876","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/53d80b1ac194ccc9a29fa802d2dc71b2928a9876","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/53d80b1ac194ccc9a29fa802d2dc71b2928a9876","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/comments","author":null,"committer":null,"parents":[{"sha":"2461f00cc57d3c0cd29e7d1ea8328bb8df406e89","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2461f00cc57d3c0cd29e7d1ea8328bb8df406e89","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2461f00cc57d3c0cd29e7d1ea8328bb8df406e89"}],"stats":{"total":1574,"additions":818,"deletions":756},"files":[{"sha":"df9c39092ed9e75565a3172b0f2cba8e4a132ea2","filename":"client/src/main/java/org/syncope/client/to/PropagationTaskTO.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FPropagationTaskTO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FPropagationTaskTO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fclient%2Fto%2FPropagationTaskTO.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -70,9 +70,9 @@ public PropagationOperation getPropagationOperation() {\n     }\n \n     public void setPropagationOperation(\n-            PropagationOperation resourceOperationType) {\n+            PropagationOperation propagationOperation) {\n \n-        this.propagationOperation = resourceOperationType;\n+        this.propagationOperation = propagationOperation;\n     }\n \n     public String getXmlAttributes() {"},{"sha":"74ef8f523d315fb35b2062add39006f8bc81abda","filename":"console/pom.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -67,6 +67,7 @@\n         <dependency>\n             <groupId>org.apache.wicket</groupId>\n             <artifactId>wicket</artifactId>\n+            <type>pom</type>\n         </dependency>\n         <dependency>\n             <groupId>org.apache.wicket</groupId>"},{"sha":"e791ac9f37388bc367e36bce47382cd0195174ba","filename":"console/src/main/java/org/syncope/console/SyncopeApplication.java","status":"modified","additions":11,"deletions":18,"changes":29,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,22 +16,19 @@\n \n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n-import org.apache.wicket.Request;\n-import org.apache.wicket.RequestCycle;\n-import org.apache.wicket.Response;\n import org.apache.wicket.RestartResponseAtInterceptPageException;\n import org.apache.wicket.Session;\n import org.apache.wicket.authorization.IUnauthorizedComponentInstantiationListener;\n import org.apache.wicket.authorization.UnauthorizedInstantiationException;\n-import org.apache.wicket.authorization.strategies.role.IRoleCheckingStrategy;\n-import org.apache.wicket.authorization.strategies.role.RoleAuthorizationStrategy;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.IRoleCheckingStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.RoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n import org.apache.wicket.protocol.http.WebApplication;\n-import org.apache.wicket.protocol.http.WebRequest;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.Request;\n+import org.apache.wicket.request.Response;\n import org.apache.wicket.spring.injection.annot.SpringComponentInjector;\n import org.syncope.console.commons.XMLRolesReader;\n import org.syncope.console.pages.Configuration;\n@@ -55,7 +52,9 @@ public class SyncopeApplication extends WebApplication\n \n     @Override\n     protected void init() {\n-        addComponentInstantiationListener(new SpringComponentInjector(this));\n+        getComponentInstantiationListeners().add(\n+                new SpringComponentInjector(this));\n+\n         getResourceSettings().setThrowExceptionOnMissingResource(true);\n \n         getSecuritySettings().\n@@ -82,6 +81,8 @@ protected void init() {\n                 \"TASK_LIST\");\n         MetaDataRoleAuthorizationStrategy.authorize(Configuration.class,\n                 \"CONFIGURATION_LIST\");\n+\n+        getRequestCycleListeners().add(new SyncopeRequestCycleListener());\n     }\n \n     public void setupNavigationPane(final WebPage page,\n@@ -169,14 +170,6 @@ public Class getHomePage() {\n                 : Login.class;\n     }\n \n-    @Override\n-    public final RequestCycle newRequestCycle(final Request request,\n-            final Response response) {\n-\n-        return new SyncopeRequestCycle(this, (WebRequest) request,\n-                (WebResponse) response);\n-    }\n-\n     @Override\n     public void onUnauthorizedInstantiation(final Component component) {\n         SyncopeSession.get().invalidate();\n@@ -190,7 +183,7 @@ public void onUnauthorizedInstantiation(final Component component) {\n \n     @Override\n     public boolean hasAnyRole(\n-            org.apache.wicket.authorization.strategies.role.Roles roles) {\n+            final org.apache.wicket.authroles.authorization.strategies.role.Roles roles) {\n \n         return SyncopeSession.get().hasAnyRole(roles);\n     }"},{"sha":"aeda0e5b242412aaf48a63258ed4bcac3f5667c2","filename":"console/src/main/java/org/syncope/console/SyncopeRequestCycleListener.java","status":"renamed","additions":13,"deletions":26,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycleListener.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycleListener.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycleListener.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -15,42 +15,29 @@\n package org.syncope.console;\n \n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n-import org.apache.wicket.Response;\n import org.apache.wicket.authorization.UnauthorizedInstantiationException;\n import org.apache.wicket.markup.html.pages.ExceptionErrorPage;\n import org.apache.wicket.model.StringResourceModel;\n import org.apache.wicket.protocol.http.PageExpiredException;\n-import org.apache.wicket.protocol.http.WebApplication;\n-import org.apache.wicket.protocol.http.WebRequest;\n-import org.apache.wicket.protocol.http.WebRequestCycle;\n+import org.apache.wicket.request.IRequestHandler;\n+import org.apache.wicket.request.cycle.AbstractRequestCycleListener;\n+import org.apache.wicket.request.cycle.RequestCycle;\n+import org.apache.wicket.request.handler.ComponentRenderingRequestHandler;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.springframework.web.client.HttpClientErrorException;\n import org.springframework.web.client.RestClientException;\n import org.syncope.console.pages.ErrorPage;\n \n-/**\n- * SyncopeRequestCycle.\n- */\n-public class SyncopeRequestCycle extends WebRequestCycle {\n+public class SyncopeRequestCycleListener extends AbstractRequestCycleListener {\n \n     /**\n-     * SyncopeRequestCycle constructor.\n-     *\n-     * @param application the web application\n-     * @param request the web request\n-     * @param response the web response\n+     * {@inheritDoc}\n      */\n-    public SyncopeRequestCycle(final WebApplication application,\n-            final WebRequest request, final Response response) {\n-\n-        super(application, request, response);\n-    }\n-\n     @Override\n-    public final Page onRuntimeException(final Page cause,\n-            final RuntimeException e) {\n+    public IRequestHandler onException(final RequestCycle cycle,\n+            final Exception e) {\n \n-        Page errorPage;\n+        final Page errorPage;\n         PageParameters errorParameters = new PageParameters();\n         errorParameters.add(\"errorTitle\",\n                 new StringResourceModel(\"alert\", null).getString());\n@@ -67,7 +54,7 @@ public final Page onRuntimeException(final Page cause,\n \n             errorPage = new ErrorPage(errorParameters);\n         } else if (e instanceof PageExpiredException\n-                || !((SyncopeSession) getSession()).isAuthenticated()) {\n+                || !(SyncopeSession.get()).isAuthenticated()) {\n \n             errorParameters.add(\"errorMessage\",\n                     new StringResourceModel(\"pageExpiredException\", null).\n@@ -84,9 +71,9 @@ public final Page onRuntimeException(final Page cause,\n             errorPage = new ErrorPage(errorParameters);\n         } else {\n             // redirect to default Wicket error page\n-            errorPage = new ExceptionErrorPage(e, cause);\n+            errorPage = new ExceptionErrorPage(e, null);\n         }\n \n-        return errorPage;\n+        return new ComponentRenderingRequestHandler(errorPage);\n     }\n }","previous_filename":"console/src/main/java/org/syncope/console/SyncopeRequestCycle.java"},{"sha":"bf6f103b89a93b292a24ab1e489e472f5833a5a4","filename":"console/src/main/java/org/syncope/console/SyncopeSession.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeSession.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,10 +14,10 @@\n  */\n package org.syncope.console;\n \n-import org.apache.wicket.Request;\n import org.apache.wicket.Session;\n-import org.apache.wicket.authorization.strategies.role.Roles;\n+import org.apache.wicket.authroles.authorization.strategies.role.Roles;\n import org.apache.wicket.protocol.http.WebSession;\n+import org.apache.wicket.request.Request;\n \n /**\n  * Custom Syncope Session class."},{"sha":"c5b86c0ee5bd1131b74666af5e25dbcc29922bd9","filename":"console/src/main/java/org/syncope/console/commons/PreferenceManager.java","status":"modified","additions":14,"deletions":10,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -23,8 +23,10 @@\n import java.util.Map;\n import javax.servlet.http.Cookie;\n import org.apache.commons.lang.StringUtils;\n-import org.apache.wicket.protocol.http.WebRequest;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.Request;\n+import org.apache.wicket.request.Response;\n+import org.apache.wicket.request.http.WebRequest;\n+import org.apache.wicket.request.http.WebResponse;\n import org.apache.wicket.util.crypt.Base64;\n import org.codehaus.jackson.map.ObjectMapper;\n import org.codehaus.jackson.type.TypeReference;\n@@ -71,10 +73,11 @@ private String setPrefs(final Map<String, String> prefs)\n         return writer.toString();\n     }\n \n-    public String get(final WebRequest request, final String key) {\n+    public String get(final Request request, final String key) {\n         String result = null;\n \n-        Cookie prefCookie = request.getCookie(Constants.PREFS_COOKIE_NAME);\n+        Cookie prefCookie = ((WebRequest) request).getCookie(\n+                Constants.PREFS_COOKIE_NAME);\n         if (prefCookie != null) {\n             Map<String, String> prefs;\n             try {\n@@ -94,7 +97,7 @@ public String get(final WebRequest request, final String key) {\n         return result;\n     }\n \n-    public Integer getPaginatorRows(final WebRequest request,\n+    public Integer getPaginatorRows(final Request request,\n             final String key) {\n \n         Integer result = getPaginatorChoices().get(0);\n@@ -111,7 +114,7 @@ public Integer getPaginatorRows(final WebRequest request,\n         return result;\n     }\n \n-    public List<String> getList(final WebRequest request,\n+    public List<String> getList(final Request request,\n             final String key) {\n \n         List<String> result = new ArrayList<String>();\n@@ -129,10 +132,11 @@ public List<String> getList(final WebRequest request,\n         return result;\n     }\n \n-    public void set(final WebRequest request, final WebResponse response,\n+    public void set(final Request request, final Response response,\n             final String key, final String value) {\n \n-        Cookie prefCookie = request.getCookie(Constants.PREFS_COOKIE_NAME);\n+        Cookie prefCookie = ((WebRequest) request).getCookie(\n+                Constants.PREFS_COOKIE_NAME);\n         if (prefCookie == null) {\n             prefCookie = new Cookie(Constants.PREFS_COOKIE_NAME, \"\");\n         }\n@@ -157,10 +161,10 @@ public void set(final WebRequest request, final WebResponse response,\n         }\n \n         prefCookie.setMaxAge(ONE_YEAR_TIME);\n-        response.addCookie(prefCookie);\n+        ((WebResponse) response).addCookie(prefCookie);\n     }\n \n-    public void setList(final WebRequest request, final WebResponse response,\n+    public void setList(final Request request, final Response response,\n             final String key, final List<String> values) {\n \n         set(request, response, key,"},{"sha":"01c040cdc3cd6691d81c4ac2bf41ffe54a7bbee1","filename":"console/src/main/java/org/syncope/console/pages/AbstractSchemaModalPage.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FAbstractSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FAbstractSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FAbstractSchemaModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,6 +16,7 @@\n  */\n package org.syncope.console.pages;\n \n+import org.apache.wicket.PageReference;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.console.rest.SchemaRestClient;\n@@ -26,6 +27,8 @@\n  */\n abstract public class AbstractSchemaModalPage extends BaseModalPage {\n \n+    private static final long serialVersionUID = 7369215690388444748L;\n+\n     @SpringBean\n     protected SchemaRestClient restClient;\n \n@@ -36,7 +39,7 @@ public AbstractSchemaModalPage(String kind) {\n     }\n \n     abstract public void setSchemaModalPage(\n-            final BasePage basePage,\n+            final PageReference callerPageRef,\n             final ModalWindow window,\n             AbstractBaseBean schema,\n             final boolean createFlag);"},{"sha":"d998f609ac9ad9e328a2c34634d10a808f51c218","filename":"console/src/main/java/org/syncope/console/pages/BasePage.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -15,12 +15,12 @@\n package org.syncope.console.pages;\n \n import org.apache.wicket.Component;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.IAjaxIndicatorAware;\n-import org.apache.wicket.behavior.AbstractBehavior;\n+import org.apache.wicket.behavior.Behavior;\n import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.markup.html.panel.FeedbackPanel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -38,6 +38,8 @@ public class BasePage extends WebPage implements IAjaxIndicatorAware {\n     protected static final Logger LOG = LoggerFactory.getLogger(\n             BasePage.class);\n \n+    private static final long serialVersionUID = 1571997737305598502L;\n+\n     @SpringBean\n     protected XMLRolesReader xmlRolesReader;\n \n@@ -54,7 +56,7 @@ public BasePage() {\n \n     /**\n      * Constructor that is invoked when page is invoked without a\n-     * sessadd(new BookmarkablePageLink(\"roles\", Roles.class));ion.\n+     * session.\n      *\n      * @param PageParameters parameters\n      */\n@@ -75,7 +77,7 @@ private void pageSetup() {\n         final String kind = getClass().getSimpleName().toLowerCase();\n         final Component kindIcon = get(kind);\n         if (kindIcon != null) {\n-            kindIcon.add(new AbstractBehavior() {\n+            kindIcon.add(new Behavior() {\n \n                 @Override\n                 public void onComponentTag(final Component component,"},{"sha":"3b9bfbce66b281c7a8e6f1e77649fa08c008b520","filename":"console/src/main/java/org/syncope/console/pages/Configuration.java","status":"modified","additions":68,"deletions":38,"changes":106,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,10 +14,6 @@\n  */\n package org.syncope.console.pages;\n \n-import org.syncope.console.pages.panels.PasswordPoliciesPanel;\n-import ch.qos.logback.classic.Level;\n-import ch.qos.logback.classic.Logger;\n-import ch.qos.logback.classic.LoggerContext;\n import java.io.Serializable;\n import java.io.UnsupportedEncodingException;\n import java.util.ArrayList;\n@@ -26,15 +22,15 @@\n import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -50,6 +46,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.LoggerFactory;\n import org.springframework.web.client.RestClientException;\n@@ -58,11 +55,16 @@\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.SortableDataProviderComparator;\n+import org.syncope.console.pages.panels.PasswordPoliciesPanel;\n import org.syncope.console.rest.ConfigurationRestClient;\n import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n \n+import ch.qos.logback.classic.Level;\n+import ch.qos.logback.classic.Logger;\n+import ch.qos.logback.classic.LoggerContext;\n+\n /**\n  * Configurations WebPage.\n  */\n@@ -100,8 +102,7 @@ public Configuration(final PageParameters parameters) {\n         add(createConfigWin = new ModalWindow(\"createConfigurationWin\"));\n         add(editConfigWin = new ModalWindow(\"editConfigurationWin\"));\n \n-        paginatorRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+        paginatorRows = prefMan.getPaginatorRows(getRequest(),\n                 Constants.PREF_CONFIGURATION_PAGINATOR_ROWS);\n \n         List<IColumn> confColumns = new ArrayList<IColumn>();\n@@ -126,19 +127,25 @@ public void populateItem(\n                 final ConfigurationTO configurationTO = model.getObject();\n                 AjaxLink editLink = new IndicatingAjaxLink(\"editLink\") {\n \n+                    private static final long serialVersionUID =\n+                            -7978723352517770644L;\n+\n                     @Override\n-                    public void onClick(AjaxRequestTarget target) {\n+                    public void onClick(final AjaxRequestTarget target) {\n \n                         editConfigWin.setPageCreator(\n                                 new ModalWindow.PageCreator() {\n \n+                                    private static final long serialVersionUID =\n+                                            -7834632442532690940L;\n+\n+                                    @Override\n                                     public Page createPage() {\n-                                        ConfigurationModalPage window =\n-                                                new ConfigurationModalPage(\n-                                                Configuration.this,\n+                                        return new ConfigurationModalPage(\n+                                                Configuration.this.\n+                                                getPageReference(),\n                                                 editConfigWin,\n                                                 configurationTO, false);\n-                                        return window;\n                                     }\n                                 });\n \n@@ -165,27 +172,32 @@ public Page createPage() {\n             @Override\n             public void populateItem(\n                     final Item<ICellPopulator<ConfigurationTO>> cellItem,\n-                    final String componentId, IModel<ConfigurationTO> model) {\n+                    final String componentId,\n+                    final IModel<ConfigurationTO> model) {\n \n                 final ConfigurationTO configurationTO = model.getObject();\n \n                 AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\n                         \"deleteLink\") {\n \n+                    private static final long serialVersionUID =\n+                            -7978723352517770644L;\n+\n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n                         try {\n-                            restClient.deleteConfiguration(configurationTO.getKey());\n+                            restClient.deleteConfiguration(configurationTO.\n+                                    getKey());\n                         } catch (UnsupportedEncodingException e) {\n                             LOG.error(\"While deleting a conf key\", e);\n                             error(e.getMessage());\n                             return;\n                         }\n \n                         info(getString(\"operation_succeded\"));\n-                        target.addComponent(feedbackPanel);\n+                        target.add(feedbackPanel);\n \n-                        target.addComponent(confContainer);\n+                        target.add(confContainer);\n                     }\n                 };\n \n@@ -214,13 +226,11 @@ public void onClick(final AjaxRequestTarget target) {\n         createConfigWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createConfigWin.setInitialHeight(WIN_HEIGHT);\n         createConfigWin.setInitialWidth(WIN_WIDTH);\n-        createConfigWin.setPageMapName(\"create-configuration-modal\");\n         createConfigWin.setCookieName(\"create-configuration-modal\");\n \n         editConfigWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editConfigWin.setInitialHeight(WIN_HEIGHT);\n         editConfigWin.setInitialWidth(WIN_HEIGHT);\n-        editConfigWin.setPageMapName(\"edit-configuration-modal\");\n         editConfigWin.setCookieName(\"edit-configuration-modal\");\n \n         setWindowClosedCallback(createConfigWin, confContainer);\n@@ -230,16 +240,18 @@ public void onClick(final AjaxRequestTarget target) {\n                 \"createConfigurationLink\") {\n \n             @Override\n-            public void onClick(AjaxRequestTarget target) {\n+            public void onClick(final AjaxRequestTarget target) {\n \n                 createConfigWin.setPageCreator(new ModalWindow.PageCreator() {\n \n+                    private static final long serialVersionUID =\n+                            -7834632442532690940L;\n+\n                     @Override\n                     public Page createPage() {\n-                        ConfigurationModalPage window =\n-                                new ConfigurationModalPage(Configuration.this,\n+                        return new ConfigurationModalPage(\n+                                Configuration.this.getPageReference(),\n                                 createConfigWin, new ConfigurationTO(), true);\n-                        return window;\n                     }\n                 });\n \n@@ -262,15 +274,17 @@ public Page createPage() {\n \n         rowsChooser.add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n \n+            private static final long serialVersionUID = -1107858522700306810L;\n+\n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(),\n+                        getResponse(),\n                         Constants.PREF_CONFIGURATION_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n-                confTable.setRowsPerPage(paginatorRows);\n+                confTable.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(confContainer);\n+                target.add(confContainer);\n             }\n         });\n \n@@ -279,8 +293,6 @@ protected void onUpdate(final AjaxRequestTarget target) {\n \n         add(paginatorForm);\n \n-//        add(new PasswordPolicyPanel(\"passwordPolicy\"));\n-\n         add(new PasswordPoliciesPanel(\"passwordPoliciesPanel\"));\n \n         // Logger stuff\n@@ -314,7 +326,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n      * @param window\n      * @param container\n      */\n-    private void setWindowClosedCallback(ModalWindow window,\n+    private void setWindowClosedCallback(final ModalWindow window,\n             final WebMarkupContainer container) {\n \n         window.setWindowClosedCallback(\n@@ -323,11 +335,12 @@ private void setWindowClosedCallback(ModalWindow window,\n                     private static final long serialVersionUID =\n                             8804221891699487139L;\n \n-                    public void onClose(AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                    @Override\n+                    public void onClose(final AjaxRequestTarget target) {\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(feedbackPanel);\n+                            target.add(feedbackPanel);\n                             operationResult = false;\n                         }\n                     }\n@@ -338,7 +351,7 @@ public boolean isOperationResult() {\n         return operationResult;\n     }\n \n-    public void setOperationResult(boolean operationResult) {\n+    public void setOperationResult(final boolean operationResult) {\n         this.operationResult = operationResult;\n     }\n \n@@ -351,13 +364,15 @@ public void setOperationResult(boolean operationResult) {\n \n         public SyncopeConfProvider() {\n             //Default sorting\n-            setSort(\"key\", true);\n+            setSort(\"key\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<ConfigurationTO>(this);\n         }\n \n         @Override\n-        public Iterator<ConfigurationTO> iterator(int first, int count) {\n+        public Iterator<ConfigurationTO> iterator(final int first,\n+                final int count) {\n+\n             List<ConfigurationTO> list = getAllConfigurations();\n \n             Collections.sort(list, comparator);\n@@ -376,6 +391,9 @@ public IModel<ConfigurationTO> model(\n \n             return new AbstractReadOnlyModel<ConfigurationTO>() {\n \n+                private static final long serialVersionUID =\n+                        774694801558497248L;\n+\n                 @Override\n                 public ConfigurationTO getObject() {\n                     return configuration;\n@@ -397,7 +415,14 @@ private List<ConfigurationTO> getAllConfigurations() {\n \n     enum LoggerLevel {\n \n-        OFF, ERROR, WARN, INFO, DEBUG, TRACE, ALL\n+        OFF,\n+        ERROR,\n+        WARN,\n+        INFO,\n+        DEBUG,\n+        TRACE,\n+        ALL\n+\n     }\n \n     private class LoggerPropertyList extends PropertyListView<LoggerTO> {\n@@ -446,6 +471,9 @@ public void detach() {\n             level.add(new AjaxFormComponentUpdatingBehavior(\n                     \"onchange\") {\n \n+                private static final long serialVersionUID =\n+                        -1107858522700306810L;\n+\n                 @Override\n                 protected void onUpdate(final AjaxRequestTarget target) {\n                     boolean result = getId().equals(\"corelogger\")\n@@ -463,7 +491,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n \n                     }\n \n-                    target.addComponent(feedbackPanel);\n+                    target.add(feedbackPanel);\n                 }\n             });\n \n@@ -475,6 +503,8 @@ protected void onUpdate(final AjaxRequestTarget target) {\n \n     private class ConsoleLoggerController implements Serializable {\n \n+        private static final long serialVersionUID = -1550459341476431714L;\n+\n         public List<LoggerTO> getLoggers() {\n             LoggerContext lc =\n                     (LoggerContext) LoggerFactory.getILoggerFactory();"},{"sha":"5d4755428c5cd7345eb9268420591bedce4fe469","filename":"console/src/main/java/org/syncope/console/pages/ConfigurationModalPage.java","status":"modified","additions":14,"deletions":10,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfigurationModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfigurationModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConfigurationModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,9 +16,10 @@\n  */\n package org.syncope.console.pages;\n \n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n@@ -45,12 +46,12 @@ public class ConfigurationModalPage extends BaseModalPage {\n     /**\n      * ConfigurationModalPage constructor.\n      * \n-     * @param basePage base\n-     * @param modalWindow modal-window\n+     * @param callPageRef base\n+     * @param window\n      * @param configurationTO\n      * @param createFlag true for CREATE and false for UPDATE operation\n      */\n-    public ConfigurationModalPage(final BasePage basePage,\n+    public ConfigurationModalPage(final PageReference callPageRef,\n             final ModalWindow window,\n             final ConfigurationTO configurationTO,\n             final boolean createFlag) {\n@@ -78,7 +79,9 @@ public ConfigurationModalPage(final BasePage basePage,\n             private static final long serialVersionUID = -958724007591692537L;\n \n             @Override\n-            protected void onSubmit(AjaxRequestTarget target, Form form) {\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n                 boolean res = false;\n \n                 if (createFlag) {\n@@ -88,28 +91,29 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                     if (!res) {\n                         error(getString(\"error_insert\"));\n                     }\n-\n                 } else {\n                     res = configurationsRestClient.updateConfiguration(\n                             configurationTO);\n \n                     if (!res) {\n                         error(getString(\"error_updating\"));\n                     }\n-\n                 }\n \n                 if (res) {\n-                    Configuration callerPage = (Configuration) basePage;\n+                    Configuration callerPage =\n+                            (Configuration) callPageRef.getPage();\n                     callerPage.setOperationResult(true);\n \n                     window.close(target);\n                 }\n             }\n \n             @Override\n-            protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(feedbackPanel);\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"18d2460917b129efd7294a6503f09d446eeefe85","filename":"console/src/main/java/org/syncope/console/pages/ConnectorModalPage.java","status":"modified","additions":48,"deletions":41,"changes":89,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectorModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -22,10 +22,11 @@\n import java.util.HashSet;\n import java.util.List;\n \n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n@@ -71,7 +72,7 @@ public class ConnectorModalPage extends BaseModalPage {\n \n     private List<ConnectorCapability> selectedCapabilities;\n \n-    public ConnectorModalPage(final Connectors basePage,\n+    public ConnectorModalPage(final PageReference callerPageRef,\n             final ModalWindow window,\n             final ConnInstanceTO connectorTO,\n             final boolean createFlag) {\n@@ -201,9 +202,9 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         connectorTO.setConfiguration(\n                                 new HashSet<ConnConfProperty>());\n \n-                        target.addComponent(propertiesContainer);\n-                        target.addComponent(connectorName);\n-                        target.addComponent(version);\n+                        target.add(propertiesContainer);\n+                        target.add(connectorName);\n+                        target.add(version);\n                     }\n                 });\n \n@@ -229,44 +230,49 @@ public void detach() {\n         bundle.addRequiredLabel();\n         bundle.setEnabled(createFlag);\n \n-        final ListView<ConnConfProperty> propView = new ListView<ConnConfProperty>(\n+        final ListView<ConnConfProperty> propView =\n+                new ListView<ConnConfProperty>(\n                 \"connectorProperties\", selectedBundleProperties) {\n \n-            private static final long serialVersionUID = 9101744072914090143L;\n+                    private static final long serialVersionUID =\n+                            9101744072914090143L;\n \n-            @Override\n-            protected void populateItem(final ListItem<ConnConfProperty> item) {\n-                final ConnConfProperty property = item.getModelObject();\n-\n-                final Label label = new Label(\"connPropAttrSchema\",\n-                        property.getSchema().getDisplayName() == null\n-                        || property.getSchema().getDisplayName().isEmpty()\n-                        ? property.getSchema().getName()\n-                        : property.getSchema().getDisplayName());\n-\n-                item.add(label);\n-\n-                final FieldPanel field = new AjaxTextFieldPanel(\n-                        \"connPropAttrValue\",\n-                        label.getDefaultModelObjectAsString(),\n-                        new PropertyModel<String>(property, \"value\"),\n-                        true).setRequired(property.getSchema().isRequired()).\n-                        setTitle(property.getSchema().getHelpMessage());\n-                if (property.getSchema().isRequired()) {\n-                    field.addRequiredLabel();\n-                }\n+                    @Override\n+                    protected void populateItem(\n+                            final ListItem<ConnConfProperty> item) {\n+                        final ConnConfProperty property = item.getModelObject();\n+\n+                        final Label label = new Label(\"connPropAttrSchema\",\n+                                property.getSchema().getDisplayName() == null\n+                                || property.getSchema().getDisplayName().isEmpty()\n+                                ? property.getSchema().getName()\n+                                : property.getSchema().getDisplayName());\n+\n+                        item.add(label);\n+\n+                        final FieldPanel field = new AjaxTextFieldPanel(\n+                                \"connPropAttrValue\",\n+                                label.getDefaultModelObjectAsString(),\n+                                new PropertyModel<String>(property, \"value\"),\n+                                true).setRequired(property.getSchema().\n+                                isRequired()).\n+                                setTitle(property.getSchema().getHelpMessage());\n+                        if (property.getSchema().isRequired()) {\n+                            field.addRequiredLabel();\n+                        }\n \n-                item.add(field);\n+                        item.add(field);\n \n-                item.add(new AjaxCheckBoxPanel(\n-                        \"connPropAttrOverridable\",\n-                        \"Overridable\",\n-                        new PropertyModel<Boolean>(property, \"overridable\"),\n-                        true).setTitle(\"Overridable\"));\n+                        item.add(new AjaxCheckBoxPanel(\n+                                \"connPropAttrOverridable\",\n+                                \"Overridable\",\n+                                new PropertyModel<Boolean>(property,\n+                                \"overridable\"),\n+                                true).setTitle(\"Overridable\"));\n \n-                connectorTO.getConfiguration().add(property);\n-            }\n-        };\n+                        connectorTO.getConfiguration().add(property);\n+                    }\n+                };\n \n         propertiesContainer = new WebMarkupContainer(\"container\");\n         propertiesContainer.setOutputMarkupId(true);\n@@ -308,12 +314,13 @@ protected void onSubmit(final AjaxRequestTarget target,\n                         restClient.update(connector);\n                     }\n \n-                    basePage.setOperationResult(true);\n+                    ((Connectors) callerPageRef.getPage()).setOperationResult(\n+                            true);\n                     window.close(target);\n                 } catch (SyncopeClientCompositeErrorException e) {\n                     error(getString(\"error\") + \":\" + e.getMessage());\n-                    basePage.setOperationResult(false);\n-\n+                    ((Connectors) callerPageRef.getPage()).setOperationResult(\n+                            false);\n                     LOG.error(\"While creating or updating connector \"\n                             + connector);\n                 }\n@@ -323,7 +330,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"fb4ec7ebd42d5cf4e20964108853c1b907b365f2","filename":"console/src/main/java/org/syncope/console/pages/Connectors.java","status":"modified","additions":19,"deletions":19,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FConnectors.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,15 +19,15 @@\n import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -40,6 +40,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.ConnInstanceTO;\n import org.syncope.client.to.ResourceTO;\n@@ -93,7 +94,7 @@ public Connectors(PageParameters parameters) {\n         add(editConnectorWin = new ModalWindow(\"editConnectorWin\"));\n \n         paginatorRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_CONNECTORS_PAGINATOR_ROWS);\n \n         List<IColumn> columns = new ArrayList<IColumn>();\n@@ -143,7 +144,7 @@ public void onClick(final AjaxRequestTarget target) {\n                                     @Override\n                                     public Page createPage() {\n                                         return new ConnectorModalPage(\n-                                                Connectors.this,\n+                                                Connectors.this.getPageReference(),\n                                                 editConnectorWin, connectorTO,\n                                                 false);\n                                     }\n@@ -202,8 +203,8 @@ public void onClick(final AjaxRequestTarget target) {\n                                     + connectorTO.getId(), e);\n                         }\n \n-                        target.addComponent(container);\n-                        target.addComponent(feedbackPanel);\n+                        target.add(container);\n+                        target.add(feedbackPanel);\n                     }\n                 };\n \n@@ -235,13 +236,11 @@ public void onClick(final AjaxRequestTarget target) {\n         createConnectorWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createConnectorWin.setInitialHeight(WIN_HEIGHT);\n         createConnectorWin.setInitialWidth(WIN_WIDTH);\n-        createConnectorWin.setPageMapName(\"create-conn-modal\");\n         createConnectorWin.setCookieName(\"create-conn-modal\");\n \n         editConnectorWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editConnectorWin.setInitialHeight(WIN_HEIGHT);\n         editConnectorWin.setInitialWidth(WIN_WIDTH);\n-        editConnectorWin.setPageMapName(\"edit-conn-modal\");\n         editConnectorWin.setCookieName(\"edit-conn-modal\");\n \n         AjaxLink createConnectorLink = new IndicatingAjaxLink(\n@@ -260,8 +259,8 @@ public void onClick(AjaxRequestTarget target) {\n                     @Override\n                     public Page createPage() {\n                         ConnectorModalPage form = new ConnectorModalPage(\n-                                Connectors.this, editConnectorWin,\n-                                new ConnInstanceTO(), true);\n+                                Connectors.this.getPageReference(),\n+                                editConnectorWin, new ConnInstanceTO(), true);\n                         return form;\n                     }\n                 });\n@@ -289,13 +288,13 @@ public Page createPage() {\n \n             @Override\n             protected void onUpdate(AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(),\n+                        getResponse(),\n                         Constants.PREF_CONNECTORS_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n-                table.setRowsPerPage(paginatorRows);\n+                table.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(container);\n+                target.add(container);\n             }\n         });\n \n@@ -304,8 +303,9 @@ protected void onUpdate(AjaxRequestTarget target) {\n     }\n \n     /**\n-     * Check if the delete action is forbidden\n-     * @param ConnectorInstanceTO object to check\n+     * Check if the delete action is forbidden.\n+     *\n+     * @param connectorTO object to check\n      * @return true if the action is forbidden, false otherwise\n      */\n     public boolean checkDeleteIsForbidden(ConnInstanceTO connectorTO) {\n@@ -337,10 +337,10 @@ private void setWindowClosedCallback(ModalWindow window,\n \n                     @Override\n                     public void onClose(AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(feedbackPanel);\n+                            target.add(feedbackPanel);\n                             operationResult = false;\n                         }\n                     }\n@@ -363,7 +363,7 @@ class ConnectorsProvider extends SortableDataProvider<ConnInstanceTO> {\n \n         public ConnectorsProvider() {\n             //Default sorting\n-            setSort(\"id\", true);\n+            setSort(\"id\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<ConnInstanceTO>(\n                     this);"},{"sha":"2d48819a058e0d922ac5258cbd22c875dc45cc10","filename":"console/src/main/java/org/syncope/console/pages/DerivedSchemaModalPage.java","status":"modified","additions":6,"deletions":5,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDerivedSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDerivedSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDerivedSchemaModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,12 +16,13 @@\n  */\n package org.syncope.console.pages;\n \n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.model.CompoundPropertyModel;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n import org.syncope.client.AbstractBaseBean;\n@@ -41,7 +42,7 @@ public DerivedSchemaModalPage(String kind) {\n \n     @Override\n     public void setSchemaModalPage(\n-            final BasePage basePage,\n+            final PageReference callerPageRef,\n             final ModalWindow window,\n             AbstractBaseBean schema,\n             final boolean createFlag) {\n@@ -81,7 +82,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                             (DerivedSchemaTO) form.getDefaultModelObject());\n                 }\n \n-                Schema callerPage = (Schema) basePage;\n+                Schema callerPage = (Schema) callerPageRef.getPage();\n                 callerPage.setOperationResult(true);\n \n                 window.close(target);\n@@ -91,7 +92,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"d5dd8e50e161e0843c51c9955780bf3ae41f9728","filename":"console/src/main/java/org/syncope/console/pages/DisplayAttributesModalPage.java","status":"modified","additions":10,"deletions":6,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FDisplayAttributesModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -17,6 +17,7 @@\n package org.syncope.console.pages;\n \n import java.util.List;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n@@ -40,15 +41,15 @@ public class DisplayAttributesModalPage extends BaseModalPage {\n \n     private final List<String> selectedSchemas;\n \n-    public DisplayAttributesModalPage(final Users basePage,\n+    public DisplayAttributesModalPage(final PageReference callerPageRef,\n             final IModel<List<String>> schemaNames,\n             final ModalWindow window) {\n \n         super();\n \n         Form userAttributesForm = new Form(\"UserAttributesForm\");\n         userAttributesForm.setModel(new CompoundPropertyModel(this));\n-        selectedSchemas = prefMan.getList(getWebRequestCycle().getWebRequest(),\n+        selectedSchemas = prefMan.getList(getRequest(),\n                 Constants.PREF_USERS_ATTRIBUTES_VIEW);\n \n         userAttributesForm.add(new CheckBoxMultipleChoice(\"schemaNames\",\n@@ -61,14 +62,17 @@ public DisplayAttributesModalPage(final Users basePage,\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n+                    final Form<?> form) {\n \n-                prefMan.setList(getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.setList(getRequest(), getResponse(),\n                         Constants.PREF_USERS_ATTRIBUTES_VIEW, selectedSchemas);\n-                basePage.setModalResult(true);\n+                ((Users) callerPageRef.getPage()).setModalResult(true);\n                 window.close(target);\n             }\n+\n+            @Override\n+            protected void onError(AjaxRequestTarget target, Form<?> form) {\n+            }\n         };\n         userAttributesForm.add(submit);\n         add(userAttributesForm);"},{"sha":"958ff7386d350f032db7f7e7ae46cf3230b6d8a3","filename":"console/src/main/java/org/syncope/console/pages/ErrorPage.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,10 +14,10 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n import org.apache.wicket.model.Model;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n /**\n  * Error WebPage.\n@@ -28,9 +28,9 @@ public ErrorPage(final PageParameters parameters) {\n         super(parameters);\n \n         add(new Label(\"errorTitle\", new Model<String>(\n-                parameters.getString(\"errorTitle\"))));\n+                parameters.get(\"errorTitle\").toString())));\n         add(new Label(\"errorMessage\", new Model<String>(\n-                parameters.getString(\"errorMessage\"))));\n+                parameters.get(\"errorMessage\").toString())));\n \n         add(new BookmarkablePageLink(\"home\", getApplication().getHomePage()));\n     }"},{"sha":"7c4a3abd153e57d28a9ad2f80942d3c4e68a0c31","filename":"console/src/main/java/org/syncope/console/pages/GTaskModalPage.java","status":"modified","additions":3,"deletions":10,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FGTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FGTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FGTaskModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -32,24 +32,17 @@ public class GTaskModalPage extends SchedTaskModalPage {\n \n     private static final long serialVersionUID = -2501860242590060867L;\n \n-    /**\n-     *\n-     * @param basePage base\n-     * @param modalWindow modal window\n-     * @param connectorTO\n-     * @param create : set to true only if a CREATE operation is required\n-     */\n     public GTaskModalPage(\n-            final BasePage basePage,\n             final ModalWindow window,\n             final SchedTaskTO taskTO) {\n \n-        super(basePage, window, taskTO);\n+        super(window, taskTO);\n \n         final IModel<List<String>> classNames =\n                 new LoadableDetachableModel<List<String>>() {\n \n-                    private static final long serialVersionUID = 5275935387613157437L;\n+                    private static final long serialVersionUID =\n+                            5275935387613157437L;\n \n                     @Override\n                     protected List<String> load() {"},{"sha":"ea6b912486a5a14f79931103673d8bd570daf894","filename":"console/src/main/java/org/syncope/console/pages/HomePage.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FHomePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FHomePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FHomePage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,16 +14,16 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.PageParameters;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n /**\n  * Syncope Home-Page.\n  */\n-public class HomePage extends BasePage\n-{\n+public class HomePage extends BasePage {\n \n-    public HomePage( PageParameters parameters )\n-    {\n-        super( parameters );\n+    private static final long serialVersionUID = -6712990478380766293L;\n+\n+    public HomePage(final PageParameters parameters) {\n+        super(parameters);\n     }\n }"},{"sha":"3b5e5a3ff38009cb535ceaa5539239f74ef3cab6","filename":"console/src/main/java/org/syncope/console/pages/Login.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -23,7 +23,6 @@\n import org.apache.commons.httpclient.UsernamePasswordCredentials;\n import org.apache.commons.httpclient.auth.AuthScope;\n import org.apache.commons.httpclient.methods.GetMethod;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.markup.html.form.Button;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n@@ -34,6 +33,7 @@\n import org.apache.wicket.markup.html.panel.FeedbackPanel;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -53,6 +53,8 @@ public class Login extends WebPage {\n     private static final Logger LOG = LoggerFactory.getLogger(\n             Login.class);\n \n+    private static final long serialVersionUID = -3744389270366566218L;\n+\n     @SpringBean\n     private RestTemplate restTemplate;\n "},{"sha":"2a077b70a3c87b34c1b8ffbc1b2f3515c0e81041","filename":"console/src/main/java/org/syncope/console/pages/Logout.java","status":"modified","additions":7,"deletions":3,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogout.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogout.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FLogout.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,19 +14,23 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.PageParameters;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.syncope.console.SyncopeSession;\n \n /**\n  * Syncope Logout.\n  */\n public class Logout extends BasePage {\n \n-    public Logout(PageParameters parameters) {\n+    private static final long serialVersionUID = -2143007520243939450L;\n+\n+    public Logout(final PageParameters parameters) {\n         super(parameters);\n \n         SyncopeSession.get().invalidate();\n-        getRequestCycle().setRedirect(true);\n+\n+        // TODO: check that this is indeed not necessary anymore.\n+        //        getRequestCycle().setRedirect(true);\n \n         setResponsePage(getApplication().getHomePage());\n     }"},{"sha":"e7d548ad557d979ba74685130affaea6690093f2","filename":"console/src/main/java/org/syncope/console/pages/MembershipModalPage.java","status":"modified","additions":12,"deletions":6,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FMembershipModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -15,10 +15,9 @@\n package org.syncope.console.pages;\n \n import org.syncope.console.pages.panels.AttributesPanel;\n-import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.model.CompoundPropertyModel;\n@@ -33,10 +32,11 @@\n  */\n public class MembershipModalPage extends BaseModalPage {\n \n+    private static final long serialVersionUID = -4360802478081432549L;\n+\n     private AjaxButton submit;\n \n     public MembershipModalPage(\n-            final Page basePage,\n             final ModalWindow window,\n             final MembershipTO membershipTO,\n             final UserTO userTO) {\n@@ -47,16 +47,22 @@ public MembershipModalPage(\n \n         submit = new AjaxButton(\"submit\", new ResourceModel(\"submit\")) {\n \n+            private static final long serialVersionUID = -958724007591692537L;\n+\n             @Override\n-            protected void onSubmit(AjaxRequestTarget target, Form form) {\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n                 userTO.removeMembership(membershipTO);\n                 userTO.addMembership(membershipTO);\n                 window.close(target);\n             }\n \n             @Override\n-            protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(feedbackPanel);\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"d337ac8e61c4117db6a9a41d3bf11ac0571fda98","filename":"console/src/main/java/org/syncope/console/pages/PTaskModalPage.java","status":"modified","additions":1,"deletions":13,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,7 +16,6 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.TextField;\n import org.syncope.client.to.TaskTO;\n \n@@ -25,18 +24,7 @@\n  */\n public class PTaskModalPage extends TaskModalPage {\n \n-    /**\n-     *\n-     * @param basePage base\n-     * @param modalWindow modal window\n-     * @param connectorTO\n-     * @param create : set to true only if a CREATE operation is required\n-     */\n-    public PTaskModalPage(\n-            final BasePage basePage,\n-            final ModalWindow window,\n-            final TaskTO taskTO) {\n-\n+    public PTaskModalPage(final TaskTO taskTO) {\n         super(taskTO);\n \n         final TextField accountId = new TextField(\"accountId\");"},{"sha":"a33be0fd2f9b2ff956cd0a9be34f04b1462274ac","filename":"console/src/main/java/org/syncope/console/pages/PasswordPolicyModalPage.java","status":"modified","additions":3,"deletions":6,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPasswordPolicyModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPasswordPolicyModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPasswordPolicyModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,7 +19,6 @@\n import java.util.Arrays;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n-import org.syncope.console.pages.panels.PasswordPoliciesPanel;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.model.PropertyModel;\n@@ -44,9 +43,7 @@ public class PasswordPolicyModalPage extends BaseModalPage {\n     @SpringBean\n     private PolicyRestClient policyRestClient;\n \n-    public PasswordPolicyModalPage(\n-            final PasswordPoliciesPanel basePage,\n-            final ModalWindow window,\n+    public PasswordPolicyModalPage(final ModalWindow window,\n             final PasswordPolicyTO policyTO) {\n \n         super();\n@@ -117,13 +114,13 @@ protected void onSubmit(\n                     LOG.error(\"While creating policy\", e);\n \n                     error(getString(\"operation_error\"));\n-                    target.addComponent(getPage().get(\"feedback\"));\n+                    target.add(getPage().get(\"feedback\"));\n                 }\n             }\n \n             @Override\n             protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(getPage().get(\"feedback\"));\n+                target.add(getPage().get(\"feedback\"));\n             }\n         };\n "},{"sha":"f822c73041fe8e801ee680f664818580a8a66dc2","filename":"console/src/main/java/org/syncope/console/pages/Report.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FReport.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FReport.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FReport.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,14 +14,16 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.PageParameters;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n \n /**\n  * Report WebPage.\n  */\n-public class Report extends BasePage{\n+public class Report extends BasePage {\n \n-    public Report(PageParameters parameters) {\n+    private static final long serialVersionUID = -2071214196989178694L;\n+\n+    public Report(final PageParameters parameters) {\n         super(parameters);\n     }\n }"},{"sha":"8a3abb41f97fda77280eeefef515163c1e4d559d","filename":"console/src/main/java/org/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":231,"deletions":208,"changes":439,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -22,13 +22,13 @@\n import java.util.HashSet;\n import java.util.List;\n import java.util.Set;\n-\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.IAjaxCallDecorator;\n import org.apache.wicket.ajax.calldecorator.AjaxPreprocessingCallDecorator;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n@@ -91,8 +91,9 @@ public class ResourceModalPage extends BaseModalPage {\n \n     private List<String> resourceSchemaNames;\n \n-    public ResourceModalPage(final Resources basePage, final ModalWindow window,\n-            final ResourceTO resourceTO, final boolean createFlag) {\n+    public ResourceModalPage(final PageReference callPageRef,\n+            final ModalWindow window, final ResourceTO resourceTO,\n+            final boolean createFlag) {\n \n         super();\n \n@@ -171,12 +172,14 @@ protected List<ConnConfProperty> load() {\n                 new AjaxCheckBoxPanel(\n                 \"forceMandatoryConstraint\",\n                 getString(\"forceMandatoryConstraint\"),\n-                new PropertyModel<Boolean>(resourceTO, \"forceMandatoryConstraint\"),\n+                new PropertyModel<Boolean>(resourceTO,\n+                \"forceMandatoryConstraint\"),\n                 false);\n         form.add(forceMandatoryConstraint);\n \n         final AjaxDropDownChoicePanel<PropagationMode> optionalPropagationMode =\n-                new AjaxDropDownChoicePanel<PropagationMode>(\"optionalPropagationMode\",\n+                new AjaxDropDownChoicePanel<PropagationMode>(\n+                \"optionalPropagationMode\",\n                 getString(\"optionalPropagationMode\"),\n                 new PropertyModel(resourceTO, \"optionalPropagationMode\"),\n                 false);\n@@ -247,219 +250,236 @@ public void detach() {\n         connector.setEnabled(createFlag);\n         form.add(connector);\n \n-        final ListView<SchemaMappingTO> mappings = new ListView<SchemaMappingTO>(\n+        final ListView<SchemaMappingTO> mappings =\n+                new ListView<SchemaMappingTO>(\n                 \"mappings\", resourceTO.getMappings()) {\n \n-            private static final long serialVersionUID = 4949588177564901031L;\n-\n-            @Override\n-            protected void populateItem(\n-                    final ListItem<SchemaMappingTO> item) {\n-\n-                final SchemaMappingTO mappingTO = item.getModelObject();\n-\n-                item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n-                        new Model(Boolean.FALSE)) {\n-\n                     private static final long serialVersionUID =\n-                            7170946748485726506L;\n+                            4949588177564901031L;\n \n                     @Override\n-                    protected void onUpdate(final AjaxRequestTarget target) {\n-                        int index = -1;\n-                        for (int i = 0; i < resourceTO.getMappings().size()\n-                                && index == -1; i++) {\n+                    protected void populateItem(\n+                            final ListItem<SchemaMappingTO> item) {\n \n-                            if (mappingTO.equals(\n-                                    resourceTO.getMappings().get(i))) {\n+                        final SchemaMappingTO mappingTO = item.getModelObject();\n \n-                                index = i;\n-                            }\n-                        }\n-\n-                        if (index != -1) {\n-                            resourceTO.getMappings().remove(index);\n-                            item.getParent().removeAll();\n-                            target.addComponent(mappingContainer);\n-                        }\n-                    }\n-\n-                    @Override\n-                    protected IAjaxCallDecorator getAjaxCallDecorator() {\n-                        return new AjaxPreprocessingCallDecorator(\n-                                super.getAjaxCallDecorator()) {\n+                        item.add(new AjaxDecoratedCheckbox(\"toRemove\",\n+                                new Model(Boolean.FALSE)) {\n \n                             private static final long serialVersionUID =\n-                                    -7927968187160354605L;\n+                                    7170946748485726506L;\n \n                             @Override\n-                            public CharSequence preDecorateScript(\n-                                    final CharSequence script) {\n-\n-                                return \"if (confirm('\"\n-                                        + getString(\"confirmDelete\") + \"'))\"\n-                                        + \"{\" + script + \"} \"\n-                                        + \"else {this.checked = false;}\";\n+                            protected void onUpdate(\n+                                    final AjaxRequestTarget target) {\n+                                int index = -1;\n+                                for (int i = 0; i < resourceTO.getMappings().\n+                                        size()\n+                                        && index == -1; i++) {\n+\n+                                    if (mappingTO.equals(\n+                                            resourceTO.getMappings().get(i))) {\n+\n+                                        index = i;\n+                                    }\n+                                }\n+\n+                                if (index != -1) {\n+                                    resourceTO.getMappings().remove(index);\n+                                    item.getParent().removeAll();\n+                                    target.add(mappingContainer);\n+                                }\n                             }\n-                        };\n-                    }\n-                });\n-\n-                final AjaxDropDownChoicePanel sourceAttrNames =\n-                        new AjaxDropDownChoicePanel<String>(\"sourceAttrNames\",\n-                        getString(\"sourceAttrNames\"),\n-                        new PropertyModel(mappingTO, \"sourceAttrName\"),\n-                        true);\n-                sourceAttrNames.setChoices(resourceSchemaNames);\n-                sourceAttrNames.setRequired(true);\n-                sourceAttrNames.setStyleShet(\n-                        \"ui-widget-content ui-corner-all short_fixedsize\");\n-\n-                if (mappingTO.getSourceMappingType() == null) {\n-                    sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n-                } else {\n-                    switch (mappingTO.getSourceMappingType()) {\n-                        case UserSchema:\n-                            sourceAttrNames.setChoices(uSchemaAttrNames);\n-                            break;\n-\n-                        case UserDerivedSchema:\n-                            sourceAttrNames.setChoices(uDerSchemaAttrNames);\n-                            break;\n-\n-                        case UserVirtualSchema:\n-                            sourceAttrNames.setChoices(uVirSchemaAttrNames);\n-                            break;\n-\n-                        case SyncopeUserId:\n-                            sourceAttrNames.setEnabled(false);\n-                            sourceAttrNames.setRequired(false);\n-                            sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n-                            mappingTO.setSourceAttrName(\"SyncopeUserId\");\n-                            break;\n-\n-                        case Password:\n-                            sourceAttrNames.setEnabled(false);\n-                            sourceAttrNames.setRequired(false);\n-                            sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n-                            mappingTO.setSourceAttrName(\"Password\");\n-                            break;\n-\n-                        default:\n-                            sourceAttrNames.setChoices(\n-                                    Collections.EMPTY_LIST);\n-                    }\n-                }\n-                item.add(sourceAttrNames);\n-\n-                final SourceMappingTypesDropDownChoice mappingTypesPanel =\n-                        new SourceMappingTypesDropDownChoice(\n-                        \"sourceMappingTypes\",\n-                        getString(\"sourceMappingTypes\"),\n-                        new PropertyModel<SourceMappingType>(\n-                        mappingTO, \"sourceMappingType\"),\n-                        sourceAttrNames);\n-\n-                mappingTypesPanel.setRequired(true);\n-                mappingTypesPanel.setChoices(sourceMappingTypes.getObject());\n-                mappingTypesPanel.setStyleShet(\n-                        \"ui-widget-content ui-corner-all short_fixedsize\");\n-                item.add(mappingTypesPanel);\n-\n-                final FieldPanel destAttrName;\n-\n-                if (resourceSchemaNames.isEmpty()) {\n-                    destAttrName = new AjaxTextFieldPanel(\n-                            \"destAttrName\", getString(\"destAttrNames\"),\n-                            new PropertyModel<String>(mappingTO, \"destAttrName\"),\n-                            true);\n-\n-                } else {\n-                    destAttrName =\n-                            new AjaxDropDownChoicePanel<String>(\n-                            \"destAttrName\", getString(\"destAttrNames\"),\n-                            new PropertyModel(mappingTO, \"destAttrName\"),\n-                            true);\n-                    ((AjaxDropDownChoicePanel) destAttrName).setChoices(\n-                            resourceSchemaNames);\n-\n-                }\n-\n-                boolean required = mappingTO != null\n-                        && !mappingTO.isAccountid()\n-                        && !mappingTO.isPassword();\n-\n-                destAttrName.setRequired(required);\n-                destAttrName.setEnabled(required);\n-\n-                destAttrName.setStyleShet(\n-                        \"ui-widget-content ui-corner-all short_fixedsize\");\n-                item.add(destAttrName);\n-\n-                final AjaxTextFieldPanel mandatoryCondition =\n-                        new AjaxTextFieldPanel(\n-                        \"mandatoryCondition\",\n-                        getString(\"mandatoryCondition\"),\n-                        new PropertyModel(mappingTO, \"mandatoryCondition\"),\n-                        true);\n-\n-                mandatoryCondition.setChoices(Arrays.asList(\n-                        new String[]{\"true\", \"false\"}));\n-\n-                mandatoryCondition.setStyleShet(\n-                        \"ui-widget-content ui-corner-all short_fixedsize\");\n-\n-                item.add(mandatoryCondition);\n-\n-                final AjaxCheckBoxPanel accountId = new AjaxCheckBoxPanel(\n-                        \"accountId\", getString(\"accountId\"),\n-                        new PropertyModel(mappingTO, \"accountid\"), false);\n-\n-                accountId.getField().add(\n-                        new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n-\n-                            private static final long serialVersionUID =\n-                                    -1107858522700306810L;\n \n                             @Override\n-                            protected void onUpdate(AjaxRequestTarget target) {\n-                                destAttrName.setEnabled(\n-                                        !accountId.getModelObject()\n-                                        && !mappingTO.isPassword());\n-                                destAttrName.setModelObject(null);\n-                                destAttrName.setRequired(\n-                                        !accountId.getModelObject());\n-                                target.addComponent(destAttrName);\n+                            protected IAjaxCallDecorator getAjaxCallDecorator() {\n+                                return new AjaxPreprocessingCallDecorator(\n+                                        super.getAjaxCallDecorator()) {\n+\n+                                    private static final long serialVersionUID =\n+                                            -7927968187160354605L;\n+\n+                                    @Override\n+                                    public CharSequence preDecorateScript(\n+                                            final CharSequence script) {\n+\n+                                        return \"if (confirm('\"\n+                                                + getString(\"confirmDelete\")\n+                                                + \"'))\"\n+                                                + \"{\" + script + \"} \"\n+                                                + \"else {this.checked = false;}\";\n+                                    }\n+                                };\n                             }\n                         });\n \n-                item.add(accountId);\n-\n-                final AjaxCheckBoxPanel password = new AjaxCheckBoxPanel(\n-                        \"password\", getString(\"password\"),\n-                        new PropertyModel(mappingTO, \"password\"), true);\n-\n-                password.getField().add(\n-                        new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+                        final AjaxDropDownChoicePanel sourceAttrNames =\n+                                new AjaxDropDownChoicePanel<String>(\n+                                \"sourceAttrNames\",\n+                                getString(\"sourceAttrNames\"),\n+                                new PropertyModel(mappingTO, \"sourceAttrName\"),\n+                                true);\n+                        sourceAttrNames.setChoices(resourceSchemaNames);\n+                        sourceAttrNames.setRequired(true);\n+                        sourceAttrNames.setStyleShet(\n+                                \"ui-widget-content ui-corner-all short_fixedsize\");\n+\n+                        if (mappingTO.getSourceMappingType() == null) {\n+                            sourceAttrNames.setChoices(Collections.EMPTY_LIST);\n+                        } else {\n+                            switch (mappingTO.getSourceMappingType()) {\n+                                case UserSchema:\n+                                    sourceAttrNames.setChoices(uSchemaAttrNames);\n+                                    break;\n+\n+                                case UserDerivedSchema:\n+                                    sourceAttrNames.setChoices(\n+                                            uDerSchemaAttrNames);\n+                                    break;\n+\n+                                case UserVirtualSchema:\n+                                    sourceAttrNames.setChoices(\n+                                            uVirSchemaAttrNames);\n+                                    break;\n+\n+                                case SyncopeUserId:\n+                                    sourceAttrNames.setEnabled(false);\n+                                    sourceAttrNames.setRequired(false);\n+                                    sourceAttrNames.setChoices(\n+                                            Collections.EMPTY_LIST);\n+                                    mappingTO.setSourceAttrName(\"SyncopeUserId\");\n+                                    break;\n+\n+                                case Password:\n+                                    sourceAttrNames.setEnabled(false);\n+                                    sourceAttrNames.setRequired(false);\n+                                    sourceAttrNames.setChoices(\n+                                            Collections.EMPTY_LIST);\n+                                    mappingTO.setSourceAttrName(\"Password\");\n+                                    break;\n+\n+                                default:\n+                                    sourceAttrNames.setChoices(\n+                                            Collections.EMPTY_LIST);\n+                            }\n+                        }\n+                        item.add(sourceAttrNames);\n+\n+                        final SourceMappingTypesDropDownChoice mappingTypesPanel =\n+                                new SourceMappingTypesDropDownChoice(\n+                                \"sourceMappingTypes\",\n+                                getString(\"sourceMappingTypes\"),\n+                                new PropertyModel<SourceMappingType>(\n+                                mappingTO, \"sourceMappingType\"),\n+                                sourceAttrNames);\n+\n+                        mappingTypesPanel.setRequired(true);\n+                        mappingTypesPanel.setChoices(sourceMappingTypes.\n+                                getObject());\n+                        mappingTypesPanel.setStyleShet(\n+                                \"ui-widget-content ui-corner-all short_fixedsize\");\n+                        item.add(mappingTypesPanel);\n+\n+                        final FieldPanel destAttrName;\n+\n+                        if (resourceSchemaNames.isEmpty()) {\n+                            destAttrName = new AjaxTextFieldPanel(\n+                                    \"destAttrName\", getString(\"destAttrNames\"),\n+                                    new PropertyModel<String>(mappingTO,\n+                                    \"destAttrName\"),\n+                                    true);\n \n-                            private static final long serialVersionUID =\n-                                    -1107858522700306810L;\n+                        } else {\n+                            destAttrName =\n+                                    new AjaxDropDownChoicePanel<String>(\n+                                    \"destAttrName\", getString(\"destAttrNames\"),\n+                                    new PropertyModel(mappingTO, \"destAttrName\"),\n+                                    true);\n+                            ((AjaxDropDownChoicePanel) destAttrName).setChoices(\n+                                    resourceSchemaNames);\n \n-                            @Override\n-                            protected void onUpdate(AjaxRequestTarget target) {\n-                                destAttrName.setEnabled(\n-                                        !mappingTO.isAccountid()\n-                                        && !password.getModelObject());\n-                                destAttrName.setModelObject(null);\n-                                destAttrName.setRequired(\n-                                        !password.getModelObject());\n-                                target.addComponent(destAttrName);\n-                            }\n-                        });\n+                        }\n \n-                item.add(password);\n-            }\n-        };\n+                        boolean required = mappingTO != null\n+                                && !mappingTO.isAccountid()\n+                                && !mappingTO.isPassword();\n+\n+                        destAttrName.setRequired(required);\n+                        destAttrName.setEnabled(required);\n+\n+                        destAttrName.setStyleShet(\n+                                \"ui-widget-content ui-corner-all short_fixedsize\");\n+                        item.add(destAttrName);\n+\n+                        final AjaxTextFieldPanel mandatoryCondition =\n+                                new AjaxTextFieldPanel(\n+                                \"mandatoryCondition\",\n+                                getString(\"mandatoryCondition\"),\n+                                new PropertyModel(mappingTO,\n+                                \"mandatoryCondition\"),\n+                                true);\n+\n+                        mandatoryCondition.setChoices(Arrays.asList(\n+                                new String[]{\"true\", \"false\"}));\n+\n+                        mandatoryCondition.setStyleShet(\n+                                \"ui-widget-content ui-corner-all short_fixedsize\");\n+\n+                        item.add(mandatoryCondition);\n+\n+                        final AjaxCheckBoxPanel accountId =\n+                                new AjaxCheckBoxPanel(\n+                                \"accountId\", getString(\"accountId\"),\n+                                new PropertyModel(mappingTO, \"accountid\"), false);\n+\n+                        accountId.getField().add(\n+                                new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n+                                    private static final long serialVersionUID =\n+                                            -1107858522700306810L;\n+\n+                                    @Override\n+                                    protected void onUpdate(\n+                                            AjaxRequestTarget target) {\n+                                        destAttrName.setEnabled(\n+                                                !accountId.getModelObject()\n+                                                && !mappingTO.isPassword());\n+                                        destAttrName.setModelObject(null);\n+                                        destAttrName.setRequired(\n+                                                !accountId.getModelObject());\n+                                        target.add(destAttrName);\n+                                    }\n+                                });\n+\n+                        item.add(accountId);\n+\n+                        final AjaxCheckBoxPanel password =\n+                                new AjaxCheckBoxPanel(\n+                                \"password\", getString(\"password\"),\n+                                new PropertyModel(mappingTO, \"password\"), true);\n+\n+                        password.getField().add(\n+                                new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n+                                    private static final long serialVersionUID =\n+                                            -1107858522700306810L;\n+\n+                                    @Override\n+                                    protected void onUpdate(\n+                                            AjaxRequestTarget target) {\n+                                        destAttrName.setEnabled(\n+                                                !mappingTO.isAccountid()\n+                                                && !password.getModelObject());\n+                                        destAttrName.setModelObject(null);\n+                                        destAttrName.setRequired(\n+                                                !password.getModelObject());\n+                                        target.add(destAttrName);\n+                                    }\n+                                });\n+\n+                        item.add(password);\n+                    }\n+                };\n \n         mappings.setReuseItems(true);\n         mappingContainer.add(mappings);\n@@ -474,7 +494,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n                     final Form form) {\n \n                 resourceTO.getMappings().add(new SchemaMappingTO());\n-                target.addComponent(mappingContainer);\n+                target.add(mappingContainer);\n             }\n \n             @Override\n@@ -533,7 +553,7 @@ protected void onUpdate(AjaxRequestTarget target) {\n \n                                 updateResourceSchemaNames(resourceTO);\n \n-                                target.addComponent(mappingContainer);\n+                                target.add(mappingContainer);\n                             }\n                         });\n \n@@ -558,8 +578,8 @@ protected void onUpdate(AjaxRequestTarget target) {\n                         updateResourceSchemaNames(resourceTO);\n                         updateConnectorProperties(resourceTO.getConnectorId());\n \n-                        target.addComponent(mappingContainer);\n-                        target.addComponent(connectorPropertiesContainer);\n+                        target.add(mappingContainer);\n+                        target.add(connectorPropertiesContainer);\n                     }\n                 });\n \n@@ -583,7 +603,8 @@ protected void onSubmit(final AjaxRequestTarget target,\n                 }\n                 if (accountIdCount == 0 || accountIdCount > 1) {\n                     error(getString(\"accountIdValidation\"));\n-                    basePage.setOperationResult(false);\n+                    ((Resources) callPageRef.getPage()).setOperationResult(\n+                            false);\n                 } else {\n                     try {\n                         if (createFlag) {\n@@ -592,11 +613,13 @@ protected void onSubmit(final AjaxRequestTarget target,\n                             restClient.update(resourceTO);\n                         }\n \n-                        basePage.setOperationResult(true);\n+                        ((Resources) callPageRef.getPage()).setOperationResult(\n+                                true);\n                         window.close(target);\n                     } catch (SyncopeClientCompositeErrorException e) {\n                         error(getString(\"error\") + \":\" + e.getMessage());\n-                        basePage.setOperationResult(false);\n+                        ((Resources) callPageRef.getPage()).setOperationResult(\n+                                false);\n \n                         LOG.error(\"While creating/updating resource {}\",\n                                 resourceTO);\n@@ -608,7 +631,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n         form.add(submit);\n@@ -673,7 +696,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                     }\n \n                     chooserToPopulate.setChoices(result);\n-                    target.addComponent(chooserToPopulate);\n+                    target.add(chooserToPopulate);\n                 }\n             });\n         }"},{"sha":"ef6a0ae99b05d6477269eb040b9fcf4ded323ec0","filename":"console/src/main/java/org/syncope/console/pages/Resources.java","status":"modified","additions":15,"deletions":19,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,15 +19,15 @@\n import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -40,6 +40,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.ResourceTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n@@ -90,8 +91,7 @@ public Resources(PageParameters parameters) {\n \n         add(feedbackPanel);\n \n-        paginatorRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+        paginatorRows = prefMan.getPaginatorRows(getRequest(),\n                 Constants.PREF_RESOURCES_PAGINATOR_ROWS);\n \n         List<IColumn> columns = new ArrayList<IColumn>();\n@@ -126,9 +126,8 @@ public void onClick(AjaxRequestTarget target) {\n                             @Override\n                             public Page createPage() {\n                                 ResourceModalPage form = new ResourceModalPage(\n-                                        Resources.this,\n-                                        mwindow,\n-                                        resourceTO, false);\n+                                        Resources.this.getPageReference(),\n+                                        mwindow, resourceTO, false);\n                                 return form;\n                             }\n                         });\n@@ -180,8 +179,8 @@ public void onClick(final AjaxRequestTarget target) {\n                                     + resourceTO.getName(), e);\n                         }\n \n-                        target.addComponent(feedbackPanel);\n-                        target.addComponent(container);\n+                        target.add(feedbackPanel);\n+                        target.add(container);\n                     }\n                 };\n \n@@ -214,13 +213,11 @@ public void onClick(final AjaxRequestTarget target) {\n         createResourceWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createResourceWin.setInitialHeight(WIN_HEIGHT);\n         createResourceWin.setInitialWidth(WIN_WIDTH);\n-        createResourceWin.setPageMapName(\"create-res-modal\");\n         createResourceWin.setCookieName(\"create-res-modal\");\n \n         mwindow.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         mwindow.setInitialHeight(WIN_HEIGHT);\n         mwindow.setInitialWidth(WIN_WIDTH);\n-        mwindow.setPageMapName(\"edit-res-modal\");\n         mwindow.setCookieName(\"edit-res-modal\");\n \n         add(new IndicatingAjaxLink(\"createResourceLink\") {\n@@ -238,7 +235,7 @@ public void onClick(AjaxRequestTarget target) {\n                     @Override\n                     public Page createPage() {\n                         final ResourceModalPage windows = new ResourceModalPage(\n-                                Resources.this, mwindow,\n+                                Resources.this.getPageReference(), mwindow,\n                                 new ResourceTO(), true);\n                         return windows;\n                     }\n@@ -260,13 +257,12 @@ public Page createPage() {\n \n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(), getResponse(),\n                         Constants.PREF_RESOURCES_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n \n-                table.setRowsPerPage(paginatorRows);\n-                target.addComponent(container);\n+                table.setItemsPerPage(paginatorRows);\n+                target.add(container);\n             }\n         });\n \n@@ -290,10 +286,10 @@ private void setWindowClosedCallback(ModalWindow window,\n \n                     @Override\n                     public void onClose(AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(feedbackPanel);\n+                            target.add(feedbackPanel);\n                             operationResult = false;\n                         }\n                     }\n@@ -312,7 +308,7 @@ class ResourcesProvider extends SortableDataProvider<ResourceTO> {\n \n         public ResourcesProvider() {\n             //Default sorting\n-            setSort(\"name\", true);\n+            setSort(\"name\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<ResourceTO>(this);\n         }"},{"sha":"a84c90b9ee5d1b799af270952b41fb250ec5e023","filename":"console/src/main/java/org/syncope/console/pages/RoleModalPage.java","status":"modified","additions":8,"deletions":6,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,9 +19,10 @@\n import org.syncope.console.pages.panels.AttributesPanel;\n import java.util.ArrayList;\n import java.util.List;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.markup.html.form.palette.Palette;\n@@ -68,13 +69,14 @@ public class RoleModalPage extends BaseModalPage {\n     /**\n      * Constructor.\n      *\n-     * @param basePage\n+     * @param callerPageRef\n      * @param window\n      * @param roleTO\n      * @param createFlag\n      */\n-    public RoleModalPage(final BasePage basePage, final ModalWindow window,\n-            final RoleTO roleTO, final boolean createFlag) {\n+    public RoleModalPage(final PageReference callerPageRef,\n+            final ModalWindow window, final RoleTO roleTO,\n+            final boolean createFlag) {\n \n         super();\n \n@@ -173,7 +175,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n                             roleRestClient.updateRole(roleMod);\n                         }\n                     }\n-                    ((Roles) basePage).setOperationResult(true);\n+                    ((Roles) callerPageRef.getPage()).setOperationResult(true);\n \n                     window.close(target);\n                 } catch (Exception e) {\n@@ -185,7 +187,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"afdfd00e889909ec851c43973647e5ed9b45d6f7","filename":"console/src/main/java/org/syncope/console/pages/Roles.java","status":"modified","additions":9,"deletions":8,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,21 +14,21 @@\n  */\n package org.syncope.console.pages;\n \n-import org.syncope.console.wicket.markup.html.tree.PropertyEditableColumn;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation;\n+import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation.Alignment;\n+import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation.Unit;\n import org.apache.wicket.extensions.markup.html.tree.table.IColumn;\n import org.apache.wicket.extensions.markup.html.tree.table.PropertyTreeColumn;\n import org.apache.wicket.extensions.markup.html.tree.table.TreeTable;\n-import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation.Alignment;\n-import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation.Unit;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.tree.AbstractTree;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.console.commons.RoleTreeBuilder;\n+import org.syncope.console.wicket.markup.html.tree.PropertyEditableColumn;\n \n /**\n  * Roles WebPage.\n@@ -61,7 +61,6 @@ public Roles(final PageParameters parameters) {\n         createRoleWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createRoleWin.setInitialHeight(WIN_HEIGHT);\n         createRoleWin.setInitialWidth(WIN_WIDTH);\n-        createRoleWin.setPageMapName(\"create-role-modal\");\n         createRoleWin.setCookieName(\"create-role-modal\");\n \n         container = new WebMarkupContainer(\"container\");\n@@ -76,7 +75,7 @@ public Roles(final PageParameters parameters) {\n             getString(\"column2\"),\n             \"userObject.empty\",\n             createRoleWin,\n-            Roles.this)};\n+            Roles.this.getPageReference())};\n \n         Form form = new Form(\"form\");\n         add(form);\n@@ -85,7 +84,9 @@ public Roles(final PageParameters parameters) {\n \n         form.add(tree);\n         tree.getTreeState().expandAll();\n-        tree.updateTree();\n+        if (AjaxRequestTarget.get() != null) {\n+            tree.updateTree();\n+        }\n \n         container.add(tree);\n         container.setOutputMarkupId(true);\n@@ -97,7 +98,7 @@ public Roles(final PageParameters parameters) {\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n \n                         if (operationResult) {\n                             getSession().info(getString(\"operation_succeded\"));"},{"sha":"e329d997dff47ff1c4cb239315a4f596f98b63e4","filename":"console/src/main/java/org/syncope/console/pages/STaskModalPage.java","status":"modified","additions":1,"deletions":9,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSTaskModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -50,19 +50,11 @@ public class STaskModalPage extends SchedTaskModalPage {\n     @SpringBean\n     private ResourceRestClient resourceRestClient;\n \n-    /**\n-     *\n-     * @param basePage base\n-     * @param modalWindow modal window\n-     * @param connectorTO\n-     * @param create : set to true only if a CREATE operation is required\n-     */\n     public STaskModalPage(\n-            final BasePage basePage,\n             final ModalWindow window,\n             final SyncTaskTO taskTO) {\n \n-        super(basePage, window, taskTO);\n+        super(window, taskTO);\n \n         final IModel<List<String>> allResources =\n                 new LoadableDetachableModel<List<String>>() {"},{"sha":"639041b01ca38c26cdc8199e065be56851394dc2","filename":"console/src/main/java/org/syncope/console/pages/SchedTaskModalPage.java","status":"modified","additions":4,"deletions":12,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchedTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchedTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchedTaskModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,7 +19,7 @@\n import java.util.Arrays;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n@@ -45,15 +45,7 @@ public class SchedTaskModalPage extends TaskModalPage {\n \n     protected WebMarkupContainer crontab;\n \n-    /**\n-     *\n-     * @param basePage base\n-     * @param modalWindow modal window\n-     * @param connectorTO\n-     * @param create : set to true only if a CREATE operation is required\n-     */\n     public SchedTaskModalPage(\n-            final BasePage basePage,\n             final ModalWindow window,\n             final SchedTaskTO taskTO) {\n \n@@ -84,7 +76,7 @@ public SchedTaskModalPage(\n             private static final long serialVersionUID = -5843424545478691442L;\n \n             @Override\n-            protected CharSequence getDefaultChoice(Object selected) {\n+            protected CharSequence getDefaultChoice(String selected) {\n                 return \"<option value=\\\"\\\">\"\n                         + getString(\"chooseForTemplate\")\n                         + \"</option>\";\n@@ -141,7 +133,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                                 getCronField(cronTemplateChooser, 4));\n                         daysOfWeek.setModelObject(\n                                 getCronField(cronTemplateChooser, 5));\n-                        target.addComponent(crontab);\n+                        target.add(crontab);\n                     }\n                 });\n \n@@ -194,7 +186,7 @@ protected void onSubmit(\n \n             @Override\n             protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"bf9325cf5dbb1ea3adf2bd9f3b136d2c73246f75","filename":"console/src/main/java/org/syncope/console/pages/Schema.java","status":"modified","additions":32,"deletions":44,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,21 +14,20 @@\n  */\n package org.syncope.console.pages;\n \n-import org.syncope.console.SchemaModalPageFactory;\n import java.util.ArrayList;\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -41,11 +40,13 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.AbstractBaseBean;\n import org.syncope.client.to.DerivedSchemaTO;\n import org.syncope.client.to.SchemaTO;\n import org.syncope.client.to.VirtualSchemaTO;\n+import org.syncope.console.SchemaModalPageFactory;\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.SelectChoiceRenderer;\n@@ -65,20 +66,23 @@ private enum SchemaType {\n         RoleSchema,\n         UserSchema,\n         MembershipSchema\n+\n     };\n \n     private enum SchemaDerivedType {\n \n         RoleDerivedSchema,\n         UserDerivedSchema,\n         MembershipDerivedSchema\n+\n     };\n \n     private enum SchemaVirtualType {\n \n         RoleVirtualSchema,\n         UserVirtualSchema,\n         MembershipVirtualSchema\n+\n     };\n \n     private static final int WIN_WIDTH = 550;\n@@ -245,39 +249,39 @@ public Schema(PageParameters parameters) {\n                 \"editMembershipVirSchemaWin\"));\n \n         rolePageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_ROLE_SCHEMA_PAGINATOR_ROWS);\n \n         roleDerPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_ROLE_DER_SCHEMA_PAGINATOR_ROWS);\n \n         roleVirPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_ROLE_VIR_SCHEMA_PAGINATOR_ROWS);\n \n         userSchemaPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_USER_SCHEMA_PAGINATOR_ROWS);\n \n         userDerSchemaPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_USER_DER_SCHEMA_PAGINATOR_ROWS);\n \n         userVirSchemaPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_USER_VIR_SCHEMA_PAGINATOR_ROWS);\n \n         membershipPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_MEMBERSHIP_SCHEMA_PAGINATOR_ROWS);\n \n         membershipDerPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_MEMBERSHIP_DER_SCHEMA_PAGINATOR_ROWS);\n \n         membershipVirPageRows = prefMan.getPaginatorRows(\n-                getWebRequestCycle().getWebRequest(),\n+                getRequest(),\n                 Constants.PREF_MEMBERSHIP_VIR_SCHEMA_PAGINATOR_ROWS);\n \n         final String allowedCreateRoles = xmlRolesReader.getAllAllowedRoles(\n@@ -524,108 +528,90 @@ public Schema(PageParameters parameters) {\n \n         createUserSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createUserSchemaWin.setInitialWidth(WIN_WIDTH);\n-        createUserSchemaWin.setPageMapName(\"modal-1\");\n         createUserSchemaWin.setCookieName(\"modal-1\");\n         createUserSchemaWin.setMarkupId(\"createUserSchemaWin\");\n \n         editUserSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editUserSchemaWin.setInitialWidth(WIN_WIDTH);\n-        editUserSchemaWin.setPageMapName(\"modal-2\");\n         editUserSchemaWin.setCookieName(\"modal-2\");\n         editUserSchemaWin.setMarkupId(\"editUserSchemaWin\");\n \n         createUserDerivedSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createUserDerivedSchemaWin.setInitialWidth(WIN_WIDTH);\n         createUserDerivedSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createUserDerivedSchemaWin.setPageMapName(\"modal-3\");\n         createUserDerivedSchemaWin.setCookieName(\"modal-3\");\n \n         editUserDerivedSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editUserDerivedSchemaWin.setInitialWidth(WIN_WIDTH);\n         editUserDerivedSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        editUserDerivedSchemaWin.setPageMapName(\"modal-4\");\n         editUserDerivedSchemaWin.setCookieName(\"modal-4\");\n \n         createUserVirtualSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createUserVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         createUserVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createUserVirtualSchemaWin.setPageMapName(\"modal-5\");\n         createUserVirtualSchemaWin.setCookieName(\"modal-5\");\n \n         editUserVirtualSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editUserVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         editUserVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        editUserVirtualSchemaWin.setPageMapName(\"modal-6\");\n         editUserVirtualSchemaWin.setCookieName(\"modal-7\");\n \n         createRoleSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createRoleSchemaWin.setInitialWidth(WIN_WIDTH);\n-        createRoleSchemaWin.setPageMapName(\"modal-7\");\n         createRoleSchemaWin.setCookieName(\"modal-7\");\n \n         editRoleSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editRoleSchemaWin.setInitialWidth(WIN_WIDTH);\n-        editRoleSchemaWin.setPageMapName(\"modal-8\");\n         editRoleSchemaWin.setCookieName(\"modal-8\");\n \n         createRoleDerivedSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createRoleDerivedSchemaWin.setInitialWidth(WIN_WIDTH);\n         createRoleDerivedSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createRoleDerivedSchemaWin.setPageMapName(\"modal-9\");\n         createRoleDerivedSchemaWin.setCookieName(\"modal-9\");\n \n         editRoleDerivedSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editRoleDerivedSchemaWin.setInitialWidth(WIN_WIDTH);\n         editRoleDerivedSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        editRoleDerivedSchemaWin.setPageMapName(\"modal-10\");\n         editRoleDerivedSchemaWin.setCookieName(\"modal-10\");\n \n         createRoleVirtualSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createRoleVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         createRoleVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createRoleVirtualSchemaWin.setPageMapName(\"modal-11\");\n         createRoleVirtualSchemaWin.setCookieName(\"modal-11\");\n \n         editRoleVirtualSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editRoleVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         editRoleVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        editRoleVirtualSchemaWin.setPageMapName(\"modal-12\");\n         editRoleVirtualSchemaWin.setCookieName(\"modal-12\");\n \n         createMembershipSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createMembershipSchemaWin.setInitialWidth(WIN_WIDTH);\n-        createMembershipSchemaWin.setPageMapName(\"modal-13\");\n         createMembershipSchemaWin.setCookieName(\"modal-13\");\n \n         editMembershipSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editMembershipSchemaWin.setInitialWidth(WIN_WIDTH);\n-        editMembershipSchemaWin.setPageMapName(\"modal-14\");\n         editMembershipSchemaWin.setCookieName(\"modal-14\");\n \n         createMembershipDerivedSchemaWin.setCssClassName(\n                 ModalWindow.CSS_CLASS_GRAY);\n         createMembershipDerivedSchemaWin.setInitialWidth(WIN_WIDTH);\n         createMembershipDerivedSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createMembershipDerivedSchemaWin.setPageMapName(\"modal-15\");\n         createMembershipDerivedSchemaWin.setCookieName(\"modal-15\");\n \n         editMembershipSchemaWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editMembershipSchemaWin.setInitialWidth(WIN_WIDTH);\n-        editMembershipSchemaWin.setPageMapName(\"modal-16\");\n         editMembershipSchemaWin.setCookieName(\"modal-16\");\n \n         createMembershipVirtualSchemaWin.setCssClassName(\n                 ModalWindow.CSS_CLASS_GRAY);\n         createMembershipVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         createMembershipVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        createMembershipVirtualSchemaWin.setPageMapName(\"modal-17\");\n         createMembershipVirtualSchemaWin.setCookieName(\"modal-17\");\n \n         editMembershipVirtualSchemaWin.setCssClassName(\n                 ModalWindow.CSS_CLASS_GRAY);\n         editMembershipVirtualSchemaWin.setInitialWidth(WIN_WIDTH);\n         editMembershipVirtualSchemaWin.setInitialHeight(WIN_HEIGHT);\n-        editMembershipVirtualSchemaWin.setPageMapName(\"modal-18\");\n         editMembershipVirtualSchemaWin.setCookieName(\"modal-18\");\n \n         setWindowClosedCallback(createUserSchemaWin, userSchemasContainer);\n@@ -765,10 +751,10 @@ private void setWindowClosedCallback(final ModalWindow window,\n \n             @Override\n             public void onClose(final AjaxRequestTarget target) {\n-                target.addComponent(container);\n+                target.add(container);\n                 if (operationResult) {\n                     info(getString(\"operation_succeded\"));\n-                    target.addComponent(feedbackPanel);\n+                    target.add(feedbackPanel);\n                     operationResult = false;\n                 }\n             }\n@@ -792,7 +778,7 @@ public SchemaProvider(final SchemaType schemaType) {\n             this.schemaType = schemaType;\n \n             //Default sorting\n-            setSort(\"name\", true);\n+            setSort(\"name\", SortOrder.ASCENDING);\n \n             comparator = new SortableDataProviderComparator<SchemaTO>(this);\n         }\n@@ -853,7 +839,7 @@ public DerivedSchemaProvider(final SchemaDerivedType schema) {\n             this.schema = schema;\n \n             //Default sorting\n-            setSort(\"name\", true);\n+            setSort(\"name\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<DerivedSchemaTO>(this);\n         }\n@@ -907,7 +893,7 @@ public VirtualSchemaProvider(final SchemaVirtualType schema) {\n             this.schema = schema;\n \n             //Default sorting\n-            setSort(\"name\", true);\n+            setSort(\"name\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<VirtualSchemaTO>(this);\n         }\n@@ -995,10 +981,12 @@ public void onClick(final AjaxRequestTarget target) {\n                                     @Override\n                                     public Page createPage() {\n                                         AbstractSchemaModalPage page =\n-                                                SchemaModalPageFactory.getSchemaModalPage(entity, schemaType);\n+                                                SchemaModalPageFactory.\n+                                                getSchemaModalPage(entity,\n+                                                schemaType);\n \n                                         page.setSchemaModalPage(\n-                                                Schema.this,\n+                                                Schema.this.getPageReference(),\n                                                 modalWindow,\n                                                 schemaTO,\n                                                 false);\n@@ -1063,9 +1051,9 @@ public void onClick(final AjaxRequestTarget target) {\n                         }\n \n                         info(getString(\"operation_succeded\"));\n-                        target.addComponent(feedbackPanel);\n+                        target.add(feedbackPanel);\n \n-                        target.addComponent(webContainer);\n+                        target.add(webContainer);\n                     }\n                 };\n \n@@ -1104,14 +1092,14 @@ private Form getPaginatorForm(\n \n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(),\n+                        getResponse(),\n                         rowsPerPagePrefName,\n                         String.valueOf(rowChooser.getInput()));\n-                dataTable.setRowsPerPage(\n+                dataTable.setItemsPerPage(\n                         Integer.parseInt(rowChooser.getInput()));\n \n-                target.addComponent(webContainer);\n+                target.add(webContainer);\n             }\n         });\n \n@@ -1147,7 +1135,7 @@ public Page createPage() {\n                                 entity, schemaType);\n \n                         page.setSchemaModalPage(\n-                                Schema.this,\n+                                Schema.this.getPageReference(),\n                                 new ModalWindow(winName),\n                                 null,\n                                 true);"},{"sha":"4c6f5a12810b18074c3130cb7ccd5bf952d70d76","filename":"console/src/main/java/org/syncope/console/pages/SchemaModalPage.java","status":"modified","additions":12,"deletions":10,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FSchemaModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -21,6 +21,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n@@ -31,7 +32,7 @@\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.util.string.Strings;\n import org.syncope.client.to.SchemaTO;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.model.ResourceModel;\n import org.syncope.client.AbstractBaseBean;\n@@ -53,7 +54,7 @@ public SchemaModalPage(String kind) {\n \n     @Override\n     public void setSchemaModalPage(\n-            final BasePage basePage,\n+            final PageReference callerPageRef,\n             final ModalWindow window,\n             AbstractBaseBean schemaTO,\n             final boolean createFlag) {\n@@ -92,7 +93,7 @@ public void setSchemaModalPage(\n                 new AjaxDropDownChoicePanel<SchemaType>(\n                 \"type\", getString(\"type\"),\n                 new PropertyModel(schema, \"type\"), false);\n-        type.setChoices(Arrays.asList(SchemaType.Enum.values()));\n+        type.setChoices(Arrays.asList(SchemaType.values()));\n         type.addRequiredLabel();\n \n         final AjaxTextFieldPanel enumerationValues = new AjaxTextFieldPanel(\n@@ -126,7 +127,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                     enumerationValues.setModelObject(null);\n                 }\n \n-                target.addComponent(schemaForm);\n+                target.add(schemaForm);\n             }\n         });\n \n@@ -185,7 +186,8 @@ protected void onUpdate(AjaxRequestTarget art) {\n             private static final long serialVersionUID = -958724007591692537L;\n \n             @Override\n-            protected void onSubmit(AjaxRequestTarget target, Form form) {\n+            protected void onSubmit(final AjaxRequestTarget target,\n+                    final Form form) {\n \n                 SchemaTO schemaTO = (SchemaTO) form.getDefaultModelObject();\n \n@@ -194,23 +196,23 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                     return;\n                 }\n \n-                LOG.error(\"aaaaaaaaaaa {}\", schemaTO);\n-\n                 if (createFlag) {\n                     restClient.createSchema(kind, schemaTO);\n                 } else {\n                     restClient.updateSchema(kind, schemaTO);\n                 }\n \n-                Schema callerPage = (Schema) basePage;\n+                Schema callerPage = (Schema) callerPageRef.getPage();\n                 callerPage.setOperationResult(true);\n \n                 window.close(target);\n             }\n \n             @Override\n-            protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(feedbackPanel);\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form form) {\n+\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"40e77c4c08fd0c3eba112cc7fc1b6d0d15e3f518","filename":"console/src/main/java/org/syncope/console/pages/TaskModalPage.java","status":"modified","additions":8,"deletions":10,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -22,10 +22,11 @@\n import java.util.List;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -106,15 +107,13 @@ public TaskModalPage(final TaskTO taskTO) {\n         form.add(executions);\n \n         final Label idLabel = new Label(\"idLabel\", new ResourceModel(\"id\"));\n-//        idLabel.setVisible(actual.getId() != 0);\n         profile.add(idLabel);\n \n         final AjaxTextFieldPanel id = new AjaxTextFieldPanel(\n                 \"id\", getString(\"id\"),\n                 new PropertyModel<String>(taskTO, \"id\"), false);\n \n         id.setEnabled(false);\n-//        id.setVisible(actual.getId() != 0);\n         profile.add(id);\n \n         final List<IColumn> columns = new ArrayList<IColumn>();\n@@ -150,10 +149,9 @@ public void onClick(final AjaxRequestTarget target) {\n                         dialogContent.setDefaultModelObject(\n                                 model.getObject().getMessage());\n \n-                        target.addComponent(dialogContent);\n-\n-                        target.appendJavascript(\"jQuery('#dialog')\"\n-                                + \".dialog('open')\");\n+                        target.add(dialogContent);\n+                        target.appendJavaScript(\n+                                \"jQuery('#dialog').dialog('open')\");\n                     }\n                 };\n \n@@ -203,8 +201,8 @@ public void onClick(final AjaxRequestTarget target) {\n                             error(scce.getMessage());\n                         }\n \n-                        target.addComponent(feedbackPanel);\n-                        target.addComponent(executions);\n+                        target.add(feedbackPanel);\n+                        target.add(executions);\n                     }\n                 };\n \n@@ -237,7 +235,7 @@ public void onClick(final AjaxRequestTarget target) {\n         public TaskExecutionsProvider(TaskTO taskTO) {\n             //Default sorting\n             this.taskTO = taskTO;\n-            setSort(\"startDate\", true);\n+            setSort(\"startDate\", SortOrder.ASCENDING);\n             comparator =\n                     new SortableDataProviderComparator<TaskExecTO>(this);\n         }"},{"sha":"0837b12f1e92d07d671adc2203e15ca5a2c03dfb","filename":"console/src/main/java/org/syncope/console/pages/Tasks.java","status":"modified","additions":11,"deletions":10,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FTasks.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,33 +14,34 @@\n  */\n package org.syncope.console.pages;\n \n-import org.syncope.console.pages.panels.PropagationTasks;\n-import org.syncope.console.pages.panels.SyncTasks;\n-import org.syncope.console.pages.panels.GenericTasks;\n import java.text.SimpleDateFormat;\n import java.util.ArrayList;\n import java.util.Collections;\n import java.util.Comparator;\n import java.util.Date;\n import java.util.Iterator;\n import java.util.List;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n import org.apache.wicket.extensions.markup.html.repeater.util.SortableDataProvider;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.repeater.Item;\n import org.apache.wicket.model.AbstractReadOnlyModel;\n import org.apache.wicket.model.CompoundPropertyModel;\n import org.apache.wicket.model.IModel;\n-import org.apache.wicket.util.convert.converters.DateConverter;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n+import org.apache.wicket.util.convert.converter.DateConverter;\n import org.syncope.client.to.SchedTaskTO;\n import org.syncope.client.to.TaskExecTO;\n import org.syncope.client.to.TaskTO;\n import org.syncope.console.SyncopeSession;\n import org.syncope.console.commons.Constants;\n-import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.commons.SelectOption;\n+import org.syncope.console.commons.SortableDataProviderComparator;\n+import org.syncope.console.pages.panels.GenericTasks;\n+import org.syncope.console.pages.panels.PropagationTasks;\n+import org.syncope.console.pages.panels.SyncTasks;\n import org.syncope.console.rest.TaskRestClient;\n \n public class Tasks extends BasePage {\n@@ -82,7 +83,7 @@ public TaskExecutionsProvider(final TaskTO taskTO) {\n \n             //Default sorting\n             this.taskTO = taskTO;\n-            setSort(\"startDate\", true);\n+            setSort(\"startDate\", SortOrder.ASCENDING);\n             comparator = new SortableDataProviderComparator<TaskExecTO>(this);\n         }\n \n@@ -185,7 +186,7 @@ public TasksProvider(\n             super();\n \n             //Default sorting\n-            setSort(\"id\", true);\n+            setSort(\"id\", SortOrder.ASCENDING);\n             comparator = new SortableDataProviderComparator<T>(this);\n             this.paginatorRows = paginatorRows;\n             this.restClient = restClient;\n@@ -234,8 +235,8 @@ public int size() {\n         }\n \n         @Override\n-        public IModel<SchedTaskTO> model(final SchedTaskTO object) {\n-            return new CompoundPropertyModel<SchedTaskTO>(object);\n+        public IModel<T> model(final T object) {\n+            return new CompoundPropertyModel<T>(object);\n         }\n     }\n }"},{"sha":"71f7d11a9ad2ae951fe975aac4313dec13963177","filename":"console/src/main/java/org/syncope/console/pages/UserModalPage.java","status":"modified","additions":16,"deletions":16,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -17,19 +17,19 @@\n package org.syncope.console.pages;\n \n import java.util.ArrayList;\n-import org.syncope.console.pages.panels.AttributesPanel;\n import java.util.HashSet;\n import java.util.List;\n import java.util.Set;\n import org.apache.wicket.Component;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n-import org.apache.wicket.behavior.AbstractBehavior;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.behavior.Behavior;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.ComponentTag;\n-import org.apache.wicket.markup.html.WebMarkupContainerWithAssociatedMarkup;\n+import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.PasswordTextField;\n@@ -44,11 +44,12 @@\n import org.syncope.client.to.UserTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.commons.Constants;\n-import org.syncope.console.rest.UserRestClient;\n+import org.syncope.console.pages.panels.AttributesPanel;\n import org.syncope.console.pages.panels.DerivedAttributesPanel;\n import org.syncope.console.pages.panels.ResourcesPanel;\n import org.syncope.console.pages.panels.RolesPanel;\n import org.syncope.console.pages.panels.VirtualAttributesPanel;\n+import org.syncope.console.rest.UserRestClient;\n \n /**\n  * Modal window with User form.\n@@ -64,10 +65,8 @@ public class UserModalPage extends BaseModalPage {\n \n     private UserMod userMod;\n \n-    public UserModalPage(\n-            final Users basePage,\n-            final ModalWindow window,\n-            final UserTO userTO) {\n+    public UserModalPage(final PageReference callerPageRef,\n+            final ModalWindow window, final UserTO userTO) {\n \n         super();\n \n@@ -91,9 +90,9 @@ public UserModalPage(\n         password.setResetPassword(true);\n         form.add(password);\n \n-        final WebMarkupContainerWithAssociatedMarkup mandatoryPassword =\n-                new WebMarkupContainerWithAssociatedMarkup(\"mandatory_pwd\");\n-        mandatoryPassword.add(new AbstractBehavior() {\n+        final WebMarkupContainer mandatoryPassword =\n+                new WebMarkupContainer(\"mandatory_pwd\");\n+        mandatoryPassword.add(new Behavior() {\n \n             private static final long serialVersionUID = 1469628524240283489L;\n \n@@ -158,8 +157,8 @@ protected void onSubmit(final AjaxRequestTarget target,\n                         }\n                     }\n \n-                    basePage.setModalResult(true);\n-                    basePage.getPageParameters().put(\n+                    ((Users) callerPageRef.getPage()).setModalResult(true);\n+                    ((Users) callerPageRef.getPage()).getPageParameters().set(\n                             Constants.PAGEPARAM_CREATE, userTO.getId() == 0);\n                     window.close(target);\n                 } catch (SyncopeClientCompositeErrorException e) {\n@@ -170,7 +169,7 @@ protected void onSubmit(final AjaxRequestTarget target,\n \n             @Override\n             protected void onError(AjaxRequestTarget target, Form form) {\n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n \n@@ -346,7 +345,8 @@ private void searchAndUpdateAttribute(AttributeTO attributeTO) {\n         for (AttributeTO oldAttribute : oldUser.getAttributes()) {\n             if (attributeTO.getSchema().equals(oldAttribute.getSchema())) {\n \n-                if (!attributeTO.equals(oldAttribute) && !oldAttribute.isReadonly()) {\n+                if (!attributeTO.equals(oldAttribute) && !oldAttribute.\n+                        isReadonly()) {\n \n                     if (attributeTO.getValues().size() > 1) {\n                         attributeMod.setValuesToBeAdded("},{"sha":"6ce29f27551353c1c09e2de1d347ed39c13db6cf","filename":"console/src/main/java/org/syncope/console/pages/Users.java","status":"modified","additions":62,"deletions":47,"changes":109,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -20,18 +20,18 @@\n import java.util.Iterator;\n import java.util.List;\n import org.apache.wicket.Page;\n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.Session;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -55,6 +55,7 @@\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.search.AttributeCond;\n import org.syncope.client.search.MembershipCond;\n@@ -111,11 +112,11 @@ public class Users extends BasePage {\n     private PreferenceManager prefMan;\n \n     final private int paginatorRows = prefMan.getPaginatorRows(\n-            getWebRequestCycle().getWebRequest(),\n+            getRequest(),\n             Constants.PREF_USERS_PAGINATOR_ROWS);\n \n     final private int searchPaginatorRows = prefMan.getPaginatorRows(\n-            getWebRequestCycle().getWebRequest(),\n+            getRequest(),\n             Constants.PREF_USERS_SEARCH_PAGINATOR_ROWS);\n \n     protected boolean modalResult = false;\n@@ -249,7 +250,6 @@ public Users(final PageParameters parameters) {\n         editModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         editModalWin.setInitialHeight(EDIT_MODAL_WIN_HEIGHT);\n         editModalWin.setInitialWidth(EDIT_MODAL_WIN_WIDTH);\n-        editModalWin.setPageMapName(\"user-edit-modal\");\n         editModalWin.setCookieName(\"user-edit-modal\");\n         add(editModalWin);\n \n@@ -259,7 +259,6 @@ public Users(final PageParameters parameters) {\n         displayAttrsModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         displayAttrsModalWin.setInitialHeight(DISPLAYATTRS_MODAL_WIN_HEIGHT);\n         displayAttrsModalWin.setInitialWidth(DISPLAYATTRS_MODAL_WIN_WIDTH);\n-        displayAttrsModalWin.setPageMapName(\"user-displayAttrs-modal\");\n         displayAttrsModalWin.setCookieName(\"user-displayAttrs-modal\");\n         add(displayAttrsModalWin);\n \n@@ -269,7 +268,6 @@ public Users(final PageParameters parameters) {\n         searchEditModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         searchEditModalWin.setInitialHeight(EDIT_MODAL_WIN_HEIGHT);\n         searchEditModalWin.setInitialWidth(EDIT_MODAL_WIN_WIDTH);\n-        searchEditModalWin.setPageMapName(\"user-search-edit-modal\");\n         searchEditModalWin.setCookieName(\"user-search-edit-modal\");\n         add(searchEditModalWin);\n \n@@ -287,12 +285,12 @@ public Users(final PageParameters parameters) {\n                 new AjaxFallbackDefaultDataTable<UserTO>(\"listTable\",\n                 getColumns(editModalWin), new UserDataProvider(),\n                 paginatorRows);\n-        if (parameters.getAsBoolean(Constants.PAGEPARAM_CREATE, false)) {\n+        if (parameters.get(Constants.PAGEPARAM_CREATE).toBoolean(false)) {\n             listTable.setCurrentPage(listTable.getPageCount() - 1);\n             parameters.remove(Constants.PAGEPARAM_CREATE);\n         } else {\n-            listTable.setCurrentPage(parameters.getAsInteger(\n-                    listTable.getId() + Constants.PAGEPARAM_CURRENT_PAGE, 0));\n+            listTable.setCurrentPage(parameters.get(listTable.getId()\n+                    + Constants.PAGEPARAM_CURRENT_PAGE).toInt(0));\n         }\n         listContainer.add(listTable);\n         setWindowClosedReloadCallback(editModalWin, listTable);\n@@ -313,7 +311,8 @@ public void onClick(final AjaxRequestTarget target) {\n                     @Override\n                     public Page createPage() {\n                         return new UserModalPage(\n-                                Users.this, editModalWin, new UserTO());\n+                                Users.this.getPageReference(),\n+                                editModalWin, new UserTO());\n                     }\n                 });\n \n@@ -341,7 +340,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             @Override\n                             public Page createPage() {\n                                 return new DisplayAttributesModalPage(\n-                                        Users.this,\n+                                        Users.this.getPageReference(),\n                                         choosableSchemaNames,\n                                         displayAttrsModalWin);\n                             }\n@@ -368,15 +367,15 @@ public Page createPage() {\n \n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(),\n+                        getResponse(),\n                         Constants.PREF_USERS_PAGINATOR_ROWS,\n                         String.valueOf(rowsChooser.getInput()));\n \n-                listTable.setRowsPerPage(\n+                listTable.setItemsPerPage(\n                         Integer.parseInt(rowsChooser.getInput()));\n \n-                target.addComponent(listContainer);\n+                target.add(listContainer);\n             }\n         });\n         paginatorForm.add(rowsChooser);\n@@ -428,13 +427,18 @@ public boolean accept(final FeedbackMessage message) {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n+                    final Form<?> form) {\n \n                 SearchConditionWrapper conditionWrapper =\n                         new SearchConditionWrapper();\n                 conditionWrapper.setOperationType(OperationType.AND);\n                 searchConditionList.add(conditionWrapper);\n-                target.addComponent(searchFormContainer);\n+                target.add(searchFormContainer);\n+            }\n+\n+            @Override\n+            protected void onError(AjaxRequestTarget target, Form<?> form) {\n+                target.add(searchFormContainer);\n             }\n         };\n         addAndButton.setDefaultFormProcessing(false);\n@@ -447,13 +451,18 @@ protected void onSubmit(final AjaxRequestTarget target,\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n+                    final Form<?> form) {\n \n                 SearchConditionWrapper conditionWrapper =\n                         new SearchConditionWrapper();\n                 conditionWrapper.setOperationType(OperationType.OR);\n                 searchConditionList.add(conditionWrapper);\n-                target.addComponent(searchFormContainer);\n+                target.add(searchFormContainer);\n+            }\n+\n+            @Override\n+            protected void onError(AjaxRequestTarget target, Form<?> form) {\n+                target.add(searchFormContainer);\n             }\n         };\n         addOrButton.setDefaultFormProcessing(false);\n@@ -470,9 +479,9 @@ protected void onSubmit(final AjaxRequestTarget target,\n \n         searchResultTable.setOutputMarkupId(true);\n \n-        searchResultTable.setCurrentPage(parameters.getAsInteger(\n+        searchResultTable.setCurrentPage(parameters.get(\n                 searchResultTable.getId()\n-                + Constants.PAGEPARAM_CURRENT_PAGE, 0));\n+                + Constants.PAGEPARAM_CURRENT_PAGE).toInt(0));\n \n         searchResultContainer.add(searchResultTable);\n \n@@ -490,14 +499,14 @@ public void onClose(final AjaxRequestTarget target) {\n                         if (modalResult) {\n                             info(getString(\"operation_succeded\"));\n \n-                            getPage().getPageParameters().put(\n+                            getPage().getPageParameters().set(\n                                     searchResultTable.getId()\n                                     + Constants.PAGEPARAM_CURRENT_PAGE,\n                                     searchResultTable.getCurrentPage());\n                             setResponsePage(Users.class,\n                                     getPage().getPageParameters());\n \n-                            target.addComponent(feedbackPanel);\n+                            target.add(feedbackPanel);\n \n                             modalResult = false;\n                         }\n@@ -517,14 +526,14 @@ protected void onSubmit(final AjaxRequestTarget target,\n                         searchResultTable);\n \n                 Session.get().getFeedbackMessages().clear();\n-                target.addComponent(searchFeedback);\n+                target.add(searchFeedback);\n             }\n \n             @Override\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(searchFeedback);\n+                target.add(searchFeedback);\n             }\n         });\n \n@@ -541,14 +550,14 @@ protected void onError(final AjaxRequestTarget target,\n \n             @Override\n             protected void onUpdate(final AjaxRequestTarget target) {\n-                prefMan.set(getWebRequestCycle().getWebRequest(),\n-                        getWebRequestCycle().getWebResponse(),\n+                prefMan.set(getRequest(),\n+                        getResponse(),\n                         Constants.PREF_USERS_SEARCH_PAGINATOR_ROWS,\n                         String.valueOf(searchPaginatorRows));\n \n-                searchResultTable.setRowsPerPage(searchPaginatorRows);\n+                searchResultTable.setItemsPerPage(searchPaginatorRows);\n \n-                target.addComponent(searchResultContainer);\n+                target.add(searchResultContainer);\n             }\n         });\n         searchPaginatorForm.add(searchRowsChooser);\n@@ -566,13 +575,13 @@ public void onClose(final AjaxRequestTarget target) {\n                 if (modalResult) {\n                     getSession().info(getString(\"operation_succeded\"));\n \n-                    getPage().getPageParameters().put(table.getId()\n+                    getPage().getPageParameters().set(table.getId()\n                             + Constants.PAGEPARAM_CURRENT_PAGE,\n                             table.getCurrentPage());\n                     setResponsePage(Users.class,\n                             getPage().getPageParameters());\n \n-                    target.addComponent(feedbackPanel);\n+                    target.add(feedbackPanel);\n \n                     modalResult = false;\n                 }\n@@ -587,8 +596,8 @@ private List<IColumn<UserTO>> getColumns(final ModalWindow editModalWin) {\n                 new ResourceModel(\"status\"), \"status\", \"status\"));\n         columns.add(new TokenColumn(new ResourceModel(\"token\"), \"token\"));\n \n-        for (String schemaName : prefMan.getList(getWebRequestCycle().\n-                getWebRequest(), Constants.PREF_USERS_ATTRIBUTES_VIEW)) {\n+        for (String schemaName : prefMan.getList(getRequest(),\n+                Constants.PREF_USERS_ATTRIBUTES_VIEW)) {\n \n             columns.add(new UserAttrColumn(\n                     new Model<String>(schemaName), schemaName));\n@@ -624,7 +633,8 @@ public void onClick(final AjaxRequestTarget target) {\n                                     @Override\n                                     public Page createPage() {\n                                         return new UserModalPage(\n-                                                Users.this, editModalWin,\n+                                                Users.this.getPageReference(),\n+                                                editModalWin,\n                                                 model.getObject());\n                                     }\n                                 });\n@@ -662,9 +672,9 @@ public void onClick(final AjaxRequestTarget target) {\n                         } catch (SyncopeClientCompositeErrorException scce) {\n                             error(scce.getMessage());\n                         }\n-                        target.addComponent(feedbackPanel);\n-                        target.addComponent(listContainer);\n-                        target.addComponent(searchResultContainer);\n+                        target.add(feedbackPanel);\n+                        target.add(listContainer);\n+                        target.add(searchResultContainer);\n                     }\n                 });\n                 cellItem.add(panel);\n@@ -688,7 +698,7 @@ private void doSearch(final AjaxRequestTarget target,\n         }\n         searchDataProvider.setSearchCond(searchCond);\n \n-        target.addComponent(searchResultTable);\n+        target.add(searchResultTable);\n     }\n \n     public void setModalResult(final boolean modalResult) {\n@@ -788,7 +798,7 @@ private class UserDataProvider extends SortableDataProvider<UserTO> {\n         public UserDataProvider() {\n             super();\n             //Default sorting\n-            setSort(\"id\", true);\n+            setSort(\"id\", SortOrder.ASCENDING);\n             comparator = new SortableUserProviderComparator(this);\n         }\n \n@@ -822,7 +832,7 @@ private class UserSearchDataProvider extends SortableDataProvider<UserTO> {\n         public UserSearchDataProvider() {\n             super();\n             //Default sorting\n-            setSort(\"id\", true);\n+            setSort(\"id\", SortOrder.ASCENDING);\n             comparator = new SortableUserProviderComparator(this);\n         }\n \n@@ -1092,8 +1102,8 @@ protected void onUpdate(\n                                     searchCondition.getFilterType()\n                                     == FilterType.ATTRIBUTE\n                                     ? schemaNames : roleNames);\n-                            target.addComponent(filterNameChooser);\n-                            target.addComponent(searchFormContainer);\n+                            target.add(filterNameChooser);\n+                            target.add(searchFormContainer);\n                         }\n                     });\n \n@@ -1108,13 +1118,18 @@ protected void onUpdate(\n                         -4804368561204623354L;\n \n                 @Override\n-                protected void onSubmit(\n-                        final AjaxRequestTarget target,\n-                        final Form form) {\n+                protected void onSubmit(final AjaxRequestTarget target,\n+                        final Form<?> form) {\n \n                     getList().remove(\n                             Integer.valueOf(getParent().getId()).intValue());\n-                    target.addComponent(searchFormContainer);\n+                    target.add(searchFormContainer);\n+                }\n+\n+                @Override\n+                protected void onError(AjaxRequestTarget target,\n+                        final Form<?> form) {\n+                    target.add(searchFormContainer);\n                 }\n             };\n "},{"sha":"c182fab4876d4da8c841628421a3175f3acc63ab","filename":"console/src/main/java/org/syncope/console/pages/VirtualSchemaModalPage.java","status":"modified","additions":5,"deletions":4,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FVirtualSchemaModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FVirtualSchemaModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FVirtualSchemaModalPage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,11 +16,12 @@\n  */\n package org.syncope.console.pages;\n \n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.model.CompoundPropertyModel;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n@@ -41,7 +42,7 @@ public VirtualSchemaModalPage(String kind) {\n \n     @Override\n     public void setSchemaModalPage(\n-            final BasePage basePage,\n+            final PageReference callerPageRef,\n             final ModalWindow window,\n             AbstractBaseBean schema,\n             final boolean createFlag) {\n@@ -77,7 +78,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n                             (VirtualSchemaTO) form.getDefaultModelObject());\n                 }\n \n-                Schema callerPage = (Schema) basePage;\n+                Schema callerPage = (Schema) callerPageRef.getPage();\n                 callerPage.setOperationResult(true);\n \n                 window.close(target);\n@@ -87,7 +88,7 @@ protected void onSubmit(AjaxRequestTarget target, Form form) {\n             protected void onError(final AjaxRequestTarget target,\n                     final Form form) {\n \n-                target.addComponent(feedbackPanel);\n+                target.add(feedbackPanel);\n             }\n         };\n "},{"sha":"bedf598c4e0ae22d0244a348bf4f05d02bdac88e","filename":"console/src/main/java/org/syncope/console/pages/WelcomePage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FWelcomePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FWelcomePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FWelcomePage.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -14,8 +14,8 @@\n  */\n package org.syncope.console.pages;\n \n-import org.apache.wicket.PageParameters;\n import org.apache.wicket.markup.html.WebPage;\n+import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.console.SyncopeApplication;\n import org.syncope.console.commons.XMLRolesReader;"},{"sha":"dc06484614bce835ae2e42b2fd78d2edfd553135","filename":"console/src/main/java/org/syncope/console/pages/panels/DerivedAttributesPanel.java","status":"modified","additions":22,"deletions":11,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FDerivedAttributesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FDerivedAttributesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FDerivedAttributesPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -96,10 +96,17 @@ protected List<String> load() {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n+                    final Form<?> form) {\n \n                 entityTO.getDerivedAttributes().add(new AttributeTO());\n-                target.addComponent(attributesContainer);\n+                target.add(attributesContainer);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form<?> form) {\n+\n+                target.add(attributesContainer);\n             }\n         };\n \n@@ -126,7 +133,7 @@ protected void populateItem(final ListItem<AttributeTO> item) {\n                     @Override\n                     protected void onUpdate(final AjaxRequestTarget target) {\n                         entityTO.getDerivedAttributes().remove(attributeTO);\n-                        target.addComponent(attributesContainer);\n+                        target.add(attributesContainer);\n                     }\n \n                     @Override\n@@ -156,16 +163,20 @@ public CharSequence preDecorateScript(\n                         new PropertyModel<String>(attributeTO, \"schema\"),\n                         derivedSchemaNames);\n \n-                schemaChoice.add(new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n+                schemaChoice.add(\n+                        new AjaxFormComponentUpdatingBehavior(\"onblur\") {\n \n-                    private static final long serialVersionUID =\n-                            -1107858522700306810L;\n+                            private static final long serialVersionUID =\n+                                    -1107858522700306810L;\n \n-                    @Override\n-                    protected void onUpdate(AjaxRequestTarget art) {\n-                        attributeTO.setSchema(schemaChoice.getModelObject());\n-                    }\n-                });\n+                            @Override\n+                            protected void onUpdate(\n+                                    final AjaxRequestTarget art) {\n+\n+                                attributeTO.setSchema(schemaChoice.\n+                                        getModelObject());\n+                            }\n+                        });\n \n                 item.add(schemaChoice.setRequired(true));\n "},{"sha":"a61a0653e16d25736cb2d913d2b75397784a54be","filename":"console/src/main/java/org/syncope/console/pages/panels/GenericTasks.java","status":"modified","additions":15,"deletions":17,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FGenericTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FGenericTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FGenericTasks.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -16,11 +16,12 @@\n \n import java.util.ArrayList;\n import java.util.List;\n+\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n@@ -37,7 +38,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.http.WebResponse;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -46,7 +47,6 @@\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.XMLRolesReader;\n-import org.syncope.console.pages.BasePage;\n import org.syncope.console.pages.GTaskModalPage;\n import org.syncope.console.pages.Tasks.DatePropertyColumn;\n import org.syncope.console.pages.Tasks.TasksProvider;\n@@ -144,8 +144,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new GTaskModalPage(\n-                                        (BasePage) getPage(), window, taskTO);\n+                                return new GTaskModalPage(window, taskTO);\n                             }\n                         });\n \n@@ -190,8 +189,8 @@ public void onClick(final AjaxRequestTarget target) {\n                             error(scce.getMessage());\n                         }\n \n-                        target.addComponent(getPage().get(\"feedback\"));\n-                        target.addComponent(container);\n+                        target.add(getPage().get(\"feedback\"));\n+                        target.add(container);\n                     }\n                 };\n \n@@ -234,8 +233,8 @@ public void onClick(final AjaxRequestTarget target) {\n                         } catch (SyncopeClientCompositeErrorException scce) {\n                             error(scce.getMessage());\n                         }\n-                        target.addComponent(container);\n-                        target.addComponent(getPage().get(\"feedback\"));\n+                        target.add(container);\n+                        target.add(getPage().get(\"feedback\"));\n                     }\n                 };\n \n@@ -264,14 +263,15 @@ restClient, paginatorRows, getId(), SchedTaskTO.class),\n         window.setWindowClosedCallback(\n                 new ModalWindow.WindowClosedCallback() {\n \n-                    private static final long serialVersionUID = 8804221891699487139L;\n+                    private static final long serialVersionUID =\n+                            8804221891699487139L;\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(getPage().get(\"feedback\"));\n+                            target.add(getPage().get(\"feedback\"));\n                             operationResult = false;\n                         }\n                     }\n@@ -280,7 +280,6 @@ public void onClose(final AjaxRequestTarget target) {\n         window.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         window.setInitialHeight(WIN_HEIGHT);\n         window.setInitialWidth(WIN_WIDTH);\n-        window.setPageMapName(\"view-task-win\");\n         window.setCookieName(\"view-task-win\");\n \n         Form paginatorForm = new Form(\"PaginatorForm\");\n@@ -299,9 +298,9 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         Constants.PREF_TASKS_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n \n-                table.setRowsPerPage(paginatorRows);\n+                table.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(container);\n+                target.add(container);\n             }\n         });\n \n@@ -322,8 +321,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new GTaskModalPage((BasePage) getPage(), window,\n-                                new SchedTaskTO());\n+                        return new GTaskModalPage(window, new SchedTaskTO());\n                     }\n                 });\n "},{"sha":"8617ee2b59111eb92620f2dc0f1a094efd0be308","filename":"console/src/main/java/org/syncope/console/pages/panels/PasswordPoliciesPanel.java","status":"modified","additions":15,"deletions":18,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPasswordPoliciesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPasswordPoliciesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPasswordPoliciesPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -18,15 +18,17 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -40,7 +42,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.http.WebResponse;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -49,12 +51,12 @@\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.SortableDataProviderComparator;\n+import org.syncope.console.commons.XMLRolesReader;\n+import org.syncope.console.pages.PasswordPolicyModalPage;\n import org.syncope.console.rest.PolicyRestClient;\n import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n import org.syncope.console.wicket.markup.html.form.DeleteLinkPanel;\n import org.syncope.console.wicket.markup.html.form.EditLinkPanel;\n-import org.syncope.console.commons.XMLRolesReader;\n-import org.syncope.console.pages.PasswordPolicyModalPage;\n \n public class PasswordPoliciesPanel extends Panel {\n \n@@ -93,7 +95,6 @@ public PasswordPoliciesPanel(final String id) {\n         mwindow.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         mwindow.setInitialHeight(MODAL_WIN_HEIGHT);\n         mwindow.setInitialWidth(MODAL_WIN_WIDTH);\n-        mwindow.setPageMapName(\"policy-modal\");\n         mwindow.setCookieName(\"policy-modal\");\n         add(mwindow);\n \n@@ -145,9 +146,7 @@ public void onClick(AjaxRequestTarget target) {\n                             public Page createPage() {\n                                 final PasswordPolicyModalPage page =\n                                         new PasswordPolicyModalPage(\n-                                        PasswordPoliciesPanel.this,\n-                                        mwindow,\n-                                        passwordPolicyTO);\n+                                        mwindow, passwordPolicyTO);\n                                 return page;\n                             }\n                         });\n@@ -203,8 +202,8 @@ public void onClick(final AjaxRequestTarget target) {\n                                     e);\n                         }\n \n-                        target.addComponent(container);\n-                        target.addComponent(getPage().get(\"feedback\"));\n+                        target.add(container);\n+                        target.add(getPage().get(\"feedback\"));\n                     }\n                 };\n \n@@ -233,7 +232,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             -7978723352517770644L;\n \n                     @Override\n-                    public void onClick(AjaxRequestTarget target) {\n+                    public void onClick(final AjaxRequestTarget target) {\n \n                         mwindow.setPageCreator(new ModalWindow.PageCreator() {\n \n@@ -244,9 +243,7 @@ public void onClick(AjaxRequestTarget target) {\n                             public Page createPage() {\n                                 final PasswordPolicyModalPage page =\n                                         new PasswordPolicyModalPage(\n-                                        PasswordPoliciesPanel.this,\n-                                        mwindow,\n-                                        new PasswordPolicyTO());\n+                                        mwindow, new PasswordPolicyTO());\n                                 return page;\n                             }\n                         });\n@@ -276,9 +273,9 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                 prefMan.set(getWebRequest(), (WebResponse) getResponse(),\n                         Constants.PREF_POLICY_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n-                table.setRowsPerPage(paginatorRows);\n+                table.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(container);\n+                target.add(container);\n             }\n         });\n \n@@ -303,7 +300,7 @@ private void setWindowClosedCallback(\n \n                     @Override\n                     public void onClose(AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                     }\n                 });\n     }\n@@ -319,7 +316,7 @@ public PolicyDataProvider() {\n             super();\n \n             //Default sorting\n-            setSort(\"description\", true);\n+            setSort(\"description\", SortOrder.ASCENDING);\n \n             comparator =\n                     new SortableDataProviderComparator<PasswordPolicyTO>(this);"},{"sha":"1fe48c55cacd189adc424a17e19da15afc58d746","filename":"console/src/main/java/org/syncope/console/pages/panels/PolicyBeanPanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPolicyBeanPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPolicyBeanPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPolicyBeanPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -245,7 +245,7 @@ protected void onUpdate(AjaxRequestTarget target) {\n                     panel.setEnabled(false);\n                 }\n \n-                target.addComponent(panel);\n+                target.add(panel);\n             }\n         });\n "},{"sha":"fbd0b6799588b0a7af7273d4268db9e17d7feb69","filename":"console/src/main/java/org/syncope/console/pages/panels/PropagationTasks.java","status":"modified","additions":16,"deletions":17,"changes":33,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -18,15 +18,17 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n import org.apache.wicket.extensions.markup.html.repeater.data.grid.ICellPopulator;\n+import org.apache.wicket.extensions.markup.html.repeater.data.sort.SortOrder;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.IColumn;\n import org.apache.wicket.extensions.markup.html.repeater.data.table.PropertyColumn;\n@@ -41,7 +43,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.http.WebResponse;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -52,7 +54,6 @@\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.SortableDataProviderComparator;\n import org.syncope.console.commons.XMLRolesReader;\n-import org.syncope.console.pages.BasePage;\n import org.syncope.console.pages.PTaskModalPage;\n import org.syncope.console.rest.TaskRestClient;\n import org.syncope.console.wicket.ajax.markup.html.IndicatingDeleteOnConfirmAjaxLink;\n@@ -123,8 +124,8 @@ public PropagationTasks(final String id) {\n                 \"propagationMode\", \"propagationMode\"));\n \n         columns.add(new PropertyColumn(\n-                new ResourceModel(\"resourceOperationType\"),\n-                \"resourceOperationType\", \"resourceOperationType\"));\n+                new ResourceModel(\"propagationOperation\"),\n+                \"propagationOperation\", \"propagationOperation\"));\n \n         columns.add(new AbstractColumn<TaskTO>(new ResourceModel(\"detail\")) {\n \n@@ -150,8 +151,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new PTaskModalPage(\n-                                        (BasePage) getPage(), window, taskTO);\n+                                return new PTaskModalPage(taskTO);\n                             }\n                         });\n \n@@ -195,8 +195,8 @@ public void onClick(final AjaxRequestTarget target) {\n                             error(scce.getMessage());\n                         }\n \n-                        target.addComponent(getPage().get(\"feedback\"));\n-                        target.addComponent(container);\n+                        target.add(getPage().get(\"feedback\"));\n+                        target.add(container);\n                     }\n                 };\n \n@@ -238,8 +238,8 @@ public void onClick(final AjaxRequestTarget target) {\n                         } catch (SyncopeClientCompositeErrorException scce) {\n                             error(scce.getMessage());\n                         }\n-                        target.addComponent(container);\n-                        target.addComponent(getPage().get(\"feedback\"));\n+                        target.add(container);\n+                        target.add(getPage().get(\"feedback\"));\n                     }\n                 };\n \n@@ -271,10 +271,10 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(getPage().get(\"feedback\"));\n+                            target.add(getPage().get(\"feedback\"));\n                             operationResult = false;\n                         }\n                     }\n@@ -283,7 +283,6 @@ public void onClose(final AjaxRequestTarget target) {\n         window.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         window.setInitialHeight(WIN_HEIGHT);\n         window.setInitialWidth(WIN_WIDTH);\n-        window.setPageMapName(\"view-task-win\");\n         window.setCookieName(\"view-task-win\");\n \n         Form paginatorForm = new Form(\"PaginatorForm\");\n@@ -302,9 +301,9 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         Constants.PREF_TASKS_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n \n-                table.setRowsPerPage(paginatorRows);\n+                table.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(container);\n+                target.add(container);\n             }\n         });\n \n@@ -321,7 +320,7 @@ private class TasksProvider extends SortableDataProvider<TaskTO> {\n         public TasksProvider() {\n             super();\n             //Default sorting\n-            setSort(\"id\", true);\n+            setSort(\"id\", SortOrder.ASCENDING);\n             comparator = new SortableDataProviderComparator<TaskTO>(this);\n         }\n "},{"sha":"e1b9710bb53d1be5723e212a1f59b24b532309d1","filename":"console/src/main/java/org/syncope/console/pages/panels/RolesPanel.java","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolesPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -56,7 +56,6 @@ public RolesPanel(final String id, final UserTO userTO) {\n \n         final ModalWindow membershipWin = new ModalWindow(\"membershipWin\");\n         membershipWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        membershipWin.setPageMapName(\"create-membership-modal\");\n         membershipWin.setCookieName(\"create-membership-modal\");\n         add(membershipWin);\n \n@@ -84,7 +83,7 @@ public Page createPage() {\n                         membershipTO = new MembershipTO();\n                         membershipTO.setRoleId(roleTO.getId());\n \n-                        return new MembershipModalPage(getPage(),\n+                        return new MembershipModalPage(\n                                 membershipWin, membershipTO, userTO);\n                     }\n                 });\n@@ -122,7 +121,7 @@ public void onClick(AjaxRequestTarget target) {\n                                     public Page createPage() {\n                                         MembershipModalPage window =\n                                                 new MembershipModalPage(\n-                                                getPage(), membershipWin,\n+                                                membershipWin,\n                                                 membershipTO,\n                                                 userTO);\n \n@@ -141,7 +140,7 @@ public Page createPage() {\n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n                         userTO.removeMembership(membershipTO);\n-                        target.addComponent(membershipsContainer);\n+                        target.add(membershipsContainer);\n                     }\n                 };\n                 item.add(deleteLink);\n@@ -180,7 +179,7 @@ private void setWindowClosedCallback(final ModalWindow window,\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                     }\n                 });\n     }"},{"sha":"2e28088e7c6103fe06795784ea36d6cfb90c1780","filename":"console/src/main/java/org/syncope/console/pages/panels/SyncTasks.java","status":"modified","additions":12,"deletions":16,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSyncTasks.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -20,7 +20,7 @@\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.ajax.markup.html.repeater.data.table.AjaxFallbackDefaultDataTable;\n@@ -37,7 +37,7 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.PropertyModel;\n import org.apache.wicket.model.ResourceModel;\n-import org.apache.wicket.protocol.http.WebResponse;\n+import org.apache.wicket.request.http.WebResponse;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -46,7 +46,6 @@\n import org.syncope.console.commons.Constants;\n import org.syncope.console.commons.PreferenceManager;\n import org.syncope.console.commons.XMLRolesReader;\n-import org.syncope.console.pages.BasePage;\n import org.syncope.console.pages.STaskModalPage;\n import org.syncope.console.pages.Tasks.DatePropertyColumn;\n import org.syncope.console.pages.Tasks.TasksProvider;\n@@ -146,8 +145,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new STaskModalPage(\n-                                        (BasePage) getPage(), window, taskTO);\n+                                return new STaskModalPage(window, taskTO);\n                             }\n                         });\n \n@@ -192,8 +190,8 @@ public void onClick(final AjaxRequestTarget target) {\n                             error(scce.getMessage());\n                         }\n \n-                        target.addComponent(container);\n-                        target.addComponent(getPage().get(\"feedback\"));\n+                        target.add(container);\n+                        target.add(getPage().get(\"feedback\"));\n                     }\n                 };\n \n@@ -236,8 +234,8 @@ public void onClick(final AjaxRequestTarget target) {\n                         } catch (SyncopeClientCompositeErrorException scce) {\n                             error(scce.getMessage());\n                         }\n-                        target.addComponent(container);\n-                        target.addComponent(getPage().get(\"feedback\"));\n+                        target.add(container);\n+                        target.add(getPage().get(\"feedback\"));\n                     }\n                 };\n \n@@ -271,10 +269,10 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n-                        target.addComponent(container);\n+                        target.add(container);\n                         if (operationResult) {\n                             info(getString(\"operation_succeded\"));\n-                            target.addComponent(getPage().get(\"feedback\"));\n+                            target.add(getPage().get(\"feedback\"));\n                             operationResult = false;\n                         }\n                     }\n@@ -283,7 +281,6 @@ public void onClose(final AjaxRequestTarget target) {\n         window.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         window.setInitialHeight(WIN_HEIGHT);\n         window.setInitialWidth(WIN_WIDTH);\n-        window.setPageMapName(\"view-task-win\");\n         window.setCookieName(\"view-task-win\");\n \n         Form paginatorForm = new Form(\"PaginatorForm\");\n@@ -302,9 +299,9 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         Constants.PREF_TASKS_PAGINATOR_ROWS,\n                         String.valueOf(paginatorRows));\n \n-                table.setRowsPerPage(paginatorRows);\n+                table.setItemsPerPage(paginatorRows);\n \n-                target.addComponent(container);\n+                target.add(container);\n             }\n         });\n \n@@ -325,8 +322,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new STaskModalPage((BasePage) getPage(), window,\n-                                new SyncTaskTO());\n+                        return new STaskModalPage(window, new SyncTaskTO());\n                     }\n                 });\n "},{"sha":"4d22398eb6de957b5d4824231f693c3af0b1ac2d","filename":"console/src/main/java/org/syncope/console/pages/panels/VirtualAttributesPanel.java","status":"modified","additions":12,"deletions":4,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FVirtualAttributesPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -69,7 +69,8 @@ public <T extends AbstractAttributableTO> VirtualAttributesPanel(\n         final IModel<List<String>> virtualSchemaNames =\n                 new LoadableDetachableModel<List<String>>() {\n \n-                    private static final long serialVersionUID = 5275935387613157437L;\n+                    private static final long serialVersionUID =\n+                            5275935387613157437L;\n \n                     @Override\n                     protected List<String> load() {\n@@ -99,10 +100,17 @@ protected List<String> load() {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target,\n-                    final Form form) {\n+                    final Form<?> form) {\n \n                 entityTO.addVirtualAttribute(new AttributeTO());\n-                target.addComponent(attributesContainer);\n+                target.add(attributesContainer);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target,\n+                    final Form<?> form) {\n+\n+                target.add(attributesContainer);\n             }\n         };\n \n@@ -128,7 +136,7 @@ protected void populateItem(final ListItem<AttributeTO> item) {\n                     @Override\n                     protected void onUpdate(final AjaxRequestTarget target) {\n                         entityTO.removeVirtualAttribute(attributeTO);\n-                        target.addComponent(attributesContainer);\n+                        target.add(attributesContainer);\n                     }\n \n                     @Override"},{"sha":"d3d436bf3eb38a558cc9e8ecb1a6946b97981b13","filename":"console/src/main/java/org/syncope/console/rest/ConfigurationRestClient.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Frest%2FConfigurationRestClient.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -74,7 +74,7 @@ public boolean createConfiguration(ConfigurationTO configurationTO) {\n                 + \"configuration/create\",\n                 configurationTO, ConfigurationTO.class);\n \n-        return (configurationTO.equals(newConfigurationTO)) ? true : false;\n+        return configurationTO.equals(newConfigurationTO);\n     }\n \n     /**"},{"sha":"cb12155176057732d79135508c3294fcb05f3b65","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/AjaxDecoratedCheckbox.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxDecoratedCheckbox.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxDecoratedCheckbox.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxDecoratedCheckbox.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -26,6 +26,8 @@\n  */\n public abstract class AjaxDecoratedCheckbox extends AjaxCheckBox {\n \n+    private static final long serialVersionUID = 7345848589265633002L;\n+\n     public AjaxDecoratedCheckbox(final String id) {\n         this(id, null);\n     }\n@@ -35,6 +37,7 @@ public AjaxDecoratedCheckbox(final String id, final IModel<Boolean> model) {\n \n         add(new AjaxEventBehavior(\"onclick\") {\n \n+            @Override\n             protected void onEvent(final AjaxRequestTarget target) {\n                 onUpdate(target);\n             }"},{"sha":"323355e25513d87c69b99bd85d87e9e506b906fb","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/form/MultiValueSelectorPanel.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FMultiValueSelectorPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FMultiValueSelectorPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FMultiValueSelectorPanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -70,7 +70,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         //Drop current component\n                         model.getObject().remove(item.getModelObject());\n \n-                        target.addComponent(container);\n+                        target.add(container);\n                     }\n                 };\n \n@@ -96,7 +96,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             //Add current component\n                             model.getObject().add(null);\n \n-                            target.addComponent(container);\n+                            target.add(container);\n                         }\n                     };\n "},{"sha":"56962c77a65361ec435241ec9aef584200d117b9","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/tree/NodeEditablePanel.java","status":"modified","additions":18,"deletions":7,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FNodeEditablePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FNodeEditablePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FNodeEditablePanel.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -15,9 +15,10 @@\n package org.syncope.console.wicket.markup.html.tree;\n \n import org.apache.wicket.Page;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n-import org.apache.wicket.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n+import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.panel.Fragment;\n@@ -29,7 +30,6 @@\n import org.syncope.client.to.RoleTO;\n import org.syncope.client.validation.SyncopeClientCompositeErrorException;\n import org.syncope.console.commons.XMLRolesReader;\n-import org.syncope.console.pages.BasePage;\n import org.syncope.console.pages.RoleModalPage;\n import org.syncope.console.pages.Roles;\n import org.syncope.console.rest.RoleRestClient;\n@@ -46,6 +46,8 @@ public class NodeEditablePanel extends Panel {\n     private static final Logger LOG = LoggerFactory.getLogger(\n             NodeEditablePanel.class);\n \n+    private static final long serialVersionUID = -7292448006463567909L;\n+\n     @SpringBean\n     private RoleRestClient restClient;\n \n@@ -55,7 +57,7 @@ public class NodeEditablePanel extends Panel {\n     private Fragment fragment;\n \n     public NodeEditablePanel(String id, final Long idRole, IModel inputModel,\n-            final ModalWindow window, final BasePage basePage) {\n+            final ModalWindow window, final PageReference callerPageRef) {\n \n         super(id);\n \n@@ -64,15 +66,20 @@ public NodeEditablePanel(String id, final Long idRole, IModel inputModel,\n \n         AjaxLink createRoleLink = new IndicatingAjaxLink(\"createRoleLink\") {\n \n+            private static final long serialVersionUID = -7978723352517770644L;\n+\n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n                 window.setPageCreator(new ModalWindow.PageCreator() {\n \n+                    private static final long serialVersionUID =\n+                            -7834632442532690940L;\n+\n                     @Override\n                     public Page createPage() {\n                         RoleTO roleTO = new RoleTO();\n                         roleTO.setParent(idRole);\n-                        RoleModalPage form = new RoleModalPage(basePage,\n+                        RoleModalPage form = new RoleModalPage(callerPageRef,\n                                 window, roleTO, true);\n                         return form;\n                     }\n@@ -93,14 +100,18 @@ public Page createPage() {\n             AjaxLink updateRoleLink = new IndicatingAjaxLink(\"updateRoleLink\") {\n \n                 @Override\n-                public void onClick(AjaxRequestTarget target) {\n+                public void onClick(final AjaxRequestTarget target) {\n                     window.setPageCreator(new ModalWindow.PageCreator() {\n \n+                        private static final long serialVersionUID =\n+                                -7834632442532690940L;\n+\n+                        @Override\n                         public Page createPage() {\n                             RoleTO roleTO = restClient.readRole(idRole);\n                             RoleModalPage form =\n-                                    new RoleModalPage(basePage, window, roleTO,\n-                                    false);\n+                                    new RoleModalPage(callerPageRef, window,\n+                                    roleTO, false);\n                             return form;\n                         }\n                     });"},{"sha":"b46d6654c7e2db6529ae3d0585819a6b62d6ac4a","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/tree/PropertyEditableColumn.java","status":"modified","additions":8,"deletions":7,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FPropertyEditableColumn.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FPropertyEditableColumn.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FPropertyEditableColumn.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -19,27 +19,29 @@\n \n import org.apache.wicket.Component;\n import org.apache.wicket.MarkupContainer;\n+import org.apache.wicket.PageReference;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.extensions.markup.html.tree.table.ColumnLocation;\n import org.apache.wicket.extensions.markup.html.tree.table.IRenderable;\n import org.apache.wicket.extensions.markup.html.tree.table.PropertyRenderableColumn;\n import org.apache.wicket.model.PropertyModel;\n import org.syncope.client.to.RoleTO;\n-import org.syncope.console.pages.BasePage;\n \n public class PropertyEditableColumn extends PropertyRenderableColumn {\n \n+    private static final long serialVersionUID = -6279911884966836754L;\n+\n     private ModalWindow window = null;\n \n-    private BasePage callerPage;\n+    private PageReference callerPageRef;\n \n     public PropertyEditableColumn(final ColumnLocation location,\n             final String header, final String propertyExpression,\n-            final ModalWindow window, final BasePage callerPage) {\n+            final ModalWindow window, final PageReference callerPageRef) {\n \n         super(location, header, propertyExpression);\n \n-        this.callerPage = callerPage;\n+        this.callerPageRef = callerPageRef;\n         this.window = window;\n     }\n \n@@ -53,14 +55,13 @@ public Component newCell(final MarkupContainer parent, final String id,\n         NodeEditablePanel editablePanel = new NodeEditablePanel(id,\n                 roleTO.getId(),\n                 new PropertyModel(node, getPropertyExpression()),\n-                window,\n-                callerPage);\n+                window, callerPageRef);\n \n         return editablePanel;\n     }\n \n     @Override\n-    public IRenderable newCell(TreeNode node, int level) {\n+    public IRenderable newCell(final TreeNode node, final int level) {\n         return getTreeTable().getTreeState().isNodeSelected(node)\n                 ? null : super.newCell(node, level);\n     }"},{"sha":"679a28a0b4463609538435aa248075ecd60f877d","filename":"console/src/main/resources/org/syncope/console/pages/BasePage.html","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -110,19 +110,19 @@\n                     </span>\n                 </li>\n                 <li><span>\n-                        <a href=#\" wicket:id=\"schema\"><img src=\"img/menu/notsel/schema.png\" alt=\"Schema\" width=\"80\" height=\"80\" /><br />\n+                        <a href=\"#\" wicket:id=\"schema\"><img src=\"img/menu/notsel/schema.png\" alt=\"Schema\" width=\"80\" height=\"80\" /><br />\n                             <wicket:message key=\"schema\"/>\n                         </a>\n                     </span>\n                 </li>\n                 <li><span>\n-                        <a href=#\" wicket:id=\"users\"><img src=\"img/menu/users.png\" alt=\"Users\" width=\"80\" height=\"80\" /><br />\n+                        <a href=\"#\" wicket:id=\"users\"><img src=\"img/menu/users.png\" alt=\"Users\" width=\"80\" height=\"80\" /><br />\n                             <wicket:message key=\"users\"/>\n                         </a>\n                     </span>\n                 </li>\n                 <li><span>\n-                        <a href=#\" wicket:id=\"roles\"><img src=\"img/menu/notsel/roles.png\" alt=\"Roles\" width=\"80\" height=\"80\" /><br />\n+                        <a href=\"#\" wicket:id=\"roles\"><img src=\"img/menu/notsel/roles.png\" alt=\"Roles\" width=\"80\" height=\"80\" /><br />\n                             <wicket:message key=\"roles\"/>\n                         </a>\n                     </span>"},{"sha":"cf6665a5902a69f209c8bae5683410b8d12cc1c7","filename":"console/src/main/resources/org/syncope/console/pages/PTaskModalPage.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2FPTaskModalPage.html?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -34,7 +34,7 @@\n <wicket:extend>\n     <div id=\"dialog-form\">\n         <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n-        <form wicket:id=\"TaskForm\">\n+        <form wicket:id=\"form\">\n             <div id=\"tabs\">\n                 <ul>\n                     <li class=\"tabs-selected\"><a href=\"#profile\"><span><wicket:message key=\"profile\"/></span></a></li>"},{"sha":"fd10e9217d007411b1b43e8cf0bbac2ca25ebab6","filename":"console/src/main/resources/org/syncope/console/pages/panels/PropagationTasks.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks.properties?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -6,4 +6,4 @@ detail=Detail\n delete=Delete\n edit=Edit\n propagationMode=Propagation Mode\n-resourceOperationType=Resource operation\n\\ No newline at end of file\n+propagationOperation=Propagation Operation\n\\ No newline at end of file"},{"sha":"845ee201e894bdd96eec4635340eff265f638644","filename":"console/src/main/resources/org/syncope/console/pages/panels/PropagationTasks_it.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPropagationTasks_it.properties?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -6,4 +6,4 @@ detail=Dettagli\n delete=Rimuovi\n edit=Modifica\n propagationMode=Propagazione\n-resourceOperationType=Operazione\n\\ No newline at end of file\n+propagationOperation=Operazione\n\\ No newline at end of file"},{"sha":"c8c8675d873f22ac5f0016bed83a1577946812d8","filename":"console/src/test/java/org/syncope/console/UserTestITCase.java","status":"modified","additions":5,"deletions":6,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fconsole%2FUserTestITCase.java?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -74,10 +74,10 @@ public void browseEditModal() {\n \n         assertEquals(\"testUsername\",\n                 selenium.getAttribute(\n-                \"//form/div[2]/div/div/span/div[2]/div[2]/span/input@value\"));\n+                \"//form/div[2]/div/div/span/div[3]/div[2]/span/input@value\"));\n         assertEquals(\"Doe\",\n                 selenium.getAttribute(\n-                \"//form/div[2]/div/div/span/div[6]/div[2]/span/input@value\"));\n+                \"//form/div[2]/div/div/span/div[7]/div[2]/span/input@value\"));\n         selenium.click(\"//div[@id='tabs']/ul/li[2]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[3]/a/span\");\n         selenium.click(\"//div[@id='tabs']/ul/li[4]/a/span\");\n@@ -109,11 +109,10 @@ public void delete() {\n         assertTrue(selenium.getConfirmation().matches(\n                 \"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n         try {\n-            Thread.sleep(1000);\n+            Thread.sleep(2000);\n         } catch (InterruptedException e) {\n         }\n-        assertTrue(\n-                selenium.isTextPresent(\"NotFound [Workflow action 'delete']]\"));\n-\n+        assertTrue(selenium.isTextPresent(\n+                \"Propagation [ws-target-resource-delete]\"));\n     }\n }"},{"sha":"f97377064db1449ba3b1e60389aaae458836e64a","filename":"pom.xml","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/53d80b1ac194ccc9a29fa802d2dc71b2928a9876/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=53d80b1ac194ccc9a29fa802d2dc71b2928a9876","patch":"@@ -101,7 +101,7 @@\n         <hibernate-validator.version>4.2.0.Final</hibernate-validator.version>\n         <ehcache.version>2.4.5</ehcache.version>\n \n-        <wicket.version>1.4.18</wicket.version>\n+        <wicket.version>1.5.1</wicket.version>\n \n         <h2.version>1.3.160</h2.version>\n \n@@ -322,6 +322,7 @@\n                 <groupId>org.apache.wicket</groupId>\n                 <artifactId>wicket</artifactId>\n                 <version>${wicket.version}</version>\n+                <type>pom</type>\n             </dependency>\n             <dependency>\n                 <groupId>org.apache.wicket</groupId>"}]}