{"sha":"0ed3b04721651066eaff3b74fed365d7900427b4","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjBlZDNiMDQ3MjE2NTEwNjZlYWZmM2I3NGZlZDM2NWQ3OTAwNDI3YjQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-09-08T09:16:41Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-09-08T10:48:41Z"},"message":"[SYNCOPE-1586] Adding wait-for-it, upgrading JDBC drivers","tree":{"sha":"740099c5b3cbf83c9bb157b07c31c49e17ef3fc6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/740099c5b3cbf83c9bb157b07c31c49e17ef3fc6"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/0ed3b04721651066eaff3b74fed365d7900427b4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0ed3b04721651066eaff3b74fed365d7900427b4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0ed3b04721651066eaff3b74fed365d7900427b4","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0ed3b04721651066eaff3b74fed365d7900427b4/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"9b1f9bf2fd85d9f107d96fe260763ca7260c083b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9b1f9bf2fd85d9f107d96fe260763ca7260c083b","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9b1f9bf2fd85d9f107d96fe260763ca7260c083b"}],"stats":{"total":67,"additions":20,"deletions":47},"files":[{"sha":"2cb5219de58cb40b2269698a01253f0e057abc7d","filename":"docker/console/src/main/resources/Dockerfile","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fconsole%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-FROM adoptopenjdk/openjdk11-openj9:alpine-slim\n+FROM adoptopenjdk/openjdk11-openj9:debian-slim\n MAINTAINER dev@syncope.apache.org\n \n RUN set -x"},{"sha":"a1eeda89ff5fb8614a6438a261f4e6ba4799a824","filename":"docker/core/src/main/resources/Dockerfile","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fcore%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-FROM adoptopenjdk/openjdk11-openj9:alpine-slim\n+FROM adoptopenjdk/openjdk11-openj9:debian-slim\n MAINTAINER dev@syncope.apache.org\n \n RUN set -x\n@@ -44,4 +44,6 @@ COPY startup.sh /opt/syncope/bin\n RUN chmod 755 /opt/syncope/bin/startup.sh\n CMD [\"/opt/syncope/bin/startup.sh\"]\n \n+RUN apt-get update && apt-get -y install wait-for-it\n+\n EXPOSE 8080"},{"sha":"d0c07922687e0c4b88bf43104b2b5e02592fa7cf","filename":"docker/enduser/src/main/resources/Dockerfile","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fenduser%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fenduser%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fenduser%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -15,8 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-# Cannot FROM adoptopenjdk/openjdk11-openj9:alpine-slim because it's headless, and fonts are required for captcha\n-FROM openjdk:11\n+# Cannot FROM adoptopenjdk/openjdk11-openj9:debian-slim because it's headless, and fonts are required for captcha\n+FROM adoptopenjdk/openjdk11:debian-slim\n MAINTAINER dev@syncope.apache.org\n \n RUN set -x"},{"sha":"e9aab296528453c8c3eeb6b2b7046c89996e14de","filename":"docker/sra/src/main/resources/Dockerfile","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsra%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-FROM adoptopenjdk/openjdk11-openj9:alpine-slim\n+FROM adoptopenjdk/openjdk11-openj9:debian-slim\n MAINTAINER dev@syncope.apache.org\n \n RUN set -x"},{"sha":"91df1411820e445c93f1ca5e541d70544c1e98dd","filename":"docker/src/main/resources/docker-compose/docker-compose-myjson.yml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-myjson.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-myjson.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-myjson.yml?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -32,6 +32,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n+     command: [\"wait-for-it\", \"db:3306\", \"-t\", \"60\", \"--\", \"/opt/syncope/bin/startup.sh\"]\n      image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\""},{"sha":"56dc133a12be998df805b115cb9cca863e8246ca","filename":"docker/src/main/resources/docker-compose/docker-compose-mysql.yml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fsrc%2Fmain%2Fresources%2Fdocker-compose%2Fdocker-compose-mysql.yml?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -32,6 +32,7 @@ services:\n    syncope:\n      depends_on:\n        - db\n+     command: [\"wait-for-it\", \"db:3306\", \"-t\", \"60\", \"--\", \"/opt/syncope/bin/startup.sh\"]\n      image: apache/syncope:${SYNCOPE_VERSION}\n      ports:\n        - \"18080:8080\""},{"sha":"584fe1143058ad576ae42217553332799a18e162","filename":"docker/wa/src/main/resources/Dockerfile","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2FDockerfile","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2FDockerfile","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2FDockerfile?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -15,8 +15,8 @@\n # specific language governing permissions and limitations\n # under the License.\n \n-# Cannot FROM adoptopenjdk/openjdk11-openj9:alpine-slim because it's headless, and fonts might be required\n-FROM openjdk:11\n+# Cannot FROM adoptopenjdk/openjdk11-openj9:debian-slim because it's headless, and fonts might be required\n+FROM adoptopenjdk/openjdk11:debian-slim\n MAINTAINER dev@syncope.apache.org\n \n RUN set -x"},{"sha":"ac0ef5c6544e934e1f73aa6cc195734b2371dd0a","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/WorkflowFlowableContext.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2FWorkflowFlowableContext.java?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -23,7 +23,6 @@\n import org.apache.syncope.core.flowable.impl.FlowableBpmnProcessManager;\n import org.apache.syncope.core.flowable.impl.FlowableUserRequestHandler;\n import org.apache.syncope.core.flowable.impl.FlowableWorkflowUtils;\n-import org.apache.syncope.core.flowable.support.DomainProcessEngineConfiguration;\n import org.apache.syncope.core.flowable.support.ShellServiceTaskDisablingBpmnParseHandler;\n import org.apache.syncope.core.flowable.support.SyncopeEntitiesVariableType;\n import org.apache.syncope.core.flowable.support.SyncopeFormHandlerHelper;\n@@ -36,6 +35,7 @@\n import org.flowable.common.engine.impl.persistence.StrongUuidGenerator;\n import org.flowable.idm.spring.SpringIdmEngineConfiguration;\n import org.flowable.idm.spring.configurator.SpringIdmEngineConfigurator;\n+import org.flowable.spring.SpringProcessEngineConfiguration;\n import org.springframework.beans.factory.annotation.Value;\n import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\n import org.springframework.context.annotation.Bean;\n@@ -116,8 +116,8 @@ public IdGenerator idGenerator() {\n     @ConditionalOnMissingBean\n     @Bean\n     @Scope(\"prototype\")\n-    public DomainProcessEngineConfiguration processEngineConfiguration() {\n-        DomainProcessEngineConfiguration conf = new DomainProcessEngineConfiguration();\n+    public SpringProcessEngineConfiguration processEngineConfiguration() {\n+        SpringProcessEngineConfiguration conf = new SpringProcessEngineConfiguration();\n         conf.setDatabaseSchemaUpdate(AbstractEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n         conf.setJpaHandleTransaction(true);\n         conf.setJpaCloseEntityManager(false);"},{"sha":"6f18e8466697c200dedd19628129b6d7aa59d8ce","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngineConfiguration.java","status":"removed","additions":0,"deletions":31,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/9b1f9bf2fd85d9f107d96fe260763ca7260c083b/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/9b1f9bf2fd85d9f107d96fe260763ca7260c083b/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineConfiguration.java?ref=9b1f9bf2fd85d9f107d96fe260763ca7260c083b","patch":"@@ -1,31 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.core.flowable.support;\n-\n-import org.flowable.spring.SpringProcessEngineConfiguration;\n-\n-public class DomainProcessEngineConfiguration extends SpringProcessEngineConfiguration {\n-\n-    public DomainProcessEngineConfiguration() {\n-        super();\n-\n-        // workaround for Flowable not supporting (yet?) MariaDB\n-        databaseTypeMappings.setProperty(\"MariaDB\", DATABASE_TYPE_MYSQL);\n-    }\n-}"},{"sha":"1c7e01c110be82576dca81a4a72cf06fbaf4cccb","filename":"ext/flowable/flowable-bpmn/src/main/java/org/apache/syncope/core/flowable/support/DomainProcessEngineFactoryBean.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Fflowable%2Fflowable-bpmn%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fflowable%2Fsupport%2FDomainProcessEngineFactoryBean.java?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -72,7 +72,7 @@ private ProcessEngine build(final String domain, final DataSource datasource) {\n                 domain + \"TransactionManager\", PlatformTransactionManager.class);\n         Object entityManagerFactory = ctx.getBean(domain + \"EntityManagerFactory\");\n \n-        DomainProcessEngineConfiguration conf = ctx.getBean(DomainProcessEngineConfiguration.class);\n+        SpringProcessEngineConfiguration conf = ctx.getBean(SpringProcessEngineConfiguration.class);\n         conf.setDataSource(datasource);\n         conf.setTransactionManager(transactionManager);\n         conf.setTransactionsExternallyManaged(true);"},{"sha":"047c5b16e8f4bcd18892e7cffc166b35aec4c973","filename":"pom.xml","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/0ed3b04721651066eaff3b74fed365d7900427b4/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/0ed3b04721651066eaff3b74fed365d7900427b4/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=0ed3b04721651066eaff3b74fed365d7900427b4","patch":"@@ -517,11 +517,11 @@ under the License.\n     <docker.mysql.version>8.0</docker.mysql.version>\n     <docker.mariadb.version>10.5</docker.mariadb.version>\n \n-    <jdbc.postgresql.version>42.2.12</jdbc.postgresql.version>\n-    <jdbc.mysql.version>8.0.20</jdbc.mysql.version>\n-    <jdbc.mariadb.version>2.6.0</jdbc.mariadb.version>\n-    <jdbc.mssql.version>8.2.2.jre</jdbc.mssql.version>\n-    <jdbc.oracle.version>19.6.0.0</jdbc.oracle.version>\n+    <jdbc.postgresql.version>42.2.16</jdbc.postgresql.version>\n+    <jdbc.mysql.version>8.0.21</jdbc.mysql.version>\n+    <jdbc.mariadb.version>2.6.2</jdbc.mariadb.version>\n+    <jdbc.mssql.version>8.4.1.jre</jdbc.mssql.version>\n+    <jdbc.oracle.version>19.7.0.0</jdbc.oracle.version>\n \n     <conf.directory>${project.build.directory}/test-classes</conf.directory>\n     <bundles.directory>${project.build.directory}/bundles</bundles.directory>"}]}