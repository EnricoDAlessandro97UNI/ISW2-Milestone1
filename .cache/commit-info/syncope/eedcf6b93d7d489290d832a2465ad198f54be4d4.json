{"sha":"eedcf6b93d7d489290d832a2465ad198f54be4d4","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmVlZGNmNmI5M2Q3ZDQ4OTI5MGQ4MzJhMjQ2NWFkMTk4ZjU0YmU0ZDQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-08-09T12:29:53Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-08-09T12:29:53Z"},"message":"[SYNCOPE-409] Merge from 1_1_X\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1512282 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"95e3c17adfb63ff945516afb9eb50a73467ceb33","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/95e3c17adfb63ff945516afb9eb50a73467ceb33"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/eedcf6b93d7d489290d832a2465ad198f54be4d4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/eedcf6b93d7d489290d832a2465ad198f54be4d4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/eedcf6b93d7d489290d832a2465ad198f54be4d4","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/eedcf6b93d7d489290d832a2465ad198f54be4d4/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"2cd38ed5487e459cab52c9154ea0aa3854fc655c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2cd38ed5487e459cab52c9154ea0aa3854fc655c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2cd38ed5487e459cab52c9154ea0aa3854fc655c"},{"sha":"8296a77cb3ef4a561c92ed2791e286d28cbae806","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8296a77cb3ef4a561c92ed2791e286d28cbae806","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8296a77cb3ef4a561c92ed2791e286d28cbae806"}],"stats":{"total":132,"additions":108,"deletions":24},"files":[{"sha":"d7fa3f1c3884d705227f8facf84de16e47c37425","filename":"console/src/main/java/org/apache/syncope/console/pages/NotificationModalPage.java","status":"modified","additions":25,"deletions":2,"changes":27,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -90,8 +90,31 @@ public NotificationModalPage(final PageReference pageRef, final ModalWindow wind\n         traceLevel.addRequiredLabel();\n         form.add(traceLevel);\n \n+        final WebMarkupContainer aboutContainer = new WebMarkupContainer(\"aboutContainer\");\n+        aboutContainer.setOutputMarkupId(true);\n+\n+        form.add(aboutContainer);\n+        \n+        final AjaxCheckBoxPanel checkAbout =\n+                new AjaxCheckBoxPanel(\"checkAbout\", \"checkAbout\",\n+                new Model<Boolean>(notificationTO.getAbout() == null));\n+        aboutContainer.add(checkAbout);\n+        \n         final UserSearchPanel about = new UserSearchPanel.Builder(\"about\").nodeCond(notificationTO.getAbout()).build();\n-        form.add(about);\n+        aboutContainer.add(about);\n+        about.setEnabled(!checkAbout.getModelObject());\n+        \n+        checkAbout.getField().add(new AjaxFormComponentUpdatingBehavior(Constants.ON_CHANGE) {\n+\n+            private static final long serialVersionUID = -1107858522700306810L;\n+\n+            @Override\n+            protected void onUpdate(final AjaxRequestTarget target) {\n+                about.setEnabled(!checkAbout.getModelObject());\n+                target.add(about);\n+                target.add(aboutContainer);\n+            }\n+        });\n \n         final AjaxDropDownChoicePanel<IntMappingType> recipientAttrType = new AjaxDropDownChoicePanel<IntMappingType>(\n                 \"recipientAttrType\", new ResourceModel(\"recipientAttrType\", \"recipientAttrType\").getObject(),\n@@ -186,7 +209,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n-                notificationTO.setAbout(about.buildSearchCond());\n+                notificationTO.setAbout(checkAbout.getModelObject() ? null : about.buildSearchCond());\n                 notificationTO.setRecipients(checkRecipients.getModelObject() ? recipients.buildSearchCond() : null);\n \n                 try {"},{"sha":"42a37034a8c9751c5e9f7f2826d03f08677eb434","filename":"console/src/main/resources/org/apache/syncope/console/pages/NotificationModalPage.html","status":"modified","additions":18,"deletions":8,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.html?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -88,28 +88,38 @@\n           </div>\n \n           <div id=\"about\">\n-            <span wicket:id=\"about\"/>\n-          </div>\n+            <span wicket:id=\"aboutContainer\">\n+           \t<div class=\"tablerow\" style=\"width: auto;\">\n+           \t  <div class=\"tablecolumn_field\" style=\"width: auto; padding-right: 5px;\">\n+           \t    <span wicket:id=\"checkAbout\">[checkAbout]</span>\n+           \t  </div>\n+           \t  <div class=\"tablecolumn_label\" style=\"width: auto;\">\n+           \t    <label for=\"checkAbout\"><wicket:message key=\"checkAbout\"/></label>\n+           \t  </div>\n+           \t</div>\n+               <span wicket:id=\"about\"/>\n+             </span>\n+          </div>  \n \n           <div id=\"events\">\n             <span wicket:id=\"events\"/>\n           </div>\n \n           <div id=\"recipients\">\n-            <div class=\"tablerow\">\n-              <div class=\"tablecolumn_field\">\n+           \t<div class=\"tablerow\" style=\"width: auto; display: block;\">\n+           \t  <div class=\"tablecolumn_field\" style=\"width: auto; padding-right: 5px;\">\n                 <span wicket:id=\"selfAsRecipient\">[selfAsRecipient]</span>\n               </div>\n-              <div class=\"tablecolumn_label\">\n+           \t  <div class=\"tablecolumn_label\" style=\"width: auto;\">\n                 <label for=\"selfAsRecipient\"><wicket:message key=\"selfAsRecipient\"/></label>\n               </div>\n             </div>\n             <span wicket:id=\"recipientsContainer\">\n-              <div class=\"tablerow\">\n-                <div class=\"tablecolumn_field\">\n+           \t<div class=\"tablerow\" style=\"width: auto;\">\n+           \t  <div class=\"tablecolumn_field\" style=\"width: auto; padding-right: 5px;\">\n                   <span wicket:id=\"checkRecipients\">[checkRecipients]</span>\n                 </div>\n-                <div class=\"tablecolumn_label\">\n+           \t  <div class=\"tablecolumn_label\" style=\"width: auto;\">\n                   <label for=\"checkRecipients\"><wicket:message key=\"checkRecipients\"/></label>\n                 </div>\n               </div>"},{"sha":"36dd3603912767945f929bdcb1ff5e07d753f04f","filename":"console/src/main/resources/org/apache/syncope/console/pages/NotificationModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.properties?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -28,3 +28,4 @@ selfAsRecipient=Include users matching About\n recipientAttrType=Recipients e-mail attribute type\n recipientAttrName=Recipients e-mail attribute schema\n checkRecipients=Search recipients\n+checkAbout=All users"},{"sha":"74247535fca81186c3160e1c268378b4868398ad","filename":"console/src/main/resources/org/apache/syncope/console/pages/NotificationModalPage_it.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_it.properties?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -27,4 +27,5 @@ recipients=Destinatari\n selfAsRecipient=Includi i soggetti\n recipientAttrType=Tipo attributo e-mail destinatari\n recipientAttrName=Shcema attributo e-mail destinatari\n-checkRecipients=Cerca i destinatari\n\\ No newline at end of file\n+checkRecipients=Cerca i destinatari\n+checkAbout=Tutti gli utenti\n\\ No newline at end of file"},{"sha":"a1d2aab66b572e08ea678b5db386d326abcc8b60","filename":"console/src/main/resources/org/apache/syncope/console/pages/NotificationModalPage_pt_BR.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage_pt_BR.properties?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -28,3 +28,4 @@ selfAsRecipient=Incluir usu\\u00E1rios relacionados Sobre\n recipientAttrType=Tipo de atributo de destinat\\u00E1rio de email.\n recipientAttrName=Destinat\\u00E1rios de e-mail para atributos de esquema\n checkRecipients=Buscar Destinat\\u00E1rios\n+checkAbout=Todos os usu\\u00E1rios\n\\ No newline at end of file"},{"sha":"416ae232840a922e45fbf7e06ecb873d58454950","filename":"core/src/main/java/org/apache/syncope/core/notification/NotificationManager.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationManager.java?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -199,7 +199,10 @@ public void createTasks(final Long userId, final Set<String> performedTasks)\n         }\n \n         for (Notification notification : notificationDAO.findAll()) {\n-            if (searchDAO.matches(user, notification.getAbout(), AttributableUtil.getInstance(AttributableType.USER))) {\n+            if (notification.getAbout() == null\n+                    || searchDAO.matches(user, notification.getAbout(),\n+                    AttributableUtil.getInstance(AttributableType.USER))) {\n+\n                 Set<String> events = new HashSet<String>(notification.getEvents());\n                 events.retainAll(performedTasks);\n "},{"sha":"c16b7246bcb5fb11ad7159fad82eba1d8cca2944","filename":"core/src/main/java/org/apache/syncope/core/persistence/beans/Notification.java","status":"modified","additions":2,"deletions":11,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FNotification.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FNotification.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FNotification.java?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -56,7 +56,6 @@ public class Notification extends AbstractBaseBean {\n     @Column(name = \"events\")\n     private List<String> events;\n \n-    @NotNull\n     @Lob\n     private String xmlAbout;\n \n@@ -100,19 +99,11 @@ public Long getId() {\n     }\n \n     public NodeCond getAbout() {\n-        NodeCond result = XMLSerializer.<NodeCond>deserialize(xmlAbout);\n-        if (result == null) {\n-            result = new NodeCond();\n-        }\n-        return result;\n+        return xmlAbout == null ? null : XMLSerializer.<NodeCond>deserialize(xmlAbout);\n     }\n \n     public void setAbout(NodeCond about) {\n-        if (about == null) {\n-            about = new NodeCond();\n-        }\n-\n-        xmlAbout = XMLSerializer.serialize(about);\n+        xmlAbout = about == null ? null : XMLSerializer.serialize(about);\n     }\n \n     public NodeCond getRecipients() {"},{"sha":"3f19747352d8d0f86862396f785b21e37b153913","filename":"core/src/main/java/org/apache/syncope/core/persistence/validation/entity/NotificationValidator.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FNotificationValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FNotificationValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fvalidation%2Fentity%2FNotificationValidator.java?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -45,7 +45,7 @@ public boolean isValid(final Notification value, final ConstraintValidatorContex\n                     getTemplate(EntityViolationType.InvalidNotification, \"No events\")).\n                     addNode(\"events\").addConstraintViolation();\n         }\n-        if (!value.getAbout().isValid()) {\n+        if (value.getAbout() != null && !value.getAbout().isValid()) {\n             isValid = false;\n \n             context.buildConstraintViolationWithTemplate("},{"sha":"a7e78b3b8dac50aab26a0b45d8010ebafa666f92","filename":"core/src/test/java/org/apache/syncope/core/notification/NotificationTest.java","status":"modified","additions":54,"deletions":0,"changes":54,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/eedcf6b93d7d489290d832a2465ad198f54be4d4/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fnotification%2FNotificationTest.java?ref=eedcf6b93d7d489290d832a2465ad198f54be4d4","patch":"@@ -306,4 +306,58 @@ public void issueSYNCOPE192() throws Exception {\n         assertTrue(task.isExecuted());\n         assertTrue(StringUtils.isNotBlank(task.getLatestExecStatus()));\n     }\n+    \n+    @Test\n+    public void notifyByMailEmptyAbout() throws Exception {\n+        // 1. create suitable notification for subsequent tests\n+        Notification notification = new Notification();\n+        notification.addEvent(\"create\");\n+\n+        notification.setAbout(null);\n+        \n+        MembershipCond membCond = new MembershipCond();\n+        membCond.setRoleId(8L);\n+        notification.setRecipients(NodeCond.getLeafCond(membCond));\n+        notification.setSelfAsRecipient(true);\n+\n+        notification.setRecipientAttrName(\"email\");\n+        notification.setRecipientAttrType(IntMappingType.UserSchema);\n+\n+        Random random = new Random(System.currentTimeMillis());\n+        String sender = \"syncopetest-\" + random.nextLong() + \"@syncope.apache.org\";\n+        notification.setSender(sender);\n+        String subject = \"Test notification \" + random.nextLong();\n+        notification.setSubject(subject);\n+        notification.setTemplate(\"optin\");\n+\n+        Notification actual = notificationDAO.save(notification);\n+        assertNotNull(actual);\n+\n+        notificationDAO.flush();\n+\n+        // 2. create user\n+        UserTO userTO = UserTestITCase.getSampleTO(mailAddress);\n+        MembershipTO membershipTO = new MembershipTO();\n+        membershipTO.setRoleId(7);\n+        userTO.addMembership(membershipTO);\n+\n+        userController.create(new MockHttpServletResponse(), userTO);\n+\n+        // 3. force Quartz job execution and verify e-mail\n+        notificationJob.execute(null);\n+        assertTrue(verifyMail(sender, subject));\n+\n+        // 4. get NotificationTask id\n+        Long taskId = null;\n+        for (NotificationTask task : taskDAO.findAll(NotificationTask.class)) {\n+            if (sender.equals(task.getSender())) {\n+                taskId = task.getId();\n+            }\n+        }\n+        assertNotNull(taskId);\n+\n+        // 5. execute Notification task and verify e-mail\n+        taskController.execute(taskId, false);\n+        assertTrue(verifyMail(sender, subject));\n+    }\n }"}]}