{"sha":"5f1a377f5b0d772db335fda37914623d8c2db0a8","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjVmMWEzNzdmNWIwZDc3MmRiMzM1ZmRhMzc5MTQ2MjNkOGMyZGIwYTg=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-18T13:25:30Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-07-18T13:25:30Z"},"message":"Little refactoring missing\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246396 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"27a2eb8bf76554c9833411bbdc08fc4f6ee64ccb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/27a2eb8bf76554c9833411bbdc08fc4f6ee64ccb"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/5f1a377f5b0d772db335fda37914623d8c2db0a8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5f1a377f5b0d772db335fda37914623d8c2db0a8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5f1a377f5b0d772db335fda37914623d8c2db0a8","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5f1a377f5b0d772db335fda37914623d8c2db0a8/comments","author":null,"committer":null,"parents":[{"sha":"0abf29cead9c47558643e7e89e0b2016b429ff2a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0abf29cead9c47558643e7e89e0b2016b429ff2a","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0abf29cead9c47558643e7e89e0b2016b429ff2a"}],"stats":{"total":54,"additions":21,"deletions":33},"files":[{"sha":"b9802aa08a53e21efd3d0feb730521757dc673d8","filename":"core/src/main/java/org/syncope/core/persistence/beans/AbstractAttributable.java","status":"modified","additions":1,"deletions":5,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractAttributable.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractAttributable.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FAbstractAttributable.java?ref=5f1a377f5b0d772db335fda37914623d8c2db0a8","patch":"@@ -30,11 +30,7 @@ public abstract class AbstractAttributable extends AbstractBaseBean {\n      */\n     @ManyToMany(fetch = FetchType.EAGER)\n     private Set<Resource> resources;\n-\n-    public AbstractAttributable() {\n-        resources = new HashSet<Resource>();\n-    }\n-\n+    \n     public <T extends AbstractAttribute> T getAttribute(String schemaName) {\n         T result = null;\n         T attribute = null;"},{"sha":"2eb70f09901aa443ff1b6526684c3677446abaa7","filename":"core/src/main/java/org/syncope/core/rest/data/AbstractAttributableDataBinder.java","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FAbstractAttributableDataBinder.java?ref=5f1a377f5b0d772db335fda37914623d8c2db0a8","patch":"@@ -30,6 +30,8 @@\n import org.syncope.core.persistence.beans.AbstractDerivedSchema;\n import org.syncope.core.persistence.beans.AbstractSchema;\n import org.syncope.core.persistence.beans.Resource;\n+import org.syncope.core.persistence.beans.role.SyncopeRole;\n+import org.syncope.core.persistence.beans.user.SyncopeUser;\n import org.syncope.core.persistence.dao.AttributeValueDAO;\n import org.syncope.core.persistence.dao.DerivedSchemaDAO;\n import org.syncope.core.persistence.dao.ResourceDAO;\n@@ -163,6 +165,24 @@ protected <T extends AbstractAttributable> T fillAbstractAttributable(\n                 requiredValuesMissing.addElement(userSchema.getName());\n             }\n \n+        // 3. resources\n+        Resource resource = null;\n+        for (String resourceName : abstractAttributableTO.getResources()) {\n+            resource = resourceDAO.find(resourceName);\n+\n+            if (resource == null) {\n+                if (log.isDebugEnabled())\n+                    log.debug(\"Ignoring invalid resource \" + resourceName);\n+            } else {\n+                abstractAttributable.addResource(resource);\n+                \n+                if (attributableUtil == attributableUtil.USER)\n+                    resource.addUser((SyncopeUser) abstractAttributable);\n+                if (attributableUtil == attributableUtil.ROLE)\n+                    resource.addRole((SyncopeRole) abstractAttributable);\n+            }\n+        }\n+\n         // Throw composite exception if there is at least one element set\n         // in the composing exceptions\n         if (!requiredValuesMissing.getElements().isEmpty())"},{"sha":"724fc5cfc86c9d915fce6ab36420b30f1468bb59","filename":"core/src/main/java/org/syncope/core/rest/data/RoleDataBinder.java","status":"modified","additions":0,"deletions":14,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FRoleDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FRoleDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FRoleDataBinder.java?ref=5f1a377f5b0d772db335fda37914623d8c2db0a8","patch":"@@ -111,20 +111,6 @@ public SyncopeRole createSyncopeRole(RoleTO roleTO)\n             }\n         }\n \n-        // 4. resources\n-        Resource resource = null;\n-        for (String resourceName : roleTO.getResources()) {\n-            resource = resourceDAO.find(resourceName);\n-\n-            if (resource == null) {\n-                if (log.isDebugEnabled())\n-                    log.debug(\"Ignoring invalid resource \" + resourceName);\n-            } else {\n-                syncopeRole.addResource(resource);\n-                resource.addRole(syncopeRole);\n-            }\n-        }\n-\n         return syncopeRole;\n     }\n "},{"sha":"7891596f185cd8e5ac356ddb46f0a2ba684c0e17","filename":"core/src/main/java/org/syncope/core/rest/data/UserDataBinder.java","status":"modified","additions":0,"deletions":14,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5f1a377f5b0d772db335fda37914623d8c2db0a8/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java?ref=5f1a377f5b0d772db335fda37914623d8c2db0a8","patch":"@@ -90,20 +90,6 @@ public SyncopeUser createSyncopeUser(UserTO userTO)\n             }\n         }\n \n-        // 4. resources\n-        Resource resource = null;\n-        for (String resourceName : userTO.getResources()) {\n-            resource = resourceDAO.find(resourceName);\n-\n-            if (resource == null) {\n-                if (log.isDebugEnabled())\n-                    log.debug(\"Ignoring invalid resource \" + resourceName);\n-            } else {\n-                syncopeUser.addResource(resource);\n-                resource.addUser(syncopeUser);\n-            }\n-        }\n-\n         return syncopeUser;\n     }\n "}]}