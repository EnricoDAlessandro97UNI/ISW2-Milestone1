{"sha":"87a99779601bf0a417a5abf944a3530f6eaefa2d","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjg3YTk5Nzc5NjAxYmYwYTQxN2E1YWJmOTQ0YTM1MzBmNmVhZWZhMmQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-07-03T10:19:46Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-07-03T10:19:46Z"},"message":"[SYNCOPE-103] Aligning with latest HttpClient updates (Auth cache)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1356661 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6cb91071b7ef514d7e7060a268f51169387d4a3b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6cb91071b7ef514d7e7060a268f51169387d4a3b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/87a99779601bf0a417a5abf944a3530f6eaefa2d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/87a99779601bf0a417a5abf944a3530f6eaefa2d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/87a99779601bf0a417a5abf944a3530f6eaefa2d","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/87a99779601bf0a417a5abf944a3530f6eaefa2d/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"3cc85dff357f83dcc911ca302587c2cf6bcccf7e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3cc85dff357f83dcc911ca302587c2cf6bcccf7e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3cc85dff357f83dcc911ca302587c2cf6bcccf7e"}],"stats":{"total":57,"additions":36,"deletions":21},"files":[{"sha":"e3fe76667a8cb508070ca964134c346867de192c","filename":"console/src/main/java/org/apache/syncope/console/commons/HttpResourceStream.java","status":"modified","additions":18,"deletions":3,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/87a99779601bf0a417a5abf944a3530f6eaefa2d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/87a99779601bf0a417a5abf944a3530f6eaefa2d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FHttpResourceStream.java?ref=87a99779601bf0a417a5abf944a3530f6eaefa2d","patch":"@@ -25,11 +25,18 @@\n import java.net.URISyntaxException;\n import org.apache.http.Header;\n import org.apache.http.HttpEntity;\n+import org.apache.http.HttpHost;\n import org.apache.http.HttpResponse;\n import org.apache.http.ProtocolVersion;\n+import org.apache.http.auth.AuthScope;\n+import org.apache.http.client.AuthCache;\n import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.client.protocol.ClientContext;\n import org.apache.http.entity.BasicHttpEntity;\n+import org.apache.http.impl.auth.BasicScheme;\n+import org.apache.http.impl.client.BasicAuthCache;\n import org.apache.http.message.BasicHttpResponse;\n+import org.apache.http.protocol.BasicHttpContext;\n import org.apache.syncope.client.http.PreemptiveAuthHttpRequestFactory;\n import org.apache.syncope.console.SyncopeSession;\n import org.apache.wicket.util.lang.Args;\n@@ -80,18 +87,26 @@ private void execute() {\n             return;\n         }\n \n+        final AuthScope scope = ((PreemptiveAuthHttpRequestFactory) SyncopeSession.get().getRestTemplate().\n+                getRequestFactory()).getAuthScope();\n+        final HttpHost targetHost = new HttpHost(scope.getHost(), scope.getPort(), scope.getScheme());\n+        BasicHttpContext localcontext = new BasicHttpContext();\n+        // Generate BASIC scheme object and add it to the local auth cache\n+        AuthCache authCache = new BasicAuthCache();\n+        authCache.put(targetHost, new BasicScheme());\n+        localcontext.setAttribute(ClientContext.AUTH_CACHE, authCache);\n+\n         HttpGet getMethod = new HttpGet(this.uri);\n         HttpResponse response;\n-\n         try {\n             response = ((PreemptiveAuthHttpRequestFactory) SyncopeSession.get().getRestTemplate().getRequestFactory()).\n-                    getHttpClient().execute(getMethod);\n+                    getHttpClient().execute(targetHost, getMethod, localcontext);\n         } catch (Exception e) {\n             LOG.error(\"Unexpected exception while executing HTTP method to {}\", this.uri, e);\n             response = buildFakeResponse(e.getMessage());\n         }\n         if (response.getStatusLine().getStatusCode() != 200) {\n-            LOG.error(\"Unsuccessful HTTP method to {}\", this.uri);\n+            LOG.error(\"Unsuccessful HTTP method to {} {}\", this.uri, response);\n             response = buildFakeResponse(\"HTTP status \" + response.getStatusLine().getStatusCode());\n         }\n "},{"sha":"ee262e96ae5132aff68fc1cfaf4a58772648ab94","filename":"console/src/main/java/org/apache/syncope/console/pages/Configuration.java","status":"modified","additions":18,"deletions":18,"changes":36,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/87a99779601bf0a417a5abf944a3530f6eaefa2d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/87a99779601bf0a417a5abf944a3530f6eaefa2d/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=87a99779601bf0a417a5abf944a3530f6eaefa2d","patch":"@@ -26,6 +26,24 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.client.to.ConfigurationTO;\n+import org.apache.syncope.client.to.LoggerTO;\n+import org.apache.syncope.client.to.NotificationTO;\n+import org.apache.syncope.client.to.WorkflowDefinitionTO;\n+import org.apache.syncope.client.validation.SyncopeClientCompositeErrorException;\n+import org.apache.syncope.console.commons.Constants;\n+import org.apache.syncope.console.commons.HttpResourceStream;\n+import org.apache.syncope.console.commons.PreferenceManager;\n+import org.apache.syncope.console.commons.SortableDataProviderComparator;\n+import org.apache.syncope.console.pages.panels.PoliciesPanel;\n+import org.apache.syncope.console.rest.ConfigurationRestClient;\n+import org.apache.syncope.console.rest.LoggerRestClient;\n+import org.apache.syncope.console.rest.NotificationRestClient;\n+import org.apache.syncope.console.rest.WorkflowRestClient;\n+import org.apache.syncope.console.wicket.markup.html.form.ActionLink;\n+import org.apache.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n+import org.apache.syncope.types.PolicyType;\n+import org.apache.syncope.types.SyncopeLoggerLevel;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n@@ -60,24 +78,6 @@\n import org.apache.wicket.request.resource.ContentDisposition;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.LoggerFactory;\n-import org.apache.syncope.client.to.ConfigurationTO;\n-import org.apache.syncope.client.to.LoggerTO;\n-import org.apache.syncope.client.to.NotificationTO;\n-import org.apache.syncope.client.to.WorkflowDefinitionTO;\n-import org.apache.syncope.client.validation.SyncopeClientCompositeErrorException;\n-import org.apache.syncope.console.commons.Constants;\n-import org.apache.syncope.console.commons.HttpResourceStream;\n-import org.apache.syncope.console.commons.PreferenceManager;\n-import org.apache.syncope.console.commons.SortableDataProviderComparator;\n-import org.apache.syncope.console.pages.panels.PoliciesPanel;\n-import org.apache.syncope.console.rest.ConfigurationRestClient;\n-import org.apache.syncope.console.rest.LoggerRestClient;\n-import org.apache.syncope.console.rest.NotificationRestClient;\n-import org.apache.syncope.console.rest.WorkflowRestClient;\n-import org.apache.syncope.console.wicket.markup.html.form.ActionLink;\n-import org.apache.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n-import org.apache.syncope.types.PolicyType;\n-import org.apache.syncope.types.SyncopeLoggerLevel;\n \n /**\n  * Configurations WebPage."}]}