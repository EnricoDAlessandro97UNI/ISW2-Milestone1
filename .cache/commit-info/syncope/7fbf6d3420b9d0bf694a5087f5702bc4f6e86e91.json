{"sha":"7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjdmYmY2ZDM0MjBiOWQwYmY2OTRhNTA4N2Y1NzAyYmM0ZjZlODZlOTE=","commit":{"author":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-01-29T13:50:27Z"},"committer":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-01-29T13:50:27Z"},"message":"editModalPage linked, directly, to username\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1439892 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d8655d4b21aeceadc479ac7ea9ef8fc2bf1e48fd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d8655d4b21aeceadc479ac7ea9ef8fc2bf1e48fd"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/comments","author":null,"committer":null,"parents":[{"sha":"9693806769d5476ffad2e8322ddf75014539fbb8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9693806769d5476ffad2e8322ddf75014539fbb8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9693806769d5476ffad2e8322ddf75014539fbb8"}],"stats":{"total":71,"additions":26,"deletions":45},"files":[{"sha":"be21fbf5825c91acb7bb7981990467fef5316dfc","filename":"console/src/main/java/org/apache/syncope/console/pages/BasePage.java","status":"modified","additions":23,"deletions":34,"changes":57,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java?ref=7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","patch":"@@ -22,22 +22,17 @@\n import org.apache.syncope.console.SyncopeApplication;\n import org.apache.syncope.console.SyncopeSession;\n import org.apache.syncope.console.rest.UserRestClient;\n-import org.apache.syncope.console.wicket.markup.html.form.LinkPanel;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.IAjaxIndicatorAware;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.behavior.Behavior;\n-import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxLink;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.link.BookmarkablePageLink;\n-import org.apache.wicket.markup.html.panel.Fragment;\n-import org.apache.wicket.markup.html.panel.Panel;\n-import org.apache.wicket.model.ResourceModel;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n@@ -110,43 +105,37 @@ public void onComponentTag(final Component component, final ComponentTag tag) {\n         editProfileModalWin.setCookieName(\"edit-profile-modal\");\n         add(editProfileModalWin);\n \n-        add(new Label(\"username\", SyncopeSession.get().getUserId()));\n+        final AjaxLink editProfileLink = new AjaxLink(\"editProfileLink\") {\n \n-        Fragment editProfileFrag;\n-        if (\"admin\".equals(SyncopeSession.get().getUserId())) {\n-            editProfileFrag = new Fragment(\"editProfile\", \"adminEmptyFrag\", this);\n-        } else {\n-            final UserTO userTO = SyncopeSession.get().isAuthenticated()\n-                    ? userRestClient.readProfile()\n-                    : new UserTO();\n-\n-            editProfileFrag = new Fragment(\"editProfile\", \"editProfileFrag\", this);\n+            private static final long serialVersionUID = -7978723352517770644L;\n \n-            final AjaxLink editProfileLink = new IndicatingAjaxLink(\"link\") {\n+            @Override\n+            public void onClick(AjaxRequestTarget target) {\n+                final UserTO userTO = SyncopeSession.get().isAuthenticated()\n+                        ? userRestClient.readProfile()\n+                        : new UserTO();\n \n-                private static final long serialVersionUID = -7978723352517770644L;\n+                editProfileModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    private static final long serialVersionUID = -7834632442532690940L;\n \n-                @Override\n-                public void onClick(final AjaxRequestTarget target) {\n-                    editProfileModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    @Override\n+                    public Page createPage() {\n+                        return new UserRequestModalPage(BasePage.this.getPageReference(), editProfileModalWin,\n+                                userTO, UserModalPage.Mode.SELF);\n+                    }\n+                });\n \n-                        @Override\n-                        public Page createPage() {\n-                            return new UserRequestModalPage(BasePage.this.getPageReference(), editProfileModalWin,\n-                                    userTO, UserModalPage.Mode.SELF);\n-                        }\n-                    });\n+                editProfileModalWin.show(target);\n+            }\n+        };\n \n-                    editProfileModalWin.show(target);\n-                }\n-            };\n-            editProfileLink.add(new Label(\"linkTitle\", getString(\"editProfile\")));\n+        editProfileLink.add(new Label(\"username\", SyncopeSession.get().getUserId()));\n \n-            Panel panel = new LinkPanel(\"editProfile\", new ResourceModel(\"editProfile\"));\n-            panel.add(editProfileLink);\n-            editProfileFrag.add(panel);\n+        if (\"admin\".equals(SyncopeSession.get().getUserId())) {\n+            editProfileLink.setEnabled(false);\n         }\n-        add(editProfileFrag);\n+\n+        add(editProfileLink);\n     }\n \n     @Override"},{"sha":"1b44d074ec94229733dc92921ea6d1c7878410c2","filename":"console/src/main/resources/org/apache/syncope/console/pages/BasePage.html","status":"modified","additions":3,"deletions":9,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.html?ref=7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","patch":"@@ -122,15 +122,9 @@\n         <li style=\"float:right;width:auto;text-align:right;\">\n           <a href=\"#\" wicket:id=\"logout\"><img src=\"img/menu/logout.png\" alt=\"Logout\" width=\"80\" height=\"80\" /><br /></a>\n           <div style=\"display: table-row;\">\n-            <div id=\"username\" wicket:id=\"username\" style=\"padding-right: 5px;width: 100px;cursor: pointer;display: table-cell;\"/>\n-            <span wicket:id=\"editProfile\"/>\n-\n-            <wicket:fragment wicket:id=\"adminEmptyFrag\"/>\n-            <wicket:fragment wicket:id=\"editProfileFrag\">\n-              <br/>\n-              <span id=\"editProfile\" wicket:id=\"editProfile\" \n-                    style=\"cursor: pointer;background-color: #446633;padding-left: 9px;padding-right: 9px;\"/>\n-            </wicket:fragment>\n+            <div id=\"username\" style=\"padding-right: 5px;width: 100px;cursor: pointer;display: table-cell;\">\n+              <a href=\"#\" wicket:id=\"editProfileLink\"><span wicket:id=\"username\"/></a>\n+            </div>\n             <div>\n               <div wicket:id=\"infoModal\"/>\n               <a wicket:id=\"infoLink\" style=\"vertical-align: middle;\"><img src=\"img/info.png\" alt=\"info\" style=\"padding-right: 10px;\"/></a>"},{"sha":"c40d8a562647b135a01e613bf77d66e572c86692","filename":"console/src/main/resources/org/apache/syncope/console/pages/BasePage.properties","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.properties?ref=7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","patch":"@@ -16,5 +16,4 @@\n # under the License.\n displayRows=Rows to display:\n home=Home\n-editProfile=Edit profile\n version=VERSION"},{"sha":"8560ce7304f21c139fe2427bd915218b90a51d0a","filename":"console/src/main/resources/org/apache/syncope/console/pages/BasePage_it.properties","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage_it.properties?ref=7fbf6d3420b9d0bf694a5087f5702bc4f6e86e91","patch":"@@ -16,5 +16,4 @@\n # under the License.\n displayRows=Righe per pagina:\n home=Home\n-editProfile=Modifica profile\n version=VERSIONE"}]}