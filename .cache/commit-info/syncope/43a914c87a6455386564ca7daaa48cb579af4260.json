{"sha":"43a914c87a6455386564ca7daaa48cb579af4260","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQzYTkxNGM4N2E2NDU1Mzg2NTY0Y2E3ZGFhYTQ4Y2I1NzlhZjQyNjA=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-08T13:11:29Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-08T13:11:29Z"},"message":"[SYNCOPE-1421] Fix build","tree":{"sha":"6e04556ab7caa8f09f22cafe4d2bc3dac561c361","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6e04556ab7caa8f09f22cafe4d2bc3dac561c361"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/43a914c87a6455386564ca7daaa48cb579af4260","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/43a914c87a6455386564ca7daaa48cb579af4260","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/43a914c87a6455386564ca7daaa48cb579af4260","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/43a914c87a6455386564ca7daaa48cb579af4260/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"afdbbe41f289db55a5e6cfc045ade622faea4618","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/afdbbe41f289db55a5e6cfc045ade622faea4618","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/afdbbe41f289db55a5e6cfc045ade622faea4618"}],"stats":{"total":43,"additions":13,"deletions":30},"files":[{"sha":"373f50cf26aa9787cf675fdbe0f69f55ee1f80bc","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/BinaryFieldPanel.java","status":"modified","additions":2,"deletions":3,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java?ref=43a914c87a6455386564ca7daaa48cb579af4260","patch":"@@ -18,8 +18,6 @@\n  */\n package org.apache.syncope.client.console.wicket.markup.html.form;\n \n-import org.apache.syncope.client.ui.commons.markup.html.form.FieldPanel;\n-\n import static de.agilecoders.wicket.jquery.JQuery.$;\n \n import de.agilecoders.wicket.extensions.markup.html.bootstrap.form.fileinput.BootstrapFileInputField;\n@@ -36,9 +34,10 @@\n import org.apache.syncope.client.console.SyncopeWebApplication;\n import org.apache.syncope.client.console.SyncopeConsoleSession;\n import org.apache.syncope.client.console.commons.Constants;\n-import org.apache.syncope.client.ui.commons.HttpResourceStream;\n import org.apache.syncope.client.console.commons.PreviewUtils;\n import org.apache.syncope.client.console.pages.BasePage;\n+import org.apache.syncope.client.ui.commons.HttpResourceStream;\n+import org.apache.syncope.client.ui.commons.markup.html.form.FieldPanel;\n import org.apache.syncope.client.ui.commons.markup.html.form.preview.AbstractBinaryPreviewer;\n import org.apache.syncope.client.ui.commons.markup.html.form.BaseBinaryFieldPanel;\n import org.apache.wicket.Component;"},{"sha":"23c55a1bca049705514ca9ae9a3d2642745fd7ad","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/commons/PreviewUtils.java","status":"modified","additions":4,"deletions":8,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fcommons%2FPreviewUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fcommons%2FPreviewUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fcommons%2FPreviewUtils.java?ref=43a914c87a6455386564ca7daaa48cb579af4260","patch":"@@ -22,19 +22,15 @@\n import org.apache.syncope.client.enduser.init.ClassPathScanImplementationLookup;\n import org.apache.syncope.client.ui.commons.markup.html.form.preview.AbstractBinaryPreviewer;\n import org.apache.syncope.client.ui.commons.markup.html.form.preview.DefaultPreviewer;\n-import org.apache.wicket.spring.injection.annot.SpringBean;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n import org.springframework.util.ClassUtils;\n \n @Component\n-public final class PreviewUtils {\n+public class PreviewUtils {\n \n-    public static PreviewUtils getInstance() {\n-        return new PreviewUtils();\n-    }\n-\n-    @SpringBean\n-    protected ClassPathScanImplementationLookup lookup;\n+    @Autowired\n+    private ClassPathScanImplementationLookup lookup;\n \n     public AbstractBinaryPreviewer getDefaultPreviewer(final String mimeType) {\n         return new DefaultPreviewer(\"previewer\", mimeType);"},{"sha":"f097d169203cafeee869ee92786fa9303d7c8f6b","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/markup/html/form/BinaryFieldPanel.java","status":"modified","additions":7,"deletions":6,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43a914c87a6455386564ca7daaa48cb579af4260/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmarkup%2Fhtml%2Fform%2FBinaryFieldPanel.java?ref=43a914c87a6455386564ca7daaa48cb579af4260","patch":"@@ -18,8 +18,6 @@\n  */\n package org.apache.syncope.client.enduser.markup.html.form;\n \n-import org.apache.syncope.client.ui.commons.markup.html.form.FieldPanel;\n-\n import static de.agilecoders.wicket.jquery.JQuery.$;\n \n import de.agilecoders.wicket.extensions.markup.html.bootstrap.form.fileinput.BootstrapFileInputField;\n@@ -38,8 +36,9 @@\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.syncope.client.enduser.commons.PreviewUtils;\n import org.apache.syncope.client.ui.commons.Constants;\n-import org.apache.syncope.client.ui.commons.markup.html.form.preview.AbstractBinaryPreviewer;\n import org.apache.syncope.client.ui.commons.markup.html.form.BaseBinaryFieldPanel;\n+import org.apache.syncope.client.ui.commons.markup.html.form.FieldPanel;\n+import org.apache.syncope.client.ui.commons.markup.html.form.preview.AbstractBinaryPreviewer;\n import org.apache.syncope.client.ui.commons.pages.BaseWebPage;\n import org.apache.wicket.Component;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -58,13 +57,15 @@\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.util.ListModel;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.apache.wicket.util.lang.Bytes;\n \n public class BinaryFieldPanel extends BaseBinaryFieldPanel {\n \n     private static final long serialVersionUID = 6264462604183088931L;\n \n-    private static final PreviewUtils PREVIEW_UTILS = PreviewUtils.getInstance();\n+    @SpringBean\n+    private PreviewUtils previewUtils;\n \n     private final String mimeType;\n \n@@ -101,7 +102,7 @@ public BinaryFieldPanel(\n         this.fileKey = fileKey;\n         this.mimeType = mimeType;\n \n-        previewer = PREVIEW_UTILS.getPreviewer(mimeType);\n+        previewer = previewUtils.getPreviewer(mimeType);\n \n         maxUploadSize = SyncopeWebApplication.get().getMaxUploadFileSizeMB() == null\n                 ? null\n@@ -277,7 +278,7 @@ public FieldPanel<String> setNewModel(final IModel<String> model) {\n         if (StringUtils.isNotBlank(modelObj)) {\n             final Component panelPreview;\n             if (previewer == null) {\n-                panelPreview = PREVIEW_UTILS.getDefaultPreviewer(mimeType);\n+                panelPreview = previewUtils.getDefaultPreviewer(mimeType);\n             } else {\n                 panelPreview = previewer.preview(modelObj);\n             }"},{"sha":"055a67cbe4b83c26ed9eb1b7c9e23e0aea23e58f","filename":"pom.xml","status":"modified","additions":0,"deletions":13,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/43a914c87a6455386564ca7daaa48cb579af4260/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/43a914c87a6455386564ca7daaa48cb579af4260/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=43a914c87a6455386564ca7daaa48cb579af4260","patch":"@@ -514,9 +514,6 @@ under the License.\n \n     <tomcat.version>9.0.16</tomcat.version>\n \n-    <nodejs.version>v8.11.4</nodejs.version>    \n-    <protractor.version>5.4.0</protractor.version>    \n-\n     <docker.postgresql.version>11.1</docker.postgresql.version>\n     <docker.mariadb.version>10.4</docker.mariadb.version>\n \n@@ -2122,16 +2119,6 @@ under the License.\n           <version>4.1</version>\n         </plugin>\n \n-        <plugin>\n-          <groupId>com.github.klieber</groupId>\n-          <artifactId>phantomjs-maven-plugin</artifactId>\n-          <version>0.7</version>\n-        </plugin>      \n-        <plugin>\n-          <groupId>com.github.eirslett</groupId>\n-          <artifactId>frontend-maven-plugin</artifactId>\n-          <version>1.7.5</version>\n-        </plugin>\n         <plugin>\n           <groupId>org.codehaus.mojo</groupId>\n           <artifactId>exec-maven-plugin</artifactId>"}]}