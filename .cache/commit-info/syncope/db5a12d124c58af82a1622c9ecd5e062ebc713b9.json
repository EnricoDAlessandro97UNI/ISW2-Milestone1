{"sha":"db5a12d124c58af82a1622c9ecd5e062ebc713b9","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmRiNWExMmQxMjRjNThhZjgyYTE2MjJjOWVjZDVlMDYyZWJjNzEzYjk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-04-02T16:17:38Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2012-04-02T16:17:38Z"},"message":"[SYNCOPE-29] Updating to cargo 1.2.1 and JBoss 7.1.1-Final\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1308416 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"3b8bed2a2d21dbd3f16967656e03b90bfd9e9543","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/3b8bed2a2d21dbd3f16967656e03b90bfd9e9543"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/db5a12d124c58af82a1622c9ecd5e062ebc713b9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/db5a12d124c58af82a1622c9ecd5e062ebc713b9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/db5a12d124c58af82a1622c9ecd5e062ebc713b9","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/db5a12d124c58af82a1622c9ecd5e062ebc713b9/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"7b2b2cfbe871e6e89467466cb112b2271d506be3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7b2b2cfbe871e6e89467466cb112b2271d506be3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7b2b2cfbe871e6e89467466cb112b2271d506be3"}],"stats":{"total":103,"additions":30,"deletions":73},"files":[{"sha":"d4578dc63b9502a3e1a7ecee0b9288121b0a645e","filename":"core/pom.xml","status":"modified","additions":6,"deletions":58,"changes":64,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -498,7 +498,7 @@ under the License.\n                 <groupId>org.codehaus.groovy</groupId>\n                 <artifactId>groovy-all</artifactId>\n               </dependency>\n-            </dependencies>\n+            </dependencies>            \n           </container>\n           <configuration>\n             <type>standalone</type>\n@@ -521,6 +521,7 @@ under the License.\n               <deployable>\n                 <location>${cargo.run.dir}</location>\n                 <pingURL>http://localhost:${cargo.servlet.port}/syncope/rest/schema/user/list.xml</pingURL>\n+                <pingTimeout>60000</pingTimeout>\n                 <properties>\n                   <context>syncope</context>\n                 </properties>\n@@ -1029,58 +1030,6 @@ under the License.\n             </executions>\n           </plugin>\n \n-          <!--<plugin>\n-            <groupId>org.codehaus.mojo</groupId>\n-            <artifactId>exec-maven-plugin</artifactId>\n-            <inherited>true</inherited>\n-            <executions>\n-              <execution>\n-                <id>start-derby</id>\n-                <phase>pre-integration-test</phase>\n-                <goals>\n-                  <goal>exec</goal>\n-                </goals>\n-                <configuration>\n-                  <executable>java</executable>\n-                  <classpathScope>test</classpathScope>\n-                  <arguments>\n-                    <argument>-classpath</argument>\n-                    <classpath>\n-                      <dependency>org.apache.derby:derby</dependency>\n-                      <dependency>org.apache.derby:derbynet</dependency>\n-                    </classpath>\n-                    <argument>org.apache.derby.drda.NetworkServerControl</argument>\n-                    <argument>start</argument>\n-                    <argument>-noSecurityManager</argument>\n-                  </arguments>\n-                  <workingDirectory>${project.build.directory}/target/derby</workingDirectory>\n-                </configuration>\n-              </execution>\n-              <execution>\n-                <id>stop-derby</id>\n-                <phase>post-integration-test</phase>\n-                <goals>\n-                  <goal>exec</goal>\n-                </goals>\n-                <configuration>\n-                  <executable>java</executable>\n-                  <classpathScope>test</classpathScope>\n-                  <arguments>\n-                    <argument>-classpath</argument>\n-                    <classpath>\n-                      <dependency>org.apache.derby:derby</dependency>\n-                      <dependency>org.apache.derby:derbynet</dependency>\n-                    </classpath>\n-                    <argument>org.apache.derby.drda.NetworkServerControl</argument>\n-                    <argument>shutdown</argument>\n-                    <argument>-noSecurityManager</argument>\n-                  </arguments>\n-                  <workingDirectory>${project.build.directory}/target/derby</workingDirectory>\n-                </configuration>\n-              </execution>\n-            </executions>\n-          </plugin>-->\n-          \n           <plugin>\n             <groupId>org.codehaus.cargo</groupId>\n             <artifactId>cargo-maven2-plugin</artifactId>\n@@ -1104,7 +1053,7 @@ under the License.\n \n     <profile>\n       <id>jboss-it</id>\n-\n+      \n       <dependencies>\n         <dependency>\n           <groupId>org.apache.syncope</groupId>\n@@ -1151,7 +1100,7 @@ under the License.\n             <executions>\n               <execution>\n                 <id>enhance-hibernate</id>\n-                <phase>process-classes</phase>\n+                <phase>test-compile</phase>\n                 <goals>\n                   <goal>exec</goal>\n                 </goals>\n@@ -1197,7 +1146,7 @@ under the License.\n               <skipTests>true</skipTests>\n             </configuration>\n           </plugin>\n-\n+          \n           <plugin>\n             <groupId>org.apache.maven.plugins</groupId>\n             <artifactId>maven-war-plugin</artifactId>\n@@ -1215,7 +1164,7 @@ under the License.\n               <container>\n                 <containerId>jboss71x</containerId>\n                 <zipUrlInstaller>\n-                  <url>http://download.jboss.org/jbossas/7.1/jboss-as-7.1.0.Final/jboss-as-7.1.0.Final.zip</url>\n+                  <url>http://download.jboss.org/jbossas/7.1/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final.zip</url>\n                   <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n                   <extractDir>${java.io.tmpdir}</extractDir>\n                 </zipUrlInstaller>\n@@ -1234,7 +1183,6 @@ under the License.\n                 <phase>pre-integration-test</phase>\n                 <goals>\n                   <goal>start</goal>\n-                  <goal>deploy</goal>\n                 </goals>\n               </execution>\n               <execution>"},{"sha":"9e9219dbf241e4093285a8d150e17f94e0ee99c8","filename":"core/src/main/java/org/syncope/core/persistence/beans/ReportExec.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FReportExec.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FReportExec.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fpersistence%2Fbeans%2FReportExec.java?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -22,7 +22,9 @@\n import javax.persistence.Entity;\n import javax.persistence.FetchType;\n import javax.persistence.Id;\n+import javax.persistence.Lob;\n import javax.persistence.ManyToOne;\n+import org.apache.commons.lang.ArrayUtils;\n import org.syncope.types.ReportExecStatus;\n \n @Entity\n@@ -42,8 +44,9 @@ public class ReportExec extends AbstractExec {\n     /**\n      * Report execution result, stored as an XML stream.\n      */\n+    @Lob\n     @Basic(fetch = FetchType.LAZY)\n-    private byte[] execResult;\n+    private Byte[] execResult;\n \n     public Long getId() {\n         return id;\n@@ -58,11 +61,11 @@ public void setReport(Report report) {\n     }\n \n     public byte[] getExecResult() {\n-        return execResult;\n+        return execResult == null ? null : ArrayUtils.toPrimitive(execResult);\n     }\n \n     public void setExecResult(byte[] execResult) {\n-        this.execResult = execResult;\n+        this.execResult = execResult == null ? null : ArrayUtils.toObject(execResult);\n     }\n \n     public void setStatus(ReportExecStatus status) {"},{"sha":"9a8ace61f7e8b56fc285b73b11e7d63785fe2508","filename":"core/src/main/webapp/WEB-INF/jboss-deployment-structure.xml","status":"modified","additions":4,"deletions":5,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -21,13 +21,12 @@ under the License.\n <jboss-deployment-structure xmlns=\"urn:jboss:deployment-structure:1.0\">\n   <deployment>\n     <dependencies>\n-      <module name=\"org.hibernate\" />\n-      <module name=\"org.apache.xerces\" />\n-      <module name=\"org.apache.xalan\" />\n+      <module name=\"org.hibernate\"/>\n+      <module name=\"org.apache.xalan\"/>\n     </dependencies>\n     <exclusions>\n-      <module name=\"org.slf4j\" />\n-      <module name=\"org.slf4j.impl\" />\n+      <module name=\"org.slf4j\"/>\n+      <module name=\"org.slf4j.impl\"/>\n     </exclusions>\n   </deployment>\n </jboss-deployment-structure>"},{"sha":"91bab97205043d155b5669e5c1a6e439ee019d8f","filename":"core/src/test/java/org/syncope/core/rest/ReportTestITCase.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2FReportTestITCase.java?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -101,8 +101,10 @@ public void create() {\n         report = restTemplate.postForObject(BASE_URL + \"report/create\", report, ReportTO.class);\n         assertNotNull(report);\n \n-        ReportTO actual = restTemplate.getForObject(BASE_URL + \"report/read/{reportId}\", ReportTO.class, report.getId());\n+        ReportTO actual = restTemplate.getForObject(BASE_URL + \"report/read/{reportId}\", ReportTO.class,\n+                report.getId());\n         assertNotNull(actual);\n+\n         assertEquals(actual, report);\n     }\n "},{"sha":"e4878cd9d032739fba4cb272cbde818840562d98","filename":"core/src/test/resources/jboss/persistence.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -21,3 +21,4 @@ jpa.password=\n jpa.dialect=org.hibernate.dialect.H2Dialect\n quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n quartz.sql=tables_h2.sql\n+logback.sql=h2.sql"},{"sha":"da65d9e2a4de8acc1a20af903b050ee5c6e81afc","filename":"hibernate-enhancer/src/main/java/org/syncope/hibernate/HibernateEnhancer.java","status":"modified","additions":8,"deletions":4,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/hibernate-enhancer%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fhibernate%2FHibernateEnhancer.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/hibernate-enhancer%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fhibernate%2FHibernateEnhancer.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/hibernate-enhancer%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fhibernate%2FHibernateEnhancer.java?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -79,12 +79,16 @@ public static void main(final String[] args) throws Exception {\n \n                 for (Field field : entity.getDeclaredFields()) {\n                     AnnotationsAttribute annotAttr = null;\n-                    // Add Hibernate's @Type to each entity String field labeled @Lob,\n-                    // in order to enable PostgreSQL's LOB support.\n+                    // Add Hibernate's @Type to each entity String field annotated with @Lob\n                     if (field.isAnnotationPresent(Lob.class)) {\n                         Annotation typeAnnot = new Annotation(\"org.hibernate.annotations.Type\", constPool);\n-                        typeAnnot.addMemberValue(\"type\",\n-                                new StringMemberValue(\"org.hibernate.type.StringClobType\", constPool));\n+                        if (String.class.equals(field.getType())) {\n+                            typeAnnot.addMemberValue(\"type\",\n+                                    new StringMemberValue(\"org.hibernate.type.StringClobType\", constPool));\n+                        } else if (field.getType().isArray()) {\n+                            typeAnnot.addMemberValue(\"type\",\n+                                    new StringMemberValue(\"org.hibernate.type.ByteArrayBlobType\", constPool));\n+                        }\n \n                         annotAttr = new AnnotationsAttribute(constPool, AnnotationsAttribute.visibleTag);\n                         annotAttr.addAnnotation(typeAnnot);"},{"sha":"315ca0b5f38bf978d16e6c75c18c9059e9922211","filename":"parent/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/db5a12d124c58af82a1622c9ecd5e062ebc713b9/parent%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/db5a12d124c58af82a1622c9ecd5e062ebc713b9/parent%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/parent%2Fpom.xml?ref=db5a12d124c58af82a1622c9ecd5e062ebc713b9","patch":"@@ -234,7 +234,7 @@ under the License.\n \n     <groovy.version>1.6.9</groovy.version>\n \n-    <h2.version>1.3.164</h2.version>\n+    <h2.version>1.3.165</h2.version>\n \n     <logback.version>1.0.1</logback.version>\n     <slf4j.version>1.6.4</slf4j.version>\n@@ -824,7 +824,7 @@ under the License.\n         <plugin>\n           <groupId>org.codehaus.cargo</groupId>\n           <artifactId>cargo-maven2-plugin</artifactId>\n-          <version>1.2.0</version>\n+          <version>1.2.1</version>\n           <configuration>\n             <container>\n               <containerId>tomcat7x</containerId>"}]}