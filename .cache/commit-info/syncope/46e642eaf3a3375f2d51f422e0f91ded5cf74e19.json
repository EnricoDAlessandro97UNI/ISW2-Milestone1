{"sha":"46e642eaf3a3375f2d51f422e0f91ded5cf74e19","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ2ZTY0MmVhZjNhMzM3NWYyZDUxZjQyMmUwZjkxZGVkNWNmNzRlMTk=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-07-08T11:20:23Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-07-08T11:20:23Z"},"message":"[SYNCOPE-898] provides the possibility to specify the destination realm","tree":{"sha":"ed05b777feaa1d2654224d5a7ea8e62c61b2796b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ed05b777feaa1d2654224d5a7ea8e62c61b2796b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/46e642eaf3a3375f2d51f422e0f91ded5cf74e19","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/46e642eaf3a3375f2d51f422e0f91ded5cf74e19","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/46e642eaf3a3375f2d51f422e0f91ded5cf74e19","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"0656bc07fc99d8fa9d87bf407f7641c4fa221ad8","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0656bc07fc99d8fa9d87bf407f7641c4fa221ad8","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0656bc07fc99d8fa9d87bf407f7641c4fa221ad8"}],"stats":{"total":216,"additions":156,"deletions":60},"files":[{"sha":"06dcb13cdf1cfc80fe37a955245d29fa26ded73e","filename":"client/console/src/main/java/org/apache/syncope/client/console/commons/AnyTypeComparator.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FAnyTypeComparator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FAnyTypeComparator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FAnyTypeComparator.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -18,12 +18,15 @@\n  */\n package org.apache.syncope.client.console.commons;\n \n+import java.io.Serializable;\n import java.util.Comparator;\n import org.apache.commons.collections4.ComparatorUtils;\n import org.apache.syncope.common.lib.to.AnyTypeTO;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n \n-public class AnyTypeComparator implements Comparator<AnyTypeTO> {\n+public class AnyTypeComparator implements Comparator<AnyTypeTO>, Serializable {\n+\n+    private static final long serialVersionUID = -8227715253094467138L;\n \n     @Override\n     public int compare(final AnyTypeTO o1, final AnyTypeTO o2) {\n@@ -41,5 +44,4 @@ public int compare(final AnyTypeTO o1, final AnyTypeTO o2) {\n         }\n         return ComparatorUtils.<String>naturalComparator().compare(o1.getKey(), o2.getKey());\n     }\n-\n }"},{"sha":"b45633f306ae258c643557b65915f1dae724daf5","filename":"client/console/src/main/java/org/apache/syncope/client/console/commons/GroupComparator.java","status":"added","additions":37,"deletions":0,"changes":37,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FGroupComparator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FGroupComparator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fcommons%2FGroupComparator.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.commons;\n+\n+import java.io.Serializable;\n+import java.util.Comparator;\n+import org.apache.syncope.common.lib.to.GroupTO;\n+\n+public class GroupComparator implements Comparator<GroupTO>, Serializable {\n+\n+    private static final long serialVersionUID = 3584905855352863080L;\n+\n+    @Override\n+    public int compare(final GroupTO left, final GroupTO right) {\n+        return left == null || left.getName() == null\n+                ? -1\n+                : right == null || right.getName() == null\n+                ? 1\n+                : left.getName().compareTo(right.getName());\n+    }\n+}"},{"sha":"c4f78c9eaac44144d0578f8f4aad249ab749e091","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/GroupRestClient.java","status":"modified","additions":19,"deletions":5,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FGroupRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FGroupRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FGroupRestClient.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -18,9 +18,13 @@\n  */\n package org.apache.syncope.client.console.rest;\n \n+import static org.apache.syncope.client.console.rest.BaseRestClient.getService;\n+\n+import java.util.ArrayList;\n import java.util.List;\n import org.apache.syncope.common.lib.patch.GroupPatch;\n import org.apache.syncope.common.lib.to.GroupTO;\n+import org.apache.syncope.common.lib.to.PagedResult;\n import org.apache.syncope.common.lib.types.BulkMembersActionType;\n import org.apache.syncope.common.rest.api.beans.AnyQuery;\n import org.apache.syncope.common.rest.api.service.AnyService;\n@@ -48,13 +52,23 @@ public int searchCount(final String realm, final String fiql, final String type)\n \n     @Override\n     public List<GroupTO> search(\n-            final String realm, final String fiql, final int page, final int size, final SortParam<String> sort,\n+            final String realm,\n+            final String fiql,\n+            final int page,\n+            final int size,\n+            final SortParam<String> sort,\n             final String type) {\n \n-        return getService(GroupService.class).\n-                search(new AnyQuery.Builder().realm(realm).fiql(fiql).page(page).size(size).\n-                        orderBy(toOrderBy(sort)).details(false).build()).\n-                getResult();\n+        List<GroupTO> result = new ArrayList<>();\n+        PagedResult<GroupTO> res;\n+        do {\n+            res = getService(GroupService.class).\n+                    search(new AnyQuery.Builder().realm(realm).fiql(fiql).page(page).size(size).\n+                    orderBy(toOrderBy(sort)).details(false).build());\n+            result.addAll(res.getResult());\n+        } while (page == -1 && size == -1 && res.getNext() != null);\n+\n+        return result;\n     }\n \n     public void bulkMembersAction(final String key, final BulkMembersActionType actionType) {"},{"sha":"53edb6e484780a8d0ed16c5ed97f8ac00d9a1888","filename":"client/console/src/main/java/org/apache/syncope/client/console/tasks/TemplatesTogglePanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTemplatesTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTemplatesTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FTemplatesTogglePanel.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -102,7 +102,7 @@ public TemplatesTogglePanel(final String targetId, final MarkupContainer contain\n             protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n                 try {\n                     final AjaxWizard.NewItemActionEvent<AnyTO> payload\n-                            = new AjaxWizard.NewItemActionEvent<AnyTO>(null, target);\n+                            = new AjaxWizard.NewItemActionEvent<>(null, target);\n \n                     payload.setResourceModel(new StringResourceModel(\"inner.template.edit\", container,\n                             Model.of(Pair.of(typeModel.getObject(), targetObject))).setDefaultValue("},{"sha":"dc4858643a08c7ac183e59254d695d5c920b551c","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/AnyObjectDetails.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectDetails.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -37,7 +37,7 @@ public AnyObjectDetails(\n             final boolean includeStatusPanel,\n             final PageReference pageRef) {\n \n-        super(wrapper, statusModel, includeStatusPanel, pageRef);\n+        super(wrapper, statusModel, templateMode, includeStatusPanel, pageRef);\n \n         AnyObjectTO anyObjectTO = wrapper.getInnerObject();\n "},{"sha":"da37ad5107e525ebe02bd6160b3f91e04eeff54e","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/AnyObjectTemplateWizardBuilder.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectTemplateWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectTemplateWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyObjectTemplateWizardBuilder.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -22,6 +22,7 @@\n import org.apache.syncope.client.console.layout.AnyObjectFormLayoutInfo;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n import org.apache.syncope.common.lib.to.AnyObjectTO;\n+import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.syncope.common.lib.to.TemplatableTO;\n import org.apache.wicket.PageReference;\n \n@@ -43,7 +44,10 @@ public AnyObjectTemplateWizardBuilder(\n         } else {\n             AnyObjectTO anyObjectTO = new AnyObjectTO();\n             anyObjectTO.setType(anyType);\n-            setItem(new AnyWrapper<>(new AnyObjectTO()));\n+            if (templatable instanceof RealmTO) {\n+                anyObjectTO.setRealm(RealmTO.class.cast(templatable).getFullPath());\n+            }\n+            setItem(new AnyWrapper<>(anyObjectTO));\n         }\n     }\n "},{"sha":"793ebc72b24fcd4fd0968e74151fbd3a21df3b2c","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/AnyWizardBuilder.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FAnyWizardBuilder.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -108,7 +108,7 @@ protected WizardModel buildModelSteps(final AnyWrapper<A> modelObject, final Wiz\n                 || formLayoutInfo instanceof AnyObjectFormLayoutInfo\n                 && AnyObjectFormLayoutInfo.class.cast(formLayoutInfo).isGroups()) {\n \n-            wizardModel.add(new Groups(modelObject.getInnerObject()));\n+            wizardModel.add(new Groups(modelObject.getInnerObject(), mode == AjaxWizard.Mode.TEMPLATE));\n         }\n \n         // attributes panel steps\n@@ -160,7 +160,11 @@ protected AnyWizardBuilder<A> addOptionalDetailsPanel(\n \n         if (modelObject.getInnerObject().getKey() != null) {\n             wizardModel.add(new Details<>(\n-                    modelObject, new ListModel<>(Collections.<StatusBean>emptyList()), true, pageRef));\n+                    modelObject,\n+                    new ListModel<>(Collections.<StatusBean>emptyList()),\n+                    mode == AjaxWizard.Mode.TEMPLATE,\n+                    true,\n+                    pageRef));\n         }\n         return this;\n     }"},{"sha":"483539a0b76bd9bb9ed441b9da8cef608d3ba4cd","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/Details.java","status":"modified","additions":14,"deletions":3,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -19,11 +19,14 @@\n package org.apache.syncope.client.console.wizards.any;\n \n import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.client.console.commons.status.StatusBean;\n+import org.apache.syncope.client.console.wicket.markup.html.form.AjaxTextFieldPanel;\n import org.apache.syncope.common.lib.to.AnyTO;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.extensions.wizard.WizardStep;\n import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.PropertyModel;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n@@ -40,19 +43,27 @@\n     public Details(\n             final AnyWrapper<T> wrapper,\n             final IModel<List<StatusBean>> statusModel,\n+            final boolean templateMode,\n             final boolean includeStatusPanel,\n             final PageReference pageRef) {\n \n         this.pageRef = pageRef;\n \n-        T anyTO = wrapper.getInnerObject();\n+        final T inner = wrapper.getInnerObject();\n \n-        statusPanel = new StatusPanel(\"status\", anyTO, statusModel, pageRef);\n+        final AjaxTextFieldPanel realm = new AjaxTextFieldPanel(\n+                \"destinationRealm\", \"destinationRealm\", new PropertyModel<String>(inner, \"realm\"), false);\n+        add(realm.setReadOnly(StringUtils.isNotEmpty(inner.getRealm())));\n+        if (templateMode) {\n+            realm.enableJexlHelp();\n+        }\n+        \n+        statusPanel = new StatusPanel(\"status\", inner, statusModel, pageRef);\n \n         add(statusPanel.setEnabled(includeStatusPanel).\n                 setVisible(includeStatusPanel).setRenderBodyOnly(true));\n \n-        add(getGeneralStatusInformation(\"generalStatusInformation\", anyTO).\n+        add(getGeneralStatusInformation(\"generalStatusInformation\", inner).\n                 setEnabled(includeStatusPanel).setVisible(includeStatusPanel).setRenderBodyOnly(true));\n     }\n "},{"sha":"9c1954121c29f6fece54b5ed8fd0780365dc6d25","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/GroupDetails.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupDetails.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -37,7 +37,7 @@ public GroupDetails(\n             final boolean includeStatusPanel,\n             final PageReference pageRef) {\n \n-        super(wrapper, statusModel, includeStatusPanel, pageRef);\n+        super(wrapper, statusModel, templateMode, includeStatusPanel, pageRef);\n \n         GroupTO groupTO = GroupWrapper.class.cast(wrapper).getInnerObject();\n "},{"sha":"cccc25f7ac8ff2e7273eadb275f47c267a8e056d","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/GroupTemplateWizardBuilder.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupTemplateWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupTemplateWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupTemplateWizardBuilder.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -22,6 +22,7 @@\n import org.apache.syncope.client.console.layout.GroupFormLayoutInfo;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n import org.apache.syncope.common.lib.to.GroupTO;\n+import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.syncope.common.lib.to.TemplatableTO;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n import org.apache.wicket.PageReference;\n@@ -40,7 +41,11 @@ public GroupTemplateWizardBuilder(\n         if (templatable.getTemplates().containsKey(AnyTypeKind.GROUP.name())) {\n             setItem(new GroupWrapper(GroupTO.class.cast(templatable.getTemplates().get(AnyTypeKind.GROUP.name()))));\n         } else {\n-            setItem(new GroupWrapper(new GroupTO()));\n+            GroupTO groupTO = new GroupTO();\n+            if (templatable instanceof RealmTO) {\n+                groupTO.setRealm(RealmTO.class.cast(templatable).getFullPath());\n+            }\n+            setItem(new GroupWrapper(groupTO));\n         }\n     }\n "},{"sha":"2e17763b53058d8b2ed7d9e098b07db0782930a8","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/Groups.java","status":"modified","additions":38,"deletions":37,"changes":75,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroups.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroups.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroups.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -48,7 +48,7 @@ public class Groups extends WizardStep {\n \n     private final GroupRestClient groupRestClient = new GroupRestClient();\n \n-    public <T extends AnyTO> Groups(final T anyTO) {\n+    public <T extends AnyTO> Groups(final T anyTO, final boolean templateMode) {\n         super();\n         setOutputMarkupId(true);\n \n@@ -57,31 +57,31 @@ public <T extends AnyTO> Groups(final T anyTO) {\n         AjaxPalettePanel.Builder<MembershipTO> builder = new AjaxPalettePanel.Builder<MembershipTO>().\n                 setRenderer(new IChoiceRenderer<MembershipTO>() {\n \n-                    private static final long serialVersionUID = -3086661086073628855L;\n+            private static final long serialVersionUID = -3086661086073628855L;\n \n-                    @Override\n-                    public Object getDisplayValue(final MembershipTO object) {\n-                        return object.getGroupName();\n-                    }\n+            @Override\n+            public Object getDisplayValue(final MembershipTO object) {\n+                return object.getGroupName();\n+            }\n \n-                    @Override\n-                    public String getIdValue(final MembershipTO object, final int index) {\n-                        return object.getGroupName();\n-                    }\n+            @Override\n+            public String getIdValue(final MembershipTO object, final int index) {\n+                return object.getGroupName();\n+            }\n \n-                    @Override\n-                    public MembershipTO getObject(\n-                            final String id, final IModel<? extends List<? extends MembershipTO>> choices) {\n+            @Override\n+            public MembershipTO getObject(\n+                    final String id, final IModel<? extends List<? extends MembershipTO>> choices) {\n \n-                        return IterableUtils.find(choices.getObject(), new Predicate<MembershipTO>() {\n+                return IterableUtils.find(choices.getObject(), new Predicate<MembershipTO>() {\n \n-                            @Override\n-                            public boolean evaluate(final MembershipTO object) {\n-                                return id.equalsIgnoreCase(object.getGroupName());\n-                            }\n-                        });\n+                    @Override\n+                    public boolean evaluate(final MembershipTO object) {\n+                        return id.equalsIgnoreCase(object.getGroupName());\n                     }\n                 });\n+            }\n+        });\n \n         add(builder.setAllowOrder(true).withFilter().build(\"groups\",\n                 new ListModel<>(GroupableRelatableTO.class.cast(anyTO).getMemberships()),\n@@ -93,12 +93,12 @@ public boolean evaluate(final MembershipTO object) {\n             public List<MembershipTO> execute(final String filter) {\n                 return CollectionUtils.collect(\n                         groupRestClient.search(\n-                                anyTO.getRealm(),\n-                                SyncopeClient.getGroupSearchConditionBuilder().\n-                                isAssignable().and().is(\"name\").equalTo(filter).query(),\n-                                -1, -1,\n-                                new SortParam<>(\"name\", true),\n-                                null),\n+                        anyTO.getRealm(),\n+                        SyncopeClient.getGroupSearchConditionBuilder().\n+                        isAssignable().and().is(\"name\").equalTo(filter).query(),\n+                        -1, -1,\n+                        new SortParam<>(\"name\", true),\n+                        null),\n                         new Transformer<GroupTO, MembershipTO>() {\n \n                     @Override\n@@ -112,27 +112,28 @@ public MembershipTO transform(final GroupTO input) {\n         }).hideLabel().setOutputMarkupId(true));\n \n         List<GroupTO> allGroups = groupRestClient.search(\n-                anyTO.getRealm(), null, -1, -1, new SortParam<>(\"name\", true), null);\n+                templateMode ? \"/\" : anyTO.getRealm(), null, -1, -1, new SortParam<>(\"name\", true), null);\n+\n         final Map<String, GroupTO> allGroupsByKey = new LinkedHashMap<>(allGroups.size());\n         for (GroupTO group : allGroups) {\n             allGroupsByKey.put(group.getKey(), group);\n         }\n         add(new AjaxPalettePanel.Builder<String>().setAllowOrder(true).build(\"dyngroups\",\n                 new ListModel<>(CollectionUtils.collect(GroupableRelatableTO.class.cast(anyTO).getDynGroups(),\n-                        new Transformer<String, String>() {\n+                new Transformer<String, String>() {\n \n-                    @Override\n-                    public String transform(final String input) {\n-                        return allGroupsByKey.get(input).getName();\n-                    }\n-                }, new ArrayList<String>())),\n+            @Override\n+            public String transform(final String input) {\n+                return allGroupsByKey.get(input).getName();\n+            }\n+        }, new ArrayList<String>())),\n                 new ListModel<>(CollectionUtils.collect(allGroups, new Transformer<GroupTO, String>() {\n \n-                    @Override\n-                    public String transform(final GroupTO input) {\n-                        return input.getName();\n-                    }\n-                }, new ArrayList<String>()))).\n+            @Override\n+            public String transform(final GroupTO input) {\n+                return input.getName();\n+            }\n+        }, new ArrayList<String>()))).\n                 hideLabel().setEnabled(false).setOutputMarkupId(true));\n     }\n }"},{"sha":"8dbfcff87d8511f0e109e4ec6b2f1a821b120f05","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/UserDetails.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserDetails.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -51,8 +51,7 @@ public UserDetails(\n             final boolean includeStatusPanel,\n             final boolean showPasswordManagement,\n             final PageReference pageRef) {\n-\n-        super(wrapper, statusModel, includeStatusPanel, pageRef);\n+        super(wrapper, statusModel, templateMode, includeStatusPanel, pageRef);\n \n         final UserTO userTO = wrapper.getInnerObject();\n         // ------------------------\n@@ -85,8 +84,7 @@ public Panel getPanel(final String panelId) {\n                 panel.setEnabled(model.getObject() >= 0);\n                 return panel;\n             }\n-        }\n-        ), model) {\n+        }), model) {\n \n             private static final long serialVersionUID = -2898628183677758699L;\n "},{"sha":"a795cd755786a4e4439852c13be7c3ca3cc2f805","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/UserTemplateWizardBuilder.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserTemplateWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserTemplateWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FUserTemplateWizardBuilder.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -21,6 +21,7 @@\n import java.util.List;\n import org.apache.syncope.client.console.layout.UserFormLayoutInfo;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n+import org.apache.syncope.common.lib.to.RealmTO;\n import org.apache.syncope.common.lib.to.TemplatableTO;\n import org.apache.syncope.common.lib.to.UserTO;\n import org.apache.syncope.common.lib.types.AnyTypeKind;\n@@ -40,7 +41,11 @@ public UserTemplateWizardBuilder(\n         if (templatable.getTemplates().containsKey(AnyTypeKind.USER.name())) {\n             setItem(new UserWrapper(UserTO.class.cast(templatable.getTemplates().get(AnyTypeKind.USER.name()))));\n         } else {\n-            setItem(new UserWrapper(new UserTO()));\n+            UserTO userTO = new UserTO();\n+            if (templatable instanceof RealmTO) {\n+                userTO.setRealm(RealmTO.class.cast(templatable).getFullPath());\n+            }\n+            setItem(new UserWrapper(userTO));\n         }\n     }\n "},{"sha":"b8ec7cab0d381df7b0ff3caee8b03bbd04e693d2","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/Details.html","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.html?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -21,6 +21,9 @@\n   <body>\n     <wicket:panel>\n       <div class=\"details\">\n+        <div class=\"form-group\">\n+          <span wicket:id=\"destinationRealm\">[DESTINATION REALM]</span>\n+        </div>\n         <wicket:child/>\n         <span wicket:id=\"status\">[STATUS]</span>\n       </div>"},{"sha":"7366c2174ecd5b03349bb14e0d8cefee2ff33576","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/Details.properties","status":"renamed","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails.properties?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -19,3 +19,4 @@ password=Password\n confirmPassword=Password (confirm)\n password.change=Password management\n storePasswordInSyncope=Store password in Syncope\n+destinationRealm=Destination realm","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/UserDetails.properties"},{"sha":"b090895f7c5bd67c85d86efe82c4e6ffcac4bc89","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/Details_it.properties","status":"renamed","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_it.properties?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -19,3 +19,4 @@ password=Password\n confirmPassword=Password (conferma)\n password.change=Gestisci password\n storePasswordInSyncope=Salva password in Syncope\n+destinationRealm=Realm di destinazione","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/UserDetails_it.properties"},{"sha":"5a6f1a41a46dfdfba6d299d8002ca95c977b9d7a","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/Details_pt_BR.properties","status":"renamed","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_pt_BR.properties?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -19,3 +19,4 @@ password=Senha\n confirmPassword=Senha (confirmar)\n password.change=Gest\\u00e3o password\n storePasswordInSyncope=Salvar senha in Syncope\n+destinationRealm=Destination realm","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/UserDetails_pt_BR.properties"},{"sha":"5e6998f64558c4a0088667b32721e8fbb92aaa4b","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/Details_ru.properties","status":"renamed","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_ru.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_ru.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FDetails_ru.properties?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -23,3 +23,4 @@ confirmPassword=\\u041f\\u0430\\u0440\\u043e\\u043b\\u044c (\\u043f\\u043e\\u0434\\u0442\\u\n # password.change=\\u00d0\\u00a1\\u00d0\\u00bc\\u00d0\\u00b5\\u00d0\\u00bd\\u00d0\\u00b8\\u00d1\\u0082\\u00d1\\u008c \\u00d0\\u00bf\\u00d0\\u00b0\\u00d1\\u0080\\u00d0\\u00be\\u00d0\\u00bb\\u00d1\\u008c ...\n password.change=\\u0421\\u043c\\u0435\\u043d\\u0438\\u0442\\u044c \\u043f\\u0430\\u0440\\u043e\\u043b\\u044c ...\n storePasswordInSyncope=Store password in Syncope\n+destinationRealm=Destination realm","previous_filename":"client/console/src/main/resources/org/apache/syncope/client/console/wizards/any/UserDetails_ru.properties"},{"sha":"ec17ed3cf45c1c90550ff9d2de182397a8b3768d","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/RealmsITCase.java","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FRealmsITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/46e642eaf3a3375f2d51f422e0f91ded5cf74e19/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FRealmsITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FRealmsITCase.java?ref=46e642eaf3a3375f2d51f422e0f91ded5cf74e19","patch":"@@ -110,6 +110,12 @@ public void update() {\n \n     @Test\n     public void addUserTemplate() {\n+        TESTER.executeAjaxEvent(\"body:content:realmChoicePanel:container:realms:btn\", Constants.ON_CLICK);\n+        TESTER.executeAjaxEvent(\"body:content:realmChoicePanel:container:realms:dropdown-menu:buttons:3:button\",\n+                Constants.ON_CLICK);\n+        \n+        TESTER.assertLabel(\"body:content:realmChoicePanel:container:realm\", \"/odd\");\n+        \n         TESTER.clickLink(\n                 \"body:content:body:container:content:tabbedPanel:panel:actions:actions:panelTemplate:templateLink\");\n         TESTER.assertComponent(\"body:content:toggleTemplates\", TogglePanel.class);\n@@ -127,6 +133,8 @@ public void addUserTemplate() {\n \n         TESTER.assertInfoMessages(\"Operation executed successfully\");\n         TESTER.cleanupFeedbackMessages();\n+        \n+        TESTER.assertLabel(\"body:content:realmChoicePanel:container:realm\", \"/odd\");\n \n         TESTER.clickLink(\n                 \"body:content:body:container:content:tabbedPanel:panel:actions:actions:panelTemplate:templateLink\");\n@@ -141,7 +149,7 @@ public void addUserTemplate() {\n \n         TESTER.assertModelValue(\"body:content:templateModal:form:content:form:view:username:textField\",\n                 \"'k' + firstname\");\n-\n+        \n         formTester = TESTER.newFormTester(\"body:content:templateModal:form:content:form\");\n         formTester.setValue(\"view:username:textField\", \"\");\n         formTester.submit(\"buttons:finish\");"}]}