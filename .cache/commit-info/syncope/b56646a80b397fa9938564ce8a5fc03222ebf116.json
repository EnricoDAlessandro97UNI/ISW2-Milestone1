{"sha":"b56646a80b397fa9938564ce8a5fc03222ebf116","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmI1NjY0NmE4MGIzOTdmYTk5Mzg1NjRjZThhNWZjMDMyMjJlYmYxMTY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-10-23T15:59:04Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-10-23T15:59:04Z"},"message":"Merge branch '1_2_X'","tree":{"sha":"b4ada56c06b88ad9105f931dbe4d493f4d65a4fb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b4ada56c06b88ad9105f931dbe4d493f4d65a4fb"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b56646a80b397fa9938564ce8a5fc03222ebf116","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b56646a80b397fa9938564ce8a5fc03222ebf116","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b56646a80b397fa9938564ce8a5fc03222ebf116","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b56646a80b397fa9938564ce8a5fc03222ebf116/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"f9bc9b7a0ee471b4533ce2baa33ad6d401e38d4f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f9bc9b7a0ee471b4533ce2baa33ad6d401e38d4f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f9bc9b7a0ee471b4533ce2baa33ad6d401e38d4f"},{"sha":"7c714f31c2367a899454b21b121377da5a5874cb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7c714f31c2367a899454b21b121377da5a5874cb","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7c714f31c2367a899454b21b121377da5a5874cb"}],"stats":{"total":49,"additions":20,"deletions":29},"files":[{"sha":"d08a4cb137a0c45a3659cbc1a48c2b9af5e0fb39","filename":"console/src/main/java/org/apache/syncope/console/pages/EditUserModalPage.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -28,7 +28,6 @@\n import org.apache.syncope.console.pages.panels.AccountInformationPanel;\n import org.apache.syncope.console.pages.panels.MembershipsPanel;\n import org.apache.syncope.console.pages.panels.ResourcesPanel;\n-import org.apache.syncope.console.pages.panels.SecurityQuestionPanel;\n import org.apache.syncope.console.pages.panels.StatusPanel;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -75,9 +74,6 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n \n             form.addOrReplace(new MembershipsPanel(\"memberships\", userTO, mode, statusPanel, getPageReference()));\n         }\n-\n-        // Security question / answer\n-        form.addOrReplace(new SecurityQuestionPanel(\"securityQuestion\", userTO));\n     }\n \n     @SuppressWarnings(\"rawtypes\")"},{"sha":"14930cfb9a5219ac81b490e4fc22ef801e5d8299","filename":"console/src/main/java/org/apache/syncope/console/pages/UserModalPage.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -25,6 +25,7 @@\n import org.apache.syncope.console.pages.panels.DerivedAttributesPanel;\n import org.apache.syncope.console.pages.panels.MembershipsPanel;\n import org.apache.syncope.console.pages.panels.ResourcesPanel;\n+import org.apache.syncope.console.pages.panels.SecurityQuestionPanel;\n import org.apache.syncope.console.pages.panels.UserDetailsPanel;\n import org.apache.syncope.console.pages.panels.VirtualAttributesPanel;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n@@ -112,6 +113,7 @@ protected Form setupEditPanel() {\n         form.add(new Label(\"pwdChangeInfo\", \"\"));\n \n         form.add(new Label(\"securityQuestion\", \"\"));\n+        form.addOrReplace(new SecurityQuestionPanel(\"securityQuestion\", userTO));\n \n         form.add(new Label(\"accountinformation\", \"\"));\n         //--------------------------------"},{"sha":"9fc33d710dfe20b2faee6ad0d256570ea78e3908","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/AttributesPanel.java","status":"modified","additions":8,"deletions":7,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAttributesPanel.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -210,19 +210,20 @@ private void setSchemas() {\n \n     private void setLayoutConfiguration(final Mode mode, final AttributableType type) {\n         switch (type) {\n-            case USER:\n-            default:\n-                confAttributeTO = confRestClient.read(mode == Mode.ADMIN\n-                        ? LayoutType.ADMIN_USER.getParameter() : LayoutType.ADMIN_USER.getParameter());\n-                break;\n             case ROLE:\n                 confAttributeTO = confRestClient.read(mode == Mode.ADMIN\n                         ? LayoutType.ADMIN_ROLE.getParameter() : LayoutType.SELF_ROLE.getParameter());\n                 break;\n+\n             case MEMBERSHIP:\n                 confAttributeTO = confRestClient.read(mode == Mode.ADMIN\n                         ? LayoutType.ADMIN_MEMBERSHIP.getParameter() : LayoutType.SELF_MEMBERSHIP.getParameter());\n                 break;\n+\n+            case USER:\n+            default:\n+                confAttributeTO = confRestClient.read(mode == Mode.ADMIN\n+                        ? LayoutType.ADMIN_USER.getParameter() : LayoutType.SELF_USER.getParameter());\n         }\n     }\n \n@@ -337,8 +338,8 @@ public String getIdValue(final String value, final int i) {\n             case Binary:\n                 panel = new BinaryFieldPanel(\"panel\", schemaTO.getName(), new Model<String>(),\n                         schemas.containsKey(schemaTO.getName())\n-                        ? schemas.get(schemaTO.getName()).getMimeType()\n-                        : null);\n+                                ? schemas.get(schemaTO.getName()).getMimeType()\n+                                : null);\n \n                 if (required) {\n                     panel.addRequiredLabel();"},{"sha":"69e9b0c9728c3f0cef31dc55f17de83d4774445c","filename":"console/src/main/resources/authorizations.xml","status":"modified","additions":0,"deletions":8,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fresources%2Fauthorizations.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/console%2Fsrc%2Fmain%2Fresources%2Fauthorizations.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Fauthorizations.xml?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -257,18 +257,10 @@ under the License.\n   </page>\n \n   <page id=\"SecurityQuestion\">\n-    <action id=\"list\">\n-      <entitlement>SECURITY_QUESTION_LIST</entitlement>\n-    </action>\n-\n     <action id=\"create\">\n       <entitlement>SECURITY_QUESTION_CREATE</entitlement>\n     </action>\n \n-    <action id=\"read\">\n-      <entitlement>SECURITY_QUESTION_READ</entitlement>\n-    </action>\n-\n     <action id=\"update\">\n       <entitlement>SECURITY_QUESTION_UPDATE</entitlement>\n     </action>"},{"sha":"3cd44c2d5f70efbc2a00a9f3aeb9953d01fff029","filename":"core/src/main/java/org/apache/syncope/core/propagation/impl/AbstractPropagationTaskExecutor.java","status":"modified","additions":7,"deletions":3,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2Fimpl%2FAbstractPropagationTaskExecutor.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -174,8 +174,8 @@ public static void createOrUpdate(\n \n             LOG.debug(\"Rename required with value {}\", newName);\n \n-                if (newName != null && newName.equals(beforeObj.getName())\n-                        && !newName.getNameValue().equals(beforeObj.getUid().getUidValue())) {\n+            if (newName != null && newName.equals(beforeObj.getName())\n+                    && !newName.getNameValue().equals(beforeObj.getUid().getUidValue())) {\n \n                 LOG.debug(\"Remote object name unchanged\");\n                 attributes.remove(newName);\n@@ -355,7 +355,11 @@ public TaskExec execute(final PropagationTask task, final PropagationReporter re\n \n             if (e instanceof ConnectorException && e.getCause() != null) {\n                 taskExecutionMessage = e.getCause().getMessage();\n-                failureReason = e.getMessage() + \"\\n\\n Cause: \" + e.getCause().getMessage().split(\"\\n\")[0];\n+                if (e.getCause().getMessage() == null) {\n+                    failureReason = e.getMessage();\n+                } else {\n+                    failureReason = e.getMessage() + \"\\n\\n Cause: \" + e.getCause().getMessage().split(\"\\n\")[0];\n+                }\n             } else {\n                 taskExecutionMessage = ExceptionUtil.getFullStackTrace(e);\n                 if (e.getCause() == null) {"},{"sha":"ed87da66010e3b104b77b9c0efc9bf922e89d94b","filename":"core/src/main/java/org/apache/syncope/core/rest/controller/SecurityQuestionController.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSecurityQuestionController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSecurityQuestionController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FSecurityQuestionController.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -45,7 +45,7 @@ public class SecurityQuestionController extends AbstractTransactionalController<\n     @Autowired\n     private SecurityQuestionDataBinder binder;\n \n-    @PreAuthorize(\"hasRole('SECURITY_QUESTION_LIST')\")\n+    @PreAuthorize(\"isAuthenticated()\")\n     public List<SecurityQuestionTO> list() {\n         List<SecurityQuestionTO> result = new ArrayList<SecurityQuestionTO>();\n         for (SecurityQuestion securityQuestion : securityQuestionDAO.findAll()) {\n@@ -55,7 +55,7 @@ public List<SecurityQuestionTO> list() {\n         return result;\n     }\n \n-    @PreAuthorize(\"hasRole('SECURITY_QUESTION_READ')\")\n+    @PreAuthorize(\"isAuthenticated()\")\n     public SecurityQuestionTO read(final Long securityQuestionId) {\n         SecurityQuestion securityQuestion = securityQuestionDAO.find(securityQuestionId);\n         if (securityQuestion == null) {"},{"sha":"af4551798656c3aef0cfd8d92e911b8289df6c25","filename":"core/src/main/resources/content.xml","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2Fcontent.xml?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -162,8 +162,6 @@ under the License.\n   <Entitlement name=\"AUDIT_LIST\"/>\n   <Entitlement name=\"AUDIT_ENABLE\"/>\n   <Entitlement name=\"AUDIT_DISABLE\"/>\n-  <Entitlement name=\"SECURITY_QUESTION_LIST\"/>\n-  <Entitlement name=\"SECURITY_QUESTION_READ\"/>\n   <Entitlement name=\"SECURITY_QUESTION_CREATE\"/>\n   <Entitlement name=\"SECURITY_QUESTION_UPDATE\"/>\n   <Entitlement name=\"SECURITY_QUESTION_DELETE\"/>"},{"sha":"e55960aef2ec27f33d316d0f4b4cc3d9bfb39b89","filename":"core/src/test/java/org/apache/syncope/core/persistence/dao/EntitlementTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FEntitlementTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FEntitlementTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fdao%2FEntitlementTest.java?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -41,7 +41,7 @@ public class EntitlementTest extends AbstractDAOTest {\n     @Test\n     public void findAll() {\n         List<Entitlement> list = entitlementDAO.findAll();\n-        assertEquals(\"did not get expected number of entitlements \", 88, list.size());\n+        assertEquals(\"did not get expected number of entitlements \", 86, list.size());\n     }\n \n     @Test"},{"sha":"b57c5cd5c8b4f69e2d25551e3ce38761b1af5f6c","filename":"core/src/test/resources/content.xml","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b56646a80b397fa9938564ce8a5fc03222ebf116/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fcontent.xml?ref=b56646a80b397fa9938564ce8a5fc03222ebf116","patch":"@@ -1087,8 +1087,6 @@ under the License.\n   <Entitlement name=\"AUDIT_LIST\"/>\n   <Entitlement name=\"AUDIT_ENABLE\"/>\n   <Entitlement name=\"AUDIT_DISABLE\"/>\n-  <Entitlement name=\"SECURITY_QUESTION_LIST\"/>\n-  <Entitlement name=\"SECURITY_QUESTION_READ\"/>\n   <Entitlement name=\"SECURITY_QUESTION_CREATE\"/>\n   <Entitlement name=\"SECURITY_QUESTION_UPDATE\"/>\n   <Entitlement name=\"SECURITY_QUESTION_DELETE\"/>"}]}