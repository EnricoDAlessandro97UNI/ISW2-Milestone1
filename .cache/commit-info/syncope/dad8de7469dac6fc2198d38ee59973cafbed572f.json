{"sha":"dad8de7469dac6fc2198d38ee59973cafbed572f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmRhZDhkZTc0NjlkYWM2ZmMyMTk4ZDM4ZWU1OTk3M2NhZmJlZDU3MmY=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-14T10:01:49Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-09-14T10:01:49Z"},"message":"BaseSendEmail extendet to take ransient vars\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246480 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6585ea7267675c6c9bd9365f0fbf6e78b68a18c3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/6585ea7267675c6c9bd9365f0fbf6e78b68a18c3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/dad8de7469dac6fc2198d38ee59973cafbed572f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/dad8de7469dac6fc2198d38ee59973cafbed572f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/dad8de7469dac6fc2198d38ee59973cafbed572f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/dad8de7469dac6fc2198d38ee59973cafbed572f/comments","author":null,"committer":null,"parents":[{"sha":"f5edb0f04345b50a48e7ff78b25a0b2c41bfe6f9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f5edb0f04345b50a48e7ff78b25a0b2c41bfe6f9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f5edb0f04345b50a48e7ff78b25a0b2c41bfe6f9"}],"stats":{"total":10,"additions":3,"deletions":7},"files":[{"sha":"922c48e63e1c4d0dfb8923c748cfbb0efc9ed115","filename":"core/src/main/java/org/syncope/core/workflow/BaseSendEmail.java","status":"modified","additions":3,"deletions":7,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/dad8de7469dac6fc2198d38ee59973cafbed572f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2FBaseSendEmail.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/dad8de7469dac6fc2198d38ee59973cafbed572f/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2FBaseSendEmail.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fworkflow%2FBaseSendEmail.java?ref=dad8de7469dac6fc2198d38ee59973cafbed572f","patch":"@@ -24,7 +24,6 @@\n import org.apache.commons.mail.Email;\n import org.apache.commons.mail.EmailException;\n import org.apache.commons.mail.HtmlEmail;\n-import org.syncope.core.persistence.beans.user.SyncopeUser;\n import org.syncope.core.persistence.dao.MissingConfKeyException;\n import org.syncope.core.persistence.dao.SyncopeConfigurationDAO;\n \n@@ -66,8 +65,8 @@ protected String getEmailBody(String urlPrefix, String template,\n                 ? fallback : templateContent.toString();\n     }\n \n-    protected HtmlEmail getHtmlEmail(Map<String, String> args,\n-            SyncopeUser syncopeUser)\n+    protected HtmlEmail getHtmlEmail(Map<String, Object> transientVars,\n+            Map<String, String> args, PropertySet ps)\n             throws EmailException, WorkflowException {\n \n         HtmlEmail email = new HtmlEmail();\n@@ -89,12 +88,9 @@ protected HtmlEmail getHtmlEmail(Map<String, String> args,\n     public void execute(Map transientVars, Map args, PropertySet ps)\n             throws WorkflowException {\n \n-        SyncopeUser syncopeUser = (SyncopeUser) transientVars.get(\n-                Constants.SYNCOPE_USER);\n-\n         Email email = null;\n         try {\n-            email = getHtmlEmail(args, syncopeUser);\n+            email = getHtmlEmail(transientVars, args, ps);\n             email.send();\n         } catch (EmailException e) {\n             LOG.error(\"Could not send e-mail \" + email, e);"}]}