{"sha":"2cb9a06118c3018102a54b1389bfc8bae3b9a604","node_id":"C_kwDOJfYA1toAKDJjYjlhMDYxMThjMzAxODEwMmE1NGIxMzg5YmZjOGJhZTNiOWE2MDQ","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-12T10:10:48Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2022-04-12T10:10:48Z"},"message":"Upgrading H2","tree":{"sha":"3600c9612db4db4438f1fd4cb82a715a1d5209a9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/3600c9612db4db4438f1fd4cb82a715a1d5209a9"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/2cb9a06118c3018102a54b1389bfc8bae3b9a604","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2cb9a06118c3018102a54b1389bfc8bae3b9a604","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2cb9a06118c3018102a54b1389bfc8bae3b9a604","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2cb9a06118c3018102a54b1389bfc8bae3b9a604/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ecc63bf2b9f037a88cd23ca3575077bfb958c9ba"}],"stats":{"total":37,"additions":18,"deletions":19},"files":[{"sha":"1274d3e856eaa8e8e9fd1247714f0efacd37f90b","filename":"core/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/entity/JPAAnyAbout.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAAnyAbout.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAAnyAbout.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fentity%2FJPAAnyAbout.java?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.core.persistence.jpa.entity;\n \n+import javax.persistence.Column;\n import javax.persistence.Entity;\n import javax.persistence.Lob;\n import javax.persistence.ManyToOne;\n@@ -42,6 +43,7 @@ public class JPAAnyAbout extends AbstractGeneratedKeyEntity implements AnyAbout\n     @ManyToOne\n     private JPAAnyType anyType;\n \n+    @Column(name = \"anyType_filter\")\n     @Lob\n     private String filter;\n \n@@ -76,5 +78,4 @@ public String get() {\n     public void set(final String filter) {\n         this.filter = filter;\n     }\n-\n }"},{"sha":"702837b6a63252609d1c53dd59912520e02ba4f5","filename":"core/persistence-jpa/src/main/resources/domains/MasterContent.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2Fdomains%2FMasterContent.xml?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -96,7 +96,7 @@ we are happy to inform you that the password request was successfully executed f\n   <Notification id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" \n                 sender=\"admin@syncope.apache.org\" subject=\"Password Reset request\" template_id=\"requestPasswordReset\" \n                 traceLevel=\"FAILURES\"/> \n-  <AnyAbout id=\"a328f2e6-25e9-4cc1-badf-7425d7be4b39\" anyType_id=\"USER\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" filter=\"token!=$null\"/>\n+  <AnyAbout id=\"a328f2e6-25e9-4cc1-badf-7425d7be4b39\" anyType_id=\"USER\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" anyType_filter=\"token!=$null\"/>\n   <Notification_events notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" event=\"[CUSTOM]:[]:[]:[requestPasswordReset]:[SUCCESS]\"/>\n   \n   <Notification id=\"bef0c250-e8a7-4848-bb63-2564fc409ce2\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" "},{"sha":"05caca91531c83dd8c122d890b7e186e56403265","filename":"core/persistence-jpa/src/test/resources/domains/MasterContent.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FMasterContent.xml?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -1372,7 +1372,7 @@ $$ }&#10;\n   <Notification id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" \n                 sender=\"admin@syncope.apache.org\" subject=\"Password Reset request\" template_id=\"requestPasswordReset\" \n                 traceLevel=\"FAILURES\"/> \n-  <AnyAbout id=\"a328f2e6-25e9-4cc1-badf-7425d7be4b39\" anyType_id=\"USER\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" filter=\"token!=$null\"/>\n+  <AnyAbout id=\"a328f2e6-25e9-4cc1-badf-7425d7be4b39\" anyType_id=\"USER\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" anyType_filter=\"token!=$null\"/>\n   <Notification_events notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\" event=\"[CUSTOM]:[]:[]:[requestPasswordReset]:[SUCCESS]\"/>\n   <Task DTYPE=\"NotificationTask\" id=\"e1e520f0-2cbd-4e11-9a89-ea58a0f957e7\" notification_id=\"e00945b5-1184-4d43-8e45-4318a8dcdfd4\"\n         sender=\"admin@prova.org\" subject=\"Notification for SYNCOPE-81\" executed=\"0\"\n@@ -1388,7 +1388,7 @@ $$ }&#10;\n                 traceLevel=\"FAILURES\"\n                 recipientsFIQL=\"$groups==7\"\n                 recipientAttrName=\"email\" active=\"1\"/>\n-  <AnyAbout id=\"2e2ee845-2abf-43c6-b543-49243a84e2f1\" anyType_id=\"USER\" notification_id=\"9e2b911c-25de-4c77-bcea-b86ed9451050\" filter=\"fullname==*o*;fullname==*i*\"/>\n+  <AnyAbout id=\"2e2ee845-2abf-43c6-b543-49243a84e2f1\" anyType_id=\"USER\" notification_id=\"9e2b911c-25de-4c77-bcea-b86ed9451050\" anyType_filter=\"fullname==*o*;fullname==*i*\"/>\n   <Notification_events notification_id=\"9e2b911c-25de-4c77-bcea-b86ed9451050\" event=\"[CUSTOM]:[]:[]:[unexisting1]:[FAILURE]\"/>\n   <Notification_events notification_id=\"9e2b911c-25de-4c77-bcea-b86ed9451050\" event=\"[CUSTOM]:[]:[]:[unexisting2]:[SUCCESS]\"/>\n "},{"sha":"5d5db890624ad5f3c7d08306e891b74b73490c37","filename":"core/persistence-jpa/src/test/resources/domains/TwoContent.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa%2Fsrc%2Ftest%2Fresources%2Fdomains%2FTwoContent.xml?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -86,7 +86,7 @@ we are happy to inform you that the password request was successfully executed f\n   <Notification id=\"c74b4616-9c63-4350-b4bf-ae0077b1ae6a\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" \n                 sender=\"admin@syncope.apache.org\" subject=\"Password Reset request\" template_id=\"requestPasswordReset\" \n                 traceLevel=\"FAILURES\"/> \n-  <AnyAbout id=\"0d4e37a1-a4f4-4865-afcb-4be01da3da53\" anyType_id=\"USER\" notification_id=\"c74b4616-9c63-4350-b4bf-ae0077b1ae6a\" filter=\"token!=$null\"/>\n+  <AnyAbout id=\"0d4e37a1-a4f4-4865-afcb-4be01da3da53\" anyType_id=\"USER\" notification_id=\"c74b4616-9c63-4350-b4bf-ae0077b1ae6a\" anyType_filter=\"token!=$null\"/>\n   <Notification_events notification_id=\"c74b4616-9c63-4350-b4bf-ae0077b1ae6a\" event=\"[CUSTOM]:[]:[]:[requestPasswordReset]:[SUCCESS]\"/>\n   \n   <Notification id=\"71769807-7f74-4dc3-ba61-e4a7a00eb8ad\" active=\"1\" recipientAttrName=\"email\" selfAsRecipient=\"1\" "},{"sha":"5c08e88ab51446e4661859068d8bf019c1074f4d","filename":"fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/cxf/ProvisioningImpl.java","status":"modified","additions":8,"deletions":8,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FProvisioningImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FProvisioningImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FProvisioningImpl.java?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -64,10 +64,10 @@ public String delete(final String accountid) throws ProvisioningException {\n         try {\n             conn = DataSourceUtils.getConnection(dataSource);\n \n-            try (PreparedStatement statement = conn.prepareStatement(\"DELETE FROM user WHERE userId=?\")) {\n+            try (PreparedStatement statement = conn.prepareStatement(\"DELETE FROM testuser WHERE userId=?\")) {\n                 statement.setString(1, accountid);\n \n-                String query = \"DELETE FROM user WHERE userId='\" + accountid + \"';\";\n+                String query = \"DELETE FROM testuser WHERE userId='\" + accountid + \"';\";\n                 LOG.debug(\"Execute query: \" + query);\n \n                 statement.executeUpdate();\n@@ -156,9 +156,9 @@ public String update(final String accountid, final List<WSAttributeValue> data)\n \n             if (set.length() > 0) {\n                 try (PreparedStatement statement =\n-                        conn.prepareStatement(\"UPDATE user SET \" + set.toString() + \" WHERE userId=?\")) {\n+                        conn.prepareStatement(\"UPDATE testuser SET \" + set.toString() + \" WHERE userId=?\")) {\n                     statement.setString(1, accountid);\n-                    String query = \"UPDATE user SET \" + set.toString() + \" WHERE userId='\" + accountid + \"';\";\n+                    String query = \"UPDATE testuser SET \" + set.toString() + \" WHERE userId='\" + accountid + \"';\";\n                     LOG.debug(\"Execute query: \" + query);\n \n                     statement.executeUpdate();\n@@ -183,7 +183,7 @@ public List<WSUser> query(final Operand query) {\n         Connection conn = null;\n         try {\n \n-            String queryString = \"SELECT * FROM user\" + (Optional.ofNullable(query)\n+            String queryString = \"SELECT * FROM testuser\" + (Optional.ofNullable(query)\n                     .map(operand -> \" WHERE \" + operand.toString()).orElse(\"\"));\n \n             queryString = queryString.replaceAll(\"__NAME__\", \"userId\").\n@@ -295,7 +295,7 @@ public String create(final List<WSAttributeValue> data) throws ProvisioningExcep\n                         }\n                     }\n                 }\n-                query = \"INSERT INTO user (\" + keys.toString() + \") VALUES (\" + values.toString() + ')';\n+                query = \"INSERT INTO testuser (\" + keys.toString() + \") VALUES (\" + values.toString() + ')';\n                 LOG.debug(\"Execute query: \" + query);\n                 statement.executeUpdate(query);\n             }\n@@ -338,10 +338,10 @@ public String resolve(final String username) throws ProvisioningException {\n         try {\n             conn = DataSourceUtils.getConnection(dataSource);\n             PreparedStatement statement =\n-                    conn.prepareStatement(\"SELECT userId FROM user WHERE userId=?\");\n+                    conn.prepareStatement(\"SELECT userId FROM testuser WHERE userId=?\");\n             statement.setString(1, username);\n \n-            final String query = \"SELECT userId FROM user WHERE userId='\" + username + \"';\";\n+            final String query = \"SELECT userId FROM testuser WHERE userId='\" + username + \"';\";\n \n             LOG.debug(\"Execute query: \" + query);\n "},{"sha":"c14847122b53f1eb00c1eb9b82502bdc1f9ec8dd","filename":"fit/build-tools/src/main/resources/testdb.sql","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fresources%2Ftestdb.sql?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -36,7 +36,7 @@ INSERT INTO test2 VALUES ('verdi', 'password321', 'true');\n \n DROP TABLE testpull IF EXISTS;\n CREATE TABLE testpull (\n-id CHAR(36) PRIMARY KEY,\n+id VARCHAR(36) PRIMARY KEY,\n username VARCHAR(80),\n surname VARCHAR(80),\n mustChangePassword BOOLEAN,\n@@ -51,7 +51,7 @@ location VARCHAR(80),\n deleted BOOLEAN DEFAULT FALSE,\n lastModification TIMESTAMP);\n \n-CREATE TABLE user (\n+CREATE TABLE testuser (\n capsId INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,\n userId VARCHAR(30) NOT NULL,\n password VARCHAR(255) NOT NULL,"},{"sha":"6d108df7f7fd8a66dd9740fd5d7f544b9c2200d0","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/PullTaskITCase.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FPullTaskITCase.java?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -49,7 +49,6 @@\n import javax.naming.NamingException;\n import javax.naming.directory.Attribute;\n import javax.naming.directory.BasicAttribute;\n-import javax.sql.DataSource;\n import javax.ws.rs.core.Response;\n import org.apache.commons.io.IOUtils;\n import org.apache.commons.lang3.SerializationUtils;\n@@ -1048,8 +1047,7 @@ public void issueSYNCOPE258() throws IOException {\n         assertEquals(1, executed.getExecutions().size());\n \n         // asser for just one match\n-        assertTrue(executed.getExecutions().get(0).getMessage().contains(\"[updated/failures]: 1/0\"),\n-                () -> executed.getExecutions().get(0).getMessage().substring(0, 55) + \"...\");\n+        assertTrue(executed.getExecutions().get(0).getMessage().contains(\"[updated/failures]: 1/0\"));\n     }\n \n     @Test"},{"sha":"6e547d801df252956c39b8504a1f8e428674432b","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/2cb9a06118c3018102a54b1389bfc8bae3b9a604/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/2cb9a06118c3018102a54b1389bfc8bae3b9a604/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=2cb9a06118c3018102a54b1389bfc8bae3b9a604","patch":"@@ -449,7 +449,7 @@ under the License.\n     <cas.version>6.5.2</cas.version>\n     <cas-client.version>3.6.4</cas-client.version>\n \n-    <h2.version>1.4.200</h2.version>\n+    <h2.version>2.1.212</h2.version>\n \n     <swagger-core.version>2.1.13</swagger-core.version>\n     <swagger-ui.version>4.10.3</swagger-ui.version>"}]}