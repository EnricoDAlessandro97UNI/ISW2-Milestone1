{"sha":"5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjVjZGRiODNjMDcxMWFiYThmZDU4ZjkxNGUzNmQ3YmY5MWY1YWZkMWU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-03-25T08:14:29Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-03-25T08:14:29Z"},"message":"[SYNCOPE-340] Small refactory to ease adding new languages\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1460540 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c18cee2b7f424abe8ede8b15d3fe6fe7542b642a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/c18cee2b7f424abe8ede8b15d3fe6fe7542b642a"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"3272f8bd60a97678bd73f51111d8e033f34f3169","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/3272f8bd60a97678bd73f51111d8e033f34f3169","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/3272f8bd60a97678bd73f51111d8e033f34f3169"}],"stats":{"total":45,"additions":17,"deletions":28},"files":[{"sha":"7042e349943725c2c825fb4466dad3a938ff1b94","filename":"console/src/main/java/org/apache/syncope/console/SyncopeSession.java","status":"modified","additions":14,"deletions":18,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FSyncopeSession.java?ref=5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","patch":"@@ -18,8 +18,12 @@\n  */\n package org.apache.syncope.console;\n \n-import java.text.SimpleDateFormat;\n+import java.text.DateFormat;\n+import java.util.Arrays;\n import java.util.HashMap;\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Map;\n import org.apache.syncope.client.services.proxy.ConfigurationServiceProxy;\n import org.apache.syncope.client.services.proxy.ConnectorServiceProxy;\n import org.apache.syncope.client.services.proxy.EntitlementServiceProxy;\n@@ -51,7 +55,6 @@\n import org.apache.syncope.common.services.UserService;\n import org.apache.syncope.common.services.UserWorkflowService;\n import org.apache.syncope.common.services.WorkflowService;\n-import org.apache.syncope.console.commons.Constants;\n import org.apache.wicket.Session;\n import org.apache.wicket.authroles.authorization.strategies.role.Roles;\n import org.apache.wicket.protocol.http.WebApplication;\n@@ -68,6 +71,9 @@ public class SyncopeSession extends WebSession {\n \n     private static final long serialVersionUID = 7743446298924805872L;\n \n+    public static final List<Locale> SUPPORTED_LOCALES = Arrays.asList(new Locale[] {\n+        Locale.ENGLISH, Locale.ITALIAN});\n+\n     private String userId;\n \n     private String version;\n@@ -78,7 +84,7 @@ public class SyncopeSession extends WebSession {\n \n     private final RestTemplate restTemplate;\n \n-    private final HashMap<Class<?>, SpringServiceProxy> services = new HashMap<Class<?>, SpringServiceProxy>();\n+    private final Map<Class<?>, SpringServiceProxy> services = new HashMap<Class<?>, SpringServiceProxy>();\n \n     public static SyncopeSession get() {\n         return (SyncopeSession) Session.get();\n@@ -96,7 +102,7 @@ public SyncopeSession(final Request request) {\n         setupRESTClients();\n     }\n \n-    protected void setupRESTClients() {\n+    private void setupRESTClients() {\n         services.put(ConfigurationService.class, new ConfigurationServiceProxy(baseURL, restTemplate));\n         services.put(ConnectorService.class, new ConnectorServiceProxy(baseURL, restTemplate));\n         services.put(EntitlementService.class, new EntitlementServiceProxy(baseURL, restTemplate));\n@@ -115,7 +121,7 @@ protected void setupRESTClients() {\n     }\n \n     @SuppressWarnings(\"unchecked\")\n-    public <T> T getService(Class<T> service) {\n+    public <T> T getService(final Class<T> service) {\n         return (T) services.get(service);\n     }\n \n@@ -156,19 +162,9 @@ public boolean hasAnyRole(final Roles roles) {\n         return this.roles.hasAnyRole(roles);\n     }\n \n-    public SimpleDateFormat getDateFormat() {\n-        String language = \"en\";\n-        if (getLocale() != null) {\n-            language = getLocale().getLanguage();\n-        }\n-\n-        SimpleDateFormat formatter;\n-        if (\"it\".equals(language)) {\n-            formatter = new SimpleDateFormat(Constants.ITALIAN_DATE_FORMAT);\n-        } else {\n-            formatter = new SimpleDateFormat(Constants.ENGLISH_DATE_FORMAT);\n-        }\n+    public DateFormat getDateFormat() {\n+        final Locale locale = getLocale() == null ? Locale.ENGLISH : getLocale();\n \n-        return formatter;\n+        return DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT, locale);\n     }\n }"},{"sha":"739ca24634f3be09551e68d098fb634b6ec9b6ed","filename":"console/src/main/java/org/apache/syncope/console/commons/Constants.java","status":"modified","additions":0,"deletions":4,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java?ref=5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","patch":"@@ -74,10 +74,6 @@ public final class Constants {\n \n     public static final String PAGEPARAM_CURRENT_PAGE = \"_current_page\";\n \n-    public static final String ITALIAN_DATE_FORMAT = \"dd/MM/yyyy HH:mm:ss\";\n-\n-    public static final String ENGLISH_DATE_FORMAT = \"MM/dd/yyyy HH:mm:ss\";\n-\n     public static final String PREF_POLICY_PAGINATOR_ROWS = \"policy.paginator.rows\";\n \n     public static final String ENUM_VALUES_SEPARATOR = \";\";"},{"sha":"7a745683b24dae2d278ec7dba868c14439f26a21","filename":"console/src/main/java/org/apache/syncope/console/pages/Login.java","status":"modified","additions":3,"deletions":6,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5cddb83c0711aba8fd58f914e36d7bf91f5afd1e/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=5cddb83c0711aba8fd58f914e36d7bf91f5afd1e","patch":"@@ -18,8 +18,6 @@\n  */\n package org.apache.syncope.console.pages;\n \n-import java.util.Arrays;\n-import java.util.List;\n import java.util.Locale;\n import java.util.Set;\n import org.apache.http.HttpResponse;\n@@ -101,7 +99,7 @@ public Login(final PageParameters parameters) {\n         passwordField.setMarkupId(\"password\");\n         form.add(passwordField);\n \n-        languageSelect = new LocaleDropDown(\"language\", Arrays.asList(new Locale[]{Locale.ENGLISH, Locale.ITALIAN}));\n+        languageSelect = new LocaleDropDown(\"language\");\n \n         form.add(languageSelect);\n \n@@ -244,9 +242,8 @@ public String getDisplayValue(final Locale locale) {\n             }\n         }\n \n-        public LocaleDropDown(final String id, final List<Locale> supportedLocales) {\n-\n-            super(id, supportedLocales);\n+        public LocaleDropDown(final String id) {\n+            super(id, SyncopeSession.SUPPORTED_LOCALES);\n \n             setChoiceRenderer(new LocaleRenderer());\n             setModel(new IModel<Locale>() {"}]}