{"sha":"b88a7565f964d476f4626efc722b49d551c2eaaf","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmI4OGE3NTY1Zjk2NGQ0NzZmNDYyNmVmYzcyMmI0OWQ1NTFjMmVhYWY=","commit":{"author":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2017-07-31T14:58:12Z"},"committer":{"name":"skylark17","email":"matteo.alessandroni@tirasa.net","date":"2017-07-31T15:02:03Z"},"message":"[SYNCOPE-1170] Can't remove a Dynamic USER assignment","tree":{"sha":"479c912f34467f080fecc2cb564cc6a741c50bdc","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/479c912f34467f080fecc2cb564cc6a741c50bdc"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b88a7565f964d476f4626efc722b49d551c2eaaf","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b88a7565f964d476f4626efc722b49d551c2eaaf","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b88a7565f964d476f4626efc722b49d551c2eaaf","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b88a7565f964d476f4626efc722b49d551c2eaaf/comments","author":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"committer":{"login":"mat-ale","id":25547301,"node_id":"MDQ6VXNlcjI1NTQ3MzAx","avatar_url":"https://avatars.githubusercontent.com/u/25547301?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-ale","html_url":"https://github.com/mat-ale","followers_url":"https://api.github.com/users/mat-ale/followers","following_url":"https://api.github.com/users/mat-ale/following{/other_user}","gists_url":"https://api.github.com/users/mat-ale/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-ale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-ale/subscriptions","organizations_url":"https://api.github.com/users/mat-ale/orgs","repos_url":"https://api.github.com/users/mat-ale/repos","events_url":"https://api.github.com/users/mat-ale/events{/privacy}","received_events_url":"https://api.github.com/users/mat-ale/received_events","type":"User","site_admin":false},"parents":[{"sha":"7ad5d19b91e01544f076b980c1b26deae0184a79","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7ad5d19b91e01544f076b980c1b26deae0184a79","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7ad5d19b91e01544f076b980c1b26deae0184a79"}],"stats":{"total":20,"additions":17,"deletions":3},"files":[{"sha":"94b3d37b9195b1283b6b26c4001dac1e45a9cc4e","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/GroupWizardBuilder.java","status":"modified","additions":16,"deletions":1,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b88a7565f964d476f4626efc722b49d551c2eaaf/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupWizardBuilder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b88a7565f964d476f4626efc722b49d551c2eaaf/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupWizardBuilder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FGroupWizardBuilder.java?ref=b88a7565f964d476f4626efc722b49d551c2eaaf","patch":"@@ -20,6 +20,8 @@\n \n import java.io.Serializable;\n import java.util.List;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.cxf.common.util.CollectionUtils;\n import org.apache.syncope.client.console.layout.GroupForm;\n import org.apache.syncope.client.console.layout.GroupFormLayoutInfo;\n import org.apache.syncope.client.console.rest.GroupRestClient;\n@@ -71,8 +73,21 @@ protected Serializable onApplyInternal(final AnyWrapper<GroupTO> modelObject) {\n             actual = groupRestClient.create(inner);\n         } else {\n             GroupPatch patch = AnyOperations.diff(inner, getOriginalItem().getInnerObject(), false);\n+            GroupTO originaObj = getOriginalItem().getInnerObject();\n+\n+            // SYNCOPE-1170\n+            boolean othersNotEqualsOrBlanks =\n+                    !inner.getADynMembershipConds().equals(originaObj.getADynMembershipConds())\n+                    || (StringUtils.isNotBlank(originaObj.getUDynMembershipCond()) && StringUtils.isBlank(inner.\n+                    getUDynMembershipCond()))\n+                    || (StringUtils.isBlank(originaObj.getUDynMembershipCond()) && StringUtils.isNotBlank(inner.\n+                    getUDynMembershipCond()))\n+                    || StringUtils.isAllBlank(originaObj.getUDynMembershipCond(), inner.getUDynMembershipCond())\n+                    || !inner.getUDynMembershipCond().equals(originaObj.getUDynMembershipCond())\n+                    || !CollectionUtils.diff(inner.getTypeExtensions(), originaObj.getTypeExtensions()).isEmpty();\n+\n             // update just if it is changed\n-            if (patch.isEmpty()) {\n+            if (patch.isEmpty() && !othersNotEqualsOrBlanks) {\n                 actual = new ProvisioningResult<>();\n                 actual.setEntity(inner);\n             } else {"},{"sha":"0cf5f311eb3bfcaa27152dba9174e222e8f36635","filename":"common/lib/src/main/java/org/apache/syncope/common/lib/patch/GroupPatch.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b88a7565f964d476f4626efc722b49d551c2eaaf/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpatch%2FGroupPatch.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b88a7565f964d476f4626efc722b49d551c2eaaf/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpatch%2FGroupPatch.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fpatch%2FGroupPatch.java?ref=b88a7565f964d476f4626efc722b49d551c2eaaf","patch":"@@ -112,8 +112,7 @@ public List<TypeExtensionTO> getTypeExtensions() {\n     @Override\n     public boolean isEmpty() {\n         return super.isEmpty()\n-                && name == null && userOwner == null && groupOwner == null\n-                && udynMembershipCond == null && adynMembershipConds.isEmpty() && typeExtensions.isEmpty();\n+                && name == null && userOwner == null && groupOwner == null;\n     }\n \n }"}]}