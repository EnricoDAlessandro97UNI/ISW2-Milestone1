{"sha":"f7328430e0436c794ccfc2a198e59734bbc04163","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmY3MzI4NDMwZTA0MzZjNzk0Y2NmYzJhMTk4ZTU5NzM0YmJjMDQxNjM=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@users.noreply.github.com","date":"2021-01-09T10:41:32Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-01-09T10:41:32Z"},"message":"Upgrading CAS to 6.4.0-SNAPSHOT (#232)\n\nAlso upgrading Spring Boot and Spring Cloud Gateway to latest releases, removing the need of different dependency versions for JDK 16.","tree":{"sha":"088586f17e2600c4a678640a4fa528e0193fe8e7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/088586f17e2600c4a678640a4fa528e0193fe8e7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/f7328430e0436c794ccfc2a198e59734bbc04163","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf+YhcCRBK7hj4Ov3rIwAAdHIIACLdeKGhP6DL+3rBHTfq8HwV\njwBwu3GRhxaXLe2Etyv3hPyOKC16zPXW//oeGqVKbRADilA2Nyr0VwskT7irMFby\nyoLnQb3QodtuJ0jCcoSUMAElfNUGRvM5wwUo47OfCwnZinS1bUUdruOpLJrIiva3\nodQCO2taNQcQ5qvBBuEqXCUzI7/t7E1VOrfJZE30rM+B/Pe6c760tWdFvmkbecpo\nxFgO80SoVOXm0a+qP3GCVOlTOoX6st0y74cQJIuga2bi+LBP4Ql1WZzAC0zWICAa\nDTkO6YQPfztCz0aKyo1cu6wsntFPBkqBVTyO39WvH0MIu/01vt+M7xVm47j2JL4=\n=HeEd\n-----END PGP SIGNATURE-----\n","payload":"tree 088586f17e2600c4a678640a4fa528e0193fe8e7\nparent 44ae5f248548a350fe693ccef1563d67bdcd37f3\nauthor Francesco Chicchiriccò <ilgrosso@users.noreply.github.com> 1610188892 +0100\ncommitter GitHub <noreply@github.com> 1610188892 +0100\n\nUpgrading CAS to 6.4.0-SNAPSHOT (#232)\n\nAlso upgrading Spring Boot and Spring Cloud Gateway to latest releases, removing the need of different dependency versions for JDK 16."}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f7328430e0436c794ccfc2a198e59734bbc04163","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f7328430e0436c794ccfc2a198e59734bbc04163","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f7328430e0436c794ccfc2a198e59734bbc04163/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"44ae5f248548a350fe693ccef1563d67bdcd37f3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/44ae5f248548a350fe693ccef1563d67bdcd37f3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/44ae5f248548a350fe693ccef1563d67bdcd37f3"}],"stats":{"total":141,"additions":83,"deletions":58},"files":[{"sha":"63a35eeb9fb8c697ce76a48b408d8e7172755196","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/panels/UserDirectoryPanel.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FUserDirectoryPanel.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -81,7 +81,7 @@ public void onClose(final AjaxRequestTarget target) {\n                 modal.show(false);\n             }\n         });\n-            }\n+    }\n \n     @Override\n     protected String paginatorRowsKey() {\n@@ -225,7 +225,7 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n             SyncopeWebApplication.get().getAnyDirectoryPanelAdditionalActionLinksProvider().get(\n                     model,\n                     realm,\n-                            altDefaultModal,\n+                    altDefaultModal,\n                     getString(\"any.edit\", new Model<>(new AnyWrapper<>(model.getObject()))),\n                     this,\n                     pageRef).forEach(panel::add);\n@@ -257,10 +257,10 @@ public void onClick(final AjaxRequestTarget target, final UserTO ignore) {\n                     target.add(utilityModal);\n                 }\n             }, ActionType.NOTIFICATION_TASKS, IdRepoEntitlement.TASK_LIST);\n-                }\n+        }\n \n-            if (wizardInModal) {\n-                panel.add(new ActionLink<UserTO>() {\n+        if (wizardInModal) {\n+            panel.add(new ActionLink<UserTO>() {\n \n                 private static final long serialVersionUID = -1978723352517770644L;\n "},{"sha":"d75c6976977917576faa12997099018eef688e57","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/data/OIDCJWKSDataBinderImpl.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FOIDCJWKSDataBinderImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FOIDCJWKSDataBinderImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fdata%2FOIDCJWKSDataBinderImpl.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -23,6 +23,7 @@\n import com.nimbusds.jose.jwk.KeyUse;\n import com.nimbusds.jose.jwk.RSAKey;\n import com.nimbusds.jose.jwk.gen.RSAKeyGenerator;\n+import com.nimbusds.jose.util.JSONObjectUtils;\n import org.apache.syncope.common.lib.SyncopeClientException;\n import org.apache.syncope.common.lib.to.OIDCJWKSTO;\n import org.apache.syncope.common.lib.types.ClientExceptionType;\n@@ -58,7 +59,7 @@ public OIDCJWKS create(final int size, final JWSAlgorithm algorithm) {\n                     keyID(SecureRandomUtils.generateRandomUUID().toString()).\n                     algorithm(new com.nimbusds.jose.JWSAlgorithm(algorithm.name())).\n                     generate();\n-            jwks.setJson(new JWKSet(jwk).toJSONObject(false).toString());\n+            jwks.setJson(JSONObjectUtils.toJSONString(new JWKSet(jwk).toJSONObject(false)));\n             return jwks;\n         } catch (JOSEException e) {\n             LOG.error(\"Could not create OIDC JWKS\", e);"},{"sha":"ef6a258a225f5cac778fe753d9abee1a1e012909","filename":"docker/wa/src/main/resources/application.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/docker%2Fwa%2Fsrc%2Fmain%2Fresources%2Fapplication.properties?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -26,7 +26,7 @@ server.servlet.encoding.force=true\n \n server.servlet.contextPath=/syncope-wa\n \n-spring.resources.static-locations=classpath:/thymeleaf/static,classpath:/static\n+spring.web.resources.static-locations=classpath:/thymeleaf/static,classpath:/static\n \n management.endpoints.web.exposure.include=health,loggers,refresh,registeredServices\n management.endpoint.health.show-details=always"},{"sha":"139b6e2cd3fb3aaa7e4862e5628d53cb820dbe96","filename":"fit/build-tools/src/main/java/org/apache/directory/server/core/normalization/NormalizationInterceptor.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fdirectory%2Fserver%2Fcore%2Fnormalization%2FNormalizationInterceptor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fdirectory%2Fserver%2Fcore%2Fnormalization%2FNormalizationInterceptor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fdirectory%2Fserver%2Fcore%2Fnormalization%2FNormalizationInterceptor.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -532,6 +532,7 @@ private ExprNode removeObjectClass( ExprNode node )\n                 }\n                 else if ( leafNode instanceof EqualityNode )\n                 {\n+                    @SuppressWarnings(\"unchecked\")\n                     Value value = ( ( EqualityNode<String> ) leafNode ).getValue();\n \n                     if ( value.equals( SchemaConstants.TOP_OC ) )"},{"sha":"123bde81618e36281128498642ff6f23f89f8775","filename":"fit/build-tools/src/main/java/org/apache/syncope/fit/buildtools/cxf/DateParamConverterProvider.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FDateParamConverterProvider.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FDateParamConverterProvider.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fbuild-tools%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fbuildtools%2Fcxf%2FDateParamConverterProvider.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -23,15 +23,15 @@\n import java.util.Date;\n import javax.ws.rs.ext.ParamConverter;\n import javax.ws.rs.ext.ParamConverterProvider;\n-import org.springframework.util.StringUtils;\n+import org.apache.commons.lang3.StringUtils;\n \n public class DateParamConverterProvider implements ParamConverterProvider {\n \n     private static class DateParamConverter implements ParamConverter<Date> {\n \n         @Override\n         public Date fromString(final String value) {\n-            if (StringUtils.isEmpty(value)) {\n+            if (StringUtils.isBlank(value)) {\n                 return null;\n             }\n             try {"},{"sha":"3fb1544e02a057a5947800cc1055e4887785fa7e","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/UserSelfITCase.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2FUserSelfITCase.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -527,8 +527,7 @@ public void createWithReject() {\n         JdbcTemplate jdbcTemplate = new JdbcTemplate(testDataSource);\n         Exception exception = null;\n         try {\n-            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n-                    new String[] { userTO.getUsername() }, Integer.class);\n+            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\", Integer.class, userTO.getUsername());\n         } catch (EmptyResultDataAccessException e) {\n             exception = e;\n         }\n@@ -565,8 +564,7 @@ public void createWithApproval() {\n \n         Exception exception = null;\n         try {\n-            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\",\n-                    new String[] { userTO.getUsername() }, Integer.class);\n+            jdbcTemplate.queryForObject(\"SELECT id FROM test WHERE id=?\", Integer.class, userTO.getUsername());\n         } catch (EmptyResultDataAccessException e) {\n             exception = e;\n         }"},{"sha":"798b34e1e308911aba9aacb1603e9137219411b3","filename":"fit/wa-reference/pom.xml","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fwa-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/fit%2Fwa-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fpom.xml?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -34,6 +34,8 @@ under the License.\n   <packaging>war</packaging>\n   \n   <properties>\n+    <nimbus-jose-jwt.version>8.20.1</nimbus-jose-jwt.version>\n+\n     <ianal.skip>true</ianal.skip>\n \n     <rootpom.basedir>${basedir}/../..</rootpom.basedir>"},{"sha":"22a9d05f13eff5662955554458838dc29846eb41","filename":"pom.xml","status":"modified","additions":50,"deletions":13,"changes":63,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -406,13 +406,14 @@ under the License.\n \n     <cxf.version>3.4.2</cxf.version>\n     <bouncycastle.version>1.68</bouncycastle.version>\n+    <nimbus-jose-jwt.version>9.4.1</nimbus-jose-jwt.version>\n \n-    <jackson.version>2.12.1-SNAPSHOT</jackson.version>\n+    <jackson.version>2.12.1</jackson.version>\n \n-    <spring.version>5.2.12.RELEASE</spring.version>\n+    <spring.version>5.3.2</spring.version>\n     <spring-security.version>5.4.2</spring-security.version>\n-    <spring-boot.version>2.3.7.RELEASE</spring-boot.version>\n-    <spring-cloud-gateway.version>2.2.6.RELEASE</spring-cloud-gateway.version>\n+    <spring-boot.version>2.4.1</spring-boot.version>\n+    <spring-cloud-gateway.version>3.0.0</spring-cloud-gateway.version>\n \n     <openjpa.version>3.1.3-SNAPSHOT</openjpa.version>\n     <hikaricp.version>3.4.5</hikaricp.version>\n@@ -450,7 +451,7 @@ under the License.\n \n     <pac4j.version>4.3.0</pac4j.version>\n \n-    <cas.version>6.3.0</cas.version>\n+    <cas.version>6.4.0-SNAPSHOT</cas.version>\n     <cas-client.version>3.6.2</cas-client.version>\n \n     <h2.version>1.4.200</h2.version>\n@@ -808,6 +809,16 @@ under the License.\n         <artifactId>jackson-annotations</artifactId>\n         <version>${jackson.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.jaxrs</groupId>\n+        <artifactId>jackson-jaxrs-base</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.module</groupId>\n+        <artifactId>jackson-module-jaxb-annotations</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n       <dependency>\n         <groupId>com.fasterxml.jackson.jaxrs</groupId>\n         <artifactId>jackson-jaxrs-json-provider</artifactId>\n@@ -863,11 +874,26 @@ under the License.\n         <artifactId>jackson-dataformat-csv</artifactId>\n         <version>${jackson.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.dataformat</groupId>\n+        <artifactId>jackson-dataformat-properties</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n       <dependency>\n         <groupId>com.fasterxml.jackson.datatype</groupId>\n         <artifactId>jackson-datatype-jsr310</artifactId>\n         <version>${jackson.version}</version>\n-      </dependency>  \n+      </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.datatype</groupId>\n+        <artifactId>jackson-datatype-jdk8</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n+      <dependency>\n+        <groupId>com.fasterxml.jackson.datatype</groupId>\n+        <artifactId>jackson-datatype-guava</artifactId>\n+        <version>${jackson.version}</version>\n+      </dependency>\n \n       <dependency>\n         <groupId>org.springframework.boot</groupId>\n@@ -904,6 +930,21 @@ under the License.\n             <groupId>org.hibernate.validator</groupId>\n             <artifactId>hibernate-validator</artifactId>\n           </exclusion>\n+          <exclusion>\n+            <groupId>com.fasterxml.jackson.module</groupId>\n+            <artifactId>jackson-module-parameter-names</artifactId>\n+          </exclusion>\n+        </exclusions>\n+      </dependency>\n+      <dependency>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-starter-webflux</artifactId>\n+        <version>${spring-boot.version}</version>\n+        <exclusions>\n+          <exclusion>\n+            <groupId>com.fasterxml.jackson.module</groupId>\n+            <artifactId>jackson-module-parameter-names</artifactId>\n+          </exclusion>\n         </exclusions>\n       </dependency>\n \n@@ -1286,6 +1327,7 @@ under the License.\n           </exclusion>\n         </exclusions>\n       </dependency>\n+\n       <!-- Flowable -->\n       <dependency>\n         <groupId>org.flowable</groupId>\n@@ -1993,7 +2035,7 @@ under the License.\n       <dependency>\n         <groupId>com.nimbusds</groupId>\n         <artifactId>nimbus-jose-jwt</artifactId>\n-        <version>8.20.1</version>\n+        <version>${nimbus-jose-jwt.version}</version>\n       </dependency>\n \n       <dependency>\n@@ -2018,8 +2060,7 @@ under the License.\n       <dependency>\n         <groupId>org.springframework.cloud</groupId>\n         <artifactId>spring-cloud-contract-wiremock</artifactId>\n-        <!-- TMP: revert to ${spring-cloud-gateway.version} as soon as available -->\n-        <version>2.2.5.RELEASE</version>\n+        <version>${spring-cloud-gateway.version}</version>\n         <scope>test</scope>\n       </dependency>\n       <dependency>\n@@ -2981,10 +3022,6 @@ under the License.\n       </activation>\n \n       <properties>\n-        <spring.version>5.3.2</spring.version>\n-        <spring-boot.version>2.4.1</spring-boot.version>\n-        <spring-cloud-gateway.version>3.0.0</spring-cloud-gateway.version>\n-\n         <argLine>-Xms512m -Xmx1024m -Xss256k -Dnet.bytebuddy.experimental=true</argLine>\n       </properties>\n "},{"sha":"21645b4adedcee0f390a328c3404f366b06576ca","filename":"sra/src/main/java/org/apache/syncope/sra/SecurityConfig.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FSecurityConfig.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FSecurityConfig.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FSecurityConfig.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -66,6 +66,7 @@\n import org.springframework.security.oauth2.client.registration.InMemoryReactiveClientRegistrationRepository;\n import org.springframework.security.oauth2.core.AuthorizationGrantType;\n import org.springframework.security.oauth2.core.OAuth2TokenValidator;\n+import org.springframework.security.oauth2.core.oidc.OidcScopes;\n import org.springframework.security.oauth2.jwt.Jwt;\n import org.springframework.security.oauth2.jwt.JwtValidators;\n import org.springframework.security.oauth2.jwt.MappedJwtClaimSetConverter;\n@@ -138,6 +139,9 @@ public InMemoryReactiveClientRegistrationRepository oidcClientRegistrationReposi\n                         registrationId(\"OIDC\").\n                         clientId(env.getProperty(\"am.oidc.client.id\")).\n                         clientSecret(env.getProperty(\"am.oidc.client.secret\")).\n+                        scope(env.getProperty(\"am.oidc.scopes\", String[].class,\n+                                new String[] { OidcScopes.OPENID, OidcScopes.ADDRESS, OidcScopes.EMAIL,\n+                                    OidcScopes.PHONE, OidcScopes.PROFILE })).\n                         build());\n     }\n \n@@ -170,7 +174,7 @@ public ReactiveJwtDecoder oidcJWTDecoder() {\n     public InMemoryReactiveClientRegistrationRepository oauth2ClientRegistrationRepository() {\n         return new InMemoryReactiveClientRegistrationRepository(\n                 ClientRegistration.withRegistrationId(\"OAUTH2\").\n-                        redirectUriTemplate(\"{baseUrl}/{action}/oauth2/code/{registrationId}\").\n+                        redirectUri(\"{baseUrl}/{action}/oauth2/code/{registrationId}\").\n                         tokenUri(env.getProperty(\"am.oauth2.tokenUri\")).\n                         authorizationUri(env.getProperty(\"am.oauth2.authorizationUri\")).\n                         userInfoUri(env.getProperty(\"am.oauth2.userInfoUri\"))."},{"sha":"a9bb25e5463cf4de73baeeeef19eb3f9bc6ab000","filename":"sra/src/main/java/org/apache/syncope/sra/security/oauth2/OAuth2SecurityConfigUtils.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SecurityConfigUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SecurityConfigUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SecurityConfigUtils.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -117,8 +117,6 @@ public static void forLogout(\n             final LogoutRouteMatcher logoutRouteMatcher,\n             final ConfigurableApplicationContext ctx) {\n \n-        builder.and().logout().disable();\n-\n         LogoutWebFilter logoutWebFilter = new LogoutWebFilter();\n         logoutWebFilter.setRequiresLogoutMatcher(logoutRouteMatcher);\n         logoutWebFilter.setLogoutHandler(new OAuth2SessionRemovalServerLogoutHandler(cacheManager));\n@@ -136,7 +134,7 @@ public static void forLogout(\n             }\n         }\n \n-        builder.and().addFilterAt(logoutWebFilter, SecurityWebFiltersOrder.LOGOUT);\n+        builder.and().logout().disable().addFilterAt(logoutWebFilter, SecurityWebFiltersOrder.LOGOUT);\n     }\n \n     private OAuth2SecurityConfigUtils() {"},{"sha":"c7dc884df75a598e8ce4ed073239eeec828a7118","filename":"sra/src/main/java/org/apache/syncope/sra/security/oauth2/OAuth2SessionRemovalServerLogoutHandler.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SessionRemovalServerLogoutHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SessionRemovalServerLogoutHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2Fsecurity%2Foauth2%2FOAuth2SessionRemovalServerLogoutHandler.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -23,6 +23,7 @@\n import org.springframework.security.core.Authentication;\n import org.springframework.security.web.server.WebFilterExchange;\n import org.springframework.security.web.server.authentication.logout.ServerLogoutHandler;\n+import org.springframework.web.server.WebSession;\n import reactor.core.publisher.Mono;\n \n public class OAuth2SessionRemovalServerLogoutHandler implements ServerLogoutHandler {\n@@ -35,9 +36,8 @@ public OAuth2SessionRemovalServerLogoutHandler(final CacheManager cacheManager)\n \n     @Override\n     public Mono<Void> logout(final WebFilterExchange exchange, final Authentication authentication) {\n-        return exchange.getExchange().getSession().flatMap(session -> {\n-            cacheManager.getCache(SessionConfig.DEFAULT_CACHE).evictIfPresent(session.getId());\n-            return session.invalidate();\n-        });\n+        return exchange.getExchange().getSession().\n+                doOnNext(session -> cacheManager.getCache(SessionConfig.DEFAULT_CACHE).evictIfPresent(session.getId())).\n+                flatMap(WebSession::invalidate);\n     }\n }"},{"sha":"f8395e12d747731c79a93da9d6a5abb50a98118b","filename":"wa/pom.xml","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fpom.xml?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -33,6 +33,8 @@ under the License.\n   <packaging>pom</packaging>\n   \n   <properties>\n+    <nimbus-jose-jwt.version>8.20.1</nimbus-jose-jwt.version>\n+\n     <rootpom.basedir>${basedir}/..</rootpom.basedir>\n   </properties>\n "},{"sha":"44865499fbe7c2061ce463a4d0a00f070487a85d","filename":"wa/starter/pom.xml","status":"modified","additions":3,"deletions":22,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fpom.xml?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -298,14 +298,17 @@ under the License.\n       <groupId>org.bouncycastle</groupId>\n       <artifactId>bcpkix-jdk15on</artifactId>\n     </dependency>\n+\n     <dependency>\n       <groupId>commons-codec</groupId>\n       <artifactId>commons-codec</artifactId>\n     </dependency>\n+\n     <dependency>\n       <groupId>com.squareup.okio</groupId>\n       <artifactId>okio</artifactId>\n     </dependency>\n+\n     <dependency>\n       <groupId>org.apache.cxf</groupId>\n       <artifactId>cxf-rt-transports-http-jetty</artifactId>\n@@ -418,27 +421,5 @@ under the License.\n         </resources>\n       </build>\n     </profile>\n-\n-    <profile>\n-      <id>jdk16-plus</id>\n-\n-      <activation>\n-        <jdk>[16,)</jdk>\n-      </activation>\n-      \n-      <build>\n-        <plugins>\n-          <plugin>\n-            <groupId>org.apache.maven.plugins</groupId>\n-            <artifactId>maven-surefire-plugin</artifactId>\n-            <configuration>\n-              <includes>\n-                <include>**/SyncopeWASAML2*.java</include>\n-              </includes>            \n-            </configuration>\n-          </plugin>          \n-        </plugins>\n-      </build>\n-    </profile>\n   </profiles>\n </project>"},{"sha":"3dc1c36993c3a4d10e81effe6a71544cff87ac98","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/mapping/OIDCRPTOMapper.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPTOMapper.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPTOMapper.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPTOMapper.java?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -51,7 +51,7 @@ public class OIDCRPTOMapper implements ClientAppMapper {\n \n     private static final Logger LOG = LoggerFactory.getLogger(OIDCRPTOMapper.class);\n \n-    public static final String CUSTOM_SCOPE = \"syncope\";\n+    private static final String CUSTOM_SCOPE = \"syncope\";\n \n     @Override\n     public RegisteredService build("},{"sha":"104d2fbe1804d3f7beaf5e6d6d8d79156478ceae","filename":"wa/starter/src/main/resources/application.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fapplication.properties?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -26,7 +26,7 @@ server.servlet.encoding.force=true\n \n server.servlet.contextPath=/syncope-wa\n \n-spring.resources.static-locations=classpath:/thymeleaf/static,classpath:/static\n+spring.web.resources.static-locations=classpath:/thymeleaf/static,classpath:/static\n \n management.endpoints.web.exposure.include=health,loggers,refresh,registeredServices\n management.endpoint.health.show-details=always"},{"sha":"8a2c08a6f9f21d1736b5680c07c8d5e50cfc3daa","filename":"wa/starter/src/test/resources/debug/application-debug.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/f7328430e0436c794ccfc2a198e59734bbc04163/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties?ref=f7328430e0436c794ccfc2a198e59734bbc04163","patch":"@@ -14,3 +14,4 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n+#debug=true"}]}