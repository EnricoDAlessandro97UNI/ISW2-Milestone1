{"sha":"5619748edec5f2b5ebab5599489b8a14b5d23781","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjU2MTk3NDhlZGVjNWYyYjVlYmFiNTU5OTQ4OWI4YTE0YjVkMjM3ODE=","commit":{"author":{"name":"Jan Bernhardt","email":"jbernhardt@apache.org","date":"2013-01-15T16:27:50Z"},"committer":{"name":"Jan Bernhardt","email":"jbernhardt@apache.org","date":"2013-01-15T16:27:50Z"},"message":"Complete[SYNCOPE-259]\nCompleted missing Proxy methods\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1433497 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"9fa00420c7b4cb1a5f4f4347c810a4eda64510a3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/9fa00420c7b4cb1a5f4f4347c810a4eda64510a3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/5619748edec5f2b5ebab5599489b8a14b5d23781","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5619748edec5f2b5ebab5599489b8a14b5d23781","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5619748edec5f2b5ebab5599489b8a14b5d23781","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5619748edec5f2b5ebab5599489b8a14b5d23781/comments","author":null,"committer":null,"parents":[{"sha":"d5ec5018bf7197d34c3339892fc182d855fc5489","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d5ec5018bf7197d34c3339892fc182d855fc5489","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d5ec5018bf7197d34c3339892fc182d855fc5489"}],"stats":{"total":71,"additions":39,"deletions":32},"files":[{"sha":"3243dbc5c773a0d588a57f6096989aafad752ccd","filename":"client/src/main/java/org/apache/syncope/services/ReportService.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2FReportService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2FReportService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2FReportService.java?ref=5619748edec5f2b5ebab5599489b8a14b5d23781","patch":"@@ -29,6 +29,8 @@\n import javax.ws.rs.Produces;\r\n import javax.ws.rs.QueryParam;\r\n import javax.ws.rs.core.MediaType;\r\n+import javax.ws.rs.core.Response;\r\n+\r\n import org.apache.syncope.client.to.ReportExecTO;\r\n import org.apache.syncope.client.to.ReportTO;\r\n import org.apache.syncope.types.ReportExecExportFormat;\r\n@@ -75,7 +77,7 @@ List<ReportTO> list(@QueryParam(\"page\") int page,\n     @GET\r\n     @Path(\"executions/{executionId}\")\r\n     @Produces(MediaType.APPLICATION_OCTET_STREAM)\r\n-    void exportExecutionResult(@PathParam(\"executionId\") Long executionId,\r\n+    Response exportExecutionResult(@PathParam(\"executionId\") Long executionId,\r\n             @QueryParam(\"format\") ReportExecExportFormat fmt);\r\n \r\n     @POST\r"},{"sha":"a4d8fa4aa18f73f12fe688325d5b387021e5732b","filename":"client/src/main/java/org/apache/syncope/services/proxy/ConfigurationServiceProxy.java","status":"modified","additions":8,"deletions":6,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FConfigurationServiceProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FConfigurationServiceProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FConfigurationServiceProxy.java?ref=5619748edec5f2b5ebab5599489b8a14b5d23781","patch":"@@ -18,7 +18,9 @@\n  */\r\n package org.apache.syncope.services.proxy;\r\n \r\n+import java.io.InputStream;\r\n import java.util.Arrays;\r\n+import java.util.HashSet;\r\n import java.util.List;\r\n import java.util.Set;\r\n \r\n@@ -64,20 +66,20 @@ public ConfigurationTO update(String key, ConfigurationTO configurationTO) {\n \r\n     @Override\r\n     public Set<String> getValidators() {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return new HashSet<String>(Arrays.asList(getRestTemplate().getForObject(\r\n+                baseUrl + \"configuration/validators.json\", String[].class)));\r\n     }\r\n \r\n     @Override\r\n     public Set<String> getMailTemplates() {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return new HashSet<String>(Arrays.asList(getRestTemplate().getForObject(\r\n+                baseUrl + \"configuration/mailTemplates.json\", String[].class)));\r\n     }\r\n \r\n     @Override\r\n     public Response dbExport() {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return Response.ok(getRestTemplate().getForObject(baseUrl + \"configuration/dbexport\", InputStream.class))\r\n+                .build();\r\n     }\r\n \r\n }\r"},{"sha":"ea47302c31574858183e3925b294afe066a9e2c9","filename":"client/src/main/java/org/apache/syncope/services/proxy/ReportServiceProxy.java","status":"modified","additions":20,"deletions":15,"changes":35,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FReportServiceProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FReportServiceProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FReportServiceProxy.java?ref=5619748edec5f2b5ebab5599489b8a14b5d23781","patch":"@@ -18,9 +18,12 @@\n  */\r\n package org.apache.syncope.services.proxy;\r\n \r\n+import java.io.InputStream;\r\n import java.util.Arrays;\r\n import java.util.List;\r\n \r\n+import javax.ws.rs.core.Response;\r\n+\r\n import org.apache.syncope.client.to.ReportExecTO;\r\n import org.apache.syncope.client.to.ReportTO;\r\n import org.apache.syncope.services.ReportService;\r\n@@ -55,14 +58,13 @@ public List<ReportTO> list() {\n \r\n     @Override\r\n     public List<ReportTO> list(int page, int size) {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return Arrays.asList(getRestTemplate().getForObject(baseUrl + \"report/list/{page}/{size}\", ReportTO[].class,\r\n+                page, size));\r\n     }\r\n \r\n     @Override\r\n     public List<ReportExecTO> listExecutions() {\r\n-        return Arrays.asList(getRestTemplate().getForObject(baseUrl + \"report/execution/list\",\r\n-                ReportExecTO[].class));\r\n+        return Arrays.asList(getRestTemplate().getForObject(baseUrl + \"report/execution/list\", ReportExecTO[].class));\r\n     }\r\n \r\n     @Override\r\n@@ -78,32 +80,35 @@ public ReportTO read(Long reportId) {\n \r\n     @Override\r\n     public ReportExecTO readExecution(Long executionId) {\r\n-        return getRestTemplate().getForObject(baseUrl + \"report/execution/read/{reportId}\",\r\n-                ReportExecTO.class, executionId);\r\n+        return getRestTemplate().getForObject(baseUrl + \"report/execution/read/{executionId}\", ReportExecTO.class,\r\n+                executionId);\r\n     }\r\n \r\n     @Override\r\n-    public void exportExecutionResult(Long executionId, ReportExecExportFormat fmt) {\r\n-        // TODO Auto-generated method stub\r\n-\r\n+    public Response exportExecutionResult(Long executionId, ReportExecExportFormat fmt) {\r\n+        String format = (fmt != null)\r\n+                ? \"?fmt=\" + fmt.toString()\r\n+                : \"\";\r\n+        InputStream stream = getRestTemplate().getForObject(baseUrl + \"report/execution/export/{executionId}\" + format,\r\n+                InputStream.class, executionId);\r\n+        return Response.ok(stream).build();\r\n     }\r\n \r\n     @Override\r\n     public ReportExecTO execute(Long reportId) {\r\n-        return getRestTemplate().postForObject(baseUrl + \"report/execute/{reportId}\", null,\r\n-                ReportExecTO.class, reportId);\r\n+        return getRestTemplate().postForObject(baseUrl + \"report/execute/{reportId}\", null, ReportExecTO.class,\r\n+                reportId);\r\n     }\r\n \r\n     @Override\r\n     public ReportTO delete(Long reportId) {\r\n-        return getRestTemplate().getForObject(baseUrl + \"report/delete/{reportId}\",\r\n-                ReportTO.class, reportId);\r\n+        return getRestTemplate().getForObject(baseUrl + \"report/delete/{reportId}\", ReportTO.class, reportId);\r\n     }\r\n \r\n     @Override\r\n     public ReportExecTO deleteExecution(Long executionId) {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return getRestTemplate().getForObject(baseUrl + \"report/execution/delete/{executionId}\", ReportExecTO.class,\r\n+                executionId);\r\n     }\r\n \r\n }\r"},{"sha":"239fbaeefd71c1156f174a91b2f5ba18c6e5913b","filename":"client/src/main/java/org/apache/syncope/services/proxy/UserRequestServiceProxy.java","status":"modified","additions":8,"deletions":10,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FUserRequestServiceProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5619748edec5f2b5ebab5599489b8a14b5d23781/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FUserRequestServiceProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fservices%2Fproxy%2FUserRequestServiceProxy.java?ref=5619748edec5f2b5ebab5599489b8a14b5d23781","patch":"@@ -18,6 +18,7 @@\n  */\r\n package org.apache.syncope.services.proxy;\r\n \r\n+import java.util.Arrays;\r\n import java.util.List;\r\n \r\n import org.apache.syncope.client.mod.UserMod;\r\n@@ -34,8 +35,7 @@ public UserRequestServiceProxy(String baseUrl, RestTemplate restTemplate) {\n \r\n     @Override\r\n     public boolean isCreateAllowed() {\r\n-        // TODO Auto-generated method stub\r\n-        return false;\r\n+        return getRestTemplate().getForObject(baseUrl + \"user/request/create/allowed\", Boolean.class);\r\n     }\r\n \r\n     @Override\r\n@@ -50,26 +50,24 @@ public UserRequestTO update(UserMod userMod) {\n \r\n     @Override\r\n     public UserRequestTO delete(Long userId) {\r\n-        return getRestTemplate().getForObject(baseUrl + \"user/request/delete/{userId}\", UserRequestTO.class,\r\n-                userId);\r\n+        return getRestTemplate().getForObject(baseUrl + \"user/request/delete/{userId}\", UserRequestTO.class, userId);\r\n     }\r\n \r\n     @Override\r\n     public List<UserRequestTO> list() {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return Arrays.asList(getRestTemplate().getForObject(baseUrl + \"user/request/list\", UserRequestTO[].class));\r\n     }\r\n \r\n     @Override\r\n     public UserRequestTO read(Long requestId) {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return getRestTemplate()\r\n+                .getForObject(baseUrl + \"user/request/read/{requestId}\", UserRequestTO.class, requestId);\r\n     }\r\n \r\n     @Override\r\n     public UserRequestTO deleteRequest(Long requestId) {\r\n-        // TODO Auto-generated method stub\r\n-        return null;\r\n+        return getRestTemplate().getForObject(baseUrl + \"user/request/deleteRequest/{requestId}\", UserRequestTO.class,\r\n+                requestId);\r\n     }\r\n \r\n }\r"}]}