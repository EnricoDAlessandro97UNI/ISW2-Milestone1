{"sha":"24cb528e63752e36e3821e7f9303fef0a37c6753","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjI0Y2I1MjhlNjM3NTJlMzZlMzgyMWU3ZjkzMDNmZWYwYTM3YzY3NTM=","commit":{"author":{"name":"Andrea Patricelli","email":"andrea.patricelli@tirasa.net","date":"2015-12-30T15:21:21Z"},"committer":{"name":"Andrea Patricelli","email":"andrea.patricelli@tirasa.net","date":"2015-12-30T15:21:21Z"},"message":"[SYNCOPE-719] Added resource management to enduser","tree":{"sha":"a99249675c590e159443ee4693e47c3c7b6a2328","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a99249675c590e159443ee4693e47c3c7b6a2328"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/24cb528e63752e36e3821e7f9303fef0a37c6753","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/24cb528e63752e36e3821e7f9303fef0a37c6753","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/24cb528e63752e36e3821e7f9303fef0a37c6753","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/24cb528e63752e36e3821e7f9303fef0a37c6753/comments","author":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"committer":{"login":"andrea-patricelli","id":3763111,"node_id":"MDQ6VXNlcjM3NjMxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/3763111?v=4","gravatar_id":"","url":"https://api.github.com/users/andrea-patricelli","html_url":"https://github.com/andrea-patricelli","followers_url":"https://api.github.com/users/andrea-patricelli/followers","following_url":"https://api.github.com/users/andrea-patricelli/following{/other_user}","gists_url":"https://api.github.com/users/andrea-patricelli/gists{/gist_id}","starred_url":"https://api.github.com/users/andrea-patricelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrea-patricelli/subscriptions","organizations_url":"https://api.github.com/users/andrea-patricelli/orgs","repos_url":"https://api.github.com/users/andrea-patricelli/repos","events_url":"https://api.github.com/users/andrea-patricelli/events{/privacy}","received_events_url":"https://api.github.com/users/andrea-patricelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"44700ae51fb1356120b133baea12cd4a879cfc51","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/44700ae51fb1356120b133baea12cd4a879cfc51","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/44700ae51fb1356120b133baea12cd4a879cfc51"}],"stats":{"total":474,"additions":404,"deletions":70},"files":[{"sha":"b1c49ec8e45ffd042f65563843cb201231f2ef2d","filename":"client/enduser/pom.xml","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fpom.xml?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -127,6 +127,16 @@ under the License.\n       <groupId>org.webjars.bower</groupId>\n       <artifactId>angular-sanitize</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>org.webjars.bower</groupId>\n+      <artifactId>select2</artifactId>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>org.webjars.bower</groupId>\n+          <artifactId>jquery</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n     <dependency>\n       <groupId>org.webjars.bower</groupId>\n       <artifactId>FileSaver.js</artifactId>"},{"sha":"d1ab35c6f1b13ae2dd0640b7db4492cdf2d10242","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/SyncopeEnduserApplication.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -34,6 +34,7 @@\n import org.apache.syncope.client.enduser.resources.LogoutResource;\n import org.apache.syncope.client.enduser.resources.SchemaResource;\n import org.apache.syncope.client.enduser.resources.SecurityQuestionResource;\n+import org.apache.syncope.client.enduser.resources.SyncopeResourceResource;\n import org.apache.syncope.client.enduser.resources.UserSelfCreateResource;\n import org.apache.syncope.client.enduser.resources.UserSelfReadResource;\n import org.apache.syncope.client.enduser.resources.UserSelfUpdateResource;\n@@ -182,6 +183,16 @@ public IResource getResource() {\n             }\n         });\n \n+        mountResource(\"/api/resources\", new ResourceReference(\"resources\") {\n+\n+            private static final long serialVersionUID = -128426276529456602L;\n+\n+            @Override\n+            public IResource getResource() {\n+                return new SyncopeResourceResource();\n+            }\n+        });\n+        \n         mountResource(\"/api/securityQuestions\", new ResourceReference(\"securityQuestions\") {\n \n             private static final long serialVersionUID = -128426276529456602L;"},{"sha":"52459012714f7a70099f18ad70996f1eb0de2756","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/adapters/ResourceTOAdapter.java","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FResourceTOAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FResourceTOAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FResourceTOAdapter.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,41 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.enduser.adapters;\n+\n+import java.util.List;\n+import org.apache.syncope.client.enduser.model.ResourceResponse;\n+import org.apache.syncope.common.lib.to.ResourceTO;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class ResourceTOAdapter {\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(ResourceTOAdapter.class);\n+\n+    public ResourceResponse fromResourceTO(final List<ResourceTO> resourceTOs) {\n+\n+        ResourceResponse resourceTOResponse = new ResourceResponse();\n+\n+        for (ResourceTO resourceTO : resourceTOs) {\n+            resourceTOResponse.getResources().add(resourceTO.getKey());\n+        }\n+\n+        return resourceTOResponse;\n+    }\n+}"},{"sha":"2dc32dd7d999aace437b20a62e007ccaeb4a8845","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/adapters/UserTOAdapter.java","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FUserTOAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FUserTOAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fadapters%2FUserTOAdapter.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -54,6 +54,8 @@ public UserTO fromUserTORequest(final UserTORequest userTORequest, final String\n         userTO.getPlainAttrs().addAll(userTORequest.getPlainAttrs().values());\n         userTO.getDerAttrs().addAll(userTORequest.getDerAttrs().values());\n         userTO.getVirAttrs().addAll(userTORequest.getVirAttrs().values());\n+        // add resources\n+        userTO.getResources().addAll(userTORequest.getResources());\n \n         return userTO;\n     }\n@@ -70,6 +72,8 @@ public UserTORequest toUserTORequest(final UserTO userTO) {\n         userTORequest.getPlainAttrs().putAll(userTO.getPlainAttrMap());\n         userTORequest.getDerAttrs().putAll(userTO.getDerAttrMap());\n         userTORequest.getVirAttrs().putAll(userTO.getVirAttrMap());\n+        \n+        userTORequest.getResources().addAll(userTO.getResources());\n \n         return userTORequest;\n     }"},{"sha":"77efecc526289468a80f1ad273915a86e075ad15","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/model/ResourceResponse.java","status":"added","additions":45,"deletions":0,"changes":45,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FResourceResponse.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FResourceResponse.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FResourceResponse.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.enduser.model;\n+\n+import java.io.Serializable;\n+import java.util.HashSet;\n+import java.util.Set;\n+import org.apache.commons.lang3.builder.ToStringBuilder;\n+\n+public class ResourceResponse implements Serializable {\n+\n+    private static final long serialVersionUID = -7499232727784886980L;\n+\n+    private Set<String> resources = new HashSet<>();\n+\n+    public Set<String> getResources() {\n+        return resources;\n+    }\n+\n+    public void setResources(final Set<String> resources) {\n+        this.resources = resources;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return ToStringBuilder.reflectionToString(this);\n+    }\n+\n+}"},{"sha":"7196f39a17696af8f327156ef3860f657720d0e3","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/model/UserTORequest.java","status":"modified","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FUserTORequest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FUserTORequest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fmodel%2FUserTORequest.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -20,7 +20,9 @@\n \n import java.io.Serializable;\n import java.util.HashMap;\n+import java.util.HashSet;\n import java.util.Map;\n+import java.util.Set;\n import org.apache.commons.lang3.builder.ToStringBuilder;\n import org.apache.syncope.common.lib.to.AttrTO;\n \n@@ -46,6 +48,8 @@ public class UserTORequest implements Serializable {\n \n     private Map<String, AttrTO> virAttrs = new HashMap<>();\n \n+    private Set<String> resources = new HashSet<>();\n+\n     public UserTORequest() {\n     }\n \n@@ -121,6 +125,14 @@ public void setVirAttrs(final Map<String, AttrTO> virAttrs) {\n         this.virAttrs = virAttrs;\n     }\n \n+    public Set<String> getResources() {\n+        return resources;\n+    }\n+\n+    public void setResources(final Set<String> resources) {\n+        this.resources = resources;\n+    }\n+\n     public UserTORequest key(final Long value) {\n         this.key = value;\n         return this;\n@@ -166,6 +178,11 @@ public UserTORequest virAttrs(final Map<String, AttrTO> value) {\n         return this;\n     }\n \n+    public UserTORequest resources(final Set<String> value) {\n+        this.resources = value;\n+        return this;\n+    }\n+\n     @Override\n     public String toString() {\n         return ToStringBuilder.reflectionToString(this);"},{"sha":"0331ce1ae70b1e0cf608e44852394518a3e3259c","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/SyncopeResourceResource.java","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSyncopeResourceResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSyncopeResourceResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FSyncopeResourceResource.java?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,78 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.enduser.resources;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import javax.ws.rs.core.Response;\n+import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n+import org.apache.syncope.client.enduser.adapters.ResourceTOAdapter;\n+import org.apache.syncope.common.lib.to.ResourceTO;\n+import org.apache.syncope.common.rest.api.service.ResourceService;\n+import org.apache.syncope.core.misc.serialization.POJOHelper;\n+import org.apache.wicket.request.resource.AbstractResource;\n+import org.apache.wicket.request.resource.IResource;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class SyncopeResourceResource extends AbstractBaseResource {\n+\n+    private static final long serialVersionUID = 7475706378304995200L;\n+\n+    private static final Logger LOG = LoggerFactory.getLogger(SyncopeResourceResource.class);\n+\n+    private final ResourceService resourceService;\n+\n+    private final ResourceTOAdapter resourceTOAdapter;\n+\n+    public SyncopeResourceResource() {\n+        resourceTOAdapter = new ResourceTOAdapter();\n+        resourceService = SyncopeEnduserSession.get().getService(ResourceService.class);\n+    }\n+\n+    @Override\n+    protected AbstractResource.ResourceResponse newResourceResponse(final IResource.Attributes attributes) {\n+\n+        LOG.debug(\"Search all available resources\");\n+\n+        AbstractResource.ResourceResponse response = new AbstractResource.ResourceResponse();\n+\n+        try {\n+            final List<ResourceTO> resourceTOs = resourceService.list();\n+\n+            response.setWriteCallback(new AbstractResource.WriteCallback() {\n+\n+                @Override\n+                public void writeData(final IResource.Attributes attributes) throws IOException {\n+                    attributes.getResponse().write(POJOHelper.serialize(resourceTOAdapter.fromResourceTO(resourceTOs)));\n+                }\n+            });\n+            response.setStatusCode(Response.Status.OK.getStatusCode());\n+        } catch (Exception e) {\n+            LOG.error(\"Error retrieving available resources\", e);\n+            response.setError(Response.Status.BAD_REQUEST.getStatusCode(), new StringBuilder()\n+                    .append(\"ErrorMessage{{ \")\n+                    .append(e.getMessage())\n+                    .append(\" }}\")\n+                    .toString());\n+        }\n+        return response;\n+    }\n+\n+}"},{"sha":"f87981b00a6396bf63954b7ac79ab8c54ed4f730","filename":"client/enduser/src/main/resources/META-INF/resources/app/css/editUser.css","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2FeditUser.css","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2FeditUser.css","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fcss%2FeditUser.css?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -84,9 +84,9 @@ under the License.\n }\n \n .attribute-ui-select {\n-  width: 100%;\n-  padding-right: 7%;\n-  padding-left: 7%;\n+  width: 60%;\n+  margin-left: 20%;\n+  list-style: none;\n }\n \n #previous {"},{"sha":"21f88d0ef0d5fb118aea3359971f82c50d0055d0","filename":"client/enduser/src/main/resources/META-INF/resources/app/index.html","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Findex.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -82,6 +82,7 @@\n     <script src=\"js/services/realmService.js\"></script>\n     <script src=\"js/services/securityQuestionService.js\"></script>\n     <script src=\"js/services/infoService.js\"></script>\n+    <script src=\"js/services/resourceService.js\"></script>\n     <script src=\"js/services/captchaService.js\"></script>\n     <!--controllers-->\n     <script src=\"js/controllers/HomeController.js\"></script>\n@@ -99,6 +100,7 @@\n     <script src=\"js/directives/loader.js\"></script>\n     <script src=\"js/directives/equals.js\"></script>\n     <script src=\"js/directives/captcha.js\"></script>\n+    <script src=\"js/directives/resources.js\"></script>\n     <!--filters-->\n     <script src=\"js/filters/propsFilter.js\"></script>\n \n@@ -112,6 +114,7 @@\n     <link href=\"../webjars/ionicons/${ionicons.version}/css/ionicons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n     <link href=\"../webjars/angular-ui-select/${angular-ui-select.version}/select.css\" rel=\"stylesheet\" type=\"text/css\"/>\n     <link href=\"../webjars/angular-growl-2/${angular-growl-2.version}/angular-growl.css\" rel=\"stylesheet\" type=\"text/css\"/>\n+    <link href=\"../webjars/select2/${select2.version}/select2.css\" rel=\"stylesheet\" />\n     <link href=\"css/app.css\" rel=\"stylesheet\" type=\"text/css\" />\n     <link href=\"css/login.css\" rel=\"stylesheet\" type=\"text/css\" />\n     <link href=\"css/editUser.css\" rel=\"stylesheet\" type=\"text/css\" />"},{"sha":"4792ea49425e1ed741404b90f1c96efbdf9ef51b","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/app.js","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fapp.js?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -29,7 +29,7 @@ angular.module('info', []);\n var app = angular.module('SyncopeEnduserApp', [\n   'ui.router',\n   'ui.bootstrap',\n-//  'ui.select',\n+  'ui.select',\n   'ngSanitize',\n   'ngAnimate',\n   'ngResource',"},{"sha":"cb1689a4f125f76300532a2763f48756ed0144e2","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/controllers/UserController.js","status":"modified","additions":17,"deletions":9,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fcontrollers%2FUserController.js?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -20,9 +20,9 @@\n 'use strict';\n \n angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$location', '$compile', 'AuthService',\n-  'UserSelfService', 'SchemaService', 'RealmService', 'SecurityQuestionService', 'CaptchaService', 'growl', function ($scope,\n-          $rootScope, $location, $compile, AuthService, UserSelfService, SchemaService, RealmService, SecurityQuestionService,\n-          CaptchaService, growl) {\n+  'UserSelfService', 'SchemaService', 'RealmService', 'ResourceService', 'SecurityQuestionService', 'CaptchaService',\n+  'growl', function ($scope, $rootScope, $location, $compile, AuthService, UserSelfService, SchemaService, RealmService,\n+          ResourceService, SecurityQuestionService, CaptchaService, growl) {\n \n     $scope.user = {};\n     $scope.confirmPassword = {\n@@ -45,9 +45,11 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n         plainSchemas: [],\n         derSchemas: [],\n         virSchemas: [],\n+        resources: [],\n         errorMessage: '',\n         attributeTable: {},\n-        virtualAttributeTable: {}\n+        virtualAttributeTable: {},\n+        selectedResources: []\n       };\n \n       var initSchemas = function () {\n@@ -141,8 +143,6 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n           }\n           console.log(\"Error retrieving user schemas: \", errorMessage);\n         });\n-        console.log(\"USER WITH ATTRTO: \", $scope.user);\n-\n       };\n \n       var initSecurityQuestions = function () {\n@@ -167,12 +167,19 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n         $scope.user.realm = RealmService.getUserRealm();\n       };\n \n+      var initResources = function () {\n+        ResourceService.getResources().then(function (response) {\n+          $scope.dynamicForm.resources = response.resources;\n+        });\n+      };\n \n       var readUser = function () {\n         UserSelfService.read().then(function (response) {\n           $scope.user = response;\n           $scope.user.password = undefined;\n           $scope.initialSecurityQuestion = $scope.user.securityQuestion;\n+          // initialize already assigned resources\n+          $scope.dynamicForm.selectedResources = $scope.user.resources;\n         }, function () {\n           console.log(\"Error\");\n         });\n@@ -188,12 +195,11 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n           securityAnswer: '',\n           plainAttrs: {},\n           derAttrs: {},\n-          virAttrs: {}\n+          virAttrs: {},\n+          resources: []\n         };\n-\n         // retrieve user realm or all available realms\n         initUserRealm();\n-\n       } else {\n         // read user from syncope core\n         readUser();\n@@ -204,6 +210,8 @@ angular.module(\"self\").controller(\"UserController\", ['$scope', '$rootScope', '$l\n       initSecurityQuestions();\n       // initialize user attributes starting from any object schemas\n       initSchemas();\n+      // initialize available resources\n+      initResources();\n     };\n \n     $scope.saveUser = function (user) {"},{"sha":"bf1a822618009b01b2f18970c0309dcafc788721","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/directives/resources.js","status":"added","additions":51,"deletions":0,"changes":51,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2Fresources.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2Fresources.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fdirectives%2Fresources.js?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,51 @@\n+/* \n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+'use strict';\n+\n+angular.module('self')\n+        .directive('resources', function () {\n+          return {\n+            restrict: 'E',\n+            templateUrl: 'views/resources.html',\n+            scope: {\n+              dynamicForm: \"=form\",\n+              user: \"=\"\n+            },\n+            controller: function ($scope, $filter) {\n+              $scope.addResource = function (item, model) {\n+                var resource = item;\n+                $scope.user.resources.push(resource);\n+              };\n+\n+              $scope.removeResource = function (item, model) {\n+                var resourceIndex = $scope.getIndex(item);\n+                $scope.user.resources.splice(resourceIndex, 1);\n+\n+              };\n+\n+              $scope.getIndex = function (selectedResource) {\n+                var resourceIndex = $scope.user.resources.map(function (resourceName) {\n+                  return resourceName;\n+                }).indexOf(selectedResource);\n+                return resourceIndex;\n+              };\n+\n+            }\n+          };\n+        });"},{"sha":"06e378849a64cb8bac9cc47289451aae88e08220","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/services/resourceService.js","status":"added","additions":42,"deletions":0,"changes":42,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FresourceService.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FresourceService.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FresourceService.js?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,42 @@\n+/* \n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+'use strict';\n+\n+angular.module('self')\n+        .factory('ResourceService', ['$resource', '$q', '$http',\n+          function ($resource, $q, $http) {\n+\n+            var resourceService = {};\n+\n+            resourceService.getResources = function () {\n+\n+              return  $http.get(\"/syncope-enduser/api/resources\")\n+                      .then(function (response) {\n+                        console.log(\"resourceAPI response: \", response);\n+                        return response.data;\n+                      }, function (response) {\n+                        console.log(\"Something went wrong during resources retrieval, exit with status: \", response);\n+                        return $q.reject(response.data || response.statusText);\n+                      });\n+            };\n+            return resourceService;\n+          }]);\n+\n+"},{"sha":"06582dcc4561c1a6d541e06e3456f16b3de3b602","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/captcha.html","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fcaptcha.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -4,8 +4,10 @@\n       <div class=\"navbar-header\">\n         <img alt=\"captcha\" ng-src=\"{{captchaUrl}}'\"/>\n         <div style=\"margin-top: 5%\">\n-          <button id=\"refresh\" type=\"button\" class=\"btn btn-default btn-xs glyphicon glyphicon-refresh\" ng-click=\"refreshCaptcha()\" title=\"Refresh Captcha\"></button>\n-          <a id=\"refresh\" class=\"btn btn-default btn-xs glyphicon glyphicon-question-sign\" title=\"What is?\" href=\"https://it.wikipedia.org/wiki/CAPTCHA\"/>\n+          <button id=\"refresh\" type=\"button\" class=\"btn btn-default btn-xs glyphicon glyphicon-refresh\" \n+                  ng-click=\"refreshCaptcha()\" title=\"Refresh Captcha\"></button>\n+          <a id=\"refresh\" class=\"btn btn-default btn-xs glyphicon glyphicon-question-sign\" title=\"What is?\" \n+             href=\"https://it.wikipedia.org/wiki/CAPTCHA\"/>\n         </div>\n         <input class=\"form-control\" style=\"margin-top: 5%\" type=\"text\" ng-model=\"input.value\"/>\n       </div>"},{"sha":"e2dbcc1c5f525bae31a5b6e008edd2a5f9db3ffc","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicDerivedAttribute.html","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttribute.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -1,5 +1,5 @@\n-<div>\n+<p>\n   <input class=\"form-control\" type=\"text\"\n          ng-model=\"user.derAttrs[schema.key].values[index]\"\n          ng-disabled=\"true\"/>\n-</div>\n\\ No newline at end of file\n+</p>\n\\ No newline at end of file"},{"sha":"0a3ce3e63301333275b5977d3dab8b46a436fda8","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicDerivedAttributes.html","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttributes.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttributes.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicDerivedAttributes.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -1,4 +1,6 @@\n <div id=\"attribute\" class=\"form-group\" ng-repeat=\"derSchema in dynamicForm.derSchemas\">\n-    <label for=\"derivedSchema.key\">{{derSchema.key}}</label>  <span uib-popover=\"{{derSchema.expression}}\" popover-trigger=\"mouseenter\" class=\"glyphicon glyphicon-question-sign\"/>\n+  <label for=\"derivedSchema.key\">{{derSchema.key}}</label>  <span uib-popover=\"{{derSchema.expression}}\" \n+                                                                  popover-trigger=\"mouseenter\" \n+                                                                  class=\"glyphicon glyphicon-question-sign\"/>\n   <dynamic-derived-attribute schema=\"derSchema\" user=\"user\" index=\"0\"></dynamic-derived-attribute>\n </div>"},{"sha":"a0ccac612e90f83acebc0973a6212a47af7dd3a0","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicPlainAttribute.html","status":"modified","additions":31,"deletions":29,"changes":60,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttribute.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -11,9 +11,11 @@\n     <input type=\"checkbox\" ng-model=\"user.plainAttrs[schema.key].values[index]\" ng-required=\"schema.mandatoryCondition\" \n            ng-init=\"initAttribute(schema, index)\" />\n   </div>\n-  <input ng-switch-when=\"Long\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" ng-required=\"schema.mandatoryCondition\"\n+  <input ng-switch-when=\"Long\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" \n+         ng-required=\"schema.mandatoryCondition\"\n          ng-init=\"initAttribute(schema, index)\" />\n-  <input ng-switch-when=\"Double\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\" ng-required=\"schema.mandatoryCondition\"\n+  <input ng-switch-when=\"Double\" class=\"form-control\" type=\"number\" ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+         ng-required=\"schema.mandatoryCondition\"\n          ng-init=\"initAttribute(schema, index)\" />\n   <p ng-switch-when=\"Date\" class=\"input-group\" >\n     <input type=\"text\" class=\"form-control\" \n@@ -23,36 +25,36 @@\n            min-date=\"minDate\" max-date=\"maxDate\"\n            is-open=\"status.opened\" datepicker-options=\"dateOptions\"\n            ng-required=\"schema.mandatoryCondition\" close-text=\"Close\" ng-init=\"initAttribute(schema, index)\"/>\n-    <span class=\"input-group-btn\">\n-      <button type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button>\n-    </span>\n-  </p>\n+  <span class=\"input-group-btn\">\n+    <button type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button>\n+  </span>\n+</p>\n \n-  <div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n-    <select class=\"form-control\"\n-            ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-            ng-required=\"schema.mandatoryCondition\">\n-      <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">{{schema.enumerationKeys[$index] || value}}</option>\n-    </select>\n-  </div>\n+<div ng-switch-when=\"Enum\" ng-init=\"initAttribute(schema, index)\">\n+  <select class=\"form-control\"\n+          ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+          ng-required=\"schema.mandatoryCondition\">\n+    <option ng-repeat=\"value in enumerationValues\" value=\"{{value}}\">{{schema.enumerationKeys[$index] || value}}</option>\n+  </select>\n+</div>\n \n-  <div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n-    <div enctype=\"multipart/form-data\" accept-charset=\"UTF-8\">\n-      <input id=\"fileInput\" type=\"file\" ng-required=\"schema.mandatoryCondition\"/>\n-      <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n-        <i class=\"glyphicon glyphicon-download\" ></i>\n-      </button>\n-      <button type=\"button\" class=\"fileButton btn btn-default btn-sm\" title=\"Remove file\" ng-click=\"remove()\">\n-        <i class=\"glyphicon glyphicon-remove-sign\" ></i>\n-      </button>\n-      <h4><span class=\"label label-primary\" ng-model=\"userFile\">{{userFile}}</span></h4>\n-    </div>\n-    \n+<div ng-switch-when=\"Binary\" ng-init=\"initAttribute(schema, index)\">\n+  <div enctype=\"multipart/form-data\" accept-charset=\"UTF-8\">\n+    <input id=\"fileInput\" type=\"file\" ng-required=\"schema.mandatoryCondition\"/>\n+    <button type=\"button\" title=\"Download file\" class=\"fileButton btn btn-default btn-sm\" ng-click=\"download()\">\n+      <i class=\"glyphicon glyphicon-download\" ></i>\n+    </button>\n+    <button type=\"button\" class=\"fileButton btn btn-default btn-sm\" title=\"Remove file\" ng-click=\"remove()\">\n+      <i class=\"glyphicon glyphicon-remove-sign\" ></i>\n+    </button>\n+    <h4><span class=\"label label-primary\" ng-model=\"userFile\">{{userFile}}</span></h4>\n   </div>\n \n-  <input ng-switch-default class=\"form-control\" type=\"text\"\n-         ng-model=\"user.plainAttrs[schema.key].values[index]\"\n-         ng-required=\"schema.mandatoryCondition\" \n-         ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"/>\n+</div>\n+\n+<input ng-switch-default class=\"form-control\" type=\"text\"\n+       ng-model=\"user.plainAttrs[schema.key].values[index]\"\n+       ng-required=\"schema.mandatoryCondition\" \n+       ng-disabled=\"schema.readonly\" ng-init=\"initAttribute(schema, index)\"/>\n \n </div>"},{"sha":"1b39950ac91a098030aeaf7396a7ba834438e62d","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicPlainAttributes.html","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttributes.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttributes.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicPlainAttributes.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -5,10 +5,12 @@\n   </div>\n \n   <div ng-if=\"plainSchema.multivalue\">\n-    <div ng-repeat=\"field in dynamicForm.attributeTable[plainSchema.key].fields track by $index\" ng-model='dynamicForm.attributeTable[plainSchema.key].fields[$index]'>\n+    <div ng-repeat=\"field in dynamicForm.attributeTable[plainSchema.key].fields track by $index\" \n+         ng-model='dynamicForm.attributeTable[plainSchema.key].fields[$index]'>\n       <dynamic-plain-attribute schema=\"plainSchema\" user=\"user\" index=\"$index\"></dynamic-plain-attribute>\n       <span>\n-        <button class=\"btn btn-default btn-sm minus\" ng-if=\"$index > 0\" type=\"button\" ng-click=\"removeAttributeField(plainSchema.key, $index)\">\n+        <button class=\"btn btn-default btn-sm minus\" ng-if=\"$index > 0\" type=\"button\" \n+                ng-click=\"removeAttributeField(plainSchema.key, $index)\">\n           <i class=\"glyphicon glyphicon-minus\" title=\"Remove value\"></i>\n         </button>\n       </span>"},{"sha":"e7f6b9b17bf6d9c0f08778ff400840f501181a70","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicVirtualAttribute.html","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttribute.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -1,5 +1,5 @@\n-<div>\n+<p>\n   <input class=\"form-control\" type=\"text\"\n          ng-model=\"user.virAttrs[schema.key].values[index]\"\n          ng-disabled=\"schema.readonly\"/>\n-</div>\n\\ No newline at end of file\n+</p>\n\\ No newline at end of file"},{"sha":"8600e3ac4d098d9d712cfec1aa5189cf6124dbf3","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/dynamicVirtualAttributes.html","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttributes.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttributes.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2FdynamicVirtualAttributes.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -1,10 +1,12 @@\n <div id=\"attribute\" class=\"form-group\" ng-repeat=\"virtualSchema in dynamicForm.virSchemas\">\n   <label for=\"virtualSchema.key\">{{virtualSchema.key}}</label>\n   <!--all virtual schemas are multivalue-->\n-  <div ng-repeat=\"field in dynamicForm.virtualAttributeTable[virtualSchema.key].fields track by $index\" ng-model='dynamicForm.virtualAttributeTable[virtualSchema.key].fields[$index]'>\n+  <div ng-repeat=\"field in dynamicForm.virtualAttributeTable[virtualSchema.key].fields track by $index\" \n+       ng-model='dynamicForm.virtualAttributeTable[virtualSchema.key].fields[$index]'>\n     <dynamic-virtual-attribute schema=\"virtualSchema\" user=\"user\" index=\"$index\"></dynamic-virtual-attribute>\n     <span>\n-      <button class=\"btn btn-default btn-sm minus\" ng-if=\"$index > 0\" type=\"button\" ng-click=\"removeVirtualAttributeField(virtualSchema.key, $index)\">\n+      <button class=\"btn btn-default btn-sm minus\" ng-if=\"$index > 0\" type=\"button\" \n+              ng-click=\"removeVirtualAttributeField(virtualSchema.key, $index)\">\n         <i class=\"glyphicon glyphicon-minus\" title=\"Remove value\"></i>\n       </button>\n     </span>"},{"sha":"f2c1a10dd93d7fb0ebe5244f298c775fac28a1e1","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/resources.html","status":"added","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fresources.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fresources.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fresources.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -0,0 +1,12 @@\n+<ui-select on-select=\"addResource($item, $model)\" on-remove=\"removeResource($item, $model)\" multiple\n+           ng-model=\"dynamicForm.selectedResources\" theme=\"select2\" class=\"attribute-ui-select\">\n+  <ui-select-match placeholder=\"Select resource...\">{{$item}}</ui-select-match>\n+  <ui-select-choices repeat=\"resource in dynamicForm.resources\">\n+    <div ng-bind-html=\"resource | highlight: $select.search\"></div>\n+  </ui-select-choices>\n+</ui-select>\n+<ul class=\"attribute-ui-select\">\n+  <li class=\"attribute-virtual-value-field\" ng-if=\"dynamicForm.selectedResources.length == 0\">\n+    <strong>No resources selected...</strong>\n+  </li>\n+</ul>\n\\ No newline at end of file"},{"sha":"93d85fbb6aacf627953dcb695a8a78105a42a0b5","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/self.html","status":"modified","additions":2,"deletions":15,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fself.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fself.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fself.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -75,7 +75,8 @@\n \n                 <div class=\"form-group\">\n \n-                  <button type=\"submit\" id=\"login-btn\" class=\"btn btn-default btn-signin login-btn\" ng-click=\"login(credentials)\">Login</button>\n+                  <button type=\"submit\" id=\"login-btn\" class=\"btn btn-default btn-signin login-btn\" \n+                          ng-click=\"login(credentials)\">Login</button>\n                 </div>\n               </fieldset>\n             </form>\n@@ -96,20 +97,6 @@\n         <!-- /#login-container -->\n       </div> <!-- /#login -->\n     </div>\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n     <!--    <div class=\"container\" ng-cloak ng-controller=\"LoginController\">\n           <div class=\"card card-container\">\n             <img class=\"login-logo\" src=\"img/logo-green.png\" />"},{"sha":"a257ebbc61a90cef6b9338020e0575cb3f955b07","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/user-credentials.html","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-credentials.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-credentials.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-credentials.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -47,7 +47,8 @@\n \n <div id=\"attribute\" class=\"form-group\">\n   <label for=\"securityAnswer\">Security Answer</label>\n-  <input ng-disabled=\"user.securityQuestion === initialSecurityQuestion\" name=\"securityAnswer\" type=\"text\" class=\"form-control\" ng-model=\"user.securityAnswer\"\n+  <input ng-disabled=\"user.securityQuestion === initialSecurityQuestion\" name=\"securityAnswer\" type=\"text\" class=\"form-control\" \n+         ng-model=\"user.securityAnswer\"\n          placeholder=\"security answer\">\n </div>\n "},{"sha":"d2498c0235fd221d40144aa9008fb664bae4804f","filename":"client/enduser/src/main/resources/META-INF/resources/app/views/user-resources.html","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-resources.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-resources.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fviews%2Fuser-resources.html?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -17,7 +17,9 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-\n+<div>\n+  <resources form=\"dynamicForm\" user=\"user\"></resources>\n+</div>\n <div id=\"attribute\" class=\"form-group row\">\n   <navigation-buttons ng-show=\"createMode\" next=\"create.finish\" previous=\"create.plainSchemas\"></navigation-buttons>\n   <navigation-buttons ng-show=\"!createMode\" next=\"update.finish\" previous=\"update.plainSchemas\"></navigation-buttons>"},{"sha":"a000388dfd7447af792cd27568cfbc041d9a27a0","filename":"pom.xml","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/24cb528e63752e36e3821e7f9303fef0a37c6753/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/24cb528e63752e36e3821e7f9303fef0a37c6753/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=24cb528e63752e36e3821e7f9303fef0a37c6753","patch":"@@ -402,6 +402,7 @@ under the License.\n     <angular-ui-select.version>0.13.1</angular-ui-select.version>\n     <angular-sanitize.version>1.4.8</angular-sanitize.version>\n     <angular-growl-2.version>0.7.3</angular-growl-2.version>\n+    <select2.version>3.4.8</select2.version>\n     <FileSaver.version>0.0.2</FileSaver.version>\n     \n     <izpack.version>5.0.6</izpack.version>\n@@ -1077,6 +1078,17 @@ under the License.\n         <artifactId>angular-growl-2</artifactId>\n         <version>${angular-growl-2.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.webjars.bower</groupId>\n+        <artifactId>select2</artifactId>\n+        <version>${select2.version}</version>\n+        <exclusions>\n+          <exclusion>\n+            <groupId>org.webjars.bower</groupId>\n+            <artifactId>jquery</artifactId>\n+          </exclusion>\n+        </exclusions>\n+      </dependency>\n       <dependency>\n         <groupId>org.webjars.bower</groupId>\n         <artifactId>FileSaver.js</artifactId>"}]}