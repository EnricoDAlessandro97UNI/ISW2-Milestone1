{"sha":"7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc1MjBkMTVjOGE2MTdhMGQyMGM0YTVhM2ZlNGQ3MGMyNzAyNWNlMTE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-16T11:12:32Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2018-11-16T11:13:01Z"},"message":"[SYNCOPE-1395] Adding docs","tree":{"sha":"ed6af90b0c5767d9535273503980946305b80cc1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/ed6af90b0c5767d9535273503980946305b80cc1"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"a3aae8591c51459c70c88b52b75d292a8cefeba9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a3aae8591c51459c70c88b52b75d292a8cefeba9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a3aae8591c51459c70c88b52b75d292a8cefeba9"}],"stats":{"total":124,"additions":113,"deletions":11},"files":[{"sha":"a51cabae7b9d4168514d0202f25fba13f1518133","filename":"core/persistence-jpa-pgjsonb/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/core%2Fpersistence-jpa-pgjsonb%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/core%2Fpersistence-jpa-pgjsonb%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa-pgjsonb%2Fpom.xml?ref=7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","patch":"@@ -92,7 +92,7 @@ under the License.\n           </dependency>\n         </dependencies>\n         <configuration>\n-          <persistenceXmlFile>${project.basedir}/../persistence-jpa/src/main/resources/persistence-enhance.xml</persistenceXmlFile> \n+          <persistenceXmlFile>src/main/resources/persistence-enhance.xml</persistenceXmlFile> \n           <includes>org/apache/syncope/core/persistence/jpa/entity/**/*.class</includes>\n           <connectionDriverName>org.springframework.jdbc.datasource.DriverManagerDataSource</connectionDriverName>\n           <connectionProperties>"},{"sha":"718f22953e2ab0c23b9c80489f08d86f45288ca9","filename":"core/persistence-jpa-pgjsonb/src/main/resources/persistence-enhance.xml","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/core%2Fpersistence-jpa-pgjsonb%2Fsrc%2Fmain%2Fresources%2Fpersistence-enhance.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/core%2Fpersistence-jpa-pgjsonb%2Fsrc%2Fmain%2Fresources%2Fpersistence-enhance.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpersistence-jpa-pgjsonb%2Fsrc%2Fmain%2Fresources%2Fpersistence-enhance.xml?ref=7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","patch":"@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n+             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence\n+                                 http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n+             version=\"2.0\">\n+  \n+  <persistence-unit name=\"Master\">\n+    <mapping-file>META-INF/spring-orm-pgjsonb.xml</mapping-file>\n+    <validation-mode>NONE</validation-mode>\n+  </persistence-unit>\n+  \n+</persistence>"},{"sha":"a1d1672bd027783b426bc8c5206d65c29e87c5e7","filename":"src/main/asciidoc/reference-guide/workingwithapachesyncope/systemadministration/dbms.adoc","status":"modified","additions":81,"deletions":10,"changes":91,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fdbms.adoc","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/7520d15c8a617a0d20c4a5a3fe4d70c27025ce11/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fdbms.adoc","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fmain%2Fasciidoc%2Freference-guide%2Fworkingwithapachesyncope%2Fsystemadministration%2Fdbms.adoc?ref=7520d15c8a617a0d20c4a5a3fe4d70c27025ce11","patch":"@@ -27,14 +27,14 @@ updated.\n [NOTE]\n Apache Syncope {docVersion} is verified with PostgreSQL server >= 10.3 and JDBC driver >= {postgresqlJDBC}.\n \n-In `provisioning.properties`:\n+In `provisioning.properties`, replace as follows:\n \n ....\n quartz.jobstore=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n quartz.sql=tables_postgres.sql\n ....\n \n-In `domains/Master.properties` (for the `Master` domain):\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n \n ....\n Master.driverClassName=org.postgresql.Driver\n@@ -59,12 +59,83 @@ https://github.com/apache/syncope/tree/master/fit/core-reference/src/main/resour\n endif::[]\n and save it under `core/src/main/resources/`.\n \n+===== PostgreSQL (JSONB)\n+\n+[NOTE]\n+With the configurations reported below, Apache Syncope will leverage the\n+https://www.postgresql.org/docs/current/datatype-json.html[JSONB^] column type for attribute storage.\n+\n+[NOTE]\n+Apache Syncope {docVersion} is verified with PostgreSQL server >= 10.3 and JDBC driver >= {postgresqlJDBC}.\n+\n+In `persistence.properties`, replace as follows:\n+\n+....\n+entity.factory=org.apache.syncope.core.persistence.jpa.entity.PGJPAEntityFactory\n+plainSchema.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAPlainSchemaDAO\n+plainAttr.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAPlainAttrDAO\n+plainAttrValue.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAPlainAttrValueDAO\n+any.search.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAAnySearchDAO\n+user.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAUserDAO\n+group.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAGroupDAO\n+anyObject.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAAnyObjectDAO\n+conf.dao=org.apache.syncope.core.persistence.jpa.dao.PGJPAConfDAO\n+....\n+\n+In `provisioning.properties`, replace as follows:\n+\n+....\n+quartz.jobstore=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n+quartz.sql=tables_postgres.sql\n+....\n+\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n+\n+....\n+Master.driverClassName=org.postgresql.Driver\n+Master.url=jdbc:postgresql://localhost:5432/syncope?stringtype=unspecified\n+Master.schema=\n+Master.username=syncope\n+Master.password=syncope\n+Master.databasePlatform=org.apache.openjpa.jdbc.sql.PostgresDictionary\n+Master.orm=META-INF/spring-orm-pgjsonb.xml\n+....\n+\n+[WARNING]\n+This assumes that you have a PostgreSQL instance running on localhost, listening on its default port 5432 with a\n+database `syncope` fully accessible by user `syncope` with password `syncope`.\n+\n+Download\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/fit/core-reference/src/main/resources/pgjsonb/indexes.xml[indexes.xml^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/tree/master/fit/core-reference/src/main/resources/pgjsonb/indexes.xml[indexes.xml^]\n+endif::[]\n+and\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion}/fit/core-reference/src/main/resources/pgjsonb/views.xml[views.xml^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/tree/master/fit/core-reference/src/main/resources/pgjsonb/views.xml[views.xml^]\n+endif::[]\n+then save both under `core/src/main/resources/`.\n+\n+Download\n+ifeval::[\"{snapshotOrRelease}\" == \"release\"]\n+https://github.com/apache/syncope/blob/syncope-{docVersion/core/persistence-jpa-pgjsonb/src/test/resources/domains/MasterContent.xml[MasterContent.xml^]\n+endif::[]\n+ifeval::[\"{snapshotOrRelease}\" == \"snapshot\"]\n+https://github.com/apache/syncope/blob/master/core/persistence-jpa-pgjsonb/src/test/resources/domains/MasterContent.xml[MasterContent.xml^]\n+endif::[]\n+and save it under `core/src/test/resources/`.\n+\n ===== MySQL\n \n [NOTE]\n Apache Syncope {docVersion} is verified with MySQL server >= 5.7 and JDBC driver >= {mysqlJDBC}.\n \n-In `provisioning.properties`:\n+In `provisioning.properties`, replace as follows:\n \n ....\n quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n@@ -75,7 +146,7 @@ quartz.sql=tables_mysql_innodb.sql\n This assumes that the InnoDB engine is enabled in your MySQL instance - if this is not the case, then change the value\n for `quartz.sql` to `tables_mysql.sql`.\n \n-In `domains/Master.properties` (for the `Master` domain):\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n \n ....\n Master.driverClassName=com.mysql.jdbc.Driver\n@@ -104,7 +175,7 @@ This assumes that you have a MySQL instance running on localhost, listening on i\n [NOTE]\n Apache Syncope {docVersion} is verified with MariaDB server >= 10.3.7 and JDBC driver >= {mariadbJDBC}.\n \n-In `provisioning.properties`:\n+In `provisioning.properties`, replace as follows:\n \n ....\n quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n@@ -115,7 +186,7 @@ quartz.sql=tables_mariadb.sql\n This assumes that the InnoDB engine is enabled in your MariaDB instance - if this is not the case, then change the value\n for `quartz.sql` to `tables_mariadb.sql`.\n \n-In `domains/Master.properties` (for the `Master` domain):\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n \n ....\n Master.driverClassName=org.mariadb.jdbc.Driver\n@@ -139,14 +210,14 @@ This assumes that you have a MariaDB instance running on localhost, listening on\n [NOTE]\n Apache Syncope {docVersion} is verified with Oracle database >= 11g and JDBC driver >= ojdbc8 12.2.0.1.\n \n-In `provisioning.properties`:\n+In `provisioning.properties`, replace as follows:\n \n ....\n quartz.jobstore=org.quartz.impl.jdbcjobstore.oracle.OracleDelegate\n quartz.sql=tables_oracle.sql\n ....\n \n-In `domains/Master.properties` (for the `Master` domain):\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n \n ....\n Master.driverClassName=oracle.jdbc.OracleDriver\n@@ -168,14 +239,14 @@ This assumes that you have an Oracle instance running on localhost, listening on\n [NOTE]\n Apache Syncope {docVersion} is verified with MS SQL server >= 2017 and JDBC driver >= {sqlserverJDBC}8.\n \n-In `provisioning.properties`:\n+In `provisioning.properties`, replace as follows:\n \n ....\n quartz.jobstore=org.quartz.impl.jdbcjobstore.MSSQLDelegate\n quartz.sql=tables_sqlServer.sql\n ....\n \n-In `domains/Master.properties` (for the `Master` domain):\n+In `domains/Master.properties` (for the `Master` domain), replace as follows:\n \n ....\n Master.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver"}]}