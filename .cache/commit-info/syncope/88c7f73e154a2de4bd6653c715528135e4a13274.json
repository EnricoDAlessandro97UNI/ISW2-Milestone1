{"sha":"88c7f73e154a2de4bd6653c715528135e4a13274","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjg4YzdmNzNlMTU0YTJkZTRiZDY2NTNjNzE1NTI4MTM1ZTRhMTMyNzQ=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-11-26T10:29:21Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-11-26T10:43:54Z"},"message":"[SYNCOPE-1518] Conditionally enabling Wicket's XForwardedRequestWrapperFactory","tree":{"sha":"95df1b4cadde21e71d2a766fda3b179a9fb7fcdb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/95df1b4cadde21e71d2a766fda3b179a9fb7fcdb"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/88c7f73e154a2de4bd6653c715528135e4a13274","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/88c7f73e154a2de4bd6653c715528135e4a13274","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/88c7f73e154a2de4bd6653c715528135e4a13274","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/88c7f73e154a2de4bd6653c715528135e4a13274/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"6ed1246e7b72a00b237ff679f1a9b07ae232fc2c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6ed1246e7b72a00b237ff679f1a9b07ae232fc2c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/6ed1246e7b72a00b237ff679f1a9b07ae232fc2c"}],"stats":{"total":16,"additions":16,"deletions":0},"files":[{"sha":"0b1cdb7555ee844db5e721c7ec3f81b521c1060d","filename":"client/idrepo/console/src/main/java/org/apache/syncope/client/console/SyncopeWebApplication.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeWebApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeWebApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2FSyncopeWebApplication.java?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -49,6 +49,7 @@\n import org.apache.wicket.authroles.authorization.strategies.role.metadata.MetaDataRoleAuthorizationStrategy;\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.protocol.http.servlet.XForwardedRequestWrapperFactory;\n import org.apache.wicket.protocol.ws.WebSocketAwareCsrfPreventionRequestCycleListener;\n import org.apache.wicket.protocol.ws.api.WebSocketResponse;\n import org.apache.wicket.request.cycle.RequestCycle;\n@@ -248,6 +249,10 @@ protected IRequestablePage getErrorPage(final PageParameters errorParameters) {\n             }\n         });\n \n+        if (BooleanUtils.toBoolean(props.getProperty(\"x-forward\"))) {\n+            getFilterFactoryManager().add(new XForwardedRequestWrapperFactory());\n+        }\n+\n         if (BooleanUtils.toBoolean(props.getProperty(\"csrf\"))) {\n             getRequestCycleListeners().add(new WebSocketAwareCsrfPreventionRequestCycleListener());\n         }"},{"sha":"06c08b9b9801cde7e9c3db2ff475d8d9641b915d","filename":"client/idrepo/console/src/main/resources/console.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconsole.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -43,6 +43,7 @@ topology.corePoolSize=10\n topology.maxPoolSize=20\n topology.queueCapacity=50\n \n+x-forward=true\n csrf=true\n \n security.headers.X-XSS-Protection=1; mode=block"},{"sha":"1794cb539484a0fbae9d3cac5dd349fcbb92ce5b","filename":"client/idrepo/enduser/src/main/java/org/apache/syncope/client/enduser/SyncopeWebApplication.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeWebApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeWebApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeWebApplication.java?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -66,6 +66,7 @@\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.protocol.http.CsrfPreventionRequestCycleListener;\n import org.apache.wicket.protocol.http.WebApplication;\n+import org.apache.wicket.protocol.http.servlet.XForwardedRequestWrapperFactory;\n import org.apache.wicket.request.Request;\n import org.apache.wicket.request.Response;\n import org.apache.wicket.request.component.IRequestablePage;\n@@ -299,6 +300,10 @@ protected IRequestablePage getErrorPage(final PageParameters errorParameters) {\n \n         });\n \n+        if (BooleanUtils.toBoolean(props.getProperty(\"x-forward\"))) {\n+            getFilterFactoryManager().add(new XForwardedRequestWrapperFactory());\n+        }\n+\n         if (BooleanUtils.toBoolean(props.getProperty(\"csrf\"))) {\n             getRequestCycleListeners().add(new CsrfPreventionRequestCycleListener());\n         }"},{"sha":"1d62418d6db7a3cb651f673239581b6ae244fe9e","filename":"client/idrepo/enduser/src/main/resources/enduser.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fidrepo%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -22,6 +22,7 @@ adminUser=${adminUser}\n useGZIPCompression=true\n maxUploadFileSizeMB=5\n \n+x-forward=true\n captcha=true\n csrf=true\n "},{"sha":"c8ece6f6784a78e7a64721628b143b571a053444","filename":"fit/console-reference/src/main/resources/console.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fconsole-reference%2Fsrc%2Fmain%2Fresources%2Fconsole.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -43,6 +43,7 @@ topology.corePoolSize=50\n topology.maxPoolSize=100\n topology.queueCapacity=10\n \n+x-forward=true\n csrf=true\n \n security.headers.X-XSS-Protection=1; mode=block"},{"sha":"2162ddb8ff424db80fa29bbfc75e29bc03034242","filename":"fit/core-reference/src/test/resources/console.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fconsole.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -43,6 +43,7 @@ executor.corePoolSize=50\n executor.maxPoolSize=100\n executor.queueCapacity=10\n \n+x-forward=true\n csrf=false\n \n security.headers.X-XSS-Protection=1; mode=block"},{"sha":"6c48a209fe2e68729faca1a0ba995de0e2e409c0","filename":"fit/core-reference/src/test/resources/enduser.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fenduser.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fenduser.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fresources%2Fenduser.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -21,6 +21,7 @@ anonymousKey=${anonymousKey}\n adminUser=${adminUser}\n useGZIPCompression=true\n \n+x-forward=true\n captcha=false\n csrf=false\n "},{"sha":"1d62418d6db7a3cb651f673239581b6ae244fe9e","filename":"fit/enduser-reference/src/main/resources/enduser.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/88c7f73e154a2de4bd6653c715528135e4a13274/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties?ref=88c7f73e154a2de4bd6653c715528135e4a13274","patch":"@@ -22,6 +22,7 @@ adminUser=${adminUser}\n useGZIPCompression=true\n maxUploadFileSizeMB=5\n \n+x-forward=true\n captcha=true\n csrf=true\n "}]}