{"sha":"8cbafc7c0aebf5bf89697ab89c0828f589af3d49","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjhjYmFmYzdjMGFlYmY1YmY4OTY5N2FiODljMDgyOGY1ODlhZjNkNDk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-09-26T10:53:26Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-09-26T10:53:26Z"},"message":"[SYNCOPE-135] Merge from 1_2_X\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1627743 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"40781742bcb4dca1375fea943e0758cee27e68b2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/40781742bcb4dca1375fea943e0758cee27e68b2"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/8cbafc7c0aebf5bf89697ab89c0828f589af3d49","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8cbafc7c0aebf5bf89697ab89c0828f589af3d49","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8cbafc7c0aebf5bf89697ab89c0828f589af3d49","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"35219f85e88dc597ed1accca9d410c9f8a4de29e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/35219f85e88dc597ed1accca9d410c9f8a4de29e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/35219f85e88dc597ed1accca9d410c9f8a4de29e"},{"sha":"2f4c3628f01d8202f2403a4207f490d7bc16c6f9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/2f4c3628f01d8202f2403a4207f490d7bc16c6f9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/2f4c3628f01d8202f2403a4207f490d7bc16c6f9"}],"stats":{"total":377,"additions":337,"deletions":40},"files":[{"sha":"44427cc2aebb8aac2fe1bf7371599fef73fa5738","filename":"common/src/main/java/org/apache/syncope/common/util/AttributableOperations.java","status":"modified","additions":10,"deletions":2,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Futil%2FAttributableOperations.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Futil%2FAttributableOperations.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Futil%2FAttributableOperations.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -26,6 +26,7 @@\n import java.util.Map;\n import java.util.Set;\n import org.apache.commons.lang3.SerializationUtils;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.mod.AbstractAttributableMod;\n import org.apache.syncope.common.mod.AbstractSubjectMod;\n import org.apache.syncope.common.mod.AttributeMod;\n@@ -236,8 +237,15 @@ public static UserMod diff(final UserTO updated, final UserTO original, final bo\n         }\n \n         // 3. security question / answer\n-        result.setSecurityQuestion(updated.getSecurityQuestion());\n-        result.setSecurityAnswer(updated.getSecurityAnswer());\n+        if (updated.getSecurityQuestion() == null) {\n+            result.setSecurityQuestion(null);\n+            result.setSecurityAnswer(null);\n+        } else if (!updated.getSecurityQuestion().equals(original.getSecurityQuestion())\n+                || StringUtils.isNotBlank(updated.getSecurityAnswer())) {\n+\n+            result.setSecurityQuestion(updated.getSecurityQuestion());\n+            result.setSecurityAnswer(updated.getSecurityAnswer());\n+        }\n \n         // 4. memberships\n         Map<Long, MembershipTO> updatedMembs = updated.getMembershipMap();"},{"sha":"92f8d77bc51ccb866219cc4fb321d4b0c1da0b32","filename":"console/src/main/java/org/apache/syncope/console/commons/Constants.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FConstants.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -38,6 +38,8 @@ public final class Constants {\n \n     public static final String ERROR = \"error\";\n \n+    public static final String PARAM_PASSWORD_RESET_TOKEN = \"pwdResetToken\";\n+\n     public static final String PREF_USERS_DETAILS_VIEW = \"users.details.view\";\n \n     public static final String PREF_USERS_ATTRIBUTES_VIEW = \"users.attributes.view\";"},{"sha":"5f1d6fa0605bd0e01577d2685d392911eea67857","filename":"console/src/main/java/org/apache/syncope/console/pages/ConfirmPasswordResetModalPage.java","status":"added","additions":103,"deletions":0,"changes":103,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -0,0 +1,103 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.pages;\n+\n+import org.apache.syncope.common.to.UserTO;\n+import org.apache.syncope.console.commons.Constants;\n+import org.apache.syncope.console.wicket.markup.html.form.AjaxPasswordFieldPanel;\n+import org.apache.syncope.console.wicket.markup.html.form.FieldPanel;\n+import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n+import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.PasswordTextField;\n+import org.apache.wicket.markup.html.form.StatelessForm;\n+import org.apache.wicket.markup.html.form.validation.EqualPasswordInputValidator;\n+import org.apache.wicket.model.Model;\n+import org.apache.wicket.model.ResourceModel;\n+\n+public class ConfirmPasswordResetModalPage extends BaseModalPage {\n+\n+    private static final long serialVersionUID = -8419445804421211904L;\n+\n+    public ConfirmPasswordResetModalPage(final ModalWindow window, final String token) {\n+        super();\n+        setOutputMarkupId(true);\n+\n+        final StatelessForm<?> form = new StatelessForm<Object>(FORM);\n+        form.setOutputMarkupId(true);\n+\n+        final FieldPanel<String> password =\n+                new AjaxPasswordFieldPanel(\"password\", \"password\", new Model<String>()).setRequired(true);\n+        ((PasswordTextField) password.getField()).setResetPassword(true);\n+        form.add(password);\n+\n+        final FieldPanel<String> confirmPassword =\n+                new AjaxPasswordFieldPanel(\"confirmPassword\", \"confirmPassword\", new Model<String>());\n+        ((PasswordTextField) confirmPassword.getField()).setResetPassword(true);\n+        form.add(confirmPassword);\n+\n+        form.add(new EqualPasswordInputValidator(password.getField(), confirmPassword.getField()));\n+\n+        final AjaxButton submit = new IndicatingAjaxButton(APPLY, new ResourceModel(SUBMIT, SUBMIT)) {\n+\n+            private static final long serialVersionUID = -4804368561204623354L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                try {\n+                    userSelfRestClient.confirmPasswordReset(token, password.getModelObject());\n+\n+                    setResponsePage(new ResultStatusModalPage.Builder(window, new UserTO()).\n+                            mode(UserModalPage.Mode.SELF).build());\n+                } catch (Exception e) {\n+                    LOG.error(\"While confirming password reset for {}\", token, e);\n+                    error(getString(Constants.ERROR) + \": \" + e.getMessage());\n+                    feedbackPanel.refresh(target);\n+                }\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                feedbackPanel.refresh(target);\n+            }\n+        };\n+        form.add(submit);\n+        form.setDefaultButton(submit);\n+\n+        final AjaxButton cancel = new IndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL)) {\n+\n+            private static final long serialVersionUID = -958724007591692537L;\n+\n+            @Override\n+            protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n+                window.close(target);\n+            }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+            }\n+        };\n+        cancel.setDefaultFormProcessing(false);\n+        form.add(cancel);\n+\n+        add(form);\n+    }\n+}"},{"sha":"0b0bd54d4e4c6fed22913d41573cbbe49b37c20c","filename":"console/src/main/java/org/apache/syncope/console/pages/Login.java","status":"modified","additions":71,"deletions":13,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -21,6 +21,7 @@\n import java.security.AccessControlException;\n import java.util.List;\n import java.util.Locale;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.syncope.common.services.EntitlementService;\n import org.apache.syncope.common.wrap.EntitlementTO;\n import org.apache.syncope.common.to.UserTO;\n@@ -31,23 +32,29 @@\n import org.apache.syncope.console.rest.UserSelfRestClient;\n import org.apache.syncope.console.wicket.ajax.markup.html.ClearIndicatingAjaxLink;\n import org.apache.syncope.console.wicket.markup.html.form.LinkPanel;\n+import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n+import org.apache.wicket.ajax.AbstractDefaultAjaxBehavior;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.AjaxLink;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n+import org.apache.wicket.markup.head.IHeaderResponse;\n+import org.apache.wicket.markup.head.JavaScriptHeaderItem;\n import org.apache.wicket.markup.html.WebPage;\n import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.form.PasswordTextField;\n+import org.apache.wicket.markup.html.form.StatelessForm;\n import org.apache.wicket.markup.html.form.TextField;\n import org.apache.wicket.markup.html.panel.Fragment;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.ResourceModel;\n+import org.apache.wicket.request.cycle.RequestCycle;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n \n@@ -78,7 +85,7 @@ public class Login extends WebPage {\n     @SpringBean\n     private UserSelfRestClient userSelfRestClient;\n \n-    private final Form<Void> form;\n+    private final StatelessForm<Void> form;\n \n     private final TextField<String> userIdField;\n \n@@ -90,11 +97,12 @@ public class Login extends WebPage {\n \n     public Login(final PageParameters parameters) {\n         super(parameters);\n+        setStatelessHint(true);\n \n         feedbackPanel = new NotificationPanel(Constants.FEEDBACK);\n         add(feedbackPanel);\n \n-        form = new Form<Void>(\"login\");\n+        form = new StatelessForm<Void>(\"login\");\n \n         userIdField = new TextField<String>(\"userId\", new Model<String>());\n         userIdField.setMarkupId(\"userId\");\n@@ -190,13 +198,13 @@ public void onClose(final AjaxRequestTarget target) {\n         }\n         add(selfRegFrag);\n \n-        // Modal window for password reset\n-        final ModalWindow pwdResetModalWin = new ModalWindow(\"pwdResetModal\");\n-        pwdResetModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n-        pwdResetModalWin.setInitialHeight(PWD_RESET_WIN_HEIGHT);\n-        pwdResetModalWin.setInitialWidth(PWD_RESET_WIN_WIDTH);\n-        pwdResetModalWin.setCookieName(\"pwd-reset-modal\");\n-        add(pwdResetModalWin);\n+        // Modal window for password reset request\n+        final ModalWindow pwdResetReqModalWin = new ModalWindow(\"pwdResetReqModal\");\n+        pwdResetReqModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        pwdResetReqModalWin.setInitialHeight(PWD_RESET_WIN_HEIGHT);\n+        pwdResetReqModalWin.setInitialWidth(PWD_RESET_WIN_WIDTH);\n+        pwdResetReqModalWin.setCookieName(\"pwd-reset-req-modal\");\n+        add(pwdResetReqModalWin);\n \n         Fragment pwdResetFrag;\n         if (userSelfRestClient.isPasswordResetAllowed()) {\n@@ -208,7 +216,7 @@ public void onClose(final AjaxRequestTarget target) {\n \n                 @Override\n                 protected void onClickInternal(final AjaxRequestTarget target) {\n-                    pwdResetModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    pwdResetReqModalWin.setPageCreator(new ModalWindow.PageCreator() {\n \n                         private static final long serialVersionUID = -7834632442532690940L;\n \n@@ -217,21 +225,22 @@ public Page createPage() {\n                             // anonymous authentication needed for password reset request\n                             authenticate(anonymousUser, anonymousKey);\n \n-                            return new RequestPasswordResetModalPage(pwdResetModalWin);\n+                            return new RequestPasswordResetModalPage(pwdResetReqModalWin);\n                         }\n                     });\n \n-                    pwdResetModalWin.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n+                    pwdResetReqModalWin.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n \n                         private static final long serialVersionUID = 8804221891699487139L;\n \n                         @Override\n                         public void onClose(final AjaxRequestTarget target) {\n                             SyncopeSession.get().invalidate();\n+                            setResponsePage(Login.class);\n                         }\n                     });\n \n-                    pwdResetModalWin.show(target);\n+                    pwdResetReqModalWin.show(target);\n                 }\n             };\n             pwdResetLink.add(new Label(\"linkTitle\", getString(\"passwordReset\")));\n@@ -243,6 +252,55 @@ public void onClose(final AjaxRequestTarget target) {\n             pwdResetFrag = new Fragment(\"passwordReset\", \"pwdResetNotAllowed\", this);\n         }\n         add(pwdResetFrag);\n+\n+        // Modal window for password reset confirm - automatically shown when token is available as request parameter\n+        final String pwdResetToken = RequestCycle.get().getRequest().getRequestParameters().\n+                getParameterValue(Constants.PARAM_PASSWORD_RESET_TOKEN).toOptionalString();\n+        final ModalWindow pwdResetConfModalWin = new ModalWindow(\"pwdResetConfModal\");\n+        if (StringUtils.isNotBlank(pwdResetToken)) {\n+            pwdResetConfModalWin.add(new AbstractDefaultAjaxBehavior() {\n+\n+                private static final long serialVersionUID = 3109256773218160485L;\n+\n+                @Override\n+                protected void respond(final AjaxRequestTarget target) {\n+                    ModalWindow window = (ModalWindow) getComponent();\n+                    window.show(target);\n+                }\n+\n+                @Override\n+                public void renderHead(final Component component, final IHeaderResponse response) {\n+                    response.render(JavaScriptHeaderItem.forScript(getCallbackScript(), null));\n+                }\n+            });\n+        }\n+        pwdResetConfModalWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n+        pwdResetConfModalWin.setInitialHeight(PWD_RESET_WIN_HEIGHT);\n+        pwdResetConfModalWin.setInitialWidth(PWD_RESET_WIN_WIDTH);\n+        pwdResetConfModalWin.setCookieName(\"pwd-reset-conf-modal\");\n+        pwdResetConfModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+\n+            private static final long serialVersionUID = -7834632442532690940L;\n+\n+            @Override\n+            public Page createPage() {\n+                // anonymous authentication needed for password reset confirm\n+                authenticate(anonymousUser, anonymousKey);\n+\n+                return new ConfirmPasswordResetModalPage(pwdResetConfModalWin, pwdResetToken);\n+            }\n+        });\n+        pwdResetConfModalWin.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n+\n+            private static final long serialVersionUID = 8804221891699487139L;\n+\n+            @Override\n+            public void onClose(final AjaxRequestTarget target) {\n+                SyncopeSession.get().invalidate();\n+                setResponsePage(Login.class);\n+            }\n+        });\n+        add(pwdResetConfModalWin);\n     }\n \n     private void authenticate(final String username, final String password) {"},{"sha":"35573f354077e8af09e6e61eeba1d072f5e417c6","filename":"console/src/main/java/org/apache/syncope/console/pages/RequestPasswordResetModalPage.java","status":"modified","additions":11,"deletions":5,"changes":16,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -18,10 +18,8 @@\n  */\n package org.apache.syncope.console.pages;\n \n-import static org.apache.syncope.console.pages.AbstractBasePage.FORM;\n-import static org.apache.syncope.console.pages.AbstractBasePage.LOG;\n-\n import org.apache.syncope.common.to.SecurityQuestionTO;\n+import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.rest.SecurityQuestionRestClient;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxTextFieldPanel;\n@@ -31,6 +29,7 @@\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow;\n import org.apache.wicket.markup.html.form.Form;\n+import org.apache.wicket.markup.html.form.StatelessForm;\n import org.apache.wicket.model.Model;\n import org.apache.wicket.model.ResourceModel;\n import org.apache.wicket.spring.injection.annot.SpringBean;\n@@ -46,7 +45,7 @@ public RequestPasswordResetModalPage(final ModalWindow window) {\n         super();\n         setOutputMarkupId(true);\n \n-        final Form<?> form = new Form<Object>(FORM);\n+        final StatelessForm<?> form = new StatelessForm<Object>(FORM);\n         form.setOutputMarkupId(true);\n \n         final AjaxTextFieldPanel securityQuestion =\n@@ -92,13 +91,20 @@ protected void onUpdate(final AjaxRequestTarget target) {\n             protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n                 try {\n                     userSelfRestClient.requestPasswordReset(username.getModelObject(), securityAnswer.getModelObject());\n-                    window.close(target);\n+\n+                    setResponsePage(new ResultStatusModalPage.Builder(window, new UserTO()).\n+                            mode(UserModalPage.Mode.SELF).build());\n                 } catch (Exception e) {\n                     LOG.error(\"While requesting password reset for {}\", username.getModelObject(), e);\n                     error(getString(Constants.ERROR) + \": \" + e.getMessage());\n                     feedbackPanel.refresh(target);\n                 }\n             }\n+\n+            @Override\n+            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                feedbackPanel.refresh(target);\n+            }\n         };\n         form.add(submit);\n         form.setDefaultButton(submit);"},{"sha":"bbc280be4504c5a49a13f03ca0f033a85c06f8e6","filename":"console/src/main/java/org/apache/syncope/console/pages/ResultStatusModalPage.java","status":"modified","additions":5,"deletions":9,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResultStatusModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResultStatusModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResultStatusModalPage.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -33,7 +33,6 @@\n import org.apache.syncope.common.to.RoleTO;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.types.PropagationTaskExecStatus;\n-import org.apache.syncope.console.SyncopeSession;\n import org.apache.syncope.console.commons.ConnIdSpecialAttributeName;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.commons.status.Status;\n@@ -135,10 +134,10 @@ private ResultStatusModalPage(final Builder builder) {\n \n             fragment.add(new Label(\"info\",\n                     ((subject instanceof UserTO) && ((UserTO) subject).getUsername() != null)\n-                    ? ((UserTO) subject).getUsername()\n-                    : ((subject instanceof RoleTO) && ((RoleTO) subject).getName() != null)\n-                    ? ((RoleTO) subject).getName()\n-                    : String.valueOf(subject.getId())));\n+                            ? ((UserTO) subject).getUsername()\n+                            : ((subject instanceof RoleTO) && ((RoleTO) subject).getName() != null)\n+                                    ? ((RoleTO) subject).getName()\n+                                    : String.valueOf(subject.getId())));\n \n             final ListView<PropagationStatus> propRes = new ListView<PropagationStatus>(\"resources\",\n                     propagations) {\n@@ -164,7 +163,7 @@ protected void populateItem(final ListItem<PropagationStatus> item) {\n                             attrhead.add(new Label(\"resource\", propTO.getResource()));\n \n                             attrhead.add(new Label(\"propagation\", propTO.getStatus() == null\n-                                            ? \"UNDEFINED\" : propTO.getStatus().toString()));\n+                                                    ? \"UNDEFINED\" : propTO.getStatus().toString()));\n \n                             final Image image;\n                             final String alt, title;\n@@ -243,9 +242,6 @@ public Page createPage() {\n \n             @Override\n             public void onClick(final AjaxRequestTarget target) {\n-                if (mode == UserModalPage.Mode.SELF && anonymousUser.equals(SyncopeSession.get().getUsername())) {\n-                    SyncopeSession.get().invalidate();\n-                }\n                 builder.window.close(target);\n             }\n         };"},{"sha":"c12eaceb3836d32afde34926ffbfaa2a7c1d93e1","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/SecurityQuestionPanel.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSecurityQuestionPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSecurityQuestionPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FSecurityQuestionPanel.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -55,6 +55,7 @@ public SecurityQuestionPanel(final String id, final UserTO userTO) {\n         final AjaxTextFieldPanel securityAnswer = new AjaxTextFieldPanel(\"securityAnswer\", \"securityAnswer\",\n                 new PropertyModel<String>(userTO, \"securityAnswer\"));\n         securityAnswer.getField().setOutputMarkupId(true);\n+        securityAnswer.setEnabled(false);\n         add(securityAnswer);\n \n         final AjaxDropDownChoicePanel<Long> securityQuestion =\n@@ -86,11 +87,12 @@ public String getIdValue(final Long object, final int index) {\n             protected void onUpdate(final AjaxRequestTarget target) {\n                 if (securityQuestion.getModelObject() == null) {\n                     securityAnswer.setModelObject(null);\n-                    target.add(SecurityQuestionPanel.this);\n+                } else {\n+                    securityAnswer.setEnabled(true);\n                 }\n+                target.add(SecurityQuestionPanel.this);\n             }\n         });\n         add(securityQuestion);\n     }\n-\n }"},{"sha":"2471b30d7175247bf04aa564b3b0c6fc7c24fa43","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfirmPasswordResetModalPage.html","status":"added","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.html?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -0,0 +1,55 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+    <div>\n+      <p class=\"ui-widget ui-corner-all ui-widget-header\"><wicket:message key=\"title\"/></p>\n+      <form wicket:id=\"form\">\n+        <div id=\"formtable\">\n+          <div class=\"tablerow alt\">\n+            <div class=\"tablecolumn_label medium_fixedsize\">\n+              <label for=\"password\"><wicket:message key=\"password\"/></label>\n+            </div>\n+            <div class=\"tablecolumn_field medium_dynamicsize\">\n+              <span wicket:id=\"password\">[password]</span>\n+            </div>\n+          </div>\n+\n+          <div class=\"tablerow\">\n+            <div class=\"tablecolumn_label medium_fixedsize\">\n+              <label for=\"confirmPassword\"><wicket:message key=\"confirmPassword\"/></label>\n+            </div>\n+            <div class=\"tablecolumn_field medium_dynamicsize\">\n+              <span wicket:id=\"confirmPassword\">[confirmPassword]</span>\n+            </div>\n+          </div>\n+        </div>\n+\n+        <div style=\"margin: 20px 10px 0\">\n+          <input type=\"submit\"\n+                 class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                 wicket:id=\"apply\"/>\n+          <input type=\"button\"\n+                 class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                 wicket:id=\"cancel\"/>\n+        </div>\n+      </form>\n+    </div>\n+  </wicket:extend>\n+</html>"},{"sha":"eb8d9f6bc0420f4a4d0a478f18d22c3b241dca79","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfirmPasswordResetModalPage.properties","status":"added","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -0,0 +1,20 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Password reset\n+submit=Submit\n+password=Password\n+confirmPassword=Password (confirm)"},{"sha":"22543652ad055b5b41a96dcac99d8f001f096052","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfirmPasswordResetModalPage_it.properties","status":"added","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_it.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -0,0 +1,20 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Password smarrita\n+submit=Invia\n+password=Password\n+confirmPassword=Password (conferma)"},{"sha":"fa270b9e0c4ff0cfb383bf3a8c4b560ae8d567ef","filename":"console/src/main/resources/org/apache/syncope/console/pages/ConfirmPasswordResetModalPage_pt_BR.properties","status":"added","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfirmPasswordResetModalPage_pt_BR.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -0,0 +1,20 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+title=Redefini\\u00e7\\u00e3o de senha\n+submit=Apresentar\n+password=Senha\n+confirmPassword=Senha (confirmar)"},{"sha":"097f2e697966a4b315e0251961988aecdc8dba65","filename":"console/src/main/resources/org/apache/syncope/console/pages/Login.html","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.html?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -82,7 +82,8 @@\n         <span wicket:id=\"passwordReset\"/>\n       </wicket:fragment>\n \n-      <div wicket:id=\"pwdResetModal\"></div>\n+      <div wicket:id=\"pwdResetReqModal\"></div>\n+      <div wicket:id=\"pwdResetConfModal\"></div>\n     </div>\n   </body>\n </html>"},{"sha":"4cc999a1c3fb56f8bd24309a2c89e254967fbf15","filename":"console/src/main/resources/org/apache/syncope/console/pages/RequestPasswordResetModalPage.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -18,3 +18,4 @@ securityQuestion=Security question\n title=Password reset\n username=User\n securityAnswer=Security answer\n+submit=Submit"},{"sha":"77c1dd487a0aeefef6865aeba06ecdaeb2fdf58e","filename":"console/src/main/resources/org/apache/syncope/console/pages/RequestPasswordResetModalPage_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_it.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -18,3 +18,4 @@ securityQuestion=Domanda di sicurezza\n title=Password smarrita\n username=Utente\n securityAnswer=Risposta di sicurezza\n+submit=Invia"},{"sha":"27728db096daa7450c227027a4aa75e2da4e0f8b","filename":"console/src/main/resources/org/apache/syncope/console/pages/RequestPasswordResetModalPage_pt_BR.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_pt_BR.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_pt_BR.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRequestPasswordResetModalPage_pt_BR.properties?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -18,3 +18,4 @@ securityQuestion=Pergunta de seguran\\u00e7a\n title=Redefini\\u00e7\\u00e3o de senha\n username=Usu\\u00e1rio\n securityAnswer=Resposta de seguran\\u00e7a\n+submit=Apresentar"},{"sha":"e3b38f3458c329ed6a4cfceaf0b3dc63e0abf0d6","filename":"console/src/test/java/org/apache/syncope/console/ConfigurationTestITCase.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FConfigurationTestITCase.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -74,7 +74,7 @@ public void setLogLevel() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[@id='tabs']/ul/li[5]/a\");\n+        selenium.click(\"//div[@id='tabs']/ul/li[6]/a\");\n \n         selenium.select(\"//div[@id='core']/div/span/table/tbody/tr/td[2]/select\", \"label=ERROR\");\n \n@@ -151,7 +151,7 @@ public void createNotification() {\n \n         selenium.click(\"//div[@class='eventSelectionWidzard']/div[2]/div[3]/span/div/input\");\n \n-        selenium.click(\"//div[2]/form/div[3]/ul/li[4]/a/span\");\n+        selenium.click(\"//div[2]/form/div[3]/ul/li[4]/a\");\n \n         selenium.click(\"//div[2]/form/div[3]/div[4]/div/div/span/input\");\n "},{"sha":"f975e48713475dbe138e74fefe45a7d1754757ff","filename":"core/src/main/java/org/apache/syncope/core/rest/data/UserDataBinder.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fdata%2FUserDataBinder.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -67,7 +67,7 @@\n public class UserDataBinder extends AbstractAttributableDataBinder {\n \n     private static final String[] IGNORE_USER_PROPERTIES = {\n-        \"memberships\", \"attrs\", \"derAttrs\", \"virAttrs\", \"resources\", \"securityQuestion\"\n+        \"memberships\", \"attrs\", \"derAttrs\", \"virAttrs\", \"resources\", \"securityQuestion\", \"securityAnswer\"\n     };\n \n     @Autowired"},{"sha":"5fcc54f6cb347126baf62f139805b71ba86a63c0","filename":"core/src/main/java/org/apache/syncope/core/workflow/user/activiti/ActivitiUserWorkflowAdapter.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fuser%2Factiviti%2FActivitiUserWorkflowAdapter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fuser%2Factiviti%2FActivitiUserWorkflowAdapter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fworkflow%2Fuser%2Factiviti%2FActivitiUserWorkflowAdapter.java?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -68,6 +68,7 @@\n import org.apache.syncope.core.persistence.beans.user.SyncopeUser;\n import org.apache.syncope.core.persistence.dao.NotFoundException;\n import org.apache.syncope.core.persistence.validation.attrvalue.ParsingValidationException;\n+import org.apache.syncope.core.persistence.validation.entity.InvalidEntityException;\n import org.apache.syncope.core.propagation.PropagationByResource;\n import org.apache.syncope.core.rest.controller.UnauthorizedRoleException;\n import org.apache.syncope.core.rest.data.UserDataBinder;\n@@ -167,6 +168,8 @@ private void throwException(final ActivitiException e, final String defaultMessa\n                 throw (SyncopeClientException) e.getCause().getCause();\n             } else if (e.getCause().getCause() instanceof ParsingValidationException) {\n                 throw (ParsingValidationException) e.getCause().getCause();\n+            } else if (e.getCause().getCause() instanceof InvalidEntityException) {\n+                throw (InvalidEntityException) e.getCause().getCause();\n             }\n         }\n "},{"sha":"6594c3fe83f6974e95fb28ff37f0fcd32aef820d","filename":"core/src/main/resources/mailTemplates/requestPasswordReset.html.vm","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.html.vm","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.html.vm","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.html.vm?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -21,8 +21,8 @@ under the License.\n <p>Hi,\n a password reset was request for $user.getUsername().</p>\n \n-<p>In order to complete this request, you need to provide the token<br/><br/>\n-$input.get(0)</p>\n+<p>In order to complete this request, you need to visit this \n+<a href=\"http://localhost:9080/syncope-console/?pwdResetToken=$input.get(0)\">link</a></p>.\n \n <p>If you did not request this reset, just ignore the present e-mail.</p>\n "},{"sha":"5ac028a5424fefa15247bc594ca9f929f5b06a76","filename":"core/src/main/resources/mailTemplates/requestPasswordReset.txt.vm","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.txt.vm","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.txt.vm","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FmailTemplates%2FrequestPasswordReset.txt.vm?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -17,9 +17,9 @@\n Hi,\n a password reset was request for $user.getUsername().\n \n-In order to complete this request, you need to provide the token \n+In order to complete this request, you need to visit this link:\n \n-$input.get(0)\n+http://localhost:9080/syncope-console/?pwdResetToken=$input.get(0)\n \n If you did not request this reset, just ignore the present e-mail.\n "},{"sha":"fd68b4ca33a2b32a6152c19e73df986e04879673","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8cbafc7c0aebf5bf89697ab89c0828f589af3d49/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=8cbafc7c0aebf5bf89697ab89c0828f589af3d49","patch":"@@ -1148,7 +1148,7 @@ under the License.\n         <plugin>\n           <groupId>org.codehaus.cargo</groupId>\n           <artifactId>cargo-maven2-plugin</artifactId>\n-          <version>1.4.9</version>\n+          <version>1.4.10</version>\n           <configuration>\n             <container>\n               <containerId>tomcat7x</containerId>"}]}