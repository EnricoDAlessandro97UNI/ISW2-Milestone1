{"sha":"49533dcead2543d298dce9b825c6fb7792c71c12","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ5NTMzZGNlYWQyNTQzZDI5OGRjZTliODI1YzZmYjc3OTJjNzFjMTI=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-04-20T13:51:29Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-04-20T13:51:29Z"},"message":"[SYNCOPE-781] Fix","tree":{"sha":"8e70a5e4725917f2332c39f68c628dfaa5cbaa8b","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/8e70a5e4725917f2332c39f68c628dfaa5cbaa8b"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/49533dcead2543d298dce9b825c6fb7792c71c12","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/49533dcead2543d298dce9b825c6fb7792c71c12","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/49533dcead2543d298dce9b825c6fb7792c71c12","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/49533dcead2543d298dce9b825c6fb7792c71c12/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"67d12d48bec899def4cc6e34d47e9a9b1fabfed5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/67d12d48bec899def4cc6e34d47e9a9b1fabfed5","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/67d12d48bec899def4cc6e34d47e9a9b1fabfed5"}],"stats":{"total":35,"additions":18,"deletions":17},"files":[{"sha":"debc8ff9d5c44d32c5b78c466200d5a7149d7eca","filename":"installer/pom.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fpom.xml?ref=49533dcead2543d298dce9b825c6fb7792c71c12","patch":"@@ -180,7 +180,6 @@ under the License.\n           <include>installer.properties</include>\n           <include>modelerPom.xml</include>\n         </includes>\n-        <filtering>true</filtering>\n       </resource>\n       <resource>\n         <directory>${basedir}/../fit/core-reference/src/main/resources/jboss/domains</directory>"},{"sha":"fcf0429a72dddbb4fae6c4f1f5d68a1a16440b28","filename":"installer/src/main/java/org/apache/syncope/installer/processes/ArchetypeProcess.java","status":"modified","additions":7,"deletions":6,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FArchetypeProcess.java?ref=49533dcead2543d298dce9b825c6fb7792c71c12","patch":"@@ -138,14 +138,15 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n         fileSystemUtils.createDirectory(modelerDirectory);\n \n         if (activiti) {\n-            fileSystemUtils.copyFileFromResources(File.separator + PROPERTIES.getProperty(\"modelerPomFile\"),\n+            fileSystemUtils.copyFileFromResources(\n+                    File.separator + PROPERTIES.getProperty(\"modelerPomFile\"),\n                     modelerDirectory + File.separator + PROPERTIES.getProperty(\"pomFile\"), handler);\n \n-            final File modelerPomFile = new File(modelerDirectory + File.separator + PROPERTIES.getProperty(\"pomFile\"));\n+            File modelerPomFile = new File(modelerDirectory + File.separator + PROPERTIES.getProperty(\"pomFile\"));\n \n-            final String contentModelerPomFile = fileSystemUtils.readFile(modelerPomFile);\n-            fileSystemUtils.\n-                    writeToFile(modelerPomFile, String.format(contentModelerPomFile, modelerDirectory));\n+            String contentModelerPomFile =\n+                    fileSystemUtils.readFile(modelerPomFile).replace(\"${syncope.version}\", syncopeVersion);\n+            fileSystemUtils.writeToFile(modelerPomFile, String.format(contentModelerPomFile, modelerDirectory));\n             fileSystemUtils.copyFile(\n                     syncopeInstallDir\n                     + PROPERTIES.getProperty(\"consoleResDirectory\")\n@@ -158,7 +159,7 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n                     modelerDirectory + File.separator + PROPERTIES.getProperty(\"saveModel\"));\n \n             final Properties modelerProperties = new Properties();\n-            modelerProperties.setProperty(\"modeler.directory\", modelerDirectory);\n+            modelerProperties.setProperty(\"activiti-modeler.directory\", modelerDirectory);\n             mavenUtils.mvnCleanPackageWithProperties(modelerDirectory, modelerProperties, customMavenProxySettings);\n             FileSystemUtils.delete(new File(modelerDirectory + File.separator + PROPERTIES.getProperty(\"saveModel\")));\n             FileSystemUtils.delete(new File(modelerDirectory + File.separator + PROPERTIES.getProperty(\"urlConfig\")));"},{"sha":"a822a2b80e8017c96e2fb241bff53b797930b566","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/FileSystemUtils.java","status":"modified","additions":2,"deletions":5,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FFileSystemUtils.java?ref=49533dcead2543d298dce9b825c6fb7792c71c12","patch":"@@ -29,7 +29,6 @@\n import java.io.OutputStream;\n import java.io.OutputStreamWriter;\n import java.io.PrintWriter;\n-import java.net.URL;\n import java.nio.charset.Charset;\n import javax.xml.transform.OutputKeys;\n import javax.xml.transform.Transformer;\n@@ -161,11 +160,9 @@ public void copyFileFromResources(final String filePath,\n             final String destination, final AbstractUIProcessHandler handler) {\n \n         try {\n-            final URL url = getClass().getResource(filePath);\n-            final File dest = new File(destination);\n-            FileUtils.copyURLToFile(url, dest);\n+            FileUtils.copyURLToFile(getClass().getResource(filePath), new File(destination));\n         } catch (IOException ex) {\n-            final String errorMessage = \"Error copy file \" + filePath;\n+            String errorMessage = \"Error copying file \" + filePath + \" to + \" + destination;\n             handler.emitError(errorMessage, errorMessage);\n             InstallLog.getInstance().error(errorMessage);\n         }"},{"sha":"4d1faa7a05c454d32e96fd8ed0fe8c9e20062ddd","filename":"installer/src/main/resources/modelerPom.xml","status":"modified","additions":9,"deletions":5,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/49533dcead2543d298dce9b825c6fb7792c71c12/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fresources%2FmodelerPom.xml?ref=49533dcead2543d298dce9b825c6fb7792c71c12","patch":"@@ -22,23 +22,27 @@ under the License.\n \n   <modelVersion>4.0.0</modelVersion>\n    \n+  <parent>\n+    <groupId>org.apache.syncope</groupId>\n+    <artifactId>syncope</artifactId>\n+    <version>${syncope.version}</version>\n+  </parent>\n+\n   <groupId>org.apache.syncope</groupId>\n   <artifactId>activitiModelerSetup</artifactId>\n   <version>1.0-SNAPSHOT</version>\n   <packaging>jar</packaging>\n-   \n+\n   <properties>\n-    <activiti-modeler.version>${activiti.version}</activiti-modeler.version>\n-    <activiti-modeler.directory>%s</activiti-modeler.directory>\n-     \n+    <activiti-modeler.directory>%s</activiti-modeler.directory>     \n+\n     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n   </properties>\n    \n   <dependencies>\n     <dependency>\n       <groupId>org.activiti</groupId>\n       <artifactId>activiti-webapp-explorer2</artifactId>\n-      <version>${activiti-modeler.version}</version>\n       <type>war</type>\n       <scope>test</scope>\n     </dependency>"}]}