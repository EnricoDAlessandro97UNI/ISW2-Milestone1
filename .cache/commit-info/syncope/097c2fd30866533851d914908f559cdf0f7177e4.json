{"sha":"097c2fd30866533851d914908f559cdf0f7177e4","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjA5N2MyZmQzMDg2NjUzMzg1MWQ5MTQ5MDhmNTU5Y2RmMGY3MTc3ZTQ=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-05-13T10:31:26Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-05-13T10:31:26Z"},"message":"RESTful methods for password reset added\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1245955 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d4b8b83c6610ccd633257ce054ce9ebeb92e975f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d4b8b83c6610ccd633257ce054ce9ebeb92e975f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/097c2fd30866533851d914908f559cdf0f7177e4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/097c2fd30866533851d914908f559cdf0f7177e4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/097c2fd30866533851d914908f559cdf0f7177e4","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/097c2fd30866533851d914908f559cdf0f7177e4/comments","author":null,"committer":null,"parents":[{"sha":"9bf4b8f10f191c5966b0edf39d5c50311f44e593","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9bf4b8f10f191c5966b0edf39d5c50311f44e593","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9bf4b8f10f191c5966b0edf39d5c50311f44e593"}],"stats":{"total":78,"additions":78,"deletions":0},"files":[{"sha":"346a31f77ca2f28ff7fae9ddeb01f4380440e0f2","filename":"rest/src/main/java/org/syncope/rest/user/PasswordReset.java","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/097c2fd30866533851d914908f559cdf0f7177e4/rest%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Frest%2Fuser%2FPasswordReset.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/097c2fd30866533851d914908f559cdf0f7177e4/rest%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Frest%2Fuser%2FPasswordReset.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/rest%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Frest%2Fuser%2FPasswordReset.java?ref=097c2fd30866533851d914908f559cdf0f7177e4","patch":"@@ -0,0 +1,78 @@\n+/*\n+ *  Copyright 2010 ilgrosso.\n+ * \n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ * \n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *  under the License.\n+ */\n+package org.syncope.rest.user;\n+\n+import java.util.logging.Logger;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.PathParam;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.QueryParam;\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.MediaType;\n+import org.springframework.context.annotation.Scope;\n+import org.springframework.stereotype.Component;\n+\n+@Path(\"/user/passwordReset/{userId}\")\n+@Component\n+@Scope(\"request\")\n+public class PasswordReset {\n+\n+    final static Logger logger = Logger.getLogger(PasswordReset.class.getName());\n+\n+    /**\n+     * TODO: call syncope-core\n+     */\n+    @GET\n+    @Produces(MediaType.TEXT_PLAIN)\n+    public String getPasswordResetToken(@PathParam(\"userId\") String userId,\n+            @QueryParam(\"passwordResetFormURL\") String passwordResetFormURL) {\n+\n+        if (\"error\".equals(userId)) {\n+            logger.severe(\"Entered in the error condition, going ahead...\");\n+\n+            throw new WebApplicationException(\n+                    new Exception(\"Wrong userId: \" + userId));\n+        }\n+\n+        logger.info(\"getPasswordResetToken called: \" + passwordResetFormURL);\n+\n+        return \"passwordResetTokenId\";\n+    }\n+\n+    /**\n+     * TODO: call syncope-core\n+     */\n+    @POST\n+    @Produces(MediaType.APPLICATION_JSON)\n+    public String passwordReset(@QueryParam(\"tokenId\") String tokenId,\n+            @PathParam(\"userId\") String userId,\n+            @QueryParam(\"newPassword\") String newPassword) {\n+\n+        if (\"error\".equals(userId)) {\n+            logger.severe(\"Entered in the error condition, going ahead...\");\n+\n+            throw new WebApplicationException(\n+                    new Exception(\"Wrong userId: \" + userId));\n+        }\n+\n+        logger.info(\"passwordReset called: \" + tokenId + \" / \" + newPassword);\n+\n+        return Boolean.TRUE.toString();\n+    }\n+}"}]}