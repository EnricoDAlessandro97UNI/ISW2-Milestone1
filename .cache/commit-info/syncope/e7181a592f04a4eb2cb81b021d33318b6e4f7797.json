{"sha":"e7181a592f04a4eb2cb81b021d33318b6e4f7797","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmU3MTgxYTU5MmYwNGE0ZWIyY2I4MWIwMjFkMzMzMThiNmU0Zjc3OTc=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-06-30T14:20:18Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-06-30T14:20:18Z"},"message":"[SYNCOPE-1455] Fix test certificate expiration","tree":{"sha":"68c3bb0922911c2f3329cdbd75476c95e930169f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/68c3bb0922911c2f3329cdbd75476c95e930169f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e7181a592f04a4eb2cb81b021d33318b6e4f7797","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e7181a592f04a4eb2cb81b021d33318b6e4f7797","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e7181a592f04a4eb2cb81b021d33318b6e4f7797","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e7181a592f04a4eb2cb81b021d33318b6e4f7797/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"6563f92d043f865b5afe90d06e73763a100f37fe","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6563f92d043f865b5afe90d06e73763a100f37fe","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/6563f92d043f865b5afe90d06e73763a100f37fe"}],"stats":{"total":20,"additions":11,"deletions":9},"files":[{"sha":"b7526e0db40661a854b8ae7e2e94d7c462a045a9","filename":"sra/src/test/java/org/apache/syncope/sra/AbstractTest.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FAbstractTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FAbstractTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FAbstractTest.java?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797","patch":"@@ -52,7 +52,7 @@ public static boolean available(int port) {\n     protected ConfigurableApplicationContext ctx;\n \n     @Value(\"${local.server.port}\")\n-    protected int gatewayPort;\n+    protected int sraPort;\n \n     @Value(\"${wiremock.server.port}\")\n     protected int wiremockPort;"},{"sha":"a5c0049c585bda061f7594d456dc49f44c592803","filename":"sra/src/test/java/org/apache/syncope/sra/RouteProviderTest.java","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FRouteProviderTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FRouteProviderTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FRouteProviderTest.java?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797","patch":"@@ -546,7 +546,7 @@ public void linkRewrite() {\n         route.setKey(\"linkRewrite\");\n         route.setTarget(URI.create(\"http://localhost:\" + wiremockPort));\n         route.getFilters().add(new SRARouteFilter.Builder().factory(SRARouteFilterFactory.LINK_REWRITE).\n-                args(\"http://localhost:\" + gatewayPort).build());\n+                args(\"http://localhost:\" + sraPort).build());\n \n         SyncopeCoreTestingServer.ROUTES.put(route.getKey(), route);\n         routeRefresher.refresh();\n@@ -555,12 +555,12 @@ public void linkRewrite() {\n                 expectStatus().isOk().\n                 expectBody().consumeWith(exchange -> {\n                     assertTrue(new String(exchange.getResponseBody()).\n-                            contains(\"<a href=\\\"http://localhost:\" + gatewayPort + \"/absolute\\\">\"));\n+                            contains(\"<a href=\\\"http://localhost:\" + sraPort + \"/absolute\\\">\"));\n                 });\n \n         route.getFilters().clear();\n         route.getFilters().add(new SRARouteFilter.Builder().factory(SRARouteFilterFactory.LINK_REWRITE).\n-                args(\"http://localhost:\" + gatewayPort + \",true\").build());\n+                args(\"http://localhost:\" + sraPort + \",true\").build());\n \n         SyncopeCoreTestingServer.ROUTES.put(route.getKey(), route);\n         routeRefresher.refresh();\n@@ -569,7 +569,7 @@ public void linkRewrite() {\n                 expectStatus().isOk().\n                 expectBody().consumeWith(exchange -> {\n                     assertTrue(new String(exchange.getResponseBody()).\n-                            contains(\"<a href=\\\"http://localhost:\" + gatewayPort + \"/absolute\\\">\"));\n+                            contains(\"<a href=\\\"http://localhost:\" + sraPort + \"/absolute\\\">\"));\n                 });\n     }\n "},{"sha":"3c82278cddf3106303836108b9ef7f0d032fe7cb","filename":"sra/src/test/java/org/apache/syncope/sra/TLSRouteProviderTest.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FTLSRouteProviderTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FTLSRouteProviderTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fsra%2FTLSRouteProviderTest.java?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797","patch":"@@ -67,7 +67,7 @@ private WebTestClient webClient(final SslContext sslContext) throws SSLException\n         HttpClient httpClient = HttpClient.create().\n                 secure(sslContextSpec -> sslContextSpec.sslContext(sslContext));\n         ClientHttpConnector connector = new ReactorClientHttpConnector(httpClient);\n-        return WebTestClient.bindToServer(connector).baseUrl(\"https://localhost:\" + gatewayPort).build();\n+        return WebTestClient.bindToServer(connector).baseUrl(\"https://localhost:\" + sraPort).build();\n     }\n \n     @BeforeEach\n@@ -85,7 +85,7 @@ public void clientAuth() throws SSLException, KeyStoreException, IOException, No\n             CertificateException, UnrecoverableKeyException, KeyManagementException {\n \n         KeyStore store = KeyStore.getInstance(\"PKCS12\");\n-        store.load(getClass().getResourceAsStream(\"/client_pavel.p12\"), \"password\".toCharArray());\n+        store.load(getClass().getResourceAsStream(\"/user.p12\"), \"password\".toCharArray());\n \n         KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n         kmf.init(store, \"password\".toCharArray());\n@@ -104,7 +104,8 @@ public void clientAuth() throws SSLException, KeyStoreException, IOException, No\n         route.getPredicates().add(new SRARoutePredicate.Builder().\n                 factory(SRARoutePredicateFactory.METHOD).args(\"GET\").build());\n         route.getPredicates().add(new SRARoutePredicate.Builder().\n-                factory(SRARoutePredicateFactory.PATH).args(\"/getWithClientAuth\").cond(SRARoutePredicateCond.AND).build());\n+                factory(SRARoutePredicateFactory.PATH).args(\"/getWithClientAuth\").\n+                cond(SRARoutePredicateCond.AND).build());\n         route.getFilters().add(new SRARouteFilter.Builder().\n                 factory(SRARouteFilterFactory.CLIENT_CERTS_TO_REQUEST_HEADER).build());\n \n@@ -134,7 +135,8 @@ public void withoutClientCert() throws SSLException, KeyStoreException, IOExcept\n         route.getPredicates().add(new SRARoutePredicate.Builder().\n                 factory(SRARoutePredicateFactory.METHOD).args(\"GET\").build());\n         route.getPredicates().add(new SRARoutePredicate.Builder().\n-                factory(SRARoutePredicateFactory.PATH).args(\"/withoutClientCert\").cond(SRARoutePredicateCond.AND).build());\n+                factory(SRARoutePredicateFactory.PATH).args(\"/withoutClientCert\").cond(SRARoutePredicateCond.AND).\n+                build());\n         route.getFilters().add(new SRARouteFilter.Builder().\n                 factory(SRARouteFilterFactory.CLIENT_CERTS_TO_REQUEST_HEADER).build());\n "},{"sha":"b7958f2b1cefc697cbf511751c56d2338e0d887d","filename":"sra/src/test/resources/client_pavel.p12","status":"removed","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6563f92d043f865b5afe90d06e73763a100f37fe/sra%2Fsrc%2Ftest%2Fresources%2Fclient_pavel.p12","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6563f92d043f865b5afe90d06e73763a100f37fe/sra%2Fsrc%2Ftest%2Fresources%2Fclient_pavel.p12","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fresources%2Fclient_pavel.p12?ref=6563f92d043f865b5afe90d06e73763a100f37fe"},{"sha":"e9d70b61c014a02b26726e19bab50b7aed278e65","filename":"sra/src/test/resources/keyStore.p12","status":"modified","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2FkeyStore.p12","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2FkeyStore.p12","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fresources%2FkeyStore.p12?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797"},{"sha":"6fa6b49f25463dd54cc16c1d167ac0497ae687a9","filename":"sra/src/test/resources/trustStore.jks","status":"modified","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2FtrustStore.jks","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2FtrustStore.jks","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fresources%2FtrustStore.jks?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797"},{"sha":"08ea127f12542c7727aa9e839fa69ac917d40db8","filename":"sra/src/test/resources/user.p12","status":"added","additions":0,"deletions":0,"changes":0,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2Fuser.p12","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e7181a592f04a4eb2cb81b021d33318b6e4f7797/sra%2Fsrc%2Ftest%2Fresources%2Fuser.p12","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fresources%2Fuser.p12?ref=e7181a592f04a4eb2cb81b021d33318b6e4f7797"}]}