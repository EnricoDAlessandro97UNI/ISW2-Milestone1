{"sha":"5886fdc4585f16496cbccf028c04e08fe997c4ba","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjU4ODZmZGM0NTg1ZjE2NDk2Y2JjY2YwMjhjMDRlMDhmZTk5N2M0YmE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-13T14:35:24Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-13T14:35:24Z"},"message":"[SYNCOPE-640] Merge from master","tree":{"sha":"b8f61bbcec87313babf6d81be7c99a1d575d3b34","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b8f61bbcec87313babf6d81be7c99a1d575d3b34"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/5886fdc4585f16496cbccf028c04e08fe997c4ba","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5886fdc4585f16496cbccf028c04e08fe997c4ba","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/5886fdc4585f16496cbccf028c04e08fe997c4ba","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/5886fdc4585f16496cbccf028c04e08fe997c4ba/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"01785499355f971bced0347c02acce532bcfb7fb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/01785499355f971bced0347c02acce532bcfb7fb","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/01785499355f971bced0347c02acce532bcfb7fb"},{"sha":"838c6a8fa621d2b6d9b65e6847a9de5a176638df","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/838c6a8fa621d2b6d9b65e6847a9de5a176638df","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/838c6a8fa621d2b6d9b65e6847a9de5a176638df"}],"stats":{"total":44,"additions":36,"deletions":8},"files":[{"sha":"085b98fbe0f659c4e957e24410365cb4864b316a","filename":"installer/src/main/java/org/apache/syncope/installer/enums/DBs.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fenums%2FDBs.java?ref=5886fdc4585f16496cbccf028c04e08fe997c4ba","patch":"@@ -22,6 +22,7 @@ public enum DBs {\n \n     POSTGRES(\"postgres\"),\n     MYSQL(\"mysql\"),\n+    MARIADB(\"mariadb\"),\n     SQLSERVER(\"sqlserver\"),\n     ORACLE(\"oracle\");\n \n@@ -41,6 +42,8 @@ public static DBs fromDbName(final String containerName) {\n             db = POSTGRES;\n         } else if (MYSQL.getName().equalsIgnoreCase(containerName)) {\n             db = MYSQL;\n+        } else if (MARIADB.getName().equalsIgnoreCase(containerName)) {\n+            db = MARIADB;\n         } else if (ORACLE.getName().equalsIgnoreCase(containerName)) {\n             db = ORACLE;\n         } else {"},{"sha":"00d7a41e2a92874b3e7fc9e1dcd71abf8af660f3","filename":"installer/src/main/java/org/apache/syncope/installer/files/PersistenceProperties.java","status":"modified","additions":16,"deletions":3,"changes":19,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Ffiles%2FPersistenceProperties.java?ref=5886fdc4585f16496cbccf028c04e08fe997c4ba","patch":"@@ -59,7 +59,20 @@ public class PersistenceProperties {\n             + \"audit.sql=audit.sql\\n\"\n             + \"database.schema=\\n\";\n \n-    public static final String ORACLE = \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n+    public static final String MARIADB = \"\"\n+            + \"jpa.driverClassName=org.mariadb.jdbc.Driver\\n\"\n+            + \"jpa.url=%s\\n\"\n+            + \"jpa.username=%s\\n\"\n+            + \"jpa.password=%s\\n\"\n+            + \"jpa.dialect=org.apache.openjpa.jdbc.sql.MariaDBDictionary\\n\"\n+            + \"jpa.pool.validationQuery=SELECT 1\\n\"\n+            + \"quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\\n\"\n+            + \"quartz.sql=tables_mariadb.sql\\n\"\n+            + \"audit.sql=audit.sql\\n\"\n+            + \"database.schema=\\n\";\n+    \n+    public static final String ORACLE = \"\"\n+            + \"jpa.driverClassName=oracle.jdbc.OracleDriver\\n\"\n             + \"jpa.url=%s\\n\"\n             + \"jpa.username=%s\\n\"\n             + \"jpa.password=%s\\n\"\n@@ -87,8 +100,8 @@ public class PersistenceProperties {\n             + \"audit.sql=audit_sqlserver.sql\\n\" \n             + \"database.schema=\";\n \n-    public static final String QUARTZ_INNO_DB = \"quartz.sql=tables_mysql_innodb.sql\";\n+    public static final String MYSQL_QUARTZ_INNO_DB = \"quartz.sql=tables_mysql_innodb.sql\";\n \n-    public static final String QUARTZ = \"quartz.sql=tables_mysql.sql\";\n+    public static final String MYSQL_QUARTZ = \"quartz.sql=tables_mysql.sql\";\n \n }"},{"sha":"ba2cd4b6375f2941f18e982a14d830b8bc80ace5","filename":"installer/src/main/java/org/apache/syncope/installer/processes/PersistenceProcess.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fprocesses%2FPersistenceProcess.java?ref=5886fdc4585f16496cbccf028c04e08fe997c4ba","patch":"@@ -70,11 +70,15 @@ public void run(final AbstractUIProcessHandler handler, final String[] args) {\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.MYSQL, persistenceUrl, persistenceUser, persistencePassword));\n                 if (mysqlInnoDB) {\n-                    persistenceProperties.append(PersistenceProperties.QUARTZ_INNO_DB);\n+                    persistenceProperties.append(PersistenceProperties.MYSQL_QUARTZ_INNO_DB);\n                 } else {\n-                    persistenceProperties.append(PersistenceProperties.QUARTZ);\n+                    persistenceProperties.append(PersistenceProperties.MYSQL_QUARTZ);\n                 }\n                 break;\n+            case MARIADB:\n+                persistenceProperties.append(String.format(\n+                        PersistenceProperties.MARIADB, persistenceUrl, persistenceUser, persistencePassword));\n+                break;\n             case ORACLE:\n                 persistenceProperties.append(String.format(\n                         PersistenceProperties.ORACLE, persistenceUrl, persistenceUser, persistencePassword,"},{"sha":"64e02f78d11b3a47f2869ba645416ec06cafb377","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/DriverLoader.java","status":"modified","additions":10,"deletions":2,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FDriverLoader.java?ref=5886fdc4585f16496cbccf028c04e08fe997c4ba","patch":"@@ -22,23 +22,27 @@\n import java.net.MalformedURLException;\n import java.net.PasswordAuthentication;\n import org.apache.syncope.installer.enums.DBs;\n-\n import java.net.URL;\n import java.net.URLClassLoader;\n import java.sql.Driver;\n \n public final class DriverLoader extends URLClassLoader {\n \n-    private final static String POSTGRES_JAR = \n+    private final static String POSTGRES_JAR =\n             \"http://repo1.maven.org/maven2/postgresql/postgresql/9.1-901.jdbc4/postgresql-9.1-901.jdbc4.jar\";\n \n     private final static String MYSQL_JAR =\n             \"http://central.maven.org/maven2/mysql/mysql-connector-java/5.1.34/mysql-connector-java-5.1.34.jar\";\n \n+    private final static String MARIADB_JAR =\n+            \"http://repo1.maven.org/maven2/org/mariadb/jdbc/mariadb-java-client/1.1.8/mariadb-java-client-1.1.8.jar\";\n+\n     private static final String POSTGRES_CLASS_DRIVER = \"org.postgresql.Driver\";\n \n     private static final String MYSQL_CLASS_DRIVER = \"com.mysql.jdbc.Driver\";\n \n+    private static final String MARIADB_CLASS_DRIVER = \"org.mariadb.jdbc.Driver\";\n+\n     private DriverLoader(final URL[] urls) {\n         super(urls);\n         addURL(urls[0]);\n@@ -58,6 +62,10 @@ public static Driver load(final DBs selectedDB, final boolean isProxyEnabled, fi\n                 driver = downloadDriver(MYSQL_JAR, MYSQL_CLASS_DRIVER, isProxyEnabled, proxyHost, proxyPort,\n                         proxyUser, proxyPwd);\n                 break;\n+            case MARIADB:\n+                driver = downloadDriver(MARIADB_JAR, MARIADB_CLASS_DRIVER, isProxyEnabled, proxyHost, proxyPort,\n+                        proxyUser, proxyPwd);\n+                break;\n             case SQLSERVER:\n                 break;\n             case ORACLE:"},{"sha":"1610367d399e0fc07399446729ede906004161a5","filename":"installer/src/main/java/org/apache/syncope/installer/validators/PersistenceValidator.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/5886fdc4585f16496cbccf028c04e08fe997c4ba/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Fvalidators%2FPersistenceValidator.java?ref=5886fdc4585f16496cbccf028c04e08fe997c4ba","patch":"@@ -82,8 +82,8 @@ public Status validateData(final InstallData installData) {\n \n         switch (selectedDB) {\n             case POSTGRES:\n-                return checkConnection(selectedDB);\n             case MYSQL:\n+            case MARIADB:\n                 return checkConnection(selectedDB);\n             case SQLSERVER:\n                 warning = new StringBuilder(\"Remember to check your SqlServer db connection\");"}]}