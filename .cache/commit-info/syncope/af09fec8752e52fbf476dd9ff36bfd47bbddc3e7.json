{"sha":"af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmFmMDlmZWM4NzUyZTUyZmJmNDc2ZGQ5ZmYzNmJmZDQ3YmJkZGMzZTc=","commit":{"author":{"name":"Misagh Moayyed","email":"mm1844@gmail.com","date":"2021-07-19T08:45:49Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-07-19T08:45:49Z"},"message":"Switch to CAS 6.4 RC6 (#273)\n\n* switch to 6.4 RC5\r\n\r\n* upgrading pac4j - renaming delete method\r\n\r\n* remove/exclude broken radius jar\r\n\r\n* fix checkstyle\r\n\r\n* adjust tests - wip\r\n\r\n* fix tests - enable remote debugging for SRA on tests\r\n\r\n* Remove @bean from version(). Return type as String cannot be a bean\r\n\r\n* fix event repository api\r\n\r\n* fix tests\r\n\r\n* reset log levels; update pac4j\r\n\r\n* reset changes\r\n\r\n* fix build\r\n\r\n* switch to 6.4 rc6\r\n\r\n* Trigger build with an update","tree":{"sha":"5ce8df7ab5da40642e25854bf1a17b1498db402a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5ce8df7ab5da40642e25854bf1a17b1498db402a"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg9Tu9CRBK7hj4Ov3rIwAAkXkIAFbOLnSVMjudknw36kUb6Gzs\nAEOpfHMSJKCHqu5W1u0mi3EGHDX6eJ1ZQDKTbmM8gAE+5WnfvA7HWebLdFvI3jZ3\nPgB1Bx3NBCjdzo7MoI0Yrxp2rnHSp9IxSL/luWUto6p3rCiXdElFZUIj6eQf9EdE\nxmGYYl4HMgYdWlDG7ClEJqL64acUmQh7p8jWfF1io2OmLG2V9T/mK66F/af/sAmz\nBH63JmmLFrEOd8Xbx4FFcvlXXk+hKf9CUM0x5EMlaMFiahiqpj35KP2PEMxAfl1Y\nkeysuXDZd/Px4i6yuEXZFooiKt9f9aBzsxLUl7arhl6m1RTP9Dzk3AWqCR6LiGM=\n=OWoi\n-----END PGP SIGNATURE-----\n","payload":"tree 5ce8df7ab5da40642e25854bf1a17b1498db402a\nparent 74a626cf4b860b947c21e88d9d0983b79e34d126\nauthor Misagh Moayyed <mm1844@gmail.com> 1626684349 +0400\ncommitter GitHub <noreply@github.com> 1626684349 +0430\n\nSwitch to CAS 6.4 RC6 (#273)\n\n* switch to 6.4 RC5\r\n\r\n* upgrading pac4j - renaming delete method\r\n\r\n* remove/exclude broken radius jar\r\n\r\n* fix checkstyle\r\n\r\n* adjust tests - wip\r\n\r\n* fix tests - enable remote debugging for SRA on tests\r\n\r\n* Remove @bean from version(). Return type as String cannot be a bean\r\n\r\n* fix event repository api\r\n\r\n* fix tests\r\n\r\n* reset log levels; update pac4j\r\n\r\n* reset changes\r\n\r\n* fix build\r\n\r\n* switch to 6.4 rc6\r\n\r\n* Trigger build with an update"}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/comments","author":{"login":"mmoayyed","id":1205228,"node_id":"MDQ6VXNlcjEyMDUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1205228?v=4","gravatar_id":"","url":"https://api.github.com/users/mmoayyed","html_url":"https://github.com/mmoayyed","followers_url":"https://api.github.com/users/mmoayyed/followers","following_url":"https://api.github.com/users/mmoayyed/following{/other_user}","gists_url":"https://api.github.com/users/mmoayyed/gists{/gist_id}","starred_url":"https://api.github.com/users/mmoayyed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmoayyed/subscriptions","organizations_url":"https://api.github.com/users/mmoayyed/orgs","repos_url":"https://api.github.com/users/mmoayyed/repos","events_url":"https://api.github.com/users/mmoayyed/events{/privacy}","received_events_url":"https://api.github.com/users/mmoayyed/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"74a626cf4b860b947c21e88d9d0983b79e34d126","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/74a626cf4b860b947c21e88d9d0983b79e34d126","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/74a626cf4b860b947c21e88d9d0983b79e34d126"}],"stats":{"total":233,"additions":107,"deletions":126},"files":[{"sha":"4687263cc45918260b24827f896736f42fa67c1a","filename":"common/am/lib/src/main/java/org/apache/syncope/common/lib/auth/OIDCAuthModuleConf.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOIDCAuthModuleConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOIDCAuthModuleConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fam%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2Fauth%2FOIDCAuthModuleConf.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -64,7 +64,7 @@ public class OIDCAuthModuleConf implements AuthModuleConf {\n     /**\n      * Clock skew in order to account for drift, when validating id tokens.\n      */\n-    private int maxClockSkew;\n+    private String maxClockSkew;\n \n     /**\n      * Custom parameters to send along in authZ requests, etc.\n@@ -139,11 +139,11 @@ public void setPreferredJwsAlgorithm(final String preferredJwsAlgorithm) {\n         this.preferredJwsAlgorithm = preferredJwsAlgorithm;\n     }\n \n-    public int getMaxClockSkew() {\n+    public String getMaxClockSkew() {\n         return maxClockSkew;\n     }\n \n-    public void setMaxClockSkew(final int maxClockSkew) {\n+    public void setMaxClockSkew(final String maxClockSkew) {\n         this.maxClockSkew = maxClockSkew;\n     }\n "},{"sha":"201a871bfa304b046656022aabc3c55d1a062e20","filename":"common/am/rest-api/src/main/java/org/apache/syncope/common/rest/api/service/wa/GoogleMfaAuthAccountService.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/common%2Fam%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2Fwa%2FGoogleMfaAuthAccountService.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/common%2Fam%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2Fwa%2FGoogleMfaAuthAccountService.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fam%2Frest-api%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Frest%2Fapi%2Fservice%2Fwa%2FGoogleMfaAuthAccountService.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -49,6 +49,12 @@ public interface GoogleMfaAuthAccountService extends JAXRSService {\n     @Path(\"accts/{owner}\")\n     void delete(@NotNull @PathParam(\"owner\") String owner);\n \n+    @DELETE\n+    @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n+    @Path(\"accts/devices/{id}\")\n+    void delete(@NotNull @PathParam(\"id\") long id);\n+\n     @DELETE\n     @Consumes({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })\n     @Produces({ MediaType.APPLICATION_JSON, RESTHeaders.APPLICATION_YAML, MediaType.APPLICATION_XML })"},{"sha":"ecfe75767da9ee3c1ab4a0322aebfc6536e2bbe0","filename":"core/am/logic/src/main/java/org/apache/syncope/core/logic/wa/GoogleMfaAuthAccountLogic.java","status":"modified","additions":21,"deletions":1,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/core%2Fam%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fwa%2FGoogleMfaAuthAccountLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/core%2Fam%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fwa%2FGoogleMfaAuthAccountLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fam%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2Fwa%2FGoogleMfaAuthAccountLogic.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -50,13 +50,33 @@ public List<GoogleMfaAuthAccount> list() {\n     }\n \n     @PreAuthorize(\"hasRole('\" + IdRepoEntitlement.ANONYMOUS + \"')\")\n-    public void deleteFor(final String owner) {\n+    public void delete(final String owner) {\n         authProfileDAO.findByOwner(owner).ifPresent(profile -> {\n             profile.setGoogleMfaAuthAccounts(List.of());\n             authProfileDAO.save(profile);\n         });\n     }\n \n+    @PreAuthorize(\"hasRole('\" + IdRepoEntitlement.ANONYMOUS + \"')\")\n+    public void delete(final long id) {\n+        authProfileDAO.findAll(-1, -1).\n+            stream().\n+            filter(Objects::nonNull).\n+            filter(profile -> profile.\n+                getGoogleMfaAuthAccounts().\n+                stream().\n+                allMatch(acct -> acct.getId() == id)).\n+            findFirst().\n+            ifPresentOrElse(profile -> {\n+                if (profile.getGoogleMfaAuthAccounts().removeIf(acct -> acct.getId() == id)) {\n+                    authProfileDAO.save(profile);\n+                }\n+            },\n+            () -> {\n+                throw new NotFoundException(\"Could not find account for id \" + id);\n+            });\n+    }\n+\n     @PreAuthorize(\"hasRole('\" + IdRepoEntitlement.ANONYMOUS + \"')\")\n     public void deleteAll() {\n         authProfileDAO.findAll(-1, -1).forEach(profile -> {"},{"sha":"658298a157e328164275e146a6bbfbedc353520a","filename":"core/am/rest-cxf/src/main/java/org/apache/syncope/core/rest/cxf/service/wa/GoogleMfaAuthAccountServiceImpl.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/core%2Fam%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2Fwa%2FGoogleMfaAuthAccountServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/core%2Fam%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2Fwa%2FGoogleMfaAuthAccountServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fam%2Frest-cxf%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcxf%2Fservice%2Fwa%2FGoogleMfaAuthAccountServiceImpl.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -35,7 +35,12 @@ public class GoogleMfaAuthAccountServiceImpl extends AbstractServiceImpl impleme\n \n     @Override\n     public void delete(final String owner) {\n-        logic.deleteFor(owner);\n+        logic.delete(owner);\n+    }\n+\n+    @Override\n+    public void delete(final long id) {\n+        logic.delete(id);\n     }\n \n     @Override"},{"sha":"8916f424c90b5351fbc2abd91ff88eeae94d7ea6","filename":"fit/wa-reference/src/main/resources/log4j2.xml","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -36,15 +36,17 @@ under the License.\n   </appenders>\n \n   <loggers>\n-\n-    <asyncLogger name=\"org.apereo.cas\" additivity=\"false\" level=\"INFO\">\n+    <asyncLogger name=\"org.apereo.cas\" additivity=\"false\" level=\"DEBUG\">\n+      <appender-ref ref=\"main\"/>\n+    </asyncLogger>\n+    <asyncLogger name=\"org.apereo.services.persondir\" additivity=\"false\" level=\"DEBUG\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>\n     <asyncLogger name=\"org.apereo.inspektr.audit.support\" additivity=\"false\" level=\"INFO\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>\n \n-    <asyncLogger name=\"org.pac4j\" additivity=\"false\" level=\"ERROR\">\n+    <asyncLogger name=\"org.pac4j\" additivity=\"false\" level=\"INFO\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>\n "},{"sha":"6d76e2a5ecb43ef499b201974eecf7600921e50c","filename":"fit/wa-reference/src/main/resources/wa.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Fmain%2Fresources%2Fwa.properties?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -33,7 +33,7 @@ cas.logout.follow-service-redirects=true\n cas.authn.saml-idp.core.entity-id=${cas.server.name}/syncope-wa/saml\n cas.authn.saml-idp.metadata.http.metadata-backup-location=file:${conf.directory}/saml\n \n-cas.authn.oidc.core.issuer=${cas.server.name}/syncope-wa/oidc/\n+cas.authn.oidc.core.issuer=${cas.server.name}/syncope-wa/oidc\n cas.authn.oidc.discovery.id-token-signing-alg-values-supported=RS256,RS384,RS512,PS256,PS384,PS512,ES256,ES384,ES512,HS256,HS384,HS512\n cas.authn.oidc.discovery.user-info-signing-alg-values-supported=RS256,RS384,RS512,PS256,PS384,PS512,ES256,ES384,ES512,HS256,HS384,HS512\n cas.authn.oauth.user-profile-view-type=FLAT"},{"sha":"f03574ef8adefa261d7497f2e271309821003790","filename":"fit/wa-reference/src/test/java/org/apache/syncope/fit/sra/AbstractSRAITCase.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fsra%2FAbstractSRAITCase.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -169,7 +169,10 @@ protected static void doStartSRA(final String activeProfile)\n         ProcessBuilder processBuilder = new ProcessBuilder(\n                 javaHome + \"/bin/java\",\n                 \"-Dreactor.netty.http.server.accessLogEnabled=true\",\n-                \"-jar\", sraJar);\n+                \"-jar\",\n+                \"-Xdebug\",\n+                \"-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5006\",\n+                sraJar);\n         processBuilder.inheritIO();\n \n         Map<String, String> environment = processBuilder.environment();"},{"sha":"49ce00a170d172df6234d7bc16597c7db18b64ad","filename":"fit/wa-reference/src/test/java/org/apache/syncope/fit/ui/OIDC4UIITCase.java","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fui%2FOIDC4UIITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fui%2FOIDC4UIITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fui%2FOIDC4UIITCase.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -119,12 +119,12 @@ private static void oidcSetup(\n             cas.setClientID(appName);\n             cas.setClientSecret(appName);\n \n-            cas.setIssuer(WA_ADDRESS + \"/oidc/\");\n-            cas.setAuthorizationEndpoint(WA_ADDRESS + \"/oidc/authorize\");\n-            cas.setTokenEndpoint(WA_ADDRESS + \"/oidc/accessToken\");\n-            cas.setJwksUri(WA_ADDRESS + \"/oidc/jwks\");\n-            cas.setUserinfoEndpoint(WA_ADDRESS + \"/oidc/profile\");\n-            cas.setEndSessionEndpoint(WA_ADDRESS + \"/oidc/logout\");\n+            cas.setIssuer(WA_ADDRESS + \"/oidc\");\n+            cas.setAuthorizationEndpoint(cas.getIssuer() + \"/authorize\");\n+            cas.setTokenEndpoint(cas.getIssuer() + \"/accessToken\");\n+            cas.setJwksUri(cas.getIssuer() + \"/jwks\");\n+            cas.setUserinfoEndpoint(cas.getIssuer() + \"/profile\");\n+            cas.setEndSessionEndpoint(cas.getIssuer() + \"/logout\");\n \n             cas.setCreateUnmatching(createUnmatching);\n             cas.setSelfRegUnmatching(selfRegUnmatching);"},{"sha":"ae41565e792751f6428ee249a22a654b8c7853e8","filename":"fit/wa-reference/src/test/resources/application-oidc.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Fapplication-oidc.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Fapplication-oidc.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Fapplication-oidc.properties?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n am.type=OIDC\n-am.oidc.configuration=http://localhost:9080/syncope-wa/oidc/\n+am.oidc.configuration=http://localhost:9080/syncope-wa/oidc\n am.oidc.client.id=oidcTestClientId\n am.oidc.client.secret=oidcTestClientSecret\n "},{"sha":"759b4112a03a018e0e1d9f577910774b30d31d25","filename":"fit/wa-reference/src/test/resources/log4j2.xml","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Flog4j2.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Flog4j2.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fwa-reference%2Fsrc%2Ftest%2Fresources%2Flog4j2.xml?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -36,6 +36,10 @@ under the License.\n     <asyncLogger name=\"org.apache.syncope.fit\" additivity=\"false\" level=\"DEBUG\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>\n+\n+    <asyncLogger name=\"org.apereo.cas\" additivity=\"false\" level=\"DEBUG\">\n+      <appender-ref ref=\"main\"/>\n+    </asyncLogger>\n     \n     <asyncLogger name=\"org.springframework\" additivity=\"false\" level=\"INFO\">\n       <appender-ref ref=\"main\"/>"},{"sha":"023a8ba1782dd3f433e6c92ceb1386b7d651bd26","filename":"pom.xml","status":"modified","additions":13,"deletions":76,"changes":89,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -448,9 +448,9 @@ under the License.\n \n     <modernizer-maven.version>2.2.0</modernizer-maven.version>\n \n-    <pac4j.version>5.0.1</pac4j.version>\n+    <pac4j.version>5.1.2</pac4j.version>\n \n-    <cas.version>6.4.0-RC4</cas.version>\n+    <cas.version>6.4.0-RC6</cas.version>\n     <cas-client.version>3.6.2</cas-client.version>\n \n     <h2.version>1.4.200</h2.version>\n@@ -1425,6 +1425,17 @@ under the License.\n         <artifactId>cas-server-support-themes</artifactId>\n         <version>${cas.version}</version>\n       </dependency>\n+      <dependency>\n+        <groupId>org.apereo.cas</groupId>\n+        <artifactId>cas-server-support-radius-core</artifactId>\n+        <version>${cas.version}</version>\n+        <exclusions>\n+          <exclusion>\n+            <groupId>gnu-getopt</groupId>\n+            <artifactId>getopt</artifactId>\n+          </exclusion>\n+        </exclusions>\n+      </dependency>\n       <dependency>\n         <groupId>org.apereo.cas</groupId>\n         <artifactId>cas-server-support-radius</artifactId>\n@@ -1527,18 +1538,6 @@ under the License.\n             <groupId>org.glassfish.jersey.containers</groupId>\n             <artifactId>jersey-container-servlet-core</artifactId>\n           </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>webauthn-server-core</artifactId>\n-          </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>webauthn-server-attestation</artifactId>\n-          </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>yubico-util</artifactId>\n-          </exclusion>\n         </exclusions>\n       </dependency>\n       <dependency>\n@@ -1562,36 +1561,8 @@ under the License.\n             <groupId>com.google.code.findbugs</groupId>\n             <artifactId>jsr305</artifactId>\n           </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>webauthn-server-core</artifactId>\n-          </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>webauthn-server-attestation</artifactId>\n-          </exclusion>\n-          <exclusion>\n-            <groupId>com.yubico</groupId>\n-            <artifactId>yubico-util</artifactId>\n-          </exclusion>\n         </exclusions>\n       </dependency>\n-      <!-- TMP until CAS 6.4.0-RC5 -->\n-      <dependency>\n-        <groupId>com.yubico</groupId>\n-        <artifactId>webauthn-server-core</artifactId>\n-        <version>1.9.1-RC2</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>com.yubico</groupId>\n-        <artifactId>webauthn-server-attestation</artifactId>\n-        <version>1.9.1-RC2</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>com.yubico</groupId>\n-        <artifactId>yubico-util</artifactId>\n-        <version>1.9.1-RC2</version>\n-      </dependency>      \n       <dependency>\n         <groupId>org.apereo.cas</groupId>\n         <artifactId>cas-server-support-gauth</artifactId>\n@@ -2058,40 +2029,6 @@ under the License.\n         <enabled>true</enabled>\n       </releases>\n     </repository>\n-\n-    <!-- Disable some Spring repositories pulled in by dependencies - see\n-    https://spring.io/blog/2020/10/29/notice-of-permissions-changes-to-repo-spring-io-fall-and-winter-2020 -->\n-    <repository>\n-      <id>spring-libs-milestone</id>\n-      <url>https://repo.spring.io/libs-milestone</url>\n-      <releases>\n-        <enabled>false</enabled>\n-      </releases>\n-      <snapshots>\n-        <enabled>false</enabled>\n-      </snapshots>\n-    </repository>\n-    <repository>\n-      <id>spring-plugins</id>\n-      <url>https://repo.spring.io/plugins-release/</url>\n-      <releases>\n-        <enabled>false</enabled>\n-      </releases>\n-      <snapshots>\n-        <enabled>false</enabled>\n-      </snapshots>\n-    </repository>\n-    <!-- see https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/ -->\n-    <repository>\n-      <id>uniconiam</id>\n-      <url>https://dl.bintray.com/uniconiam/maven</url>\n-      <releases>\n-        <enabled>false</enabled>\n-      </releases>\n-      <snapshots>\n-        <enabled>false</enabled>\n-      </snapshots>\n-    </repository>\n   </repositories>\n \n   <pluginRepositories>"},{"sha":"7f55501359e205da5d82e03c711ef7b74cd6a620","filename":"sra/src/test/resources/debug/application-debug.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/sra%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/sra%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/sra%2Fsrc%2Ftest%2Fresources%2Fdebug%2Fapplication-debug.properties?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n am.type=OIDC\n-am.oidc.configuration=http://localhost:9080/syncope-wa/oidc/\n+am.oidc.configuration=http://localhost:9080/syncope-wa/oidc\n am.oidc.client.id=oidcTestClientId\n am.oidc.client.secret=oidcTestClientSecret\n "},{"sha":"8d655e6d7d5f29f6fb8c507f26e7854bb9039c1c","filename":"wa/bootstrap/src/main/java/org/apache/syncope/wa/bootstrap/SyncopeWAPropertySourceLocator.java","status":"modified","additions":12,"deletions":12,"changes":24,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FSyncopeWAPropertySourceLocator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FSyncopeWAPropertySourceLocator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fbootstrap%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fbootstrap%2FSyncopeWAPropertySourceLocator.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -52,7 +52,7 @@\n import org.apereo.cas.configuration.model.support.ldap.LdapAuthenticationProperties;\n import org.apereo.cas.configuration.model.support.mfa.DuoSecurityMultifactorAuthenticationProperties;\n import org.apereo.cas.configuration.model.support.mfa.MultifactorAuthenticationProperties;\n-import org.apereo.cas.configuration.model.support.mfa.gauth.GoogleAuthenticatorMultifactorAuthenticationProperties;\n+import org.apereo.cas.configuration.model.support.mfa.gauth.GoogleAuthenticatorMultifactorProperties;\n import org.apereo.cas.configuration.model.support.mfa.u2f.U2FMultifactorAuthenticationProperties;\n import org.apereo.cas.configuration.model.support.pac4j.Pac4jDelegatedAuthenticationProperties;\n import org.apereo.cas.configuration.model.support.pac4j.oidc.Pac4jGenericOidcClientProperties;\n@@ -206,14 +206,14 @@ private static Map<String, Object> mapAuthModule(\n             final String authModule,\n             final GoogleMfaAuthModuleConf conf) {\n \n-        GoogleAuthenticatorMultifactorAuthenticationProperties props =\n-            new GoogleAuthenticatorMultifactorAuthenticationProperties();\n+        GoogleAuthenticatorMultifactorProperties props =\n+            new GoogleAuthenticatorMultifactorProperties();\n         props.setName(authModule);\n-        props.setIssuer(conf.getIssuer());\n-        props.setCodeDigits(conf.getCodeDigits());\n-        props.setLabel(conf.getLabel());\n-        props.setTimeStepSize(conf.getTimeStepSize());\n-        props.setWindowSize(conf.getWindowSize());\n+        props.getCore().setIssuer(conf.getIssuer());\n+        props.getCore().setCodeDigits(conf.getCodeDigits());\n+        props.getCore().setLabel(conf.getLabel());\n+        props.getCore().setTimeStepSize(conf.getTimeStepSize());\n+        props.getCore().setWindowSize(conf.getWindowSize());\n \n         CasConfigurationProperties casProperties = new CasConfigurationProperties();\n         casProperties.getAuthn().getMfa().setGauth(props);\n@@ -239,10 +239,10 @@ private static Map<String, Object> mapAuthModule(\n \n         U2FMultifactorAuthenticationProperties props = new U2FMultifactorAuthenticationProperties();\n         props.setName(authModule);\n-        props.setExpireDevices(conf.getExpireDevices());\n-        props.setExpireDevicesTimeUnit(TimeUnit.valueOf(conf.getExpireDevicesTimeUnit()));\n-        props.setExpireRegistrations(conf.getExpireRegistrations());\n-        props.setExpireRegistrationsTimeUnit(TimeUnit.valueOf(conf.getExpireRegistrationsTimeUnit()));\n+        props.getCore().setExpireDevices(conf.getExpireDevices());\n+        props.getCore().setExpireDevicesTimeUnit(TimeUnit.valueOf(conf.getExpireDevicesTimeUnit()));\n+        props.getCore().setExpireRegistrations(conf.getExpireRegistrations());\n+        props.getCore().setExpireRegistrationsTimeUnit(TimeUnit.valueOf(conf.getExpireRegistrationsTimeUnit()));\n \n         CasConfigurationProperties casProperties = new CasConfigurationProperties();\n         casProperties.getAuthn().getMfa().setU2f(props);"},{"sha":"34787776f6685e0a41caf25eb4ed24b350995b50","filename":"wa/starter/pom.xml","status":"modified","additions":4,"deletions":13,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fpom.xml?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -162,6 +162,10 @@ under the License.\n       <groupId>org.apereo.cas</groupId>\n       <artifactId>cas-server-support-themes</artifactId>\n     </dependency>\n+    <dependency>\n+        <groupId>org.apereo.cas</groupId>\n+        <artifactId>cas-server-support-radius-core</artifactId>\n+    </dependency>\n     <dependency>\n       <groupId>org.apereo.cas</groupId>\n       <artifactId>cas-server-support-radius</artifactId>\n@@ -227,19 +231,6 @@ under the License.\n       <groupId>org.apereo.cas</groupId>\n       <artifactId>cas-server-support-webauthn-core</artifactId>\n     </dependency>\n-    <!-- TMP until CAS 6.4.0-RC5 -->\n-    <dependency>\n-      <groupId>com.yubico</groupId>\n-      <artifactId>webauthn-server-core</artifactId>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.yubico</groupId>\n-      <artifactId>webauthn-server-attestation</artifactId>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.yubico</groupId>\n-      <artifactId>yubico-util</artifactId>\n-    </dependency>\n     <dependency>\n       <groupId>org.apereo.cas</groupId>\n       <artifactId>cas-server-support-u2f</artifactId>"},{"sha":"bcb07643b268c6f4dfc6a3b0c48c5d2718807441","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/config/SyncopeWAConfiguration.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fconfig%2FSyncopeWAConfiguration.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -68,7 +68,7 @@\n import org.apereo.cas.audit.AuditTrailExecutionPlanConfigurer;\n import org.apereo.cas.authentication.surrogate.SurrogateAuthenticationService;\n import org.apereo.cas.configuration.CasConfigurationProperties;\n-import org.apereo.cas.configuration.model.support.mfa.u2f.U2FMultifactorAuthenticationProperties;\n+import org.apereo.cas.configuration.model.support.mfa.u2f.U2FCoreMultifactorAuthenticationProperties;\n import org.apereo.cas.oidc.jwks.OidcJsonWebKeystoreGeneratorService;\n import org.apereo.cas.otp.repository.credentials.OneTimeTokenCredentialRepository;\n import org.apereo.cas.otp.repository.token.OneTimeTokenRepository;\n@@ -90,7 +90,9 @@\n import org.springframework.cloud.context.config.annotation.RefreshScope;\n import org.springframework.context.ConfigurableApplicationContext;\n import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n \n+@Configuration(value = \"SyncopeWAConfiguration\", proxyBeanMethods = true)\n public class SyncopeWAConfiguration {\n \n     @Autowired\n@@ -259,7 +261,7 @@ public DelegatedClientFactoryCustomizer<Client> delegatedClientCustomizer(final\n     @Bean\n     public OneTimeTokenRepository oneTimeTokenAuthenticatorTokenRepository(final WARestClient restClient) {\n         return new SyncopeWAGoogleMfaAuthTokenRepository(\n-                restClient, casProperties.getAuthn().getMfa().getGauth().getTimeStepSize());\n+                restClient, casProperties.getAuthn().getMfa().getGauth().getCore().getTimeStepSize());\n     }\n \n     @Autowired\n@@ -291,7 +293,7 @@ public WebAuthnCredentialRepository webAuthnCredentialRepository(final WARestCli\n     @Autowired\n     @RefreshScope\n     public U2FDeviceRepository u2fDeviceRepository(final WARestClient restClient) {\n-        U2FMultifactorAuthenticationProperties u2f = casProperties.getAuthn().getMfa().getU2f();\n+        U2FCoreMultifactorAuthenticationProperties u2f = casProperties.getAuthn().getMfa().getU2f().getCore();\n         LocalDate expirationDate = LocalDate.now(ZoneId.systemDefault()).\n                 minus(u2f.getExpireDevices(), DateTimeUtils.toChronoUnit(u2f.getExpireDevicesTimeUnit()));\n         LoadingCache<String, String> requestStorage = Caffeine.newBuilder()."},{"sha":"c89eea036f95a3f40aac585ce190f21d71ae3787","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/events/SyncopeWAEventRepository.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fevents%2FSyncopeWAEventRepository.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fevents%2FSyncopeWAEventRepository.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fevents%2FSyncopeWAEventRepository.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -58,11 +58,11 @@ public void put(final Map<String, String> properties, final String key, final St\n     }\n \n     @Override\n-    public void saveInternal(final CasEvent event) {\n+    public CasEvent saveInternal(final CasEvent event) {\n         SyncopeClient syncopeClient = waRestClient.getSyncopeClient();\n         if (syncopeClient == null) {\n             LOG.debug(\"Syncope client is not yet ready to store audit record\");\n-            return;\n+            return null;\n         }\n \n         LOG.info(\"Saving Cas events\");\n@@ -96,6 +96,7 @@ public void saveInternal(final CasEvent event) {\n         } catch (JsonProcessingException e) {\n             LOG.error(\"During serialization\", e);\n         }\n+        return event;\n     }\n \n     @Override"},{"sha":"003a187bdd6aadedd246aaebbbcf614697b686ef","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/gauth/SyncopeWAGoogleMfaAuthCredentialRepository.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fgauth%2FSyncopeWAGoogleMfaAuthCredentialRepository.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fgauth%2FSyncopeWAGoogleMfaAuthCredentialRepository.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fgauth%2FSyncopeWAGoogleMfaAuthCredentialRepository.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -162,6 +162,11 @@ public void delete(final String username) {\n         waRestClient.getSyncopeClient().getService(GoogleMfaAuthAccountService.class).delete(username);\n     }\n \n+    @Override\n+    public void delete(final long id) {\n+        waRestClient.getSyncopeClient().getService(GoogleMfaAuthAccountService.class).delete(id);\n+    }\n+\n     @Override\n     public long count() {\n         return waRestClient.getSyncopeClient().getService(GoogleMfaAuthAccountService.class).list().getTotalCount();"},{"sha":"bc0a5f4305f73a1a8bebcab2737bba89d0086043","filename":"wa/starter/src/main/java/org/apache/syncope/wa/starter/mapping/OIDCRPClientAppTOMapper.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fwa%2Fstarter%2Fmapping%2FOIDCRPClientAppTOMapper.java?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -64,7 +64,7 @@ public RegisteredService map(\n         OidcRegisteredService service = new OidcRegisteredService();\n         setCommon(service, rp);\n \n-        service.setServiceId(Stream.concat(rp.getRedirectUris().stream(), Stream.of(rp.getLogoutUri())).\n+        service.setServiceId(rp.getRedirectUris().stream().\n                 filter(Objects::nonNull).\n                 collect(Collectors.joining(\"|\")));\n         service.setClientId(rp.getClientId());"},{"sha":"e97e441dee85f2da52049893445e31b8b4453c05","filename":"wa/starter/src/main/resources/log4j2.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Flog4j2.xml?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -40,6 +40,11 @@ under the License.\n     <asyncLogger name=\"org.apereo.cas\" additivity=\"false\" level=\"INFO\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>\n+\n+    <asyncLogger name=\"org.apereo.services.persondir\" additivity=\"false\" level=\"INFO\">\n+      <appender-ref ref=\"main\"/>\n+    </asyncLogger>\n+\n     <asyncLogger name=\"org.apereo.inspektr.audit.support\" additivity=\"false\" level=\"INFO\">\n       <appender-ref ref=\"main\"/>\n     </asyncLogger>"},{"sha":"226946ca81671b807d6a6f25c380782a1c3d0be6","filename":"wa/starter/src/main/resources/wa.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fwa.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/af09fec8752e52fbf476dd9ff36bfd47bbddc3e7/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fwa.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/wa%2Fstarter%2Fsrc%2Fmain%2Fresources%2Fwa.properties?ref=af09fec8752e52fbf476dd9ff36bfd47bbddc3e7","patch":"@@ -33,7 +33,7 @@ cas.logout.follow-service-redirects=true\n cas.authn.saml-idp.core.entity-id=${cas.server.name}/syncope-wa/saml\n cas.authn.saml-idp.metadata.http.metadata-backup-location=file:${conf.directory}/saml\n \n-cas.authn.oidc.core.issuer=${cas.server.name}/syncope-wa/oidc/\n+cas.authn.oidc.core.issuer=${cas.server.name}/syncope-wa/oidc\n cas.authn.oidc.discovery.id-token-signing-alg-values-supported=RS256,RS384,RS512,PS256,PS384,PS512,ES256,ES384,ES512,HS256,HS384,HS512\n cas.authn.oidc.discovery.user-info-signing-alg-values-supported=RS256,RS384,RS512,PS256,PS384,PS512,ES256,ES384,ES512,HS256,HS384,HS512\n cas.authn.oauth.user-profile-view-type=FLAT"}]}