{"sha":"a5b5a174d9ba813c5facb496c6889db2d352c205","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmE1YjVhMTc0ZDliYTgxM2M1ZmFjYjQ5NmM2ODg5ZGIyZDM1MmMyMDU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-10T15:26:27Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2015-02-10T15:26:27Z"},"message":"[SYNCOPE-620] jboss-it","tree":{"sha":"b8fda544598ebb1bdedcf8b6ee3876727552b3bf","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b8fda544598ebb1bdedcf8b6ee3876727552b3bf"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/a5b5a174d9ba813c5facb496c6889db2d352c205","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a5b5a174d9ba813c5facb496c6889db2d352c205","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a5b5a174d9ba813c5facb496c6889db2d352c205","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a5b5a174d9ba813c5facb496c6889db2d352c205/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"75902df94df9cc6c9f1bb51280b258b69c89bcc1","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/75902df94df9cc6c9f1bb51280b258b69c89bcc1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/75902df94df9cc6c9f1bb51280b258b69c89bcc1"}],"stats":{"total":189,"additions":188,"deletions":1},"files":[{"sha":"8ae2b56f47695150ad6bdad9aa8b0c1d22501f63","filename":"syncope620/fit/server-reference/pom.xml","status":"modified","additions":120,"deletions":0,"changes":120,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Ffit%2Fserver-reference%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Ffit%2Fserver-reference%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fpom.xml?ref=a5b5a174d9ba813c5facb496c6889db2d352c205","patch":"@@ -549,6 +549,126 @@ under the License.\n       </build>\n     </profile>\n     \n+    <profile>\n+      <id>jboss-it</id>\n+\n+      <dependencies>\n+        <dependency>\n+          <groupId>com.h2database</groupId>\n+          <artifactId>h2</artifactId>\n+        </dependency>\n+        \n+        <dependency>\n+          <groupId>org.apache.syncope.ext.camel</groupId>\n+          <artifactId>syncope-ext-camel-persistence-jpa</artifactId>\n+          <version>${project.version}</version>\n+        </dependency>\n+      </dependencies>\n+\n+      <build>\n+        <defaultGoal>clean verify</defaultGoal>\n+\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-war-plugin</artifactId>\n+            <configuration>\n+              <packagingExcludes>WEB-INF/lib/syncope-*-persistence-jpa-${project.version}.jar</packagingExcludes>\n+            </configuration>\n+          </plugin>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-dependency-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <executions>\n+              <execution>\n+                <id>unpack-jpa-entities</id>\n+                <phase>process-resources</phase>\n+                <goals>\n+                  <goal>unpack</goal>\n+                </goals>\n+                <configuration>\n+                  <artifactItems>\n+                    <artifactItem>\n+                      <groupId>org.apache.syncope.server</groupId>\n+                      <artifactId>syncope-server-persistence-jpa</artifactId>\n+                      <version>${project.version}</version>\n+                      <type>jar</type>\n+                      <overWrite>false</overWrite>\n+                    </artifactItem>\n+                    <artifactItem>\n+                      <groupId>org.apache.syncope.ext.camel</groupId>\n+                      <artifactId>syncope-ext-camel-persistence-jpa</artifactId>\n+                      <version>${project.version}</version>\n+                      <type>jar</type>\n+                      <overWrite>false</overWrite>\n+                    </artifactItem>\n+                  </artifactItems>\n+                  <outputDirectory>${project.build.directory}/${project.build.finalName}/WEB-INF/classes</outputDirectory>\n+                </configuration>\n+              </execution>\n+            </executions>\n+          </plugin>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-antrun-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <executions>\n+              <execution>\n+                <id>remove-jpa-jar</id>\n+                <phase>package</phase>\n+                <configuration>\n+                  <target>\n+                    <delete> \n+                      <fileset dir=\"${project.build.directory}/${project.build.finalName}/WEB-INF/lib\"\n+                               includes=\"syncope-*-persistence-jpa-${project.version}.jar\"/>\n+                    </delete>\n+                  </target>\n+                </configuration>\n+                <goals>\n+                  <goal>run</goal>\n+                </goals>\n+              </execution>\n+            </executions>\n+          </plugin>\n+\n+          <plugin>\n+            <groupId>org.codehaus.cargo</groupId>\n+            <artifactId>cargo-maven2-plugin</artifactId>\n+            <inherited>true</inherited>\n+            <configuration>\n+              <container>\n+                <containerId>wildfly8x</containerId>\n+                <zipUrlInstaller>\n+                  <url>http://download.jboss.org/wildfly/8.2.0.Final/wildfly-8.2.0.Final.zip</url>\n+                  <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n+                  <extractDir>${project.build.directory}/cargo/extract</extractDir>\n+                </zipUrlInstaller>\n+                <log>${cargo.log}</log>\n+                <output>${cargo.output}</output>\n+              </container>\n+              <configuration>\n+                <properties>\n+                  <cargo.jvmargs>-Xms1024m -Xmx2048m -XX:PermSize=512m -XX:MaxPermSize=1024m -XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled</cargo.jvmargs>\n+                </properties>\n+              </configuration>\n+            </configuration>            \n+          </plugin>\n+        </plugins>\n+\n+        <resources>\n+          <resource>\n+            <directory>src/main/resources</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+          <resource>\n+            <directory>src/main/resources/jboss</directory>\n+            <filtering>true</filtering>\n+          </resource>\n+        </resources>\n+      </build>\n+    </profile>\n+\n     <profile>\n       <id>debug</id>\n "},{"sha":"03588bca7ac2ac93c9da6acb67b7d227df37f95a","filename":"syncope620/fit/server-reference/src/main/resources/jboss/persistenceContextEMFactory.xml","status":"added","additions":67,"deletions":0,"changes":67,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Ffit%2Fserver-reference%2Fsrc%2Fmain%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml?ref=a5b5a174d9ba813c5facb496c6889db2d352c205","patch":"@@ -0,0 +1,67 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+                           http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+  <bean id=\"entityManagerFactory\"\n+        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\">\n+    <property name=\"persistenceXmlLocation\" value=\"classpath*:META-INF/spring-persistence.xml\"/>\n+    <property name=\"persistenceUnitName\" value=\"syncopePersistenceUnit\"/>\n+    <property name=\"persistenceUnitPostProcessors\">\n+      <list>\n+        <bean class=\"org.apache.syncope.server.persistence.jpa.spring.MultiJarAwarePersistenceUnitPostProcessor\"/>\n+      </list>\n+    </property>\n+    <property name=\"dataSource\" ref=\"dataSource\"/>\n+    <property name=\"jpaVendorAdapter\">\n+      <bean class=\"org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter\">\n+        <property name=\"showSql\" value=\"false\"/>\n+        <property name=\"generateDdl\" value=\"true\"/>\n+        <property name=\"databasePlatform\" value=\"${jpa.dialect}\"/>\n+      </bean>\n+    </property>\n+    <property name=\"jpaPropertyMap\">\n+      <map>\n+        <!--<entry key=\"openjpa.Log\" value=\"SQL=TRACE\"/>\n+        <entry key=\"openjpa.ConnectionFactoryProperties\" value=\"PrettyPrint=true, PrettyPrintLineLength=80\"/>-->\n+                \n+        <entry key=\"openjpa.NontransactionalWrite\" value=\"false\"/>\n+        <entry key=\"openjpa.AutoDetach\" value=\"close, commit, nontx-read, rollback\"/>\n+\n+        <entry key=\"openjpa.jdbc.SchemaFactory\" value=\"native(ForeignKeys=true)\"/>\n+        <entry key=\"openjpa.jdbc.MappingDefaults\" value=\"ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict\"/>\n+                \n+        <entry key=\"openjpa.ReadLockLevel\" value=\"none\"/>\n+        <entry key=\"openjpa.WriteLockLevel\" value=\"write\"/>\n+        <entry key=\"openjpa.LockTimeout\" value=\"30000\"/>\n+                                \n+        <entry key=\"openjpa.DataCache\" value=\"true\" />\n+        <entry key=\"openjpa.QueryCache\" value=\"true\"/>\n+        <entry key=\"openjpa.RemoteCommitProvider\" value=\"sjvm\"/>\n+        \n+        <entry key=\"openjpa.MetaDataFactory\" \n+               value=\"jpa(URLs=vfs:${project.build.directory}/cargo/configurations/wildfly8x/deployments/syncope.war/WEB-INF/classes, Resources=META-INF/orm.xml)\"/>\n+      </map>\n+    </property>\n+  </bean>\n+\n+</beans>"},{"sha":"7a8e3b9a5791683f9d2b2e0f4c44a6f50c7f1a79","filename":"syncope620/server/persistence-jpa/src/main/resources/persistenceContext.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a5b5a174d9ba813c5facb496c6889db2d352c205/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/syncope620%2Fserver%2Fpersistence-jpa%2Fsrc%2Fmain%2Fresources%2FpersistenceContext.xml?ref=a5b5a174d9ba813c5facb496c6889db2d352c205","patch":"@@ -32,7 +32,7 @@ under the License.\n                            http://www.springframework.org/schema/util/spring-util.xsd\">\n \n   \n-  <import resource=\"persistenceContextEMFactory.xml\"/>\n+  <import resource=\"classpath:persistenceContextEMFactory.xml\"/>\n \n   <bean id=\"nonJPAdbInitializer\" class=\"org.springframework.jdbc.datasource.init.DataSourceInitializer\">\n     <property name=\"dataSource\" ref=\"dataSource\"/>"}]}