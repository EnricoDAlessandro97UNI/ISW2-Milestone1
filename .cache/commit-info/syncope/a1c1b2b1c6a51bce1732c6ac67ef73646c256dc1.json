{"sha":"a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmExYzFiMmIxYzZhNTFiY2UxNzMyYzZhYzY3ZWY3MzY0NmMyNTZkYzE=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-11-16T14:52:06Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-11-16T14:52:06Z"},"message":"Fixes issue 207\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247202 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"78379c767bbcbbdc99e9fe3f23773b51145c12b5","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/78379c767bbcbbdc99e9fe3f23773b51145c12b5"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/comments","author":null,"committer":null,"parents":[{"sha":"a6b07568ed96d257774da5129e4003c2d91522bd","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a6b07568ed96d257774da5129e4003c2d91522bd","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a6b07568ed96d257774da5129e4003c2d91522bd"}],"stats":{"total":71,"additions":31,"deletions":40},"files":[{"sha":"2a9cf33211fdee27b4c08c0be1020191cc24b031","filename":"console/src/main/java/org/syncope/console/pages/Roles.java","status":"modified","additions":6,"deletions":12,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FRoles.java?ref=a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","patch":"@@ -20,8 +20,6 @@\n import org.apache.wicket.extensions.markup.html.tree.table.TreeTable;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.request.mapper.parameter.PageParameters;\n-import org.apache.wicket.spring.injection.annot.SpringBean;\n-import org.syncope.console.commons.RoleTreeBuilder;\n import org.syncope.console.pages.panels.RoleSummaryPanel;\n import org.syncope.console.pages.panels.RoleSummaryPanel.TreeNodeClickUpdate;\n import org.syncope.console.wicket.markup.html.tree.TreeRolePanel;\n@@ -31,9 +29,6 @@\n  */\n public class Roles extends BasePage {\n \n-    @SpringBean\n-    private RoleTreeBuilder roleTreeBuilder;\n-\n     private TreeTable tree;\n \n     private ModalWindow createRoleWin = null;\n@@ -47,12 +42,12 @@ public class Roles extends BasePage {\n     public Roles(final PageParameters parameters) {\n         super(parameters);\n \n-        add(createRoleWin = new ModalWindow(\"createRoleWin\"));\n-\n+        createRoleWin = new ModalWindow(\"createRoleWin\");\n         createRoleWin.setCssClassName(ModalWindow.CSS_CLASS_GRAY);\n         createRoleWin.setInitialHeight(WIN_HEIGHT);\n         createRoleWin.setInitialWidth(WIN_WIDTH);\n         createRoleWin.setCookieName(\"create-role-modal\");\n+        add(createRoleWin);\n \n         container = new WebMarkupContainer(\"container\");\n         container.setOutputMarkupId(true);\n@@ -73,20 +68,19 @@ public Roles(final PageParameters parameters) {\n         createRoleWin.setWindowClosedCallback(\n                 new ModalWindow.WindowClosedCallback() {\n \n-                    private static final long\n-                            serialVersionUID = 8804221891699487139L;\n+                    private static final long serialVersionUID =\n+                            8804221891699487139L;\n \n                     @Override\n                     public void onClose(final AjaxRequestTarget target) {\n \n                         final TreeNodeClickUpdate data =\n                                 new TreeNodeClickUpdate(target,\n-                                        nodePanel.getSelectedNode());\n+                                nodePanel.getSelectedNode() != null\n+                                ? nodePanel.getSelectedNode().getId() : 0);\n \n                         send(getPage(), Broadcast.BREADTH, data);\n-\n                         target.add(container);\n-\n                         if (modalResult) {\n                             getSession().info(getString(\"operation_succeded\"));\n                             target.add(feedbackPanel);"},{"sha":"d5900ba282d32f69df7236adc4ec911ef83b7997","filename":"console/src/main/java/org/syncope/console/pages/panels/RoleSummaryPanel.java","status":"modified","additions":22,"deletions":18,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSummaryPanel.java?ref=a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","patch":"@@ -21,13 +21,18 @@\n import org.apache.wicket.markup.html.panel.Fragment;\n import org.apache.wicket.markup.html.panel.Panel;\n import org.apache.wicket.model.CompoundPropertyModel;\n+import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.syncope.client.to.RoleTO;\n+import org.syncope.console.rest.RoleRestClient;\n import org.syncope.console.wicket.markup.html.tree.TreeActionLinkPanel;\n \n public class RoleSummaryPanel extends Panel {\n \n     private static final long serialVersionUID = 643769814985593156L;\n \n+    @SpringBean\n+    private RoleRestClient restClient;\n+\n     private RoleTO selectedNode;\n \n     private Fragment fragment;\n@@ -50,7 +55,7 @@ public RoleSummaryPanel(final String id,\n \n         fragment = new Fragment(\"rolePanel\",\n                 this.selectedNode == null\n-                ? \"fakerootFrag\" : (this.selectedNode.getId() == 0\n+                ? \"fakerootFrag\" : (this.selectedNode.getId() != 0\n                 ? \"roleViewPanel\" : \"rootPanel\"), this);\n \n         if (this.selectedNode != null) {\n@@ -73,8 +78,8 @@ public RoleSummaryPanel(final String id,\n         add(fragment);\n     }\n \n-    private void setSelectedNode(final RoleTO selectedNode) {\n-        this.selectedNode = selectedNode;\n+    public RoleTO getSelectedNode() {\n+        return selectedNode;\n     }\n \n     @Override\n@@ -86,12 +91,15 @@ public void onEvent(final IEvent<?> event) {\n             final TreeNodeClickUpdate update =\n                     (TreeNodeClickUpdate) event.getPayload();\n \n-            setSelectedNode(update.getSelectedNode());\n+            this.selectedNode =\n+                    restClient.readRole(update.getSelectedNodeId());\n \n-            fragment = new Fragment(\"rolePanel\", (this.selectedNode.getId() != 0\n+            fragment = new Fragment(\"rolePanel\", (update.getSelectedNodeId()\n+                    != 0\n                     ? \"roleViewPanel\" : \"rootPanel\"), this);\n \n-            if (this.selectedNode.getId() != 0) {\n+            if (update.getSelectedNodeId() != 0) {\n+\n                 roleTabPanel =\n                         new RoleTabPanel(\"nodeViewPanel\",\n                         this.selectedNode, window, callerPageRef);\n@@ -100,7 +108,7 @@ public void onEvent(final IEvent<?> event) {\n             } else {\n                 actionLink =\n                         new TreeActionLinkPanel(\"actionLink\",\n-                        this.selectedNode.getId(),\n+                        update.getSelectedNodeId(),\n                         new CompoundPropertyModel(this.selectedNode),\n                         window, callerPageRef);\n                 actionLink.setOutputMarkupId(true);\n@@ -112,34 +120,30 @@ public void onEvent(final IEvent<?> event) {\n         }\n     }\n \n-    public RoleTO getSelectedNode() {\n-        return selectedNode;\n-    }\n-\n     public static class TreeNodeClickUpdate {\n \n         private AjaxRequestTarget target;\n \n-        private RoleTO selectedNode;\n+        private Long selectedNodeId;\n \n         public TreeNodeClickUpdate(final AjaxRequestTarget target,\n-                final RoleTO selectedNode) {\n+                final Long selectedNodeId) {\n \n             this.target = target;\n-            this.selectedNode = selectedNode;\n+            this.selectedNodeId = selectedNodeId;\n         }\n \n         /** @return ajax request target */\n         public AjaxRequestTarget getTarget() {\n             return target;\n         }\n \n-        public RoleTO getSelectedNode() {\n-            return selectedNode;\n+        public Long getSelectedNodeId() {\n+            return selectedNodeId;\n         }\n \n-        public void setSelectedNode(final RoleTO selectedNode) {\n-            this.selectedNode = selectedNode;\n+        public void setSelectedNodeId(final Long selectedNodeId) {\n+            this.selectedNodeId = selectedNodeId;\n         }\n     }\n }\n\\ No newline at end of file"},{"sha":"7ca730707e628cebe268c9545c0771f6964c3797","filename":"console/src/main/java/org/syncope/console/wicket/markup/html/tree/TreeRolePanel.java","status":"modified","additions":3,"deletions":10,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Ftree%2FTreeRolePanel.java?ref=a1c1b2b1c6a51bce1732c6ac67ef73646c256dc1","patch":"@@ -28,15 +28,11 @@\n import org.syncope.client.to.RoleTO;\n import org.syncope.console.commons.RoleTreeBuilder;\n import org.syncope.console.pages.panels.RoleSummaryPanel.TreeNodeClickUpdate;\n-import org.syncope.console.rest.RoleRestClient;\n \n public class TreeRolePanel extends Panel {\n \n     private static final long serialVersionUID = 1762003213871836869L;\n \n-    @SpringBean\n-    private RoleRestClient roleRestClient;\n-\n     @SpringBean\n     private RoleTreeBuilder roleTreeBuilder;\n \n@@ -45,7 +41,6 @@ public class TreeRolePanel extends Panel {\n     private BaseTree tree;\n \n     public TreeRolePanel(final String id) {\n-\n         super(id);\n \n         treeContainer = new WebMarkupContainer(\"treeContainer\");\n@@ -57,7 +52,7 @@ public TreeRolePanel(final String id) {\n         treeContainer.add(tree);\n     }\n \n-    private BaseTree updateTree() {\n+    private void updateTree() {\n \n         tree = new LinkTree(\"treeTable\", roleTreeBuilder.build()) {\n \n@@ -70,13 +65,13 @@ protected IModel getNodeTextModel(final IModel model) {\n \n             @Override\n             protected void onNodeLinkClicked(final Object node,\n-                    final BaseTree tree, final AjaxRequestTarget target) {\n+                    final BaseTree baseTree, final AjaxRequestTarget target) {\n \n                 DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\n                 RoleTO unitObject = (RoleTO) treeNode.getUserObject();\n \n                 send(getPage(), Broadcast.BREADTH,\n-                        new TreeNodeClickUpdate(target, unitObject));\n+                        new TreeNodeClickUpdate(target, unitObject.getId()));\n \n             }\n         };\n@@ -85,8 +80,6 @@ protected void onNodeLinkClicked(final Object node,\n         tree.getTreeState().expandAll();\n \n         treeContainer.addOrReplace(tree);\n-        return tree;\n-\n     }\n \n     @Override"}]}