{"sha":"8b348db262d4e77285c88df9fe41a93dfabdeb35","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjhiMzQ4ZGIyNjJkNGU3NzI4NWM4OGRmOWZlNDFhOTNkZmFiZGViMzU=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-04T10:19:21Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-03-04T10:55:18Z"},"message":"[SYNCOPE-1440] Adjusting 'from' param","tree":{"sha":"a45cbe829e55ba23545f41f6a177c5f2baf255cb","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a45cbe829e55ba23545f41f6a177c5f2baf255cb"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/8b348db262d4e77285c88df9fe41a93dfabdeb35","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8b348db262d4e77285c88df9fe41a93dfabdeb35","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/8b348db262d4e77285c88df9fe41a93dfabdeb35","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/8b348db262d4e77285c88df9fe41a93dfabdeb35/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"d00eec5890038e9f766b8e9e03563cb57ff4779e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d00eec5890038e9f766b8e9e03563cb57ff4779e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d00eec5890038e9f766b8e9e03563cb57ff4779e"}],"stats":{"total":31,"additions":29,"deletions":2},"files":[{"sha":"1d34495a3b92fe4c70710d6a563c14a5fae1855e","filename":"ext/elasticsearch/client-elasticsearch/src/main/java/org/apache/syncope/ext/elasticsearch/client/ElasticsearchClientContext.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchClientContext.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchClientContext.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchClientContext.java?ref=8b348db262d4e77285c88df9fe41a93dfabdeb35","patch":"@@ -46,6 +46,8 @@ public ElasticsearchUtils elasticsearchUtils() {\n         ElasticsearchUtils utils = new ElasticsearchUtils();\n         utils.setIndexMaxResultWindow(10000);\n         utils.setRetryOnConflict(5);\n+        utils.setNumberOfShards(1);\n+        utils.setNumberOfReplicas(1);\n         return utils;\n     }\n }"},{"sha":"2f64eb7a7dc1c934b41de1297a423e878a041e4c","filename":"ext/elasticsearch/client-elasticsearch/src/main/java/org/apache/syncope/ext/elasticsearch/client/ElasticsearchUtils.java","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Felasticsearch%2Fclient-elasticsearch%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fext%2Felasticsearch%2Fclient%2FElasticsearchUtils.java?ref=8b348db262d4e77285c88df9fe41a93dfabdeb35","patch":"@@ -58,6 +58,10 @@ public class ElasticsearchUtils {\n \n     private int retryOnConflict = 5;\n \n+    private int numberOfShards = 1;\n+\n+    private int numberOfReplicas = 1;\n+\n     public void setIndexMaxResultWindow(final int indexMaxResultWindow) {\n         this.indexMaxResultWindow = indexMaxResultWindow;\n     }\n@@ -74,6 +78,22 @@ public int getRetryOnConflict() {\n         return retryOnConflict;\n     }\n \n+    public int getNumberOfShards() {\n+        return numberOfShards;\n+    }\n+\n+    public void setNumberOfShards(final int numberOfShards) {\n+        this.numberOfShards = numberOfShards;\n+    }\n+\n+    public int getNumberOfReplicas() {\n+        return numberOfReplicas;\n+    }\n+\n+    public void setNumberOfReplicas(final int numberOfReplicas) {\n+        this.numberOfReplicas = numberOfReplicas;\n+    }\n+\n     /**\n      * Returns the builder specialized with content from the provided any.\n      *"},{"sha":"a99ed2407a0c8514c07f5a4f72b454bded355f25","filename":"ext/elasticsearch/persistence-jpa/src/main/java/org/apache/syncope/core/persistence/jpa/dao/ElasticsearchAnySearchDAO.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FElasticsearchAnySearchDAO.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FElasticsearchAnySearchDAO.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Felasticsearch%2Fpersistence-jpa%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpersistence%2Fjpa%2Fdao%2FElasticsearchAnySearchDAO.java?ref=8b348db262d4e77285c88df9fe41a93dfabdeb35","patch":"@@ -200,7 +200,7 @@ protected <T extends Any<?>> List<T> doSearch(\n                 adminRealms,\n                 cond,\n                 kind,\n-                (page <= 0 ? 0 : page - 1),\n+                (itemsPerPage * (page <= 0 ? 0 : page - 1)),\n                 (itemsPerPage < 0 ? elasticsearchUtils.getIndexMaxResultWindow() : itemsPerPage),\n                 sortBuilders(kind, orderBy));\n "},{"sha":"eea2a8f97d160d7662a8ff2573ca354d7a3b1db5","filename":"ext/elasticsearch/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/job/ElasticsearchReindex.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FElasticsearchReindex.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/8b348db262d4e77285c88df9fe41a93dfabdeb35/ext%2Felasticsearch%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FElasticsearchReindex.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/ext%2Felasticsearch%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fjob%2FElasticsearchReindex.java?ref=8b348db262d4e77285c88df9fe41a93dfabdeb35","patch":"@@ -156,6 +156,10 @@ private void createIndex(final AnyTypeKind kind)\n                 endObject().\n                 endObject().\n                 endObject().\n+                startObject(\"index\").\n+                field(\"number_of_shards\", elasticsearchUtils.getNumberOfShards()).\n+                field(\"number_of_replicas\", elasticsearchUtils.getNumberOfReplicas()).\n+                endObject().\n                 endObject();\n \n         XContentBuilder mapping = XContentFactory.jsonBuilder().\n@@ -174,7 +178,8 @@ private void createIndex(final AnyTypeKind kind)\n                 endObject();\n \n         CreateIndexResponse response = client.indices().create(\n-                new CreateIndexRequest(elasticsearchUtils.getContextDomainName(kind)).settings(settings).\n+                new CreateIndexRequest(elasticsearchUtils.getContextDomainName(kind)).\n+                        settings(settings).\n                         mapping(kind.name(), mapping), RequestOptions.DEFAULT);\n         LOG.debug(\"Successfully created {} for {}: {}\",\n                 elasticsearchUtils.getContextDomainName(kind), kind.name(), response);"}]}