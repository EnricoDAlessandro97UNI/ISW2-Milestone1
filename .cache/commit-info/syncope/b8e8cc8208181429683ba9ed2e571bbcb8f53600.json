{"sha":"b8e8cc8208181429683ba9ed2e571bbcb8f53600","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmI4ZThjYzgyMDgxODE0Mjk2ODNiYTllZDJlNTcxYmJjYjhmNTM2MDA=","commit":{"author":{"name":"Andrei Shakirin","email":"ashakirin@apache.org","date":"2013-01-31T12:07:56Z"},"committer":{"name":"Andrei Shakirin","email":"ashakirin@apache.org","date":"2013-01-31T12:07:56Z"},"message":"[SYNCOPE-231] Fixed broken build\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1440923 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b08a4aaeb611d6537aae8833e7e74f8cf90a5e91","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/b08a4aaeb611d6537aae8833e7e74f8cf90a5e91"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/b8e8cc8208181429683ba9ed2e571bbcb8f53600","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b8e8cc8208181429683ba9ed2e571bbcb8f53600","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b8e8cc8208181429683ba9ed2e571bbcb8f53600","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b8e8cc8208181429683ba9ed2e571bbcb8f53600/comments","author":{"login":"ashakirin-apache","id":77056600,"node_id":"MDQ6VXNlcjc3MDU2NjAw","avatar_url":"https://avatars.githubusercontent.com/u/77056600?v=4","gravatar_id":"","url":"https://api.github.com/users/ashakirin-apache","html_url":"https://github.com/ashakirin-apache","followers_url":"https://api.github.com/users/ashakirin-apache/followers","following_url":"https://api.github.com/users/ashakirin-apache/following{/other_user}","gists_url":"https://api.github.com/users/ashakirin-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/ashakirin-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashakirin-apache/subscriptions","organizations_url":"https://api.github.com/users/ashakirin-apache/orgs","repos_url":"https://api.github.com/users/ashakirin-apache/repos","events_url":"https://api.github.com/users/ashakirin-apache/events{/privacy}","received_events_url":"https://api.github.com/users/ashakirin-apache/received_events","type":"User","site_admin":false},"committer":{"login":"ashakirin-apache","id":77056600,"node_id":"MDQ6VXNlcjc3MDU2NjAw","avatar_url":"https://avatars.githubusercontent.com/u/77056600?v=4","gravatar_id":"","url":"https://api.github.com/users/ashakirin-apache","html_url":"https://github.com/ashakirin-apache","followers_url":"https://api.github.com/users/ashakirin-apache/followers","following_url":"https://api.github.com/users/ashakirin-apache/following{/other_user}","gists_url":"https://api.github.com/users/ashakirin-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/ashakirin-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashakirin-apache/subscriptions","organizations_url":"https://api.github.com/users/ashakirin-apache/orgs","repos_url":"https://api.github.com/users/ashakirin-apache/repos","events_url":"https://api.github.com/users/ashakirin-apache/events{/privacy}","received_events_url":"https://api.github.com/users/ashakirin-apache/received_events","type":"User","site_admin":false},"parents":[{"sha":"a502ab5138a3d6ee144659de96717ff584224a15","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a502ab5138a3d6ee144659de96717ff584224a15","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a502ab5138a3d6ee144659de96717ff584224a15"}],"stats":{"total":118,"additions":117,"deletions":1},"files":[{"sha":"61a4a37ed06f75decbf8c2f4eb4a685859d95878","filename":"core/src/main/java/org/apache/syncope/core/services/WorkflowServiceImpl.java","status":"added","additions":84,"deletions":0,"changes":84,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fservices%2FWorkflowServiceImpl.java?ref=b8e8cc8208181429683ba9ed2e571bbcb8f53600","patch":"@@ -0,0 +1,84 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ *   http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+package org.apache.syncope.core.services;\r\n+\r\n+import java.util.List;\r\n+\r\n+import javax.ws.rs.BadRequestException;\r\n+import javax.ws.rs.core.UriInfo;\r\n+\r\n+import org.apache.syncope.common.services.WorkflowService;\r\n+import org.apache.syncope.common.to.WorkflowDefinitionTO;\r\n+import org.apache.syncope.common.types.AttributableType;\r\n+import org.apache.syncope.common.util.CollectionWrapper;\r\n+import org.apache.syncope.core.rest.controller.WorkflowController;\r\n+import org.springframework.beans.factory.annotation.Autowired;\r\n+import org.springframework.stereotype.Service;\r\n+\r\n+@Service\r\n+public class WorkflowServiceImpl implements WorkflowService, ContextAware {\r\n+    \r\n+    @Autowired\r\n+    private WorkflowController workflowController;\r\n+\r\n+    @Override\r\n+    public WorkflowDefinitionTO getDefinition(final AttributableType kind) {\r\n+        switch (kind) {\r\n+            case USER:\r\n+                return workflowController.getUserDefinition();\r\n+            case ROLE:\r\n+                return workflowController.getRoleDefinition();\r\n+            default:\r\n+                throw new BadRequestException();\r\n+        }\r\n+    }\r\n+\r\n+\r\n+    @Override\r\n+    public void updateDefinition(final AttributableType kind, final WorkflowDefinitionTO definition) {\r\n+        switch (kind) {\r\n+            case USER:\r\n+                workflowController.updateUserDefinition(definition);\r\n+                break;\r\n+            case ROLE:\r\n+                workflowController.updateRoleDefinition(definition);\r\n+                break;\r\n+            default:\r\n+                throw new BadRequestException();\r\n+        }\r\n+    }\r\n+\r\n+\r\n+    @Override\r\n+    public List<String> getDefinedTasks(final AttributableType kind) {\r\n+        switch (kind) {\r\n+            case USER:\r\n+                return CollectionWrapper.wrapStrings(workflowController.getDefinedUserTasks());\r\n+            case ROLE:\r\n+                return CollectionWrapper.wrapStrings(workflowController.getDefinedUserTasks());\r\n+            default:\r\n+                throw new BadRequestException();\r\n+        }\r\n+    }\r\n+\r\n+    @Override\r\n+    public void setUriInfo(final UriInfo ui) {\r\n+    }\r\n+\r\n+}\r"},{"sha":"bcb39bbb659913c4b983b6908501f83e0a4dd013","filename":"core/src/main/resources/restContext.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Fmain%2Fresources%2FrestContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Fmain%2Fresources%2FrestContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FrestContext.xml?ref=b8e8cc8208181429683ba9ed2e571bbcb8f53600","patch":"@@ -78,7 +78,7 @@ under the License.\n       <ref bean=\"schemaServiceImpl\"/>\n       <ref bean=\"userRequestServiceImpl\"/>\n       <ref bean=\"userServiceImpl\"/>\n-      <!--<ref bean=\"workflowServiceImpl\"/>-->\n+      <ref bean=\"workflowServiceImpl\"/>\n     </jaxrs:serviceBeans>\n     <jaxrs:resourceComparator>\n       <bean id=\"myServiceComparator\" class=\"org.apache.syncope.core.rest.utils.QueryResourceInfoComperator\"/>"},{"sha":"465faacdc48850c6aa0e20616ba2faf536331b7d","filename":"core/src/test/java/org/apache/syncope/core/rest/jaxrs/WorkflowTestITCaseJAXRS.java","status":"added","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fjaxrs%2FWorkflowTestITCaseJAXRS.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/b8e8cc8208181429683ba9ed2e571bbcb8f53600/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fjaxrs%2FWorkflowTestITCaseJAXRS.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fjaxrs%2FWorkflowTestITCaseJAXRS.java?ref=b8e8cc8208181429683ba9ed2e571bbcb8f53600","patch":"@@ -0,0 +1,32 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ *   http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+package org.apache.syncope.core.rest.jaxrs;\r\n+\r\n+import org.apache.syncope.core.rest.WorkflowTestITCase;\r\n+import org.junit.FixMethodOrder;\r\n+import org.junit.runners.MethodSorters;\r\n+\r\n+@FixMethodOrder(MethodSorters.JVM)\r\n+public class WorkflowTestITCaseJAXRS extends WorkflowTestITCase {\r\n+\r\n+    public WorkflowTestITCaseJAXRS() {\r\n+        super();\r\n+        setEnabledCXF(true);\r\n+    }\r\n+}\r"}]}