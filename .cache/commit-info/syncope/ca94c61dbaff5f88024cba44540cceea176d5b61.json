{"sha":"ca94c61dbaff5f88024cba44540cceea176d5b61","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmNhOTRjNjFkYmFmZjVmODgwMjRjYmE0NDU0MGNjZWVhMTc2ZDViNjE=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-06-15T09:50:03Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2020-06-15T09:50:21Z"},"message":"Ensure to always set uidValue for ProvisioningReport instances","tree":{"sha":"4cd946184360fa7cddcc53838c65965837e734bf","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/4cd946184360fa7cddcc53838c65965837e734bf"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ca94c61dbaff5f88024cba44540cceea176d5b61","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ca94c61dbaff5f88024cba44540cceea176d5b61","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ca94c61dbaff5f88024cba44540cceea176d5b61","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ca94c61dbaff5f88024cba44540cceea176d5b61/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"b5c914e744d3756b70f9c747381cf728b8919201","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/b5c914e744d3756b70f9c747381cf728b8919201","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/b5c914e744d3756b70f9c747381cf728b8919201"}],"stats":{"total":39,"additions":22,"deletions":17},"files":[{"sha":"36883d2eba33b10292ea17b731db4e5994ce4ffa","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/AbstractPullResultHandler.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FAbstractPullResultHandler.java?ref=ca94c61dbaff5f88024cba44540cceea176d5b61","patch":"@@ -164,6 +164,7 @@ public boolean handle(final SyncDelta delta) {\n             ignoreResult.setStatus(ProvisioningReport.Status.IGNORE);\n             ignoreResult.setMessage(e.getMessage());\n             ignoreResult.setKey(null);\n+            ignoreResult.setUidValue(delta.getUid().getUidValue());\n             ignoreResult.setName(delta.getObject().getName().getNameValue());\n             profile.getResults().add(ignoreResult);\n \n@@ -309,6 +310,7 @@ protected List<ProvisioningReport> update(\n             result.setAnyType(provision.getAnyType().getKey());\n             result.setStatus(ProvisioningReport.Status.SUCCESS);\n             result.setKey(match.getAny().getKey());\n+            result.setUidValue(delta.getUid().getUidValue());\n \n             AnyTO before = getAnyTO(match.getAny());\n             if (before == null) {\n@@ -418,6 +420,7 @@ protected List<ProvisioningReport> deprovision(\n             result.setAnyType(provision.getAnyType().getKey());\n             result.setStatus(ProvisioningReport.Status.SUCCESS);\n             result.setKey(match.getAny().getKey());\n+            result.setUidValue(delta.getUid().getUidValue());\n \n             AnyTO before = getAnyTO(match.getAny());\n \n@@ -535,6 +538,7 @@ protected List<ProvisioningReport> link(\n             result.setAnyType(provision.getAnyType().getKey());\n             result.setStatus(ProvisioningReport.Status.SUCCESS);\n             result.setKey(match.getAny().getKey());\n+            result.setUidValue(delta.getUid().getUidValue());\n \n             AnyTO before = getAnyTO(match.getAny());\n \n@@ -641,6 +645,7 @@ protected List<ProvisioningReport> delete(\n                 result.setOperation(ResourceOperation.DELETE);\n                 result.setAnyType(provision.getAnyType().getKey());\n                 result.setStatus(ProvisioningReport.Status.SUCCESS);\n+                result.setUidValue(delta.getUid().getUidValue());\n \n                 if (!profile.isDryRun()) {\n                     for (PullActions action : profile.getActions()) {\n@@ -718,6 +723,7 @@ protected List<ProvisioningReport> ignore(\n             report.setOperation(ResourceOperation.NONE);\n             report.setAnyType(provision.getAnyType().getKey());\n             report.setStatus(ProvisioningReport.Status.SUCCESS);\n+            report.setUidValue(delta.getUid().getUidValue());\n             if (message != null && message.length >= 1) {\n                 report.setMessage(message[0]);\n             }\n@@ -731,6 +737,7 @@ protected List<ProvisioningReport> ignore(\n                 report.setOperation(ResourceOperation.NONE);\n                 report.setAnyType(provision.getAnyType().getKey());\n                 report.setStatus(ProvisioningReport.Status.SUCCESS);\n+                report.setUidValue(delta.getUid().getUidValue());\n                 if (message != null && message.length >= 1) {\n                     report.setMessage(message[0]);\n                 }"},{"sha":"dd95907329f5a4987cf3667bb96b591c8276889e","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/DefaultUserPullResultHandler.java","status":"modified","additions":13,"deletions":17,"changes":30,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPullResultHandler.java?ref=ca94c61dbaff5f88024cba44540cceea176d5b61","patch":"@@ -240,6 +240,7 @@ protected Optional<ProvisioningReport> deprovision(\n         report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n         report.setStatus(ProvisioningReport.Status.SUCCESS);\n         report.setKey(account.getKey());\n+        report.setUidValue(account.getConnObjectKeyValue());\n \n         LinkedAccountTO before = userDataBinder.getLinkedAccountTO(account);\n \n@@ -319,6 +320,7 @@ protected Optional<ProvisioningReport> provision(\n         ProvisioningReport report = new ProvisioningReport();\n         report.setOperation(ResourceOperation.CREATE);\n         report.setName(accountTO.getConnObjectKeyValue());\n+        report.setUidValue(accountTO.getConnObjectKeyValue());\n         report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n         report.setStatus(ProvisioningReport.Status.SUCCESS);\n \n@@ -443,6 +445,7 @@ protected Optional<ProvisioningReport> update(\n         ProvisioningReport report = new ProvisioningReport();\n         report.setOperation(ResourceOperation.UPDATE);\n         report.setKey(account.getKey());\n+        report.setUidValue(account.getConnObjectKeyValue());\n         report.setName(account.getConnObjectKeyValue());\n         report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n         report.setStatus(ProvisioningReport.Status.SUCCESS);\n@@ -575,6 +578,7 @@ protected Optional<ProvisioningReport> delete(\n         try {\n             report.setKey(account.getKey());\n             report.setName(account.getConnObjectKeyValue());\n+            report.setUidValue(account.getConnObjectKeyValue());\n             report.setOperation(ResourceOperation.DELETE);\n             report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n             report.setStatus(ProvisioningReport.Status.SUCCESS);\n@@ -649,24 +653,16 @@ protected ProvisioningReport ignore(\n         LOG.debug(\"Linked account to ignore {}\", delta.getObject().getUid().getUidValue());\n \n         ProvisioningReport report = new ProvisioningReport();\n-        if (account == null) {\n-            report.setKey(null);\n-            report.setName(delta.getObject().getUid().getUidValue());\n-            report.setOperation(ResourceOperation.NONE);\n-            report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n-            report.setStatus(ProvisioningReport.Status.SUCCESS);\n-            if (message != null && message.length >= 1) {\n-                report.setMessage(message[0]);\n-            }\n-        } else {\n+        report.setName(delta.getUid().getUidValue());\n+        report.setUidValue(delta.getUid().getUidValue());\n+        report.setOperation(ResourceOperation.NONE);\n+        report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n+        report.setStatus(ProvisioningReport.Status.SUCCESS);\n+        if (message != null && message.length >= 1) {\n+            report.setMessage(message[0]);\n+        }\n+        if (account != null) {\n             report.setKey(account.getKey());\n-            report.setName(delta.getObject().getUid().getUidValue());\n-            report.setOperation(ResourceOperation.NONE);\n-            report.setAnyType(MatchType.LINKED_ACCOUNT.name());\n-            report.setStatus(ProvisioningReport.Status.SUCCESS);\n-            if (message != null && message.length >= 1) {\n-                report.setMessage(message[0]);\n-            }\n         }\n \n         end(AnyTypeKind.USER,"},{"sha":"7260039699a243d58d841dbb4560611fdb21580a","filename":"core/provisioning-java/src/main/java/org/apache/syncope/core/provisioning/java/pushpull/DefaultUserPushResultHandler.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPushResultHandler.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ca94c61dbaff5f88024cba44540cceea176d5b61/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPushResultHandler.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fprovisioning-java%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fprovisioning%2Fjava%2Fpushpull%2FDefaultUserPushResultHandler.java?ref=ca94c61dbaff5f88024cba44540cceea176d5b61","patch":"@@ -194,6 +194,7 @@ public boolean handle(final LinkedAccount account, final Provision provision) {\n                 ignoreResult = new ProvisioningReport();\n                 ignoreResult.setKey(account.getKey());\n                 ignoreResult.setAnyType(MatchType.LINKED_ACCOUNT.name());\n+                ignoreResult.setUidValue(account.getConnObjectKeyValue());\n \n                 profile.getResults().add(ignoreResult);\n             }\n@@ -216,6 +217,7 @@ protected void doHandle(final LinkedAccount account, final Provision provision)\n \n         result.setKey(account.getKey());\n         result.setAnyType(MatchType.LINKED_ACCOUNT.name());\n+        result.setUidValue(account.getConnObjectKeyValue());\n         result.setName(account.getConnObjectKeyValue());\n \n         LOG.debug(\"Pushing linked account {} towards {}\", account.getKey(), profile.getTask().getResource());"}]}