{"sha":"44346bb66485632b9858ce9e0e7defc49541a37f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjQ0MzQ2YmI2NjQ4NTYzMmI5ODU4Y2U5ZTBlN2RlZmM0OTU0MWEzN2Y=","commit":{"author":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-05-05T15:47:47Z"},"committer":{"name":"fmartelli","email":"fabio.martelli@gmail.com","date":"2016-05-05T15:47:47Z"},"message":"[SYNCOPE-745] provides full implementation of report features","tree":{"sha":"0cde04296271d6d52710e7871335cee1b36af2db","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/0cde04296271d6d52710e7871335cee1b36af2db"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/44346bb66485632b9858ce9e0e7defc49541a37f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/44346bb66485632b9858ce9e0e7defc49541a37f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/44346bb66485632b9858ce9e0e7defc49541a37f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/44346bb66485632b9858ce9e0e7defc49541a37f/comments","author":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"committer":{"login":"fmartelli","id":1791932,"node_id":"MDQ6VXNlcjE3OTE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1791932?v=4","gravatar_id":"","url":"https://api.github.com/users/fmartelli","html_url":"https://github.com/fmartelli","followers_url":"https://api.github.com/users/fmartelli/followers","following_url":"https://api.github.com/users/fmartelli/following{/other_user}","gists_url":"https://api.github.com/users/fmartelli/gists{/gist_id}","starred_url":"https://api.github.com/users/fmartelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmartelli/subscriptions","organizations_url":"https://api.github.com/users/fmartelli/orgs","repos_url":"https://api.github.com/users/fmartelli/repos","events_url":"https://api.github.com/users/fmartelli/events{/privacy}","received_events_url":"https://api.github.com/users/fmartelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"1bebcdad67bc84099da101957aae1cd978b1db8f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1bebcdad67bc84099da101957aae1cd978b1db8f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1bebcdad67bc84099da101957aae1cd978b1db8f"}],"stats":{"total":495,"additions":298,"deletions":197},"files":[{"sha":"0e5f631c22244c59f27aa5ef7ea7f7bbb4103404","filename":"client/console/src/main/java/org/apache/syncope/client/console/reports/ExportTogglePanel.java","status":"removed","additions":0,"deletions":113,"changes":113,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1bebcdad67bc84099da101957aae1cd978b1db8f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1bebcdad67bc84099da101957aae1cd978b1db8f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.java?ref=1bebcdad67bc84099da101957aae1cd978b1db8f","patch":"@@ -1,113 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.syncope.client.console.reports;\n-\n-import java.io.Serializable;\n-import java.util.Arrays;\n-import org.apache.syncope.client.console.SyncopeConsoleSession;\n-import org.apache.syncope.client.console.commons.Constants;\n-import org.apache.syncope.client.console.commons.HttpResourceStream;\n-import org.apache.syncope.client.console.panels.TogglePanel;\n-import org.apache.syncope.client.console.rest.ReportRestClient;\n-import org.apache.syncope.client.console.wicket.ajax.form.AbstractAjaxDownloadBehavior;\n-import org.apache.syncope.client.console.wicket.ajax.form.IndicatorAjaxFormComponentUpdatingBehavior;\n-import org.apache.syncope.client.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n-import org.apache.syncope.common.lib.types.ReportExecExportFormat;\n-import org.apache.wicket.ajax.AjaxRequestTarget;\n-import org.apache.wicket.model.IModel;\n-import org.apache.wicket.model.Model;\n-import org.apache.wicket.util.resource.IResourceStream;\n-\n-public class ExportTogglePanel extends TogglePanel<Serializable> {\n-\n-    private static final long serialVersionUID = -3195479265440591519L;\n-\n-    private String execution;\n-\n-    private IModel<ReportExecExportFormat> model = Model.of(ReportExecExportFormat.CSV);\n-\n-    public ExportTogglePanel(final String id) {\n-        super(id);\n-\n-        final AjaxDropDownChoicePanel<ReportExecExportFormat> format = new AjaxDropDownChoicePanel<>(\n-                \"format\",\n-                \"format\",\n-                model,\n-                false);\n-\n-        format.setChoices(Arrays.asList(ReportExecExportFormat.values())).setOutputMarkupId(true);\n-\n-        final AjaxExportDownloadBehavior downloadBehavior = new AjaxExportDownloadBehavior();\n-        format.getField().add(new IndicatorAjaxFormComponentUpdatingBehavior(Constants.ON_CHANGE) {\n-\n-            private static final long serialVersionUID = -1107858522700306810L;\n-\n-            @Override\n-            protected void onUpdate(final AjaxRequestTarget target) {\n-                try {\n-                    LOG.info(\"Downloding report execution {} [{}]\", execution, format.getModelObject());\n-                    downloadBehavior.setExportFormat(format.getModelObject()).initiate(target);\n-                    toggle(target, false);\n-                } catch (Exception e) {\n-                    error(getString(Constants.ERROR) + \":\" + e.getMessage());\n-                    SyncopeConsoleSession.get().getNotificationPanel().refresh(target);\n-                }\n-            }\n-        }).add(downloadBehavior);\n-\n-        addInnerObject(format.hideLabel());\n-    }\n-\n-    public void setExecution(final String execution) {\n-        this.execution = execution;\n-    }\n-\n-    private class AjaxExportDownloadBehavior extends AbstractAjaxDownloadBehavior {\n-\n-        private static final long serialVersionUID = 3109256773218160485L;\n-\n-        private ReportExecExportFormat exportFormat;\n-\n-        private HttpResourceStream stream;\n-\n-        public AjaxExportDownloadBehavior setExportFormat(final ReportExecExportFormat exportFormat) {\n-            this.exportFormat = exportFormat;\n-            return this;\n-        }\n-\n-        private void createResourceStream() {\n-            if (stream == null) {\n-                stream = new HttpResourceStream(new ReportRestClient().exportExecutionResult(execution, exportFormat));\n-            }\n-        }\n-\n-        @Override\n-        protected String getFileName() {\n-            createResourceStream();\n-            return stream == null ? null : stream.getFilename();\n-        }\n-\n-        @Override\n-        protected IResourceStream getResourceStream() {\n-            createResourceStream();\n-            return stream;\n-        }\n-    }\n-\n-}"},{"sha":"475deff4f06e694b0164b561fc682c89b85dd531","filename":"client/console/src/main/java/org/apache/syncope/client/console/reports/ReportExecutionDetails.java","status":"modified","additions":131,"deletions":9,"changes":140,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FReportExecutionDetails.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FReportExecutionDetails.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FReportExecutionDetails.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -18,12 +18,22 @@\n  */\n package org.apache.syncope.client.console.reports;\n \n+import org.apache.syncope.client.console.commons.HttpResourceStream;\n import org.apache.syncope.client.console.panels.MultilevelPanel;\n+import org.apache.syncope.client.console.rest.ExecutionRestClient;\n import org.apache.syncope.client.console.rest.ReportRestClient;\n import org.apache.syncope.client.console.tasks.ExecutionsDirectoryPanel;\n+import org.apache.syncope.client.console.wicket.ajax.form.AbstractAjaxDownloadBehavior;\n+import org.apache.syncope.client.console.wicket.markup.html.form.ActionLink;\n+import org.apache.syncope.client.console.wicket.markup.html.form.ActionLinksPanel;\n+import org.apache.syncope.common.lib.to.ExecTO;\n import org.apache.syncope.common.lib.to.ReportTO;\n+import org.apache.syncope.common.lib.types.ReportExecExportFormat;\n+import org.apache.syncope.common.lib.types.StandardEntitlement;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.util.resource.IResourceStream;\n \n /**\n  * Modal window with report executions.\n@@ -38,17 +48,129 @@ public ReportExecutionDetails(final ReportTO reportTO, final PageReference pageR\n         final MultilevelPanel mlp = new MultilevelPanel(\"executions\");\n         add(mlp);\n \n-        mlp.setFirstLevel(new ExecutionsDirectoryPanel(mlp, reportTO.getKey(), new ReportRestClient(), pageRef) {\n+        mlp.setFirstLevel(new ReportExecutionDirectoryPanel(mlp, reportTO.getKey(), new ReportRestClient(), pageRef));\n+    }\n+\n+    private static class ReportExecutionDirectoryPanel extends ExecutionsDirectoryPanel {\n+\n+        private static final long serialVersionUID = 5691719817252887541L;\n+\n+        private final MultilevelPanel mlp;\n+\n+        private final AjaxExportDownloadBehavior downloadBehavior;\n+\n+        ReportExecutionDirectoryPanel(\n+                final MultilevelPanel multiLevelPanelRef,\n+                final String key,\n+                final ExecutionRestClient executionRestClient,\n+                final PageReference pageRef) {\n+            super(multiLevelPanelRef, key, executionRestClient, pageRef);\n+            this.mlp = multiLevelPanelRef;\n+\n+            this.downloadBehavior = new AjaxExportDownloadBehavior();\n+            this.add(downloadBehavior);\n+        }\n+\n+        @Override\n+        protected void next(\n+                final String title,\n+                final MultilevelPanel.SecondLevel slevel,\n+                final AjaxRequestTarget target) {\n+            mlp.next(title, slevel, target);\n+        }\n+\n+        @Override\n+        protected void addFurtherAcions(final ActionLinksPanel.Builder<ExecTO> panel, final IModel<ExecTO> model) {\n+            panel.add(new ActionLink<ExecTO>() {\n+\n+                private static final long serialVersionUID = -3722207913631435501L;\n+\n+                @Override\n+                public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n+                    downloadBehavior.setDetails(model.getObject().getKey(), ReportExecExportFormat.CSV);\n+                    downloadBehavior.initiate(target);\n+                }\n+            }, ActionLink.ActionType.EXPORT_CSV, StandardEntitlement.REPORT_READ);\n+\n+            panel.add(new ActionLink<ExecTO>() {\n+\n+                private static final long serialVersionUID = -3722207913631435501L;\n+\n+                @Override\n+                public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n+                    downloadBehavior.setDetails(model.getObject().getKey(), ReportExecExportFormat.HTML);\n+                    downloadBehavior.initiate(target);\n+                }\n+            }, ActionLink.ActionType.EXPORT_HTML, StandardEntitlement.REPORT_READ);\n+\n+            panel.add(new ActionLink<ExecTO>() {\n+\n+                private static final long serialVersionUID = -3722207913631435501L;\n \n-            private static final long serialVersionUID = 5691719817252887541L;\n+                @Override\n+                public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n+                    downloadBehavior.setDetails(model.getObject().getKey(), ReportExecExportFormat.PDF);\n+                    downloadBehavior.initiate(target);\n+                }\n+            }, ActionLink.ActionType.EXPORT_PDF, StandardEntitlement.REPORT_READ);\n \n-            @Override\n-            protected void next(\n-                    final String title,\n-                    final MultilevelPanel.SecondLevel slevel,\n-                    final AjaxRequestTarget target) {\n-                mlp.next(title, slevel, target);\n+            panel.add(new ActionLink<ExecTO>() {\n+\n+                private static final long serialVersionUID = -3722207913631435501L;\n+\n+                @Override\n+                public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n+                    downloadBehavior.setDetails(model.getObject().getKey(), ReportExecExportFormat.RTF);\n+                    downloadBehavior.initiate(target);\n+                }\n+            }, ActionLink.ActionType.EXPORT_RTF, StandardEntitlement.REPORT_READ);\n+\n+            panel.add(new ActionLink<ExecTO>() {\n+\n+                private static final long serialVersionUID = -3722207913631435501L;\n+\n+                @Override\n+                public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n+                    downloadBehavior.setDetails(model.getObject().getKey(), ReportExecExportFormat.XML);\n+                    downloadBehavior.initiate(target);\n+                }\n+            }, ActionLink.ActionType.EXPORT_XML, StandardEntitlement.REPORT_READ);\n+        }\n+    }\n+\n+    private static class AjaxExportDownloadBehavior extends AbstractAjaxDownloadBehavior {\n+\n+        private static final long serialVersionUID = 3109256773218160485L;\n+\n+        private String execution;\n+\n+        private ReportExecExportFormat exportFormat;\n+\n+        private HttpResourceStream stream;\n+\n+        public AjaxExportDownloadBehavior setDetails(\n+                final String execution, final ReportExecExportFormat exportFormat) {\n+            this.execution = execution;\n+            this.exportFormat = exportFormat;\n+            return this;\n+        }\n+\n+        private void createResourceStream() {\n+            if (stream == null) {\n+                stream = new HttpResourceStream(new ReportRestClient().exportExecutionResult(execution, exportFormat));\n             }\n-        });\n+        }\n+\n+        @Override\n+        protected String getFileName() {\n+            createResourceStream();\n+            return stream == null ? null : stream.getFilename();\n+        }\n+\n+        @Override\n+        protected IResourceStream getResourceStream() {\n+            createResourceStream();\n+            return stream;\n+        }\n     }\n }"},{"sha":"0d3675969ba8302b95ad983108677cd4c10fd6aa","filename":"client/console/src/main/java/org/apache/syncope/client/console/tasks/ExecutionsDirectoryPanel.java","status":"modified","additions":5,"deletions":16,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FExecutionsDirectoryPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FExecutionsDirectoryPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Ftasks%2FExecutionsDirectoryPanel.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -32,7 +32,6 @@\n import org.apache.syncope.client.console.panels.AjaxDataTablePanel;\n import org.apache.syncope.client.console.panels.MultilevelPanel;\n import org.apache.syncope.client.console.panels.MultilevelPanel.SecondLevel;\n-import org.apache.syncope.client.console.reports.ExportTogglePanel;\n import org.apache.syncope.client.console.rest.ExecutionRestClient;\n import org.apache.syncope.client.console.tasks.ExecutionsDirectoryPanel.ExecProvider;\n import org.apache.syncope.client.console.wicket.extensions.markup.html.repeater.data.table.ActionColumn;\n@@ -58,8 +57,6 @@\n \n     private static final long serialVersionUID = 2039393934721149162L;\n \n-    private final ExportTogglePanel export;\n-\n     private final BaseModal<?> baseModal;\n \n     private final MultilevelPanel multiLevelPanelRef;\n@@ -82,9 +79,6 @@ public ExecutionsDirectoryPanel(\n             final PageReference pageRef) {\n         super(MultilevelPanel.FIRST_LEVEL_ID, pageRef, false);\n \n-        this.export = new ExportTogglePanel(\"outer\");\n-        addOuterObject(this.export);\n-\n         this.baseModal = baseModal;\n         this.multiLevelPanelRef = multiLevelPanelRef;\n         restClient = executionRestClient;\n@@ -137,16 +131,6 @@ public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n \n                             private static final long serialVersionUID = -3722207913631435501L;\n \n-                            @Override\n-                            public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n-                                export.setExecution(model.getObject().getKey());\n-                                export.toggle(target, true);\n-                            }\n-                        }, ActionLink.ActionType.EXPORT, StandardEntitlement.REPORT_READ).\n-                        add(new ActionLink<ExecTO>() {\n-\n-                            private static final long serialVersionUID = -3722207913631435501L;\n-\n                             @Override\n                             public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n                                 try {\n@@ -160,6 +144,8 @@ public void onClick(final AjaxRequestTarget target, final ExecTO ignore) {\n                             }\n                         }, ActionLink.ActionType.DELETE, StandardEntitlement.TASK_DELETE);\n \n+                addFurtherAcions(panel, model);\n+\n                 return panel.build(componentId, model.getObject());\n             }\n \n@@ -184,6 +170,9 @@ public void onClick(final AjaxRequestTarget target, final Serializable ignore) {\n         return columns;\n     }\n \n+    protected void addFurtherAcions(final ActionLinksPanel.Builder<ExecTO> panel, final IModel<ExecTO> model) {\n+    }\n+\n     @Override\n     protected ExecProvider dataProvider() {\n         return new ExecProvider(key, rows);"},{"sha":"9342c7d724e024d56a5e33143b68473ae594dd42","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/ajax/form/AbstractAjaxDownloadBehavior.java","status":"modified","additions":11,"deletions":2,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fajax%2Fform%2FAbstractAjaxDownloadBehavior.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fajax%2Fform%2FAbstractAjaxDownloadBehavior.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fajax%2Fform%2FAbstractAjaxDownloadBehavior.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -22,11 +22,15 @@\n import org.apache.wicket.behavior.AbstractAjaxBehavior;\n import org.apache.wicket.request.handler.resource.ResourceStreamRequestHandler;\n import org.apache.wicket.util.resource.IResourceStream;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n public abstract class AbstractAjaxDownloadBehavior extends AbstractAjaxBehavior {\n \n     private static final long serialVersionUID = 6833760760338614245L;\n \n+    protected static final Logger LOG = LoggerFactory.getLogger(AbstractAjaxDownloadBehavior.class);\n+\n     /**\n      * Call this method to initiate the download.\n      *\n@@ -39,8 +43,13 @@ public void initiate(final AjaxRequestTarget target) {\n \n     @Override\n     public void onRequest() {\n-        getComponent().getRequestCycle().scheduleRequestHandlerAfterCurrent(\n-                new ResourceStreamRequestHandler(getResourceStream(), getFileName()));\n+        try {\n+            getComponent().getRequestCycle().scheduleRequestHandlerAfterCurrent(\n+                    new ResourceStreamRequestHandler(getResourceStream(), getFileName()));\n+        } catch (Exception e) {\n+            // cannot be notifies beacause the use of scheduleRequestHandlerAfterCurrent\n+            LOG.error(\"Error downloading file\", e);\n+        }\n     }\n \n     protected abstract String getFileName();"},{"sha":"fad561c44f08809fdd0dc3168bdfeb220a8231e0","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLink.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLink.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -64,6 +64,11 @@ public enum ActionType {\n         SELECT(\"read\"),\n         CLOSE(\"read\"),\n         EXPORT(\"read\"),\n+        EXPORT_CSV(\"read\"),\n+        EXPORT_HTML(\"read\"),\n+        EXPORT_PDF(\"read\"),\n+        EXPORT_RTF(\"read\"),\n+        EXPORT_XML(\"read\"),\n         SUSPEND(\"update\"),\n         REACTIVATE(\"update\"),\n         RELOAD(\"reload\"),"},{"sha":"e9b7b1f5d75f39a13e800282023b4e54932cf1fa","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksPanel.java","status":"modified","additions":119,"deletions":0,"changes":119,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -78,6 +78,11 @@ private ActionLinksPanel(final String componentId, final IModel<T> model) {\n         super.add(new Fragment(\"panelSelect\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelClose\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelExport\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExportCSV\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExportHTML\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExportPDF\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExportRTF\", \"emptyFragment\", this));\n+        super.add(new Fragment(\"panelExportXML\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelSuspend\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelReactivate\", \"emptyFragment\", this));\n         super.add(new Fragment(\"panelReload\", \"emptyFragment\", this));\n@@ -603,6 +608,101 @@ public String getAjaxIndicatorMarkupId() {\n                 }.setVisible(link.isEnabled(model.getObject())));\n                 break;\n \n+            case EXPORT_CSV:\n+                fragment = new Fragment(\"panelExportCSV\", \"fragmentExportCSV\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"exportCSVLink\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n+            case EXPORT_HTML:\n+                fragment = new Fragment(\"panelExportHTML\", \"fragmentExportHTML\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"exportHTMLLink\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n+            case EXPORT_PDF:\n+                fragment = new Fragment(\"panelExportPDF\", \"fragmentExportPDF\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"exportPDFLink\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n+            case EXPORT_RTF:\n+                fragment = new Fragment(\"panelExportRTF\", \"fragmentExportRTF\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"exportRTFLink\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n+            case EXPORT_XML:\n+                fragment = new Fragment(\"panelExportXML\", \"fragmentExportXML\", this);\n+\n+                fragment.addOrReplace(new IndicatingAjaxLink<Void>(\"exportXMLLink\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+                        link.onClick(target, model.getObject());\n+                    }\n+\n+                    @Override\n+                    public String getAjaxIndicatorMarkupId() {\n+                        return disableIndicator ? StringUtils.EMPTY : super.getAjaxIndicatorMarkupId();\n+                    }\n+                }.setVisible(link.isEnabled(model.getObject())));\n+                break;\n+\n             case SUSPEND:\n                 fragment = new Fragment(\"panelSuspend\", \"fragmentSuspend\", this);\n \n@@ -976,6 +1076,25 @@ public void remove(final ActionLink.ActionType type) {\n                 super.addOrReplace(new Fragment(\"panelExport\", \"emptyFragment\", this));\n                 break;\n \n+            case EXPORT_CSV:\n+                super.addOrReplace(new Fragment(\"panelExportCSV\", \"emptyFragment\", this));\n+                break;\n+\n+            case EXPORT_HTML:\n+                super.addOrReplace(new Fragment(\"panelExportHTML\", \"emptyFragment\", this));\n+                break;\n+\n+            case EXPORT_PDF:\n+                super.addOrReplace(new Fragment(\"panelExportPDF\", \"emptyFragment\", this));\n+                break;\n+\n+            case EXPORT_RTF:\n+                super.addOrReplace(new Fragment(\"panelExportRTF\", \"emptyFragment\", this));\n+                break;\n+            case EXPORT_XML:\n+                super.addOrReplace(new Fragment(\"panelExportXML\", \"emptyFragment\", this));\n+                break;\n+\n             case SUSPEND:\n                 super.addOrReplace(new Fragment(\"panelSuspend\", \"emptyFragment\", this));\n                 break;"},{"sha":"da3c7f82ae8aa46b2040cdc5fadde606e9ff84a4","filename":"client/console/src/main/resources/org/apache/syncope/client/console/reports/ExportTogglePanel.html","status":"removed","additions":0,"deletions":46,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1bebcdad67bc84099da101957aae1cd978b1db8f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1bebcdad67bc84099da101957aae1cd978b1db8f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Freports%2FExportTogglePanel.html?ref=1bebcdad67bc84099da101957aae1cd978b1db8f","patch":"@@ -1,46 +0,0 @@\n-<!--\n-Licensed to the Apache Software Foundation (ASF) under one\n-or more contributor license agreements.  See the NOTICE file\n-distributed with this work for additional information\n-regarding copyright ownership.  The ASF licenses this file\n-to you under the Apache License, Version 2.0 (the\n-\"License\"); you may not use this file except in compliance\n-with the License.  You may obtain a copy of the License at\n-\n-  http://www.apache.org/licenses/LICENSE-2.0\n-\n-Unless required by applicable law or agreed to in writing,\n-software distributed under the License is distributed on an\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-KIND, either express or implied.  See the License for the\n-specific language governing permissions and limitations\n-under the License.\n--->\n-<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n-  <wicket:head>\n-    <style type=\"text/css\">\n-      div#startAt {\n-        background-color: rgba(98, 98, 98, 0.98) !important;\n-        color: #CCC;\n-        right: 5px !important;\n-        top: 100px !important;\n-        min-width: 300px;\n-        min-height: 130px !important;\n-        z-index: 6000 !important;\n-      }\n-\n-      div#startAtContainer {\n-        padding: 15px;\n-      }\n-\n-      div#startAtContainer input {\n-        background-color: rgba(200, 200, 200, 0.60) !important;\n-      }\n-    </style>\n-  </wicket:head>\n-  <wicket:extend>\n-    <div id=\"startAtContainer\" class=\"form-group\">\n-      <span wicket:id=\"format\"></span>\n-    </div>\n-  </wicket:extend>\n-</html>"},{"sha":"e0202fd28edb3b6a1776b50352dcbb3219338b4b","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/ActionLinksPanel.html","status":"modified","additions":25,"deletions":0,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FActionLinksPanel.html?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -50,6 +50,11 @@\n     <span wicket:id=\"panelCompose\">[plus]</span>\n     <span wicket:id=\"panelLayoutEdit\">[plus]</span>\n     <span wicket:id=\"panelExport\">[plus]</span>\n+    <span wicket:id=\"panelExportCSV\">[plus]</span>\n+    <span wicket:id=\"panelExportHTML\">[plus]</span>\n+    <span wicket:id=\"panelExportPDF\">[plus]</span>\n+    <span wicket:id=\"panelExportRTF\">[plus]</span>\n+    <span wicket:id=\"panelExportXML\">[plus]</span>\n     <span wicket:id=\"panelPropagationTasks\">[plus]</span>\n     <span wicket:id=\"panelNotificationTasks\">[plus]</span>\n     <span wicket:id=\"panelDelete\">[plus]</span>\n@@ -184,6 +189,26 @@\n       <a href=\"#\" wicket:id=\"exportLink\" class=\"btn\"><i class=\"fa fa-floppy-o\" alt=\"export icon\" title=\"Export\"></i></a>\n     </wicket:fragment>\n \n+    <wicket:fragment wicket:id=\"fragmentExportCSV\">\n+      <a href=\"#\" wicket:id=\"exportCSVLink\" class=\"btn\"><i class=\"fa fa-file-text-o\" alt=\"export icon\" title=\"Export CSV\"></i></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentExportHTML\">\n+      <a href=\"#\" wicket:id=\"exportHTMLLink\" class=\"btn\"><i class=\"fa fa-file-code-o\" alt=\"export icon\" title=\"Export HTML\"></i></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentExportPDF\">\n+      <a href=\"#\" wicket:id=\"exportPDFLink\" class=\"btn\"><i class=\"fa fa-file-pdf-o\" alt=\"export icon\" title=\"Export PDF\"></i></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentExportRTF\">\n+      <a href=\"#\" wicket:id=\"exportRTFLink\" class=\"btn\"><i class=\"fa fa-file-word-o\" alt=\"export icon\" title=\"Export RTF\"></i></a>\n+    </wicket:fragment>\n+\n+    <wicket:fragment wicket:id=\"fragmentExportXML\">\n+      <a href=\"#\" wicket:id=\"exportXMLLink\" class=\"btn\"><i class=\"fa fa-file-excel-o\" alt=\"export icon\" title=\"Export XML\"></i></a>\n+    </wicket:fragment>\n+\n     <wicket:fragment wicket:id=\"fragmentSuspend\">\n       <a href=\"#\" wicket:id=\"suspendLink\" class=\"btn\"><i class=\"glyphicon glyphicon-ban-circle\" alt=\"suspend icon\" title=\"Suspend\"></i></a>\n     </wicket:fragment>"},{"sha":"79b681ed9f0312cb270c26ac80d0cb8e23f538fc","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/console/ReportsITCase.java","status":"modified","additions":0,"deletions":9,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FReportsITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FReportsITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fconsole%2FReportsITCase.java?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -137,15 +137,6 @@ public void read() {\n \n         assertNotNull(result);\n \n-        wicketTester.clickLink(result.getPageRelativePath() + \":cells:6:cell:panelExport:exportLink\");\n-        wicketTester.assertComponent(\"body:content:tabbedPanel:panel:secondLevelContainer:second:executions:\"\n-                + \"firstLevelContainer:first:outerObjectsRepeater:3:outer:container:content:togglePanelContainer:close\",\n-                AjaxLink.class);\n-\n-        wicketTester.clickLink(\n-                \"body:content:tabbedPanel:panel:secondLevelContainer:second:executions:firstLevelContainer:first:\"\n-                + \"outerObjectsRepeater:3:outer:container:content:togglePanelContainer:close\");\n-\n         wicketTester.clickLink(result.getPageRelativePath() + \":cells:6:cell:panelView:viewLink\");\n         wicketTester.clickLink(\n                 \"body:content:tabbedPanel:panel:secondLevelContainer:second:executions:secondLevelContainer:back\");"},{"sha":"43074dabf172001e77dce85c98a7b2ff5065df87","filename":"pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/44346bb66485632b9858ce9e0e7defc49541a37f/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/44346bb66485632b9858ce9e0e7defc49541a37f/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=44346bb66485632b9858ce9e0e7defc49541a37f","patch":"@@ -339,7 +339,7 @@ under the License.\n     <jackson.version>2.7.4</jackson.version>\n \n     <spring.version>4.2.5.RELEASE</spring.version>\n-    <spring-security.version>4.0.4.RELEASE</spring-security.version>\n+    <spring-security.version>4.1.0.RELEASE</spring-security.version>\n \n     <openjpa.version>2.4.1</openjpa.version>\n     <commons-dbcp.version>2.1.1</commons-dbcp.version>\n@@ -394,7 +394,7 @@ under the License.\n     <codemirror.version>5.13.2</codemirror.version>\n     <jsplumb.version>2.0.7</jsplumb.version>\n     \n-    <wicket.version>7.2.0</wicket.version>\n+    <wicket.version>7.3.0</wicket.version>\n     <wicket-jqueryui.version>7.2.1</wicket-jqueryui.version>\n     <wicket-bootstrap.version>0.10.6</wicket-bootstrap.version>\n     <wicket-chartjs.version>7.0.1</wicket-chartjs.version>"}]}