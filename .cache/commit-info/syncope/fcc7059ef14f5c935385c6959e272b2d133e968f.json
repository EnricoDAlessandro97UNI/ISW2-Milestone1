{"sha":"fcc7059ef14f5c935385c6959e272b2d133e968f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZjYzcwNTllZjE0ZjVjOTM1Mzg1YzY5NTllMjcyYjJkMTMzZTk2OGY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-01-15T08:33:00Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2014-01-15T08:33:00Z"},"message":"[SYNCOPE-476] Applying provided patch\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/1_1_X@1558319 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"cc08c8e652a3c13fb1443b41a69d5bbdcbe93241","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/cc08c8e652a3c13fb1443b41a69d5bbdcbe93241"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/fcc7059ef14f5c935385c6959e272b2d133e968f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fcc7059ef14f5c935385c6959e272b2d133e968f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fcc7059ef14f5c935385c6959e272b2d133e968f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fcc7059ef14f5c935385c6959e272b2d133e968f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"e086648cf96bcf2fce0a95e9252127c14a546386","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e086648cf96bcf2fce0a95e9252127c14a546386","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e086648cf96bcf2fce0a95e9252127c14a546386"}],"stats":{"total":717,"additions":402,"deletions":315},"files":[{"sha":"684f8390f80a8fe3741cebd11ee5b62c89e1456a","filename":"console/src/main/java/org/apache/syncope/console/commons/PageUtils.java","status":"added","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPageUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPageUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPageUtils.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.console.commons;\n+\n+import org.apache.wicket.Page;\n+import org.apache.wicket.PageReference;\n+\n+public final class PageUtils {\n+\n+    private PageUtils() {\n+        // private constructor for static utility class\n+    }\n+\n+    public static PageReference getPageReference(final Page page) {\n+        page.internalInitialize();\n+        return page.getPageReference();\n+    }\n+}"},{"sha":"352699439842a21c527c1c92e3efbdf58519d6ee","filename":"console/src/main/java/org/apache/syncope/console/pages/ApprovalModalPage.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FApprovalModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FApprovalModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FApprovalModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -32,6 +32,7 @@\n import org.apache.syncope.common.validation.SyncopeClientCompositeErrorException;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.commons.MapChoiceRenderer;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.console.markup.html.list.AltListView;\n import org.apache.syncope.console.rest.ApprovalRestClient;\n import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n@@ -171,8 +172,8 @@ protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ViewUserModalPage(ApprovalModalPage.this.getPageReference(), editUserWin,\n-                                        userRestClient.read(formTO.getUserId())) {\n+                                return new ViewUserModalPage(PageUtils.getPageReference(ApprovalModalPage.this),\n+                                        editUserWin, userRestClient.read(formTO.getUserId())) {\n \n                                     private static final long serialVersionUID = -2819994749866481607L;\n "},{"sha":"68185d0c0bb8b76a7f408a9eaa349ad9f39249f9","filename":"console/src/main/java/org/apache/syncope/console/pages/BasePage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBasePage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import org.apache.syncope.console.SyncopeApplication;\n import org.apache.syncope.console.SyncopeSession;\n import org.apache.syncope.console.commons.Constants;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.wicket.Component;\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n@@ -116,7 +117,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new UserRequestModalPage(BasePage.this.getPageReference(), editProfileModalWin,\n+                        return new UserRequestModalPage(PageUtils.getPageReference(BasePage.this), editProfileModalWin,\n                                 userTO, UserModalPage.Mode.SELF);\n                     }\n                 });"},{"sha":"fb087e24c1e2c1d620a081e8e8ff202ad20a9530","filename":"console/src/main/java/org/apache/syncope/console/pages/BulkActionModalPage.java","status":"modified","additions":11,"deletions":9,"changes":20,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBulkActionModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBulkActionModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FBulkActionModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -24,6 +24,7 @@\n import java.util.Collection;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.BulkAction;\n import org.apache.syncope.common.to.BulkActionRes;\n import org.apache.syncope.console.rest.BaseRestClient;\n@@ -84,7 +85,8 @@ public IModel<T> model(T object) {\n                 dataProvider,\n                 Integer.MAX_VALUE).setVisible(items != null && !items.isEmpty()));\n \n-        final ActionLinksPanel actionPanel = new ActionLinksPanel(\"actions\", new Model(), getPageReference());\n+        final ActionLinksPanel actionPanel = new ActionLinksPanel(\"actions\", new Model(),\n+                PageUtils.getPageReference(getPage()));\n         add(actionPanel);\n \n         for (ActionLink.ActionType action : actions) {\n@@ -139,16 +141,16 @@ public void onClick(final AjaxRequestTarget target) {\n         final Form form = new Form(FORM);\n         add(form);\n \n-        final AjaxButton cancel =\n-                new ClearIndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL), getPageReference()) {\n+        final AjaxButton cancel = new ClearIndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL),\n+                PageUtils.getPageReference(getPage())) {\n \n-            private static final long serialVersionUID = -958724007591692537L;\n+                    private static final long serialVersionUID = -958724007591692537L;\n \n-            @Override\n-            protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n-                window.close(target);\n-            }\n-        };\n+                    @Override\n+                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n+                        window.close(target);\n+                    }\n+                };\n \n         cancel.setDefaultFormProcessing(false);\n         form.add(cancel);"},{"sha":"3a101910f5f30b58d3dc1abd9d701c0dd4b70170","filename":"console/src/main/java/org/apache/syncope/console/pages/Configuration.java","status":"modified","additions":35,"deletions":32,"changes":67,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FConfiguration.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -26,6 +26,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.ConfigurationTO;\n import org.apache.syncope.common.to.LoggerTO;\n import org.apache.syncope.common.to.NotificationTO;\n@@ -137,9 +138,9 @@ public Configuration(final PageParameters parameters) {\n         add(editConfigWin = new ModalWindow(\"editConfigurationWin\"));\n         setupSyncopeConf();\n \n-        add(new PoliciesPanel(\"passwordPoliciesPanel\", getPageReference(), PolicyType.PASSWORD));\n-        add(new PoliciesPanel(\"accountPoliciesPanel\", getPageReference(), PolicyType.ACCOUNT));\n-        add(new PoliciesPanel(\"syncPoliciesPanel\", getPageReference(), PolicyType.SYNC));\n+        add(new PoliciesPanel(\"passwordPoliciesPanel\", PageUtils.getPageReference(getPage()), PolicyType.PASSWORD));\n+        add(new PoliciesPanel(\"accountPoliciesPanel\", PageUtils.getPageReference(getPage()), PolicyType.ACCOUNT));\n+        add(new PoliciesPanel(\"syncPoliciesPanel\", PageUtils.getPageReference(getPage()), PolicyType.SYNC));\n \n         add(createNotificationWin = new ModalWindow(\"createNotificationWin\"));\n         add(editNotificationWin = new ModalWindow(\"editNotificationWin\"));\n@@ -156,27 +157,27 @@ public Configuration(final PageParameters parameters) {\n                 new PropertyModel<WorkflowDefinitionTO>(workflowDef, \"xmlDefinition\"));\n         wfForm.add(workflowDefArea);\n \n-        AjaxButton submit =\n-                new ClearIndicatingAjaxButton(APPLY, new Model<String>(getString(SUBMIT)), getPageReference()) {\n+        AjaxButton submit = new ClearIndicatingAjaxButton(APPLY, new Model<String>(getString(SUBMIT)),\n+                PageUtils.getPageReference(getPage())) {\n \n-            private static final long serialVersionUID = -958724007591692537L;\n+                    private static final long serialVersionUID = -958724007591692537L;\n \n-            @Override\n-            protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n-                try {\n-                    wfRestClient.updateDefinition(workflowDef);\n-                    info(getString(Constants.OPERATION_SUCCEEDED));\n-                } catch (SyncopeClientCompositeErrorException scee) {\n-                    error(getString(Constants.ERROR) + \":\" + scee.getMessage());\n-                }\n-                target.add(feedbackPanel);\n-            }\n+                    @Override\n+                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n+                        try {\n+                            wfRestClient.updateDefinition(workflowDef);\n+                            info(getString(Constants.OPERATION_SUCCEEDED));\n+                        } catch (SyncopeClientCompositeErrorException scee) {\n+                            error(getString(Constants.ERROR) + \":\" + scee.getMessage());\n+                        }\n+                        target.add(feedbackPanel);\n+                    }\n \n-            @Override\n-            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n-                target.add(feedbackPanel);\n-            }\n-        };\n+                    @Override\n+                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                        target.add(feedbackPanel);\n+                    }\n+                };\n \n         MetaDataRoleAuthorizationStrategy.authorize(submit, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Configuration\",\n                 \"workflowDefUpdate\"));\n@@ -233,7 +234,8 @@ public void populateItem(final Item<ICellPopulator<ConfigurationTO>> cellItem, f\n \n                 final ConfigurationTO configurationTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -248,8 +250,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ConfigurationModalPage(Configuration.this.getPageReference(), editConfigWin,\n-                                        configurationTO, false);\n+                                return new ConfigurationModalPage(PageUtils.getPageReference(Configuration.this),\n+                                        editConfigWin, configurationTO, false);\n                             }\n                         });\n \n@@ -284,7 +286,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n         final AjaxFallbackDefaultDataTable<ConfigurationTO, String> confTable =\n                 new AjaxFallbackDefaultDataTable<ConfigurationTO, String>(\n-                \"syncopeconf\", confColumns, new SyncopeConfProvider(), confPaginatorRows);\n+                        \"syncopeconf\", confColumns, new SyncopeConfProvider(), confPaginatorRows);\n \n         confContainer = new WebMarkupContainer(\"confContainer\");\n         confContainer.add(confTable);\n@@ -318,8 +320,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new ConfigurationModalPage(Configuration.this.getPageReference(), createConfigWin,\n-                                new ConfigurationTO(), true);\n+                        return new ConfigurationModalPage(PageUtils.getPageReference(Configuration.this),\n+                                createConfigWin, new ConfigurationTO(), true);\n                     }\n                 });\n \n@@ -408,7 +410,8 @@ public void populateItem(final Item<ICellPopulator<NotificationTO>> cellItem, fi\n \n                 final NotificationTO notificationTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -423,7 +426,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new NotificationModalPage(Configuration.this.getPageReference(),\n+                                return new NotificationModalPage(PageUtils.getPageReference(Configuration.this),\n                                         editNotificationWin, notificationTO, false);\n                             }\n                         });\n@@ -459,7 +462,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n         final AjaxFallbackDefaultDataTable<NotificationTO, String> notificationTable =\n                 new AjaxFallbackDefaultDataTable<NotificationTO, String>(\n-                \"notificationTable\", notificationCols, new NotificationProvider(), notificationPaginatorRows);\n+                        \"notificationTable\", notificationCols, new NotificationProvider(), notificationPaginatorRows);\n \n         notificationContainer = new WebMarkupContainer(\"notificationContainer\");\n         notificationContainer.add(notificationTable);\n@@ -493,8 +496,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new NotificationModalPage(Configuration.this.getPageReference(), createNotificationWin,\n-                                new NotificationTO(), true);\n+                        return new NotificationModalPage(PageUtils.getPageReference(Configuration.this),\n+                                createNotificationWin, new NotificationTO(), true);\n                     }\n                 });\n "},{"sha":"2dcf7cb42a43e3c60b3c5a264ce0d623e6ed794b","filename":"console/src/main/java/org/apache/syncope/console/pages/EditUserModalPage.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -21,6 +21,7 @@\n import java.util.ArrayList;\n import org.apache.commons.lang3.SerializationUtils;\n import org.apache.syncope.common.mod.UserMod;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.util.AttributableOperations;\n import org.apache.syncope.console.commons.StatusBean;\n@@ -60,7 +61,8 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n         if (userTO.getId() != 0) {\n             form.addOrReplace(new Label(\"pwdChangeInfo\", new ResourceModel(\"pwdChangeInfo\")));\n \n-            statusPanel = new StatusPanel(\"statuspanel\", userTO, new ArrayList<StatusBean>(), getPageReference());\n+            statusPanel = new StatusPanel(\"statuspanel\", userTO, new ArrayList<StatusBean>(),\n+                    PageUtils.getPageReference(getPage()));\n             statusPanel.setOutputMarkupId(true);\n             MetaDataRoleAuthorizationStrategy.authorize(\n                     statusPanel, RENDER, xmlRolesReader.getAllAllowedRoles(\"Resources\", \"getConnectorObject\"));\n@@ -71,7 +73,8 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n             form.addOrReplace(new ResourcesPanel.Builder(\"resources\").attributableTO(userTO).statusPanel(\n                     statusPanel).build());\n \n-            form.addOrReplace(new MembershipsPanel(\"memberships\", userTO, false, statusPanel, getPageReference()));\n+            form.addOrReplace(new MembershipsPanel(\"memberships\", userTO, false, statusPanel,\n+                    PageUtils.getPageReference(getPage())));\n         }\n     }\n "},{"sha":"0cfe1eb478ca3b300c55e2111b6be9cecb2fe56c","filename":"console/src/main/java/org/apache/syncope/console/pages/Login.java","status":"modified","additions":17,"deletions":15,"changes":32,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FLogin.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -27,6 +27,7 @@\n import org.apache.http.impl.client.DefaultHttpClient;\n import org.apache.http.util.EntityUtils;\n import org.apache.syncope.client.http.PreemptiveAuthHttpRequestFactory;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.services.EntitlementService;\n import org.apache.syncope.common.services.UserRequestService;\n import org.apache.syncope.common.to.EntitlementTO;\n@@ -149,26 +150,27 @@ public void onSubmit() {\n         if (isSelfRegistrationAllowed()) {\n             selfRegFrag = new Fragment(\"selfRegistration\", \"selfRegAllowed\", this);\n \n-            final AjaxLink<Void> selfRegLink = new ClearIndicatingAjaxLink<Void>(\"link\", getPageReference()) {\n+            final AjaxLink<Void> selfRegLink = new ClearIndicatingAjaxLink<Void>(\"link\",\n+                    PageUtils.getPageReference(getPage())) {\n \n-                private static final long serialVersionUID = -7978723352517770644L;\n+                        private static final long serialVersionUID = -7978723352517770644L;\n \n-                @Override\n-                protected void onClickInternal(final AjaxRequestTarget target) {\n-                    editProfileModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+                        @Override\n+                        protected void onClickInternal(final AjaxRequestTarget target) {\n+                            editProfileModalWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                        private static final long serialVersionUID = -7834632442532690940L;\n+                                private static final long serialVersionUID = -7834632442532690940L;\n \n-                        @Override\n-                        public Page createPage() {\n-                            return new UserRequestModalPage(Login.this.getPageReference(), editProfileModalWin,\n-                                    new UserTO(), UserModalPage.Mode.SELF);\n-                        }\n-                    });\n+                                @Override\n+                                public Page createPage() {\n+                                    return new UserRequestModalPage(PageUtils.getPageReference(Login.this),\n+                                            editProfileModalWin, new UserTO(), UserModalPage.Mode.SELF);\n+                                }\n+                            });\n \n-                    editProfileModalWin.show(target);\n-                }\n-            };\n+                            editProfileModalWin.show(target);\n+                        }\n+                    };\n             selfRegLink.add(new Label(\"linkTitle\", getString(\"selfRegistration\")));\n \n             Panel panel = new LinkPanel(\"selfRegistration\", new ResourceModel(\"selfRegistration\"));"},{"sha":"ee86094aa6f49a121e85dbeebc52d155f722fe52","filename":"console/src/main/java/org/apache/syncope/console/pages/NotificationModalPage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FNotificationModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -23,6 +23,7 @@\n import java.util.Collections;\n import java.util.EnumSet;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.EventCategoryTO;\n import org.apache.syncope.common.to.NotificationTO;\n import org.apache.syncope.common.types.AttributableType;\n@@ -151,7 +152,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                 \"eventSelection\",\n                 loggerRestClient.listEvents(),\n                 new PropertyModel<List<String>>(notificationTO, \"events\"),\n-                getPageReference(),\n+                PageUtils.getPageReference(getPage()),\n                 \"Notification\") {\n \n             private static final long serialVersionUID = 6429053774964787735L;"},{"sha":"00450642bc061bdbe778eecd298381a3f84730ba","filename":"console/src/main/java/org/apache/syncope/console/pages/PolicyModalPage.java","status":"modified","additions":6,"deletions":7,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPolicyModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPolicyModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FPolicyModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -23,6 +23,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.AccountPolicyTO;\n import org.apache.syncope.common.to.PasswordPolicyTO;\n import org.apache.syncope.common.to.PolicyTO;\n@@ -36,7 +37,6 @@\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.pages.panels.PolicyBeanPanel;\n import org.apache.syncope.console.rest.PolicyRestClient;\n-import org.apache.syncope.console.rest.ResourceRestClient;\n import org.apache.syncope.console.rest.RoleRestClient;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n@@ -79,9 +79,6 @@\n     @SpringBean\n     private PolicyRestClient policyRestClient;\n \n-    @SpringBean\n-    private ResourceRestClient resourceRestClient;\n-\n     @SpringBean\n     private RoleRestClient roleRestClient;\n \n@@ -168,7 +165,8 @@ public void populateItem(final Item<ICellPopulator<String>> cellItem, final Stri\n \n                 final String resource = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n                 panel.add(new ActionLink() {\n \n                     private static final long serialVersionUID = -3722207913631435501L;\n@@ -181,7 +179,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ResourceModalPage(PolicyModalPage.this.getPageReference(),\n+                                return new ResourceModalPage(PageUtils.getPageReference(PolicyModalPage.this),\n                                         mwindow, resourceRestClient.read(resource), false);\n                             }\n                         });\n@@ -240,7 +238,8 @@ public void populateItem(final Item<ICellPopulator<RoleTO>> cellItem, final Stri\n \n                 final RoleTO role = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n                 panel.add(new ActionLink() {\n \n                     private static final long serialVersionUID = -3722207913631435501L;"},{"sha":"c8698e9ec86d84433ce5e07a9dcd488e1bdd701e","filename":"console/src/main/java/org/apache/syncope/console/pages/ReportModalPage.java","status":"modified","additions":24,"deletions":22,"changes":46,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.report.AbstractReportletConf;\n import org.apache.syncope.common.report.ReportletConf;\n import org.apache.syncope.common.to.ReportExecTO;\n@@ -115,7 +116,7 @@ public ReportModalPage(final ModalWindow window, final ReportTO reportTO, final\n         this.reportTO = reportTO;\n \n         form = new Form<ReportTO>(FORM);\n-        form.setModel(new CompoundPropertyModel(reportTO));\n+        form.setModel(new CompoundPropertyModel<ReportTO>(reportTO));\n         add(form);\n \n         setupProfile();\n@@ -126,7 +127,7 @@ public ReportModalPage(final ModalWindow window, final ReportTO reportTO, final\n         form.add(crontab);\n \n         final AjaxButton submit =\n-                new ClearIndicatingAjaxButton(APPLY, new ResourceModel(APPLY), getPageReference()) {\n+                new ClearIndicatingAjaxButton(APPLY, new ResourceModel(APPLY), PageUtils.getPageReference(getPage())) {\n \n                     private static final long serialVersionUID = -958724007591692537L;\n \n@@ -170,8 +171,8 @@ protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n \n         form.add(submit);\n \n-        final AjaxButton cancel =\n-                new ClearIndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL), getPageReference()) {\n+        final AjaxButton cancel = new ClearIndicatingAjaxButton(CANCEL, new ResourceModel(CANCEL),\n+                PageUtils.getPageReference(getPage())) {\n \n                     private static final long serialVersionUID = -958724007591692537L;\n \n@@ -263,13 +264,13 @@ public String getIdValue(final ReportletConf object, int index) {\n                     }\n                 }) {\n \n-            private static final long serialVersionUID = 4022366881854379834L;\n+                    private static final long serialVersionUID = 4022366881854379834L;\n \n-            @Override\n-            protected CharSequence getDefaultChoice(String selectedValue) {\n-                return null;\n-            }\n-        };\n+                    @Override\n+                    protected CharSequence getDefaultChoice(final String selectedValue) {\n+                        return null;\n+                    }\n+                };\n \n         reportlets.setNullValid(true);\n         profile.add(reportlets);\n@@ -283,7 +284,7 @@ protected void onUpdate(AjaxRequestTarget target) {\n             }\n         });\n \n-        profile.add(new AjaxLink(ADD_BUTTON_ID) {\n+        profile.add(new AjaxLink<Void>(ADD_BUTTON_ID) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -298,14 +299,14 @@ public Page createPage() {\n                         modalReportletConfOldName = null;\n                         modalReportletConf = null;\n                         return new ReportletConfModalPage(null, reportletConfWin,\n-                                ReportModalPage.this.getPageReference());\n+                                PageUtils.getPageReference(ReportModalPage.this));\n                     }\n                 });\n                 reportletConfWin.show(target);\n             }\n         });\n \n-        profile.add(new AjaxLink(EDIT_BUTTON_ID) {\n+        profile.add(new AjaxLink<Void>(EDIT_BUTTON_ID) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -322,7 +323,7 @@ public Page createPage() {\n                             modalReportletConfOldName = reportlets.getModelObject().getName();\n                             modalReportletConf = null;\n                             return new ReportletConfModalPage(reportlets.getModelObject(), reportletConfWin,\n-                                    ReportModalPage.this.getPageReference());\n+                                    PageUtils.getPageReference(ReportModalPage.this));\n                         }\n                     });\n                     reportletConfWin.show(target);\n@@ -332,7 +333,7 @@ public Page createPage() {\n             }\n         });\n \n-        profile.add(new AjaxLink(REMOVE_BUTTON_ID) {\n+        profile.add(new AjaxLink<Void>(REMOVE_BUTTON_ID) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -345,7 +346,6 @@ public void onClick(final AjaxRequestTarget target) {\n \n             @Override\n             protected void updateAjaxAttributes(final AjaxRequestAttributes attributes) {\n-\n                 if (reportlets.getModelObject() != null) {\n \n                     super.updateAjaxAttributes(attributes);\n@@ -364,7 +364,7 @@ public CharSequence getPrecondition(final Component component) {\n             }\n         });\n \n-        profile.add(new AjaxLink(UP_BUTTON_ID) {\n+        profile.add(new AjaxLink<Void>(UP_BUTTON_ID) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -377,7 +377,7 @@ public void onClick(final AjaxRequestTarget target) {\n             }\n         });\n \n-        profile.add(new AjaxLink(DOWN_BUTTON_ID) {\n+        profile.add(new AjaxLink<Void>(DOWN_BUTTON_ID) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -452,7 +452,8 @@ public ActionLinksPanel getActions(final String componentId, final IModel<Report\n \n                 final ReportExecTO taskExecutionTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -487,7 +488,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             public Page createPage() {\n                                 ReportModalPage.this.exportExecId = model.getObject().getId();\n                                 return new ReportExecResultDownloadModalPage(reportExecExportWin,\n-                                        ReportModalPage.this.getPageReference());\n+                                        PageUtils.getPageReference(ReportModalPage.this));\n                             }\n                         });\n                         reportExecExportWin.show(target);\n@@ -521,7 +522,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n             @Override\n             public Component getHeader(final String componentId) {\n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(), getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(),\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -536,7 +538,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             reportTO.setExecutions(currentReportTO.getExecutions());\n                             final AjaxFallbackDefaultDataTable currentTable =\n                                     new AjaxFallbackDefaultDataTable(\"executionsTable\", columns,\n-                                    new ReportExecutionsProvider(reportTO), 10);\n+                                            new ReportExecutionsProvider(reportTO), 10);\n                             currentTable.setOutputMarkupId(true);\n                             target.add(currentTable);\n                             executions.addOrReplace(currentTable);"},{"sha":"315a88171a6a787a19d4ebc4e817394697042e46","filename":"console/src/main/java/org/apache/syncope/console/pages/Reports.java","status":"modified","additions":9,"deletions":6,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReports.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReports.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReports.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -23,6 +23,7 @@\n import java.util.Iterator;\n import java.util.List;\n import java.util.Map;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.EventCategoryTO;\n import org.apache.syncope.common.to.ReportTO;\n import org.apache.syncope.common.types.AuditElements.Result;\n@@ -132,7 +133,8 @@ public ActionLinksPanel getActions(final String componentId, final IModel<Report\n \n                 final ReportTO reportTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, PageUtils.getPageReference(\n+                        getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -147,7 +149,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ReportModalPage(window, reportTO, Reports.this.getPageReference());\n+                                return new ReportModalPage(window, reportTO, PageUtils.getPageReference(Reports.this));\n                             }\n                         });\n \n@@ -195,7 +197,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n             @Override\n             public Component getHeader(final String componentId) {\n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(), getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(),\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -246,7 +249,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n         paginatorForm.add(rowsChooser);\n         add(paginatorForm);\n \n-        AjaxLink createLink = new ClearIndicatingAjaxLink(\"createLink\", getPageReference()) {\n+        AjaxLink createLink = new ClearIndicatingAjaxLink(\"createLink\", PageUtils.getPageReference(getPage())) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -258,7 +261,7 @@ protected void onClickInternal(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new ReportModalPage(window, new ReportTO(), Reports.this.getPageReference());\n+                        return new ReportModalPage(window, new ReportTO(), PageUtils.getPageReference(Reports.this));\n                     }\n                 });\n \n@@ -299,7 +302,7 @@ private void setupAudit() {\n         final ListModel<String> model = new ListModel<String>(new ArrayList<String>(events));\n \n         form.add(new LoggerCategoryPanel(\n-                \"events\", loggerRestClient.listEvents(), model, getPageReference(), \"Reports\") {\n+                \"events\", loggerRestClient.listEvents(), model, PageUtils.getPageReference(getPage()), \"Reports\") {\n \n                     private static final long serialVersionUID = 6113164334533550277L;\n "},{"sha":"ea2bee27e6a657330570a63d2071ea163e7d62de","filename":"console/src/main/java/org/apache/syncope/console/pages/Resources.java","status":"modified","additions":62,"deletions":56,"changes":118,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -23,6 +23,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.ConnInstanceTO;\n import org.apache.syncope.common.to.ResourceTO;\n import org.apache.syncope.common.validation.SyncopeClientCompositeErrorException;\n@@ -106,7 +107,8 @@ public Resources(final PageParameters parameters) {\n         add(createConnectorWin = new ModalWindow(\"createConnectorWin\"));\n         add(editConnectorWin = new ModalWindow(\"editConnectorWin\"));\n \n-        AjaxLink<Void> reloadLink = new ClearIndicatingAjaxLink<Void>(\"reloadLink\", getPageReference()) {\n+        AjaxLink<Void> reloadLink = new ClearIndicatingAjaxLink<Void>(\"reloadLink\", PageUtils.\n+                getPageReference(getPage())) {\n \n             private static final long serialVersionUID = 3109256773218160485L;\n \n@@ -159,47 +161,47 @@ private void setupResources() {\n         columns.add(new AbstractColumn<ResourceTO, String>(\n                 new StringResourceModel(\"connector\", this, null, \"connector\")) {\n \n-                    private static final long serialVersionUID = 8263694778917279290L;\n+            private static final long serialVersionUID = 8263694778917279290L;\n \n-                    @Override\n-                    public void populateItem(final Item<ICellPopulator<ResourceTO>> cellItem, final String componentId,\n-                            final IModel<ResourceTO> rowModel) {\n-\n-                        final AjaxLink<String> editLink =\n-                        new ClearIndicatingAjaxLink<String>(\"link\", getPageReference()) {\n+            @Override\n+            public void populateItem(final Item<ICellPopulator<ResourceTO>> cellItem, final String componentId,\n+                    final IModel<ResourceTO> rowModel) {\n \n-                            private static final long serialVersionUID = -7978723352517770644L;\n+                final AjaxLink<String> editLink =\n+                        new ClearIndicatingAjaxLink<String>(\"link\", PageUtils.getPageReference(getPage())) {\n \n-                            @Override\n-                            protected void onClickInternal(final AjaxRequestTarget target) {\n+                    private static final long serialVersionUID = -7978723352517770644L;\n \n-                                editConnectorWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    @Override\n+                    protected void onClickInternal(final AjaxRequestTarget target) {\n \n-                                    private static final long serialVersionUID = -7834632442532690940L;\n+                        editConnectorWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                                    @Override\n-                                    public Page createPage() {\n-                                        return new ConnectorModalPage(Resources.this.getPageReference(),\n-                                                editConnectorWin,\n-                                                connectorRestClient.read(rowModel.getObject().getConnectorId()));\n-                                    }\n-                                });\n+                            private static final long serialVersionUID = -7834632442532690940L;\n \n-                                editConnectorWin.show(target);\n+                            @Override\n+                            public Page createPage() {\n+                                return new ConnectorModalPage(PageUtils.getPageReference(Resources.this),\n+                                        editConnectorWin,\n+                                        connectorRestClient.read(rowModel.getObject().getConnectorId()));\n                             }\n-                        };\n-                        editLink.add(new Label(\"linkTitle\", rowModel.getObject().getConnectorDisplayName()));\n+                        });\n+\n+                        editConnectorWin.show(target);\n+                    }\n+                };\n+                editLink.add(new Label(\"linkTitle\", rowModel.getObject().getConnectorDisplayName()));\n \n-                        LinkPanel editConnPanel = new LinkPanel(componentId);\n-                        editConnPanel.add(editLink);\n+                LinkPanel editConnPanel = new LinkPanel(componentId);\n+                editConnPanel.add(editLink);\n \n-                        cellItem.add(editConnPanel);\n+                cellItem.add(editConnPanel);\n \n-                        MetaDataRoleAuthorizationStrategy.authorize(editConnPanel, ENABLE, xmlRolesReader.\n-                                getAllAllowedRoles(\n-                                        \"Connectors\", \"read\"));\n-                    }\n-                });\n+                MetaDataRoleAuthorizationStrategy.authorize(editConnPanel, ENABLE, xmlRolesReader.\n+                        getAllAllowedRoles(\n+                        \"Connectors\", \"read\"));\n+            }\n+        });\n \n         columns.add(new PropertyColumn<ResourceTO, String>(new StringResourceModel(\n                 \"propagationPrimary\", this, null), \"propagationPrimary\", \"propagationPrimary\"));\n@@ -221,7 +223,8 @@ public void populateItem(final Item<ICellPopulator<ResourceTO>> cellItem, final\n \n                 final ResourceTO resourceTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, PageUtils.getPageReference(\n+                        getPage()));\n                 panel.add(new ActionLink() {\n \n                     private static final long serialVersionUID = -3722207913631435501L;\n@@ -234,7 +237,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ResourceModalPage(Resources.this.getPageReference(),\n+                                return new ResourceModalPage(PageUtils.getPageReference(Resources.this),\n                                         editResourceWin, resourceTO, false);\n                             }\n                         });\n@@ -272,11 +275,11 @@ public void onClick(final AjaxRequestTarget target) {\n                 columns,\n                 (ISortableDataProvider<ResourceTO, String>) new ResourcesProvider(),\n                 resourcePaginatorRows,\n-                Arrays.asList(new ActionLink.ActionType[] { ActionLink.ActionType.DELETE }),\n+                Arrays.asList(new ActionLink.ActionType[] {ActionLink.ActionType.DELETE}),\n                 resourceRestClient,\n                 \"name\",\n                 \"Resources\",\n-                getPageReference());\n+                PageUtils.getPageReference(getPage()));\n \n         resourceContainer = new WebMarkupContainer(\"resourceContainer\");\n         resourceContainer.add(table);\n@@ -298,26 +301,26 @@ public void onClick(final AjaxRequestTarget target) {\n         editResourceWin.setCookieName(\"edit-res-modal\");\n \n         AjaxLink<Void> createResourceLink =\n-                new ClearIndicatingAjaxLink<Void>(\"createResourceLink\", getPageReference()) {\n+                new ClearIndicatingAjaxLink<Void>(\"createResourceLink\", PageUtils.getPageReference(getPage())) {\n \n-                    private static final long serialVersionUID = -7978723352517770644L;\n-\n-                    @Override\n-                    protected void onClickInternal(final AjaxRequestTarget target) {\n-                        createResourceWin.setPageCreator(new ModalWindow.PageCreator() {\n+            private static final long serialVersionUID = -7978723352517770644L;\n \n-                            private static final long serialVersionUID = -7834632442532690940L;\n+            @Override\n+            protected void onClickInternal(final AjaxRequestTarget target) {\n+                createResourceWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                            @Override\n-                            public Page createPage() {\n-                                return new ResourceModalPage(Resources.this.getPageReference(),\n-                                        editResourceWin, new ResourceTO(), true);\n-                            }\n-                        });\n+                    private static final long serialVersionUID = -7834632442532690940L;\n \n-                        createResourceWin.show(target);\n+                    @Override\n+                    public Page createPage() {\n+                        return new ResourceModalPage(PageUtils.getPageReference(Resources.this),\n+                                editResourceWin, new ResourceTO(), true);\n                     }\n-                };\n+                });\n+\n+                createResourceWin.show(target);\n+            }\n+        };\n \n         MetaDataRoleAuthorizationStrategy.authorize(createResourceLink, ENABLE, xmlRolesReader.getAllAllowedRoles(\n                 \"Resources\", \"create\"));\n@@ -375,7 +378,8 @@ public void populateItem(final Item<ICellPopulator<ConnInstanceTO>> cellItem, fi\n \n                 final ConnInstanceTO connectorTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, PageUtils.getPageReference(\n+                        getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -389,7 +393,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ConnectorModalPage(Resources.this.getPageReference(), editConnectorWin,\n+                                return new ConnectorModalPage(PageUtils.getPageReference(Resources.this),\n+                                        editConnectorWin,\n                                         connectorTO);\n                             }\n                         });\n@@ -427,11 +432,11 @@ public void onClick(final AjaxRequestTarget target) {\n                 columns,\n                 (ISortableDataProvider<ConnInstanceTO, String>) new ConnectorsProvider(),\n                 connectorPaginatorRows,\n-                Arrays.asList(new ActionLink.ActionType[] { ActionLink.ActionType.DELETE }),\n+                Arrays.asList(new ActionLink.ActionType[] {ActionLink.ActionType.DELETE}),\n                 connectorRestClient,\n                 \"id\",\n                 \"Connectors\",\n-                getPageReference());\n+                PageUtils.getPageReference(getPage()));\n \n         connectorContainer = new WebMarkupContainer(\"connectorContainer\");\n         connectorContainer.add(table);\n@@ -455,7 +460,8 @@ public void onClick(final AjaxRequestTarget target) {\n         editConnectorWin.setInitialWidth(WIN_WIDTH);\n         editConnectorWin.setCookieName(\"edit-conn-modal\");\n \n-        AjaxLink createConnectorLink = new ClearIndicatingAjaxLink(\"createConnectorLink\", getPageReference()) {\n+        AjaxLink createConnectorLink = new ClearIndicatingAjaxLink(\"createConnectorLink\", PageUtils.getPageReference(\n+                getPage())) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -467,7 +473,7 @@ protected void onClickInternal(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        ConnectorModalPage form = new ConnectorModalPage(Resources.this.getPageReference(),\n+                        ConnectorModalPage form = new ConnectorModalPage(PageUtils.getPageReference(Resources.this),\n                                 editConnectorWin, new ConnInstanceTO());\n                         return form;\n                     }"},{"sha":"f4fa2b1e95f8c2a3aeda4bf6562050a733168d19","filename":"console/src/main/java/org/apache/syncope/console/pages/RoleModalPage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoleModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import java.util.List;\n import org.apache.commons.lang3.SerializationUtils;\n import org.apache.syncope.common.mod.RoleMod;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.RoleTO;\n import org.apache.syncope.common.util.AttributableOperations;\n import org.apache.syncope.console.commons.Constants;\n@@ -95,7 +96,7 @@ public RoleModalPage(final PageReference pageRef, final ModalWindow window, fina\n         form.setModel(new CompoundPropertyModel<RoleTO>(roleTO));\n \n         this.rolePanel = new RolePanel.Builder(\"rolePanel\").form(form).roleTO(roleTO).roleModalPageMode(mode)\n-                .pageRef(getPageReference()).build();\n+                .pageRef(PageUtils.getPageReference(getPage())).build();\n         form.add(rolePanel);\n \n         final AjaxButton submit = new IndicatingAjaxButton(SUBMIT, new ResourceModel(SUBMIT)) {"},{"sha":"5c5cd2cfdad8dceb43533571e039eda231de03c1","filename":"console/src/main/java/org/apache/syncope/console/pages/Roles.java","status":"modified","additions":21,"deletions":19,"changes":40,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FRoles.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.pages.panels.AbstractSearchResultPanel;\n@@ -67,8 +68,8 @@ public Roles(final PageParameters parameters) {\n         treePanel.setOutputMarkupId(true);\n         add(treePanel);\n \n-        final RoleSummaryPanel summaryPanel = new RoleSummaryPanel.Builder(\"summaryPanel\")\n-                .window(editRoleWin).callerPageRef(Roles.this.getPageReference()).build();\n+        final RoleSummaryPanel summaryPanel = new RoleSummaryPanel.Builder(\"summaryPanel\").\n+                window(editRoleWin).callerPageRef(PageUtils.getPageReference(Roles.this)).build();\n         add(summaryPanel);\n \n         editRoleWin.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {\n@@ -95,7 +96,7 @@ public void onClose(final AjaxRequestTarget target) {\n         });\n \n         final AbstractSearchResultPanel searchResult =\n-                new RoleSearchResultPanel(\"searchResult\", true, null, getPageReference(), restClient);\n+                new RoleSearchResultPanel(\"searchResult\", true, null, PageUtils.getPageReference(getPage()), restClient);\n         add(searchResult);\n \n         final Form searchForm = new Form(\"searchForm\");\n@@ -104,26 +105,27 @@ public void onClose(final AjaxRequestTarget target) {\n         final RoleSearchPanel searchPanel = new RoleSearchPanel.Builder(\"searchPanel\").build();\n         searchForm.add(searchPanel);\n \n-        searchForm.add(new ClearIndicatingAjaxButton(\"search\", new ResourceModel(\"search\"), getPageReference()) {\n+        searchForm.add(new ClearIndicatingAjaxButton(\"search\", new ResourceModel(\"search\"),\n+                PageUtils.getPageReference(getPage())) {\n \n-            private static final long serialVersionUID = -958724007591692537L;\n+                    private static final long serialVersionUID = -958724007591692537L;\n \n-            @Override\n-            protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n-                final NodeCond searchCond = searchPanel.buildSearchCond();\n-                LOG.debug(\"Node condition {}\", searchCond);\n+                    @Override\n+                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n+                        final NodeCond searchCond = searchPanel.buildSearchCond();\n+                        LOG.debug(\"Node condition {}\", searchCond);\n \n-                doSearch(target, searchCond, searchResult);\n+                        doSearch(target, searchCond, searchResult);\n \n-                Session.get().getFeedbackMessages().clear();\n-                target.add(searchPanel.getSearchFeedback());\n-            }\n+                        Session.get().getFeedbackMessages().clear();\n+                        target.add(searchPanel.getSearchFeedback());\n+                    }\n \n-            @Override\n-            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n-                target.add(searchPanel.getSearchFeedback());\n-            }\n-        });\n+                    @Override\n+                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                        target.add(searchPanel.getSearchFeedback());\n+                    }\n+                });\n     }\n \n     private void doSearch(final AjaxRequestTarget target, final NodeCond searchCond,\n@@ -145,7 +147,7 @@ public void onEvent(final IEvent<?> event) {\n             final TreeNodeClickUpdate update = (TreeNodeClickUpdate) event.getPayload();\n \n             final RoleSummaryPanel summaryPanel = new RoleSummaryPanel.Builder(\"summaryPanel\")\n-                    .window(editRoleWin).callerPageRef(Roles.this.getPageReference())\n+                    .window(editRoleWin).callerPageRef(PageUtils.getPageReference(Roles.this))\n                     .selectedNodeId(update.getSelectedNodeId()).build();\n \n             addOrReplace(summaryPanel);"},{"sha":"287279fe0a22254e903ac22ea965f23857c157a4","filename":"console/src/main/java/org/apache/syncope/console/pages/Schema.java","status":"modified","additions":37,"deletions":34,"changes":71,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchema.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FSchema.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -29,6 +29,7 @@\n import java.util.List;\n import java.util.Map;\n import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.AbstractSchemaTO;\n import org.apache.syncope.common.types.AttributableType;\n import org.apache.syncope.common.types.SchemaType;\n@@ -78,7 +79,7 @@\n /**\n  * Schema WebPage.\n  */\n-@SuppressWarnings({\"unchecked\", \"rawtypes\"})\n+@SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n public class Schema extends BasePage {\n \n     private static final long serialVersionUID = 8091922398776299403L;\n@@ -88,41 +89,41 @@ public class Schema extends BasePage {\n         private static final long serialVersionUID = 3109256773218160485L;\n \n         {\n-            put(SchemaType.NORMAL, Arrays.asList(new String[] {\"name\", \"type\",\n-                \"mandatoryCondition\", \"uniqueConstraint\", \"multivalue\", \"readonly\"}));\n-            put(SchemaType.DERIVED, Arrays.asList(new String[] {\"name\", \"expression\"}));\n-            put(SchemaType.VIRTUAL, Arrays.asList(new String[] {\"name\", \"readonly\"}));\n+            put(SchemaType.NORMAL, Arrays.asList(new String[] { \"name\", \"type\",\n+                \"mandatoryCondition\", \"uniqueConstraint\", \"multivalue\", \"readonly\" }));\n+            put(SchemaType.DERIVED, Arrays.asList(new String[] { \"name\", \"expression\" }));\n+            put(SchemaType.VIRTUAL, Arrays.asList(new String[] { \"name\", \"readonly\" }));\n         }\n     };\n \n     private static final Map<Map.Entry<AttributableType, SchemaType>, String> PAGINATOR_ROWS_KEYS =\n             new HashMap<Map.Entry<AttributableType, SchemaType>, String>() {\n \n-        private static final long serialVersionUID = 3109256773218160485L;\n-\n-        {\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.NORMAL),\n-                    Constants.PREF_USER_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.DERIVED),\n-                    Constants.PREF_USER_DER_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.VIRTUAL),\n-                    Constants.PREF_USER_VIR_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP, SchemaType.NORMAL),\n-                    Constants.PREF_MEMBERSHIP_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP,\n-                    SchemaType.DERIVED),\n-                    Constants.PREF_MEMBERSHIP_DER_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP,\n-                    SchemaType.VIRTUAL),\n-                    Constants.PREF_MEMBERSHIP_VIR_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.NORMAL),\n-                    Constants.PREF_ROLE_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.DERIVED),\n-                    Constants.PREF_ROLE_DER_SCHEMA_PAGINATOR_ROWS);\n-            put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.VIRTUAL),\n-                    Constants.PREF_ROLE_VIR_SCHEMA_PAGINATOR_ROWS);\n-        }\n-    };\n+                private static final long serialVersionUID = 3109256773218160485L;\n+\n+                {\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.NORMAL),\n+                            Constants.PREF_USER_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.DERIVED),\n+                            Constants.PREF_USER_DER_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.USER, SchemaType.VIRTUAL),\n+                            Constants.PREF_USER_VIR_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP, SchemaType.NORMAL),\n+                            Constants.PREF_MEMBERSHIP_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP,\n+                                    SchemaType.DERIVED),\n+                            Constants.PREF_MEMBERSHIP_DER_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.MEMBERSHIP,\n+                                    SchemaType.VIRTUAL),\n+                            Constants.PREF_MEMBERSHIP_VIR_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.NORMAL),\n+                            Constants.PREF_ROLE_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.DERIVED),\n+                            Constants.PREF_ROLE_DER_SCHEMA_PAGINATOR_ROWS);\n+                    put(new SimpleEntry<AttributableType, SchemaType>(AttributableType.ROLE, SchemaType.VIRTUAL),\n+                            Constants.PREF_ROLE_VIR_SCHEMA_PAGINATOR_ROWS);\n+                }\n+            };\n \n     private static final int WIN_WIDTH = 600;\n \n@@ -235,7 +236,8 @@ public void populateItem(final Item<ICellPopulator<AbstractSchemaTO>> item, fina\n \n                 final AbstractSchemaTO schemaTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.addWithRoles(new ActionLink() {\n \n@@ -252,7 +254,8 @@ public Page createPage() {\n                                 AbstractSchemaModalPage page = SchemaModalPageFactory.getSchemaModalPage(\n                                         attributableType, schemaType);\n \n-                                page.setSchemaModalPage(Schema.this.getPageReference(), modalWindow, schemaTO, false);\n+                                page.setSchemaModalPage(PageUtils.getPageReference(Schema.this),\n+                                        modalWindow, schemaTO, false);\n \n                                 return page;\n                             }\n@@ -328,7 +331,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n     private <T extends AbstractSchemaModalPage> AjaxLink<Void> getCreateSchemaLink(final ModalWindow modalWindow,\n             final AttributableType attrType, final SchemaType schemaType, final String winLinkName) {\n \n-        AjaxLink<Void> link = new ClearIndicatingAjaxLink<Void>(winLinkName, getPageReference()) {\n+        AjaxLink<Void> link = new ClearIndicatingAjaxLink<Void>(winLinkName, PageUtils.getPageReference(getPage())) {\n \n             private static final long serialVersionUID = -7978723352517770644L;\n \n@@ -341,7 +344,7 @@ protected void onClickInternal(final AjaxRequestTarget target) {\n                     @Override\n                     public Page createPage() {\n                         T page = SchemaModalPageFactory.getSchemaModalPage(attrType, schemaType);\n-                        page.setSchemaModalPage(Schema.this.getPageReference(), modalWindow, null, true);\n+                        page.setSchemaModalPage(PageUtils.getPageReference(Schema.this), modalWindow, null, true);\n \n                         return page;\n                     }"},{"sha":"e57a88314461a5ee6e1e4493b6a82c358682f4ac","filename":"console/src/main/java/org/apache/syncope/console/pages/TaskModalPage.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTaskModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.NotificationTaskTO;\n import org.apache.syncope.common.to.PropagationTaskTO;\n import org.apache.syncope.common.to.SchedTaskTO;\n@@ -117,7 +118,8 @@ public ActionLinksPanel getActions(final String componentId, final IModel<TaskEx\n \n                 final TaskExecTO taskExecutionTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -164,7 +166,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n             @Override\n             public Component getHeader(final String componentId) {\n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(), getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(),\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -175,7 +178,7 @@ public void onClick(final AjaxRequestTarget target) {\n                         if (target != null) {\n                             final AjaxFallbackDefaultDataTable currentTable =\n                                     new AjaxFallbackDefaultDataTable(\"executionsTable\", columns,\n-                                    new TaskExecutionsProvider(getCurrentTaskExecution(taskTO)), paginatorRows);\n+                                            new TaskExecutionsProvider(getCurrentTaskExecution(taskTO)), paginatorRows);\n                             currentTable.setOutputMarkupId(true);\n                             target.add(currentTable);\n                             executions.addOrReplace(currentTable);"},{"sha":"96040b1350c4bf3d4505bba3f8bb4701b4d868a0","filename":"console/src/main/java/org/apache/syncope/console/pages/Tasks.java","status":"modified","additions":8,"deletions":7,"changes":15,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTasks.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTasks.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -24,6 +24,7 @@\n import java.util.Comparator;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.SchedTaskTO;\n import org.apache.syncope.common.to.TaskExecTO;\n import org.apache.syncope.common.to.TaskTO;\n@@ -54,12 +55,12 @@ public class Tasks extends BasePage {\n     public Tasks() {\n         super();\n \n-        add(new PropagationTasks(\"propagation\", getPageReference()));\n-        add(new NotificationTasks(\"notification\", getPageReference()));\n-        add(new SchedTasks(\"sched\", getPageReference()));\n-        add(new SyncTasks(\"sync\", getPageReference()));\n+        add(new PropagationTasks(\"propagation\", PageUtils.getPageReference(getPage())));\n+        add(new NotificationTasks(\"notification\", PageUtils.getPageReference(getPage())));\n+        add(new SchedTasks(\"sched\", PageUtils.getPageReference(getPage())));\n+        add(new SyncTasks(\"sync\", PageUtils.getPageReference(getPage())));\n \n-        getPageReference();\n+        PageUtils.getPageReference(getPage());\n     }\n \n     @Override\n@@ -208,8 +209,8 @@ public static AjaxDataTablePanel<TaskTO, String> updateTaskTable(\n                 columns,\n                 (ISortableDataProvider<TaskTO, String>) dataProvider,\n                 dataProvider.paginatorRows,\n-                Arrays.asList(new ActionLink.ActionType[]{\n-                    ActionLink.ActionType.DELETE, ActionLink.ActionType.DRYRUN, ActionLink.ActionType.EXECUTE}),\n+                Arrays.asList(new ActionLink.ActionType[] {\n+                    ActionLink.ActionType.DELETE, ActionLink.ActionType.DRYRUN, ActionLink.ActionType.EXECUTE }),\n                 restClient,\n                 \"id\",\n                 TASKS,"},{"sha":"a2c985bf7045c30e5f86c6e214aca9cdda589117","filename":"console/src/main/java/org/apache/syncope/console/pages/Todo.java","status":"modified","additions":11,"deletions":7,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTodo.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTodo.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FTodo.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.UserRequestTO;\n import org.apache.syncope.common.to.WorkflowFormTO;\n import org.apache.syncope.common.types.UserRequestType;\n@@ -132,7 +133,8 @@ public void populateItem(final Item<ICellPopulator<WorkflowFormTO>> cellItem, fi\n \n                 final WorkflowFormTO formTO = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -163,7 +165,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new ApprovalModalPage(Todo.this.getPageReference(), editApprovalWin, formTO);\n+                                return new ApprovalModalPage(PageUtils.getPageReference(Todo.this),\n+                                        editApprovalWin, formTO);\n                             }\n                         });\n \n@@ -244,7 +247,8 @@ public void populateItem(final Item<ICellPopulator<UserRequestTO>> cellItem, fin\n \n                 final UserRequestTO request = model.getObject();\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model,\n+                        PageUtils.getPageReference(getPage()));\n \n                 panel.add(new ActionLink() {\n \n@@ -258,8 +262,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new UserRequestModalPage(Todo.this.getPageReference(), editUserRequestWin,\n-                                        model.getObject(), UserModalPage.Mode.ADMIN);\n+                                return new UserRequestModalPage(PageUtils.getPageReference(Todo.this),\n+                                        editUserRequestWin, model.getObject(), UserModalPage.Mode.ADMIN);\n                             }\n                         });\n \n@@ -376,7 +380,7 @@ public Iterator<WorkflowFormTO> iterator(final long first, final long count) {\n \n             Collections.sort(list, comparator);\n \n-            return list.subList((int)first, (int)first + (int)count).iterator();\n+            return list.subList((int) first, (int) first + (int) count).iterator();\n         }\n \n         @Override\n@@ -418,7 +422,7 @@ public Iterator<UserRequestTO> iterator(final long first, final long count) {\n \n             Collections.sort(list, comparator);\n \n-            return list.subList((int)first, (int)first + (int)count).iterator();\n+            return list.subList((int) first, (int) first + (int) count).iterator();\n         }\n \n         @Override"},{"sha":"07ded289871dc535e010484dec3b4c93243736cd","filename":"console/src/main/java/org/apache/syncope/console/pages/UserModalPage.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.console.commons.Constants;\n import org.apache.syncope.console.pages.panels.AttributesPanel;\n@@ -142,7 +143,8 @@ protected Form setupEditPanel() {\n         //--------------------------------\n         // Roles panel\n         //--------------------------------\n-        form.add(new MembershipsPanel(\"memberships\", userTO, mode == Mode.TEMPLATE, null, getPageReference()));\n+        form.add(new MembershipsPanel(\"memberships\", userTO, mode == Mode.TEMPLATE, null,\n+                PageUtils.getPageReference(getPage())));\n         //--------------------------------\n \n         final AjaxButton submit = getOnSubmit();"},{"sha":"27ae0984162467782de1a42a1c140e314d39b3a6","filename":"console/src/main/java/org/apache/syncope/console/pages/Users.java","status":"modified","additions":36,"deletions":33,"changes":69,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUsers.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUsers.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages;\n \n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.console.commons.Constants;\n@@ -62,35 +63,36 @@ public Users(final PageParameters parameters) {\n         editModalWin.setCookieName(\"edit-modal\");\n         add(editModalWin);\n \n-        final AbstractSearchResultPanel searchResult =\n-                new UserSearchResultPanel(\"searchResult\", true, null, getPageReference(), restClient);\n+        final AbstractSearchResultPanel searchResult = new UserSearchResultPanel(\"searchResult\", true, null,\n+                PageUtils.getPageReference(getPage()), restClient);\n         add(searchResult);\n \n         final AbstractSearchResultPanel listResult =\n-                new UserSearchResultPanel(\"listResult\", false, null, getPageReference(), restClient);\n+                new UserSearchResultPanel(\"listResult\", false, null, PageUtils.getPageReference(getPage()), restClient);\n         add(listResult);\n \n-\n         // create new user\n-        final AjaxLink<Void> createLink = new ClearIndicatingAjaxLink<Void>(\"createLink\", getPageReference()) {\n+        final AjaxLink<Void> createLink = new ClearIndicatingAjaxLink<Void>(\"createLink\",\n+                PageUtils.getPageReference(getPage())) {\n \n-            private static final long serialVersionUID = -7978723352517770644L;\n+                    private static final long serialVersionUID = -7978723352517770644L;\n \n-            @Override\n-            protected void onClickInternal(final AjaxRequestTarget target) {\n-                editModalWin.setPageCreator(new ModalWindow.PageCreator() {\n+                    @Override\n+                    protected void onClickInternal(final AjaxRequestTarget target) {\n+                        editModalWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                    private static final long serialVersionUID = -7834632442532690940L;\n+                            private static final long serialVersionUID = -7834632442532690940L;\n \n-                    @Override\n-                    public Page createPage() {\n-                        return new EditUserModalPage(Users.this.getPageReference(), editModalWin, new UserTO());\n-                    }\n-                });\n+                            @Override\n+                            public Page createPage() {\n+                                return new EditUserModalPage(PageUtils.getPageReference(Users.this), editModalWin,\n+                                        new UserTO());\n+                            }\n+                        });\n \n-                editModalWin.show(target);\n-            }\n-        };\n+                        editModalWin.show(target);\n+                    }\n+                };\n         MetaDataRoleAuthorizationStrategy.authorize(\n                 createLink, ENABLE, xmlRolesReader.getAllAllowedRoles(\"Users\", \"create\"));\n         add(createLink);\n@@ -104,27 +106,28 @@ public Page createPage() {\n         searchForm.add(searchPanel);\n \n         final ClearIndicatingAjaxButton searchButton =\n-                new ClearIndicatingAjaxButton(\"search\", new ResourceModel(\"search\"), getPageReference()) {\n+                new ClearIndicatingAjaxButton(\"search\", new ResourceModel(\"search\"),\n+                        PageUtils.getPageReference(getPage())) {\n \n-            private static final long serialVersionUID = -958724007591692537L;\n+                    private static final long serialVersionUID = -958724007591692537L;\n \n-            @Override\n-            protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n-                final NodeCond searchCond = searchPanel.buildSearchCond();\n-                LOG.debug(\"Node condition \" + searchCond);\n+                    @Override\n+                    protected void onSubmitInternal(final AjaxRequestTarget target, final Form<?> form) {\n+                        final NodeCond searchCond = searchPanel.buildSearchCond();\n+                        LOG.debug(\"Node condition \" + searchCond);\n \n-                doSearch(target, searchCond, searchResult);\n+                        doSearch(target, searchCond, searchResult);\n \n-                Session.get().getFeedbackMessages().clear();\n-                target.add(searchPanel.getSearchFeedback());\n-            }\n+                        Session.get().getFeedbackMessages().clear();\n+                        target.add(searchPanel.getSearchFeedback());\n+                    }\n \n-            @Override\n-            protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n+                    @Override\n+                    protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n \n-                target.add(searchPanel.getSearchFeedback());\n-            }\n-        };\n+                        target.add(searchPanel.getSearchFeedback());\n+                    }\n+                };\n \n         searchForm.add(searchButton);\n         searchForm.setDefaultButton(searchButton);"},{"sha":"b3334771d4d17c4effdb26d78d0601a2f79b93a1","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/AbstractSearchResultPanel.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAbstractSearchResultPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAbstractSearchResultPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FAbstractSearchResultPanel.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -20,6 +20,7 @@\n \n import java.util.Collection;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.to.AbstractAttributableTO;\n import org.apache.syncope.console.commons.AttributableDataProvider;\n@@ -265,7 +266,7 @@ private void updateResultTable(final boolean create, final int rows) {\n                 restClient,\n                 \"id\",\n                 getPageId(),\n-                page.getPageReference());\n+                PageUtils.getPageReference(page));\n \n         resultTable.setCurrentPage(currentPage);\n "},{"sha":"f6d9e97334c37b9eeb7af09be328e0a6a41b3ad7","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/MembershipsPanel.java","status":"modified","additions":46,"deletions":44,"changes":90,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FMembershipsPanel.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -23,6 +23,7 @@\n import java.util.List;\n import java.util.Set;\n import javax.swing.tree.DefaultMutableTreeNode;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.MembershipTO;\n import org.apache.syncope.common.to.RoleTO;\n import org.apache.syncope.common.to.UserTO;\n@@ -122,7 +123,7 @@ protected void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                PageReference pageRef = getPage().getPageReference();\n+                                PageReference pageRef = PageUtils.getPageReference(getPage());\n \n                                 for (MembershipTO membTO : membView.getList()) {\n                                     if (membTO.getRoleId() == roleTO.getId()) {\n@@ -151,67 +152,68 @@ public Page createPage() {\n         membView = new ListView<MembershipTO>(\"memberships\",\n                 new PropertyModel<List<? extends MembershipTO>>(userTO, \"memberships\")) {\n \n-            private static final long serialVersionUID = 9101744072914090143L;\n+                    private static final long serialVersionUID = 9101744072914090143L;\n \n-            @Override\n-            protected void populateItem(final ListItem<MembershipTO> item) {\n-                final MembershipTO membershipTO = (MembershipTO) item.getDefaultModelObject();\n+                    @Override\n+                    protected void populateItem(final ListItem<MembershipTO> item) {\n+                        final MembershipTO membershipTO = (MembershipTO) item.getDefaultModelObject();\n \n-                item.add(new Label(\"roleId\", new Model<Long>(membershipTO.getRoleId())));\n-                item.add(new Label(\"roleName\", new Model<String>(membershipTO.getRoleName())));\n+                        item.add(new Label(\"roleId\", new Model<Long>(membershipTO.getRoleId())));\n+                        item.add(new Label(\"roleName\", new Model<String>(membershipTO.getRoleName())));\n \n-                AjaxLink editLink = new ClearIndicatingAjaxLink(\"editLink\", pageRef) {\n+                        AjaxLink editLink = new ClearIndicatingAjaxLink(\"editLink\", pageRef) {\n \n-                    private static final long serialVersionUID = -7978723352517770644L;\n+                            private static final long serialVersionUID = -7978723352517770644L;\n \n-                    @Override\n-                    protected void onClickInternal(final AjaxRequestTarget target) {\n-                        membWin.setPageCreator(new ModalWindow.PageCreator() {\n+                            @Override\n+                            protected void onClickInternal(final AjaxRequestTarget target) {\n+                                membWin.setPageCreator(new ModalWindow.PageCreator() {\n \n-                            private static final long serialVersionUID = -7834632442532690940L;\n+                                    private static final long serialVersionUID = -7834632442532690940L;\n \n-                            @Override\n-                            public Page createPage() {\n-                                return new MembershipModalPage(getPage().getPageReference(), membWin,\n-                                        membershipTO, templateMode);\n+                                    @Override\n+                                    public Page createPage() {\n+                                        return new MembershipModalPage(PageUtils.getPageReference(getPage()), membWin,\n+                                                membershipTO, templateMode);\n \n+                                    }\n+                                });\n+                                membWin.show(target);\n                             }\n-                        });\n-                        membWin.show(target);\n-                    }\n-                };\n-                item.add(editLink);\n+                        };\n+                        item.add(editLink);\n \n-                AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\"deleteLink\", pageRef) {\n+                        AjaxLink deleteLink = new IndicatingDeleteOnConfirmAjaxLink(\"deleteLink\", pageRef) {\n \n-                    private static final long serialVersionUID = -7978723352517770644L;\n+                            private static final long serialVersionUID = -7978723352517770644L;\n \n-                    @Override\n-                    protected void onClickInternal(final AjaxRequestTarget target) {\n-                        userTO.removeMembership(membershipTO);\n-                        target.add(membershipsContainer);\n+                            @Override\n+                            protected void onClickInternal(final AjaxRequestTarget target) {\n+                                userTO.removeMembership(membershipTO);\n+                                target.add(membershipsContainer);\n \n-                        RoleTO roleTO = RoleUtils.findRole(roleTreeBuilder, membershipTO.getRoleId());\n-                        Set<String> resourcesToRemove = roleTO == null\n+                                RoleTO roleTO = RoleUtils.findRole(roleTreeBuilder, membershipTO.getRoleId());\n+                                Set<String> resourcesToRemove = roleTO == null\n                                 ? Collections.<String>emptySet() : roleTO.getResources();\n-                        if (!resourcesToRemove.isEmpty()) {\n-                            Set<String> resourcesAssignedViaMembership = new HashSet<String>();\n-                            for (MembershipTO membTO : userTO.getMemberships()) {\n-                                roleTO = RoleUtils.findRole(roleTreeBuilder, membTO.getRoleId());\n-                                if (roleTO != null) {\n-                                    resourcesAssignedViaMembership.addAll(roleTO.getResources());\n+                                if (!resourcesToRemove.isEmpty()) {\n+                                    Set<String> resourcesAssignedViaMembership = new HashSet<String>();\n+                                    for (MembershipTO membTO : userTO.getMemberships()) {\n+                                        roleTO = RoleUtils.findRole(roleTreeBuilder, membTO.getRoleId());\n+                                        if (roleTO != null) {\n+                                            resourcesAssignedViaMembership.addAll(roleTO.getResources());\n+                                        }\n+                                    }\n+                                    resourcesToRemove.removeAll(resourcesAssignedViaMembership);\n+                                    resourcesToRemove.removeAll(userTO.getResources());\n                                 }\n-                            }\n-                            resourcesToRemove.removeAll(resourcesAssignedViaMembership);\n-                            resourcesToRemove.removeAll(userTO.getResources());\n-                        }\n \n-                        StatusUtils.update(statusPanel, target, Collections.<String>emptySet(), resourcesToRemove);\n+                                StatusUtils.update(statusPanel, target, Collections.<String>emptySet(),\n+                                        resourcesToRemove);\n+                            }\n+                        };\n+                        item.add(deleteLink);\n                     }\n                 };\n-                item.add(deleteLink);\n-            }\n-        };\n \n         membershipsContainer.add(membView);\n "},{"sha":"56391a4ba8fc2977f8ffa1687fe47769f4c7455a","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleDetailsPanel.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleDetailsPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleDetailsPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleDetailsPanel.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -18,6 +18,7 @@\n  */\n package org.apache.syncope.console.pages.panels;\n \n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.to.RoleTO;\n import org.apache.syncope.common.to.UserTO;\n import org.apache.syncope.common.types.AttributableType;\n@@ -101,7 +102,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                         @Override\n                         public Page createPage() {\n-                            return new RoleSelectModalPage(getPage().getPageReference(), parentSelectWin,\n+                            return new RoleSelectModalPage(PageUtils.getPageReference(getPage()), parentSelectWin,\n                                     ParentSelectPayload.class);\n                         }\n                     });\n@@ -158,7 +159,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new UserOwnerSelectModalPage(getPage().getPageReference(), userOwnerSelectWin);\n+                        return new UserOwnerSelectModalPage(PageUtils.getPageReference(getPage()), userOwnerSelectWin);\n                     }\n                 });\n                 userOwnerSelectWin.show(target);\n@@ -194,7 +195,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                     @Override\n                     public Page createPage() {\n-                        return new RoleSelectModalPage(getPage().getPageReference(), parentSelectWin,\n+                        return new RoleSelectModalPage(PageUtils.getPageReference(getPage()), parentSelectWin,\n                                 RoleOwnerSelectPayload.class);\n                     }\n                 });"},{"sha":"ed68d8bd77f5290ea39fd7e617a1384123cd2f8c","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleSearchResultPanel.java","status":"modified","additions":7,"deletions":4,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSearchResultPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSearchResultPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSearchResultPanel.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -22,6 +22,7 @@\n import java.util.Collection;\n import java.util.Collections;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.to.AbstractAttributableTO;\n import org.apache.syncope.common.to.RoleTO;\n@@ -65,7 +66,7 @@ protected List<IColumn<AbstractAttributableTO, String>> getColumns() {\n         final List<IColumn<AbstractAttributableTO, String>> columns =\n                 new ArrayList<IColumn<AbstractAttributableTO, String>>();\n \n-        final String[] colnames = {\"id\", \"name\", \"entitlements\"};\n+        final String[] colnames = { \"id\", \"name\", \"entitlements\" };\n         for (String name : colnames) {\n             columns.add(\n                     new PropertyColumn<AbstractAttributableTO, String>(new ResourceModel(name, name), name, name));\n@@ -84,7 +85,8 @@ public String getCssClass() {\n             public void populateItem(final Item<ICellPopulator<AbstractAttributableTO>> cellItem,\n                     final String componentId, final IModel<AbstractAttributableTO> model) {\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, page.getPageReference());\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model, PageUtils.getPageReference(page));\n \n                 panel.add(new ActionLink() {\n \n@@ -98,7 +100,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new StatusModalPage(page.getPageReference(), statusmodal, model.getObject());\n+                                return new StatusModalPage(PageUtils.getPageReference(page),\n+                                        statusmodal, model.getObject());\n                             }\n                         });\n \n@@ -119,7 +122,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             @Override\n                             public Page createPage() {\n                                 return new RoleModalPage(\n-                                        page.getPageReference(), editmodal, (RoleTO) model.getObject());\n+                                        PageUtils.getPageReference(page), editmodal, (RoleTO) model.getObject());\n                             }\n                         });\n "},{"sha":"02b8a99ef3cbf7a90793098c2977eb05835f09a2","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/UserSearchResultPanel.java","status":"modified","additions":9,"deletions":5,"changes":14,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcc7059ef14f5c935385c6959e272b2d133e968f/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FUserSearchResultPanel.java?ref=fcc7059ef14f5c935385c6959e272b2d133e968f","patch":"@@ -24,6 +24,7 @@\n import java.util.Collection;\n import java.util.Date;\n import java.util.List;\n+import org.apache.syncope.console.commons.PageUtils;\n import org.apache.syncope.common.search.NodeCond;\n import org.apache.syncope.common.to.AbstractAttributableTO;\n import org.apache.syncope.common.to.UserTO;\n@@ -139,7 +140,8 @@ protected List<IColumn<AbstractAttributableTO, String>> getColumns() {\n             @Override\n             public ActionLinksPanel getActions(final String componentId, final IModel<AbstractAttributableTO> model) {\n \n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, model, page.getPageReference());\n+                final ActionLinksPanel panel =\n+                        new ActionLinksPanel(componentId, model, PageUtils.getPageReference(page));\n \n                 panel.add(new ActionLink() {\n \n@@ -153,7 +155,8 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new StatusModalPage(page.getPageReference(), statusmodal, model.getObject());\n+                                return new StatusModalPage(PageUtils.getPageReference(page),\n+                                        statusmodal, model.getObject());\n                             }\n                         });\n \n@@ -175,7 +178,7 @@ public void onClick(final AjaxRequestTarget target) {\n                             public Page createPage() {\n                                 // SYNCOPE-294: re-read userTO before edit\n                                 UserTO userTO = ((UserRestClient) restClient).read(model.getObject().getId());\n-                                return new EditUserModalPage(page.getPageReference(), editmodal, userTO);\n+                                return new EditUserModalPage(PageUtils.getPageReference(page), editmodal, userTO);\n                             }\n                         });\n \n@@ -217,7 +220,8 @@ public Page createPage() {\n \n             @Override\n             public ActionLinksPanel getHeader(final String componentId) {\n-                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(), page.getPageReference());\n+                final ActionLinksPanel panel = new ActionLinksPanel(componentId, new Model(),\n+                        PageUtils.getPageReference(page));\n \n                 panel.add(new ActionLink() {\n \n@@ -231,7 +235,7 @@ public void onClick(final AjaxRequestTarget target) {\n \n                             @Override\n                             public Page createPage() {\n-                                return new DisplayAttributesModalPage(page.getPageReference(), displaymodal,\n+                                return new DisplayAttributesModalPage(PageUtils.getPageReference(page), displaymodal,\n                                         schemaNames, dSchemaNames, vSchemaNames);\n                             }\n                         });"}]}