{"sha":"e18fe9b89e83bb846983aa03d79e93657727f839","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmUxOGZlOWI4OWU4M2JiODQ2OTgzYWEwM2Q3OWU5MzY1NzcyN2Y4Mzk=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-12-16T16:36:53Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-12-16T16:36:53Z"},"message":"Merge from 0_7_X\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247278 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7c22996fd949cbf52f2608acfa382ee1ea5a45c7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/7c22996fd949cbf52f2608acfa382ee1ea5a45c7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/e18fe9b89e83bb846983aa03d79e93657727f839","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e18fe9b89e83bb846983aa03d79e93657727f839","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/e18fe9b89e83bb846983aa03d79e93657727f839","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/e18fe9b89e83bb846983aa03d79e93657727f839/comments","author":null,"committer":null,"parents":[{"sha":"6d4669ab357451ac2d3350fa6f25fec5a8344c3e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/6d4669ab357451ac2d3350fa6f25fec5a8344c3e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/6d4669ab357451ac2d3350fa6f25fec5a8344c3e"}],"stats":{"total":169,"additions":98,"deletions":71},"files":[{"sha":"c374bcbb0354043d1c0cee9e273aabe1e2c4c06c","filename":"archetype/pom.xml","status":"modified","additions":44,"deletions":32,"changes":76,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -29,6 +29,10 @@\n     <version>0.8-SNAPSHOT</version>\n     <packaging>maven-archetype</packaging>\n \n+    <properties>\n+      <SVNRepoURL>http://syncope.googlecode.com/svn/trunk</SVNRepoURL>\n+    </properties>\n+\n     <scm>\n         <connection>scm:svn:http://syncope.googlecode.com/svn/trunk/archetype</connection>\n         <developerConnection>scm:svn:https://syncope.googlecode.com/svn/trunk/archetype</developerConnection>\n@@ -65,45 +69,53 @@\n                         <phase>validate</phase>\n                         <configuration>\n                             <target>\n-                                <copy file=\"${basedir}/../core/src/test/resources/persistence.properties\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/test/resources/workflow.properties\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/test/resources/content.xml\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/test/resources/test.csv\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\"\n-                                      overwrite=\"true\"/>\n+\t\t\t        <taskdef resource=\"net/sf/antcontrib/antcontrib.properties\" classpathref=\"maven.plugin.classpath\" />\n+                                <if>\n+\t\t\t\t    <available file=\"${basedir}/../core/pom.xml\" />\n+                                    <then>\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/persistence.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/workflow.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/content.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/test/resources/test.csv\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources\" overwrite=\"true\" />\n+                                      \n+\t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/persistence.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/workflow.properties\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/content.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/main/resources/logback.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\" overwrite=\"true\" />\n+\t\t\t\t      <copy file=\"${basedir}/../core/src/main/webapp/WEB-INF/web.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/webapp/WEB-INF\" overwrite=\"true\" />\n+                                      \n+\t\t\t\t      <copy file=\"${basedir}/../console/src/main/resources/logback.xml\" todir=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources\" overwrite=\"true\" />\n+                                    </then>\n+                                    <else>\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/persistence.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/persistence.properties\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/workflow.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/workflow.properties\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/content.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/content.xml\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/test/resources/test.csv\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/test/resources/test.csv\" />\n                                       \n-                                <copy file=\"${basedir}/../core/src/main/resources/persistence.properties\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/main/resources/workflow.properties\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/main/resources/content.xml\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/main/resources/logback.xml\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources\"\n-                                      overwrite=\"true\"/>\n-                                <copy file=\"${basedir}/../core/src/main/webapp/WEB-INF/web.xml\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/core/src/main/webapp/WEB-INF\"\n-                                      overwrite=\"true\"/>\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/persistence.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/persistence.properties\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/workflow.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/workflow.properties\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/content.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/content.xml\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/resources/logback.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/resources/logback.xml\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/core/src/main/webapp/WEB-INF/web.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/core/src/main/webapp/WEB-INF/web.xml\" />\n                                       \n-                                <copy file=\"${basedir}/../console/src/main/resources/logback.xml\"\n-                                      todir=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources\"\n-                                      overwrite=\"true\"/>\n-                            </target>    \n-                        </configuration>\n+\t\t\t\t      <get src=\"${SVNRepoURL}/console/src/main/resources/configuration.properties\" dest=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources/configuration.properties\" />\n+\t\t\t\t      <get src=\"${SVNRepoURL}/console/src/main/resources/logback.xml\" dest=\"${basedir}/src/main/resources/archetype-resources/console/src/main/resources/logback.xml\" />\n+                                    </else>\n+\t\t\t\t  </if>\n+\t\t\t\t</target>    \n+\t\t\t</configuration>\n                         <goals>\n                             <goal>run</goal>\n                         </goals>\n                     </execution>\n                 </executions>\n+\t\t<dependencies>\n+\t\t  <dependency>\n+\t\t    <groupId>ant-contrib</groupId>\n+\t\t    <artifactId>ant-contrib</artifactId>\n+\t\t    <version>20020829</version>\n+\t\t  </dependency>\n+\t\t</dependencies>\n             </plugin>    \n         </plugins>\n     </build>"},{"sha":"6c6c82ef90047af90115bd10525f25afcbd553fd","filename":"archetype/src/main/resources/archetype-resources/console/pom.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -203,6 +203,7 @@\n                         </configfiles>\r\n                         <properties>\r\n                             <cargo.servlet.port>${cargo.servlet.port}</cargo.servlet.port>\r\n+                            <cargo.jvmargs>-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m</cargo.jvmargs>\r\n                         </properties>\r\n                         <deployables>\r\n                             <deployable>\r"},{"sha":"d4bdc0d87637ab22ee43772a02b38972c8605e95","filename":"archetype/src/main/resources/archetype-resources/console/src/main/resources/configuration.properties","status":"removed","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/6d4669ab357451ac2d3350fa6f25fec5a8344c3e/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/6d4669ab357451ac2d3350fa6f25fec5a8344c3e/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fconsole%2Fsrc%2Fmain%2Fresources%2Fconfiguration.properties?ref=6d4669ab357451ac2d3350fa6f25fec5a8344c3e","patch":"@@ -1 +0,0 @@\n-baseURL=http://localhost:9080/syncope/rest/"},{"sha":"47f4977bb43fa77e798be36de8a4d01f57e804bf","filename":"archetype/src/main/resources/archetype-resources/pom.xml","status":"modified","additions":10,"deletions":2,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/archetype%2Fsrc%2Fmain%2Fresources%2Farchetype-resources%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -43,13 +43,21 @@\n         <cargo.version>1.1.2</cargo.version>\r\n         <tomcat.version>7.0.23</tomcat.version>\r\n \r\n+        <bundles.directory>${project.build.directory}/bundles</bundles.directory>\r\n+        <log.directory>${project.build.directory}/log</log.directory>\r\n+\r\n         <cargo.servlet.port>9080</cargo.servlet.port>\r\n         <cargo.run.dir>${project.build.directory}/syncope-core-test</cargo.run.dir>\r\n         <cargo.log>${log.directory}/cargo.log</cargo.log>\r\n         <cargo.output>${log.directory}/cargo-output.log</cargo.output>\r\n \r\n-        <bundles.directory>${project.build.directory}/bundles</bundles.directory>\r\n-        <log.directory>${project.build.directory}/log</log.directory>\r\n+        <testds.port>1389</testds.port>\r\n+        <testdb.webport>9082</testdb.webport>\r\n+\r\n+        <testdb.driver>org.h2.Driver</testdb.driver>\r\n+        <testdb.url>jdbc:h2:tcp://localhost:9092/testdb</testdb.url>\r\n+        <testdb.username>sa</testdb.username>\r\n+        <testdb.password>sa</testdb.password>\r\n \r\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n     </properties>\r"},{"sha":"61a2b7a6b17de5f5ccdf99453751803dff0c4824","filename":"client/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/client%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/client%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -42,7 +42,7 @@\n \n         <dependency>\n             <groupId>org.codehaus.jackson</groupId>\n-            <artifactId>jackson-mapper-lgpl</artifactId>\n+            <artifactId>jackson-mapper-asl</artifactId>\n         </dependency>\n \n         <dependency>"},{"sha":"12f2bb870db9a681514022b21e644d6161a883bb","filename":"console/pom.xml","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/console%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/console%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -239,7 +239,7 @@\n                         <phase>pre-integration-test</phase>\n                         <configuration>\n                             <target>\n-                                <copy file=\"${project.build.directory}/test-classes/test.csv\" todir=\"${java.io.tmpdir}\" overwrite=\"true\"/>\n+                                <copy file=\"${project.build.directory}/test-classes/test.csv\" todir=\"${java.io.tmpdir}\" overwrite=\"true\" />\n                             </target>\n                         </configuration>\n                         <goals>\n@@ -342,7 +342,7 @@\n             <id>dev</id>\n             <properties>\n                 <maven.test.skip>true</maven.test.skip>\n-                <javaagent></javaagent>\n+                <javaagent />\n             </properties>\n             <build>\n                 <defaultGoal>clean verify cargo:run</defaultGoal>\n@@ -380,7 +380,7 @@\n         <profile>\n             <id>selenium</id>\n             <properties>\n-                <javaagent></javaagent>    \n+                <javaagent />    \n             </properties>\n             <build>\n                 <defaultGoal>clean verify</defaultGoal>"},{"sha":"687d1441489bb8bd0db1d32ebc5eff522c4f1ce4","filename":"core/pom.xml","status":"modified","additions":11,"deletions":14,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -32,7 +32,7 @@\n         <jdbcdriver.groupId>com.h2database</jdbcdriver.groupId>\n         <jdbcdriver.artifactId>h2</jdbcdriver.artifactId>\n         \n-        <javaagent></javaagent>\n+        <javaagent />\n     </properties>\n \n     <dependencies>\n@@ -383,11 +383,10 @@\n                                         <exclude name=\"**/workflow.properties\" />\n                                     </patternset>\n                                 </unzip>\n-                                <copy file=\"${project.build.directory}/test-classes/org/syncope/core/scheduling/TestSyncJobActions.class\"\n-                                      todir=\"${cargo.run.dir}/WEB-INF/classes/org/syncope/core/scheduling\"/>\n-                                <mkdir dir=\"${project.build.directory}/test-conf\"/>\n+                                <copy file=\"${project.build.directory}/test-classes/org/syncope/core/scheduling/TestSyncJobActions.class\" todir=\"${cargo.run.dir}/WEB-INF/classes/org/syncope/core/scheduling\" />\n+                                <mkdir dir=\"${project.build.directory}/test-conf\" />\n                                 <copy todir=\"${project.build.directory}/test-conf\" includeEmptyDirs=\"false\">\n-                                    <fileset dir=\"${project.build.directory}/test-classes\" excludes=\"**/*.class\"/>\n+                                    <fileset dir=\"${project.build.directory}/test-classes\" excludes=\"**/*.class\" />\n                                 </copy>\n                             </target>\n                         </configuration>\n@@ -413,7 +412,7 @@\n                         <phase>pre-integration-test</phase>\n                         <configuration>\n                             <target>\n-                                <copy file=\"${project.build.directory}/test-classes/test.csv\" todir=\"${java.io.tmpdir}\" overwrite=\"true\"/>\n+                                <copy file=\"${project.build.directory}/test-classes/test.csv\" todir=\"${java.io.tmpdir}\" overwrite=\"true\" />\n                             </target>\n                         </configuration>\n                         <goals>\n@@ -556,7 +555,7 @@\n             <properties>\n                 <waitForCheck>true</waitForCheck>\n                 <sureExcludes>**</sureExcludes>\n-                <javaagent></javaagent>\n+                <javaagent />\n             </properties>\n             <build>\n                 <defaultGoal>clean verify</defaultGoal>\n@@ -677,7 +676,7 @@\n             <properties>\n                 <jdbcdriver.groupId>com.oracle</jdbcdriver.groupId>\n                 <jdbcdriver.artifactId>ojdbc6</jdbcdriver.artifactId>\n-                <javaagent></javaagent>\n+                <javaagent />\n             </properties>\n             <dependencies>\n                 <dependency>\n@@ -701,9 +700,7 @@\n                                 <phase>process-test-resources</phase>\n                                 <configuration>\n                                     <target>\n-                                        <copy tofile=\"${project.build.directory}/classes/META-INF/orm.xml\"\n-                                              file=\"${basedir}/src/main/resources/META-INF/orm.xml.oracle\"\n-                                              overwrite=\"true\"/>\n+                                        <copy tofile=\"${project.build.directory}/classes/META-INF/orm.xml\" file=\"${basedir}/src/main/resources/META-INF/orm.xml.oracle\" overwrite=\"true\" />\n                                     </target>\n                                 </configuration>\n                                 <goals>\n@@ -735,7 +732,7 @@\n             <properties>\n                 <jdbcdriver.groupId>postgresql</jdbcdriver.groupId>\n                 <jdbcdriver.artifactId>postgresql</jdbcdriver.artifactId>\n-                <javaagent></javaagent>\n+                <javaagent />\n             </properties>\n             <dependencies>\n                 <dependency>\n@@ -769,7 +766,7 @@\n             <properties>\n                 <jdbcdriver.groupId>mysql</jdbcdriver.groupId>\n                 <jdbcdriver.artifactId>mysql-connector-java</jdbcdriver.artifactId>\n-                <javaagent></javaagent>\n+                <javaagent />\n             </properties>\n             <dependencies>\n                 <dependency>\n@@ -802,7 +799,7 @@\n             <id>notification-test</id>\n             \n             <properties>\n-                <mail.password></mail.password>\n+                <mail.password />\n             </properties>\n                         \n             <build>"},{"sha":"341c10dffd0e7e5e70a174ac0a716e7502396a77","filename":"core/src/main/java/org/syncope/core/scheduling/SyncJob.java","status":"modified","additions":24,"deletions":14,"changes":38,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fscheduling%2FSyncJob.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fscheduling%2FSyncJob.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Fscheduling%2FSyncJob.java?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -940,14 +940,33 @@ protected String doExecute(final boolean dryRun)\n             throw new JobExecutionException(msg, e);\n         }\n \n+        LOG.debug(\"Execute synchronization with token {}\",\n+                syncTask.getResource().getSyncToken() != null\n+                ? syncTask.getResource().getSyncToken().getValue() : null);\n+\n         final List<SyncDelta> deltas;\n         try {\n-            deltas = connector.sync(\n-                    syncTask.getResource().getSyncToken());\n+            deltas = connector.sync(syncTask.getResource().getSyncToken());\n+\n+            if (!dryRun) {\n+                try {\n+                    ExternalResource resource =\n+                            resourceDAO.find(syncTask.getResource().getName());\n+\n+                    resource.setSyncToken(connector.getLatestSyncToken());\n+                    resourceDAO.save(resource);\n+\n+                } catch (Throwable t) {\n+                    throw new JobExecutionException(\"While updating SyncToken\",\n+                            t);\n+                }\n+            }\n         } catch (Throwable t) {\n             throw new JobExecutionException(\"While syncing on connector\", t);\n         }\n \n+        LOG.debug(\"Retrieved {} changes to synchronize\", deltas.size());\n+\n         final SchemaMapping accountIdMap =\n                 syncTask.getResource().getAccountIdMapping();\n \n@@ -969,6 +988,9 @@ protected String doExecute(final boolean dryRun)\n         actions.beforeAll(deltas);\n \n         for (SyncDelta delta : deltas) {\n+            LOG.debug(\"Process '{}' for '{}'\",\n+                    delta.getDeltaType(), delta.getUid().getUidValue());\n+\n             List<Long> users = findExistingUsers(delta);\n \n             switch (delta.getDeltaType()) {\n@@ -1050,18 +1072,6 @@ protected String doExecute(final boolean dryRun)\n \n         LOG.debug(\"Sync result: {}\", result);\n \n-        if (!dryRun) {\n-            try {\n-                ExternalResource resource =\n-                        resourceDAO.find(syncTask.getResource().getName());\n-\n-                resource.setSyncToken(connector.getLatestSyncToken());\n-                resourceDAO.save(resource);\n-\n-            } catch (Throwable t) {\n-                throw new JobExecutionException(\"While updating SyncToken\", t);\n-            }\n-        }\n         return result.toString();\n     }\n "},{"sha":"11f17d2c81c1da8a6dad89e5db326795f9153ddd","filename":"pom.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/e18fe9b89e83bb846983aa03d79e93657727f839/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/e18fe9b89e83bb846983aa03d79e93657727f839/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=e18fe9b89e83bb846983aa03d79e93657727f839","patch":"@@ -44,9 +44,9 @@\n     </licenses>\n \n     <scm>\n-        <connection>scm:svn:http://syncope.googlecode.com/svn/trunk/</connection>\n-        <developerConnection>scm:svn:https://syncope.googlecode.com/svn/trunk/</developerConnection>\n-        <url>http://syncope.googlecode.com/svn/trunk/</url>\n+        <connection>scm:svn:http://syncope.googlecode.com/svn/trunk</connection>\n+        <developerConnection>scm:svn:https://syncope.googlecode.com/svn/trunk</developerConnection>\n+        <url>http://syncope.googlecode.com/svn/trunk</url>\n     </scm>\n \n     <issueManagement>\n@@ -314,7 +314,7 @@\n \n             <dependency>\n                 <groupId>org.codehaus.jackson</groupId>\n-                <artifactId>jackson-mapper-lgpl</artifactId>\n+                <artifactId>jackson-mapper-asl</artifactId>\n                 <version>${jackson.version}</version>\n             </dependency>\n "}]}