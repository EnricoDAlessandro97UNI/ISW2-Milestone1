{"sha":"07b716737b165c16ae30d0168161b4c93b754e30","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjA3YjcxNjczN2IxNjVjMTZhZTMwZDAxNjgxNjFiNGM5M2I3NTRlMzA=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2011-03-03T15:38:44Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2011-03-03T15:38:44Z"},"message":"Taking into account when caller does not own entitlements for parent role\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246805 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"bce31f0fb2affc13b49571bc69ef6a42456f2be4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/bce31f0fb2affc13b49571bc69ef6a42456f2be4"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/07b716737b165c16ae30d0168161b4c93b754e30","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/07b716737b165c16ae30d0168161b4c93b754e30","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/07b716737b165c16ae30d0168161b4c93b754e30","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/07b716737b165c16ae30d0168161b4c93b754e30/comments","author":null,"committer":null,"parents":[{"sha":"ff7e002e496ea97b8164672a9ebce4242991539e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ff7e002e496ea97b8164672a9ebce4242991539e","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ff7e002e496ea97b8164672a9ebce4242991539e"}],"stats":{"total":9,"additions":8,"deletions":1},"files":[{"sha":"1d89276376a5fd674f40a21863bc9f2a3d9dde20","filename":"core/src/main/java/org/syncope/core/rest/controller/RoleController.java","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/07b716737b165c16ae30d0168161b4c93b754e30/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FRoleController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/07b716737b165c16ae30d0168161b4c93b754e30/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FRoleController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FRoleController.java?ref=07b716737b165c16ae30d0168161b4c93b754e30","patch":"@@ -105,9 +105,16 @@ public List<RoleTO> list() {\n \n         List<SyncopeRole> roles = roleDAO.findAll();\n         List<RoleTO> roleTOs = new ArrayList<RoleTO>();\n+        RoleTO roleTO;\n         for (SyncopeRole role : roles) {\n             if (allowedRoleIds.contains(role.getId())) {\n-                roleTOs.add(roleDataBinder.getRoleTO(role));\n+                roleTO = roleDataBinder.getRoleTO(role);\n+                if (roleTO.getParent() != 0\n+                        && !allowedRoleIds.contains(roleTO.getParent())) {\n+\n+                    roleTO.setParent(0);\n+                }\n+                roleTOs.add(roleTO);\n             }\n         }\n "}]}