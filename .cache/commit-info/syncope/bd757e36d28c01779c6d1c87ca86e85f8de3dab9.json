{"sha":"bd757e36d28c01779c6d1c87ca86e85f8de3dab9","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmJkNzU3ZTM2ZDI4YzAxNzc5YzZkMWM4N2NhODZlODVmOGRlM2RhYjk=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-02T11:11:22Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-02-02T11:11:22Z"},"message":"[SYNCOPE-156] Hiding workflow toggle panel when Activiti not enabled","tree":{"sha":"5a6d4a95c44a23b09e3c99e4d60ffdd035fb5f24","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/5a6d4a95c44a23b09e3c99e4d60ffdd035fb5f24"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/bd757e36d28c01779c6d1c87ca86e85f8de3dab9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bd757e36d28c01779c6d1c87ca86e85f8de3dab9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/bd757e36d28c01779c6d1c87ca86e85f8de3dab9","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"22599aac548a3bf54f32812420f4f84c6725855c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/22599aac548a3bf54f32812420f4f84c6725855c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/22599aac548a3bf54f32812420f4f84c6725855c"}],"stats":{"total":30,"additions":13,"deletions":17},"files":[{"sha":"fa8e6f7a38ac3250e26ff12d5a70437280c01005","filename":"client/console/src/main/java/org/apache/syncope/client/console/pages/Workflow.java","status":"modified","additions":12,"deletions":9,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.java?ref=bd757e36d28c01779c6d1c87ca86e85f8de3dab9","patch":"@@ -42,16 +42,10 @@ public Workflow(final PageParameters parameters) {\n         noActivitiEnabledForUsers.setOutputMarkupPlaceholderTag(true);\n         add(noActivitiEnabledForUsers);\n \n-        final WebMarkupContainer workflowDef = new WebMarkupContainer(\"workflowDefContainer\");\n+        WebMarkupContainer workflowDef = new WebMarkupContainer(\"workflowDefContainer\");\n         workflowDef.setOutputMarkupPlaceholderTag(true);\n \n-        if (wfRestClient.isActivitiEnabledForUsers()) {\n-            noActivitiEnabledForUsers.setVisible(false);\n-        } else {\n-            workflowDef.setVisible(false);\n-        }\n-\n-        final Image workflowDefDiagram = new Image(\"workflowDefDiagram\", new Model<IResource>()) {\n+        Image workflowDefDiagram = new Image(\"workflowDefDiagram\", new Model<IResource>()) {\n \n             private static final long serialVersionUID = -8457850449086490660L;\n \n@@ -73,7 +67,16 @@ protected byte[] getImageData(final IResource.Attributes attributes) {\n         workflowDefDiagram.setOutputMarkupId(true);\n         workflowDef.add(workflowDefDiagram);\n \n-        add(new WorkflowTogglePanel(\"togglePanel\", getPageReference(), workflowDefDiagram));\n+        WorkflowTogglePanel togglePanel =\n+                new WorkflowTogglePanel(\"togglePanel\", getPageReference(), workflowDefDiagram);\n+        togglePanel.setOutputMarkupId(true);\n+        workflowDef.add(togglePanel);\n+\n+        if (wfRestClient.isActivitiEnabledForUsers()) {\n+            noActivitiEnabledForUsers.setVisible(false);\n+        } else {\n+            workflowDef.setVisible(false);\n+        }\n \n         MetaDataRoleAuthorizationStrategy.authorize(workflowDef, ENABLE, StandardEntitlement.WORKFLOW_DEF_READ);\n         add(workflowDef);"},{"sha":"dc877f06d5bc99af0a8b69734e4bcde50badb8fc","filename":"client/console/src/main/java/org/apache/syncope/client/console/panels/WorkflowTogglePanel.java","status":"modified","additions":0,"deletions":7,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FWorkflowTogglePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FWorkflowTogglePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpanels%2FWorkflowTogglePanel.java?ref=bd757e36d28c01779c6d1c87ca86e85f8de3dab9","patch":"@@ -46,15 +46,8 @@ public class WorkflowTogglePanel extends TogglePanel<String> {\n \n     private final WebMarkupContainer container;\n \n-    private final PageReference pageRef;\n-\n-    private final Image workflowDefDiagram;\n-\n     public WorkflowTogglePanel(final String id, final PageReference pageRef, final Image workflowDefDiagram) {\n         super(id);\n-        this.pageRef = pageRef;\n-        this.workflowDefDiagram = workflowDefDiagram;\n-\n         modal.size(Modal.Size.Large);\n \n         container = new WebMarkupContainer(\"container\");"},{"sha":"97ce580a31ddc16d5638ceb7aac7a83cd8dd53f6","filename":"client/console/src/main/resources/org/apache/syncope/client/console/pages/Workflow.html","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/bd757e36d28c01779c6d1c87ca86e85f8de3dab9/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fpages%2FWorkflow.html?ref=bd757e36d28c01779c6d1c87ca86e85f8de3dab9","patch":"@@ -25,10 +25,10 @@\n         <span wicket:id=\"noActivitiEnabledForUsers\"><i><wicket:message key=\"noActivitiEnabledForUsers\"/></i></span>\n         <span wicket:id=\"workflowDefContainer\">\n           <img wicket:id=\"workflowDefDiagram\" style=\"width: 100%;\"/>\n+          <span wicket:id=\"togglePanel\"/>\n         </span>\n       </div>\n     </section>\n \n-    <span wicket:id=\"togglePanel\"/>\n   </wicket:extend>\n </html>\n\\ No newline at end of file"}]}