{"sha":"d7346264809fcbc96a0394850bea44c28353175d","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmQ3MzQ2MjY0ODA5ZmNiYzk2YTAzOTQ4NTBiZWE0NGMyODM1MzE3NWQ=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2012-02-02T09:54:40Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2012-02-02T09:54:40Z"},"message":"Fixes issue 239\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1247388 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"defc959b2a77a516896b876734dd9aea49ad631c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/defc959b2a77a516896b876734dd9aea49ad631c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/d7346264809fcbc96a0394850bea44c28353175d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d7346264809fcbc96a0394850bea44c28353175d","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d7346264809fcbc96a0394850bea44c28353175d","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d7346264809fcbc96a0394850bea44c28353175d/comments","author":null,"committer":null,"parents":[{"sha":"399feea8a8a74ec42a5afadb71fff52484b0ac9c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/399feea8a8a74ec42a5afadb71fff52484b0ac9c","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/399feea8a8a74ec42a5afadb71fff52484b0ac9c"}],"stats":{"total":440,"additions":424,"deletions":16},"files":[{"sha":"1f430fd7feb25ad271ec8896555b2980da3cf6e1","filename":"build-tools/src/main/resources/log4j.xml","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/build-tools%2Fsrc%2Fmain%2Fresources%2Flog4j.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/build-tools%2Fsrc%2Fmain%2Fresources%2Flog4j.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fsrc%2Fmain%2Fresources%2Flog4j.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\" >\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\">\n+    <appender name=\"stdout\" class=\"org.apache.log4j.ConsoleAppender\">\n+        <layout class=\"org.apache.log4j.PatternLayout\">\n+            <param name=\"ConversionPattern\" value=\"%d{dd.MM.yyyy HH:mm:ss} %-5p [%C.%M():%L] %m%n\"/>\n+        </layout>\n+    </appender>\n+    \n+    <category name=\"org.apache.directory\">\n+        <level value=\"off\"/>\n+    </category>\n+    \n+    <root>\n+        <priority value=\"info\"/>\n+        <appender-ref ref=\"stdout\"/>\n+    </root>\n+</log4j:configuration>"},{"sha":"ca6fa6410d08c04707c722436dafdb19cbb61825","filename":"build-tools/src/main/webapp/WEB-INF/web.xml","status":"modified","additions":4,"deletions":4,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/build-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/build-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/build-tools%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -13,10 +13,10 @@\n   limitations under the License.\n -->\n <web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n-\t xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-\t xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n                              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n-\t version=\"2.5\">\n+         version=\"2.5\">\n \n     <context-param>\n         <param-name>testds.port</param-name>\n@@ -29,7 +29,7 @@\n     \n     <context-param>\n         <param-name>contextConfigLocation</param-name>\n-        <param-value>classpath:*Context.xml</param-value>\n+        <param-value>classpath*:/*Context.xml</param-value>\n     </context-param>\n \n     <listener>"},{"sha":"8fbdac625e4fd3f6665ae7ed0068afb4292bcb19","filename":"core/pom.xml","status":"modified","additions":188,"deletions":3,"changes":191,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fpom.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -195,7 +195,7 @@\n             <artifactId>groovy-all</artifactId>\n             <scope>provided</scope>\n         </dependency>\n-            \n+\n         <dependency>\n             <groupId>org.slf4j</groupId>\n             <artifactId>slf4j-api</artifactId>\n@@ -512,6 +512,7 @@\n                         <deployables>\n                             <deployable>\n                                 <location>${cargo.run.dir}</location>\n+                                <pingURL>http://localhost:${cargo.servlet.port}/syncope/rest/schema/user/list.xml</pingURL>\n                                 <properties>\n                                     <context>syncope</context>\n                                 </properties>\n@@ -573,6 +574,8 @@\n                     <exclude>oracle/**</exclude>\n                     <exclude>postgres/**</exclude>\n                     <exclude>mysql/**</exclude>\n+                    <exclude>glassfish/**</exclude>\n+                    <exclude>jboss/**</exclude>\n                 </excludes>\n             </testResource>\n         </testResources>\n@@ -941,7 +944,7 @@\n             <build>\n                 <defaultGoal>clean verify</defaultGoal>\n \n-                <plugins>       \n+                <plugins>\n                     <plugin>\n                         <groupId>org.apache.maven.plugins</groupId>\n                         <artifactId>maven-surefire-plugin</artifactId>\n@@ -959,16 +962,198 @@\n                             <container>\n                                 <containerId>glassfish3x</containerId>\n                                 <zipUrlInstaller>\n-                                    <url>http://download.java.net/glassfish/${glassfish.version}/release/glassfish-${glassfish.version}.zip</url>\n+                                    <url>http://download.java.net/glassfish/3.1.1/release/glassfish-3.1.1.zip</url>\n+                                    <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n+                                    <extractDir>${java.io.tmpdir}</extractDir>\n+                                </zipUrlInstaller>\n+                                <log>${cargo.log}</log>\n+                                <output>${cargo.output}</output>\n+                            </container>\n+                        </configuration>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+        \n+        <profile>\n+            <id>jboss-it</id>\n+\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.syncope</groupId>\n+                    <artifactId>syncope-hibernate-enhancer</artifactId>\n+                    <version>${project.version}</version>\n+                    <scope>provided</scope>\n+                </dependency>\n+\n+                <dependency>\n+                    <groupId>org.codehaus.groovy</groupId>\n+                    <artifactId>groovy-all</artifactId>\n+                </dependency>\n+                \n+                <dependency>\n+                    <groupId>com.h2database</groupId>\n+                    <artifactId>h2</artifactId>\n+                </dependency>\n+            </dependencies>\n+\n+            <build>\n+                <defaultGoal>clean verify</defaultGoal>\n+\n+                <plugins>   \n+                \n+                    <plugin>\n+                        <groupId>org.apache.openjpa</groupId>\n+                        <artifactId>openjpa-maven-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <executions>\n+                            <execution>\n+                                <id>enhancer</id>\n+                                <phase>none</phase>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                \n+                    <plugin>\n+                        <groupId>org.codehaus.mojo</groupId>\n+                        <artifactId>exec-maven-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <configuration>\n+                            <classpathScope>compile</classpathScope>\n+                        </configuration>\n+                        <executions>\n+                            <execution>\n+                                <id>enhance-hibernate</id>\n+                                <phase>process-classes</phase>\n+                                <goals>\n+                                    <goal>exec</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <executable>java</executable>\n+                                    <arguments>\n+                                        <argument>-classpath</argument>\n+                                        <classpath />\n+                                        <argument>org.syncope.hibernate.HibernateEnhancer</argument>\n+                                        <argument>${project.build.directory}/classes</argument>\n+                                    </arguments>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    \n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <executions>\n+                            <execution>\n+                                <id>rename-persistence.xml</id>\n+                                <phase>process-resources</phase>\n+                                <configuration>\n+                                    <target>\n+                                        <delete file=\"${project.build.directory}/classes/META-INF/persistence.xml\"/>\n+                                        <copy file=\"src/main/resources/META-INF/persistence.xml\" tofile=\"${project.build.directory}/classes/META-INF/spring-persistence.xml\"/>\n+                                    </target>\n+                                </configuration>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+      \n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-surefire-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <configuration>\n+                            <skipTests>true</skipTests>\n+                        </configuration>\n+                    </plugin>\n+                    \n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-war-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <configuration>\n+                            <packagingExcludes>WEB-INF/lib/dom4j*.jar,WEB-INF/lib/mail*.jar</packagingExcludes>\n+                        </configuration>\n+                    </plugin>\n+                \n+                    <plugin>\n+                        <groupId>org.codehaus.cargo</groupId>\n+                        <artifactId>cargo-maven2-plugin</artifactId>\n+                        <inherited>true</inherited>\n+                        <configuration>\n+                            <container>\n+                                <containerId>jboss71x</containerId>\n+                                <zipUrlInstaller>\n+                                    <url>http://download.jboss.org/jbossas/7.1/jboss-as-7.1.0.CR1b/jboss-as-7.1.0.CR1b.zip</url>\n                                     <downloadDir>${settings.localRepository}/org/codehaus/cargo/cargo-container-archives</downloadDir>\n                                     <extractDir>${java.io.tmpdir}</extractDir>\n                                 </zipUrlInstaller>\n                                 <log>${cargo.log}</log>\n                                 <output>${cargo.output}</output>\n                             </container>\n+                            <configuration>\n+                                <properties>\n+                                    <cargo.jvmargs>-Xms1024m -Xmx2048m -XX:PermSize=512m -XX:MaxPermSize=1024m -XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled</cargo.jvmargs>\n+                                </properties>\n+                            </configuration>\n                         </configuration>\n+                        <executions>\n+                            <execution>\n+                                <id>start-container</id>\n+                                <phase>pre-integration-test</phase>\n+                                <goals>\n+                                    <goal>start</goal>\n+                                    <goal>deploy</goal>\n+                                </goals>\n+                            </execution>\n+                            <execution>\n+                                <id>stop-container</id>\n+                                <phase>post-integration-test</phase>\n+                                <goals>\n+                                    <goal>stop</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n                     </plugin>\n                 </plugins>\n+                \n+                <resources>\n+                    <resource>\n+                        <directory>src/main/resources</directory>\n+                        <filtering>true</filtering>\n+                        <excludes>\n+                            <exclude>persistenceContextEMFactory.xml</exclude>\n+                        </excludes>\n+                    </resource>\n+                    <resource>\n+                        <directory>src/test/resources/jboss</directory>\n+                        <filtering>true</filtering>\n+                        <includes>\n+                            <include>persistenceContextEMFactory.xml</include>\n+                            <include>persistence.properties</include>\n+                        </includes>\n+                    </resource>\n+                </resources>\n+                <testResources>\n+                    <testResource>\n+                        <directory>src/test/resources</directory>\n+                        <filtering>true</filtering>\n+                        <excludes>\n+                            <exclude>persistence.properties</exclude>\n+                        </excludes>\n+                    </testResource>\n+                    <testResource>\n+                        <directory>src/test/resources/jboss</directory>\n+                        <filtering>true</filtering>\n+                        <includes>\n+                            <include>persistence.properties</include>\n+                        </includes>\n+                    </testResource>\n+                </testResources>\n             </build>\n         </profile>\n     </profiles>"},{"sha":"9c10986a86b73e3dbbc5ea820788ab0af857a4b9","filename":"core/src/main/java/org/syncope/core/init/ContentLoader.java","status":"modified","additions":10,"deletions":3,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Finit%2FContentLoader.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Finit%2FContentLoader.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Finit%2FContentLoader.java?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -52,7 +52,6 @@ public class ContentLoader {\n \n     @Transactional\n     public void load() {\n-\n         // 0. DB connection, to be used below\n         Connection conn = DataSourceUtils.getConnection(dataSource);\n \n@@ -78,8 +77,16 @@ public void load() {\n             existingData = true;\n         } finally {\n             try {\n-                resultSet.close();\n-                statement.close();\n+                if (resultSet != null) {\n+                    resultSet.close();\n+                }\n+            } catch (SQLException e) {\n+                LOG.error(\"While closing SQL result set\", e);\n+            }\n+            try {\n+                if (statement != null) {\n+                    statement.close();\n+                }\n             } catch (SQLException e) {\n                 LOG.error(\"While closing SQL statement\", e);\n             }"},{"sha":"9f856b734db204a49e9c375347fe3aacc7464d67","filename":"core/src/main/java/org/syncope/core/util/SpringPersistenceUnitPostProcessor.java","status":"added","additions":83,"deletions":0,"changes":83,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Futil%2FSpringPersistenceUnitPostProcessor.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Futil%2FSpringPersistenceUnitPostProcessor.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fcore%2Futil%2FSpringPersistenceUnitPostProcessor.java?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -0,0 +1,83 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.syncope.core.util;\n+\n+import java.io.IOException;\n+import javax.persistence.Entity;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.core.io.Resource;\n+import org.springframework.core.io.support.ResourcePatternResolver;\n+import org.springframework.core.type.classreading.CachingMetadataReaderFactory;\n+import org.springframework.core.type.classreading.MetadataReader;\n+import org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo;\n+import org.springframework.orm.jpa.persistenceunit.PersistenceUnitPostProcessor;\n+\n+/**\n+ * Add to JPA persistence context all beans labeled as @Entity from given\n+ * location.\n+ * This is needed only when using LocalContainerEntityManagerFactoryBean with\n+ * non-standard persistence.xml (currently JBoss-only).\n+ */\n+public class SpringPersistenceUnitPostProcessor\n+        implements PersistenceUnitPostProcessor {\n+\n+    /**\n+     * Logger.\n+     */\n+    private static final Logger LOG = LoggerFactory.getLogger(\n+            SpringPersistenceUnitPostProcessor.class);\n+\n+    @Autowired\n+    private ResourcePatternResolver resResolver;\n+\n+    private String[] locations;\n+\n+    public void setLocations(final String[] locations) {\n+        this.locations = locations == null ? new String[0] : locations.clone();\n+    }\n+\n+    @Override\n+    public void postProcessPersistenceUnitInfo(\n+            final MutablePersistenceUnitInfo mpui) {\n+\n+        if (locations.length == 0) {\n+            LOG.warn(\"No locations provided\");\n+        }\n+\n+        CachingMetadataReaderFactory cachingMetadataReaderFactory =\n+                new CachingMetadataReaderFactory();\n+\n+        try {\n+            for (String location : locations) {\n+                for (Resource resource : resResolver.getResources(location)) {\n+                    MetadataReader metadataReader =\n+                            cachingMetadataReaderFactory.getMetadataReader(\n+                            resource);\n+                    if (metadataReader.getAnnotationMetadata().\n+                            isAnnotated(Entity.class.getName())) {\n+\n+                        mpui.addManagedClassName(\n+                                metadataReader.getClassMetadata().\n+                                getClassName());\n+                    }\n+                }\n+            }\n+            mpui.setExcludeUnlistedClasses(true);\n+        } catch (IOException e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n+}"},{"sha":"f2c8763615611785f42b1ae7f5c7149a000b0f46","filename":"core/src/main/resources/META-INF/persistence.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fpersistence.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -18,6 +18,7 @@\n              http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n              version=\"2.0\">\n     <persistence-unit name=\"syncopePersistenceUnit\">\n+        <mapping-file>META-INF/orm.xml</mapping-file>\n         <validation-mode>NONE</validation-mode>\n         \n         <properties>"},{"sha":"8b00af252385e7c3d8e944874195dd9d6db164f9","filename":"core/src/main/resources/schedulingContext.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fresources%2FschedulingContext.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fresources%2FschedulingContext.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fresources%2FschedulingContext.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -37,7 +37,7 @@\n     </bean>\n     \n     <bean id=\"scheduler\"\n-\t  class=\"org.springframework.scheduling.quartz.SchedulerFactoryBean\"\n+          class=\"org.springframework.scheduling.quartz.SchedulerFactoryBean\"\n           lazy-init=\"false\" depends-on=\"quartzDbInitializer\">\n         <property name=\"autoStartup\" value=\"true\"/>\n         <property name=\"applicationContextSchedulerContextKey\" value=\"applicationContext\"/>"},{"sha":"904d384fa95da24c18c21c6ae6fc077928a397bd","filename":"core/src/main/webapp/WEB-INF/jboss-deployment-structure.xml","status":"added","additions":21,"deletions":0,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjboss-deployment-structure.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -0,0 +1,21 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<jboss-deployment-structure xmlns=\"urn:jboss:deployment-structure:1.0\">\n+    <deployment>\n+        <dependencies>\n+            <module name=\"org.hibernate\" />\n+        </dependencies>\n+    </deployment>\n+</jboss-deployment-structure>"},{"sha":"5f9c8f67dcc3b8c754a22c76d2851a368e58ba0e","filename":"core/src/main/webapp/WEB-INF/web.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -22,7 +22,7 @@\n \n     <context-param>\n         <param-name>contextConfigLocation</param-name>\n-        <param-value>classpath:*Context.xml</param-value>\n+        <param-value>classpath*:/*Context.xml</param-value>\n     </context-param>\n \n     <listener>"},{"sha":"fc5f848cc1b1ebf43c8f7a5b531c4da70a9c212d","filename":"core/src/test/resources/jboss/persistence.properties","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2Fpersistence.properties?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -0,0 +1,18 @@\n+#  Licensed under the Apache License, Version 2.0 (the \"License\");\n+#  you may not use this file except in compliance with the License.\n+#  You may obtain a copy of the License at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#  Unless required by applicable law or agreed to in writing, software\n+#  distributed under the License is distributed on an \"AS IS\" BASIS,\n+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+jpa.driverClassName=org.h2.Driver\n+jpa.url=jdbc:h2:mem:syncopedb;DB_CLOSE_DELAY=1000\n+jpa.username=sa\n+jpa.password=\n+jpa.dialect=org.hibernate.dialect.H2Dialect\n+quartz.jobstore=org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n+quartz.sql=tables_h2.sql"},{"sha":"1ab9178e9c791eae2465690f5381844b8fefc47d","filename":"core/src/test/resources/jboss/persistenceContextEMFactory.xml","status":"added","additions":63,"deletions":0,"changes":63,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Ftest%2Fresources%2Fjboss%2FpersistenceContextEMFactory.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -0,0 +1,63 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n+       http://www.springframework.org/schema/beans/spring-beans.xsd\">\n+\n+    <bean id=\"entityManagerFactory\"\n+          class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\">\n+        <property name=\"persistenceXmlLocation\" value=\"classpath*:META-INF/spring-persistence.xml\"/>\n+        <property name=\"persistenceUnitName\" value=\"syncopePersistenceUnit\"/>\n+        <property name=\"dataSource\" ref=\"dataSource\"/>\n+        <property name=\"jpaVendorAdapter\">\n+            <bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\">\n+                <property name=\"showSql\" value=\"false\"/>\n+                <property name=\"generateDdl\" value=\"true\"/>\n+                <property name=\"databasePlatform\" value=\"${jpa.dialect}\"/>\n+            </bean>\n+        </property>\n+        <property name=\"persistenceUnitPostProcessors\">\n+            <list>\n+                <bean class=\"org.syncope.core.util.SpringPersistenceUnitPostProcessor\">\n+                    <property name=\"locations\">\n+                        <list>\n+                            <value>classpath:org/syncope/core/persistence/beans/*.class</value>\n+                            <value>classpath:org/syncope/core/persistence/beans/membership/*.class</value>\n+                            <value>classpath:org/syncope/core/persistence/beans/role/*.class</value>\n+                            <value>classpath:org/syncope/core/persistence/beans/user/*.class</value>\n+                        </list>\n+                    </property>\n+                </bean>\n+            </list>\n+        </property>\n+        <property name=\"jpaPropertyMap\">\n+            <map>\n+                <entry key=\"hibernate.listeners.envers.autoRegister\" value=\"false\"/>\n+                \n+                <entry key=\"hibernate.order_inserts\" value=\"true\"/>\n+                <entry key=\"hibernate.order_updates\" value=\"true\"/>\n+                <entry key=\"hibernate.id.new_generator_mappings\" value=\"true\"/>\n+                <entry key=\"hibernate.generate_statistics\" value=\"false\"/>\n+\n+                <!-- Second level cache -->\n+                <entry key=\"hibernate.cache.use_second_level_cache\" value=\"false\"/>\n+                <entry key=\"hibernate.cache.use_query_cache\" value=\"false\"/>\n+                <entry key=\"hibernate.cache.use_minimal_puts\" value=\"false\"/>\n+            </map>\n+        </property>\n+    </bean>\n+\n+</beans>"},{"sha":"a2aa99142c19a173288e65b47913e1d4ced2fa30","filename":"parent/pom.xml","status":"modified","additions":3,"deletions":4,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/d7346264809fcbc96a0394850bea44c28353175d/parent%2Fpom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/d7346264809fcbc96a0394850bea44c28353175d/parent%2Fpom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/parent%2Fpom.xml?ref=d7346264809fcbc96a0394850bea44c28353175d","patch":"@@ -169,7 +169,6 @@\n         <apacheds.version>1.5.7</apacheds.version>\n \n         <tomcat.version>7.0.25</tomcat.version>\n-        <glassfish.version>3.1.1</glassfish.version>\n  \n         <bundles.directory>${project.build.directory}/bundles</bundles.directory>\n         <log.directory>${project.build.directory}/log</log.directory>\n@@ -625,9 +624,9 @@\n                     <version>1.0</version>\n                 </plugin>\n                 <plugin>\n-                    <groupId>org.apache.maven.plugins</groupId>\n-                    <artifactId>maven-resources-plugin</artifactId>\n-                    <version>2.5</version>\n+                    <groupId>org.codehaus.mojo</groupId>\n+                    <artifactId>exec-maven-plugin</artifactId>\n+                    <version>1.2.1</version>\n                 </plugin>\n                 <plugin>\n                     <groupId>org.apache.openjpa</groupId>"}]}