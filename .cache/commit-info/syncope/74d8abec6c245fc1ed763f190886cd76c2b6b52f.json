{"sha":"74d8abec6c245fc1ed763f190886cd76c2b6b52f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjc0ZDhhYmVjNmMyNDVmYzFlZDc2M2YxOTA4ODZjZDc2YzJiNmI1MmY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-09-30T15:27:54Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2016-09-30T15:28:09Z"},"message":"[SYNCOPE-946] Combining jQuery and AdminLTE to provide the new EncryptedFieldPanel","tree":{"sha":"393f623cdc7490f2d9f460949140e40d74a2dbe6","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/393f623cdc7490f2d9f460949140e40d74a2dbe6"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/74d8abec6c245fc1ed763f190886cd76c2b6b52f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/74d8abec6c245fc1ed763f190886cd76c2b6b52f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/74d8abec6c245fc1ed763f190886cd76c2b6b52f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/74d8abec6c245fc1ed763f190886cd76c2b6b52f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"7b9f9758fa4e2ece4d3cd4be6bc18dde684a91a4","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/7b9f9758fa4e2ece4d3cd4be6bc18dde684a91a4","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/7b9f9758fa4e2ece4d3cd4be6bc18dde684a91a4"}],"stats":{"total":148,"additions":127,"deletions":21},"files":[{"sha":"9d7d1d783f90eb7f4cd6cdc28d5ba9d7cf97e712","filename":"client/console/src/main/java/org/apache/syncope/client/console/rest/AbstractAnyRestClient.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FAbstractAnyRestClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FAbstractAnyRestClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Frest%2FAbstractAnyRestClient.java?ref=74d8abec6c245fc1ed763f190886cd76c2b6b52f","patch":"@@ -34,7 +34,6 @@\n import org.apache.syncope.common.lib.types.ResourceAssociationAction;\n import org.apache.syncope.common.lib.types.ResourceDeassociationAction;\n import org.apache.syncope.common.rest.api.service.AnyService;\n-import org.apache.syncope.common.rest.api.service.UserService;\n import org.apache.wicket.extensions.markup.html.repeater.util.SortParam;\n \n public abstract class AbstractAnyRestClient<TO extends AnyTO, P extends AnyPatch> extends BaseRestClient {\n@@ -63,7 +62,7 @@ public ProvisioningResult<TO> update(final String etag, final P patch) {\n             result = getService(etag, getAnyServiceClass()).update(patch).\n                     readEntity(new GenericType<ProvisioningResult<TO>>() {\n                     });\n-            resetClient(UserService.class);\n+            resetClient(getAnyServiceClass());\n         }\n         return result;\n     }"},{"sha":"10befa013e46be496a9c15ea37221e79e50a2cb4","filename":"client/console/src/main/java/org/apache/syncope/client/console/wicket/markup/html/form/EncryptedFieldPanel.java","status":"added","additions":39,"deletions":0,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.java?ref=74d8abec6c245fc1ed763f190886cd76c2b6b52f","patch":"@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.syncope.client.console.wicket.markup.html.form;\n+\n+import org.apache.wicket.markup.html.form.TextField;\n+import org.apache.wicket.model.IModel;\n+import org.apache.wicket.model.ResourceModel;\n+\n+public class EncryptedFieldPanel extends FieldPanel<String> implements Cloneable {\n+\n+    public EncryptedFieldPanel(final String id, final String name, final IModel<String> model) {\n+        super(id, name, model);\n+\n+        field = new TextField<String>(\"encryptedField\", model) {\n+\n+            @Override\n+            protected String[] getInputTypes() {\n+                return new String[] { \"password\" };\n+            }\n+        };\n+        add(field.setLabel(new ResourceModel(name, name)).setRequired(false).setOutputMarkupId(true));\n+    }\n+}"},{"sha":"b0429efe90936081816698e847fc35dc614ae33a","filename":"client/console/src/main/java/org/apache/syncope/client/console/wizards/any/PlainAttrs.java","status":"modified","additions":13,"deletions":4,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FPlainAttrs.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FPlainAttrs.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwizards%2Fany%2FPlainAttrs.java?ref=74d8abec6c245fc1ed763f190886cd76c2b6b52f","patch":"@@ -33,6 +33,7 @@\n import org.apache.syncope.client.console.wicket.markup.html.form.BinaryFieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.DateTextFieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.DateTimeFieldPanel;\n+import org.apache.syncope.client.console.wicket.markup.html.form.EncryptedFieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.FieldPanel;\n import org.apache.syncope.client.console.wicket.markup.html.form.MultiFieldPanel;\n import org.apache.syncope.client.console.wizards.AjaxWizard;\n@@ -266,17 +267,17 @@ public String getObject(\n                 break;\n \n             case Long:\n-                panel = new AjaxSpinnerFieldPanel.Builder<Long>()\n-                        .build(\"panel\", schemaTO.getKey(), Long.class, new Model<Long>());\n+                panel = new AjaxSpinnerFieldPanel.Builder<Long>().\n+                        build(\"panel\", schemaTO.getKey(), Long.class, new Model<Long>());\n \n                 if (required) {\n                     panel.addRequiredLabel();\n                 }\n                 break;\n \n             case Double:\n-                panel = new AjaxSpinnerFieldPanel.Builder<Double>().step(0.1)\n-                        .build(\"panel\", schemaTO.getKey(), Double.class, new Model<Double>());\n+                panel = new AjaxSpinnerFieldPanel.Builder<Double>().step(0.1).\n+                        build(\"panel\", schemaTO.getKey(), Double.class, new Model<Double>());\n \n                 if (required) {\n                     panel.addRequiredLabel();\n@@ -291,6 +292,14 @@ public String getObject(\n                 }\n                 break;\n \n+            case Encrypted:\n+                panel = new EncryptedFieldPanel(\"panel\", schemaTO.getKey(), new Model<String>());\n+\n+                if (required) {\n+                    panel.addRequiredLabel();\n+                }\n+                break;\n+\n             default:\n                 panel = new AjaxTextFieldPanel(\"panel\", schemaTO.getKey(), new Model<String>(), false);\n "},{"sha":"2c1b7bbcbf92888711561d08aa3dfb2ba4f79339","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/AjaxTextFieldPanel.html","status":"modified","additions":10,"deletions":15,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FAjaxTextFieldPanel.html?ref=74d8abec6c245fc1ed763f190886cd76c2b6b52f","patch":"@@ -17,19 +17,14 @@\n under the License.\n -->\n <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n-  <head>\n-    <title>Ajaxt text field panel</title>\n-  </head>\n-  <body>\n-    <wicket:extend>\n-      <wicket:enclosure child=\"field-label\">\n-        <label wicket:id=\"field-label\">[LABEL]</label><span wicket:id=\"required\"/>\n-        <span wicket:id=\"jexlInfo\" class=\"glyphicon glyphicon-info-sign\" style=\"cursor: pointer\"></span>\n-        <span wicket:id=\"externalAction\"/>\n-      </wicket:enclosure>\n-      <fieldset class=\"input-group\">\n-        <input type=\"text\" class=\"form-control\" wicket:id=\"textField\" placeholder=\"\"/>\n-      </fieldset>\n-    </wicket:extend>\n-  </body>\n+  <wicket:extend>\n+    <wicket:enclosure child=\"field-label\">\n+      <label wicket:id=\"field-label\">[LABEL]</label><span wicket:id=\"required\"/>\n+      <span wicket:id=\"jexlInfo\" class=\"glyphicon glyphicon-info-sign\" style=\"cursor: pointer\"></span>\n+      <span wicket:id=\"externalAction\"/>\n+    </wicket:enclosure>\n+    <fieldset class=\"input-group\">\n+      <input type=\"text\" class=\"form-control\" wicket:id=\"textField\" placeholder=\"\"/>\n+    </fieldset>\n+  </wicket:extend>\n </html>"},{"sha":"6a6117faf932b529ffc4ee82887c34c73139257d","filename":"client/console/src/main/resources/org/apache/syncope/client/console/wicket/markup/html/form/EncryptedFieldPanel.html","status":"added","additions":64,"deletions":0,"changes":64,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/74d8abec6c245fc1ed763f190886cd76c2b6b52f/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fwicket%2Fmarkup%2Fhtml%2Fform%2FEncryptedFieldPanel.html?ref=74d8abec6c245fc1ed763f190886cd76c2b6b52f","patch":"@@ -0,0 +1,64 @@\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:wicket=\"http://wicket.apache.org\">\n+  <wicket:extend>\n+    <wicket:enclosure child=\"field-label\">\n+      <label wicket:id=\"field-label\">[LABEL]</label><span wicket:id=\"required\"/>\n+      <span wicket:id=\"externalAction\"/>\n+    </wicket:enclosure>\n+    <div class=\"input-group input-group-sm\">\n+      <span class=\"input-group-btn\">  \n+        <button type=\"button\" class=\"btn btn-warning btn-flat\"\n+                onclick=\"var pwd = $(this).parent().next('input');\n+                    var children = $(this).children();\n+                    if (pwd.is('[readonly]')) {\n+                      if (pwd.val() === '') {\n+                        pwd.removeAttr('readonly');\n+                        children.attr('class', 'fa fa-unlock');\n+                      } else {\n+                        bootbox.confirm('This will remove the current value. Continue?', function (result) {\n+                          if (result === true) {\n+                            pwd.removeAttr('readonly');\n+                            pwd.val('');\n+                            children.attr('class', 'fa fa-unlock');\n+                          }\n+                          return true;\n+                        });\n+                      }\n+                    }\n+                \"><i class=\"fa fa-lock\"></i></button>\n+      </span>\n+      <input type=\"password\" class=\"form-control\" wicket:id=\"encryptedField\" readonly=\"true\"/>\n+      <span class=\"input-group-btn\">  \n+        <button type=\"button\" class=\"btn btn-primary btn-flat\"\n+                onmousedown=\"var pwd = $(this).parent().prev('input');\n+                    if (!pwd.is('[readonly]')) {\n+                      pwd.attr('type', 'text');\n+                      $(this).children().attr('class', 'fa fa-eye-slash');\n+                    }\"\n+                onmouseup=\"var pwd = $(this).parent().prev('input');\n+                    if (!pwd.is('[readonly]')) {\n+                      pwd.attr('type', 'password');\n+                      $(this).children().attr('class', 'fa fa-eye');\n+                    }\"\n+                ><i class=\"fa fa-eye\"></i></button>\n+      </span>\n+    </div>\n+  </wicket:extend>\n+</html>"}]}