{"sha":"1dce9f3984a2b0c22b168f9dfe77104552adf03f","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjFkY2U5ZjM5ODRhMmIwYzIyYjE2OGY5ZGZlNzcxMDQ1NTJhZGYwM2Y=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-01-25T15:16:09Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2019-01-25T15:53:06Z"},"message":"Adding jacoco support + sonarqube instructions (even though test coverage still does not take ITCase into account)","tree":{"sha":"e7dc9d7084a3ae86d5f6af4d1ec4d7bd825bee5c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/e7dc9d7084a3ae86d5f6af4d1ec4d7bd825bee5c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/1dce9f3984a2b0c22b168f9dfe77104552adf03f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1dce9f3984a2b0c22b168f9dfe77104552adf03f","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/1dce9f3984a2b0c22b168f9dfe77104552adf03f","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/1dce9f3984a2b0c22b168f9dfe77104552adf03f/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"9f3b3e39f820d6d1445206e77323b5140d744179","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/9f3b3e39f820d6d1445206e77323b5140d744179","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/9f3b3e39f820d6d1445206e77323b5140d744179"}],"stats":{"total":75,"additions":72,"deletions":3},"files":[{"sha":"e431631d353e3fd5c435c4bb2cbd7b7af39e78eb","filename":"common/idrepo/lib/src/main/java/org/apache/syncope/common/lib/PropertyUtils.java","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1dce9f3984a2b0c22b168f9dfe77104552adf03f/common%2Fidrepo%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1dce9f3984a2b0c22b168f9dfe77104552adf03f/common%2Fidrepo%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/common%2Fidrepo%2Flib%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcommon%2Flib%2FPropertyUtils.java?ref=1dce9f3984a2b0c22b168f9dfe77104552adf03f","patch":"@@ -32,6 +32,15 @@ public final class PropertyUtils {\n \n     private static final Logger LOG = LoggerFactory.getLogger(PropertyUtils.class);\n \n+    /**\n+     * Reads the property file with the given name from the directory assigned to the given property, or\n+     * from the classpath if not found.\n+     *\n+     * @param clazz calling class, to access classpath\n+     * @param propertiesFileName property file name\n+     * @param confDirProp property name for the configuration directory\n+     * @return properties, either from configuration directory, or from classpath\n+     */\n     public static Properties read(\n             final Class<?> clazz, final String propertiesFileName, final String confDirProp) {\n "},{"sha":"9be7484ddc52add647ade79ebbe04a4aacfd2b3c","filename":"pom.xml","status":"modified","additions":53,"deletions":3,"changes":56,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1dce9f3984a2b0c22b168f9dfe77104552adf03f/pom.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1dce9f3984a2b0c22b168f9dfe77104552adf03f/pom.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/pom.xml?ref=1dce9f3984a2b0c22b168f9dfe77104552adf03f","patch":"@@ -534,6 +534,20 @@ under the License.\n     <secretKey>1abcdefghilmnopqrstuvz2!</secretKey>\n     <jwsKey>ZW7pRixehFuNUtnY5Se47IemgMryTzazPPJ9CGX5LTCmsOJpOgHAQEuPQeV9A28f</jwsKey>\n \n+    <!--\n+    Surefire plugin argLine can be defined as a Maven property to avoid JVM errors on startup with no jacaco-maven-plugin\n+    https://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html\n+    -->\n+    <argLine>-Xms512m -Xmx1024m -Xss256k</argLine>\n+\n+    <sonar.java.coveragePlugin>jacoco</sonar.java.coveragePlugin>\n+    <sonar.jacoco.utReportPath>${rootpom.basedir}/target/jacoco.ut.exec</sonar.jacoco.utReportPath>\n+    <sonar.jacoco.itReportPath>${rootpom.basedir}/target/jacoco.it.exec</sonar.jacoco.itReportPath>\n+    <sonar.jacoco.reportPaths>${sonar.jacoco.utReportPath},${sonar.jacoco.itReportPath}</sonar.jacoco.reportPaths>\n+    <sonar.junit.reportPaths>${project.build.directory}/surefire-reports,${project.build.directory}/failsafe-reports</sonar.junit.reportPaths>\n+    <sonar.language>java</sonar.language>\n+    <sonar.java.source>${targetJdk}</sonar.java.source>\n+\n     <targetJdk>11</targetJdk>\n     <rootpom.basedir>${basedir}</rootpom.basedir>\n     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n@@ -2045,7 +2059,6 @@ under the License.\n             <redirectTestOutputToFile>true</redirectTestOutputToFile>\n             <encoding>utf-8</encoding>\n             <runOrder>alphabetical</runOrder>\n-            <argLine>-Xms512m -Xmx1024m -Xss256k</argLine>\n           </configuration>\n         </plugin>\n         <plugin>\n@@ -2056,7 +2069,6 @@ under the License.\n             <redirectTestOutputToFile>true</redirectTestOutputToFile>\n             <encoding>utf-8</encoding>\n             <runOrder>alphabetical</runOrder>\n-            <argLine>-Xms512m -Xmx1024m -Xss256k</argLine>\n           </configuration>\n           <executions>\n             <execution>\n@@ -2077,7 +2089,7 @@ under the License.\n             <targetJdk>${targetJdk}</targetJdk>\n           </configuration>\n         </plugin>\n-        \n+\n         <plugin>\n           <groupId>org.vafer</groupId>\n           <artifactId>jdeb</artifactId>\n@@ -2195,6 +2207,44 @@ under the License.\n         </executions>\n       </plugin>\n \n+      <plugin>\n+        <groupId>org.jacoco</groupId>\n+        <artifactId>jacoco-maven-plugin</artifactId>\n+        <version>0.8.3</version>\n+        <configuration>\n+          <append>true</append>\n+        </configuration>\n+        <executions>\n+          <execution>\n+            <id>jacoco-agent-ut</id>\n+            <phase>process-test-classes</phase>\n+            <goals>\n+              <goal>prepare-agent</goal>\n+            </goals>\n+            <configuration>\n+              <destFile>${sonar.jacoco.utReportPath}</destFile>\n+            </configuration>\n+          </execution>\n+          <execution>\n+            <id>jacoco-agent-it</id>\n+            <phase>pre-integration-test</phase>\n+            <goals>\n+              <goal>prepare-agent-integration</goal>\n+            </goals>\n+            <configuration>\n+              <destFile>${sonar.jacoco.itReportPath}</destFile>\n+            </configuration>\n+          </execution>\n+          <execution>\n+            <id>jacoco-site</id>\n+            <phase>verify</phase>\n+            <goals>\n+              <goal>report-aggregate</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n       <plugin>\n         <groupId>org.codehaus.gmavenplus</groupId>\n         <artifactId>gmavenplus-plugin</artifactId>"},{"sha":"f28895cdb639488fcc5f035afb0449d070674984","filename":"src/site/xdoc/building.xml","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/1dce9f3984a2b0c22b168f9dfe77104552adf03f/src%2Fsite%2Fxdoc%2Fbuilding.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/1dce9f3984a2b0c22b168f9dfe77104552adf03f/src%2Fsite%2Fxdoc%2Fbuilding.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/src%2Fsite%2Fxdoc%2Fbuilding.xml?ref=1dce9f3984a2b0c22b168f9dfe77104552adf03f","patch":"@@ -69,6 +69,16 @@ under the License.\n         To build Syncope without running any test nor check, but generating Docker images, do:\n         <source>$ mvn -PskipTests,all,docker</source>\n       </p>\n+\n+      <subsection name=\"Code analysis\">\n+\tAfter build, it is possible to examine code quality by submitting the generated reports to\n+\ta <a href=\"https://www.sonarqube.org/\">SonarQube</a> instance.\n+\tVarious installation methods are available, but the quicker seems to be via Docker:\n+\t<source>$ docker run -d --name sonarqube -p 9000:9000 -p 9092:9092 sonarqube</source>\n+\tOnce SonarQube is up and runninig, submit the reports as follows:\n+\t<source>$ mvn sonar:sonar</source>\n+\tAt the end, browse http://localhost:9000/dashboard?id=org.apache.syncope%3Asyncope to see results.\n+      </subsection>\n     </section>\n     \n     <section name=\"Building documentation\">"}]}