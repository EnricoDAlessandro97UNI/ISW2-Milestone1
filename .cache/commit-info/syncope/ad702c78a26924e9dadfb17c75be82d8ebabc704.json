{"sha":"ad702c78a26924e9dadfb17c75be82d8ebabc704","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmFkNzAyYzc4YTI2OTI0ZTlkYWRmYjE3Yzc1YmU4MmQ4ZWJhYmM3MDQ=","commit":{"author":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-04-25T07:41:55Z"},"committer":{"name":"Massimiliano Perrone","email":"massi@apache.org","date":"2013-04-25T07:41:55Z"},"message":"Builder instead of tho constructors\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/branches/1_1_X@1475655 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a8b9116039b45e11313b4db9d60da09b95752813","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/a8b9116039b45e11313b4db9d60da09b95752813"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/ad702c78a26924e9dadfb17c75be82d8ebabc704","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ad702c78a26924e9dadfb17c75be82d8ebabc704","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/ad702c78a26924e9dadfb17c75be82d8ebabc704","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/ad702c78a26924e9dadfb17c75be82d8ebabc704/comments","author":null,"committer":null,"parents":[{"sha":"78f1ed29bc042bdf8a61dc0bddf43d4e6a6172f3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/78f1ed29bc042bdf8a61dc0bddf43d4e6a6172f3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/78f1ed29bc042bdf8a61dc0bddf43d4e6a6172f3"}],"stats":{"total":71,"additions":48,"deletions":23},"files":[{"sha":"5fdaeaed45d6aacf58f8e32ce32a5acf4d8d1093","filename":"console/src/main/java/org/apache/syncope/console/pages/EditUserModalPage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FEditUserModalPage.java?ref=ad702c78a26924e9dadfb17c75be82d8ebabc704","patch":"@@ -73,7 +73,8 @@ public EditUserModalPage(final PageReference pageRef, final ModalWindow window,\n \n             form.addOrReplace(new AccountInformationPanel(\"accountinformation\", userTO));\n \n-            form.addOrReplace(new ResourcesPanel(\"resources\", userTO, statusPanel));\n+            form.addOrReplace(new ResourcesPanel.ResourcesPanelBuilder(\"resources\").attributableTO(userTO).statusPanel(\n+                    statusPanel).build());\n \n             form.addOrReplace(new MembershipsPanel(\"memberships\", userTO, false, statusPanel, getPageReference()));\n         }"},{"sha":"cf1d987cc3d2a62e478117412ea72dc65f846b32","filename":"console/src/main/java/org/apache/syncope/console/pages/UserModalPage.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FUserModalPage.java?ref=ad702c78a26924e9dadfb17c75be82d8ebabc704","patch":"@@ -134,7 +134,8 @@ protected Form setupEditPanel() {\n         //--------------------------------\n         // Resources panel\n         //--------------------------------\n-        form.add(new ResourcesPanel(\"resources\", userTO, null));\n+        form.add(new ResourcesPanel.ResourcesPanelBuilder(\"resources\")\n+                .attributableTO(userTO).statusPanel(null).build());\n         //--------------------------------\n \n         //--------------------------------"},{"sha":"473ffe3322a107477edf8a09bc3604a62868ea3d","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourcesPanel.java","status":"modified","additions":42,"deletions":20,"changes":62,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourcesPanel.java?ref=ad702c78a26924e9dadfb17c75be82d8ebabc704","patch":"@@ -62,36 +62,58 @@ public class ResourcesPanel extends Panel {\n \n     private final List<String> allResources;\n \n-    private ResourcesPanel(final String id, final AbstractAttributableTO attributableTO) {\n-        super(id);\n-        this.attributableTO = attributableTO;\n+    public static class ResourcesPanelBuilder {\n+\n+        private String id;\n+\n+        private Object to;\n+\n+        private StatusPanel statusPanel;\n+\n+        public ResourcesPanelBuilder(String id) {\n+            this.id = id;\n+        }\n+\n+        public ResourcesPanelBuilder attributableTO(Object to) {\n+            this.to = to;\n+            return this;\n+        }\n+\n+        public ResourcesPanelBuilder statusPanel(StatusPanel statusPanel) {\n+            this.statusPanel = statusPanel;\n+            return this;\n+        }\n+\n+        public ResourcesPanel build() {\n+            return new ResourcesPanel(this);\n+        }\n+    }\n+\n+    private ResourcesPanel(final ResourcesPanelBuilder builder) {\n+        super(builder.id);\n+        attributableTO = (AbstractAttributableTO) builder.to;\n         previousResources = new HashSet<String>(attributableTO.getResources());\n         allResources = new ArrayList<String>();\n         for (ResourceTO resourceTO : resourceRestClient.getAllResources()) {\n             allResources.add(resourceTO.getName());\n         }\n         Collections.sort(allResources);\n-    }\n-\n-    public ResourcesPanel(final String id, final UserTO userTO, final StatusPanel statusPanel) {\n-        this(id, userTO);\n \n-        final AjaxPalettePanel<String> resourcesPalette = new AjaxRecordingPalettePanel<String>(\"resourcesPalette\",\n-                new PropertyModel<List<String>>(userTO, \"resources\"),\n-                new ListModel<String>(allResources), statusPanel);\n-        add(resourcesPalette);\n-    }\n-\n-    public ResourcesPanel(final String id, final RoleTO roleTO) {\n-        this(id, (AbstractAttributableTO) roleTO);\n+        AjaxPalettePanel<String> resourcesPalette = null;\n \n-        List<String> selectedResources = new ArrayList<String>(roleTO.getResources());\n-        Collections.sort(selectedResources);\n+        if (attributableTO instanceof UserTO) {\n+            resourcesPalette = new AjaxRecordingPalettePanel<String>(\"resourcesPalette\",\n+                    new PropertyModel<List<String>>(attributableTO, \"resources\"),\n+                    new ListModel<String>(allResources), builder.statusPanel);\n+        } else if (attributableTO instanceof RoleTO) {\n+            List<String> selectedResources = new ArrayList<String>(((RoleTO) attributableTO).getResources());\n+            Collections.sort(selectedResources);\n \n-        final AjaxPalettePanel<String> resourcesPalette = new AjaxPalettePanel<String>(\"resourcesPalette\",\n-                new PropertyModel<List<String>>(roleTO, \"resources\"),\n-                new ListModel<String>(allResources));\n+            resourcesPalette = new AjaxPalettePanel<String>(\"resourcesPalette\",\n+                    new PropertyModel<List<String>>(attributableTO, \"resources\"), new ListModel<String>(allResources));\n+        }\n         add(resourcesPalette);\n+\n     }\n \n     private class AjaxRecordingPalettePanel<T> extends AjaxPalettePanel<T> {"},{"sha":"70bccf93f8844f5ddbb543bf23eeaf0c5a4d10fe","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RolePanel.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/ad702c78a26924e9dadfb17c75be82d8ebabc704/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRolePanel.java?ref=ad702c78a26924e9dadfb17c75be82d8ebabc704","patch":"@@ -119,7 +119,8 @@ public RolePanel(final String id, final Form form, final RoleTO roleTO, final Ro\n         // Resources container\n         //--------------------------------\n \n-        this.add(new ResourcesPanel(\"resources\", roleTO).setOutputMarkupId(true));\n+        this.add(new ResourcesPanel.ResourcesPanelBuilder(\"resources\").attributableTO(roleTO).build()\n+                .setOutputMarkupId(true));\n         //--------------------------------\n \n         ListModel<String> selectedEntitlements = new ListModel<String>(roleTO.getEntitlements());"}]}