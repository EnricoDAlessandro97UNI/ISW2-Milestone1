{"sha":"94b6a75ffef5c38d6868f58cf10b7928da843c87","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjk0YjZhNzVmZmVmNWMzOGQ2ODY4ZjU4Y2YxMGI3OTI4ZGE4NDNjODc=","commit":{"author":{"name":"Matteo Di Carlo","email":"matteo.dicarlo@bhuman.it","date":"2016-05-04T13:20:15Z"},"committer":{"name":"Francesco Chicchiricc√≤","email":"ilgrosso@apache.org","date":"2016-05-04T13:34:12Z"},"message":"[SYNCOPE-799] user Admin cannot log in to enduser anymore - this closes #15","tree":{"sha":"1d1f836dcec9768663ca3ad7faa64adf5469fc47","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/1d1f836dcec9768663ca3ad7faa64adf5469fc47"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/94b6a75ffef5c38d6868f58cf10b7928da843c87","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/94b6a75ffef5c38d6868f58cf10b7928da843c87","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/94b6a75ffef5c38d6868f58cf10b7928da843c87","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/94b6a75ffef5c38d6868f58cf10b7928da843c87/comments","author":null,"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"f323bf747e1a7edcad402e547e6c0ba8e244f5f3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/f323bf747e1a7edcad402e547e6c0ba8e244f5f3","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/f323bf747e1a7edcad402e547e6c0ba8e244f5f3"}],"stats":{"total":22,"additions":15,"deletions":7},"files":[{"sha":"ca8f5630d5c5db067b99f8e87f73a017f82ec3e3","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/SyncopeEnduserApplication.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2FSyncopeEnduserApplication.java?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -76,6 +76,8 @@ public static SyncopeEnduserApplication get() {\n \n     private String license;\n \n+    private String adminUser;\n+\n     private String anonymousUser;\n \n     private String anonymousKey;\n@@ -111,6 +113,8 @@ protected void init() {\n         Args.notNull(site, \"<site> not set\");\n         license = props.getProperty(\"license\");\n         Args.notNull(license, \"<license> not set\");\n+        adminUser = props.getProperty(\"adminUser\");\n+        Args.notNull(adminUser, \"<adminUser> not set\");\n         anonymousUser = props.getProperty(\"anonymousUser\");\n         Args.notNull(anonymousUser, \"<anonymousUser> not set\");\n         anonymousKey = props.getProperty(\"anonymousKey\");\n@@ -344,6 +348,10 @@ public String getLicense() {\n         return license;\n     }\n \n+    public String getAdminUser() {\n+        return adminUser;\n+    }\n+\n     public String getAnonymousUser() {\n         return anonymousUser;\n     }"},{"sha":"bc8a08cdd87439706dbed5d473212a04112cc08c","filename":"client/enduser/src/main/java/org/apache/syncope/client/enduser/resources/LoginResource.java","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fenduser%2Fresources%2FLoginResource.java?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -22,20 +22,17 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.Response;\n import org.apache.commons.lang3.StringUtils;\n+import org.apache.syncope.client.enduser.SyncopeEnduserApplication;\n import org.apache.syncope.client.enduser.model.Credentials;\n import org.apache.syncope.client.enduser.SyncopeEnduserSession;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.util.io.IOUtils;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n \n public class LoginResource extends AbstractBaseResource {\n \n     private static final long serialVersionUID = -7720997467070461915L;\n \n-    private static final Logger LOG = LoggerFactory.getLogger(LoginResource.class);\n-\n     @Override\n     protected ResourceResponse newResourceResponse(final IResource.Attributes attributes) {\n         AbstractResource.ResourceResponse response = new AbstractResource.ResourceResponse();\n@@ -60,7 +57,8 @@ protected ResourceResponse newResourceResponse(final IResource.Attributes attrib\n                 LOG.error(\"Could not read credentials from request: username is blank!\");\n                 response.setError(Response.Status.BAD_REQUEST.getStatusCode(),\n                         \"ErrorMessage{{ Could not read credentials from request: username is blank! }}\");\n-            } else if (SyncopeEnduserSession.get().authenticate(username, password)) {\n+            } else if (!SyncopeEnduserApplication.get().getAdminUser().equalsIgnoreCase(username)\n+                    && SyncopeEnduserSession.get().authenticate(username, password)) {\n                 // user has been authenticated successfully\n                 response.setWriteCallback(new WriteCallback() {\n "},{"sha":"3a98af879c8aa2edf29eada276e20ee43e11ef03","filename":"client/enduser/src/main/resources/META-INF/resources/app/js/services/authService.js","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FauthService.js","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FauthService.js","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2FMETA-INF%2Fresources%2Fapp%2Fjs%2Fservices%2FauthService.js?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -31,7 +31,7 @@ angular.module('login')\n                       .then(function (response) {\n                         return response.data;\n                       }, function (response) {\n-                        console.error(\"Something went wrong during login, exit with status: \", response);\n+                        console.error(\"Something went wrong during login, exit with status: \", response.statusText);\n                         return $q.reject(response.data || response.statusText);\n                       });\n             };"},{"sha":"aadb054efe7e0ca94ed6e17fc3f0ff429622c07e","filename":"client/enduser/src/main/resources/enduser.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fenduser%2Fsrc%2Fmain%2Fresources%2Fenduser.properties?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -22,6 +22,7 @@ license=${licenseUrl}\n \n anonymousUser=${anonymousUser}\n anonymousKey=${anonymousKey}\n+adminUser=${adminUser}\n \n scheme=http\n host=localhost"},{"sha":"8c85e210725005e3ba6f316539d25fe311ec7e4c","filename":"core/spring/src/main/resources/security.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/core%2Fspring%2Fsrc%2Fmain%2Fresources%2Fsecurity.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/core%2Fspring%2Fsrc%2Fmain%2Fresources%2Fsecurity.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fspring%2Fsrc%2Fmain%2Fresources%2Fsecurity.properties?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -14,7 +14,7 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-adminUser=admin\n+adminUser=${adminUser}\n adminPassword=5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8\n adminPasswordAlgorithm=SHA1\n "},{"sha":"a8644aa276fa5cedbc91808e7bfbec9eca7f2cae","filename":"fit/enduser-reference/src/main/resources/enduser.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/94b6a75ffef5c38d6868f58cf10b7928da843c87/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/94b6a75ffef5c38d6868f58cf10b7928da843c87/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fenduser-reference%2Fsrc%2Fmain%2Fresources%2Fenduser.properties?ref=94b6a75ffef5c38d6868f58cf10b7928da843c87","patch":"@@ -22,6 +22,7 @@ license=${licenseUrl}\n \n anonymousUser=${anonymousUser}\n anonymousKey=${anonymousKey}\n+adminUser=${adminUser}\n \n scheme=http\n host=localhost"}]}