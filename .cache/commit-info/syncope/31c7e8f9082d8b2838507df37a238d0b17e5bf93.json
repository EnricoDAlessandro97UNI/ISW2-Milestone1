{"sha":"31c7e8f9082d8b2838507df37a238d0b17e5bf93","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjMxYzdlOGY5MDgyZDhiMjgzODUwN2RmMzdhMjM4ZDBiMTdlNWJmOTM=","commit":{"author":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2017-04-24T12:54:08Z"},"committer":{"name":"Colm O hEigeartaigh","email":"coheigea@apache.org","date":"2017-04-24T12:54:08Z"},"message":"Remove FileInput/OutputStream.\n - See https://www.cloudbees.com/blog/fileinputstream-fileoutputstream-considered-harmful","tree":{"sha":"db532944bb69e6cf7b6fa503ffa9b81e4d32ee8a","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/db532944bb69e6cf7b6fa503ffa9b81e4d32ee8a"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/31c7e8f9082d8b2838507df37a238d0b17e5bf93","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/31c7e8f9082d8b2838507df37a238d0b17e5bf93","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/31c7e8f9082d8b2838507df37a238d0b17e5bf93","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/31c7e8f9082d8b2838507df37a238d0b17e5bf93/comments","author":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"committer":{"login":"coheigea","id":472162,"node_id":"MDQ6VXNlcjQ3MjE2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/472162?v=4","gravatar_id":"","url":"https://api.github.com/users/coheigea","html_url":"https://github.com/coheigea","followers_url":"https://api.github.com/users/coheigea/followers","following_url":"https://api.github.com/users/coheigea/following{/other_user}","gists_url":"https://api.github.com/users/coheigea/gists{/gist_id}","starred_url":"https://api.github.com/users/coheigea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coheigea/subscriptions","organizations_url":"https://api.github.com/users/coheigea/orgs","repos_url":"https://api.github.com/users/coheigea/repos","events_url":"https://api.github.com/users/coheigea/events{/privacy}","received_events_url":"https://api.github.com/users/coheigea/received_events","type":"User","site_admin":false},"parents":[{"sha":"16029366613c0534ea77828bec02c7cd607fb223","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/16029366613c0534ea77828bec02c7cd607fb223","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/16029366613c0534ea77828bec02c7cd607fb223"}],"stats":{"total":61,"additions":35,"deletions":26},"files":[{"sha":"b2606e4e2e512ab8daad5a1d68b8b379326effb2","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/SyncopeServices.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2FSyncopeServices.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2FSyncopeServices.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2FSyncopeServices.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -18,9 +18,10 @@\n  */\n package org.apache.syncope.client.cli;\n \n-import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n import java.util.Properties;\n import org.apache.commons.lang3.BooleanUtils;\n import org.apache.syncope.client.cli.commands.install.InstallConfigFileTemplate;\n@@ -39,7 +40,7 @@ public final class SyncopeServices {\n \n     public static <T> T get(final Class<T> clazz) {\n         final Properties properties = new Properties();\n-        try (InputStream is = new FileInputStream(InstallConfigFileTemplate.configurationFilePath())) {\n+        try (InputStream is = Files.newInputStream(Paths.get(InstallConfigFileTemplate.configurationFilePath()))) {\n             properties.load(is);\n         } catch (final IOException e) {\n             LOG.error(\"Error opening properties file\", e);\n@@ -63,7 +64,7 @@ public static String getAddress() {\n \n     public static void testUsernameAndPassword(final String username, final String password) {\n         final Properties properties = new Properties();\n-        try (InputStream is = new FileInputStream(InstallConfigFileTemplate.configurationFilePath())) {\n+        try (InputStream is = Files.newInputStream(Paths.get(InstallConfigFileTemplate.configurationFilePath()))) {\n             properties.load(is);\n         } catch (final IOException e) {\n             LOG.error(\"Error opening properties file\", e);"},{"sha":"8edf1f8fcd53fd8df7a4079ee96441c62e5fb019","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/migrate/MigrateConf.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fmigrate%2FMigrateConf.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fmigrate%2FMigrateConf.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fmigrate%2FMigrateConf.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -21,10 +21,12 @@\n import com.fasterxml.jackson.databind.JsonNode;\n import com.fasterxml.jackson.databind.ObjectMapper;\n import com.fasterxml.jackson.databind.node.ObjectNode;\n-import java.io.FileInputStream;\n import java.io.FileWriter;\n+import java.io.InputStream;\n import java.io.IOException;\n import java.io.StringWriter;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n import java.util.Arrays;\n import java.util.HashMap;\n import java.util.HashSet;\n@@ -137,7 +139,8 @@ private static void exec(final String src, final String dst) throws XMLStreamExc\n         reporter.writeStartDocument(\"UTF-8\", \"1.0\");\n         reporter.writeStartElement(\"dataset\");\n \n-        XMLStreamReader reader = INPUT_FACTORY.createXMLStreamReader(new FileInputStream(src));\n+        InputStream inputStream = Files.newInputStream(Paths.get(src));\n+        XMLStreamReader reader = INPUT_FACTORY.createXMLStreamReader(inputStream);\n         reader.nextTag(); // root\n         reader.nextTag(); // dataset\n "},{"sha":"0109d5e81c456c2fdaa26b2bddc96db00fbcdee9","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/report/ReportSyncopeOperations.java","status":"modified","additions":14,"deletions":12,"changes":26,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Freport%2FReportSyncopeOperations.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Freport%2FReportSyncopeOperations.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Freport%2FReportSyncopeOperations.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -18,9 +18,11 @@\n  */\n package org.apache.syncope.client.cli.commands.report;\n \n-import java.io.FileOutputStream;\n import java.io.IOException;\n+import java.io.OutputStream;\n import java.io.SequenceInputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n import java.util.List;\n import javax.xml.parsers.ParserConfigurationException;\n import javax.xml.transform.TransformerException;\n@@ -58,7 +60,7 @@ public String exportExecutionResult(final String executionKey, final String repo\n                 getEntity();\n \n         String fileName = \"export_\" + executionKey;\n-        FileOutputStream fos = null;\n+        OutputStream os = null;\n         switch (format) {\n             case XML:\n                 fileName += \".xml\";\n@@ -67,33 +69,33 @@ public String exportExecutionResult(final String executionKey, final String repo\n \n             case CSV:\n                 fileName += \".csv\";\n-                fos = new FileOutputStream(fileName);\n-                IOUtils.copyAndCloseInput(report, fos);\n+                os = Files.newOutputStream(Paths.get(fileName));\n+                IOUtils.copyAndCloseInput(report, os);\n                 break;\n \n             case PDF:\n                 fileName += \".pdf\";\n-                fos = new FileOutputStream(fileName);\n-                IOUtils.copyAndCloseInput(report, fos);\n+                os = Files.newOutputStream(Paths.get(fileName));\n+                IOUtils.copyAndCloseInput(report, os);\n                 break;\n \n             case HTML:\n                 fileName += \".html\";\n-                fos = new FileOutputStream(fileName);\n-                IOUtils.copyAndCloseInput(report, fos);\n+                os = Files.newOutputStream(Paths.get(fileName));\n+                IOUtils.copyAndCloseInput(report, os);\n                 break;\n \n             case RTF:\n                 fileName += \".rtf\";\n-                fos = new FileOutputStream(fileName);\n-                IOUtils.copyAndCloseInput(report, fos);\n+                os = Files.newOutputStream(Paths.get(fileName));\n+                IOUtils.copyAndCloseInput(report, os);\n                 break;\n \n             default:\n                 return format + \" not supported\";\n         }\n-        if (fos != null) {\n-            fos.close();\n+        if (os != null) {\n+            os.close();\n         }\n \n         return fileName;"},{"sha":"80b6e4178750e8f2d6dd4e5a7787f9f912e6d464","filename":"client/cli/src/main/java/org/apache/syncope/client/cli/commands/self/WorkflowExportDiagram.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fcli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fcli%2Fcommands%2Fself%2FWorkflowExportDiagram.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -18,9 +18,11 @@\n  */\n package org.apache.syncope.client.cli.commands.self;\n \n-import java.io.FileOutputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n import javax.ws.rs.core.Response;\n import javax.xml.ws.WebServiceException;\n import org.apache.cxf.helpers.IOUtils;\n@@ -44,9 +46,9 @@ public void export() {\n             try {\n                 final Response response = workflowSyncopeOperations.exportDiagram(input.firstParameter());\n                 final byte[] diagram = IOUtils.readBytesFromStream((InputStream) response.getEntity());\n-                try (final FileOutputStream fos = new FileOutputStream(\"/tmp/diagram.png\")) {\n-                    fos.write(diagram);\n-                    fos.close();\n+                try (final OutputStream os = Files.newOutputStream(Paths.get(\"/tmp/diagram.png\"))) {\n+                    os.write(diagram);\n+                    os.close();\n                 }\n                 workflowResultManager.genericMessage(\"Diagram created: /tmp/diagram.png\");\n             } catch (final SyncopeClientException | WebServiceException ex) {"},{"sha":"dad99172e5f4b31e625ef5a1be2d89f2b459b645","filename":"client/console/src/main/java/org/apache/syncope/client/console/resources/FilesystemResource.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/client%2Fconsole%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fclient%2Fconsole%2Fresources%2FFilesystemResource.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -19,9 +19,10 @@\n package org.apache.syncope.client.console.resources;\n \n import java.io.File;\n-import java.io.FileInputStream;\n+import java.io.InputStream;\n import java.io.IOException;\n import java.nio.charset.StandardCharsets;\n+import java.nio.file.Files;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.util.io.IOUtils;\n import org.slf4j.Logger;\n@@ -61,9 +62,9 @@ protected ResourceResponse newResourceResponse(final Attributes attributes) {\n \n                 @Override\n                 public void writeData(final Attributes attributes) throws IOException {\n-                    FileInputStream resourceIS = null;\n+                    InputStream resourceIS = null;\n                     try {\n-                        resourceIS = new FileInputStream(new File(baseDir, subPath));\n+                        resourceIS = Files.newInputStream(new File(baseDir, subPath).toPath());\n                         IOUtils.copy(resourceIS, attributes.getResponse().getOutputStream());\n                     } catch (IOException e) {\n                         LOG.error(\"Could not read from {}\", baseDir.getAbsolutePath() + subPath, e);"},{"sha":"3959af03031a018be1c296204ae11cef451441b7","filename":"installer/src/main/java/org/apache/syncope/installer/utilities/MavenUtils.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/31c7e8f9082d8b2838507df37a238d0b17e5bf93/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/31c7e8f9082d8b2838507df37a238d0b17e5bf93/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/installer%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Finstaller%2Futilities%2FMavenUtils.java?ref=31c7e8f9082d8b2838507df37a238d0b17e5bf93","patch":"@@ -21,9 +21,9 @@\n import com.izforge.izpack.panels.process.AbstractUIProcessHandler;\n import java.io.File;\n import java.io.FileNotFoundException;\n-import java.io.FileOutputStream;\n import java.io.IOException;\n import java.io.PrintStream;\n+import java.nio.file.Files;\n import java.util.ArrayList;\n import java.util.Collections;\n import java.util.List;\n@@ -203,7 +203,7 @@ public static File createSettingsWithProxy(final String path, final String proxy\n \n             proxies.appendChild(proxy);\n \n-            FileSystemUtils.writeXML(settings, new FileOutputStream(tempSettingsXML));\n+            FileSystemUtils.writeXML(settings, Files.newOutputStream(tempSettingsXML.toPath()));\n \n         }\n         return tempSettingsXML;"}]}