{"sha":"fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOmZjZDg1ZjZjNGY5MjI1OTE5YzFhNTVlNDUzNWNmMGMxNTFhYWI4ZTk=","commit":{"author":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2015-10-13T13:38:14Z"},"committer":{"name":"massi","email":"massimiliano.perrone@tirasa.net","date":"2015-10-13T13:38:14Z"},"message":"Fixed SYNCOPE-707","tree":{"sha":"d6767a1ffacff38e4b64a2dcfb7623e5432abc9c","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/d6767a1ffacff38e4b64a2dcfb7623e5432abc9c"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9/comments","author":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"committer":{"login":"massx1","id":1792923,"node_id":"MDQ6VXNlcjE3OTI5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1792923?v=4","gravatar_id":"","url":"https://api.github.com/users/massx1","html_url":"https://github.com/massx1","followers_url":"https://api.github.com/users/massx1/followers","following_url":"https://api.github.com/users/massx1/following{/other_user}","gists_url":"https://api.github.com/users/massx1/gists{/gist_id}","starred_url":"https://api.github.com/users/massx1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massx1/subscriptions","organizations_url":"https://api.github.com/users/massx1/orgs","repos_url":"https://api.github.com/users/massx1/repos","events_url":"https://api.github.com/users/massx1/events{/privacy}","received_events_url":"https://api.github.com/users/massx1/received_events","type":"User","site_admin":false},"parents":[{"sha":"a3e23c1f175dbdda338c4cf01d8acf6fc3c4f365","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/a3e23c1f175dbdda338c4cf01d8acf6fc3c4f365","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/a3e23c1f175dbdda338c4cf01d8acf6fc3c4f365"}],"stats":{"total":11,"additions":11,"deletions":0},"files":[{"sha":"dca3768ecaf8050c16b5a2b2c74047b7cf5978a8","filename":"core/logic/src/main/java/org/apache/syncope/core/logic/ConfigurationLogic.java","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FConfigurationLogic.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FConfigurationLogic.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Flogic%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Flogic%2FConfigurationLogic.java?ref=fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","patch":"@@ -61,6 +61,15 @@ public class ConfigurationLogic extends AbstractTransactionalLogic<ConfTO> {\n \n     @PreAuthorize(\"hasRole('\" + Entitlement.CONFIGURATION_DELETE + \"')\")\n     public void delete(final String schema) {\n+\n+        final CPlainAttr conf = confDAO.find(schema);\n+        if (conf == null) {\n+            final PlainSchema plainSchema = plainSchemaDAO.find(schema);\n+            if (plainSchema == null) {\n+                throw new NotFoundException(\"Configuration schema \" + schema);\n+            }\n+        }\n+\n         confDAO.delete(schema);\n     }\n "},{"sha":"dc618eb4dd478efa54239e74c06fb4990d13f555","filename":"fit/core-reference/src/test/java/org/apache/syncope/fit/core/reference/ConfigurationITCase.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FConfigurationITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/fcd85f6c4f9225919c1a55e4535cf0c151aab8e9/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FConfigurationITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/fit%2Fcore-reference%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Ffit%2Fcore%2Freference%2FConfigurationITCase.java?ref=fcd85f6c4f9225919c1a55e4535cf0c151aab8e9","patch":"@@ -68,6 +68,7 @@ public void create() {\n     public void delete() throws UnsupportedEncodingException {\n         try {\n             configurationService.delete(\"nonExistent\");\n+            fail(\"The delete operation should throw an exception because of nonExistent schema\");\n         } catch (SyncopeClientException e) {\n             assertEquals(Response.Status.NOT_FOUND, e.getType().getResponseStatus());\n         }\n@@ -77,6 +78,7 @@ public void delete() throws UnsupportedEncodingException {\n         configurationService.delete(\"token.length\");\n         try {\n             configurationService.get(\"token.length\");\n+            fail(\"The delete operation should throw an exception because token.length does not exist anymore\");\n         } catch (SyncopeClientException e) {\n             assertEquals(Response.Status.NOT_FOUND, e.getType().getResponseStatus());\n         }"}]}