{"sha":"32a8c4df0c65ec1e9109c7dbd83fad523c2725df","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjMyYThjNGRmMGM2NWVjMWU5MTA5YzdkYmQ4M2ZhZDUyM2MyNzI1ZGY=","commit":{"author":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-01-14T17:02:50Z"},"committer":{"name":"Francesco Chicchiriccò","email":"ilgrosso@apache.org","date":"2013-01-14T17:02:50Z"},"message":"[SYNCOPE-172] Added ability to edit role mapping for resources in the admin console\n\ngit-svn-id: https://svn.apache.org/repos/asf/syncope/trunk@1432990 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"16dca9c952678b23e4d1a5701dad9711ce470f9f","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/16dca9c952678b23e4d1a5701dad9711ce470f9f"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/32a8c4df0c65ec1e9109c7dbd83fad523c2725df","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/32a8c4df0c65ec1e9109c7dbd83fad523c2725df","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/32a8c4df0c65ec1e9109c7dbd83fad523c2725df","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/comments","author":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"committer":{"login":"ilgrosso","id":1064664,"node_id":"MDQ6VXNlcjEwNjQ2NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1064664?v=4","gravatar_id":"","url":"https://api.github.com/users/ilgrosso","html_url":"https://github.com/ilgrosso","followers_url":"https://api.github.com/users/ilgrosso/followers","following_url":"https://api.github.com/users/ilgrosso/following{/other_user}","gists_url":"https://api.github.com/users/ilgrosso/gists{/gist_id}","starred_url":"https://api.github.com/users/ilgrosso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilgrosso/subscriptions","organizations_url":"https://api.github.com/users/ilgrosso/orgs","repos_url":"https://api.github.com/users/ilgrosso/repos","events_url":"https://api.github.com/users/ilgrosso/events{/privacy}","received_events_url":"https://api.github.com/users/ilgrosso/received_events","type":"User","site_admin":false},"parents":[{"sha":"0ccbe2f7b2ec04660740b885c590deda6874d130","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/0ccbe2f7b2ec04660740b885c590deda6874d130","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/0ccbe2f7b2ec04660740b885c590deda6874d130"}],"stats":{"total":657,"additions":352,"deletions":305},"files":[{"sha":"4a06e4771c662869476a7add80311077c8bceb63","filename":"console/src/main/java/org/apache/syncope/console/commons/PreferenceManager.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fcommons%2FPreferenceManager.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -148,7 +148,7 @@ public void set(final Request request, final Response response, final Map<String\n         try {\n             cookieUtils.save(PREFMAN_KEY, new String(Base64.encodeBase64(setPrefs(current).getBytes())));\n         } catch (IOException e) {\n-            LOG.error(\"Could not save {} info: {}\", new Object[]{getClass().getSimpleName(), current, e});\n+            LOG.error(\"Could not save {} info: {}\", getClass().getSimpleName(), current, e);\n         }\n     }\n \n@@ -166,7 +166,7 @@ public void set(final Request request, final Response response, final String key\n         try {\n             cookieUtils.save(PREFMAN_KEY, new String(Base64.encodeBase64(setPrefs(current).getBytes())));\n         } catch (IOException e) {\n-            LOG.error(\"Could not save {} info: {}\", new Object[]{getClass().getSimpleName(), current, e});\n+            LOG.error(\"Could not save {} info: {}\", getClass().getSimpleName(), current, e);\n         }\n     }\n "},{"sha":"71b029b31c0910dcad4e8d0f6216b42e92c68acf","filename":"console/src/main/java/org/apache/syncope/console/pages/ReportletConfModalPage.java","status":"modified","additions":10,"deletions":3,"changes":13,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FReportletConfModalPage.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -113,6 +113,7 @@ public ReportletConfModalPage(final ReportletConf reportletConf, final ModalWind\n \n         final AjaxDropDownChoicePanel<String> reportletClass = new AjaxDropDownChoicePanel<String>(\"reportletClass\",\n                 \"reportletClass\", new IModel<String>() {\n+\n             private static final long serialVersionUID = -2316468110411802130L;\n \n             @Override\n@@ -142,6 +143,7 @@ public void detach() {\n         ((DropDownChoice) reportletClass.getField()).setNullValid(true);\n         reportletClass.addRequiredLabel();\n         reportletClass.getField().add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+\n             private static final long serialVersionUID = 5538299138211283825L;\n \n             @Override\n@@ -156,6 +158,7 @@ protected void onUpdate(final AjaxRequestTarget target) {\n         propertiesContainer.add(buildPropView());\n \n         final AjaxButton submit = new AjaxButton(\"apply\", new ResourceModel(\"apply\")) {\n+\n             private static final long serialVersionUID = -958724007591692537L;\n \n             @Override\n@@ -189,6 +192,7 @@ protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n         form.add(submit);\n \n         final IndicatingAjaxButton cancel = new IndicatingAjaxButton(\"cancel\", new ResourceModel(\"cancel\")) {\n+\n             private static final long serialVersionUID = -958724007591692537L;\n \n             @Override\n@@ -231,6 +235,7 @@ private FieldPanel buildSinglePanel(final Class<?> type, final String fieldName,\n \n     private ListView<String> buildPropView() {\n         LoadableDetachableModel<List<String>> propViewModel = new LoadableDetachableModel<List<String>>() {\n+\n             private static final long serialVersionUID = 5275935387613157437L;\n \n             @Override\n@@ -249,6 +254,7 @@ protected List<String> load() {\n         };\n \n         propView = new ListView<String>(\"propView\", propViewModel) {\n+\n             private static final long serialVersionUID = 9101744072914090143L;\n \n             @Override\n@@ -262,8 +268,8 @@ protected void populateItem(final ListItem<String> item) {\n                 try {\n                     field = ReportletConfModalPage.this.reportletConf.getClass().getDeclaredField(fieldName);\n                 } catch (Exception e) {\n-                    LOG.error(\"Could not find field {} in class {}\", new Object[]{fieldName,\n-                                ReportletConfModalPage.this.reportletConf.getClass(), e});\n+                    LOG.error(\"Could not find field {} in class {}\", fieldName,\n+                            ReportletConfModalPage.this.reportletConf.getClass(), e);\n                 }\n                 if (field == null) {\n                     return;\n@@ -285,7 +291,8 @@ protected void populateItem(final ListItem<String> item) {\n \n                     Class<?> listItemType = String.class;\n                     if (field.getGenericType() instanceof ParameterizedType) {\n-                        listItemType = (Class<?>) ((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0];\n+                        listItemType =\n+                                (Class<?>) ((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0];\n                     }\n \n                     FormAttributeField annotation = field.getAnnotation(FormAttributeField.class);"},{"sha":"b4d2c2b51060791cb3e765af93b00da2830c0b6e","filename":"console/src/main/java/org/apache/syncope/console/pages/ResourceModalPage.java","status":"modified","additions":28,"deletions":11,"changes":39,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -26,6 +26,7 @@\n import org.apache.syncope.console.pages.panels.ResourceMappingPanel;\n import org.apache.syncope.console.pages.panels.ResourceSecurityPanel;\n import org.apache.syncope.console.rest.ResourceRestClient;\n+import org.apache.syncope.types.AttributableType;\n import org.apache.wicket.PageReference;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n@@ -63,9 +64,10 @@ public ResourceModalPage(final PageReference pageref, final ModalWindow window,\n         //--------------------------------\n \n         //--------------------------------\n-        // Resource mapping panel\n+        // Resource mapping panels\n         //--------------------------------\n-        form.add(new ResourceMappingPanel(\"mapping\", resourceTO));\n+        form.add(new ResourceMappingPanel(\"umapping\", resourceTO, AttributableType.USER));\n+        form.add(new ResourceMappingPanel(\"rmapping\", resourceTO, AttributableType.ROLE));\n         //--------------------------------\n \n         //--------------------------------\n@@ -86,23 +88,39 @@ public ResourceModalPage(final PageReference pageref, final ModalWindow window,\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n-\n                 final ResourceTO resourceTO = (ResourceTO) form.getDefaultModelObject();\n \n-                int accountIdCount = 0;\n+                boolean accountIdError = false;\n \n-                for (MappingItemTO item : resourceTO.getUmapping().getItems()) {\n-                    if (item.isAccountid()) {\n-                        accountIdCount++;\n+                if (resourceTO.getUmapping().getItems().isEmpty()) {\n+                    resourceTO.setUmapping(null);\n+                } else {\n+                    int uAccountIdCount = 0;\n+                    for (MappingItemTO item : resourceTO.getUmapping().getItems()) {\n+                        if (item.isAccountid()) {\n+                            uAccountIdCount++;\n+                        }\n                     }\n+                    accountIdError = uAccountIdCount != 1;\n                 }\n \n-                if (accountIdCount == 0 || accountIdCount > 1) {\n+                if (resourceTO.getRmapping().getItems().isEmpty()) {\n+                    resourceTO.setRmapping(null);\n+                } else {\n+                    int rAccountIdCount = 0;\n+                    for (MappingItemTO item : resourceTO.getRmapping().getItems()) {\n+                        if (item.isAccountid()) {\n+                            rAccountIdCount++;\n+                        }\n+                    }\n+                    accountIdError |= rAccountIdCount != 1;\n+                }\n+\n+                if (accountIdError) {\n                     error(new ResourceModel(\"accountIdValidation\", \"accountIdValidation\").getObject());\n                     target.add(feedbackPanel);\n                 } else {\n                     try {\n-\n                         if (createFlag) {\n                             restClient.create(resourceTO);\n                         } else {\n@@ -111,9 +129,8 @@ protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n \n                         ((Resources) pageref.getPage()).setModalResult(true);\n                         window.close(target);\n-\n                     } catch (Exception e) {\n-                        LOG.error(\"Failuer managing resource {}\", resourceTO);\n+                        LOG.error(\"Failure managing resource {}\", resourceTO);\n                         error(new ResourceModel(\"error\", \"error\").getObject() + \":\" + e.getMessage());\n                         target.add(feedbackPanel);\n                     }"},{"sha":"bad6e3540eeb7fbdd7ee098404a067f87d00688d","filename":"console/src/main/java/org/apache/syncope/console/pages/Resources.java","status":"modified","additions":48,"deletions":3,"changes":51,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -56,6 +56,8 @@\n import org.apache.syncope.console.rest.ResourceRestClient;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLink;\n import org.apache.syncope.console.wicket.markup.html.form.ActionLinksPanel;\n+import org.apache.syncope.console.wicket.markup.html.form.LinkPanel;\n+import org.apache.wicket.markup.html.basic.Label;\n \n /**\n  * Resources WebPage.\n@@ -114,6 +116,50 @@ private void setupResources() {\n         List<IColumn> columns = new ArrayList<IColumn>();\n \n         columns.add(new PropertyColumn(new ResourceModel(\"name\"), \"name\", \"name\"));\n+\n+        columns.add(new AbstractColumn<ResourceTO, String>(new ResourceModel(\"connector\", \"connector\")) {\n+\n+            private static final long serialVersionUID = 8263694778917279290L;\n+\n+            @Override\n+            public void populateItem(final Item<ICellPopulator<ResourceTO>> cellItem, final String componentId,\n+                    final IModel<ResourceTO> rowModel) {\n+\n+                final ConnInstanceTO connectorTO = connectorRestClient.read(rowModel.getObject().getConnectorId());\n+\n+                final IndicatingAjaxLink<String> editLink = new IndicatingAjaxLink<String>(\"link\") {\n+\n+                    private static final long serialVersionUID = -7978723352517770644L;\n+\n+                    @Override\n+                    public void onClick(final AjaxRequestTarget target) {\n+\n+                        editConnectorWin.setPageCreator(new ModalWindow.PageCreator() {\n+\n+                            private static final long serialVersionUID = -7834632442532690940L;\n+\n+                            @Override\n+                            public Page createPage() {\n+                                return new ConnectorModalPage(Resources.this.getPageReference(), editConnectorWin,\n+                                        connectorTO);\n+                            }\n+                        });\n+\n+                        editConnectorWin.show(target);\n+                    }\n+                };\n+                editLink.add(new Label(\"linkTitle\", connectorTO.getDisplayName()));\n+\n+                LinkPanel editConnPanel = new LinkPanel(componentId);\n+                editConnPanel.add(editLink);\n+\n+                cellItem.add(editConnPanel);\n+\n+                MetaDataRoleAuthorizationStrategy.authorize(editConnPanel, ENABLE, xmlRolesReader.getAllAllowedRoles(\n+                        \"Connectors\", \"read\"));\n+            }\n+        });\n+\n         columns.add(new PropertyColumn(new ResourceModel(\"propagationPrimary\"), \"propagationPrimary\",\n                 \"propagationPrimary\"));\n         columns.add(new PropertyColumn(new ResourceModel(\"propagationPriority\"), \"propagationPriority\",\n@@ -296,7 +342,6 @@ public void populateItem(final Item<ICellPopulator<ConnInstanceTO>> cellItem, fi\n \n                     @Override\n                     public void onClick(final AjaxRequestTarget target) {\n-\n                         editConnectorWin.setPageCreator(new ModalWindow.PageCreator() {\n \n                             private static final long serialVersionUID = -7834632442532690940L;\n@@ -433,7 +478,7 @@ public Iterator<ResourceTO> iterator(final long first, final long count) {\n \n             Collections.sort(list, comparator);\n \n-            return list.subList((int)first, (int)first + (int)count).iterator();\n+            return list.subList((int) first, (int) first + (int) count).iterator();\n         }\n \n         @Override\n@@ -477,7 +522,7 @@ public Iterator<ConnInstanceTO> iterator(long first, long count) {\n \n             Collections.sort(list, comparator);\n \n-            return list.subList((int)first, (int)first + (int)count).iterator();\n+            return list.subList((int) first, (int) first + (int) count).iterator();\n         }\n \n         @Override"},{"sha":"a43ed9ad86db459e7c8f4b41c6c1d615aac1cffb","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/PoliciesPanel.java","status":"modified","additions":3,"deletions":4,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FPoliciesPanel.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -22,7 +22,6 @@\n import java.util.Collections;\n import java.util.Iterator;\n import java.util.List;\n-\n import org.apache.wicket.Page;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n@@ -185,8 +184,8 @@ public void onClick(final AjaxRequestTarget target) {\n                         } catch (SyncopeClientCompositeErrorException e) {\n                             error(getString(\"operation_error\"));\n \n-                            LOG.error(\"While deleting resource {}({})\", new Object[] { accountPolicyTO.getId(),\n-                                    accountPolicyTO.getDescription() }, e);\n+                            LOG.error(\"While deleting resource {}({})\", accountPolicyTO.getId(),\n+                                    accountPolicyTO.getDescription(), e);\n                         }\n \n                         target.add(container);\n@@ -293,7 +292,7 @@ public Iterator<PolicyTO> iterator(final long first, final long count) {\n \n             Collections.sort(policies, comparator);\n \n-            return policies.subList((int)first, (int)first + (int)count).iterator();\n+            return policies.subList((int) first, (int) first + (int) count).iterator();\n         }\n \n         @Override"},{"sha":"7d05e8fb1d9621ccd9e77ca22b7d0a114b8cb948","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourceConnConfPanel.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceConnConfPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceConnConfPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceConnConfPanel.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -291,7 +291,7 @@ public static class ConnConfModEvent extends ResourceEvent {\n          * Constructor.\n          *\n          * @param target request target.\n-         * @param target connector configuration properties.\n+         * @param conf connector configuration properties.\n          */\n         public ConnConfModEvent(final AjaxRequestTarget target, final List<ConnConfProperty> conf) {\n             super(target);"},{"sha":"2d74d5c4d8ef27e9e78f1365d596e9c462f72b33","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourceMappingPanel.java","status":"modified","additions":116,"deletions":129,"changes":245,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -39,12 +39,16 @@\n import org.apache.syncope.types.AttributableType;\n import org.apache.syncope.types.ConnConfProperty;\n import org.apache.syncope.types.IntMappingType;\n+import org.apache.wicket.Component;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n+import org.apache.wicket.ajax.attributes.AjaxCallListener;\n+import org.apache.wicket.ajax.attributes.AjaxRequestAttributes;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.ajax.markup.html.form.AjaxButton;\n import org.apache.wicket.event.IEvent;\n import org.apache.wicket.extensions.ajax.markup.html.IndicatingAjaxButton;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n+import org.apache.wicket.markup.html.basic.Label;\n import org.apache.wicket.markup.html.form.Form;\n import org.apache.wicket.markup.html.list.ListItem;\n import org.apache.wicket.markup.html.list.ListView;\n@@ -55,116 +59,129 @@\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.apache.wicket.Component;\n-import org.apache.wicket.ajax.attributes.AjaxCallListener;\n-import org.apache.wicket.ajax.attributes.AjaxRequestAttributes;\n \n /**\n  * Resource mapping panel.\n  */\n public class ResourceMappingPanel extends Panel {\n \n-    /**\n-     * Serial verion UID.\n-     */\n     private static final long serialVersionUID = -7982691107029848579L;\n \n     /**\n      * Logger.\n      */\n-    protected static final Logger LOG = LoggerFactory.getLogger(ResourceMappingPanel.class);\n+    private static final Logger LOG = LoggerFactory.getLogger(ResourceMappingPanel.class);\n \n     /**\n-     * Schema rest client.\n+     * OnChange event name.\n      */\n-    @SpringBean\n-    private transient SchemaRestClient schemaRestClient;\n+    private static final String ON_CHANGE = \"onchange\";\n \n     /**\n-     * ConnInstance rest client.\n+     * Mapping field style sheet.\n      */\n-    @SpringBean\n-    private transient ConnectorRestClient connRestClient;\n+    private static final String FIELD_STYLE = \"ui-widget-content ui-corner-all short_fixedsize\";\n \n     /**\n-     * Resource schema name.\n+     * Mapping field style sheet.\n      */\n-    private transient List<String> schemaNames;\n+    private static final String DEF_FIELD_STYLE = \"ui-widget-content ui-corner-all\";\n \n     /**\n-     * Internal attribute types.\n+     * Mapping field style sheet.\n      */\n-    private transient List<IntMappingType> attrTypes = new ArrayList<IntMappingType>();\n+    private static final String SHORT_FIELD_STYLE = \"ui-widget-content ui-corner-all veryshort_fixedsize\";\n \n     /**\n-     * Add mapping button.\n+     * Schema rest client.\n      */\n-    private final transient AjaxButton addMappingBtn;\n+    @SpringBean\n+    private SchemaRestClient schemaRestClient;\n \n     /**\n-     * All mappings.\n+     * ConnInstance rest client.\n      */\n-    private final transient ListView mappings;\n+    @SpringBean\n+    private ConnectorRestClient connRestClient;\n \n     /**\n-     * External resource to be updated.\n+     * Resource schema name.\n      */\n-    private final transient ResourceTO resourceTO;\n+    private final List<String> schemaNames;\n \n     /**\n-     * Mapping container.\n+     * Add mapping button.\n      */\n-    private final transient WebMarkupContainer mappingContainer;\n+    private final AjaxButton addMappingBtn;\n \n     /**\n-     * AccountLink container.\n+     * All mappings.\n      */\n-    private final transient WebMarkupContainer accountLinkContainer;\n+    private final ListView mappings;\n \n     /**\n-     * OnChange event name.\n+     * External resource to be updated.\n      */\n-    private static String onchange = \"onchange\";\n+    private final ResourceTO resourceTO;\n \n-    /**\n-     * Mapping field style sheet.\n-     */\n-    private static String fieldStyle = \"ui-widget-content ui-corner-all short_fixedsize\";\n+    private final AttributableType attrType;\n \n     /**\n-     * Mapping field style sheet.\n+     * Mapping container.\n      */\n-    private static String defFieldStyle = \"ui-widget-content ui-corner-all\";\n+    private final WebMarkupContainer mappingContainer;\n \n     /**\n-     * Mapping field style sheet.\n+     * AccountLink container.\n      */\n-    private static String shortFieldStyle = \"ui-widget-content ui-corner-all veryshort_fixedsize\";\n+    private final WebMarkupContainer accountLinkContainer;\n+\n+    private MappingTO getMapping() {\n+        MappingTO result = null;\n+\n+        if (AttributableType.USER == attrType) {\n+            if (this.resourceTO.getUmapping() == null) {\n+                this.resourceTO.setUmapping(new MappingTO());\n+            }\n+            result = this.resourceTO.getUmapping();\n+        }\n+        if (AttributableType.ROLE == attrType) {\n+            if (this.resourceTO.getRmapping() == null) {\n+                this.resourceTO.setRmapping(new MappingTO());\n+            }\n+            result = this.resourceTO.getRmapping();\n+        }\n+\n+        return result;\n+    }\n \n     /**\n      * Attribute Mapping Panel.\n      *\n-     * @param panelid panel id.\n-     * @param resourceTO external resource.\n+     * @param panelid panel id\n+     * @param resourceTO external resource\n+     * @param attrType USER / ROLE\n      */\n-    public ResourceMappingPanel(final String panelid, final ResourceTO resourceTO) {\n-\n+    public ResourceMappingPanel(final String panelid, final ResourceTO resourceTO, final AttributableType attrType) {\n         super(panelid);\n         setOutputMarkupId(true);\n \n         this.resourceTO = resourceTO;\n-        if (resourceTO.getUmapping() == null) {\n-            resourceTO.setUmapping(new MappingTO());\n-        }\n+        this.attrType = attrType;\n \n-        initResourceSchemaNames();\n+        if (this.resourceTO.getConnectorId() != null && this.resourceTO.getConnectorId() > 0) {\n+            schemaNames =\n+                    getResourceSchemaNames(this.resourceTO.getConnectorId(), this.resourceTO.getConnConfProperties());\n+        } else {\n+            schemaNames = Collections.<String>emptyList();\n+        }\n \n         accountLinkContainer = new WebMarkupContainer(\"accountLinkContainer\");\n         accountLinkContainer.setOutputMarkupId(true);\n         add(accountLinkContainer);\n \n         boolean accountLinkEnabled = false;\n-        if (resourceTO.getUmapping().getAccountLink() != null) {\n+        if (getMapping().getAccountLink() != null) {\n             accountLinkEnabled = true;\n         }\n         final AjaxCheckBoxPanel accountLinkCheckbox = new AjaxCheckBoxPanel(\"accountLinkCheckbox\",\n@@ -174,13 +191,13 @@ public ResourceMappingPanel(final String panelid, final ResourceTO resourceTO) {\n \n         accountLinkContainer.add(accountLinkCheckbox);\n \n-        final AjaxTextFieldPanel accountLink = new AjaxTextFieldPanel(\"accountLink\", new ResourceModel(\"accountLink\",\n-                \"accountLink\").getObject(), new PropertyModel<String>(resourceTO.getUmapping(), \"accountLink\"));\n+        final AjaxTextFieldPanel accountLink = new AjaxTextFieldPanel(\"accountLink\",\n+                new ResourceModel(\"accountLink\", \"accountLink\").getObject(),\n+                new PropertyModel<String>(getMapping(), \"accountLink\"));\n         accountLink.setEnabled(accountLinkEnabled);\n-\n         accountLinkContainer.add(accountLink);\n \n-        accountLinkCheckbox.getField().add(new AjaxFormComponentUpdatingBehavior(\"onchange\") {\n+        accountLinkCheckbox.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n             private static final long serialVersionUID = -1107858522700306810L;\n \n@@ -198,31 +215,30 @@ protected void onUpdate(final AjaxRequestTarget target) {\n             }\n         });\n \n-\n         mappingContainer = new WebMarkupContainer(\"mappingContainer\");\n         mappingContainer.setOutputMarkupId(true);\n         add(mappingContainer);\n \n-        mappings = new ListView<MappingItemTO>(\"mappings\", resourceTO.getUmapping().getItems()) {\n+        final Label passwordLabel = new Label(\"passwordLabel\", new ResourceModel(\"password\"));\n+        mappingContainer.add(passwordLabel);\n+        if (AttributableType.USER != ResourceMappingPanel.this.attrType) {\n+            passwordLabel.setVisible(false);\n+        }\n+\n+        mappings = new ListView<MappingItemTO>(\"mappings\", getMapping().getItems()) {\n \n-            /**\n-             * Serial version UID.\n-             */\n             private static final long serialVersionUID = 4949588177564901031L;\n \n             @Override\n             protected void populateItem(final ListItem<MappingItemTO> item) {\n-\n                 final MappingItemTO mapItem = item.getModelObject();\n \n-                final AttributableType entity;\n+                AttributableType entity = null;\n                 if (mapItem.getIntMappingType() != null) {\n                     entity = mapItem.getIntMappingType().getAttributableType();\n-                } else {\n-                    entity = null;\n                 }\n \n-                attrTypes = getAttributeTypes(entity);\n+                final List<IntMappingType> attrTypes = new ArrayList<IntMappingType>(getAttributeTypes(entity));\n \n                 item.add(new AjaxDecoratedCheckbox(\"toRemove\", new Model<Boolean>(Boolean.FALSE)) {\n \n@@ -231,25 +247,25 @@ protected void populateItem(final ListItem<MappingItemTO> item) {\n                     @Override\n                     protected void onUpdate(final AjaxRequestTarget target) {\n                         int index = -1;\n-                        for (int i = 0; i < resourceTO.getUmapping().getItems().size() && index == -1; i++) {\n-                            if (mapItem.equals(resourceTO.getUmapping().getItems().get(i))) {\n+                        for (int i = 0; i < getMapping().getItems().size() && index == -1; i++) {\n+                            if (mapItem.equals(getMapping().getItems().get(i))) {\n                                 index = i;\n                             }\n                         }\n \n                         if (index != -1) {\n-                            resourceTO.getUmapping().getItems().remove(index);\n+                            getMapping().getItems().remove(index);\n                             item.getParent().removeAll();\n-                            target.add(mappingContainer);\n+                            target.add(ResourceMappingPanel.this);\n                         }\n                     }\n \n                     @Override\n-                    protected void updateAjaxAttributes(AjaxRequestAttributes attributes) {\n+                    protected void updateAjaxAttributes(final AjaxRequestAttributes attributes) {\n                         super.updateAjaxAttributes(attributes);\n \n                         final AjaxCallListener ajaxCallListener = new AjaxCallListener() {\n-                            \n+\n                             private static final long serialVersionUID = 7160235486520935153L;\n \n                             @Override\n@@ -265,86 +281,70 @@ public CharSequence getPrecondition(final Component component) {\n                         getString(\"intAttrNames\"), new PropertyModel<String>(mapItem, \"intAttrName\"));\n                 intAttrNames.setChoices(schemaNames);\n                 intAttrNames.setRequired(true);\n-                intAttrNames.setStyleSheet(fieldStyle);\n+                intAttrNames.setStyleSheet(FIELD_STYLE);\n                 item.add(intAttrNames);\n \n                 final AjaxDropDownChoicePanel<IntMappingType> typesPanel =\n                         new AjaxDropDownChoicePanel<IntMappingType>(\"intMappingTypes\",\n                         new ResourceModel(\"intMappingTypes\", \"intMappingTypes\").getObject(),\n                         new PropertyModel<IntMappingType>(mapItem, \"intMappingType\"));\n-\n-                // typesPanel onChange behavior provided below ...\n-\n                 typesPanel.setRequired(true);\n                 typesPanel.setChoices(attrTypes);\n-                typesPanel.setStyleSheet(fieldStyle);\n+                typesPanel.setStyleSheet(FIELD_STYLE);\n                 item.add(typesPanel);\n \n-                final AjaxDropDownChoicePanel mappingTypesPanel = new AjaxDropDownChoicePanel(\"mappingTypes\",\n-                        new ResourceModel(\"mappingTypes\", \"mappingTypes\").getObject(), new Model(entity));\n-\n-                mappingTypesPanel.setChoices(Arrays.asList(AttributableType.values()));\n-                mappingTypesPanel.setStyleSheet(defFieldStyle);\n-\n-                item.add(mappingTypesPanel);\n-\n-                mappingTypesPanel.getField().add(new AjaxFormComponentUpdatingBehavior(onchange) {\n+                final AjaxDropDownChoicePanel entitiesPanel = new AjaxDropDownChoicePanel(\"entities\",\n+                        new ResourceModel(\"entities\", \"entities\").getObject(), new Model(entity));\n+                entitiesPanel.setChoices(attrType == AttributableType.ROLE\n+                        ? Collections.singletonList(AttributableType.ROLE)\n+                        : Arrays.asList(AttributableType.values()));\n+                entitiesPanel.setStyleSheet(DEF_FIELD_STYLE);\n+                entitiesPanel.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n                     private static final long serialVersionUID = -1107858522700306810L;\n \n                     @Override\n                     protected void onUpdate(final AjaxRequestTarget target) {\n-\n-                        attrTypes = getAttributeTypes((AttributableType) mappingTypesPanel.getModelObject());\n-\n+                        attrTypes.clear();\n+                        attrTypes.addAll(getAttributeTypes((AttributableType) entitiesPanel.getModelObject()));\n                         typesPanel.setChoices(attrTypes);\n-                        List<String> emptyList = Collections.emptyList();\n-                        intAttrNames.setChoices(emptyList);\n+\n+                        intAttrNames.setChoices(Collections.<String>emptyList());\n \n                         target.add(typesPanel.getField());\n                         target.add(intAttrNames.getField());\n-\n                     }\n                 });\n+                item.add(entitiesPanel);\n \n                 final FieldPanel extAttrName;\n-\n                 if (schemaNames.isEmpty()) {\n                     extAttrName = new AjaxTextFieldPanel(\"extAttrName\", new ResourceModel(\"extAttrNames\",\n                             \"extAttrNames\").getObject(), new PropertyModel<String>(mapItem, \"extAttrName\"));\n-\n                 } else {\n                     extAttrName = new AjaxDropDownChoicePanel<String>(\"extAttrName\", new ResourceModel(\"extAttrNames\",\n                             \"extAttrNames\").getObject(), new PropertyModel(mapItem, \"extAttrName\"));\n                     ((AjaxDropDownChoicePanel) extAttrName).setChoices(schemaNames);\n                 }\n-\n                 boolean required = false;\n                 if (mapItem != null && !mapItem.isAccountid() && !mapItem.isPassword()) {\n                     required = true;\n                 }\n-\n-\n                 extAttrName.setRequired(required);\n                 extAttrName.setEnabled(required);\n-\n-                extAttrName.setStyleSheet(fieldStyle);\n+                extAttrName.setStyleSheet(FIELD_STYLE);\n                 item.add(extAttrName);\n \n                 final AjaxTextFieldPanel mandatory = new AjaxTextFieldPanel(\"mandatoryCondition\", new ResourceModel(\n                         \"mandatoryCondition\", \"mandatoryCondition\").getObject(), new PropertyModel(mapItem,\n                         \"mandatoryCondition\"));\n-\n                 mandatory.setChoices(Arrays.asList(new String[]{\"true\", \"false\"}));\n-\n-                mandatory.setStyleSheet(shortFieldStyle);\n-\n+                mandatory.setStyleSheet(SHORT_FIELD_STYLE);\n                 item.add(mandatory);\n \n                 final AjaxCheckBoxPanel accountId = new AjaxCheckBoxPanel(\"accountId\", new ResourceModel(\"accountId\",\n                         \"accountId\").getObject(), new PropertyModel(mapItem, \"accountid\"));\n-\n-                accountId.getField().add(new AjaxFormComponentUpdatingBehavior(onchange) {\n+                accountId.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n                     private static final long serialVersionUID = -1107858522700306810L;\n \n@@ -356,13 +356,11 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         target.add(extAttrName);\n                     }\n                 });\n-\n                 item.add(accountId);\n \n-                final AjaxCheckBoxPanel password = new AjaxCheckBoxPanel(\"password\", new ResourceModel(\"password\",\n-                        \"password\").getObject(), new PropertyModel(mapItem, \"password\"));\n-\n-                password.getField().add(new AjaxFormComponentUpdatingBehavior(onchange) {\n+                final AjaxCheckBoxPanel password = new AjaxCheckBoxPanel(\"password\",\n+                        new ResourceModel(\"password\", \"password\").getObject(), new PropertyModel(mapItem, \"password\"));\n+                password.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n                     private static final long serialVersionUID = -1107858522700306810L;\n \n@@ -377,10 +375,12 @@ protected void onUpdate(final AjaxRequestTarget target) {\n                         target.add(accountId);\n                     }\n                 });\n-\n                 item.add(password);\n+                if (AttributableType.USER != ResourceMappingPanel.this.attrType) {\n+                    password.setVisible(false);\n+                }\n \n-                typesPanel.getField().add(new AjaxFormComponentUpdatingBehavior(onchange) {\n+                typesPanel.getField().add(new AjaxFormComponentUpdatingBehavior(ON_CHANGE) {\n \n                     private static final long serialVersionUID = -1107858522700306810L;\n \n@@ -402,37 +402,24 @@ protected void onUpdate(final AjaxRequestTarget target) {\n         mappings.setReuseItems(true);\n         mappingContainer.add(mappings);\n \n-        addMappingBtn = new IndicatingAjaxButton(\"addUserSchemaMappingBtn\", new ResourceModel(\"add\")) {\n+        addMappingBtn = new IndicatingAjaxButton(\"addMappingBtn\", new ResourceModel(\"add\")) {\n \n             private static final long serialVersionUID = -4804368561204623354L;\n \n             @Override\n             protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {\n-                resourceTO.getUmapping().getItems().add(new MappingItemTO());\n-                target.add(mappingContainer);\n+                getMapping().getItems().add(new MappingItemTO());\n+                target.add(ResourceMappingPanel.this);\n             }\n \n             @Override\n             protected void onError(final AjaxRequestTarget target, final Form<?> form) {\n                 // ignore errors\n             }\n         };\n-\n         addMappingBtn.setDefaultFormProcessing(false);\n-        addMappingBtn.setEnabled(resourceTO.getConnectorId() != null && resourceTO.getConnectorId() > 0);\n+        addMappingBtn.setEnabled(this.resourceTO.getConnectorId() != null && this.resourceTO.getConnectorId() > 0);\n         mappingContainer.add(addMappingBtn);\n-\n-    }\n-\n-    /**\n-     * Initialize resource schema names.\n-     */\n-    private void initResourceSchemaNames() {\n-        if (resourceTO != null && resourceTO.getConnectorId() != null && resourceTO.getConnectorId() > 0) {\n-            schemaNames = getResourceSchemaNames(resourceTO.getConnectorId(), resourceTO.getConnConfProperties());\n-        } else {\n-            schemaNames = Collections.emptyList();\n-        }\n     }\n \n     /**\n@@ -446,13 +433,11 @@ private List<String> getResourceSchemaNames(final Long connectorId, final Set<Co\n         final List<String> names = new ArrayList<String>();\n \n         try {\n-\n             final ConnInstanceTO connInstanceTO = new ConnInstanceTO();\n             connInstanceTO.setId(connectorId);\n             connInstanceTO.setConfiguration(conf);\n \n             names.addAll(connRestClient.getSchemaNames(connInstanceTO));\n-\n         } catch (Exception e) {\n             LOG.warn(\"Error retrieving resource schema names\", e);\n         }\n@@ -462,9 +447,7 @@ private List<String> getResourceSchemaNames(final Long connectorId, final Set<Co\n \n     @Override\n     public void onEvent(final IEvent<?> event) {\n-\n         if (event.getPayload() instanceof ConnConfModEvent) {\n-\n             final AjaxRequestTarget target = ((ConnConfModEvent) event.getPayload()).getTarget();\n \n             final List<ConnConfProperty> conf = ((ConnConfModEvent) event.getPayload()).getConfiguration();\n@@ -473,9 +456,11 @@ public void onEvent(final IEvent<?> event) {\n \n             addMappingBtn.setEnabled(resourceTO.getConnectorId() != null && resourceTO.getConnectorId() > 0);\n \n-            schemaNames = getResourceSchemaNames(resourceTO.getConnectorId(), new HashSet<ConnConfProperty>(conf));\n+            schemaNames.clear();\n+            schemaNames.addAll(\n+                    getResourceSchemaNames(resourceTO.getConnectorId(), new HashSet<ConnConfProperty>(conf)));\n \n-            target.add(mappingContainer);\n+            target.add(this);\n         }\n     }\n \n@@ -517,6 +502,8 @@ private void setAttrNames(final IntMappingType type, final AjaxDropDownChoicePan\n                 case UserId:\n                 case Password:\n                 case Username:\n+                case RoleId:\n+                case RoleName:\n                 default:\n                     toBeUpdated.setRequired(false);\n                     toBeUpdated.setEnabled(false);"},{"sha":"ff9bb1f4af07858cd9effde91e924f3c669614a5","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/ResourceSecurityPanel.java","status":"modified","additions":13,"deletions":12,"changes":25,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceSecurityPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceSecurityPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceSecurityPanel.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -21,6 +21,11 @@\n import java.util.ArrayList;\n import java.util.HashMap;\n import java.util.Map;\n+import org.apache.syncope.client.to.PolicyTO;\n+import org.apache.syncope.client.to.ResourceTO;\n+import org.apache.syncope.console.rest.PolicyRestClient;\n+import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n+import org.apache.syncope.types.PolicyType;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n@@ -32,29 +37,24 @@\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.apache.syncope.client.to.PolicyTO;\n-import org.apache.syncope.client.to.ResourceTO;\n-import org.apache.syncope.console.rest.PolicyRestClient;\n-import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n-import org.apache.syncope.types.PolicyType;\n \n public class ResourceSecurityPanel extends Panel {\n \n     /**\n      * Logger.\n      */\n-    protected static final Logger LOG = LoggerFactory.getLogger(ResourceSecurityPanel.class);\n+    private static final Logger LOG = LoggerFactory.getLogger(ResourceSecurityPanel.class);\n \n     private static final long serialVersionUID = -7982691107029848579L;\n \n     @SpringBean\n     private PolicyRestClient policyRestClient;\n \n-    IModel<Map<Long, String>> passwordPolicies = null;\n+    private IModel<Map<Long, String>> passwordPolicies = null;\n \n-    IModel<Map<Long, String>> accountPolicies = null;\n+    private IModel<Map<Long, String>> accountPolicies = null;\n \n-    IModel<Map<Long, String>> syncPolicies = null;\n+    private IModel<Map<Long, String>> syncPolicies = null;\n \n     public ResourceSecurityPanel(final String id, final ResourceTO resourceTO) {\n \n@@ -114,7 +114,7 @@ protected Map<Long, String> load() {\n         // -------------------------------\n         final AjaxDropDownChoicePanel<Long> passwordPolicy = new AjaxDropDownChoicePanel<Long>(\"passwordPolicy\",\n                 new ResourceModel(\"passwordPolicy\", \"passwordPolicy\").getObject(), new PropertyModel<Long>(resourceTO,\n-                        \"passwordPolicy\"));\n+                \"passwordPolicy\"));\n \n         passwordPolicy.setChoiceRenderer(new PolicyRenderer(PolicyType.PASSWORD));\n \n@@ -130,7 +130,7 @@ protected Map<Long, String> load() {\n         // -------------------------------\n         final AjaxDropDownChoicePanel<Long> accountPolicy = new AjaxDropDownChoicePanel<Long>(\"accountPolicy\",\n                 new ResourceModel(\"accountPolicy\", \"accountPolicy\").getObject(), new PropertyModel<Long>(resourceTO,\n-                        \"accountPolicy\"));\n+                \"accountPolicy\"));\n \n         accountPolicy.setChoiceRenderer(new PolicyRenderer(PolicyType.ACCOUNT));\n \n@@ -145,7 +145,8 @@ protected Map<Long, String> load() {\n         // Sync policy specification\n         // -------------------------------\n         final AjaxDropDownChoicePanel<Long> syncPolicy = new AjaxDropDownChoicePanel<Long>(\"syncPolicy\",\n-                new ResourceModel(\"syncPolicy\", \"syncPolicy\").getObject(), new PropertyModel<Long>(resourceTO, \"syncPolicy\"));\n+                new ResourceModel(\"syncPolicy\", \"syncPolicy\").getObject(), new PropertyModel<Long>(resourceTO,\n+                \"syncPolicy\"));\n \n         syncPolicy.setChoiceRenderer(new PolicyRenderer(PolicyType.SYNC));\n "},{"sha":"39a8b75003303ddbcd66a814582abe09a12ac4eb","filename":"console/src/main/java/org/apache/syncope/console/pages/panels/RoleSecurityPanel.java","status":"modified","additions":8,"deletions":9,"changes":17,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSecurityPanel.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSecurityPanel.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FRoleSecurityPanel.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -21,6 +21,12 @@\n import java.util.ArrayList;\n import java.util.HashMap;\n import java.util.Map;\n+import org.apache.syncope.client.to.AbstractAttributableTO;\n+import org.apache.syncope.client.to.PolicyTO;\n+import org.apache.syncope.console.rest.PolicyRestClient;\n+import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n+import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n+import org.apache.syncope.types.PolicyType;\n import org.apache.wicket.ajax.AjaxRequestTarget;\n import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;\n import org.apache.wicket.markup.html.WebMarkupContainer;\n@@ -33,12 +39,6 @@\n import org.apache.wicket.spring.injection.annot.SpringBean;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import org.apache.syncope.client.to.AbstractAttributableTO;\n-import org.apache.syncope.client.to.PolicyTO;\n-import org.apache.syncope.console.rest.PolicyRestClient;\n-import org.apache.syncope.console.wicket.markup.html.form.AjaxCheckBoxPanel;\n-import org.apache.syncope.console.wicket.markup.html.form.AjaxDropDownChoicePanel;\n-import org.apache.syncope.types.PolicyType;\n \n public class RoleSecurityPanel extends Panel {\n \n@@ -52,12 +52,11 @@ public class RoleSecurityPanel extends Panel {\n     @SpringBean\n     private PolicyRestClient policyRestClient;\n \n-    IModel<Map<Long, String>> passwordPolicies = null;\n+    private IModel<Map<Long, String>> passwordPolicies = null;\n \n-    IModel<Map<Long, String>> accountPolicies = null;\n+    private IModel<Map<Long, String>> accountPolicies = null;\n \n     public <T extends AbstractAttributableTO> RoleSecurityPanel(final String id, final T entityTO) {\n-\n         super(id);\n \n         setOutputMarkupId(true);"},{"sha":"469d653649974621164ba880b0efeeabf33f8f45","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.html","status":"modified","additions":7,"deletions":5,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.html?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -49,21 +49,23 @@\n       <div id=\"tabs\">\n         <ul>\n           <li  class=\"tabs-selected\"><a href=\"#resource\"><span><wicket:message key=\"resource\"/></span></a></li>\n-          <li><a href=\"#mappings\"><span><wicket:message key=\"mappings\"/></span></a></li>\n+          <li><a href=\"#umapping\"><span><wicket:message key=\"umapping\"/></span></a></li>\n+          <li><a href=\"#rmapping\"><span><wicket:message key=\"rmapping\"/></span></a></li>\n           <li><a href=\"#connectorProperties\"><span><wicket:message key=\"connectorProperties\"/></span></a></li>\n           <li><a href=\"#security\"><span><wicket:message key=\"security\"/></span></a></li>\n         </ul>\n         <div id=\"resource\">\n           <span wicket:id=\"details\">[details]</span>\n         </div>\n-        <div id=\"mappings\">\n-          <span wicket:id=\"mapping\">[mapping]</span>\n+        <div id=\"umapping\">\n+          <span wicket:id=\"umapping\">[umapping]</span>\n+        </div>\n+        <div id=\"rmapping\">\n+          <span wicket:id=\"rmapping\">[rmapping]</span>\n         </div>\n-\n         <div id=\"connectorProperties\">\n           <span wicket:id=\"connconf\">[connconf]</span>\n         </div>\n-\n         <div id=\"security\">\n           <span wicket:id=\"security\">[security]</span>\n         </div>"},{"sha":"3045981b5cf9232d85c5972911e8150c16b1839a","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage.properties","status":"modified","additions":6,"deletions":5,"changes":11,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage.properties?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -14,8 +14,8 @@\n # KIND, either express or implied.  See the License for the\n # specific language governing permissions and limitations\n # under the License.\n-resource=Resource Details\n-mappings=Schema Mappings\n+resource=Resource details\n+umapping=User mapping\n connectorProperties=Connector properties\n security=Security\n create_attribute=Create new resource\n@@ -25,7 +25,7 @@ existing_resources=Existing resources\n action=Action\n edit_attribute=Edit resource\n title=Resource\n-extAttrNames=External Attributes\n+extAttrNames=External attributes\n intMappingTypes=Internal mapping types\n entity=Entity\n roleSchema=Role Schema\n@@ -35,7 +35,7 @@ password=Password\n mappingUserSchema=Mapping User Schema\n mappingRoleSchema=Mapping Role Schema\n delete=Delete\n-intAttrNames=Internal Attributes\n+intAttrNames=Internal attributes\n enforceMandatoryCondition=Enforce mandatory condition\n fieldName=Field name\n \n@@ -50,9 +50,10 @@ deleteTraceLevel=Delete trace level\n syncTraceLevel=Synchronization trace level\n propagationPriority=Propagation priority\n propagationPrimary=Propagation primary\n-resetToken=Reset Token\n+resetToken=Reset token\n \n success_connection=Successful connection\n error_connection=Connection failure\n check=Check connection\n actionsClass=Actions class\n+rmapping=Role mapping"},{"sha":"7e0f1a59b8da66cadc8da7e849e687d1e4c275b1","filename":"console/src/main/resources/org/apache/syncope/console/pages/ResourceModalPage_it.properties","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResourceModalPage_it.properties?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -15,7 +15,7 @@\n # specific language governing permissions and limitations\n # under the License.\n resource=Dettagli Risorsa\n-mappings=Schema Mapping\n+umapping=Mapping utenti\n connectorProperties=Propriet\\u00e0\\u00a0 Connettore\n security=Sicurezza\n \n@@ -51,9 +51,10 @@ deleteTraceLevel=Livello di tracciamento delle cancellazioni\n syncTraceLevel=Livello di tracciamento delle sincronizzazioni\n propagationPriority=Priorit\\u00e0 in propagazione\n propagationPrimary=Primaria in propagazione\n-resetToken=Reset Token\n+resetToken=Reset token\n \n success_connection=Connessione avvenuta con successo\n error_connection=Connessione non riuscita\n check=Verifica connessione\n actionsClass=Classe azioni\n+rmapping=Mapping ruoli"},{"sha":"592e1ed0baae67bcdd6c2eeeb1e0ebbb619e1626","filename":"console/src/main/resources/org/apache/syncope/console/pages/Resources.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources.properties?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -29,3 +29,4 @@ edit=Edit\n delete=Delete\n create-connector=Create new connector\n delete_error=Operation forbidden:the connector you're trying to delete is connected to a Resource\n+connector=Connector"},{"sha":"c8e9df45e6074dd859e6e1883343ae68e19ad1a2","filename":"console/src/main/resources/org/apache/syncope/console/pages/Resources_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2FResources_it.properties?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -29,3 +29,4 @@ edit=Modifica\n delete=Elimina\n delete_error=Operazione vietata: il connettore che si desidera rimuovere \\u00e8 correlato ad una risorsa\n displayName=Nome visualizzato\n+connector=Connettore"},{"sha":"168017384cdf4646b9d96cb05dba0d540315a9ef","filename":"console/src/main/resources/org/apache/syncope/console/pages/panels/ResourceMappingPanel.html","status":"modified","additions":86,"deletions":96,"changes":182,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fapache%2Fsyncope%2Fconsole%2Fpages%2Fpanels%2FResourceMappingPanel.html?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -16,101 +16,91 @@\n specific language governing permissions and limitations\n under the License.\n -->\n-<html>\n-    <wicket:panel>\n-        <div id=\"formtable\">\n-            <div class=\"tablerow\">\n-                <div class=\"tablecolumn_field all_dynamicsize\">\n-                    <table id=\"mappingUserSchema\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n-                           wicket:id=\"mappingContainer\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th><wicket:message key=\"delete\"/></th>\n-                        <th><wicket:message key=\"entity\"/></th>\n-                        <th><wicket:message key=\"intMappingTypes\"/></th>\n-                        <th><wicket:message key=\"intAttrNames\"/></th>\n-                        <th><wicket:message key=\"extAttrNames\"/></th>\n-                        <th><wicket:message key=\"mandatoryCondition\"/></th>\n-                        <th><wicket:message key=\"accountId\"/></th>\n-                        <th><wicket:message key=\"password\"/></th>\n-                        </tr>\n-                        </thead>\n-                        <tfoot>\n-                            <tr>\n-                                <td colspan=\"7\" style=\"padding: 5px\">\n-                                    <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n-                                           wicket:id=\"addUserSchemaMappingBtn\" />\n-                                </td>\n-                            </tr>\n-                        </tfoot>\n-                        <tbody>\n-                            <tr wicket:id=\"mappings\">\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"mappingTypes\">[mappingTypes]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"intMappingTypes\">[intMappingTypes]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"intAttrNames\">[intAttrNames]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"extAttrName\">[extAttrName]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"mandatoryCondition\">[mandatoryCondition]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"accountId\">[accountId]</span>\n-                                </td>\n-                                <td align=\"center\" valign=\"middle\">\n-                                    <span wicket:id=\"password\">[password]</span>\n-                                </td>\n-                            </tr>\n-                        </tbody>\n-                    </table>\n-                </div>\n-            </div>\n+<wicket:panel>\n+  <div>\n+    <table id=\"mappings\"\n+           class=\"ui-widget ui-widget-content ui-corner-all\"\n+           style=\"font-size: 1em;margin-top:2px;\"\n+           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n+           wicket:id=\"mappingContainer\">\n+      <thead>\n+        <tr class=\"ui-widget-header\">\n+          <th><wicket:message key=\"delete\"/></th>\n+      <th><wicket:message key=\"entity\"/></th>\n+      <th><wicket:message key=\"intMappingTypes\"/></th>\n+      <th><wicket:message key=\"intAttrNames\"/></th>\n+      <th><wicket:message key=\"extAttrNames\"/></th>\n+      <th><wicket:message key=\"mandatoryCondition\"/></th>\n+      <th><wicket:message key=\"accountId\"/></th>\n+      <th><label wicket:id=\"passwordLabel\"/></th>\n+      </tr>\n+      </thead>\n+      <tfoot>\n+        <tr>\n+          <td colspan=\"7\" style=\"padding: 5px\">\n+            <input type=\"submit\" class=\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\"\n+                   wicket:id=\"addMappingBtn\" />\n+          </td>\n+        </tr>\n+      </tfoot>\n+      <tbody>\n+        <tr wicket:id=\"mappings\" class=\"tablerow\">\n+          <td align=\"center\" valign=\"middle\">\n+            <input type=\"checkbox\" class=\"text ui-widget-content ui-corner-all\"  wicket:id=\"toRemove\"/>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"entities\">[entities]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"intMappingTypes\">[intMappingTypes]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"intAttrNames\">[intAttrNames]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"extAttrName\">[extAttrName]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"mandatoryCondition\">[mandatoryCondition]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"accountId\">[accountId]</span>\n+          </td>\n+          <td align=\"center\" valign=\"middle\">\n+            <span wicket:id=\"password\">[password]</span>\n+          </td>\n+        </tr>\n+      </tbody>\n+    </table>\n \n-            <div class=\"tablerow\">\n-                <div class=\"tablecolumn_field all_dynamicsize\">\n-                    <table id=\"accountLinkTable\"\n-                           class=\"ui-widget ui-widget-content ui-corner-all\"\n-                           style=\"font-size: 1em;margin-top:2px;\"\n-                           border-width=\"1px;\" border-color=\"#cccccc;\" border-style=\"solid;\"\n-                           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n-                           wicket:id=\"accountLinkContainer\">\n-                        <thead>\n-                            <tr class=\"ui-widget-header\">\n-                                <th width=\"10%\" align=\"left\"><wicket:message key=\"enable\"/></th>\n-                                <th align=\"left\"><wicket:message key=\"accountLink\"/></th>\n-                            </tr>\n-                        </thead>\n-                        <tbody>\n-                            <tr>\n-                                <td width=\"10%\" align=\"left\" valign=\"middle\">\n-                                    <span wicket:id=\"accountLinkCheckbox\">[accountLinkCheckbox]</span>\n-                                </td>\n-                                <td align=\"left\" valign=\"middle\">\n-                                    <span wicket:id=\"accountLink\">[accountLink]</span>\n-                                </td>\n-                            </tr>\n-                        </tbody>\n-                    </table>\n-                </div>\n-            </div>\n-        </div>\n+    <script type=\"text/javascript\">\n+      $(function() {\n+        $('table#mappings tbody tr.tablerow:even').addClass(\"alt\");\n+      });\n+    </script>\n \n-        <script type=\"text/javascript\">\n-            $(function() {\n-                $('div#mappings div#formtable div.tablerow:even').addClass(\"alt\");\n-            });\n-        </script>\n-    </wicket:panel>\n-</html>\n+    <table id=\"accountLinkTable\"\n+           class=\"ui-widget ui-widget-content ui-corner-all\"\n+           style=\"font-size: 1em;margin-top:2px;\"\n+           border-width=\"1px;\" border-color=\"#cccccc;\" border-style=\"solid;\"\n+           width=\"100%\" cellpadding=\"2px\" cellspacing=\"1px\"\n+           wicket:id=\"accountLinkContainer\">\n+      <thead>\n+        <tr class=\"ui-widget-header\">\n+          <th width=\"10%\" align=\"left\"><wicket:message key=\"enable\"/></th>\n+      <th align=\"left\"><wicket:message key=\"accountLink\"/></th>\n+      </tr>\n+      </thead>\n+      <tbody>\n+        <tr>\n+          <td width=\"10%\" align=\"left\" valign=\"middle\">\n+            <span wicket:id=\"accountLinkCheckbox\">[accountLinkCheckbox]</span>\n+          </td>\n+          <td align=\"left\" valign=\"middle\">\n+            <span wicket:id=\"accountLink\">[accountLink]</span>\n+          </td>\n+        </tr>\n+      </tbody>\n+    </table>\n+  </div>\n+</wicket:panel>"},{"sha":"aaf888aa42688a5ac85ab3ab8ad6938ca3bc1c3e","filename":"console/src/main/webapp/css/fieldstyle.css","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Ffieldstyle.css","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Ffieldstyle.css","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2Fcss%2Ffieldstyle.css?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -49,7 +49,7 @@ div.tablerow {\n   width: 100%;\n }\n \n-div.alt {\n+.alt {\n   background: #eff3ea;\n }\n \n@@ -112,4 +112,4 @@ div.tablecolumn_check{\n   zoom: 1; \n   overflow: visible; \n   padding: 7px 15px;\n-}\n\\ No newline at end of file\n+}"},{"sha":"9ca081b692d40b7525fcf9d7301295754430f388","filename":"console/src/test/java/org/apache/syncope/console/ResourceTestITCase.java","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FResourceTestITCase.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FResourceTestITCase.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fsyncope%2Fconsole%2FResourceTestITCase.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -42,7 +42,7 @@ public void browseEditModal() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n \n-        selenium.click(\"//td[4]/div/span[8]/a\");\n+        selenium.click(\"//td[5]/div/span[8]/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//form/div[2]/div/span/div/div/div/label[text()='Name']\\\");\", \"30000\");\n@@ -64,7 +64,7 @@ public void delete() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n \n-        selenium.click(\"//tr[3]/td[4]/div/span[10]/a\");\n+        selenium.click(\"//tr[3]/td[5]/div/span[10]/a\");\n \n         assertTrue(selenium.getConfirmation().matches(\"^Do you really want to delete the selected item[\\\\s\\\\S]$\"));\n     }\n@@ -75,7 +75,7 @@ public void checkSecurityTab() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n \n-        selenium.click(\"//td[4]/div/span[8]/a\");\n+        selenium.click(\"//td[5]/div/span[8]/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//form/div[2]/div/span/div/div/div/label[text()='Name']\\\");\", \"30000\");\n@@ -97,7 +97,7 @@ public void checkConnection() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\\\"//div[@id='tabs']\\\");\", \"30000\");\n \n-        selenium.click(\"//*[@id=\\\"users-contain\\\"]//*[div=\\\"ws-target-resource-delete\\\"]/../td[4]/div/span[8]/a\");\n+        selenium.click(\"//*[@id=\\\"users-contain\\\"]//*[div=\\\"ws-target-resource-delete\\\"]/../td[5]/div/span[8]/a\");\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\"\n                 + \"\\\"//form/div[2]/div/span/div/div/div/label[text()='Name']\\\");\", \"30000\");\n@@ -106,7 +106,7 @@ public void checkConnection() {\n \n         selenium.waitForCondition(\"selenium.isElementPresent(\" + \"\\\"//span[text()='endpoint']\\\");\", \"30000\");\n \n-        selenium.click(\"//div[2]/form/div[2]/div[3]/span/span/div[2]/a/img\");\n+        selenium.click(\"//div[2]/form/div[2]/div[4]/span/span/div[2]/a\");\n \n         selenium.waitForCondition(\n                 \"selenium.isElementPresent(\\\"//div/ul/li/span[contains(text(), 'Successful connection')]\\\");\", \"30000\");"},{"sha":"869174ec2b8fdfdac55e9a477537f6f490c114aa","filename":"console/src/test/resources/configuration.properties","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Ftest%2Fresources%2Fconfiguration.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/console%2Fsrc%2Ftest%2Fresources%2Fconfiguration.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Ftest%2Fresources%2Fconfiguration.properties?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -17,4 +17,4 @@\n scheme=http\n host=localhost\n port=9080\n-path=/syncope/rest/\n+rootPath=/syncope/rest/"},{"sha":"8aa8e77a14ee69df891ca83d4f7ddc883f71b130","filename":"core/src/main/java/org/apache/syncope/core/propagation/ConnectorFacadeProxy.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnectorFacadeProxy.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnectorFacadeProxy.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Fpropagation%2FConnectorFacadeProxy.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -454,8 +454,8 @@ public Set<Attribute> getObjectAttributes(final ObjectClass objectClass, final U\n     /**\n      * Return resource schema names.\n      *\n-     * @param showall return __NAME__ and __PASSWORD__ attribute if true.\n-     * @return a list of schema names.\n+     * @param showall return special attributes (like as __NAME__ or __PASSWORD__) if true\n+     * @return a list of schema names\n      */\n     public Set<String> getSchema(final boolean showall) {\n         final Set<String> resourceSchemaNames = new HashSet<String>();"},{"sha":"bd21ef60fd70abc5d98063e13dc39a35f1134398","filename":"core/src/main/java/org/apache/syncope/core/rest/controller/ConnInstanceController.java","status":"modified","additions":9,"deletions":13,"changes":22,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/32a8c4df0c65ec1e9109c7dbd83fad523c2725df/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fsyncope%2Fcore%2Frest%2Fcontroller%2FConnInstanceController.java?ref=32a8c4df0c65ec1e9109c7dbd83fad523c2725df","patch":"@@ -322,22 +322,18 @@ public List<String> getSchemaNames(final HttpServletResponse response,\n         }\n \n         // consider the possibility to receive overridden properties only\n-        final Set<ConnConfProperty> conf = mergeConnConfProperties(connectorTO.getConfiguration(), connInstance.\n-                getConfiguration());\n-\n-        // We cannot use Spring bean because this method could be used during\n-        // resource definition or modification: bean couldn't exist or bean\n-        // couldn't be updated.\n-        // This is the reason why we should take a \"not mature\" connector\n-        // facade proxy to ask for schema names.\n-\n-        final List<String> result = new ArrayList<String>(connLoader.createConnectorBean(connInstance, conf).getSchema(\n-                showall));\n-\n+        final Set<ConnConfProperty> conf = mergeConnConfProperties(connectorTO.getConfiguration(),\n+                connInstance.getConfiguration());\n+\n+        // We cannot use Spring bean because this method could be used during resource definition or modification: \n+        // bean couldn't exist or couldn't be updated.\n+        // This is the reason why we should take a \"not mature\" connector facade proxy to ask for schema names.\n+        final List<String> result = new ArrayList<String>(connLoader.createConnectorBean(connInstance, conf).\n+                getSchema(showall));\n         Collections.sort(result);\n \n         auditManager.audit(Category.connector, ConnectorSubCategory.getSchemaNames, Result.success,\n-                \"Successfully listed all schema names (\" + result.size() + \") for connector \"\n+                \"Successfully listed \" + (showall ? \"all \" : \"\") + \"schema names (\" + result.size() + \") for connector \"\n                 + connInstance.getDisplayName());\n \n         return result;"}]}