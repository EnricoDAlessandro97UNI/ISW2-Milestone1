{"sha":"56883437c0066fc74f899b3e9a8205e0e9e9fd17","node_id":"MDY6Q29tbWl0NjM2ODc5MDYyOjU2ODgzNDM3YzAwNjZmYzc0Zjg5OWIzZTlhODIwNWUwZTllOWZkMTc=","commit":{"author":{"name":"Unknown","email":"unknown@apache.org","date":"2010-11-15T10:12:50Z"},"committer":{"name":"Unknown","email":"unknown@apache.org","date":"2010-11-15T10:12:50Z"},"message":"Wicket session timeout added\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/syncope/trunk@1246633 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"82702b11c82095d2b5d64fda46b83f8a393833f7","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/trees/82702b11c82095d2b5d64fda46b83f8a393833f7"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/git/commits/56883437c0066fc74f899b3e9a8205e0e9e9fd17","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/56883437c0066fc74f899b3e9a8205e0e9e9fd17","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/56883437c0066fc74f899b3e9a8205e0e9e9fd17","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/56883437c0066fc74f899b3e9a8205e0e9e9fd17/comments","author":null,"committer":null,"parents":[{"sha":"d430f07cd608e458ae4ec7357686baad4e941f32","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/commits/d430f07cd608e458ae4ec7357686baad4e941f32","html_url":"https://github.com/EnricoDAlessandro97UNI/syncope/commit/d430f07cd608e458ae4ec7357686baad4e941f32"}],"stats":{"total":37,"additions":28,"deletions":9},"files":[{"sha":"16101c9d07114e955657642a549cbb187a0b0430","filename":"console/src/main/java/org/syncope/console/SyncopeApplication.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.java?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -51,9 +51,7 @@ protected void init()\n         file = getServletContext().getInitParameter(\"authenticationFile\");\n         addComponentInstantiationListener(new SpringComponentInjector(this));\n         getResourceSettings().setThrowExceptionOnMissingResource( true );\n-\n-        /*getExceptionSettings().setUnexpectedExceptionDisplay(IExceptionSettings.\n-                SHOW_INTERNAL_ERROR_PAGE);*/\n+     \n     }\n \n     /**\n@@ -71,7 +69,7 @@ public Session newSession( Request request, Response response )\n         {\n             session.setUser( user );\n         }\n-\n+        \n         return session;\n     }\n "},{"sha":"0fca77e53dbf39bae8f1b91ee6c89f8a1b9a8c22","filename":"console/src/main/java/org/syncope/console/SyncopeRequestCycle.java","status":"modified","additions":18,"deletions":3,"changes":21,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycle.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycle.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2FSyncopeRequestCycle.java?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -20,6 +20,7 @@\n import org.apache.wicket.Response;\n import org.apache.wicket.markup.html.pages.ExceptionErrorPage;\n import org.apache.wicket.model.StringResourceModel;\n+import org.apache.wicket.protocol.http.PageExpiredException;\n import org.apache.wicket.protocol.http.WebApplication;\n import org.apache.wicket.protocol.http.WebRequest;\n import org.apache.wicket.protocol.http.WebRequestCycle;\n@@ -49,9 +50,23 @@ public SyncopeRequestCycle(final WebApplication application,\n \t@Override\n \tpublic final Page onRuntimeException(final Page cause,\n                 final RuntimeException e) {\n-            //TODO : Log the exception\n+            //TODO : Log the exceptions\n \n-            if(e.getCause().getCause() instanceof RestClientException) {\n+            if(e instanceof PageExpiredException) {\n+                PageParameters errorParameters = new PageParameters();\n+\n+                errorParameters.add(\"errorTitle\",\n+                        new StringResourceModel(\"alert\", null).getString());\n+\n+                errorParameters.add(\"errorMessage\",\n+                        new StringResourceModel(\"pageExpiredException\", null)\n+                        .getString());\n+\n+                return new ErrorPage(errorParameters);\n+            }\n+\n+            else if(e.getCause().getCause() instanceof RestClientException) {\n+                \n                 PageParameters errorParameters = new PageParameters();\n \n                 errorParameters.add(\"errorTitle\",\n@@ -63,7 +78,7 @@ public final Page onRuntimeException(final Page cause,\n \n                 return new ErrorPage(errorParameters);\n             }\n-            //Default Wicket error page\n+            //Redirect to default Wicket error page\n             else return new ExceptionErrorPage(e, cause);\n \t}\n }"},{"sha":"e003f6607c33779a215be744ae4f6f3313a6235e","filename":"console/src/main/java/org/syncope/console/pages/ErrorPage.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fjava%2Forg%2Fsyncope%2Fconsole%2Fpages%2FErrorPage.java?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -32,6 +32,6 @@ public ErrorPage(PageParameters parameters) {\n         add(new Label(\"errorMessage\",new Model<String>(\n                 parameters.getString(\"errorMessage\"))));\n \n-        add(new BookmarkablePageLink(\"home\", WelcomePage.class));\n+        add(new BookmarkablePageLink(\"home\", getApplication().getHomePage()));\n     }\n }"},{"sha":"08634b7647ab6aa5de11ab4e7e73cac822f24c34","filename":"console/src/main/resources/org/syncope/console/SyncopeApplication.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication.properties?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -11,5 +11,6 @@ schema=Schema\n operation_succeded=Operation executed successfully\n operation_error=Error occurred during the requested operation\n restClientException=Services connection error.\n+pageExpiredException=Session expired.Please login again.\n alert=Alert:\n confirmDelete=Do you really want to delete the selected item?"},{"sha":"e4a5d149b4856bd9a3755aad5b04d33252b38f36","filename":"console/src/main/resources/org/syncope/console/SyncopeApplication_it.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication_it.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication_it.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fresources%2Forg%2Fsyncope%2Fconsole%2FSyncopeApplication_it.properties?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -13,3 +13,4 @@ operation_error=Attenzione si \\u00E8 verificato un errore durante l'esecizione d\n restClientException=Errore di connessione ai servizi di Syncope.\n alert=Attenzione:\n confirmDelete=Vuoi davvero eliminare l'elemento selezionato?\n+pageExpiredException=La sessione \\u00E8 scaduta.Per favore effettuare di nuovo il login."},{"sha":"880c0cc15801ce654a1f55256085f2e1dd8c5d3c","filename":"console/src/main/webapp/WEB-INF/web.xml","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/EnricoDAlessandro97UNI/syncope/blob/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","raw_url":"https://github.com/EnricoDAlessandro97UNI/syncope/raw/56883437c0066fc74f899b3e9a8205e0e9e9fd17/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/syncope/contents/console%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fweb.xml?ref=56883437c0066fc74f899b3e9a8205e0e9e9fd17","patch":"@@ -12,7 +12,6 @@\n   See the License for the specific language governing permissions and\n   limitations under the License.\n -->\n-\n <web-app xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/javaee/web-app_2_4.xsd\"\n@@ -34,6 +33,11 @@\n         <url-pattern>/*</url-pattern>\n     </servlet-mapping>\n \n+    <!-- SESSION TIMEOUT (MINUTES)-->\n+    <session-config>\n+        <session-timeout>30</session-timeout>\n+    </session-config>\n+\n     <context-param>\n         <param-name>contextConfigLocation</param-name>\n         <param-value>/WEB-INF/classes/applicationContext.xml"}]}