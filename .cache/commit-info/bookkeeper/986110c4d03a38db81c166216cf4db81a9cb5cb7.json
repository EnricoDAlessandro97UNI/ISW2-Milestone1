{"sha":"986110c4d03a38db81c166216cf4db81a9cb5cb7","node_id":"MDY6Q29tbWl0NDc4NTkyNTI2Ojk4NjExMGM0ZDAzYTM4ZGI4MWMxNjYyMTZjZjRkYjgxYTljYjVjYjc=","commit":{"author":{"name":"Francesco Caliumi - Diennea","email":"francesco.caliumi@diennea.com","date":"2017-03-23T14:58:08Z"},"committer":{"name":"Sijie Guo","email":"sijie@apache.org","date":"2017-03-23T14:58:08Z"},"message":"BOOKKEEPER-1001: Make LocalBookiesRegistry.isLocalBookie() public\n\nAuthor: Francesco Caliumi - Diennea <francesco.caliumi@diennea.com>\n\nReviewers: Enrico Olivelli <eolivelli@gmail.com>, Venkateswararao Jujjuri (JV) <None>, Sijie Guo <sijie@apache.org>\n\nCloses #106 from caiok/BOOKKEEPER-1001","tree":{"sha":"b838e3e85d42cdd9b03894b20108951ae27a311e","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/trees/b838e3e85d42cdd9b03894b20108951ae27a311e"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/commits/986110c4d03a38db81c166216cf4db81a9cb5cb7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/986110c4d03a38db81c166216cf4db81a9cb5cb7","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/986110c4d03a38db81c166216cf4db81a9cb5cb7","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/986110c4d03a38db81c166216cf4db81a9cb5cb7/comments","author":{"login":"caliuf","id":10155161,"node_id":"MDQ6VXNlcjEwMTU1MTYx","avatar_url":"https://avatars.githubusercontent.com/u/10155161?v=4","gravatar_id":"","url":"https://api.github.com/users/caliuf","html_url":"https://github.com/caliuf","followers_url":"https://api.github.com/users/caliuf/followers","following_url":"https://api.github.com/users/caliuf/following{/other_user}","gists_url":"https://api.github.com/users/caliuf/gists{/gist_id}","starred_url":"https://api.github.com/users/caliuf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caliuf/subscriptions","organizations_url":"https://api.github.com/users/caliuf/orgs","repos_url":"https://api.github.com/users/caliuf/repos","events_url":"https://api.github.com/users/caliuf/events{/privacy}","received_events_url":"https://api.github.com/users/caliuf/received_events","type":"User","site_admin":false},"committer":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","site_admin":false},"parents":[{"sha":"3d3340be7d754af1738a117ee07e3bed04ec5547","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/3d3340be7d754af1738a117ee07e3bed04ec5547","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/3d3340be7d754af1738a117ee07e3bed04ec5547"}],"stats":{"total":63,"additions":61,"deletions":2},"files":[{"sha":"738ee48c6d8658bd1bd47cafc9269a60fc76d0f2","filename":"bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/LocalBookiesRegistry.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/986110c4d03a38db81c166216cf4db81a9cb5cb7/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fproto%2FLocalBookiesRegistry.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/986110c4d03a38db81c166216cf4db81a9cb5cb7/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fproto%2FLocalBookiesRegistry.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fproto%2FLocalBookiesRegistry.java?ref=986110c4d03a38db81c166216cf4db81a9cb5cb7","patch":"@@ -26,7 +26,7 @@\n /**\n  * Local registry for embedded Bookies\n  */\n-class LocalBookiesRegistry {\n+public class LocalBookiesRegistry {\n     \n     private final static ConcurrentHashMap<BookieSocketAddress,Boolean> localBookiesRegistry\n             = new ConcurrentHashMap<>();\n@@ -39,7 +39,7 @@ static void unregisterLocalBookieAddress(BookieSocketAddress address) {\n             localBookiesRegistry.remove(address);\n         }\n     }\n-    static boolean isLocalBookie(BookieSocketAddress address) {        \n+    public static boolean isLocalBookie(BookieSocketAddress address) {        \n         return localBookiesRegistry.containsKey(address);\n     }\n     "},{"sha":"25c5ff4d3a2047c326b891ff22299b58e4ab6e70","filename":"bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LocalBookiesRegistryTest.java","status":"added","additions":59,"deletions":0,"changes":59,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/986110c4d03a38db81c166216cf4db81a9cb5cb7/bookkeeper-server%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Ftest%2FLocalBookiesRegistryTest.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/986110c4d03a38db81c166216cf4db81a9cb5cb7/bookkeeper-server%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Ftest%2FLocalBookiesRegistryTest.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/bookkeeper-server%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Ftest%2FLocalBookiesRegistryTest.java?ref=986110c4d03a38db81c166216cf4db81a9cb5cb7","patch":"@@ -0,0 +1,59 @@\n+/**\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ *\n+ */\n+\n+package org.apache.bookkeeper.test;\n+\n+import org.apache.bookkeeper.client.BookKeeper;\n+import org.apache.bookkeeper.conf.ServerConfiguration;\n+import org.apache.bookkeeper.proto.BookieServer;\n+import org.apache.bookkeeper.proto.LocalBookiesRegistry;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import org.junit.Test;\n+\n+/**\n+ * Test the correctness and the availability outside of its package of LocalBookiesRegistryTest\n+ */\n+public class LocalBookiesRegistryTest extends BaseTestCase {\n+    \n+    @Override\n+    protected ServerConfiguration newServerConfiguration() throws Exception {\n+        return super\n+                .newServerConfiguration()\n+                .setDisableServerSocketBind(true)\n+                .setEnableLocalTransport(true);\n+    }\n+        \n+    BookKeeper.DigestType digestType;\n+    \n+    public LocalBookiesRegistryTest(BookKeeper.DigestType digestType) {\n+        super(3);\n+        this.digestType = digestType;\n+    }\n+\n+    @Test\n+    public void testAccessibleLocalBookiesRegistry() throws Exception {\n+        assertEquals(3,bs.size());\n+        for (BookieServer bk : bs) {\n+            assertTrue(LocalBookiesRegistry.isLocalBookie(bk.getLocalAddress()));\n+        }\n+    }\n+}"}]}