{"sha":"5531014ab1cf282d35d4d53db975192b853bf7a6","node_id":"MDY6Q29tbWl0NDc4NTkyNTI2OjU1MzEwMTRhYjFjZjI4MmQzNWQ0ZDUzZGI5NzUxOTJiODUzYmY3YTY=","commit":{"author":{"name":"Siddharth Boobna","email":"sboobna@yahoo-inc.com","date":"2017-05-09T21:07:45Z"},"committer":{"name":"Matteo Merli","email":"mmerli@apache.org","date":"2017-05-09T21:07:45Z"},"message":"BOOKKEEPER-1052: Print autorecovery enabled or not in bookie shell\n\nPrint the current status of auto-recovery, whether it's enabled or disabled.\n\nAuthor: Siddharth Boobna <sboobna@yahoo-inc.com>\n\nReviewers: Enrico Olivelli <None>\n\nCloses #142 from merlimat/autorecovery-enabled","tree":{"sha":"287e87a020c1d76b6c7e8ffdc7f3f52008cdb8c3","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/trees/287e87a020c1d76b6c7e8ffdc7f3f52008cdb8c3"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/commits/5531014ab1cf282d35d4d53db975192b853bf7a6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/5531014ab1cf282d35d4d53db975192b853bf7a6","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/5531014ab1cf282d35d4d53db975192b853bf7a6","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/5531014ab1cf282d35d4d53db975192b853bf7a6/comments","author":null,"committer":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","site_admin":false},"parents":[{"sha":"1a2e017b65812e6e50975213a365aa37eba9fa96","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/1a2e017b65812e6e50975213a365aa37eba9fa96","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/1a2e017b65812e6e50975213a365aa37eba9fa96"}],"stats":{"total":10,"additions":6,"deletions":4},"files":[{"sha":"84505d2856a58f28e5ff5ecb8ab645751f4cf9db","filename":"bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/5531014ab1cf282d35d4d53db975192b853bf7a6/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fbookie%2FBookieShell.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/5531014ab1cf282d35d4d53db975192b853bf7a6/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fbookie%2FBookieShell.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/bookkeeper-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fbookkeeper%2Fbookie%2FBookieShell.java?ref=5531014ab1cf282d35d4d53db975192b853bf7a6","patch":"@@ -1295,9 +1295,8 @@ int runCmd(CommandLine cmdLine) throws Exception {\n             boolean disable = cmdLine.hasOption(\"d\");\n             boolean enable = cmdLine.hasOption(\"e\");\n \n-            if ((!disable && !enable)\n-                || (enable && disable)) {\n-                LOG.error(\"One and only one of -enable and -disable must be specified\");\n+            if (enable && disable) {\n+                LOG.error(\"Only one of -enable and -disable can be specified\");\n                 printUsage();\n                 return 1;\n             }\n@@ -1309,7 +1308,10 @@ int runCmd(CommandLine cmdLine) throws Exception {\n                         .build();\n                 LedgerManagerFactory mFactory = LedgerManagerFactory.newLedgerManagerFactory(bkConf, zk);\n                 LedgerUnderreplicationManager underreplicationManager = mFactory.newLedgerUnderreplicationManager();\n-                if (enable) {\n+                if (!enable && !disable) {\n+                    boolean enabled = underreplicationManager.isLedgerReplicationEnabled();\n+                    System.out.println(\"Autorecovery is \" + (enabled ? \"enabled.\" : \"disabled.\"));\n+                } else if (enable) {\n                     if (underreplicationManager.isLedgerReplicationEnabled()) {\n                         LOG.warn(\"Autorecovery already enabled. Doing nothing\");\n                     } else {"}]}