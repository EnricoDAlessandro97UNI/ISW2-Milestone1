{"sha":"f27bf45e2643016742f997e3c467363cc3407be7","node_id":"MDY6Q29tbWl0NDc4NTkyNTI2OmYyN2JmNDVlMjY0MzAxNjc0MmY5OTdlM2M0NjczNjNjYzM0MDdiZTc=","commit":{"author":{"name":"Nicolò Boschi","email":"nicolo.boschi@diennea.com","date":"2017-07-26T11:00:06Z"},"committer":{"name":"Enrico Olivelli","email":"eolivelli@apache.org","date":"2017-07-26T11:00:06Z"},"message":"ISSUE #196: Create Jenkins configuration using OpenStack Jenkins Job Builder\n\nDescriptions of the changes in this PR:\n\nIntroduction of Jenkins Job Builder script, in order to have the configuration of Jenkins jobs directly stored in GIT repo.\nThis will enable reviews of Jenkins configuration\n\nAuthor: Nicolò Boschi <nicolo.boschi@diennea.com>\n\nReviewers: Enrico Olivelli <eolivelli@apache.org>, Sijie Guo <sijie@apache.org>\n\nThis closes #206 from nicoloboschi/JenkinsJobBuilder, closes #196","tree":{"sha":"a8f4591d5cc34aadf4a7762d164dcc375a70ddb9","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/trees/a8f4591d5cc34aadf4a7762d164dcc375a70ddb9"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/commits/f27bf45e2643016742f997e3c467363cc3407be7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/f27bf45e2643016742f997e3c467363cc3407be7","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/f27bf45e2643016742f997e3c467363cc3407be7","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/f27bf45e2643016742f997e3c467363cc3407be7/comments","author":null,"committer":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","site_admin":false},"parents":[{"sha":"313cfa66018836e8d6372b06c29ec551fca91e34","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/313cfa66018836e8d6372b06c29ec551fca91e34","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/313cfa66018836e8d6372b06c29ec551fca91e34"}],"stats":{"total":153,"additions":153,"deletions":0},"files":[{"sha":"f0e27f814007708e3ba89d25f728cbe322d5037e","filename":"jenkins/README.md","status":"added","additions":65,"deletions":0,"changes":65,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2FREADME.md","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2FREADME.md","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/jenkins%2FREADME.md?ref=f27bf45e2643016742f997e3c467363cc3407be7","patch":"@@ -0,0 +1,65 @@\n+<!--\n+   Licensed to the Apache Software Foundation (ASF) under one or more\n+   contributor license agreements.  See the NOTICE file distributed with\n+   this work for additional information regarding copyright ownership.\n+   The ASF licenses this file to You under the Apache License, Version 2.0\n+   (the \"License\"); you may not use this file except in compliance with\n+   the License.  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing, software\n+   distributed under the License is distributed on an \"AS IS\" BASIS,\n+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+   See the License for the specific language governing permissions and\n+   limitations under the License.\n+-->\n+\n+Instructions for build Jenkins bookkeeper-master job using Jenkins Job Builder\n+\n+\n+Requirements:\n+\n+* Unix System\n+* Jenkins Job Builder (see https://docs.openstack.org/infra/jenkins-job-builder/)\n+\n+\n+The jenkins folder contains:\n+\n+ - bookkeeper-master-job-configuration.yaml   (Jenkins job definition)\n+ - jenkins_jobs.ini   (Jenkins job builder configuration)\n+\n+\n+Build and install latest version of jenkins-job-builder;\n+\n+```\n+$ git clone https://git.openstack.org/openstack-infra/jenkins-job-builder\n+```\n+\n+```\n+$ python setup.py build\n+```\n+\n+```\n+$ python setup.py install --user\n+```\n+\n+How do I create job ?\n+\n+Get an username and an \"API Token\" for your Jenkins configuration\n+\n+In order to test jenkins job configuration, go to 'jenkins' directory and run:\n+\n+```\n+   $ jenkins-jobs test bookkeeper-master-job-configuration.yaml\n+```\n+\n+This will print the XML configuration of the job which will be deployed to your Jenkins\n+\n+ In order to apply the configuration and create the job, run:\n+\n+```\n+   $ jenkins-jobs --user USER --password API-TOKEN --conf jenkins_jobs.ini update bookkeeper-master-job-configuration.yaml\n+```\n+\n+By default the job will be deployed to builds.apache.org, you can change the destination in jenkins_jobs.ini\n\\ No newline at end of file"},{"sha":"ec83cbd33b8508eccbb996ce29edd7cd503a35c1","filename":"jenkins/bookkeeper-master-job-configuration.yaml","status":"added","additions":60,"deletions":0,"changes":60,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2Fbookkeeper-master-job-configuration.yaml","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2Fbookkeeper-master-job-configuration.yaml","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/jenkins%2Fbookkeeper-master-job-configuration.yaml?ref=f27bf45e2643016742f997e3c467363cc3407be7","patch":"@@ -0,0 +1,60 @@\n+\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+---\n+- scm:\n+    name: repo\n+    scm:\n+    - git:\n+        url: https://github.com/apache/bookkeeper.git\n+        branches:\n+        - \"*/master\"\n+- job:\n+    name: bookkeeper-master\n+    description: \"Nightly build for BookKeeper master.\\r\\nThis job is built using jenkins-jobs build scripts committed on BookKeeper repo.\\r\\n\\r\\nNo not edit manually this job\"\n+    project-type: maven\n+    jdk: \"JDK 1.8 (latest)\"\n+    node: Hadoop\n+    maven:\n+      root-pom: pom.xml\n+      goals: clean apache-rat:check package findbugs:check -Dmaven.test.failure.ignore=false deploy\n+      incremental-build: true\n+    reporters:\n+    - email:\n+        recipients: dev@bookkeeper.apache.org\n+    triggers:\n+    - timed: H 12 * * *\n+    wrappers:\n+    - timeout:\n+        type: likely-stuck\n+        write-description: true\n+    scm:\n+    - repo\n+    properties:\n+    - build-discarder:\n+        days-to-keep: 14\n+        num-to-keep: 5\n+        artifact-days-to-keep: -1\n+        artifact-num-to-keep: -1\n+    - throttle:\n+        enabled: false\n+        max-per-node: 0\n+        max-total: 0\n+        option: project\n+    -  rebuild:\n+        auto-rebuild: false\n+        rebuild-disabled: false\n\\ No newline at end of file"},{"sha":"6fbc8ea83beb9cd85890b26780fea25c4046d5f2","filename":"jenkins/jenkins_jobs.ini","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2Fjenkins_jobs.ini","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/f27bf45e2643016742f997e3c467363cc3407be7/jenkins%2Fjenkins_jobs.ini","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/jenkins%2Fjenkins_jobs.ini?ref=f27bf45e2643016742f997e3c467363cc3407be7","patch":"@@ -0,0 +1,28 @@\n+\n+;Licensed to the Apache Software Foundation (ASF) under one or more\n+;contributor license agreements.  See the NOTICE file distributed with\n+;this work for additional information regarding copyright ownership.\n+;The ASF licenses this file to You under the Apache License, Version 2.0\n+;(the \"License\"); you may not use this file except in compliance with\n+;the License.  You may obtain a copy of the License at\n+;    http://www.apache.org/licenses/LICENSE-2.0\n+;Unless required by applicable law or agreed to in writing, software\n+;distributed under the License is distributed on an \"AS IS\" BASIS,\n+;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+;See the License for the specific language governing permissions and\n+;limitations under the License.\n+\n+[job_builder]\n+ignore_cache=True\n+keep_descriptions=False\n+include_path=.:scripts:~/git/\n+recursive=False\n+exclude=.*:manual:./development\n+allow_duplicates=False\n+\n+[jenkins]\n+url=https://builds.apache.org\n+query_plugins_info=False\n+\n+\n+"}]}