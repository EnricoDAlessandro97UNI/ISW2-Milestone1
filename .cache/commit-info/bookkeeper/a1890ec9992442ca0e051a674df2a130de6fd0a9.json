{"sha":"a1890ec9992442ca0e051a674df2a130de6fd0a9","node_id":"MDY6Q29tbWl0NDc4NTkyNTI2OmExODkwZWM5OTkyNDQyY2EwZTA1MWE2NzRkZjJhMTMwZGU2ZmQwYTk=","commit":{"author":{"name":"jiazhai","email":"zhaijia03@gmail.com","date":"2016-09-07T08:38:27Z"},"committer":{"name":"Sijie Guo","email":"sijieg@twitter.com","date":"2016-09-07T08:38:27Z"},"message":"Mark some dl tests as flaky\n\nmark some dl tests as flaky and link the corresponding investigation jiras\n\nAuthor: jiazhai <zhaijia03@gmail.com>\n\nReviewers: Sijie Guo <sijie@apache.org>\n\nCloses #20 from jiazhai/zhaijia/fix_travis_build","tree":{"sha":"e627e19ea2d07638b437188ba72ca8e672622e37","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/trees/e627e19ea2d07638b437188ba72ca8e672622e37"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/commits/a1890ec9992442ca0e051a674df2a130de6fd0a9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/a1890ec9992442ca0e051a674df2a130de6fd0a9","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/a1890ec9992442ca0e051a674df2a130de6fd0a9","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/a1890ec9992442ca0e051a674df2a130de6fd0a9/comments","author":{"login":"zhaijack","id":26834121,"node_id":"MDQ6VXNlcjI2ODM0MTIx","avatar_url":"https://avatars.githubusercontent.com/u/26834121?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaijack","html_url":"https://github.com/zhaijack","followers_url":"https://api.github.com/users/zhaijack/followers","following_url":"https://api.github.com/users/zhaijack/following{/other_user}","gists_url":"https://api.github.com/users/zhaijack/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaijack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaijack/subscriptions","organizations_url":"https://api.github.com/users/zhaijack/orgs","repos_url":"https://api.github.com/users/zhaijack/repos","events_url":"https://api.github.com/users/zhaijack/events{/privacy}","received_events_url":"https://api.github.com/users/zhaijack/received_events","type":"User","site_admin":false},"committer":null,"parents":[{"sha":"18ad45fa87c18f362e93060922d6b25729d503ce","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/18ad45fa87c18f362e93060922d6b25729d503ce","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/18ad45fa87c18f362e93060922d6b25729d503ce"}],"stats":{"total":59,"additions":55,"deletions":4},"files":[{"sha":"8011a04e02e0d9d42a6ae9733d9fe243b8d6282a","filename":"src/test/java/com/twitter/distributedlog/TestAsyncReaderWriter.java","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderWriter.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderWriter.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderWriter.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -30,6 +30,7 @@\n \n import com.google.common.base.Optional;\n import com.google.common.collect.Lists;\n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import com.twitter.distributedlog.config.ConcurrentBaseConfiguration;\n import com.twitter.distributedlog.config.ConcurrentConstConfiguration;\n import com.twitter.distributedlog.config.DynamicDistributedLogConfiguration;\n@@ -44,6 +45,7 @@\n import org.apache.bookkeeper.client.LedgerMetadata;\n import org.apache.bookkeeper.feature.FixedValueFeature;\n import org.apache.bookkeeper.stats.NullStatsLogger;\n+import org.junit.Ignore;\n import org.junit.Rule;\n import org.junit.Test;\n import org.junit.rules.TestName;\n@@ -808,7 +810,10 @@ public void testSimpleAsyncReadWriteStartEmpty() throws Exception {\n \n     /**\n      * Test Case: starting reading when the streams don't exist.\n+     * {@link https://issues.apache.org/jira/browse/DL-42}\n      */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 120000)\n     public void testSimpleAsyncReadWriteStartEmptyFactory() throws Exception {\n         int count = 50;\n@@ -1478,7 +1483,9 @@ public void testReleaseLockAfterFailedToRecover() throws Exception {\n         dlm.close();\n     }\n \n-    @Test(timeout = 10000)\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n+    @Test(timeout = 60000)\n     public void testAsyncReadMissingZKNotification() throws Exception {\n         String name = \"distrlog-async-reader-missing-zk-notification\";\n         DistributedLogConfiguration confLocal = new DistributedLogConfiguration();"},{"sha":"1451814db2b80fa298ed984b1a22dbc17176523f","filename":"src/test/java/com/twitter/distributedlog/TestNonBlockingReads.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestNonBlockingReads.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestNonBlockingReads.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestNonBlockingReads.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -21,16 +21,23 @@\n import java.util.concurrent.ScheduledThreadPoolExecutor;\n import java.util.concurrent.TimeUnit;\n \n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import com.twitter.distributedlog.exceptions.IdleReaderException;\n import com.twitter.distributedlog.util.FutureUtils;\n import org.junit.Assert;\n+import org.junit.Ignore;\n import org.junit.Test;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n import static com.twitter.distributedlog.NonBlockingReadsTestUtil.*;\n import static org.junit.Assert.*;\n \n+/**\n+ * {@link https://issues.apache.org/jira/browse/DL-12}\n+ */\n+@DistributedLogAnnotations.FlakyTest\n+@Ignore\n public class TestNonBlockingReads extends TestDistributedLogBase {\n     static final Logger LOG = LoggerFactory.getLogger(TestNonBlockingReads.class);\n "},{"sha":"33effbc5b028a116d9a8402ef386c863bdfaf946","filename":"src/test/java/com/twitter/distributedlog/TestZooKeeperClient.java","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestZooKeeperClient.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestZooKeeperClient.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestZooKeeperClient.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -19,6 +19,7 @@\n \n import com.twitter.distributedlog.ZooKeeperClient.Credentials;\n import com.twitter.distributedlog.ZooKeeperClient.DigestCredentials;\n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import org.apache.bookkeeper.stats.NullStatsLogger;\n import org.apache.bookkeeper.zookeeper.BoundExponentialBackoffRetryPolicy;\n import org.apache.zookeeper.CreateMode;\n@@ -32,6 +33,7 @@\n import org.apache.zookeeper.data.Stat;\n import org.junit.After;\n import org.junit.Before;\n+import org.junit.Ignore;\n import org.junit.Test;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -249,6 +251,11 @@ public void process(WatchedEvent event) {\n         return connected;\n     }\n \n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-34}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     public void testAclAuthSpansExpiration() throws Exception {\n         ZooKeeperClient zkcAuth = buildAuthdClient(\"test\");\n@@ -267,6 +274,11 @@ public void testAclAuthSpansExpiration() throws Exception {\n         rmAll(zkcAuth, \"/test\");\n     }\n \n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-34}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     public void testAclAuthSpansExpirationNonRetryableClient() throws Exception {\n         ZooKeeperClient zkcAuth = clientBuilder().retryPolicy(null).zkAclId(\"test\").build();"},{"sha":"5e561694555496550d8ff5fd0359355073f4942a","filename":"src/test/java/com/twitter/distributedlog/admin/TestDistributedLogAdmin.java","status":"modified","additions":7,"deletions":1,"changes":8,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fadmin%2FTestDistributedLogAdmin.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fadmin%2FTestDistributedLogAdmin.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fadmin%2FTestDistributedLogAdmin.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -21,11 +21,13 @@\n import java.util.concurrent.TimeUnit;\n \n import com.twitter.distributedlog.DistributedLogConfiguration;\n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import com.twitter.distributedlog.util.Utils;\n import org.apache.zookeeper.CreateMode;\n import org.apache.zookeeper.ZooDefs;\n import org.junit.After;\n import org.junit.Before;\n+import org.junit.Ignore;\n import org.junit.Test;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n@@ -70,7 +72,11 @@ public void teardown() throws Exception {\n         zooKeeperClient.close();\n     }\n \n-\n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-44}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     @SuppressWarnings(\"deprecation\")\n     public void testChangeSequenceNumber() throws Exception {"},{"sha":"3628734b3425fae4d3446734d011334f7ff44c06","filename":"src/test/java/com/twitter/distributedlog/bk/TestLedgerAllocator.java","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fbk%2FTestLedgerAllocator.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fbk%2FTestLedgerAllocator.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Fbk%2FTestLedgerAllocator.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -19,6 +19,7 @@\n \n import com.twitter.distributedlog.BookKeeperClient;\n import com.twitter.distributedlog.BookKeeperClientBuilder;\n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import com.twitter.distributedlog.bk.SimpleLedgerAllocator.AllocationException;\n import com.twitter.distributedlog.bk.SimpleLedgerAllocator.Phase;\n import com.twitter.distributedlog.DistributedLogConfiguration;\n@@ -45,6 +46,7 @@\n import org.apache.zookeeper.data.Stat;\n import org.junit.After;\n import org.junit.Before;\n+import org.junit.Ignore;\n import org.junit.Rule;\n import org.junit.Test;\n import org.junit.rules.TestName;\n@@ -121,6 +123,11 @@ private SimpleLedgerAllocator createAllocator(String allocationPath,\n         return FutureUtils.result(SimpleLedgerAllocator.of(allocationPath, null, newQuorumConfigProvider(conf), zkc, bkc));\n     }\n \n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-43}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     public void testAllocation() throws Exception {\n         String allocationPath = \"/allocation1\";\n@@ -298,6 +305,11 @@ public void testCloseAllocatorDuringObtaining() throws Exception {\n                 dlConf.getBKDigestPW().getBytes(UTF_8));\n     }\n \n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-26}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     public void testCloseAllocatorAfterConfirm() throws Exception {\n         String allocationPath = \"/allocation2\";"},{"sha":"fc82b6e28d85fe1f97df0c06f923028f6c35086a","filename":"src/test/java/com/twitter/distributedlog/feature/TestDynamicConfigurationFeatureProvider.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Ffeature%2FTestDynamicConfigurationFeatureProvider.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Ffeature%2FTestDynamicConfigurationFeatureProvider.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2Ffeature%2FTestDynamicConfigurationFeatureProvider.java?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -18,9 +18,11 @@\n package com.twitter.distributedlog.feature;\n \n import com.twitter.distributedlog.DistributedLogConfiguration;\n+import com.twitter.distributedlog.annotations.DistributedLogAnnotations;\n import com.twitter.distributedlog.config.PropertiesWriter;\n import org.apache.bookkeeper.feature.Feature;\n import org.apache.bookkeeper.stats.NullStatsLogger;\n+import org.junit.Ignore;\n import org.junit.Test;\n \n import static org.junit.Assert.*;\n@@ -74,6 +76,11 @@ public void testLoadFeaturesFromBase() throws Exception {\n         provider.stop();\n     }\n \n+    /**\n+     * {@link https://issues.apache.org/jira/browse/DL-40}\n+     */\n+    @DistributedLogAnnotations.FlakyTest\n+    @Ignore\n     @Test(timeout = 60000)\n     public void testLoadFeaturesFromOverlay() throws Exception {\n         PropertiesWriter writer = new PropertiesWriter();"},{"sha":"2073b175d863449540e46b40861c5f49ce5b9055","filename":"src/test/resources/log4j.properties","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fresources%2Flog4j.properties","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/a1890ec9992442ca0e051a674df2a130de6fd0a9/src%2Ftest%2Fresources%2Flog4j.properties","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fresources%2Flog4j.properties?ref=a1890ec9992442ca0e051a674df2a130de6fd0a9","patch":"@@ -23,15 +23,15 @@\n #\n \n # Example with rolling log file\n-log4j.rootLogger=INFO, R\n+log4j.rootLogger=INFO, CONSOLE\n \n #disable zookeeper logging\n log4j.logger.org.apache.zookeeper=OFF\n #Set the bookkeeper level to warning\n log4j.logger.org.apache.bookkeeper=INFO\n \n log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n-log4j.appender.CONSOLE.Threshold=TRACE\n+log4j.appender.CONSOLE.Threshold=INFO\n log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\n log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n\n "}]}