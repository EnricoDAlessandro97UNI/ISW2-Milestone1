{"sha":"3953dfb058ce841c8a23faadfc707ed5995f7b40","node_id":"MDY6Q29tbWl0NDc4NTkyNTI2OjM5NTNkZmIwNThjZTg0MWM4YTIzZmFhZGZjNzA3ZWQ1OTk1ZjdiNDA=","commit":{"author":{"name":"xieliang","email":"xieliang007@gmail.com","date":"2016-12-27T17:05:00Z"},"committer":{"name":"Sijie Guo","email":"sijieg@twitter.com","date":"2016-12-27T17:05:00Z"},"message":"DL-155: fix flaky TestAsyncReaderLock#testReaderLockMultiReadersScenario\n\nRan the case with changed patch 30 times, all are passed;   and it'll fail w/o patch\n\nAuthor: xieliang <xieliang007@gmail.com>\n\nReviewers: Sijie Guo <sijie@apache.org>\n\nCloses #88 from xieliang/DL-155","tree":{"sha":"585dafdca7462493c313d918a652bbac4ed6e789","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/trees/585dafdca7462493c313d918a652bbac4ed6e789"},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/git/commits/3953dfb058ce841c8a23faadfc707ed5995f7b40","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/3953dfb058ce841c8a23faadfc707ed5995f7b40","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/3953dfb058ce841c8a23faadfc707ed5995f7b40","comments_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/3953dfb058ce841c8a23faadfc707ed5995f7b40/comments","author":{"login":"xieliang","id":1712953,"node_id":"MDQ6VXNlcjE3MTI5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1712953?v=4","gravatar_id":"","url":"https://api.github.com/users/xieliang","html_url":"https://github.com/xieliang","followers_url":"https://api.github.com/users/xieliang/followers","following_url":"https://api.github.com/users/xieliang/following{/other_user}","gists_url":"https://api.github.com/users/xieliang/gists{/gist_id}","starred_url":"https://api.github.com/users/xieliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xieliang/subscriptions","organizations_url":"https://api.github.com/users/xieliang/orgs","repos_url":"https://api.github.com/users/xieliang/repos","events_url":"https://api.github.com/users/xieliang/events{/privacy}","received_events_url":"https://api.github.com/users/xieliang/received_events","type":"User","site_admin":false},"committer":null,"parents":[{"sha":"ef4572afa128dabf0607068eadfb6f3e50d43da2","url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/commits/ef4572afa128dabf0607068eadfb6f3e50d43da2","html_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/commit/ef4572afa128dabf0607068eadfb6f3e50d43da2"}],"stats":{"total":4,"additions":2,"deletions":2},"files":[{"sha":"47cabba4e48a3db08de888e368a5fbc6d984eaf1","filename":"src/test/java/com/twitter/distributedlog/TestAsyncReaderLock.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/blob/3953dfb058ce841c8a23faadfc707ed5995f7b40/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderLock.java","raw_url":"https://github.com/EnricoDAlessandro97UNI/bookkeeper/raw/3953dfb058ce841c8a23faadfc707ed5995f7b40/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderLock.java","contents_url":"https://api.github.com/repos/EnricoDAlessandro97UNI/bookkeeper/contents/src%2Ftest%2Fjava%2Fcom%2Ftwitter%2Fdistributedlog%2FTestAsyncReaderLock.java?ref=3953dfb058ce841c8a23faadfc707ed5995f7b40","patch":"@@ -421,10 +421,10 @@ public void testReaderLockMultiReadersScenario() throws Exception {\n         URI uri = createDLMURI(\"/\" + name);\n         ensureURICreated(uri);\n \n-        // Force immediate flush to make dlsn counting easy.\n         DistributedLogConfiguration localConf = new DistributedLogConfiguration();\n         localConf.addConfiguration(conf);\n-        localConf.setImmediateFlushEnabled(true);\n+        localConf.setImmediateFlushEnabled(false);\n+        localConf.setPeriodicFlushFrequencyMilliSeconds(60 * 1000);\n         localConf.setOutputBufferSize(0);\n         // Otherwise, we won't be able to run scheduled threads for readahead when we're in a callback.\n         localConf.setNumWorkerThreads(2);"}]}